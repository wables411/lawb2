const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-BhoaEcwK.js","assets/if-defined-DOLBNhyE.js","assets/index-D88yzm-1.js","assets/index-D8M8OqNs.js","assets/ref-CZzbfl45.js","assets/index-kb-QH3Dm.js","assets/index-DvOF-Zg-.js","assets/index-CbHhAxW6.js","assets/index-DwG_sLN_.js","assets/index-TMs3pMGz.js","assets/index-BDe0kLGe.js","assets/index-B8xfYvsr.js","assets/email-BGtp8NWd.js","assets/index-BPqQ_K4T.js","assets/socials-u4ZDoqNy.js","assets/index-BcISKOkU.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-CsqcT3tl.js","assets/index-BJ-tRNPv.js","assets/index-CRzjAKPo.js","assets/index-BBZ47S4K.js","assets/swaps-CSKefHbJ.js","assets/index-DrHhudwU.js","assets/index-CcKDClUG.js","assets/index-C272NruP.js","assets/send-BloF-QlV.js","assets/index-6Qupnl8I.js","assets/index-Cp6YoSve.js","assets/receive-DlS_WLXi.js","assets/index-PvTDZQqw.js","assets/onramp-BhQCM9iI.js","assets/index-BwX3ynJF.js","assets/index-CP932Bfn.js","assets/index-CMUCU6M9.js","assets/transactions-CxZ1dbr0.js","assets/index-DjZx0CWC.js","assets/index-DUoodf2-.js","assets/index-Dj-iJKJS.js","assets/index-CPCSfY6C.js","assets/index-jvkLLPF0.js","assets/w3m-modal-DEo1GCyA.js"])))=>i.map(i=>d[i]);
var ure=Object.defineProperty;var Z$=t=>{throw TypeError(t)};var dre=(t,e,n)=>e in t?ure(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>dre(t,typeof e!="symbol"?e+"":e,n),AR=(t,e,n)=>e.has(t)||Z$("Cannot "+n);var C=(t,e,n)=>(AR(t,e,"read from private field"),n?n.call(t):e.get(t)),Q=(t,e,n)=>e.has(t)?Z$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),L=(t,e,n,r)=>(AR(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),he=(t,e,n)=>(AR(t,e,"access private method"),n);var Id=(t,e,n,r)=>({set _(s){L(t,e,s,n)},get _(){return C(t,e,r)}});function hre(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function im(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function pz(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var gz={exports:{}},gN={},mz={exports:{}},en={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_=Symbol.for("react.element"),fre=Symbol.for("react.portal"),pre=Symbol.for("react.fragment"),gre=Symbol.for("react.strict_mode"),mre=Symbol.for("react.profiler"),yre=Symbol.for("react.provider"),wre=Symbol.for("react.context"),bre=Symbol.for("react.forward_ref"),vre=Symbol.for("react.suspense"),Ere=Symbol.for("react.memo"),Cre=Symbol.for("react.lazy"),X$=Symbol.iterator;function _re(t){return t===null||typeof t!="object"?null:(t=X$&&t[X$]||t["@@iterator"],typeof t=="function"?t:null)}var yz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wz=Object.assign,bz={};function cb(t,e,n){this.props=t,this.context=e,this.refs=bz,this.updater=n||yz}cb.prototype.isReactComponent={};cb.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cb.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vz(){}vz.prototype=cb.prototype;function K5(t,e,n){this.props=t,this.context=e,this.refs=bz,this.updater=n||yz}var Y5=K5.prototype=new vz;Y5.constructor=K5;wz(Y5,cb.prototype);Y5.isPureReactComponent=!0;var eB=Array.isArray,Ez=Object.prototype.hasOwnProperty,Q5={current:null},Cz={key:!0,ref:!0,__self:!0,__source:!0};function _z(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ez.call(e,r)&&!Cz.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:H_,type:t,key:i,ref:o,props:s,_owner:Q5.current}}function Are(t,e){return{$$typeof:H_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function J5(t){return typeof t=="object"&&t!==null&&t.$$typeof===H_}function Sre(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tB=/\/+/g;function SR(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Sre(""+t.key):e.toString(36)}function AS(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case H_:case fre:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+SR(o,0):r,eB(s)?(n="",t!=null&&(n=t.replace(tB,"$&/")+"/"),AS(s,e,n,"",function(l){return l})):s!=null&&(J5(s)&&(s=Are(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(tB,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",eB(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+SR(i,a);o+=AS(i,e,n,c,s)}else if(c=_re(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+SR(i,a++),o+=AS(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function iA(t,e,n){if(t==null)return t;var r=[],s=0;return AS(t,r,"","",function(i){return e.call(n,i,s++)}),r}function xre(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $i={current:null},SS={transition:null},Ire={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:SS,ReactCurrentOwner:Q5};function Az(){throw Error("act(...) is not supported in production builds of React.")}en.Children={map:iA,forEach:function(t,e,n){iA(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return iA(t,function(){e++}),e},toArray:function(t){return iA(t,function(e){return e})||[]},only:function(t){if(!J5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};en.Component=cb;en.Fragment=pre;en.Profiler=mre;en.PureComponent=K5;en.StrictMode=gre;en.Suspense=vre;en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ire;en.act=Az;en.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wz({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Q5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Ez.call(e,c)&&!Cz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:H_,type:t.type,key:s,ref:i,props:r,_owner:o}};en.createContext=function(t){return t={$$typeof:wre,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yre,_context:t},t.Consumer=t};en.createElement=_z;en.createFactory=function(t){var e=_z.bind(null,t);return e.type=t,e};en.createRef=function(){return{current:null}};en.forwardRef=function(t){return{$$typeof:bre,render:t}};en.isValidElement=J5;en.lazy=function(t){return{$$typeof:Cre,_payload:{_status:-1,_result:t},_init:xre}};en.memo=function(t,e){return{$$typeof:Ere,type:t,compare:e===void 0?null:e}};en.startTransition=function(t){var e=SS.transition;SS.transition={};try{t()}finally{SS.transition=e}};en.unstable_act=Az;en.useCallback=function(t,e){return $i.current.useCallback(t,e)};en.useContext=function(t){return $i.current.useContext(t)};en.useDebugValue=function(){};en.useDeferredValue=function(t){return $i.current.useDeferredValue(t)};en.useEffect=function(t,e){return $i.current.useEffect(t,e)};en.useId=function(){return $i.current.useId()};en.useImperativeHandle=function(t,e,n){return $i.current.useImperativeHandle(t,e,n)};en.useInsertionEffect=function(t,e){return $i.current.useInsertionEffect(t,e)};en.useLayoutEffect=function(t,e){return $i.current.useLayoutEffect(t,e)};en.useMemo=function(t,e){return $i.current.useMemo(t,e)};en.useReducer=function(t,e,n){return $i.current.useReducer(t,e,n)};en.useRef=function(t){return $i.current.useRef(t)};en.useState=function(t){return $i.current.useState(t)};en.useSyncExternalStore=function(t,e,n){return $i.current.useSyncExternalStore(t,e,n)};en.useTransition=function(){return $i.current.useTransition()};en.version="18.3.1";mz.exports=en;var D=mz.exports;const Zo=im(D),Nre=hre({__proto__:null,default:Zo},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tre=D,Rre=Symbol.for("react.element"),Pre=Symbol.for("react.fragment"),Ore=Object.prototype.hasOwnProperty,kre=Tre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dre={key:!0,ref:!0,__self:!0,__source:!0};function Sz(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ore.call(e,r)&&!Dre.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Rre,type:t,key:i,ref:o,props:s,_owner:kre.current}}gN.Fragment=Pre;gN.jsx=Sz;gN.jsxs=Sz;gz.exports=gN;var m=gz.exports,nB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne=function(t,e){if(!t)throw lb(e)},lb=function(t){return new Error("Firebase Database ("+xz.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Mre=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Z5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Iz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Mre(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Lre;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Lre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nz=function(t){const e=Iz(t);return Z5.encodeByteArray(e,!0)},wx=function(t){return Nz(t).replace(/\./g,"")},N2=function(t){try{return Z5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ure(t){return Tz(void 0,t)}function Tz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!$re(n)||(t[n]=Tz(t[n],e[n]));return t}function $re(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fre=()=>Bre().__FIREBASE_DEFAULTS__,jre=()=>{if(typeof process>"u"||typeof nB>"u")return;const t=nB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Wre=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&N2(t[1]);return e&&JSON.parse(e)},Rz=()=>{try{return Fre()||jre()||Wre()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zre=t=>{var e,n;return(n=(e=Rz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Hre=t=>{const e=zre(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pz=()=>{var t;return(t=Rz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gre(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wx(JSON.stringify(n)),wx(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qre(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Oz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qre())}function Vre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kre(){return xz.NODE_ADMIN===!0}function Yre(){try{return typeof indexedDB=="object"}catch{return!1}}function Qre(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jre="FirebaseError";class q_ extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Jre,Object.setPrototypeOf(this,q_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kz.prototype.create)}}class kz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Zre(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new q_(s,a,r)}}function Zre(t,e){return t.replace(Xre,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Xre=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t){return JSON.parse(t)}function rs(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=jE(N2(i[0])||""),n=jE(N2(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},ese=function(t){const e=Dz(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},tse=function(t){const e=Dz(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gw(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function rB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bx(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function T2(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(sB(i)&&sB(o)){if(!T2(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function sB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nse(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rse{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function mN(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sse=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Ne(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},yN=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t){return t&&t._delegate?t._delegate:t}class WE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ise{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new G_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ase(e))try{this.getOrInitializeService({instanceIdentifier:rp})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=rp){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rp){return this.instances.has(e)}getOptions(e=rp){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ose(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rp){return this.component?this.component.multipleInstances?e:rp:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ose(t){return t===rp?void 0:t}function ase(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cse{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ise(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xn||(Xn={}));const lse={debug:Xn.DEBUG,verbose:Xn.VERBOSE,info:Xn.INFO,warn:Xn.WARN,error:Xn.ERROR,silent:Xn.SILENT},use=Xn.INFO,dse={[Xn.DEBUG]:"log",[Xn.VERBOSE]:"log",[Xn.INFO]:"info",[Xn.WARN]:"warn",[Xn.ERROR]:"error"},hse=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=dse[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mz{constructor(e){this.name=e,this._logLevel=use,this._logHandler=hse,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lse[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xn.DEBUG,...e),this._logHandler(this,Xn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xn.VERBOSE,...e),this._logHandler(this,Xn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xn.INFO,...e),this._logHandler(this,Xn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xn.WARN,...e),this._logHandler(this,Xn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xn.ERROR,...e),this._logHandler(this,Xn.ERROR,...e)}}const fse=(t,e)=>e.some(n=>t instanceof n);let iB,oB;function pse(){return iB||(iB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gse(){return oB||(oB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lz=new WeakMap,R2=new WeakMap,Uz=new WeakMap,xR=new WeakMap,X5=new WeakMap;function mse(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(qh(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Lz.set(n,t)}).catch(()=>{}),X5.set(e,t),e}function yse(t){if(R2.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});R2.set(t,e)}let P2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return R2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Uz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wse(t){P2=t(P2)}function bse(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(IR(this),e,...n);return Uz.set(r,e.sort?e.sort():[e]),qh(r)}:gse().includes(t)?function(...e){return t.apply(IR(this),e),qh(Lz.get(this))}:function(...e){return qh(t.apply(IR(this),e))}}function vse(t){return typeof t=="function"?bse(t):(t instanceof IDBTransaction&&yse(t),fse(t,pse())?new Proxy(t,P2):t)}function qh(t){if(t instanceof IDBRequest)return mse(t);if(xR.has(t))return xR.get(t);const e=vse(t);return e!==t&&(xR.set(t,e),X5.set(e,t)),e}const IR=t=>X5.get(t);function Ese(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=qh(o);return r&&o.addEventListener("upgradeneeded",c=>{r(qh(o.result),c.oldVersion,c.newVersion,qh(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Cse=["get","getKey","getAll","getAllKeys","count"],_se=["put","add","delete","clear"],NR=new Map;function aB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(NR.get(e))return NR.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=_se.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Cse.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return NR.set(e,i),i}wse(t=>({...t,get:(e,n,r)=>aB(e,n)||t.get(e,n,r),has:(e,n)=>!!aB(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ase{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Sse(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Sse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const O2="@firebase/app",cB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=new Mz("@firebase/app"),xse="@firebase/app-compat",Ise="@firebase/analytics-compat",Nse="@firebase/analytics",Tse="@firebase/app-check-compat",Rse="@firebase/app-check",Pse="@firebase/auth",Ose="@firebase/auth-compat",kse="@firebase/database",Dse="@firebase/data-connect",Mse="@firebase/database-compat",Lse="@firebase/functions",Use="@firebase/functions-compat",$se="@firebase/installations",Bse="@firebase/installations-compat",Fse="@firebase/messaging",jse="@firebase/messaging-compat",Wse="@firebase/performance",zse="@firebase/performance-compat",Hse="@firebase/remote-config",Gse="@firebase/remote-config-compat",qse="@firebase/storage",Vse="@firebase/storage-compat",Kse="@firebase/firestore",Yse="@firebase/vertexai-preview",Qse="@firebase/firestore-compat",Jse="firebase",Zse="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="[DEFAULT]",Xse={[O2]:"fire-core",[xse]:"fire-core-compat",[Nse]:"fire-analytics",[Ise]:"fire-analytics-compat",[Rse]:"fire-app-check",[Tse]:"fire-app-check-compat",[Pse]:"fire-auth",[Ose]:"fire-auth-compat",[kse]:"fire-rtdb",[Dse]:"fire-data-connect",[Mse]:"fire-rtdb-compat",[Lse]:"fire-fn",[Use]:"fire-fn-compat",[$se]:"fire-iid",[Bse]:"fire-iid-compat",[Fse]:"fire-fcm",[jse]:"fire-fcm-compat",[Wse]:"fire-perf",[zse]:"fire-perf-compat",[Hse]:"fire-rc",[Gse]:"fire-rc-compat",[qse]:"fire-gcs",[Vse]:"fire-gcs-compat",[Kse]:"fire-fst",[Qse]:"fire-fst-compat",[Yse]:"fire-vertex","fire-js":"fire-js",[Jse]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new Map,eie=new Map,D2=new Map;function lB(t,e){try{t.container.addComponent(e)}catch(n){cd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vx(t){const e=t.name;if(D2.has(e))return cd.debug(`There were multiple attempts to register component ${e}.`),!1;D2.set(e,t);for(const n of zE.values())lB(n,t);for(const n of eie.values())lB(n,t);return!0}function tie(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nie={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vh=new kz("app","Firebase",nie);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rie{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new WE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sie=Zse;function $z(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:k2,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Vh.create("bad-app-name",{appName:String(s)});if(n||(n=Pz()),!n)throw Vh.create("no-options");const i=zE.get(s);if(i){if(T2(n,i.options)&&T2(r,i.config))return i;throw Vh.create("duplicate-app",{appName:s})}const o=new cse(s);for(const c of D2.values())o.addComponent(c);const a=new rie(n,r,o);return zE.set(s,a),a}function Bz(t=k2){const e=zE.get(t);if(!e&&t===k2&&Pz())return $z();if(!e)throw Vh.create("no-app",{appName:t});return e}function iie(){return Array.from(zE.values())}function Qy(t,e,n){var r;let s=(r=Xse[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cd.warn(a.join(" "));return}vx(new WE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oie="firebase-heartbeat-database",aie=1,HE="firebase-heartbeat-store";let TR=null;function Fz(){return TR||(TR=Ese(oie,aie,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(HE)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vh.create("idb-open",{originalErrorMessage:t.message})})),TR}async function cie(t){try{const n=(await Fz()).transaction(HE),r=await n.objectStore(HE).get(jz(t));return await n.done,r}catch(e){if(e instanceof q_)cd.warn(e.message);else{const n=Vh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cd.warn(n.message)}}}async function uB(t,e){try{const r=(await Fz()).transaction(HE,"readwrite");await r.objectStore(HE).put(e,jz(t)),await r.done}catch(n){if(n instanceof q_)cd.warn(n.message);else{const r=Vh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cd.warn(r.message)}}}function jz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lie=1024,uie=30*24*60*60*1e3;class die{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=dB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=uie}),this._storage.overwrite(this._heartbeatsCache))}catch(r){cd.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dB(),{heartbeatsToSend:r,unsentEntries:s}=hie(this._heartbeatsCache.heartbeats),i=wx(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return cd.warn(n),""}}}function dB(){return new Date().toISOString().substring(0,10)}function hie(t,e=lie){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),hB(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),hB(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yre()?Qre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cie(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return uB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return uB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function hB(t){return wx(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pie(t){vx(new WE("platform-logger",e=>new Ase(e),"PRIVATE")),vx(new WE("heartbeat",e=>new die(e),"PRIVATE")),Qy(O2,cB,t),Qy(O2,cB,"esm2017"),Qy("fire-js","")}pie("");var gie="firebase",mie="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qy(gie,mie,"app");var fB={};const pB="@firebase/database",gB="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wz="";function yie(t){Wz=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wie{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),rs(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:jE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bie{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return nu(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wie(e)}}catch{}return new bie},_p=zz("localStorage"),vie=zz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=new Mz("@firebase/database"),Eie=function(){let t=1;return function(){return t++}}(),Hz=function(t){const e=sse(t),n=new rse;n.update(e);const r=n.digest();return Z5.encodeByteArray(r)},V_=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=V_.apply(null,r):typeof r=="object"?e+=rs(r):e+=r,e+=" "}return e};let oE=null,mB=!0;const Cie=function(t,e){Ne(!0,"Can't turn on custom loggers persistently."),Jy.logLevel=Xn.VERBOSE,oE=Jy.log.bind(Jy)},Bs=function(...t){if(mB===!0&&(mB=!1,oE===null&&vie.get("logging_enabled")===!0&&Cie()),oE){const e=V_.apply(null,t);oE(e)}},K_=function(t){return function(...e){Bs(t,...e)}},M2=function(...t){const e="FIREBASE INTERNAL ERROR: "+V_(...t);Jy.error(e)},ld=function(...t){const e=`FIREBASE FATAL ERROR: ${V_(...t)}`;throw Jy.error(e),new Error(e)},ki=function(...t){const e="FIREBASE WARNING: "+V_(...t);Jy.warn(e)},_ie=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ki("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},eM=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Aie=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},mw="[MIN_NAME]",Sg="[MAX_NAME]",om=function(t,e){if(t===e)return 0;if(t===mw||e===Sg)return-1;if(e===mw||t===Sg)return 1;{const n=yB(t),r=yB(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Sie=function(t,e){return t===e?0:t<e?-1:1},Qb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+rs(e))},tM=function(t){if(typeof t!="object"||t===null)return rs(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=rs(e[r]),n+=":",n+=tM(t[e[r]]);return n+="}",n},Gz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Vs(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const qz=function(t){Ne(!eM(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},xie=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Iie=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Nie(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Tie=new RegExp("^-?(0*)\\d{1,10}$"),Rie=-2147483648,Pie=2147483647,yB=function(t){if(Tie.test(t)){const e=Number(t);if(e>=Rie&&e<=Pie)return e}return null},db=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ki("Exception was thrown by user callback.",n),e},Math.floor(0))}},Oie=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},aE=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kie{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ki(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Die{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Bs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ki(e)}}class xS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}xS.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="5",Vz="v",Kz="s",Yz="r",Qz="f",Jz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zz="ls",Xz="p",L2="ac",eH="websocket",tH="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_p.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_p.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Mie(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function rH(t,e,n){Ne(typeof e=="string","typeof type must == string"),Ne(typeof n=="object","typeof params must == object");let r;if(e===eH)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===tH)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Mie(t)&&(n.ns=t.namespace);const s=[];return Vs(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lie{constructor(){this.counters_={}}incrementCounter(e,n=1){nu(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Ure(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR={},PR={};function rM(t){const e=t.toString();return RR[e]||(RR[e]=new Lie),RR[e]}function Uie(t,e){const n=t.toString();return PR[n]||(PR[n]=e()),PR[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ie{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&db(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB="start",Bie="close",Fie="pLPCommand",jie="pRTLPCB",sH="id",iH="pw",oH="ser",Wie="cb",zie="seg",Hie="ts",Gie="d",qie="dframe",aH=1870,cH=30,Vie=aH-cH,Kie=25e3,Yie=3e4;class Iy{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=K_(e),this.stats_=rM(n),this.urlFn=c=>(this.appCheckToken&&(c[L2]=this.appCheckToken),rH(n,tH,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new $ie(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Yie)),Aie(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sM((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===wB)this.id=a,this.password=c;else if(o===Bie)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[wB]="t",r[oH]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Wie]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Vz]=nM,this.transportSessionId&&(r[Kz]=this.transportSessionId),this.lastSessionId&&(r[Zz]=this.lastSessionId),this.applicationId&&(r[Xz]=this.applicationId),this.appCheckToken&&(r[L2]=this.appCheckToken),typeof location<"u"&&location.hostname&&Jz.test(location.hostname)&&(r[Yz]=Qz);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Iy.forceAllow_=!0}static forceDisallow(){Iy.forceDisallow_=!0}static isAvailable(){return Iy.forceAllow_?!0:!Iy.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xie()&&!Iie()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=rs(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Nz(n),s=Gz(r,Vie);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[qie]="t",r[sH]=e,r[iH]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=rs(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class sM{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Eie(),window[Fie+this.uniqueCallbackIdentifier]=e,window[jie+this.uniqueCallbackIdentifier]=n,this.myIFrame=sM.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Bs("frame writing exception"),a.stack&&Bs(a.stack),Bs(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Bs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[sH]=this.myID,e[iH]=this.myPW,e[oH]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+cH+r.length<=aH;){const o=this.pendingSegs.shift();r=r+"&"+zie+s+"="+o.seg+"&"+Hie+s+"="+o.ts+"&"+Gie+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Kie)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Bs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qie=16384,Jie=45e3;let Ex=null;typeof MozWebSocket<"u"?Ex=MozWebSocket:typeof WebSocket<"u"&&(Ex=WebSocket);class Rc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=K_(this.connId),this.stats_=rM(n),this.connURL=Rc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Vz]=nM,typeof location<"u"&&location.hostname&&Jz.test(location.hostname)&&(o[Yz]=Qz),n&&(o[Kz]=n),r&&(o[Zz]=r),s&&(o[L2]=s),i&&(o[Xz]=i),rH(e,eH,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_p.set("previous_websocket_failure",!0);try{let r;Kre(),this.mySock=new Ex(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Rc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ex!==null&&!Rc.forceDisallow_}static previouslyFailed(){return _p.isInMemoryStorage||_p.get("previous_websocket_failure")===!0}markConnectionHealthy(){_p.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=jE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=rs(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Gz(n,Qie);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Jie))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Rc.responsesRequiredToBeHealthy=2;Rc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Iy,Rc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Rc&&Rc.isAvailable();let r=n&&!Rc.previouslyFailed();if(e.webSocketOnly&&(n||ki("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Rc];else{const s=this.transports_=[];for(const i of GE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);GE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}GE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zie=6e4,Xie=5e3,eoe=10*1024,toe=100*1024,OR="t",bB="d",noe="s",vB="r",roe="e",EB="o",CB="a",_B="n",AB="p",soe="h";class ioe{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=K_("c:"+this.id+":"),this.transportManager_=new GE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=aE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>toe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>eoe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(OR in e){const n=e[OR];n===CB?this.upgradeIfSecondaryHealthy_():n===vB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===EB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Qb("t",e),r=Qb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:AB,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:CB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:_B,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Qb("t",e),r=Qb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Qb(OR,e);if(bB in e){const r=e[bB];if(n===soe){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===_B){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===noe?this.onConnectionShutdown_(r):n===vB?this.onReset_(r):n===roe?M2("Server Error: "+r):n===EB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):M2("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),nM!==r&&ki("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),aE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Zie))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):aE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Xie))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:AB,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uH=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx extends uH{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Oz()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Cx}getInitialEvent(e){return Ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB=32,xB=768;class jn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function bn(){return new jn("")}function Yt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function yf(t){return t.pieces_.length-t.pieceNum_}function tr(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new jn(t.pieces_,e)}function iM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ooe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function qE(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function dH(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new jn(e,0)}function Tr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof jn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new jn(n,0)}function Xt(t){return t.pieceNum_>=t.pieces_.length}function Ni(t,e){const n=Yt(t),r=Yt(e);if(n===null)return e;if(n===r)return Ni(tr(t),tr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function aoe(t,e){const n=qE(t,0),r=qE(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=om(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function oM(t,e){if(yf(t)!==yf(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ma(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(yf(t)>yf(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class coe{constructor(e,n){this.errorPrefix_=n,this.parts_=qE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=yN(this.parts_[r]);hH(this)}}function loe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=yN(e),hH(t)}function uoe(t){const e=t.parts_.pop();t.byteLength_-=yN(e),t.parts_.length>0&&(t.byteLength_-=1)}function hH(t){if(t.byteLength_>xB)throw new Error(t.errorPrefix_+"has a key path longer than "+xB+" bytes ("+t.byteLength_+").");if(t.parts_.length>SB)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+SB+") or object contains a cycle "+sp(t))}function sp(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM extends uH{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new aM}getInitialEvent(e){return Ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=1e3,doe=60*5*1e3,IB=30*1e3,hoe=1.3,foe=3e4,poe="server_kill",NB=3;class Zu extends lH{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Zu.nextPersistentConnectionId_++,this.log_=K_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jb,this.maxReconnectDelay_=doe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");aM.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Cx.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(rs(i)),Ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new G_,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ne(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Zu.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&nu(e,"w")){const r=gw(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();ki(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||tse(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=IB)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=ese(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+rs(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):M2("Unrecognized action received from server: "+rs(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Jb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>foe&&(this.reconnectDelay_=Jb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*hoe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Zu.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Ne(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Bs("getToken() completed but was canceled"):(Bs("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new ioe(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{ki(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(poe)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ki(d),c())}}}interrupt(e){Bs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Bs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],rB(this.interruptReasons_)&&(this.reconnectDelay_=Jb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>tM(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new jn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Bs("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=NB&&(this.reconnectDelay_=IB,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Bs("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=NB&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Wz.replace(/\./g,"-")]=1,Oz()?e["framework.cordova"]=1:Vre()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Cx.getInstance().currentlyOnline();return rB(this.interruptReasons_)&&e}}Zu.nextPersistentConnectionId_=0;Zu.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Qt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Qt(mw,e),s=new Qt(mw,n);return this.compare(r,s)!==0}minPost(){return Qt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oA;class fH extends wN{static get __EMPTY_NODE(){return oA}static set __EMPTY_NODE(e){oA=e}compare(e,n){return om(e.name,n.name)}isDefinedOn(e){throw lb("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Qt.MIN}maxPost(){return new Qt(Sg,oA)}makePost(e,n){return Ne(typeof e=="string","KeyIndex indexValue must always be a string."),new Qt(e,oA)}toString(){return".key"}}const Zy=new fH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class gs{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??gs.RED,this.left=s??mo.EMPTY_NODE,this.right=i??mo.EMPTY_NODE}copy(e,n,r,s,i){return new gs(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return mo.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return mo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}gs.RED=!0;gs.BLACK=!1;class goe{copy(e,n,r,s,i){return this}insert(e,n,r){return new gs(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class mo{constructor(e,n=mo.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new mo(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,gs.BLACK,null,null))}remove(e){return new mo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gs.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new aA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new aA(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new aA(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new aA(this.root_,null,this.comparator_,!0,e)}}mo.EMPTY_NODE=new goe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function moe(t,e){return om(t.name,e.name)}function cM(t,e){return om(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U2;function yoe(t){U2=t}const pH=function(t){return typeof t=="number"?"number:"+qz(t):"string:"+t},gH=function(t){if(t.isLeafNode()){const e=t.val();Ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&nu(e,".sv"),"Priority must be a string or number.")}else Ne(t===U2||t.isEmpty(),"priority of unexpected type.");Ne(t===U2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TB;class ps{constructor(e,n=ps.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),gH(this.priorityNode_)}static set __childrenNodeConstructor(e){TB=e}static get __childrenNodeConstructor(){return TB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ps(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ps.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Xt(e)?this:Yt(e)===".priority"?this.priorityNode_:ps.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ps.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Yt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ne(r!==".priority"||yf(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ps.__childrenNodeConstructor.EMPTY_NODE.updateChild(tr(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+pH(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=qz(this.value_):e+=this.value_,this.lazyHash_=Hz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ps.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ps.__childrenNodeConstructor?-1:(Ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=ps.VALUE_TYPE_ORDER.indexOf(n),i=ps.VALUE_TYPE_ORDER.indexOf(r);return Ne(s>=0,"Unknown leaf type: "+n),Ne(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ps.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mH,yH;function woe(t){mH=t}function boe(t){yH=t}class voe extends wN{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?om(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Qt.MIN}maxPost(){return new Qt(Sg,new ps("[PRIORITY-POST]",yH))}makePost(e,n){const r=mH(e);return new Qt(n,new ps("[PRIORITY-POST]",r))}toString(){return".priority"}}const Rr=new voe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eoe=Math.log(2);class Coe{constructor(e){const n=i=>parseInt(Math.log(i)/Eoe,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _x=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new gs(h,d.node,gs.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new gs(h,d.node,gs.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,y=d;d-=p;const b=s(w+1,y),v=t[w],A=n?n(v):v;f(new gs(A,v.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,gs.BLACK):(h(w,gs.BLACK),h(w,gs.RED))}return u},o=new Coe(t.length),a=i(o);return new mo(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kR;const Fm={};class qu{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ne(Fm&&Rr,"ChildrenNode.ts has not been loaded"),kR=kR||new qu({".priority":Fm},{".priority":Rr}),kR}get(e){const n=gw(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof mo?n:null}hasIndex(e){return nu(this.indexSet_,e.toString())}addIndex(e,n){Ne(e!==Zy,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Qt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=_x(r,e.getCompare()):a=Fm;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new qu(u,l)}addToIndexes(e,n){const r=bx(this.indexes_,(s,i)=>{const o=gw(this.indexSet_,i);if(Ne(o,"Missing index implementation for "+i),s===Fm)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Qt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),_x(a,o.getCompare())}else return Fm;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Qt(e.name,a))),c.insert(e,e.node)}});return new qu(r,this.indexSet_)}removeFromIndexes(e,n){const r=bx(this.indexes_,s=>{if(s===Fm)return s;{const i=n.get(e.name);return i?s.remove(new Qt(e.name,i)):s}});return new qu(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zb;class _t{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&gH(this.priorityNode_),this.children_.isEmpty()&&Ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Zb||(Zb=new _t(new mo(cM),null,qu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Zb}updatePriority(e){return this.children_.isEmpty()?this:new _t(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Zb:n}}getChild(e){const n=Yt(e);return n===null?this:this.getImmediateChild(n).getChild(tr(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Qt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Zb:this.priorityNode_;return new _t(s,o,i)}}updateChild(e,n){const r=Yt(e);if(r===null)return n;{Ne(Yt(e)!==".priority"||yf(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(tr(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Rr,(o,a)=>{n[o]=a.val(e),r++,i&&_t.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+pH(this.getPriority().val())+":"),this.forEachChild(Rr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Hz(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Qt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Qt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Qt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Qt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Qt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Y_?-1:0}withIndex(e){if(e===Zy||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new _t(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Zy||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Rr),s=n.getIterator(Rr);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Zy?null:this.indexMap_.get(e.toString())}}_t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class _oe extends _t{constructor(){super(new mo(cM),_t.EMPTY_NODE,qu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _t.EMPTY_NODE}isEmpty(){return!1}}const Y_=new _oe;Object.defineProperties(Qt,{MIN:{value:new Qt(mw,_t.EMPTY_NODE)},MAX:{value:new Qt(Sg,Y_)}});fH.__EMPTY_NODE=_t.EMPTY_NODE;ps.__childrenNodeConstructor=_t;yoe(Y_);boe(Y_);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aoe=!0;function ts(t,e=null){if(t===null)return _t.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ps(n,ts(e))}if(!(t instanceof Array)&&Aoe){const n=[];let r=!1;if(Vs(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=ts(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Qt(o,c)))}}),n.length===0)return _t.EMPTY_NODE;const i=_x(n,moe,o=>o.name,cM);if(r){const o=_x(n,Rr.getCompare());return new _t(i,ts(e),new qu({".priority":o},{".priority":Rr}))}else return new _t(i,ts(e),qu.Default)}else{let n=_t.EMPTY_NODE;return Vs(t,(r,s)=>{if(nu(t,r)&&r.substring(0,1)!=="."){const i=ts(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ts(e))}}woe(ts);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Soe extends wN{constructor(e){super(),this.indexPath_=e,Ne(!Xt(e)&&Yt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?om(e.name,n.name):i}makePost(e,n){const r=ts(e),s=_t.EMPTY_NODE.updateChild(this.indexPath_,r);return new Qt(n,s)}maxPost(){const e=_t.EMPTY_NODE.updateChild(this.indexPath_,Y_);return new Qt(Sg,e)}toString(){return qE(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xoe extends wN{compare(e,n){const r=e.node.compareTo(n.node);return r===0?om(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Qt.MIN}maxPost(){return Qt.MAX}makePost(e,n){const r=ts(e);return new Qt(n,r)}toString(){return".value"}}const Ioe=new xoe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wH(t){return{type:"value",snapshotNode:t}}function yw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function VE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function KE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Noe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(VE(n,a)):Ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(yw(n,r)):o.trackChildChange(KE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Rr,(s,i)=>{n.hasChild(s)||r.trackChildChange(VE(s,i))}),n.isLeafNode()||n.forEachChild(Rr,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(KE(s,i,o))}else r.trackChildChange(yw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?_t.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.indexedFilter_=new lM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=YE.getStartPost_(e),this.endPost_=YE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Qt(n,r))||(r=_t.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=_t.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(_t.EMPTY_NODE);const i=this;return n.forEachChild(Rr,(o,a)=>{i.matches(new Qt(o,a))||(s=s.updateImmediateChild(o,_t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Toe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new YE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Qt(n,r))||(r=_t.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=_t.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=_t.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(_t.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,_t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Ne(a.numChildren()===this.limit_,"");const c=new Qt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(KE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(VE(n,d));const g=a.updateImmediateChild(n,_t.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(yw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(VE(l.name,l.node)),i.trackChildChange(yw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,_t.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mw}hasEnd(){return this.endSet_}getIndexEndValue(){return Ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Sg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rr}copy(){const e=new uM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Roe(t){return t.loadsAllData()?new lM(t.getIndex()):t.hasLimit()?new Toe(t):new YE(t)}function RB(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Rr?n="$priority":t.index_===Ioe?n="$value":t.index_===Zy?n="$key":(Ne(t.index_ instanceof Soe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=rs(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=rs(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+rs(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=rs(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+rs(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function PB(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Rr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax extends lH{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=K_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Ax.getListenId_(e,r),a={};this.listens_[o]=a;const c=RB(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),gw(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=Ax.getListenId_(e,n);delete this.listens_[r]}get(e){const n=RB(e._queryParams),r=e._path.toString(),s=new G_;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+nse(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=jE(a.responseText)}catch{ki("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&ki("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Poe{constructor(){this.rootNode_=_t.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(){return{value:null,children:new Map}}function bH(t,e,n){if(Xt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Yt(e);t.children.has(r)||t.children.set(r,Sx());const s=t.children.get(r);e=tr(e),bH(s,e,n)}}function $2(t,e,n){t.value!==null?n(e,t.value):Ooe(t,(r,s)=>{const i=new jn(e.toString()+"/"+r);$2(s,i,n)})}function Ooe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class koe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Vs(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB=10*1e3,Doe=30*1e3,Moe=5*60*1e3;class Loe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new koe(e);const r=OB+(Doe-OB)*Math.random();aE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Vs(e,(s,i)=>{i>0&&nu(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),aE(this.reportStats_.bind(this),Math.floor(Math.random()*2*Moe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Dc||(Dc={}));function dM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function hM(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fM(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Dc.ACK_USER_WRITE,this.source=dM()}operationForChild(e){if(Xt(this.path)){if(this.affectedTree.value!=null)return Ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new jn(e));return new xx(bn(),n,this.revert)}}else return Ne(Yt(this.path)===e,"operationForChild called for unrelated child."),new xx(tr(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n){this.source=e,this.path=n,this.type=Dc.LISTEN_COMPLETE}operationForChild(e){return Xt(this.path)?new QE(this.source,bn()):new QE(this.source,tr(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Dc.OVERWRITE}operationForChild(e){return Xt(this.path)?new xg(this.source,bn(),this.snap.getImmediateChild(e)):new xg(this.source,tr(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Dc.MERGE}operationForChild(e){if(Xt(this.path)){const n=this.children.subtree(new jn(e));return n.isEmpty()?null:n.value?new xg(this.source,bn(),n.value):new ww(this.source,bn(),n)}else return Ne(Yt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ww(this.source,tr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Yt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uoe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $oe(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Noe(o.childName,o.snapshotNode))}),Xb(t,s,"child_removed",e,r,n),Xb(t,s,"child_added",e,r,n),Xb(t,s,"child_moved",i,r,n),Xb(t,s,"child_changed",e,r,n),Xb(t,s,"value",e,r,n),s}function Xb(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Foe(t,a,c)),o.forEach(a=>{const c=Boe(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Boe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Foe(t,e,n){if(e.childName==null||n.childName==null)throw lb("Should only compare child_ events.");const r=new Qt(e.childName,e.snapshotNode),s=new Qt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t,e){return{eventCache:t,serverCache:e}}function cE(t,e,n,r){return bN(new wf(e,n,r),t.serverCache)}function vH(t,e,n,r){return bN(t.eventCache,new wf(e,n,r))}function Ix(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ig(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DR;const joe=()=>(DR||(DR=new mo(Sie)),DR);class Jn{constructor(e,n=joe()){this.value=e,this.children=n}static fromObject(e){let n=new Jn(null);return Vs(e,(r,s)=>{n=n.set(new jn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:bn(),value:this.value};if(Xt(e))return null;{const r=Yt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(tr(e),n);return i!=null?{path:Tr(new jn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xt(e))return this;{const n=Yt(e),r=this.children.get(n);return r!==null?r.subtree(tr(e)):new Jn(null)}}set(e,n){if(Xt(e))return new Jn(n,this.children);{const r=Yt(e),i=(this.children.get(r)||new Jn(null)).set(tr(e),n),o=this.children.insert(r,i);return new Jn(this.value,o)}}remove(e){if(Xt(e))return this.children.isEmpty()?new Jn(null):new Jn(null,this.children);{const n=Yt(e),r=this.children.get(n);if(r){const s=r.remove(tr(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Jn(null):new Jn(this.value,i)}else return this}}get(e){if(Xt(e))return this.value;{const n=Yt(e),r=this.children.get(n);return r?r.get(tr(e)):null}}setTree(e,n){if(Xt(e))return n;{const r=Yt(e),i=(this.children.get(r)||new Jn(null)).setTree(tr(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Jn(this.value,o)}}fold(e){return this.fold_(bn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Tr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,bn(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Xt(e))return null;{const i=Yt(e),o=this.children.get(i);return o?o.findOnPath_(tr(e),Tr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,bn(),n)}foreachOnPath_(e,n,r){if(Xt(e))return this;{this.value&&r(n,this.value);const s=Yt(e),i=this.children.get(s);return i?i.foreachOnPath_(tr(e),Tr(n,s),r):new Jn(null)}}foreach(e){this.foreach_(bn(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Tr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.writeTree_=e}static empty(){return new Uc(new Jn(null))}}function lE(t,e,n){if(Xt(e))return new Uc(new Jn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Ni(s,e);return i=i.updateChild(o,n),new Uc(t.writeTree_.set(s,i))}else{const s=new Jn(n),i=t.writeTree_.setTree(e,s);return new Uc(i)}}}function B2(t,e,n){let r=t;return Vs(n,(s,i)=>{r=lE(r,Tr(e,s),i)}),r}function kB(t,e){if(Xt(e))return Uc.empty();{const n=t.writeTree_.setTree(e,new Jn(null));return new Uc(n)}}function F2(t,e){return am(t,e)!=null}function am(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ni(n.path,e)):null}function DB(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Rr,(r,s)=>{e.push(new Qt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Qt(r,s.value))}),e}function Kh(t,e){if(Xt(e))return t;{const n=am(t,e);return n!=null?new Uc(new Jn(n)):new Uc(t.writeTree_.subtree(e))}}function j2(t){return t.writeTree_.isEmpty()}function bw(t,e){return EH(bn(),t.writeTree_,e)}function EH(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Ne(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=EH(Tr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Tr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t,e){return SH(e,t)}function Woe(t,e,n,r,s){Ne(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=lE(t.visibleWrites,e,n)),t.lastWriteId=r}function zoe(t,e,n,r){Ne(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=B2(t.visibleWrites,e,n),t.lastWriteId=r}function Hoe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Goe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ne(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&qoe(a,r.path)?s=!1:Ma(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Voe(t),!0;if(r.snap)t.visibleWrites=kB(t.visibleWrites,r.path);else{const a=r.children;Vs(a,c=>{t.visibleWrites=kB(t.visibleWrites,Tr(r.path,c))})}return!0}else return!1}function qoe(t,e){if(t.snap)return Ma(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ma(Tr(t.path,n),e))return!0;return!1}function Voe(t){t.visibleWrites=CH(t.allWrites,Koe,bn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Koe(t){return t.visible}function CH(t,e,n){let r=Uc.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Ma(n,o)?(a=Ni(n,o),r=lE(r,a,i.snap)):Ma(o,n)&&(a=Ni(o,n),r=lE(r,bn(),i.snap.getChild(a)));else if(i.children){if(Ma(n,o))a=Ni(n,o),r=B2(r,a,i.children);else if(Ma(o,n))if(a=Ni(o,n),Xt(a))r=B2(r,bn(),i.children);else{const c=gw(i.children,Yt(a));if(c){const l=c.getChild(tr(a));r=lE(r,bn(),l)}}}else throw lb("WriteRecord should have .snap or .children")}}return r}function _H(t,e,n,r,s){if(!r&&!s){const i=am(t.visibleWrites,e);if(i!=null)return i;{const o=Kh(t.visibleWrites,e);if(j2(o))return n;if(n==null&&!F2(o,bn()))return null;{const a=n||_t.EMPTY_NODE;return bw(o,a)}}}else{const i=Kh(t.visibleWrites,e);if(!s&&j2(i))return n;if(!s&&n==null&&!F2(i,bn()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(Ma(l.path,e)||Ma(e,l.path))},a=CH(t.allWrites,o,e),c=n||_t.EMPTY_NODE;return bw(a,c)}}}function Yoe(t,e,n){let r=_t.EMPTY_NODE;const s=am(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Rr,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Kh(t.visibleWrites,e);return n.forEachChild(Rr,(o,a)=>{const c=bw(Kh(i,new jn(o)),a);r=r.updateImmediateChild(o,c)}),DB(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Kh(t.visibleWrites,e);return DB(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Qoe(t,e,n,r,s){Ne(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Tr(e,n);if(F2(t.visibleWrites,i))return null;{const o=Kh(t.visibleWrites,i);return j2(o)?s.getChild(n):bw(o,s.getChild(n))}}function Joe(t,e,n,r){const s=Tr(e,n),i=am(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Kh(t.visibleWrites,s);return bw(o,r.getNode().getImmediateChild(n))}else return null}function Zoe(t,e){return am(t.visibleWrites,e)}function Xoe(t,e,n,r,s,i,o){let a;const c=Kh(t.visibleWrites,e),l=am(c,bn());if(l!=null)a=l;else if(n!=null)a=bw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function eae(){return{visibleWrites:Uc.empty(),allWrites:[],lastWriteId:-1}}function Nx(t,e,n,r){return _H(t.writeTree,t.treePath,e,n,r)}function pM(t,e){return Yoe(t.writeTree,t.treePath,e)}function MB(t,e,n,r){return Qoe(t.writeTree,t.treePath,e,n,r)}function Tx(t,e){return Zoe(t.writeTree,Tr(t.treePath,e))}function tae(t,e,n,r,s,i){return Xoe(t.writeTree,t.treePath,e,n,r,s,i)}function gM(t,e,n){return Joe(t.writeTree,t.treePath,e,n)}function AH(t,e){return SH(Tr(t.treePath,e),t.writeTree)}function SH(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nae{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ne(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,KE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,VE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,yw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,KE(r,e.snapshotNode,s.oldSnap));else throw lb("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rae{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const xH=new rae;class mM{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new wf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gM(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ig(this.viewCache_),i=tae(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sae(t){return{filter:t}}function iae(t,e){Ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function oae(t,e,n,r,s){const i=new nae;let o,a;if(n.type===Dc.OVERWRITE){const l=n;l.source.fromUser?o=W2(t,e,l.path,l.snap,r,s,i):(Ne(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Xt(l.path),o=Rx(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===Dc.MERGE){const l=n;l.source.fromUser?o=cae(t,e,l.path,l.children,r,s,i):(Ne(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=z2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===Dc.ACK_USER_WRITE){const l=n;l.revert?o=dae(t,e,l.path,r,s,i):o=lae(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===Dc.LISTEN_COMPLETE)o=uae(t,e,n.path,r,i);else throw lb("Unknown operation type: "+n.type);const c=i.getChanges();return aae(e,o,c),{viewCache:o,changes:c}}function aae(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Ix(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(wH(Ix(e)))}}function IH(t,e,n,r,s,i){const o=e.eventCache;if(Tx(r,n)!=null)return e;{let a,c;if(Xt(n))if(Ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Ig(e),u=l instanceof _t?l:_t.EMPTY_NODE,d=pM(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=Nx(r,Ig(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Yt(n);if(l===".priority"){Ne(yf(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=MB(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=tr(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=MB(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=gM(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return cE(e,a,o.isFullyInitialized()||Xt(n),t.filter.filtersNodes())}}function Rx(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Xt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Yt(n);if(!c.isCompleteForPath(n)&&yf(n)>1)return e;const p=tr(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,xH,null)}const d=vH(e,l,c.isFullyInitialized()||Xt(n),u.filtersNodes()),h=new mM(s,d,i);return IH(t,d,n,s,h,a)}function W2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new mM(s,e,i);if(Xt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=cE(e,l,!0,t.filter.filtersNodes());else{const d=Yt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=cE(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=tr(n),f=a.getNode().getImmediateChild(d);let p;if(Xt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?iM(h)===".priority"&&g.getChild(dH(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=_t.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=cE(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function LB(t,e){return t.eventCache.isCompleteForChild(e)}function cae(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Tr(n,c);LB(e,Yt(u))&&(a=W2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Tr(n,c);LB(e,Yt(u))||(a=W2(t,a,u,l,s,i,o))}),a}function UB(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function z2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Xt(n)?l=r:l=new Jn(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=UB(t,f,h);c=Rx(t,c,new jn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=UB(t,p,h);c=Rx(t,c,new jn(d),g,s,i,o,a)}}),c}function lae(t,e,n,r,s,i,o){if(Tx(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Xt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Rx(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Xt(n)){let l=new Jn(null);return c.getNode().forEachChild(Zy,(u,d)=>{l=l.set(new jn(u),d)}),z2(t,e,n,l,s,i,a,o)}else return e}else{let l=new Jn(null);return r.foreach((u,d)=>{const h=Tr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),z2(t,e,n,l,s,i,a,o)}}function uae(t,e,n,r,s){const i=e.serverCache,o=vH(e,i.getNode(),i.isFullyInitialized()||Xt(n),i.isFiltered());return IH(t,o,n,r,xH,s)}function dae(t,e,n,r,s,i){let o;if(Tx(r,n)!=null)return e;{const a=new mM(r,e,s),c=e.eventCache.getNode();let l;if(Xt(n)||Yt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Nx(r,Ig(e));else{const d=e.serverCache.getNode();Ne(d instanceof _t,"serverChildren would be complete if leaf node"),u=pM(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Yt(n);let d=gM(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,tr(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,_t.EMPTY_NODE,tr(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Nx(r,Ig(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||Tx(r,bn())!=null,cE(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new lM(r.getIndex()),i=Roe(r);this.processor_=sae(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(_t.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(_t.EMPTY_NODE,a.getNode(),null),u=new wf(c,o.isFullyInitialized(),s.filtersNodes()),d=new wf(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=bN(d,u),this.eventGenerator_=new Uoe(this.query_)}get query(){return this.query_}}function fae(t){return t.viewCache_.serverCache.getNode()}function pae(t){return Ix(t.viewCache_)}function gae(t,e){const n=Ig(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Xt(e)&&!n.getImmediateChild(Yt(e)).isEmpty())?n.getChild(e):null}function $B(t){return t.eventRegistrations_.length===0}function mae(t,e){t.eventRegistrations_.push(e)}function BB(t,e,n){const r=[];if(n){Ne(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function FB(t,e,n,r){e.type===Dc.MERGE&&e.source.queryId!==null&&(Ne(Ig(t.viewCache_),"We should always have a full cache before handling merges"),Ne(Ix(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=oae(t.processor_,s,e,n,r);return iae(t.processor_,i.viewCache),Ne(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,NH(t,i.changes,i.viewCache.eventCache.getNode(),null)}function yae(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Rr,(i,o)=>{r.push(yw(i,o))}),n.isFullyInitialized()&&r.push(wH(n.getNode())),NH(t,r,n.getNode(),e)}function NH(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return $oe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Px;class TH{constructor(){this.views=new Map}}function wae(t){Ne(!Px,"__referenceConstructor has already been defined"),Px=t}function bae(){return Ne(Px,"Reference.ts has not been loaded"),Px}function vae(t){return t.views.size===0}function yM(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Ne(i!=null,"SyncTree gave us an op for an invalid query."),FB(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(FB(o,e,n,r));return i}}function RH(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Nx(n,s?r:null),c=!1;a?c=!0:r instanceof _t?(a=pM(n,r),c=!1):(a=_t.EMPTY_NODE,c=!1);const l=bN(new wf(a,c,!1),new wf(r,s,!1));return new hae(e,l)}return o}function Eae(t,e,n,r,s,i){const o=RH(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),mae(o,n),yae(o,n)}function Cae(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=bf(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(BB(l,n,r)),$B(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(BB(c,n,r)),$B(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!bf(t)&&i.push(new(bae())(e._repo,e._path)),{removed:i,events:o}}function PH(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Yh(t,e){let n=null;for(const r of t.views.values())n=n||gae(r,e);return n}function OH(t,e){if(e._queryParams.loadsAllData())return EN(t);{const r=e._queryIdentifier;return t.views.get(r)}}function kH(t,e){return OH(t,e)!=null}function bf(t){return EN(t)!=null}function EN(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ox;function _ae(t){Ne(!Ox,"__referenceConstructor has already been defined"),Ox=t}function Aae(){return Ne(Ox,"Reference.ts has not been loaded"),Ox}let Sae=1;class jB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Jn(null),this.pendingWriteTree_=eae(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function DH(t,e,n,r,s){return Woe(t.pendingWriteTree_,e,n,r,s),s?hb(t,new xg(dM(),e,n)):[]}function xae(t,e,n,r){zoe(t.pendingWriteTree_,e,n,r);const s=Jn.fromObject(n);return hb(t,new ww(dM(),e,s))}function Lh(t,e,n=!1){const r=Hoe(t.pendingWriteTree_,e);if(Goe(t.pendingWriteTree_,e)){let i=new Jn(null);return r.snap!=null?i=i.set(bn(),!0):Vs(r.children,o=>{i=i.set(new jn(o),!0)}),hb(t,new xx(r.path,i,n))}else return[]}function Q_(t,e,n){return hb(t,new xg(hM(),e,n))}function Iae(t,e,n){const r=Jn.fromObject(n);return hb(t,new ww(hM(),e,r))}function Nae(t,e){return hb(t,new QE(hM(),e))}function Tae(t,e,n){const r=bM(t,n);if(r){const s=vM(r),i=s.path,o=s.queryId,a=Ni(i,e),c=new QE(fM(o),a);return EM(t,i,c)}else return[]}function kx(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||kH(o,e))){const c=Cae(o,e,n,r);vae(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>bf(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=Oae(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,y=$H(t,g);t.listenProvider_.startListening(uE(w),JE(t,w),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(uE(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(CN(h));t.listenProvider_.stopListening(uE(h),f)}))}kae(t,l)}return a}function MH(t,e,n,r){const s=bM(t,r);if(s!=null){const i=vM(s),o=i.path,a=i.queryId,c=Ni(o,e),l=new xg(fM(a),c,n);return EM(t,o,l)}else return[]}function Rae(t,e,n,r){const s=bM(t,r);if(s){const i=vM(s),o=i.path,a=i.queryId,c=Ni(o,e),l=Jn.fromObject(n),u=new ww(fM(a),c,l);return EM(t,o,u)}else return[]}function H2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=Ni(h,s);i=i||Yh(f,p),o=o||bf(f)});let a=t.syncPointTree_.get(s);a?(o=o||bf(a),i=i||Yh(a,bn())):(a=new TH,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=_t.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Yh(p,bn());g&&(i=i.updateImmediateChild(f,g))}));const l=kH(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=CN(e);Ne(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Dae();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=vN(t.pendingWriteTree_,s);let d=Eae(a,e,n,u,i,c);if(!l&&!o&&!r){const h=OH(a,e);d=d.concat(Mae(t,e,h))}return d}function wM(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Ni(o,e),l=Yh(a,c);if(l)return l});return _H(s,e,i,n,!0)}function Pae(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=Ni(l,n);r=r||Yh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Yh(s,bn()):(s=new TH,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new wf(r,!0,!1):null,a=vN(t.pendingWriteTree_,e._path),c=RH(s,e,a,i?o.getNode():_t.EMPTY_NODE,i);return pae(c)}function hb(t,e){return LH(e,t.syncPointTree_,null,vN(t.pendingWriteTree_,bn()))}function LH(t,e,n,r){if(Xt(t.path))return UH(t,e,n,r);{const s=e.get(bn());n==null&&s!=null&&(n=Yh(s,bn()));let i=[];const o=Yt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=AH(r,o);i=i.concat(LH(a,c,l,u))}return s&&(i=i.concat(yM(s,t,r,n))),i}}function UH(t,e,n,r){const s=e.get(bn());n==null&&s!=null&&(n=Yh(s,bn()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=AH(r,o),u=t.operationForChild(o);u&&(i=i.concat(UH(u,a,c,l)))}),s&&(i=i.concat(yM(s,t,r,n))),i}function $H(t,e){const n=e.query,r=JE(t,n);return{hashFn:()=>(fae(e)||_t.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Tae(t,n._path,r):Nae(t,n._path);{const i=Nie(s,n);return kx(t,n,null,i)}}}}function JE(t,e){const n=CN(e);return t.queryToTagMap.get(n)}function CN(t){return t._path.toString()+"$"+t._queryIdentifier}function bM(t,e){return t.tagToQueryMap.get(e)}function vM(t){const e=t.indexOf("$");return Ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new jn(t.substr(0,e))}}function EM(t,e,n){const r=t.syncPointTree_.get(e);Ne(r,"Missing sync point for query tag that we're tracking");const s=vN(t.pendingWriteTree_,e);return yM(r,n,s,null)}function Oae(t){return t.fold((e,n,r)=>{if(n&&bf(n))return[EN(n)];{let s=[];return n&&(s=PH(n)),Vs(r,(i,o)=>{s=s.concat(o)}),s}})}function uE(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Aae())(t._repo,t._path):t}function kae(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=CN(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Dae(){return Sae++}function Mae(t,e,n){const r=e._path,s=JE(t,e),i=$H(t,n),o=t.listenProvider_.startListening(uE(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Ne(!bf(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Xt(l)&&u&&bf(u))return[EN(u).query];{let h=[];return u&&(h=h.concat(PH(u).map(f=>f.query))),Vs(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(uE(u),JE(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new CM(n)}node(){return this.node_}}class _M{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Tr(this.path_,e);return new _M(this.syncTree_,n)}node(){return wM(this.syncTree_,this.path_)}}const Lae=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},WB=function(t,e,n){if(!t||typeof t!="object")return t;if(Ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Uae(t[".sv"],e,n);if(typeof t[".sv"]=="object")return $ae(t[".sv"],e);Ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Uae=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ne(!1,"Unexpected server value: "+t)}},$ae=function(t,e,n){t.hasOwnProperty("increment")||Ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ne(!1,"Unexpected increment value: "+r);const s=e.node();if(Ne(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},BH=function(t,e,n,r){return AM(e,new _M(n,t),r)},FH=function(t,e,n){return AM(t,new CM(e),n)};function AM(t,e,n){const r=t.getPriority().val(),s=WB(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=WB(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new ps(a,ts(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new ps(s))),o.forEachChild(Rr,(a,c)=>{const l=AM(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function xM(t,e){let n=e instanceof jn?e:new jn(e),r=t,s=Yt(n);for(;s!==null;){const i=gw(r.node.children,s)||{children:{},childCount:0};r=new SM(s,r,i),n=tr(n),s=Yt(n)}return r}function fb(t){return t.node.value}function jH(t,e){t.node.value=e,G2(t)}function WH(t){return t.node.childCount>0}function Bae(t){return fb(t)===void 0&&!WH(t)}function _N(t,e){Vs(t.node.children,(n,r)=>{e(new SM(n,t,r))})}function zH(t,e,n,r){n&&e(t),_N(t,s=>{zH(s,e,!0)})}function Fae(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function J_(t){return new jn(t.parent===null?t.name:J_(t.parent)+"/"+t.name)}function G2(t){t.parent!==null&&jae(t.parent,t.name,t)}function jae(t,e,n){const r=Bae(n),s=nu(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,G2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,G2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wae=/[\[\].#$\/\u0000-\u001F\u007F]/,zae=/[\[\].#$\u0000-\u001F\u007F]/,MR=10*1024*1024,IM=function(t){return typeof t=="string"&&t.length!==0&&!Wae.test(t)},HH=function(t){return typeof t=="string"&&t.length!==0&&!zae.test(t)},Hae=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),HH(t)},Gae=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!eM(t)||t&&typeof t=="object"&&nu(t,".sv")},qae=function(t,e,n,r){AN(mN(t,"value"),e,n)},AN=function(t,e,n){const r=n instanceof jn?new coe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+sp(r));if(typeof e=="function")throw new Error(t+"contains a function "+sp(r)+" with contents = "+e.toString());if(eM(e))throw new Error(t+"contains "+e.toString()+" "+sp(r));if(typeof e=="string"&&e.length>MR/3&&yN(e)>MR)throw new Error(t+"contains a string greater than "+MR+" utf8 bytes "+sp(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Vs(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!IM(o)))throw new Error(t+" contains an invalid key ("+o+") "+sp(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);loe(r,o),AN(t,a,r),uoe(r)}),s&&i)throw new Error(t+' contains ".value" child '+sp(r)+" in addition to actual children.")}},Vae=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=qE(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!IM(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(aoe);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&Ma(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},Kae=function(t,e,n,r){const s=mN(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Vs(e,(o,a)=>{const c=new jn(o);if(AN(s,a,Tr(n,c)),iM(c)===".priority"&&!Gae(a))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),Vae(s,i)},GH=function(t,e,n,r){if(!HH(n))throw new Error(mN(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Yae=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),GH(t,e,n)},qH=function(t,e){if(Yt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Qae=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!IM(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Hae(n))throw new Error(mN(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jae{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function SN(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!oM(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function VH(t,e,n){SN(t,n),KH(t,r=>oM(r,e))}function Fa(t,e,n){SN(t,n),KH(t,r=>Ma(r,e)||Ma(e,r))}function KH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Zae(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Zae(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();oE&&Bs("event: "+n.toString()),db(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xae="repo_interrupt",ece=25;class tce{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Jae,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Sx(),this.transactionQueueTree_=new SM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nce(t,e,n){if(t.stats_=rM(t.repoInfo_),t.forceRestClient_||Oie())t.server_=new Ax(t.repoInfo_,(r,s,i,o)=>{zB(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>HB(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{rs(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Zu(t.repoInfo_,e,(r,s,i,o)=>{zB(t,r,s,i,o)},r=>{HB(t,r)},r=>{sce(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Uie(t.repoInfo_,()=>new Loe(t.stats_,t.server_)),t.infoData_=new Poe,t.infoSyncTree_=new jB({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Q_(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),NM(t,"connected",!1),t.serverSyncTree_=new jB({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Fa(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function rce(t){const n=t.infoData_.getNode(new jn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function xN(t){return Lae({timestamp:rce(t)})}function zB(t,e,n,r,s){t.dataUpdateCount++;const i=new jn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=bx(n,l=>ts(l));o=Rae(t.serverSyncTree_,i,c,s)}else{const c=ts(n);o=MH(t.serverSyncTree_,i,c,s)}else if(r){const c=bx(n,l=>ts(l));o=Iae(t.serverSyncTree_,i,c)}else{const c=ts(n);o=Q_(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=vw(t,i)),Fa(t.eventQueue_,a,o)}function HB(t,e){NM(t,"connected",e),e===!1&&cce(t)}function sce(t,e){Vs(e,(n,r)=>{NM(t,n,r)})}function NM(t,e,n){const r=new jn("/.info/"+e),s=ts(n);t.infoData_.updateSnapshot(r,s);const i=Q_(t.infoSyncTree_,r,s);Fa(t.eventQueue_,r,i)}function TM(t){return t.nextWriteId_++}function ice(t,e,n){const r=Pae(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=ts(s).withIndex(e._queryParams.getIndex());H2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Q_(t.serverSyncTree_,e._path,i);else{const a=JE(t.serverSyncTree_,e);o=MH(t.serverSyncTree_,e._path,i,a)}return Fa(t.eventQueue_,e._path,o),kx(t.serverSyncTree_,e,n,null,!0),i},s=>(Z_(t,"get for query "+rs(e)+" failed: "+s),Promise.reject(new Error(s))))}function oce(t,e,n,r,s){Z_(t,"set",{path:e.toString(),value:n,priority:r});const i=xN(t),o=ts(n,r),a=wM(t.serverSyncTree_,e),c=FH(o,a,i),l=TM(t),u=DH(t.serverSyncTree_,e,c,l,!0);SN(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||ki("set at "+e+" failed: "+h);const g=Lh(t.serverSyncTree_,l,!p);Fa(t.eventQueue_,e,g),q2(t,s,h,f)});const d=PM(t,e);vw(t,d),Fa(t.eventQueue_,d,[])}function ace(t,e,n,r){Z_(t,"update",{path:e.toString(),value:n});let s=!0;const i=xN(t),o={};if(Vs(n,(a,c)=>{s=!1,o[a]=BH(Tr(e,a),ts(c),t.serverSyncTree_,i)}),s)Bs("update() called with empty data.  Don't do anything."),q2(t,r,"ok",void 0);else{const a=TM(t),c=xae(t.serverSyncTree_,e,o,a);SN(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{const d=l==="ok";d||ki("update at "+e+" failed: "+l);const h=Lh(t.serverSyncTree_,a,!d),f=h.length>0?vw(t,e):e;Fa(t.eventQueue_,f,h),q2(t,r,l,u)}),Vs(n,l=>{const u=PM(t,Tr(e,l));vw(t,u)}),Fa(t.eventQueue_,e,[])}}function cce(t){Z_(t,"onDisconnectEvents");const e=xN(t),n=Sx();$2(t.onDisconnect_,bn(),(s,i)=>{const o=BH(s,i,t.serverSyncTree_,e);bH(n,s,o)});let r=[];$2(n,bn(),(s,i)=>{r=r.concat(Q_(t.serverSyncTree_,s,i));const o=PM(t,s);vw(t,o)}),t.onDisconnect_=Sx(),Fa(t.eventQueue_,bn(),r)}function lce(t,e,n){let r;Yt(e._path)===".info"?r=H2(t.infoSyncTree_,e,n):r=H2(t.serverSyncTree_,e,n),VH(t.eventQueue_,e._path,r)}function uce(t,e,n){let r;Yt(e._path)===".info"?r=kx(t.infoSyncTree_,e,n):r=kx(t.serverSyncTree_,e,n),VH(t.eventQueue_,e._path,r)}function dce(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Xae)}function Z_(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Bs(n,...e)}function q2(t,e,n,r){e&&db(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function YH(t,e,n){return wM(t.serverSyncTree_,e,n)||_t.EMPTY_NODE}function RM(t,e=t.transactionQueueTree_){if(e||IN(t,e),fb(e)){const n=JH(t,e);Ne(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&hce(t,J_(e),n)}else WH(e)&&_N(e,n=>{RM(t,n)})}function hce(t,e,n){const r=n.map(l=>l.currentWriteId),s=YH(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Ne(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Ni(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Z_(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Lh(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();IN(t,xM(t.transactionQueueTree_,e)),RM(t,t.transactionQueueTree_),Fa(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)db(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ki("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}vw(t,e)}},o)}function vw(t,e){const n=QH(t,e),r=J_(n),s=JH(t,n);return fce(t,s,r),r}function fce(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Ni(n,c.path);let u=!1,d;if(Ne(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(Lh(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=ece)u=!0,d="maxretry",s=s.concat(Lh(t.serverSyncTree_,c.currentWriteId,!0));else{const h=YH(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){AN("transaction failed: Data returned ",f,c.path);let p=ts(f);typeof f=="object"&&f!=null&&nu(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,y=xN(t),b=FH(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=TM(t),o.splice(o.indexOf(w),1),s=s.concat(DH(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(Lh(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(Lh(t.serverSyncTree_,c.currentWriteId,!0))}Fa(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}IN(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)db(r[a]);RM(t,t.transactionQueueTree_)}function QH(t,e){let n,r=t.transactionQueueTree_;for(n=Yt(e);n!==null&&fb(r)===void 0;)r=xM(r,n),e=tr(e),n=Yt(e);return r}function JH(t,e){const n=[];return ZH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function ZH(t,e,n){const r=fb(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);_N(e,s=>{ZH(t,s,n)})}function IN(t,e){const n=fb(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,jH(e,n.length>0?n:void 0)}_N(e,r=>{IN(t,r)})}function PM(t,e){const n=J_(QH(t,e)),r=xM(t.transactionQueueTree_,e);return Fae(r,s=>{LR(t,s)}),LR(t,r),zH(r,s=>{LR(t,s)}),n}function LR(t,e){const n=fb(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ne(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ne(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Lh(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?jH(e,void 0):n.length=i+1,Fa(t.eventQueue_,J_(e),s);for(let o=0;o<r.length;o++)db(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pce(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function gce(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ki(`Invalid query segment '${n}' in query '${t}'`)}return e}const GB=function(t,e){const n=mce(t),r=n.namespace;n.domain==="firebase.com"&&ld(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ld("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||_ie();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new nH(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new jn(n.pathString)}},mce=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=pce(t.substring(u,d)));const h=gce(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yce{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+rs(this.snapshot.exportVal())}}class wce{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Xt(this._path)?null:iM(this._path)}get ref(){return new vd(this._repo,this._path)}get _queryIdentifier(){const e=PB(this._queryParams),n=tM(e);return n==="{}"?"default":n}get _queryObject(){return PB(this._queryParams)}isEqual(e){if(e=ub(e),!(e instanceof OM))return!1;const n=this._repo===e._repo,r=oM(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+ooe(this._path)}}class vd extends OM{constructor(e,n){super(e,n,new uM,!1)}get parent(){const e=dH(this._path);return e===null?null:new vd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ZE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new jn(e),r=V2(this.ref,e);return new ZE(this._node.getChild(n),r,Rr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new ZE(s,V2(this.ref,r),Rr)))}hasChild(e){const n=new jn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function to(t,e){return t=ub(t),t._checkNotDeleted("ref"),e!==void 0?V2(t._root,e):t._root}function V2(t,e){return t=ub(t),Yt(t._path)===null?Yae("child","path",e):GH("child","path",e),new vd(t._repo,Tr(t._path,e))}function eG(t){return qH("remove",t._path),dE(t,null)}function dE(t,e){t=ub(t),qH("set",t._path),qae("set",e,t._path);const n=new G_;return oce(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function bce(t,e){Kae("update",e,t._path);const n=new G_;return ace(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function hp(t){t=ub(t);const e=new XH(()=>{}),n=new NN(e);return ice(t._repo,t,n).then(r=>new ZE(r,new vd(t._repo,t._path),t._queryParams.getIndex()))}class NN{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new yce("value",this,new ZE(e.snapshotNode,new vd(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new wce(this,e,n):null}matches(e){return e instanceof NN?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function vce(t,e,n,r,s){const i=new XH(n,void 0),o=new NN(i);return lce(t._repo,t,o),()=>uce(t._repo,t,o)}function qB(t,e,n,r){return vce(t,"value",e)}wae(vd);_ae(vd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ece="FIREBASE_DATABASE_EMULATOR_HOST",K2={};let Cce=!1;function _ce(t,e,n,r){t.repoInfo_=new nH(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Ace(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||ld("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bs("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=GB(i,s),a=o.repoInfo,c;typeof process<"u"&&fB&&(c=fB[Ece]),c?(i=`http://${c}?ns=${a.namespace}`,o=GB(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Die(t.name,t.options,e);Qae("Invalid Firebase Database URL",o),Xt(o.path)||ld("Database URL must point to the root of a Firebase Database (not including a child path).");const u=xce(a,t,l,new kie(t.name,n));return new Ice(u,t)}function Sce(t,e){const n=K2[e];(!n||n[t.key]!==t)&&ld(`Database ${e}(${t.repoInfo_}) has already been deleted.`),dce(t),delete n[t.key]}function xce(t,e,n,r){let s=K2[e.name];s||(s={},K2[e.name]=s);let i=s[t.toURLString()];return i&&ld("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new tce(t,Cce,n,r),s[t.toURLString()]=i,i}class Ice{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(nce(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vd(this._repo,bn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Sce(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ld("Cannot call "+e+" on a deleted database.")}}function Nce(t=Bz(),e){const n=tie(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Hre("database");r&&Tce(n,...r)}return n}function Tce(t,e,n,r={}){t=ub(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&ld("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&ld('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new xS(xS.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Gre(r.mockUserToken,t.app.options.projectId);i=new xS(o)}_ce(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rce(t){yie(sie),vx(new WE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Ace(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Qy(pB,gB,t),Qy(pB,gB,"esm2017")}Zu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Zu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Rce();const Pce={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},Oce=iie().length?Bz():$z(Pce),Dx=Nce(Oce);var Y2={},tG={exports:{}},ia={},nG={exports:{}},rG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,M){var z=k.length;k.push(M);e:for(;0<z;){var K=z-1>>>1,ne=k[K];if(0<s(ne,M))k[K]=M,k[z]=ne,z=K;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var M=k[0],z=k.pop();if(z!==M){k[0]=z;e:for(var K=0,ne=k.length,le=ne>>>1;K<le;){var oe=2*(K+1)-1,ae=k[oe],ue=oe+1,Ze=k[ue];if(0>s(ae,z))ue<ne&&0>s(Ze,ae)?(k[K]=Ze,k[ue]=z,K=ue):(k[K]=ae,k[oe]=z,K=oe);else if(ue<ne&&0>s(Ze,z))k[K]=Ze,k[ue]=z,K=ue;else break e}}return M}function s(k,M){var z=k.sortIndex-M.sortIndex;return z!==0?z:k.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(k){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=k)r(l),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(l)}}function A(k){if(g=!1,v(k),!p)if(n(c)!==null)p=!0,R(_);else{var M=n(l);M!==null&&$(A,M.startTime-k)}}function _(k,M){p=!1,g&&(g=!1,y(N),N=-1),f=!0;var z=h;try{for(v(M),d=n(c);d!==null&&(!(d.expirationTime>M)||k&&!P());){var K=d.callback;if(typeof K=="function"){d.callback=null,h=d.priorityLevel;var ne=K(d.expirationTime<=M);M=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(c)&&r(c),v(M)}else r(c);d=n(c)}if(d!==null)var le=!0;else{var oe=n(l);oe!==null&&$(A,oe.startTime-M),le=!1}return le}finally{d=null,h=z,f=!1}}var I=!1,x=null,N=-1,S=5,O=-1;function P(){return!(t.unstable_now()-O<S)}function F(){if(x!==null){var k=t.unstable_now();O=k;var M=!0;try{M=x(!0,k)}finally{M?q():(I=!1,x=null)}}else I=!1}var q;if(typeof b=="function")q=function(){b(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,T=B.port2;B.port1.onmessage=F,q=function(){T.postMessage(null)}}else q=function(){w(F,0)};function R(k){x=k,I||(I=!0,q())}function $(k,M){N=w(function(){k(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(_))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(k){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var z=h;h=M;try{return k()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var z=h;h=k;try{return M()}finally{h=z}},t.unstable_scheduleCallback=function(k,M,z){var K=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?K+z:K):z=K,k){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=z+ne,k={id:u++,callback:M,priorityLevel:k,startTime:z,expirationTime:ne,sortIndex:-1},z>K?(k.sortIndex=z,e(l,k),n(c)===null&&k===n(l)&&(g?(y(N),N=-1):g=!0,$(A,z-K))):(k.sortIndex=ne,e(c,k),p||f||(p=!0,R(_))),k},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(k){var M=h;return function(){var z=h;h=M;try{return k.apply(this,arguments)}finally{h=z}}}})(rG);nG.exports=rG;var kce=nG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dce=D,na=kce;function Ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sG=new Set,XE={};function cm(t,e){Ew(t,e),Ew(t+"Capture",e)}function Ew(t,e){for(XE[t]=e,t=0;t<e.length;t++)sG.add(e[t])}var ud=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Q2=Object.prototype.hasOwnProperty,Mce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VB={},KB={};function Lce(t){return Q2.call(KB,t)?!0:Q2.call(VB,t)?!1:Mce.test(t)?KB[t]=!0:(VB[t]=!0,!1)}function Uce(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $ce(t,e,n,r){if(e===null||typeof e>"u"||Uce(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bi(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ks={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ks[t]=new Bi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ks[e]=new Bi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ks[t]=new Bi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ks[t]=new Bi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ks[t]=new Bi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ks[t]=new Bi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ks[t]=new Bi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ks[t]=new Bi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ks[t]=new Bi(t,5,!1,t.toLowerCase(),null,!1,!1)});var kM=/[\-:]([a-z])/g;function DM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kM,DM);Ks[e]=new Bi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kM,DM);Ks[e]=new Bi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kM,DM);Ks[e]=new Bi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ks[t]=new Bi(t,1,!1,t.toLowerCase(),null,!1,!1)});Ks.xlinkHref=new Bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ks[t]=new Bi(t,1,!1,t.toLowerCase(),null,!0,!0)});function MM(t,e,n,r){var s=Ks.hasOwnProperty(e)?Ks[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($ce(e,n,s,r)&&(n=null),r||s===null?Lce(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ed=Dce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cA=Symbol.for("react.element"),Ny=Symbol.for("react.portal"),Ty=Symbol.for("react.fragment"),LM=Symbol.for("react.strict_mode"),J2=Symbol.for("react.profiler"),iG=Symbol.for("react.provider"),oG=Symbol.for("react.context"),UM=Symbol.for("react.forward_ref"),Z2=Symbol.for("react.suspense"),X2=Symbol.for("react.suspense_list"),$M=Symbol.for("react.memo"),Zd=Symbol.for("react.lazy"),aG=Symbol.for("react.offscreen"),YB=Symbol.iterator;function ev(t){return t===null||typeof t!="object"?null:(t=YB&&t[YB]||t["@@iterator"],typeof t=="function"?t:null)}var _r=Object.assign,UR;function Mv(t){if(UR===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);UR=e&&e[1]||""}return`
`+UR+t}var $R=!1;function BR(t,e){if(!t||$R)return"";$R=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{$R=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mv(t):""}function Bce(t){switch(t.tag){case 5:return Mv(t.type);case 16:return Mv("Lazy");case 13:return Mv("Suspense");case 19:return Mv("SuspenseList");case 0:case 2:case 15:return t=BR(t.type,!1),t;case 11:return t=BR(t.type.render,!1),t;case 1:return t=BR(t.type,!0),t;default:return""}}function ek(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ty:return"Fragment";case Ny:return"Portal";case J2:return"Profiler";case LM:return"StrictMode";case Z2:return"Suspense";case X2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case oG:return(t.displayName||"Context")+".Consumer";case iG:return(t._context.displayName||"Context")+".Provider";case UM:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $M:return e=t.displayName||null,e!==null?e:ek(t.type)||"Memo";case Zd:e=t._payload,t=t._init;try{return ek(t(e))}catch{}}return null}function Fce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ek(e);case 8:return e===LM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cG(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jce(t){var e=cG(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lA(t){t._valueTracker||(t._valueTracker=jce(t))}function lG(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cG(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Mx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tk(t,e){var n=e.checked;return _r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function QB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function uG(t,e){e=e.checked,e!=null&&MM(t,"checked",e,!1)}function nk(t,e){uG(t,e);var n=vf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rk(t,e.type,n):e.hasOwnProperty("defaultValue")&&rk(t,e.type,vf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function JB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rk(t,e,n){(e!=="number"||Mx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lv=Array.isArray;function Xy(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vf(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sk(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return _r({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ZB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ce(92));if(Lv(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vf(n)}}function dG(t,e){var n=vf(e.value),r=vf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function XB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hG(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ik(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hG(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uA,fG=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uA=uA||document.createElement("div"),uA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uA.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function eC(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hE={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wce=["Webkit","ms","Moz","O"];Object.keys(hE).forEach(function(t){Wce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hE[e]=hE[t]})});function pG(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hE.hasOwnProperty(t)&&hE[t]?(""+e).trim():e+"px"}function gG(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=pG(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var zce=_r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ok(t,e){if(e){if(zce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function ak(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ck=null;function BM(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lk=null,e0=null,t0=null;function e6(t){if(t=t1(t)){if(typeof lk!="function")throw Error(Ce(280));var e=t.stateNode;e&&(e=kN(e),lk(t.stateNode,t.type,e))}}function mG(t){e0?t0?t0.push(t):t0=[t]:e0=t}function yG(){if(e0){var t=e0,e=t0;if(t0=e0=null,e6(t),e)for(t=0;t<e.length;t++)e6(e[t])}}function wG(t,e){return t(e)}function bG(){}var FR=!1;function vG(t,e,n){if(FR)return t(e,n);FR=!0;try{return wG(t,e,n)}finally{FR=!1,(e0!==null||t0!==null)&&(bG(),yG())}}function tC(t,e){var n=t.stateNode;if(n===null)return null;var r=kN(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ce(231,e,typeof n));return n}var uk=!1;if(ud)try{var tv={};Object.defineProperty(tv,"passive",{get:function(){uk=!0}}),window.addEventListener("test",tv,tv),window.removeEventListener("test",tv,tv)}catch{uk=!1}function Hce(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var fE=!1,Lx=null,Ux=!1,dk=null,Gce={onError:function(t){fE=!0,Lx=t}};function qce(t,e,n,r,s,i,o,a,c){fE=!1,Lx=null,Hce.apply(Gce,arguments)}function Vce(t,e,n,r,s,i,o,a,c){if(qce.apply(this,arguments),fE){if(fE){var l=Lx;fE=!1,Lx=null}else throw Error(Ce(198));Ux||(Ux=!0,dk=l)}}function lm(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function EG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function t6(t){if(lm(t)!==t)throw Error(Ce(188))}function Kce(t){var e=t.alternate;if(!e){if(e=lm(t),e===null)throw Error(Ce(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return t6(s),t;if(i===r)return t6(s),e;i=i.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?t:e}function CG(t){return t=Kce(t),t!==null?_G(t):null}function _G(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_G(t);if(e!==null)return e;t=t.sibling}return null}var AG=na.unstable_scheduleCallback,n6=na.unstable_cancelCallback,Yce=na.unstable_shouldYield,Qce=na.unstable_requestPaint,Ur=na.unstable_now,Jce=na.unstable_getCurrentPriorityLevel,FM=na.unstable_ImmediatePriority,SG=na.unstable_UserBlockingPriority,$x=na.unstable_NormalPriority,Zce=na.unstable_LowPriority,xG=na.unstable_IdlePriority,TN=null,Fl=null;function Xce(t){if(Fl&&typeof Fl.onCommitFiberRoot=="function")try{Fl.onCommitFiberRoot(TN,t,void 0,(t.current.flags&128)===128)}catch{}}var $c=Math.clz32?Math.clz32:nle,ele=Math.log,tle=Math.LN2;function nle(t){return t>>>=0,t===0?32:31-(ele(t)/tle|0)|0}var dA=64,hA=4194304;function Uv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Uv(a):(i&=o,i!==0&&(r=Uv(i)))}else o=n&~s,o!==0?r=Uv(o):i!==0&&(r=Uv(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$c(e),s=1<<n,r|=t[n],e&=~s;return r}function rle(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sle(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-$c(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=rle(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function hk(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function IG(){var t=dA;return dA<<=1,!(dA&4194240)&&(dA=64),t}function jR(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function X_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$c(e),t[e]=n}function ile(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-$c(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jM(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$c(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var On=0;function NG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var TG,WM,RG,PG,OG,fk=!1,fA=[],Qh=null,Jh=null,Zh=null,nC=new Map,rC=new Map,sh=[],ole="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r6(t,e){switch(t){case"focusin":case"focusout":Qh=null;break;case"dragenter":case"dragleave":Jh=null;break;case"mouseover":case"mouseout":Zh=null;break;case"pointerover":case"pointerout":nC.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rC.delete(e.pointerId)}}function nv(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=t1(e),e!==null&&WM(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ale(t,e,n,r,s){switch(e){case"focusin":return Qh=nv(Qh,t,e,n,r,s),!0;case"dragenter":return Jh=nv(Jh,t,e,n,r,s),!0;case"mouseover":return Zh=nv(Zh,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return nC.set(i,nv(nC.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,rC.set(i,nv(rC.get(i)||null,t,e,n,r,s)),!0}return!1}function kG(t){var e=Ap(t.target);if(e!==null){var n=lm(e);if(n!==null){if(e=n.tag,e===13){if(e=EG(n),e!==null){t.blockedOn=e,OG(t.priority,function(){RG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function IS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pk(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ck=r,n.target.dispatchEvent(r),ck=null}else return e=t1(n),e!==null&&WM(e),t.blockedOn=n,!1;e.shift()}return!0}function s6(t,e,n){IS(t)&&n.delete(e)}function cle(){fk=!1,Qh!==null&&IS(Qh)&&(Qh=null),Jh!==null&&IS(Jh)&&(Jh=null),Zh!==null&&IS(Zh)&&(Zh=null),nC.forEach(s6),rC.forEach(s6)}function rv(t,e){t.blockedOn===e&&(t.blockedOn=null,fk||(fk=!0,na.unstable_scheduleCallback(na.unstable_NormalPriority,cle)))}function sC(t){function e(s){return rv(s,t)}if(0<fA.length){rv(fA[0],t);for(var n=1;n<fA.length;n++){var r=fA[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qh!==null&&rv(Qh,t),Jh!==null&&rv(Jh,t),Zh!==null&&rv(Zh,t),nC.forEach(e),rC.forEach(e),n=0;n<sh.length;n++)r=sh[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<sh.length&&(n=sh[0],n.blockedOn===null);)kG(n),n.blockedOn===null&&sh.shift()}var n0=Ed.ReactCurrentBatchConfig,Fx=!0;function lle(t,e,n,r){var s=On,i=n0.transition;n0.transition=null;try{On=1,zM(t,e,n,r)}finally{On=s,n0.transition=i}}function ule(t,e,n,r){var s=On,i=n0.transition;n0.transition=null;try{On=4,zM(t,e,n,r)}finally{On=s,n0.transition=i}}function zM(t,e,n,r){if(Fx){var s=pk(t,e,n,r);if(s===null)JR(t,e,r,jx,n),r6(t,r);else if(ale(s,t,e,n,r))r.stopPropagation();else if(r6(t,r),e&4&&-1<ole.indexOf(t)){for(;s!==null;){var i=t1(s);if(i!==null&&TG(i),i=pk(t,e,n,r),i===null&&JR(t,e,r,jx,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else JR(t,e,r,null,n)}}var jx=null;function pk(t,e,n,r){if(jx=null,t=BM(r),t=Ap(t),t!==null)if(e=lm(t),e===null)t=null;else if(n=e.tag,n===13){if(t=EG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jx=t,null}function DG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jce()){case FM:return 1;case SG:return 4;case $x:case Zce:return 16;case xG:return 536870912;default:return 16}default:return 16}}var Uh=null,HM=null,NS=null;function MG(){if(NS)return NS;var t,e=HM,n=e.length,r,s="value"in Uh?Uh.value:Uh.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return NS=s.slice(t,1<r?1-r:void 0)}function TS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pA(){return!0}function i6(){return!1}function oa(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?pA:i6,this.isPropagationStopped=i6,this}return _r(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pA)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pA)},persist:function(){},isPersistent:pA}),e}var pb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},GM=oa(pb),e1=_r({},pb,{view:0,detail:0}),dle=oa(e1),WR,zR,sv,RN=_r({},e1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sv&&(sv&&t.type==="mousemove"?(WR=t.screenX-sv.screenX,zR=t.screenY-sv.screenY):zR=WR=0,sv=t),WR)},movementY:function(t){return"movementY"in t?t.movementY:zR}}),o6=oa(RN),hle=_r({},RN,{dataTransfer:0}),fle=oa(hle),ple=_r({},e1,{relatedTarget:0}),HR=oa(ple),gle=_r({},pb,{animationName:0,elapsedTime:0,pseudoElement:0}),mle=oa(gle),yle=_r({},pb,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wle=oa(yle),ble=_r({},pb,{data:0}),a6=oa(ble),vle={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ele={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _le(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Cle[t])?!!e[t]:!1}function qM(){return _le}var Ale=_r({},e1,{key:function(t){if(t.key){var e=vle[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=TS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ele[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qM,charCode:function(t){return t.type==="keypress"?TS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?TS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sle=oa(Ale),xle=_r({},RN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c6=oa(xle),Ile=_r({},e1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qM}),Nle=oa(Ile),Tle=_r({},pb,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rle=oa(Tle),Ple=_r({},RN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ole=oa(Ple),kle=[9,13,27,32],VM=ud&&"CompositionEvent"in window,pE=null;ud&&"documentMode"in document&&(pE=document.documentMode);var Dle=ud&&"TextEvent"in window&&!pE,LG=ud&&(!VM||pE&&8<pE&&11>=pE),l6=" ",u6=!1;function UG(t,e){switch(t){case"keyup":return kle.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $G(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ry=!1;function Mle(t,e){switch(t){case"compositionend":return $G(e);case"keypress":return e.which!==32?null:(u6=!0,l6);case"textInput":return t=e.data,t===l6&&u6?null:t;default:return null}}function Lle(t,e){if(Ry)return t==="compositionend"||!VM&&UG(t,e)?(t=MG(),NS=HM=Uh=null,Ry=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LG&&e.locale!=="ko"?null:e.data;default:return null}}var Ule={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ule[t.type]:e==="textarea"}function BG(t,e,n,r){mG(r),e=Wx(e,"onChange"),0<e.length&&(n=new GM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var gE=null,iC=null;function $le(t){QG(t,0)}function PN(t){var e=ky(t);if(lG(e))return t}function Ble(t,e){if(t==="change")return e}var FG=!1;if(ud){var GR;if(ud){var qR="oninput"in document;if(!qR){var h6=document.createElement("div");h6.setAttribute("oninput","return;"),qR=typeof h6.oninput=="function"}GR=qR}else GR=!1;FG=GR&&(!document.documentMode||9<document.documentMode)}function f6(){gE&&(gE.detachEvent("onpropertychange",jG),iC=gE=null)}function jG(t){if(t.propertyName==="value"&&PN(iC)){var e=[];BG(e,iC,t,BM(t)),vG($le,e)}}function Fle(t,e,n){t==="focusin"?(f6(),gE=e,iC=n,gE.attachEvent("onpropertychange",jG)):t==="focusout"&&f6()}function jle(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return PN(iC)}function Wle(t,e){if(t==="click")return PN(e)}function zle(t,e){if(t==="input"||t==="change")return PN(e)}function Hle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wc=typeof Object.is=="function"?Object.is:Hle;function oC(t,e){if(Wc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Q2.call(e,s)||!Wc(t[s],e[s]))return!1}return!0}function p6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g6(t,e){var n=p6(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=p6(n)}}function WG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?WG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zG(){for(var t=window,e=Mx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Mx(t.document)}return e}function KM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Gle(t){var e=zG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&WG(n.ownerDocument.documentElement,n)){if(r!==null&&KM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=g6(n,i);var o=g6(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qle=ud&&"documentMode"in document&&11>=document.documentMode,Py=null,gk=null,mE=null,mk=!1;function m6(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mk||Py==null||Py!==Mx(r)||(r=Py,"selectionStart"in r&&KM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mE&&oC(mE,r)||(mE=r,r=Wx(gk,"onSelect"),0<r.length&&(e=new GM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Py)))}function gA(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oy={animationend:gA("Animation","AnimationEnd"),animationiteration:gA("Animation","AnimationIteration"),animationstart:gA("Animation","AnimationStart"),transitionend:gA("Transition","TransitionEnd")},VR={},HG={};ud&&(HG=document.createElement("div").style,"AnimationEvent"in window||(delete Oy.animationend.animation,delete Oy.animationiteration.animation,delete Oy.animationstart.animation),"TransitionEvent"in window||delete Oy.transitionend.transition);function ON(t){if(VR[t])return VR[t];if(!Oy[t])return t;var e=Oy[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in HG)return VR[t]=e[n];return t}var GG=ON("animationend"),qG=ON("animationiteration"),VG=ON("animationstart"),KG=ON("transitionend"),YG=new Map,y6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Df(t,e){YG.set(t,e),cm(e,[t])}for(var KR=0;KR<y6.length;KR++){var YR=y6[KR],Vle=YR.toLowerCase(),Kle=YR[0].toUpperCase()+YR.slice(1);Df(Vle,"on"+Kle)}Df(GG,"onAnimationEnd");Df(qG,"onAnimationIteration");Df(VG,"onAnimationStart");Df("dblclick","onDoubleClick");Df("focusin","onFocus");Df("focusout","onBlur");Df(KG,"onTransitionEnd");Ew("onMouseEnter",["mouseout","mouseover"]);Ew("onMouseLeave",["mouseout","mouseover"]);Ew("onPointerEnter",["pointerout","pointerover"]);Ew("onPointerLeave",["pointerout","pointerover"]);cm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cm("onBeforeInput",["compositionend","keypress","textInput","paste"]);cm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $v="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yle=new Set("cancel close invalid load scroll toggle".split(" ").concat($v));function w6(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Vce(r,e,void 0,t),t.currentTarget=null}function QG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;w6(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;w6(s,a,l),i=c}}}if(Ux)throw t=dk,Ux=!1,dk=null,t}function ir(t,e){var n=e[Ek];n===void 0&&(n=e[Ek]=new Set);var r=t+"__bubble";n.has(r)||(JG(e,t,2,!1),n.add(r))}function QR(t,e,n){var r=0;e&&(r|=4),JG(n,t,r,e)}var mA="_reactListening"+Math.random().toString(36).slice(2);function aC(t){if(!t[mA]){t[mA]=!0,sG.forEach(function(n){n!=="selectionchange"&&(Yle.has(n)||QR(n,!1,t),QR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mA]||(e[mA]=!0,QR("selectionchange",!1,e))}}function JG(t,e,n,r){switch(DG(e)){case 1:var s=lle;break;case 4:s=ule;break;default:s=zM}n=s.bind(null,e,n,t),s=void 0,!uk||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function JR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ap(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}vG(function(){var l=i,u=BM(n),d=[];e:{var h=YG.get(t);if(h!==void 0){var f=GM,p=t;switch(t){case"keypress":if(TS(n)===0)break e;case"keydown":case"keyup":f=Sle;break;case"focusin":p="focus",f=HR;break;case"focusout":p="blur",f=HR;break;case"beforeblur":case"afterblur":f=HR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=o6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=fle;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Nle;break;case GG:case qG:case VG:f=mle;break;case KG:f=Rle;break;case"scroll":f=dle;break;case"wheel":f=Ole;break;case"copy":case"cut":case"paste":f=wle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=c6}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,y!==null&&(A=tC(b,y),A!=null&&g.push(cC(b,A,v)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==ck&&(p=n.relatedTarget||n.fromElement)&&(Ap(p)||p[dd]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?Ap(p):null,p!==null&&(w=lm(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=o6,A="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=c6,A="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:ky(f),v=p==null?h:ky(p),h=new g(A,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,A=null,Ap(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=v,g.relatedTarget=w,A=g),w=A,f&&p)t:{for(g=f,y=p,b=0,v=g;v;v=jm(v))b++;for(v=0,A=y;A;A=jm(A))v++;for(;0<b-v;)g=jm(g),b--;for(;0<v-b;)y=jm(y),v--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=jm(g),y=jm(y)}g=null}else g=null;f!==null&&b6(d,h,f,g,!1),p!==null&&w!==null&&b6(d,w,p,g,!0)}}e:{if(h=l?ky(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=Ble;else if(d6(h))if(FG)_=zle;else{_=jle;var I=Fle}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=Wle);if(_&&(_=_(t,l))){BG(d,_,n,u);break e}I&&I(t,h,l),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&rk(h,"number",h.value)}switch(I=l?ky(l):window,t){case"focusin":(d6(I)||I.contentEditable==="true")&&(Py=I,gk=l,mE=null);break;case"focusout":mE=gk=Py=null;break;case"mousedown":mk=!0;break;case"contextmenu":case"mouseup":case"dragend":mk=!1,m6(d,n,u);break;case"selectionchange":if(qle)break;case"keydown":case"keyup":m6(d,n,u)}var x;if(VM)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ry?UG(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(LG&&n.locale!=="ko"&&(Ry||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ry&&(x=MG()):(Uh=u,HM="value"in Uh?Uh.value:Uh.textContent,Ry=!0)),I=Wx(l,N),0<I.length&&(N=new a6(N,t,null,n,u),d.push({event:N,listeners:I}),x?N.data=x:(x=$G(n),x!==null&&(N.data=x)))),(x=Dle?Mle(t,n):Lle(t,n))&&(l=Wx(l,"onBeforeInput"),0<l.length&&(u=new a6("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}QG(d,e)})}function cC(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wx(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=tC(t,n),i!=null&&r.unshift(cC(t,i,s)),i=tC(t,e),i!=null&&r.push(cC(t,i,s))),t=t.return}return r}function jm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function b6(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=tC(n,i),c!=null&&o.unshift(cC(n,c,a))):s||(c=tC(n,i),c!=null&&o.push(cC(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Qle=/\r\n?/g,Jle=/\u0000|\uFFFD/g;function v6(t){return(typeof t=="string"?t:""+t).replace(Qle,`
`).replace(Jle,"")}function yA(t,e,n){if(e=v6(e),v6(t)!==e&&n)throw Error(Ce(425))}function zx(){}var yk=null,wk=null;function bk(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vk=typeof setTimeout=="function"?setTimeout:void 0,Zle=typeof clearTimeout=="function"?clearTimeout:void 0,E6=typeof Promise=="function"?Promise:void 0,Xle=typeof queueMicrotask=="function"?queueMicrotask:typeof E6<"u"?function(t){return E6.resolve(null).then(t).catch(eue)}:vk;function eue(t){setTimeout(function(){throw t})}function ZR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),sC(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);sC(e)}function Xh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function C6(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gb=Math.random().toString(36).slice(2),Ol="__reactFiber$"+gb,lC="__reactProps$"+gb,dd="__reactContainer$"+gb,Ek="__reactEvents$"+gb,tue="__reactListeners$"+gb,nue="__reactHandles$"+gb;function Ap(t){var e=t[Ol];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dd]||n[Ol]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=C6(t);t!==null;){if(n=t[Ol])return n;t=C6(t)}return e}t=n,n=t.parentNode}return null}function t1(t){return t=t[Ol]||t[dd],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ky(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ce(33))}function kN(t){return t[lC]||null}var Ck=[],Dy=-1;function Mf(t){return{current:t}}function ar(t){0>Dy||(t.current=Ck[Dy],Ck[Dy]=null,Dy--)}function nr(t,e){Dy++,Ck[Dy]=t.current,t.current=e}var Ef={},di=Mf(Ef),bo=Mf(!1),Ng=Ef;function Cw(t,e){var n=t.type.contextTypes;if(!n)return Ef;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vo(t){return t=t.childContextTypes,t!=null}function Hx(){ar(bo),ar(di)}function _6(t,e,n){if(di.current!==Ef)throw Error(Ce(168));nr(di,e),nr(bo,n)}function ZG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ce(108,Fce(t)||"Unknown",s));return _r({},n,r)}function Gx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ef,Ng=di.current,nr(di,t),nr(bo,bo.current),!0}function A6(t,e,n){var r=t.stateNode;if(!r)throw Error(Ce(169));n?(t=ZG(t,e,Ng),r.__reactInternalMemoizedMergedChildContext=t,ar(bo),ar(di),nr(di,t)):ar(bo),nr(bo,n)}var xu=null,DN=!1,XR=!1;function XG(t){xu===null?xu=[t]:xu.push(t)}function rue(t){DN=!0,XG(t)}function Lf(){if(!XR&&xu!==null){XR=!0;var t=0,e=On;try{var n=xu;for(On=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xu=null,DN=!1}catch(s){throw xu!==null&&(xu=xu.slice(t+1)),AG(FM,Lf),s}finally{On=e,XR=!1}}return null}var My=[],Ly=0,qx=null,Vx=0,ka=[],Da=0,Tg=null,Vu=1,Ku="";function ip(t,e){My[Ly++]=Vx,My[Ly++]=qx,qx=t,Vx=e}function eq(t,e,n){ka[Da++]=Vu,ka[Da++]=Ku,ka[Da++]=Tg,Tg=t;var r=Vu;t=Ku;var s=32-$c(r)-1;r&=~(1<<s),n+=1;var i=32-$c(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Vu=1<<32-$c(e)+s|n<<s|r,Ku=i+t}else Vu=1<<i|n<<s|r,Ku=t}function YM(t){t.return!==null&&(ip(t,1),eq(t,1,0))}function QM(t){for(;t===qx;)qx=My[--Ly],My[Ly]=null,Vx=My[--Ly],My[Ly]=null;for(;t===Tg;)Tg=ka[--Da],ka[Da]=null,Ku=ka[--Da],ka[Da]=null,Vu=ka[--Da],ka[Da]=null}var Xo=null,Yo=null,pr=!1,xc=null;function tq(t,e){var n=La(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function S6(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xo=t,Yo=Xh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xo=t,Yo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Tg!==null?{id:Vu,overflow:Ku}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=La(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xo=t,Yo=null,!0):!1;default:return!1}}function _k(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ak(t){if(pr){var e=Yo;if(e){var n=e;if(!S6(t,e)){if(_k(t))throw Error(Ce(418));e=Xh(n.nextSibling);var r=Xo;e&&S6(t,e)?tq(r,n):(t.flags=t.flags&-4097|2,pr=!1,Xo=t)}}else{if(_k(t))throw Error(Ce(418));t.flags=t.flags&-4097|2,pr=!1,Xo=t}}}function x6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xo=t}function wA(t){if(t!==Xo)return!1;if(!pr)return x6(t),pr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bk(t.type,t.memoizedProps)),e&&(e=Yo)){if(_k(t))throw nq(),Error(Ce(418));for(;e;)tq(t,e),e=Xh(e.nextSibling)}if(x6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yo=Xh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yo=null}}else Yo=Xo?Xh(t.stateNode.nextSibling):null;return!0}function nq(){for(var t=Yo;t;)t=Xh(t.nextSibling)}function _w(){Yo=Xo=null,pr=!1}function JM(t){xc===null?xc=[t]:xc.push(t)}var sue=Ed.ReactCurrentBatchConfig;function iv(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,t))}return t}function bA(t,e){throw t=Object.prototype.toString.call(e),Error(Ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I6(t){var e=t._init;return e(t._payload)}function rq(t){function e(y,b){if(t){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=rf(y,b),y.index=0,y.sibling=null,y}function i(y,b,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,A){return b===null||b.tag!==6?(b=oP(v,y.mode,A),b.return=y,b):(b=s(b,v),b.return=y,b)}function c(y,b,v,A){var _=v.type;return _===Ty?u(y,b,v.props.children,A,v.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Zd&&I6(_)===b.type)?(A=s(b,v.props),A.ref=iv(y,b,v),A.return=y,A):(A=LS(v.type,v.key,v.props,null,y.mode,A),A.ref=iv(y,b,v),A.return=y,A)}function l(y,b,v,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=aP(v,y.mode,A),b.return=y,b):(b=s(b,v.children||[]),b.return=y,b)}function u(y,b,v,A,_){return b===null||b.tag!==7?(b=gg(v,y.mode,A,_),b.return=y,b):(b=s(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=oP(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cA:return v=LS(b.type,b.key,b.props,null,y.mode,v),v.ref=iv(y,null,b),v.return=y,v;case Ny:return b=aP(b,y.mode,v),b.return=y,b;case Zd:var A=b._init;return d(y,A(b._payload),v)}if(Lv(b)||ev(b))return b=gg(b,y.mode,v,null),b.return=y,b;bA(y,b)}return null}function h(y,b,v,A){var _=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(y,b,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case cA:return v.key===_?c(y,b,v,A):null;case Ny:return v.key===_?l(y,b,v,A):null;case Zd:return _=v._init,h(y,b,_(v._payload),A)}if(Lv(v)||ev(v))return _!==null?null:u(y,b,v,A,null);bA(y,v)}return null}function f(y,b,v,A,_){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(v)||null,a(b,y,""+A,_);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case cA:return y=y.get(A.key===null?v:A.key)||null,c(b,y,A,_);case Ny:return y=y.get(A.key===null?v:A.key)||null,l(b,y,A,_);case Zd:var I=A._init;return f(y,b,v,I(A._payload),_)}if(Lv(A)||ev(A))return y=y.get(v)||null,u(b,y,A,_,null);bA(b,A)}return null}function p(y,b,v,A){for(var _=null,I=null,x=b,N=b=0,S=null;x!==null&&N<v.length;N++){x.index>N?(S=x,x=null):S=x.sibling;var O=h(y,x,v[N],A);if(O===null){x===null&&(x=S);break}t&&x&&O.alternate===null&&e(y,x),b=i(O,b,N),I===null?_=O:I.sibling=O,I=O,x=S}if(N===v.length)return n(y,x),pr&&ip(y,N),_;if(x===null){for(;N<v.length;N++)x=d(y,v[N],A),x!==null&&(b=i(x,b,N),I===null?_=x:I.sibling=x,I=x);return pr&&ip(y,N),_}for(x=r(y,x);N<v.length;N++)S=f(x,y,N,v[N],A),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?N:S.key),b=i(S,b,N),I===null?_=S:I.sibling=S,I=S);return t&&x.forEach(function(P){return e(y,P)}),pr&&ip(y,N),_}function g(y,b,v,A){var _=ev(v);if(typeof _!="function")throw Error(Ce(150));if(v=_.call(v),v==null)throw Error(Ce(151));for(var I=_=null,x=b,N=b=0,S=null,O=v.next();x!==null&&!O.done;N++,O=v.next()){x.index>N?(S=x,x=null):S=x.sibling;var P=h(y,x,O.value,A);if(P===null){x===null&&(x=S);break}t&&x&&P.alternate===null&&e(y,x),b=i(P,b,N),I===null?_=P:I.sibling=P,I=P,x=S}if(O.done)return n(y,x),pr&&ip(y,N),_;if(x===null){for(;!O.done;N++,O=v.next())O=d(y,O.value,A),O!==null&&(b=i(O,b,N),I===null?_=O:I.sibling=O,I=O);return pr&&ip(y,N),_}for(x=r(y,x);!O.done;N++,O=v.next())O=f(x,y,N,O.value,A),O!==null&&(t&&O.alternate!==null&&x.delete(O.key===null?N:O.key),b=i(O,b,N),I===null?_=O:I.sibling=O,I=O);return t&&x.forEach(function(F){return e(y,F)}),pr&&ip(y,N),_}function w(y,b,v,A){if(typeof v=="object"&&v!==null&&v.type===Ty&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case cA:e:{for(var _=v.key,I=b;I!==null;){if(I.key===_){if(_=v.type,_===Ty){if(I.tag===7){n(y,I.sibling),b=s(I,v.props.children),b.return=y,y=b;break e}}else if(I.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Zd&&I6(_)===I.type){n(y,I.sibling),b=s(I,v.props),b.ref=iv(y,I,v),b.return=y,y=b;break e}n(y,I);break}else e(y,I);I=I.sibling}v.type===Ty?(b=gg(v.props.children,y.mode,A,v.key),b.return=y,y=b):(A=LS(v.type,v.key,v.props,null,y.mode,A),A.ref=iv(y,b,v),A.return=y,y=A)}return o(y);case Ny:e:{for(I=v.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=s(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=aP(v,y.mode,A),b.return=y,y=b}return o(y);case Zd:return I=v._init,w(y,b,I(v._payload),A)}if(Lv(v))return p(y,b,v,A);if(ev(v))return g(y,b,v,A);bA(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,v),b.return=y,y=b):(n(y,b),b=oP(v,y.mode,A),b.return=y,y=b),o(y)):n(y,b)}return w}var Aw=rq(!0),sq=rq(!1),Kx=Mf(null),Yx=null,Uy=null,ZM=null;function XM(){ZM=Uy=Yx=null}function eL(t){var e=Kx.current;ar(Kx),t._currentValue=e}function Sk(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function r0(t,e){Yx=t,ZM=Uy=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yo=!0),t.firstContext=null)}function ja(t){var e=t._currentValue;if(ZM!==t)if(t={context:t,memoizedValue:e,next:null},Uy===null){if(Yx===null)throw Error(Ce(308));Uy=t,Yx.dependencies={lanes:0,firstContext:t}}else Uy=Uy.next=t;return e}var Sp=null;function tL(t){Sp===null?Sp=[t]:Sp.push(t)}function iq(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,tL(e)):(n.next=s.next,s.next=n),e.interleaved=n,hd(t,r)}function hd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xd=!1;function nL(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oq(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ef(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,hn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,hd(t,n)}return s=r.interleaved,s===null?(e.next=e,tL(r)):(e.next=s.next,s.next=e),r.interleaved=e,hd(t,n)}function RS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jM(t,n)}}function N6(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qx(t,e,n,r){var s=t.updateQueue;Xd=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=_r({},d,h);break e;case 2:Xd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Pg|=o,t.lanes=o,t.memoizedState=d}}function T6(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ce(191,s));s.call(r)}}}var n1={},jl=Mf(n1),uC=Mf(n1),dC=Mf(n1);function xp(t){if(t===n1)throw Error(Ce(174));return t}function rL(t,e){switch(nr(dC,e),nr(uC,t),nr(jl,n1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ik(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ik(e,t)}ar(jl),nr(jl,e)}function Sw(){ar(jl),ar(uC),ar(dC)}function aq(t){xp(dC.current);var e=xp(jl.current),n=ik(e,t.type);e!==n&&(nr(uC,t),nr(jl,n))}function sL(t){uC.current===t&&(ar(jl),ar(uC))}var wr=Mf(0);function Jx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eP=[];function iL(){for(var t=0;t<eP.length;t++)eP[t]._workInProgressVersionPrimary=null;eP.length=0}var PS=Ed.ReactCurrentDispatcher,tP=Ed.ReactCurrentBatchConfig,Rg=0,Cr=null,Xr=null,ms=null,Zx=!1,yE=!1,hC=0,iue=0;function Xs(){throw Error(Ce(321))}function oL(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wc(t[n],e[n]))return!1;return!0}function aL(t,e,n,r,s,i){if(Rg=i,Cr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,PS.current=t===null||t.memoizedState===null?lue:uue,t=n(r,s),yE){i=0;do{if(yE=!1,hC=0,25<=i)throw Error(Ce(301));i+=1,ms=Xr=null,e.updateQueue=null,PS.current=due,t=n(r,s)}while(yE)}if(PS.current=Xx,e=Xr!==null&&Xr.next!==null,Rg=0,ms=Xr=Cr=null,Zx=!1,e)throw Error(Ce(300));return t}function cL(){var t=hC!==0;return hC=0,t}function ul(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ms===null?Cr.memoizedState=ms=t:ms=ms.next=t,ms}function Wa(){if(Xr===null){var t=Cr.alternate;t=t!==null?t.memoizedState:null}else t=Xr.next;var e=ms===null?Cr.memoizedState:ms.next;if(e!==null)ms=e,Xr=t;else{if(t===null)throw Error(Ce(310));Xr=t,t={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},ms===null?Cr.memoizedState=ms=t:ms=ms.next=t}return ms}function fC(t,e){return typeof e=="function"?e(t):e}function nP(t){var e=Wa(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=Xr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Rg&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Cr.lanes|=u,Pg|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Wc(r,e.memoizedState)||(yo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Cr.lanes|=i,Pg|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rP(t){var e=Wa(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Wc(i,e.memoizedState)||(yo=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function cq(){}function lq(t,e){var n=Cr,r=Wa(),s=e(),i=!Wc(r.memoizedState,s);if(i&&(r.memoizedState=s,yo=!0),r=r.queue,lL(hq.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ms!==null&&ms.memoizedState.tag&1){if(n.flags|=2048,pC(9,dq.bind(null,n,r,s,e),void 0,null),As===null)throw Error(Ce(349));Rg&30||uq(n,e,s)}return s}function uq(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Cr.updateQueue,e===null?(e={lastEffect:null,stores:null},Cr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dq(t,e,n,r){e.value=n,e.getSnapshot=r,fq(e)&&pq(t)}function hq(t,e,n){return n(function(){fq(e)&&pq(t)})}function fq(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wc(t,n)}catch{return!0}}function pq(t){var e=hd(t,1);e!==null&&Bc(e,t,1,-1)}function R6(t){var e=ul();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fC,lastRenderedState:t},e.queue=t,t=t.dispatch=cue.bind(null,Cr,t),[e.memoizedState,t]}function pC(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Cr.updateQueue,e===null?(e={lastEffect:null,stores:null},Cr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gq(){return Wa().memoizedState}function OS(t,e,n,r){var s=ul();Cr.flags|=t,s.memoizedState=pC(1|e,n,void 0,r===void 0?null:r)}function MN(t,e,n,r){var s=Wa();r=r===void 0?null:r;var i=void 0;if(Xr!==null){var o=Xr.memoizedState;if(i=o.destroy,r!==null&&oL(r,o.deps)){s.memoizedState=pC(e,n,i,r);return}}Cr.flags|=t,s.memoizedState=pC(1|e,n,i,r)}function P6(t,e){return OS(8390656,8,t,e)}function lL(t,e){return MN(2048,8,t,e)}function mq(t,e){return MN(4,2,t,e)}function yq(t,e){return MN(4,4,t,e)}function wq(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bq(t,e,n){return n=n!=null?n.concat([t]):null,MN(4,4,wq.bind(null,e,t),n)}function uL(){}function vq(t,e){var n=Wa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&oL(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Eq(t,e){var n=Wa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&oL(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cq(t,e,n){return Rg&21?(Wc(n,e)||(n=IG(),Cr.lanes|=n,Pg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yo=!0),t.memoizedState=n)}function oue(t,e){var n=On;On=n!==0&&4>n?n:4,t(!0);var r=tP.transition;tP.transition={};try{t(!1),e()}finally{On=n,tP.transition=r}}function _q(){return Wa().memoizedState}function aue(t,e,n){var r=nf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Aq(t))Sq(e,n);else if(n=iq(t,e,n,r),n!==null){var s=Di();Bc(n,t,r,s),xq(n,e,r)}}function cue(t,e,n){var r=nf(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Aq(t))Sq(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Wc(a,o)){var c=e.interleaved;c===null?(s.next=s,tL(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=iq(t,e,s,r),n!==null&&(s=Di(),Bc(n,t,r,s),xq(n,e,r))}}function Aq(t){var e=t.alternate;return t===Cr||e!==null&&e===Cr}function Sq(t,e){yE=Zx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xq(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jM(t,n)}}var Xx={readContext:ja,useCallback:Xs,useContext:Xs,useEffect:Xs,useImperativeHandle:Xs,useInsertionEffect:Xs,useLayoutEffect:Xs,useMemo:Xs,useReducer:Xs,useRef:Xs,useState:Xs,useDebugValue:Xs,useDeferredValue:Xs,useTransition:Xs,useMutableSource:Xs,useSyncExternalStore:Xs,useId:Xs,unstable_isNewReconciler:!1},lue={readContext:ja,useCallback:function(t,e){return ul().memoizedState=[t,e===void 0?null:e],t},useContext:ja,useEffect:P6,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,OS(4194308,4,wq.bind(null,e,t),n)},useLayoutEffect:function(t,e){return OS(4194308,4,t,e)},useInsertionEffect:function(t,e){return OS(4,2,t,e)},useMemo:function(t,e){var n=ul();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ul();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aue.bind(null,Cr,t),[r.memoizedState,t]},useRef:function(t){var e=ul();return t={current:t},e.memoizedState=t},useState:R6,useDebugValue:uL,useDeferredValue:function(t){return ul().memoizedState=t},useTransition:function(){var t=R6(!1),e=t[0];return t=oue.bind(null,t[1]),ul().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Cr,s=ul();if(pr){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=e(),As===null)throw Error(Ce(349));Rg&30||uq(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,P6(hq.bind(null,r,i,t),[t]),r.flags|=2048,pC(9,dq.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ul(),e=As.identifierPrefix;if(pr){var n=Ku,r=Vu;n=(r&~(1<<32-$c(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hC++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iue++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uue={readContext:ja,useCallback:vq,useContext:ja,useEffect:lL,useImperativeHandle:bq,useInsertionEffect:mq,useLayoutEffect:yq,useMemo:Eq,useReducer:nP,useRef:gq,useState:function(){return nP(fC)},useDebugValue:uL,useDeferredValue:function(t){var e=Wa();return Cq(e,Xr.memoizedState,t)},useTransition:function(){var t=nP(fC)[0],e=Wa().memoizedState;return[t,e]},useMutableSource:cq,useSyncExternalStore:lq,useId:_q,unstable_isNewReconciler:!1},due={readContext:ja,useCallback:vq,useContext:ja,useEffect:lL,useImperativeHandle:bq,useInsertionEffect:mq,useLayoutEffect:yq,useMemo:Eq,useReducer:rP,useRef:gq,useState:function(){return rP(fC)},useDebugValue:uL,useDeferredValue:function(t){var e=Wa();return Xr===null?e.memoizedState=t:Cq(e,Xr.memoizedState,t)},useTransition:function(){var t=rP(fC)[0],e=Wa().memoizedState;return[t,e]},useMutableSource:cq,useSyncExternalStore:lq,useId:_q,unstable_isNewReconciler:!1};function gc(t,e){if(t&&t.defaultProps){e=_r({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xk(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_r({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var LN={isMounted:function(t){return(t=t._reactInternals)?lm(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Di(),s=nf(t),i=Xu(r,s);i.payload=e,n!=null&&(i.callback=n),e=ef(t,i,s),e!==null&&(Bc(e,t,s,r),RS(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Di(),s=nf(t),i=Xu(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ef(t,i,s),e!==null&&(Bc(e,t,s,r),RS(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Di(),r=nf(t),s=Xu(n,r);s.tag=2,e!=null&&(s.callback=e),e=ef(t,s,r),e!==null&&(Bc(e,t,r,n),RS(e,t,r))}};function O6(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!oC(n,r)||!oC(s,i):!0}function Iq(t,e,n){var r=!1,s=Ef,i=e.contextType;return typeof i=="object"&&i!==null?i=ja(i):(s=vo(e)?Ng:di.current,r=e.contextTypes,i=(r=r!=null)?Cw(t,s):Ef),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=LN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function k6(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&LN.enqueueReplaceState(e,e.state,null)}function Ik(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},nL(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ja(i):(i=vo(e)?Ng:di.current,s.context=Cw(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(xk(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&LN.enqueueReplaceState(s,s.state,null),Qx(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xw(t,e){try{var n="",r=e;do n+=Bce(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function sP(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nk(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hue=typeof WeakMap=="function"?WeakMap:Map;function Nq(t,e,n){n=Xu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tI||(tI=!0,$k=r),Nk(t,e)},n}function Tq(t,e,n){n=Xu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Nk(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Nk(t,e),typeof r!="function"&&(tf===null?tf=new Set([this]):tf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function D6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hue;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=xue.bind(null,t,e,n),e.then(t,t))}function M6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L6(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xu(-1,1),e.tag=2,ef(n,e,1))),n.lanes|=1),t)}var fue=Ed.ReactCurrentOwner,yo=!1;function Ci(t,e,n,r){e.child=t===null?sq(e,null,n,r):Aw(e,t.child,n,r)}function U6(t,e,n,r,s){n=n.render;var i=e.ref;return r0(e,s),r=aL(t,e,n,r,i,s),n=cL(),t!==null&&!yo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fd(t,e,s)):(pr&&n&&YM(e),e.flags|=1,Ci(t,e,r,s),e.child)}function $6(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!wL(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Rq(t,e,i,r,s)):(t=LS(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:oC,n(o,r)&&t.ref===e.ref)return fd(t,e,s)}return e.flags|=1,t=rf(i,r),t.ref=e.ref,t.return=e,e.child=t}function Rq(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(oC(i,r)&&t.ref===e.ref)if(yo=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(yo=!0);else return e.lanes=t.lanes,fd(t,e,s)}return Tk(t,e,n,r,s)}function Pq(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(By,Ho),Ho|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nr(By,Ho),Ho|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,nr(By,Ho),Ho|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,nr(By,Ho),Ho|=r;return Ci(t,e,s,n),e.child}function Oq(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tk(t,e,n,r,s){var i=vo(n)?Ng:di.current;return i=Cw(e,i),r0(e,s),n=aL(t,e,n,r,i,s),r=cL(),t!==null&&!yo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fd(t,e,s)):(pr&&r&&YM(e),e.flags|=1,Ci(t,e,n,s),e.child)}function B6(t,e,n,r,s){if(vo(n)){var i=!0;Gx(e)}else i=!1;if(r0(e,s),e.stateNode===null)kS(t,e),Iq(e,n,r),Ik(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=ja(l):(l=vo(n)?Ng:di.current,l=Cw(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&k6(e,o,r,l),Xd=!1;var h=e.memoizedState;o.state=h,Qx(e,r,o,s),c=e.memoizedState,a!==r||h!==c||bo.current||Xd?(typeof u=="function"&&(xk(e,n,u,r),c=e.memoizedState),(a=Xd||O6(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,oq(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:gc(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ja(c):(c=vo(n)?Ng:di.current,c=Cw(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&k6(e,o,r,c),Xd=!1,h=e.memoizedState,o.state=h,Qx(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||bo.current||Xd?(typeof f=="function"&&(xk(e,n,f,r),p=e.memoizedState),(l=Xd||O6(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Rk(t,e,n,r,i,s)}function Rk(t,e,n,r,s,i){Oq(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&A6(e,n,!1),fd(t,e,i);r=e.stateNode,fue.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Aw(e,t.child,null,i),e.child=Aw(e,null,a,i)):Ci(t,e,a,i),e.memoizedState=r.state,s&&A6(e,n,!0),e.child}function kq(t){var e=t.stateNode;e.pendingContext?_6(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_6(t,e.context,!1),rL(t,e.containerInfo)}function F6(t,e,n,r,s){return _w(),JM(s),e.flags|=256,Ci(t,e,n,r),e.child}var Pk={dehydrated:null,treeContext:null,retryLane:0};function Ok(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dq(t,e,n){var r=e.pendingProps,s=wr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),nr(wr,s&1),t===null)return Ak(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=BN(o,r,0,null),t=gg(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ok(n),e.memoizedState=Pk,t):dL(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return pue(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=rf(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=rf(a,i):(i=gg(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ok(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Pk,r}return i=t.child,t=i.sibling,r=rf(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function dL(t,e){return e=BN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vA(t,e,n,r){return r!==null&&JM(r),Aw(e,t.child,null,n),t=dL(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pue(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=sP(Error(Ce(422))),vA(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=BN({mode:"visible",children:r.children},s,0,null),i=gg(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Aw(e,t.child,null,o),e.child.memoizedState=Ok(o),e.memoizedState=Pk,i);if(!(e.mode&1))return vA(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ce(419)),r=sP(i,r,void 0),vA(t,e,o,r)}if(a=(o&t.childLanes)!==0,yo||a){if(r=As,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hd(t,s),Bc(r,t,s,-1))}return yL(),r=sP(Error(Ce(421))),vA(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Iue.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Yo=Xh(s.nextSibling),Xo=e,pr=!0,xc=null,t!==null&&(ka[Da++]=Vu,ka[Da++]=Ku,ka[Da++]=Tg,Vu=t.id,Ku=t.overflow,Tg=e),e=dL(e,r.children),e.flags|=4096,e)}function j6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sk(t.return,e,n)}function iP(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Mq(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ci(t,e,r.children,n),r=wr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j6(t,n,e);else if(t.tag===19)j6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nr(wr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jx(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),iP(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jx(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}iP(e,!0,n,null,i);break;case"together":iP(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kS(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fd(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ce(153));if(e.child!==null){for(t=e.child,n=rf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gue(t,e,n){switch(e.tag){case 3:kq(e),_w();break;case 5:aq(e);break;case 1:vo(e.type)&&Gx(e);break;case 4:rL(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;nr(Kx,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nr(wr,wr.current&1),e.flags|=128,null):n&e.child.childLanes?Dq(t,e,n):(nr(wr,wr.current&1),t=fd(t,e,n),t!==null?t.sibling:null);nr(wr,wr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Mq(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nr(wr,wr.current),r)break;return null;case 22:case 23:return e.lanes=0,Pq(t,e,n)}return fd(t,e,n)}var Lq,kk,Uq,$q;Lq=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kk=function(){};Uq=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,xp(jl.current);var i=null;switch(n){case"input":s=tk(t,s),r=tk(t,r),i=[];break;case"select":s=_r({},s,{value:void 0}),r=_r({},r,{value:void 0}),i=[];break;case"textarea":s=sk(t,s),r=sk(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zx)}ok(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(XE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(XE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&ir("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};$q=function(t,e,n,r){n!==r&&(e.flags|=4)};function ov(t,e){if(!pr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ei(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mue(t,e,n){var r=e.pendingProps;switch(QM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(e),null;case 1:return vo(e.type)&&Hx(),ei(e),null;case 3:return r=e.stateNode,Sw(),ar(bo),ar(di),iL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wA(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xc!==null&&(jk(xc),xc=null))),kk(t,e),ei(e),null;case 5:sL(e);var s=xp(dC.current);if(n=e.type,t!==null&&e.stateNode!=null)Uq(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ce(166));return ei(e),null}if(t=xp(jl.current),wA(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ol]=e,r[lC]=i,t=(e.mode&1)!==0,n){case"dialog":ir("cancel",r),ir("close",r);break;case"iframe":case"object":case"embed":ir("load",r);break;case"video":case"audio":for(s=0;s<$v.length;s++)ir($v[s],r);break;case"source":ir("error",r);break;case"img":case"image":case"link":ir("error",r),ir("load",r);break;case"details":ir("toggle",r);break;case"input":QB(r,i),ir("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ir("invalid",r);break;case"textarea":ZB(r,i),ir("invalid",r)}ok(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&yA(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&yA(r.textContent,a,t),s=["children",""+a]):XE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ir("scroll",r)}switch(n){case"input":lA(r),JB(r,i,!0);break;case"textarea":lA(r),XB(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zx)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hG(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ol]=e,t[lC]=r,Lq(t,e,!1,!1),e.stateNode=t;e:{switch(o=ak(n,r),n){case"dialog":ir("cancel",t),ir("close",t),s=r;break;case"iframe":case"object":case"embed":ir("load",t),s=r;break;case"video":case"audio":for(s=0;s<$v.length;s++)ir($v[s],t);s=r;break;case"source":ir("error",t),s=r;break;case"img":case"image":case"link":ir("error",t),ir("load",t),s=r;break;case"details":ir("toggle",t),s=r;break;case"input":QB(t,r),s=tk(t,r),ir("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=_r({},r,{value:void 0}),ir("invalid",t);break;case"textarea":ZB(t,r),s=sk(t,r),ir("invalid",t);break;default:s=r}ok(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?gG(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&fG(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&eC(t,c):typeof c=="number"&&eC(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(XE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ir("scroll",t):c!=null&&MM(t,i,c,o))}switch(n){case"input":lA(t),JB(t,r,!1);break;case"textarea":lA(t),XB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vf(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Xy(t,!!r.multiple,i,!1):r.defaultValue!=null&&Xy(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=zx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ei(e),null;case 6:if(t&&e.stateNode!=null)$q(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ce(166));if(n=xp(dC.current),xp(jl.current),wA(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ol]=e,(i=r.nodeValue!==n)&&(t=Xo,t!==null))switch(t.tag){case 3:yA(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yA(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ol]=e,e.stateNode=r}return ei(e),null;case 13:if(ar(wr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pr&&Yo!==null&&e.mode&1&&!(e.flags&128))nq(),_w(),e.flags|=98560,i=!1;else if(i=wA(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ce(317));i[Ol]=e}else _w(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ei(e),i=!1}else xc!==null&&(jk(xc),xc=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||wr.current&1?ss===0&&(ss=3):yL())),e.updateQueue!==null&&(e.flags|=4),ei(e),null);case 4:return Sw(),kk(t,e),t===null&&aC(e.stateNode.containerInfo),ei(e),null;case 10:return eL(e.type._context),ei(e),null;case 17:return vo(e.type)&&Hx(),ei(e),null;case 19:if(ar(wr),i=e.memoizedState,i===null)return ei(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ov(i,!1);else{if(ss!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jx(t),o!==null){for(e.flags|=128,ov(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nr(wr,wr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ur()>Iw&&(e.flags|=128,r=!0,ov(i,!1),e.lanes=4194304)}else{if(!r)if(t=Jx(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ov(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pr)return ei(e),null}else 2*Ur()-i.renderingStartTime>Iw&&n!==1073741824&&(e.flags|=128,r=!0,ov(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ur(),e.sibling=null,n=wr.current,nr(wr,r?n&1|2:n&1),e):(ei(e),null);case 22:case 23:return mL(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ho&1073741824&&(ei(e),e.subtreeFlags&6&&(e.flags|=8192)):ei(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function yue(t,e){switch(QM(e),e.tag){case 1:return vo(e.type)&&Hx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Sw(),ar(bo),ar(di),iL(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sL(e),null;case 13:if(ar(wr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));_w()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ar(wr),null;case 4:return Sw(),null;case 10:return eL(e.type._context),null;case 22:case 23:return mL(),null;case 24:return null;default:return null}}var EA=!1,li=!1,wue=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function $y(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nr(t,e,r)}else n.current=null}function Dk(t,e,n){try{n()}catch(r){Nr(t,e,r)}}var W6=!1;function bue(t,e){if(yk=Fx,t=zG(),KM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wk={focusedElem:t,selectionRange:n},Fx=!1,Ve=e;Ve!==null;)if(e=Ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ve=t;else for(;Ve!==null;){e=Ve;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:gc(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(A){Nr(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ve=t;break}Ve=e.return}return p=W6,W6=!1,p}function wE(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dk(e,n,i)}s=s.next}while(s!==r)}}function UN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mk(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Bq(t){var e=t.alternate;e!==null&&(t.alternate=null,Bq(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ol],delete e[lC],delete e[Ek],delete e[tue],delete e[nue])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fq(t){return t.tag===5||t.tag===3||t.tag===4}function z6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zx));else if(r!==4&&(t=t.child,t!==null))for(Lk(t,e,n),t=t.sibling;t!==null;)Lk(t,e,n),t=t.sibling}function Uk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Uk(t,e,n),t=t.sibling;t!==null;)Uk(t,e,n),t=t.sibling}var Us=null,Sc=!1;function Nd(t,e,n){for(n=n.child;n!==null;)jq(t,e,n),n=n.sibling}function jq(t,e,n){if(Fl&&typeof Fl.onCommitFiberUnmount=="function")try{Fl.onCommitFiberUnmount(TN,n)}catch{}switch(n.tag){case 5:li||$y(n,e);case 6:var r=Us,s=Sc;Us=null,Nd(t,e,n),Us=r,Sc=s,Us!==null&&(Sc?(t=Us,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Us.removeChild(n.stateNode));break;case 18:Us!==null&&(Sc?(t=Us,n=n.stateNode,t.nodeType===8?ZR(t.parentNode,n):t.nodeType===1&&ZR(t,n),sC(t)):ZR(Us,n.stateNode));break;case 4:r=Us,s=Sc,Us=n.stateNode.containerInfo,Sc=!0,Nd(t,e,n),Us=r,Sc=s;break;case 0:case 11:case 14:case 15:if(!li&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Dk(n,e,o),s=s.next}while(s!==r)}Nd(t,e,n);break;case 1:if(!li&&($y(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Nr(n,e,a)}Nd(t,e,n);break;case 21:Nd(t,e,n);break;case 22:n.mode&1?(li=(r=li)||n.memoizedState!==null,Nd(t,e,n),li=r):Nd(t,e,n);break;default:Nd(t,e,n)}}function H6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wue),e.forEach(function(r){var s=Nue.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ic(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Us=a.stateNode,Sc=!1;break e;case 3:Us=a.stateNode.containerInfo,Sc=!0;break e;case 4:Us=a.stateNode.containerInfo,Sc=!0;break e}a=a.return}if(Us===null)throw Error(Ce(160));jq(i,o,s),Us=null,Sc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Nr(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wq(e,t),e=e.sibling}function Wq(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ic(e,t),el(t),r&4){try{wE(3,t,t.return),UN(3,t)}catch(g){Nr(t,t.return,g)}try{wE(5,t,t.return)}catch(g){Nr(t,t.return,g)}}break;case 1:ic(e,t),el(t),r&512&&n!==null&&$y(n,n.return);break;case 5:if(ic(e,t),el(t),r&512&&n!==null&&$y(n,n.return),t.flags&32){var s=t.stateNode;try{eC(s,"")}catch(g){Nr(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&uG(s,i),ak(a,o);var l=ak(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?gG(s,d):u==="dangerouslySetInnerHTML"?fG(s,d):u==="children"?eC(s,d):MM(s,u,d,l)}switch(a){case"input":nk(s,i);break;case"textarea":dG(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Xy(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Xy(s,!!i.multiple,i.defaultValue,!0):Xy(s,!!i.multiple,i.multiple?[]:"",!1))}s[lC]=i}catch(g){Nr(t,t.return,g)}}break;case 6:if(ic(e,t),el(t),r&4){if(t.stateNode===null)throw Error(Ce(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Nr(t,t.return,g)}}break;case 3:if(ic(e,t),el(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sC(e.containerInfo)}catch(g){Nr(t,t.return,g)}break;case 4:ic(e,t),el(t);break;case 13:ic(e,t),el(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(pL=Ur())),r&4&&H6(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(li=(l=li)||u,ic(e,t),li=l):ic(e,t),el(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ve=t,u=t.child;u!==null;){for(d=Ve=u;Ve!==null;){switch(h=Ve,f=h.child,h.tag){case 0:case 11:case 14:case 15:wE(4,h,h.return);break;case 1:$y(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Nr(r,n,g)}}break;case 5:$y(h,h.return);break;case 22:if(h.memoizedState!==null){q6(d);continue}}f!==null?(f.return=h,Ve=f):q6(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=pG("display",o))}catch(g){Nr(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Nr(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ic(e,t),el(t),r&4&&H6(t);break;case 21:break;default:ic(e,t),el(t)}}function el(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Fq(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(eC(s,""),r.flags&=-33);var i=z6(t);Uk(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=z6(t);Lk(t,a,o);break;default:throw Error(Ce(161))}}catch(c){Nr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vue(t,e,n){Ve=t,zq(t)}function zq(t,e,n){for(var r=(t.mode&1)!==0;Ve!==null;){var s=Ve,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||EA;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||li;a=EA;var l=li;if(EA=o,(li=c)&&!l)for(Ve=s;Ve!==null;)o=Ve,c=o.child,o.tag===22&&o.memoizedState!==null?V6(s):c!==null?(c.return=o,Ve=c):V6(s);for(;i!==null;)Ve=i,zq(i),i=i.sibling;Ve=s,EA=a,li=l}G6(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ve=i):G6(t)}}function G6(t){for(;Ve!==null;){var e=Ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:li||UN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!li)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:gc(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&T6(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}T6(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&sC(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}li||e.flags&512&&Mk(e)}catch(h){Nr(e,e.return,h)}}if(e===t){Ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function q6(t){for(;Ve!==null;){var e=Ve;if(e===t){Ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function V6(t){for(;Ve!==null;){var e=Ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{UN(4,e)}catch(c){Nr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Nr(e,s,c)}}var i=e.return;try{Mk(e)}catch(c){Nr(e,i,c)}break;case 5:var o=e.return;try{Mk(e)}catch(c){Nr(e,o,c)}}}catch(c){Nr(e,e.return,c)}if(e===t){Ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ve=a;break}Ve=e.return}}var Eue=Math.ceil,eI=Ed.ReactCurrentDispatcher,hL=Ed.ReactCurrentOwner,Ba=Ed.ReactCurrentBatchConfig,hn=0,As=null,qr=null,zs=0,Ho=0,By=Mf(0),ss=0,gC=null,Pg=0,$N=0,fL=0,bE=null,fo=null,pL=0,Iw=1/0,_u=null,tI=!1,$k=null,tf=null,CA=!1,$h=null,nI=0,vE=0,Bk=null,DS=-1,MS=0;function Di(){return hn&6?Ur():DS!==-1?DS:DS=Ur()}function nf(t){return t.mode&1?hn&2&&zs!==0?zs&-zs:sue.transition!==null?(MS===0&&(MS=IG()),MS):(t=On,t!==0||(t=window.event,t=t===void 0?16:DG(t.type)),t):1}function Bc(t,e,n,r){if(50<vE)throw vE=0,Bk=null,Error(Ce(185));X_(t,n,r),(!(hn&2)||t!==As)&&(t===As&&(!(hn&2)&&($N|=n),ss===4&&ih(t,zs)),Eo(t,r),n===1&&hn===0&&!(e.mode&1)&&(Iw=Ur()+500,DN&&Lf()))}function Eo(t,e){var n=t.callbackNode;sle(t,e);var r=Bx(t,t===As?zs:0);if(r===0)n!==null&&n6(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&n6(n),e===1)t.tag===0?rue(K6.bind(null,t)):XG(K6.bind(null,t)),Xle(function(){!(hn&6)&&Lf()}),n=null;else{switch(NG(r)){case 1:n=FM;break;case 4:n=SG;break;case 16:n=$x;break;case 536870912:n=xG;break;default:n=$x}n=Jq(n,Hq.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Hq(t,e){if(DS=-1,MS=0,hn&6)throw Error(Ce(327));var n=t.callbackNode;if(s0()&&t.callbackNode!==n)return null;var r=Bx(t,t===As?zs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rI(t,r);else{e=r;var s=hn;hn|=2;var i=qq();(As!==t||zs!==e)&&(_u=null,Iw=Ur()+500,pg(t,e));do try{Aue();break}catch(a){Gq(t,a)}while(!0);XM(),eI.current=i,hn=s,qr!==null?e=0:(As=null,zs=0,e=ss)}if(e!==0){if(e===2&&(s=hk(t),s!==0&&(r=s,e=Fk(t,s))),e===1)throw n=gC,pg(t,0),ih(t,r),Eo(t,Ur()),n;if(e===6)ih(t,r);else{if(s=t.current.alternate,!(r&30)&&!Cue(s)&&(e=rI(t,r),e===2&&(i=hk(t),i!==0&&(r=i,e=Fk(t,i))),e===1))throw n=gC,pg(t,0),ih(t,r),Eo(t,Ur()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ce(345));case 2:op(t,fo,_u);break;case 3:if(ih(t,r),(r&130023424)===r&&(e=pL+500-Ur(),10<e)){if(Bx(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Di(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=vk(op.bind(null,t,fo,_u),e);break}op(t,fo,_u);break;case 4:if(ih(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-$c(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ur()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eue(r/1960))-r,10<r){t.timeoutHandle=vk(op.bind(null,t,fo,_u),r);break}op(t,fo,_u);break;case 5:op(t,fo,_u);break;default:throw Error(Ce(329))}}}return Eo(t,Ur()),t.callbackNode===n?Hq.bind(null,t):null}function Fk(t,e){var n=bE;return t.current.memoizedState.isDehydrated&&(pg(t,e).flags|=256),t=rI(t,e),t!==2&&(e=fo,fo=n,e!==null&&jk(e)),t}function jk(t){fo===null?fo=t:fo.push.apply(fo,t)}function Cue(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Wc(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ih(t,e){for(e&=~fL,e&=~$N,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$c(e),r=1<<n;t[n]=-1,e&=~r}}function K6(t){if(hn&6)throw Error(Ce(327));s0();var e=Bx(t,0);if(!(e&1))return Eo(t,Ur()),null;var n=rI(t,e);if(t.tag!==0&&n===2){var r=hk(t);r!==0&&(e=r,n=Fk(t,r))}if(n===1)throw n=gC,pg(t,0),ih(t,e),Eo(t,Ur()),n;if(n===6)throw Error(Ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,op(t,fo,_u),Eo(t,Ur()),null}function gL(t,e){var n=hn;hn|=1;try{return t(e)}finally{hn=n,hn===0&&(Iw=Ur()+500,DN&&Lf())}}function Og(t){$h!==null&&$h.tag===0&&!(hn&6)&&s0();var e=hn;hn|=1;var n=Ba.transition,r=On;try{if(Ba.transition=null,On=1,t)return t()}finally{On=r,Ba.transition=n,hn=e,!(hn&6)&&Lf()}}function mL(){Ho=By.current,ar(By)}function pg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Zle(n)),qr!==null)for(n=qr.return;n!==null;){var r=n;switch(QM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hx();break;case 3:Sw(),ar(bo),ar(di),iL();break;case 5:sL(r);break;case 4:Sw();break;case 13:ar(wr);break;case 19:ar(wr);break;case 10:eL(r.type._context);break;case 22:case 23:mL()}n=n.return}if(As=t,qr=t=rf(t.current,null),zs=Ho=e,ss=0,gC=null,fL=$N=Pg=0,fo=bE=null,Sp!==null){for(e=0;e<Sp.length;e++)if(n=Sp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Sp=null}return t}function Gq(t,e){do{var n=qr;try{if(XM(),PS.current=Xx,Zx){for(var r=Cr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zx=!1}if(Rg=0,ms=Xr=Cr=null,yE=!1,hC=0,hL.current=null,n===null||n.return===null){ss=1,gC=e,qr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=zs,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=M6(o);if(f!==null){f.flags&=-257,L6(f,o,a,i,e),f.mode&1&&D6(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){D6(i,l,e),yL();break e}c=Error(Ce(426))}}else if(pr&&a.mode&1){var w=M6(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),L6(w,o,a,i,e),JM(xw(c,a));break e}}i=c=xw(c,a),ss!==4&&(ss=2),bE===null?bE=[i]:bE.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Nq(i,c,e);N6(i,y);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(tf===null||!tf.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=Tq(i,a,e);N6(i,A);break e}}i=i.return}while(i!==null)}Kq(n)}catch(_){e=_,qr===n&&n!==null&&(qr=n=n.return);continue}break}while(!0)}function qq(){var t=eI.current;return eI.current=Xx,t===null?Xx:t}function yL(){(ss===0||ss===3||ss===2)&&(ss=4),As===null||!(Pg&268435455)&&!($N&268435455)||ih(As,zs)}function rI(t,e){var n=hn;hn|=2;var r=qq();(As!==t||zs!==e)&&(_u=null,pg(t,e));do try{_ue();break}catch(s){Gq(t,s)}while(!0);if(XM(),hn=n,eI.current=r,qr!==null)throw Error(Ce(261));return As=null,zs=0,ss}function _ue(){for(;qr!==null;)Vq(qr)}function Aue(){for(;qr!==null&&!Yce();)Vq(qr)}function Vq(t){var e=Qq(t.alternate,t,Ho);t.memoizedProps=t.pendingProps,e===null?Kq(t):qr=e,hL.current=null}function Kq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yue(n,e),n!==null){n.flags&=32767,qr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ss=6,qr=null;return}}else if(n=mue(n,e,Ho),n!==null){qr=n;return}if(e=e.sibling,e!==null){qr=e;return}qr=e=t}while(e!==null);ss===0&&(ss=5)}function op(t,e,n){var r=On,s=Ba.transition;try{Ba.transition=null,On=1,Sue(t,e,n,r)}finally{Ba.transition=s,On=r}return null}function Sue(t,e,n,r){do s0();while($h!==null);if(hn&6)throw Error(Ce(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ce(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ile(t,i),t===As&&(qr=As=null,zs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||CA||(CA=!0,Jq($x,function(){return s0(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ba.transition,Ba.transition=null;var o=On;On=1;var a=hn;hn|=4,hL.current=null,bue(t,n),Wq(n,t),Gle(wk),Fx=!!yk,wk=yk=null,t.current=n,vue(n),Qce(),hn=a,On=o,Ba.transition=i}else t.current=n;if(CA&&(CA=!1,$h=t,nI=s),i=t.pendingLanes,i===0&&(tf=null),Xce(n.stateNode),Eo(t,Ur()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tI)throw tI=!1,t=$k,$k=null,t;return nI&1&&t.tag!==0&&s0(),i=t.pendingLanes,i&1?t===Bk?vE++:(vE=0,Bk=t):vE=0,Lf(),null}function s0(){if($h!==null){var t=NG(nI),e=Ba.transition,n=On;try{if(Ba.transition=null,On=16>t?16:t,$h===null)var r=!1;else{if(t=$h,$h=null,nI=0,hn&6)throw Error(Ce(331));var s=hn;for(hn|=4,Ve=t.current;Ve!==null;){var i=Ve,o=i.child;if(Ve.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ve=l;Ve!==null;){var u=Ve;switch(u.tag){case 0:case 11:case 15:wE(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ve=d;else for(;Ve!==null;){u=Ve;var h=u.sibling,f=u.return;if(Bq(u),u===l){Ve=null;break}if(h!==null){h.return=f,Ve=h;break}Ve=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ve=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ve=o;else e:for(;Ve!==null;){if(i=Ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wE(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ve=y;break e}Ve=i.return}}var b=t.current;for(Ve=b;Ve!==null;){o=Ve;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ve=v;else e:for(o=b;Ve!==null;){if(a=Ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:UN(9,a)}}catch(_){Nr(a,a.return,_)}if(a===o){Ve=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ve=A;break e}Ve=a.return}}if(hn=s,Lf(),Fl&&typeof Fl.onPostCommitFiberRoot=="function")try{Fl.onPostCommitFiberRoot(TN,t)}catch{}r=!0}return r}finally{On=n,Ba.transition=e}}return!1}function Y6(t,e,n){e=xw(n,e),e=Nq(t,e,1),t=ef(t,e,1),e=Di(),t!==null&&(X_(t,1,e),Eo(t,e))}function Nr(t,e,n){if(t.tag===3)Y6(t,t,n);else for(;e!==null;){if(e.tag===3){Y6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tf===null||!tf.has(r))){t=xw(n,t),t=Tq(e,t,1),e=ef(e,t,1),t=Di(),e!==null&&(X_(e,1,t),Eo(e,t));break}}e=e.return}}function xue(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Di(),t.pingedLanes|=t.suspendedLanes&n,As===t&&(zs&n)===n&&(ss===4||ss===3&&(zs&130023424)===zs&&500>Ur()-pL?pg(t,0):fL|=n),Eo(t,e)}function Yq(t,e){e===0&&(t.mode&1?(e=hA,hA<<=1,!(hA&130023424)&&(hA=4194304)):e=1);var n=Di();t=hd(t,e),t!==null&&(X_(t,e,n),Eo(t,n))}function Iue(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Yq(t,n)}function Nue(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(e),Yq(t,n)}var Qq;Qq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bo.current)yo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yo=!1,gue(t,e,n);yo=!!(t.flags&131072)}else yo=!1,pr&&e.flags&1048576&&eq(e,Vx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kS(t,e),t=e.pendingProps;var s=Cw(e,di.current);r0(e,n),s=aL(null,e,r,t,s,n);var i=cL();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vo(r)?(i=!0,Gx(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,nL(e),s.updater=LN,e.stateNode=s,s._reactInternals=e,Ik(e,r,t,n),e=Rk(null,e,r,!0,i,n)):(e.tag=0,pr&&i&&YM(e),Ci(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(kS(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Rue(r),t=gc(r,t),s){case 0:e=Tk(null,e,r,t,n);break e;case 1:e=B6(null,e,r,t,n);break e;case 11:e=U6(null,e,r,t,n);break e;case 14:e=$6(null,e,r,gc(r.type,t),n);break e}throw Error(Ce(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gc(r,s),Tk(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gc(r,s),B6(t,e,r,s,n);case 3:e:{if(kq(e),t===null)throw Error(Ce(387));r=e.pendingProps,i=e.memoizedState,s=i.element,oq(t,e),Qx(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=xw(Error(Ce(423)),e),e=F6(t,e,r,n,s);break e}else if(r!==s){s=xw(Error(Ce(424)),e),e=F6(t,e,r,n,s);break e}else for(Yo=Xh(e.stateNode.containerInfo.firstChild),Xo=e,pr=!0,xc=null,n=sq(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_w(),r===s){e=fd(t,e,n);break e}Ci(t,e,r,n)}e=e.child}return e;case 5:return aq(e),t===null&&Ak(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,bk(r,s)?o=null:i!==null&&bk(r,i)&&(e.flags|=32),Oq(t,e),Ci(t,e,o,n),e.child;case 6:return t===null&&Ak(e),null;case 13:return Dq(t,e,n);case 4:return rL(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Aw(e,null,r,n):Ci(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gc(r,s),U6(t,e,r,s,n);case 7:return Ci(t,e,e.pendingProps,n),e.child;case 8:return Ci(t,e,e.pendingProps.children,n),e.child;case 12:return Ci(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,nr(Kx,r._currentValue),r._currentValue=o,i!==null)if(Wc(i.value,o)){if(i.children===s.children&&!bo.current){e=fd(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Xu(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Sk(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Sk(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ci(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,r0(e,n),s=ja(s),r=r(s),e.flags|=1,Ci(t,e,r,n),e.child;case 14:return r=e.type,s=gc(r,e.pendingProps),s=gc(r.type,s),$6(t,e,r,s,n);case 15:return Rq(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gc(r,s),kS(t,e),e.tag=1,vo(r)?(t=!0,Gx(e)):t=!1,r0(e,n),Iq(e,r,s),Ik(e,r,s,n),Rk(null,e,r,!0,t,n);case 19:return Mq(t,e,n);case 22:return Pq(t,e,n)}throw Error(Ce(156,e.tag))};function Jq(t,e){return AG(t,e)}function Tue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function La(t,e,n,r){return new Tue(t,e,n,r)}function wL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rue(t){if(typeof t=="function")return wL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===UM)return 11;if(t===$M)return 14}return 2}function rf(t,e){var n=t.alternate;return n===null?(n=La(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function LS(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")wL(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ty:return gg(n.children,s,i,e);case LM:o=8,s|=8;break;case J2:return t=La(12,n,e,s|2),t.elementType=J2,t.lanes=i,t;case Z2:return t=La(13,n,e,s),t.elementType=Z2,t.lanes=i,t;case X2:return t=La(19,n,e,s),t.elementType=X2,t.lanes=i,t;case aG:return BN(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iG:o=10;break e;case oG:o=9;break e;case UM:o=11;break e;case $M:o=14;break e;case Zd:o=16,r=null;break e}throw Error(Ce(130,t==null?t:typeof t,""))}return e=La(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function gg(t,e,n,r){return t=La(7,t,r,e),t.lanes=n,t}function BN(t,e,n,r){return t=La(22,t,r,e),t.elementType=aG,t.lanes=n,t.stateNode={isHidden:!1},t}function oP(t,e,n){return t=La(6,t,null,e),t.lanes=n,t}function aP(t,e,n){return e=La(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pue(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jR(0),this.expirationTimes=jR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jR(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bL(t,e,n,r,s,i,o,a,c){return t=new Pue(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=La(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nL(i),t}function Oue(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ny,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Zq(t){if(!t)return Ef;t=t._reactInternals;e:{if(lm(t)!==t||t.tag!==1)throw Error(Ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(t.tag===1){var n=t.type;if(vo(n))return ZG(t,n,e)}return e}function Xq(t,e,n,r,s,i,o,a,c){return t=bL(n,r,!0,t,s,i,o,a,c),t.context=Zq(null),n=t.current,r=Di(),s=nf(n),i=Xu(r,s),i.callback=e??null,ef(n,i,s),t.current.lanes=s,X_(t,s,r),Eo(t,r),t}function FN(t,e,n,r){var s=e.current,i=Di(),o=nf(s);return n=Zq(n),e.context===null?e.context=n:e.pendingContext=n,e=Xu(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ef(s,e,o),t!==null&&(Bc(t,s,o,i),RS(t,s,o)),o}function sI(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Q6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vL(t,e){Q6(t,e),(t=t.alternate)&&Q6(t,e)}function kue(){return null}var eV=typeof reportError=="function"?reportError:function(t){console.error(t)};function EL(t){this._internalRoot=t}jN.prototype.render=EL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ce(409));FN(t,e,null,null)};jN.prototype.unmount=EL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Og(function(){FN(null,t,null,null)}),e[dd]=null}};function jN(t){this._internalRoot=t}jN.prototype.unstable_scheduleHydration=function(t){if(t){var e=PG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sh.length&&e!==0&&e<sh[n].priority;n++);sh.splice(n,0,t),n===0&&kG(t)}};function CL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function WN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function J6(){}function Due(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=sI(o);i.call(l)}}var o=Xq(e,r,t,0,null,!1,!1,"",J6);return t._reactRootContainer=o,t[dd]=o.current,aC(t.nodeType===8?t.parentNode:t),Og(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=sI(c);a.call(l)}}var c=bL(t,0,!1,null,null,!1,!1,"",J6);return t._reactRootContainer=c,t[dd]=c.current,aC(t.nodeType===8?t.parentNode:t),Og(function(){FN(e,c,n,r)}),c}function zN(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=sI(o);a.call(c)}}FN(e,o,t,s)}else o=Due(n,e,t,s,r);return sI(o)}TG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uv(e.pendingLanes);n!==0&&(jM(e,n|1),Eo(e,Ur()),!(hn&6)&&(Iw=Ur()+500,Lf()))}break;case 13:Og(function(){var r=hd(t,1);if(r!==null){var s=Di();Bc(r,t,1,s)}}),vL(t,1)}};WM=function(t){if(t.tag===13){var e=hd(t,134217728);if(e!==null){var n=Di();Bc(e,t,134217728,n)}vL(t,134217728)}};RG=function(t){if(t.tag===13){var e=nf(t),n=hd(t,e);if(n!==null){var r=Di();Bc(n,t,e,r)}vL(t,e)}};PG=function(){return On};OG=function(t,e){var n=On;try{return On=t,e()}finally{On=n}};lk=function(t,e,n){switch(e){case"input":if(nk(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=kN(r);if(!s)throw Error(Ce(90));lG(r),nk(r,s)}}}break;case"textarea":dG(t,n);break;case"select":e=n.value,e!=null&&Xy(t,!!n.multiple,e,!1)}};wG=gL;bG=Og;var Mue={usingClientEntryPoint:!1,Events:[t1,ky,kN,mG,yG,gL]},av={findFiberByHostInstance:Ap,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lue={bundleType:av.bundleType,version:av.version,rendererPackageName:av.rendererPackageName,rendererConfig:av.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ed.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CG(t),t===null?null:t.stateNode},findFiberByHostInstance:av.findFiberByHostInstance||kue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _A=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_A.isDisabled&&_A.supportsFiber)try{TN=_A.inject(Lue),Fl=_A}catch{}}ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mue;ia.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CL(e))throw Error(Ce(200));return Oue(t,e,null,n)};ia.createRoot=function(t,e){if(!CL(t))throw Error(Ce(299));var n=!1,r="",s=eV;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bL(t,1,!1,null,null,n,!1,r,s),t[dd]=e.current,aC(t.nodeType===8?t.parentNode:t),new EL(e)};ia.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ce(188)):(t=Object.keys(t).join(","),Error(Ce(268,t)));return t=CG(e),t=t===null?null:t.stateNode,t};ia.flushSync=function(t){return Og(t)};ia.hydrate=function(t,e,n){if(!WN(e))throw Error(Ce(200));return zN(null,t,e,!0,n)};ia.hydrateRoot=function(t,e,n){if(!CL(t))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=eV;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Xq(e,null,t,1,n??null,s,!1,i,o),t[dd]=e.current,aC(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new jN(e)};ia.render=function(t,e,n){if(!WN(e))throw Error(Ce(200));return zN(null,t,e,!1,n)};ia.unmountComponentAtNode=function(t){if(!WN(t))throw Error(Ce(40));return t._reactRootContainer?(Og(function(){zN(null,null,t,!1,function(){t._reactRootContainer=null,t[dd]=null})}),!0):!1};ia.unstable_batchedUpdates=gL;ia.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!WN(n))throw Error(Ce(200));if(t==null||t._reactInternals===void 0)throw Error(Ce(38));return zN(t,e,n,!1,r)};ia.version="18.3.1-next-f1338f8080-20240426";function tV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tV)}catch(t){console.error(t)}}tV(),tG.exports=ia;var _L=tG.exports,Z6=_L;Y2.createRoot=Z6.createRoot,Y2.hydrateRoot=Z6.hydrateRoot;const Uue="_verified_lvyh0_1",AL={verified:Uue},$ue=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:AL.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Bue=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:AL.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Fue=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:AL.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function nV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=nV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function sf(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=nV(t))&&(r&&(r+=" "),r+=e);return r}const jue="_root_98iqw_1",Wue="_article_98iqw_21",X6={root:jue,article:Wue},SL=({className:t,children:e})=>m.jsx("div",{className:sf("react-tweet-theme",X6.root,t),children:m.jsx("article",{className:X6.article,children:e})}),rV=t=>m.jsx("img",{...t}),zue="_header_nqq4j_1",Hue="_avatar_nqq4j_11",Gue="_avatarOverflow_nqq4j_16",que="_avatarSquare_nqq4j_23",Vue="_avatarShadow_nqq4j_26",Kue="_author_nqq4j_37",Yue="_authorLink_nqq4j_44",Que="_authorVerified_nqq4j_53",Jue="_authorLinkText_nqq4j_56",Zue="_authorMeta_nqq4j_63",Xue="_authorFollow_nqq4j_66",ede="_username_nqq4j_69",tde="_follow_nqq4j_74",nde="_separator_nqq4j_82",rde="_brand_nqq4j_86",sde="_twitterIcon_nqq4j_90",Ns={header:zue,avatar:Hue,avatarOverflow:Gue,avatarSquare:que,avatarShadow:Vue,author:Kue,authorLink:Yue,authorVerified:Que,authorLinkText:Jue,authorMeta:Zue,authorFollow:Xue,username:ede,follow:tde,separator:nde,brand:rde,twitterIcon:sde},ide="_verifiedOld_lcna5_1",ode="_verifiedBlue_lcna5_4",ade="_verifiedGovernment_lcna5_7",cP={verifiedOld:ide,verifiedBlue:ode,verifiedGovernment:ade},sV=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx($ue,{}),s=cP.verifiedBlue;if(n)switch(t.is_blue_verified||(s=cP.verifiedOld),t.verified_type){case"Government":r=m.jsx(Fue,{}),s=cP.verifiedGovernment;break;case"Business":r=m.jsx(Bue,{}),s=null;break}return n?m.jsx("div",{className:sf(e,s),children:r}):null},cde=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:rV,{user:s}=t;return m.jsxs("div",{className:Ns.header,children:[m.jsxs("a",{href:t.url,className:Ns.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:sf(Ns.avatarOverflow,s.profile_image_shape==="Square"&&Ns.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:Ns.avatarOverflow,children:m.jsx("div",{className:Ns.avatarShadow})})]}),m.jsxs("div",{className:Ns.author,children:[m.jsxs("a",{href:t.url,className:Ns.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Ns.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(sV,{user:s,className:Ns.authorVerified})]}),m.jsxs("div",{className:Ns.authorMeta,children:[m.jsx("a",{href:t.url,className:Ns.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:Ns.authorFollow,children:[m.jsx("span",{className:Ns.separator,children:"·"}),m.jsx("a",{href:s.follow_url,className:Ns.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:Ns.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Ns.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},lde="_root_1ec15_1",ude={root:lde},dde=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:ude.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),hde="_root_eihfa_1",fde={root:hde},pde=({href:t,children:e})=>m.jsx("a",{href:t,className:fde.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),gde="_root_1xq52_1",mde={root:gde},yde=({tweet:t})=>m.jsx("p",{className:mde.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(pde,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),e8=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,iV=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,wde=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,bde=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,vde=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,Ede=t=>`https://x.com/hashtag/${t.text}`,Cde=t=>`https://x.com/search?q=%24${t.text}`,_de=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,oV=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},Ade=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},Sde=t=>{const e=Ade(t);return e.length>1?e[1]:e[0]},Wk=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function t8(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return cv(n,"hashtag",t.entities.hashtags),cv(n,"mention",t.entities.user_mentions),cv(n,"url",t.entities.urls),cv(n,"symbol",t.entities.symbols),t.entities.media&&cv(n,"media",t.entities.media),xde(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:Ede(r),text:s});case"mention":return Object.assign(r,{href:iV(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:Cde(r),text:s});default:return Object.assign(r,{text:s})}})}function cv(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function xde(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const Ide=t=>({...t,url:e8(t),user:{...t.user,url:iV(t),follow_url:vde(t)},like_url:wde(t),reply_url:bde(t),in_reply_to_url:t.in_reply_to_screen_name?_de(t):void 0,entities:t8(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:e8(t.quoted_tweet),entities:t8(t.quoted_tweet)}:void 0}),Nde="_root_g9tkv_1",Tde="_rounded_g9tkv_6",Rde="_mediaWrapper_g9tkv_10",Pde="_grid2Columns_g9tkv_17",Ode="_grid3_g9tkv_20",kde="_grid2x2_g9tkv_23",Dde="_mediaContainer_g9tkv_26",Mde="_mediaLink_g9tkv_34",Lde="_skeleton_g9tkv_38",Ude="_image_g9tkv_43",Do={root:Nde,rounded:Tde,mediaWrapper:Rde,grid2Columns:Pde,grid3:Ode,grid2x2:kde,mediaContainer:Dde,mediaLink:Mde,skeleton:Lde,image:Ude},$de="_anchor_fp31d_1",Bde="_videoButton_fp31d_17",Fde="_videoButtonIcon_fp31d_35",jde="_watchOnTwitter_fp31d_44",Wde="_viewReplies_fp31d_60",Wm={anchor:$de,videoButton:Bde,videoButtonIcon:Fde,watchOnTwitter:jde,viewReplies:Wde},zde=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=Sde(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:Do.image,poster:oV(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:Wm.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:Wm.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:Wm.watchOnTwitter,children:m.jsx("a",{href:t.url,className:Wm.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:sf(Wm.anchor,Wm.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},Hde=t=>m.jsx("img",{...t}),n8=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},aV=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:Hde;return m.jsx("div",{className:sf(Do.root,!n&&Do.rounded),children:m.jsx("div",{className:sf(Do.mediaWrapper,o>1&&Do.grid2Columns,o===3&&Do.grid3,o>4&&Do.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(D.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:sf(Do.mediaContainer,Do.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Do.skeleton,style:n8(l,o)}),m.jsx(c,{src:oV(l,"small"),alt:l.ext_alt_text||"Image",className:Do.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:Do.mediaContainer,children:[m.jsx("div",{className:Do.skeleton,style:n8(l,o)}),m.jsx(zde,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Gde={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},qde=new Intl.DateTimeFormat("en-US",Gde),Vde=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Kde=t=>{const e=Vde(qde.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},Yde="_root_i24yn_1",Qde={root:Yde},Jde=({tweet:t})=>{const e=new Date(t.created_at),n=Kde(e);return m.jsx("a",{className:Qde.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},Zde="_info_19qcj_1",Xde="_infoLink_19qcj_10",ehe="_infoIcon_19qcj_30",lP={info:Zde,infoLink:Xde,infoIcon:ehe},the=({tweet:t})=>m.jsxs("div",{className:lP.info,children:[m.jsx(Jde,{tweet:t}),m.jsx("a",{className:lP.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:lP.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),nhe="_actions_n2anf_1",rhe="_like_n2anf_13",she="_reply_n2anf_14",ihe="_copy_n2anf_15",ohe="_likeIconWrapper_n2anf_27",ahe="_likeCount_n2anf_30",che="_replyIconWrapper_n2anf_35",lhe="_copyIconWrapper_n2anf_36",uhe="_likeIcon_n2anf_27",dhe="_replyIcon_n2anf_35",hhe="_copyIcon_n2anf_36",fhe="_replyText_n2anf_56",phe="_copyText_n2anf_57",ao={actions:nhe,like:rhe,reply:she,copy:ihe,likeIconWrapper:ohe,likeCount:ahe,replyIconWrapper:che,copyIconWrapper:lhe,likeIcon:uhe,replyIcon:dhe,copyIcon:hhe,replyText:fhe,copyText:phe},ghe=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:ao.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:ao.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:ao.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:ao.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:ao.copyText,children:e?"Copied!":"Copy link"})]})},mhe=({tweet:t})=>{const e=Wk(t.favorite_count);return m.jsxs("div",{className:ao.actions,children:[m.jsxs("a",{className:ao.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:ao.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:ao.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:ao.likeCount,children:e})]}),m.jsxs("a",{className:ao.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:ao.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:ao.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:ao.replyText,children:"Reply"})]}),m.jsx(ghe,{tweet:t})]})},yhe="_replies_1cutb_1",whe="_link_1cutb_4",bhe="_text_1cutb_23",uP={replies:yhe,link:whe,text:bhe},vhe=({tweet:t})=>m.jsx("div",{className:uP.replies,children:m.jsx("a",{className:uP.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:uP.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${Wk(t.conversation_count)} reply`:`Read ${Wk(t.conversation_count)} replies`})})}),Ehe="_root_q5799_1",Che="_article_q5799_16",r8={root:Ehe,article:Che},_he=({tweet:t,children:e})=>m.jsx("div",{className:r8.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:r8.article,children:e})}),Ahe="_header_r31i5_1",She="_avatar_r31i5_11",xhe="_avatarSquare_r31i5_17",Ihe="_author_r31i5_21",Nhe="_authorText_r31i5_26",The="_username_r31i5_33",Vf={header:Ahe,avatar:She,avatarSquare:xhe,author:Ihe,authorText:Nhe,username:The},Rhe=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Vf.header,children:[m.jsx("a",{href:t.url,className:Vf.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:sf(Vf.avatarOverflow,e.profile_image_shape==="Square"&&Vf.avatarSquare),children:m.jsx(rV,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Vf.author,children:[m.jsx("div",{className:Vf.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(sV,{user:e}),m.jsx("div",{className:Vf.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},Phe="_root_175ot_1",Ohe={root:Phe},khe=({tweet:t})=>m.jsx("p",{className:Ohe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Dhe=({tweet:t})=>{var e;return m.jsxs(_he,{tweet:t,children:[m.jsx(Rhe,{tweet:t}),m.jsx(khe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(aV,{quoted:!0,tweet:t}):null]})},Mhe=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>Ide(t),[t]);return m.jsxs(SL,{children:[m.jsx(cde,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(dde,{tweet:r}),m.jsx(yde,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(aV,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(Dhe,{tweet:r.quoted_tweet}),m.jsx(the,{tweet:r}),m.jsx(mhe,{tweet:r}),m.jsx(vhe,{tweet:r})]})},Lhe="_root_16yxa_1",Uhe={root:Lhe},$he=t=>m.jsx(SL,{children:m.jsxs("div",{className:Uhe.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found…"})]})}),Bhe="_skeleton_oi7hr_1",Fhe={skeleton:Bhe},AA=({style:t})=>m.jsx("span",{className:Fhe.skeleton,style:t}),jhe="_root_17qqv_1",Whe={root:jhe},zhe=()=>m.jsxs(SL,{className:Whe.root,children:[m.jsx(AA,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(AA,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(AA,{style:{height:"2rem"}}),m.jsx(AA,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var cV={exports:{}},lV={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw=D;function Hhe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ghe=typeof Object.is=="function"?Object.is:Hhe,qhe=Nw.useState,Vhe=Nw.useEffect,Khe=Nw.useLayoutEffect,Yhe=Nw.useDebugValue;function Qhe(t,e){var n=e(),r=qhe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Khe(function(){s.value=n,s.getSnapshot=e,dP(s)&&i({inst:s})},[t,n,e]),Vhe(function(){return dP(s)&&i({inst:s}),t(function(){dP(s)&&i({inst:s})})},[t]),Yhe(n),n}function dP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ghe(t,n)}catch{return!0}}function Jhe(t,e){return e()}var Zhe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Jhe:Qhe;lV.useSyncExternalStore=Nw.useSyncExternalStore!==void 0?Nw.useSyncExternalStore:Zhe;cV.exports=lV;var uV=cV.exports;const dV=0,hV=1,fV=2,s8=3;var i8=Object.prototype.hasOwnProperty;function zk(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&zk(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(i8.call(t,n)&&++r&&!i8.call(e,n)||!(n in e)||!zk(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const zu=new WeakMap,Bh=()=>{},Si=Bh(),Hk=Object,dn=t=>t===Si,kl=t=>typeof t=="function",Cf=(t,e)=>({...t,...e}),pV=t=>kl(t.then),hP={},SA={},xL="undefined",r1=typeof window!=xL,Gk=typeof document!=xL,Xhe=r1&&"Deno"in window,efe=()=>r1&&typeof window.requestAnimationFrame!=xL,gV=(t,e)=>{const n=zu.get(t);return[()=>!dn(e)&&t.get(e)||hP,r=>{if(!dn(e)){const s=t.get(e);e in SA||(SA[e]=s),n[5](e,Cf(s,r),s||hP)}},n[6],()=>!dn(e)&&e in SA?SA[e]:!dn(e)&&t.get(e)||hP]};let qk=!0;const tfe=()=>qk,[Vk,Kk]=r1&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Bh,Bh],nfe=()=>{const t=Gk&&document.visibilityState;return dn(t)||t!=="hidden"},rfe=t=>(Gk&&document.addEventListener("visibilitychange",t),Vk("focus",t),()=>{Gk&&document.removeEventListener("visibilitychange",t),Kk("focus",t)}),sfe=t=>{const e=()=>{qk=!0,t()},n=()=>{qk=!1};return Vk("online",e),Vk("offline",n),()=>{Kk("online",e),Kk("offline",n)}},ife={isOnline:tfe,isVisible:nfe},ofe={initFocus:rfe,initReconnect:sfe},o8=!Zo.useId,mC=!r1||Xhe,afe=t=>efe()?window.requestAnimationFrame(t):setTimeout(t,1),fP=mC?D.useEffect:D.useLayoutEffect,pP=typeof navigator<"u"&&navigator.connection,a8=!mC&&pP&&(["slow-2g","2g"].includes(pP.effectiveType)||pP.saveData),xA=new WeakMap,cfe=t=>Hk.prototype.toString.call(t),gP=(t,e)=>t===`[object ${e}]`;let lfe=0;const Yk=t=>{const e=typeof t,n=cfe(t),r=gP(n,"Date"),s=gP(n,"RegExp"),i=gP(n,"Object");let o,a;if(Hk(t)===t&&!r&&!s){if(o=xA.get(t),o)return o;if(o=++lfe+"~",xA.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=Yk(t[a])+",";xA.set(t,o)}if(i){o="#";const c=Hk.keys(t).sort();for(;!dn(a=c.pop());)dn(t[a])||(o+=a+":"+Yk(t[a])+",");xA.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},IL=t=>{if(kl(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Yk(t):"",[t,e]};let ufe=0;const Qk=()=>++ufe;async function mV(...t){const[e,n,r,s]=t,i=Cf({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(kl(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=IL(h);if(!f)return;const[p,g]=gV(e,f),[w,y,b,v]=zu.get(e),A=()=>{const B=w[f];return(kl(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],B&&B[0])?B[0](fV).then(()=>p().data):p().data};if(t.length<3)return A();let _=r,I,x=!1;const N=Qk();y[f]=[N,0];const S=!dn(c),O=p(),P=O.data,F=O._c,q=dn(F)?P:F;if(S&&(c=kl(c)?c(q,P):c,g({data:c,_c:q})),kl(_))try{_=_(q)}catch(B){I=B,x=!0}if(_&&pV(_))if(_=await _.catch(B=>{I=B,x=!0}),N!==y[f][0]){if(x)throw I;return _}else x&&S&&l(I)&&(o=!0,g({data:q,_c:Si}));if(o&&!x)if(kl(o)){const B=o(_,q);g({data:B,error:Si,_c:Si})}else g({data:_,error:Si,_c:Si});if(y[f][1]=Qk(),Promise.resolve(A()).then(()=>{g({_c:Si})}),x){if(u)throw I;return}return _}}const c8=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},dfe=(t,e)=>{if(!zu.has(t)){const n=Cf(ofe,e),r=Object.create(null),s=mV.bind(Si,t);let i=Bh;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!zu.has(t)&&(zu.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!mC)){const u=n.initFocus(setTimeout.bind(Si,c8.bind(Si,r,dV))),d=n.initReconnect(setTimeout.bind(Si,c8.bind(Si,r,hV)));i=()=>{u&&u(),d&&d(),zu.delete(t)}}};return l(),[t,s,l,i]}return[t,zu.get(t)[4]]},hfe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!dn(i)&&o>i||setTimeout(r,a,s)},ffe=zk,[yV,pfe]=dfe(new Map),gfe=Cf({onLoadingSlow:Bh,onSuccess:Bh,onError:Bh,onErrorRetry:hfe,onDiscarded:Bh,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:a8?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:a8?5e3:3e3,compare:ffe,isPaused:()=>!1,cache:yV,mutate:pfe,fallback:{}},ife),mfe=(t,e)=>{const n=Cf(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Cf(s,o))}return n},yfe=D.createContext({}),wfe="$inf$",wV=r1&&window.__SWR_DEVTOOLS_USE__,bfe=wV?window.__SWR_DEVTOOLS_USE__:[],vfe=()=>{wV&&(window.__SWR_DEVTOOLS_REACT__=Zo)},Efe=t=>kl(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Cfe=()=>Cf(gfe,D.useContext(yfe)),_fe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=IL(e),[,,,a]=zu.get(yV);if(o.startsWith(wfe))return n(...i);const c=a[o];return dn(c)?n(...i):(delete a[o],c)}),r),Afe=bfe.concat(_fe),Sfe=t=>function(...n){const r=Cfe(),[s,i,o]=Efe(n),a=mfe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(Afe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},xfe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};vfe();const mP=Zo.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),yP={dedupe:!0},Ife=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=zu.get(r),[y,b]=IL(t),v=D.useRef(!1),A=D.useRef(!1),_=D.useRef(y),I=D.useRef(e),x=D.useRef(n),N=()=>x.current,S=()=>N().isVisible()&&N().isOnline(),[O,P,F,q]=gV(r,y),B=D.useRef({}).current,T=dn(o)?dn(n.fallback)?Si:n.fallback[y]:o,R=(X,ce)=>{for(const Ee in B){const ge=Ee;if(ge==="data"){if(!s(X[ge],ce[ge])&&(!dn(X[ge])||!s(ae,ce[ge])))return!1}else if(ce[ge]!==X[ge])return!1}return!0},$=D.useMemo(()=>{const X=!y||!e?!1:dn(a)?N().isPaused()||i?!1:c!==!1:a,ce=yt=>{const St=Cf(yt);return delete St._k,X?{isValidating:!0,isLoading:!0,...St}:St},Ee=O(),ge=q(),ve=ce(Ee),Xe=Ee===ge?ve:ce(ge);let ot=ve;return[()=>{const yt=ce(O());return R(yt,ot)?(ot.data=yt.data,ot.isLoading=yt.isLoading,ot.isValidating=yt.isValidating,ot.error=yt.error,ot):(ot=yt,yt)},()=>Xe]},[r,y]),k=uV.useSyncExternalStore(D.useCallback(X=>F(y,(ce,Ee)=>{R(Ee,ce)||X()}),[r,y]),$[0],$[1]),M=!v.current,z=f[y]&&f[y].length>0,K=k.data,ne=dn(K)?T&&pV(T)?mP(T):T:K,le=k.error,oe=D.useRef(ne),ae=h?dn(K)?dn(oe.current)?ne:oe.current:K:ne,ue=z&&!dn(le)?!1:M&&!dn(a)?a:N().isPaused()?!1:i?dn(ne)?!1:c:dn(ne)||c,Ze=!!(y&&e&&M&&ue),Ie=dn(k.isValidating)?Ze:k.isValidating,De=dn(k.isLoading)?Ze:k.isLoading,st=D.useCallback(async X=>{const ce=I.current;if(!y||!ce||A.current||N().isPaused())return!1;let Ee,ge,ve=!0;const Xe=X||{},ot=!g[y]||!Xe.dedupe,yt=()=>o8?!A.current&&y===_.current&&v.current:y===_.current,St={isValidating:!1,isLoading:!1},qn=()=>{P(St)},kt=()=>{const Dt=g[y];Dt&&Dt[1]===ge&&delete g[y]},Wr={isValidating:!0};dn(O().data)&&(Wr.isLoading=!0);try{if(ot&&(P(Wr),n.loadingTimeout&&dn(O().data)&&setTimeout(()=>{ve&&yt()&&N().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[ce(b),Qk()]),[Ee,ge]=g[y],Ee=await Ee,ot&&setTimeout(kt,n.dedupingInterval),!g[y]||g[y][1]!==ge)return ot&&yt()&&N().onDiscarded(y),!1;St.error=Si;const Dt=p[y];if(!dn(Dt)&&(ge<=Dt[0]||ge<=Dt[1]||Dt[1]===0))return qn(),ot&&yt()&&N().onDiscarded(y),!1;const Vn=O().data;St.data=s(Vn,Ee)?Vn:Ee,ot&&yt()&&N().onSuccess(Ee,y,n)}catch(Dt){kt();const Vn=N(),{shouldRetryOnError:Mr}=Vn;Vn.isPaused()||(St.error=Dt,ot&&yt()&&(Vn.onError(Dt,y,Vn),(Mr===!0||kl(Mr)&&Mr(Dt))&&(!N().revalidateOnFocus||!N().revalidateOnReconnect||S())&&Vn.onErrorRetry(Dt,y,Vn,Wi=>{const tc=f[y];tc&&tc[0]&&tc[0](s8,Wi)},{retryCount:(Xe.retryCount||0)+1,dedupe:!0})))}return ve=!1,qn(),!0},[y,r]),Ot=D.useCallback((...X)=>mV(r,_.current,...X),[]);if(fP(()=>{I.current=e,x.current=n,dn(K)||(oe.current=K)}),fP(()=>{if(!y)return;const X=st.bind(Si,yP);let ce=0;N().revalidateOnFocus&&(ce=Date.now()+N().focusThrottleInterval);const ge=xfe(y,f,(ve,Xe={})=>{if(ve==dV){const ot=Date.now();N().revalidateOnFocus&&ot>ce&&S()&&(ce=ot+N().focusThrottleInterval,X())}else if(ve==hV)N().revalidateOnReconnect&&S()&&X();else{if(ve==fV)return st();if(ve==s8)return st(Xe)}});return A.current=!1,_.current=y,v.current=!0,P({_k:b}),ue&&(g[y]||(dn(ne)||mC?X():afe(X))),()=>{A.current=!0,ge()}},[y]),fP(()=>{let X;function ce(){const ge=kl(l)?l(O().data):l;ge&&X!==-1&&(X=setTimeout(Ee,ge))}function Ee(){!O().error&&(u||N().isVisible())&&(d||N().isOnline())?st(yP).then(ce):ce()}return ce(),()=>{X&&(clearTimeout(X),X=-1)}},[l,u,d,y]),D.useDebugValue(ae),i&&dn(ne)&&y){if(!o8&&mC)throw new Error("Fallback data is required when using Suspense in SSR.");I.current=e,x.current=n,A.current=!1;const X=w[y];if(!dn(X)){const ce=Ot(X);mP(ce)}if(dn(le)){const ce=st(yP);dn(ae)||(ce.status="fulfilled",ce.value=!0),mP(ce)}else throw le}return{mutate:Ot,get data(){return B.data=!0,ae},get error(){return B.error=!0,le},get isValidating(){return B.isValidating=!0,Ie},get isLoading(){return B.isLoading=!0,De}}},l8=Sfe(Ife);class Nfe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const Tfe=l8.default||l8,Rfe="https://react-tweet.vercel.app";async function Pfe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new Nfe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const Ofe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=Tfe(()=>e||t?[e||t&&`${Rfe}/api/tweet/${t}`,n]:null,Pfe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},kfe=({id:t,apiUrl:e,fallback:n=m.jsx(zhe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=Ofe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||$he;return m.jsx(l,{error:i?i(a):a})}return m.jsx(Mhe,{tweet:o,components:r})};var HN={exports:{}},bV={},vV={exports:{}},Dfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Mfe=Dfe,Lfe=Mfe;function EV(){}function CV(){}CV.resetWarningCache=EV;var Ufe=function(){function t(r,s,i,o,a,c){if(c!==Lfe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:CV,resetWarningCache:EV};return n.PropTypes=n,n};vV.exports=Ufe();var _V=vV.exports,Jk={exports:{}};function AV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=AV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function u8(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=AV(t))&&(r&&(r+=" "),r+=e);return r}Jk.exports=u8,Jk.exports.clsx=u8;var $fe=Jk.exports,Dr={},ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.dontSetMe=zfe;ru.findInArray=Bfe;ru.int=Wfe;ru.isFunction=Ffe;ru.isNum=jfe;function Bfe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Ffe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function jfe(t){return typeof t=="number"&&!isNaN(t)}function Wfe(t){return parseInt(t,10)}function zfe(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var um={};Object.defineProperty(um,"__esModule",{value:!0});um.browserPrefixToKey=xV;um.browserPrefixToStyle=Hfe;um.default=void 0;um.getPrefix=SV;const wP=["Moz","Webkit","O","ms"];function SV(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<wP.length;s++)if(xV(t,wP[s])in e)return wP[s];return""}function xV(t,e){return e?`${e}${Gfe(t)}`:t}function Hfe(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Gfe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}um.default=SV();Object.defineProperty(Dr,"__esModule",{value:!0});Dr.addClassName=TV;Dr.addEvent=Vfe;Dr.addUserSelectStyles=spe;Dr.createCSSTransform=epe;Dr.createSVGTransform=tpe;Dr.getTouch=npe;Dr.getTouchIdentifier=rpe;Dr.getTranslation=NL;Dr.innerHeight=Jfe;Dr.innerWidth=Zfe;Dr.matchesSelector=NV;Dr.matchesSelectorAndParentsTo=qfe;Dr.offsetXYFromParent=Xfe;Dr.outerHeight=Yfe;Dr.outerWidth=Qfe;Dr.removeClassName=RV;Dr.removeEvent=Kfe;Dr.scheduleRemoveUserSelectStyles=ipe;var ea=ru,d8=IV(um);function IV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(IV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let IA="";function NV(t,e){return IA||(IA=(0,ea.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,ea.isFunction)(t[n])})),(0,ea.isFunction)(t[IA])?t[IA](e):!1}function qfe(t,e,n){let r=t;do{if(NV(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Vfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Kfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Yfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ea.int)(n.borderTopWidth),e+=(0,ea.int)(n.borderBottomWidth),e}function Qfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ea.int)(n.borderLeftWidth),e+=(0,ea.int)(n.borderRightWidth),e}function Jfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ea.int)(n.paddingTop),e-=(0,ea.int)(n.paddingBottom),e}function Zfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ea.int)(n.paddingLeft),e-=(0,ea.int)(n.paddingRight),e}function Xfe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function epe(t,e){const n=NL(t,e,"px");return{[(0,d8.browserPrefixToKey)("transform",d8.default)]:n}}function tpe(t,e){return NL(t,e,"")}function NL(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function npe(t,e){return t.targetTouches&&(0,ea.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,ea.findInArray)(t.changedTouches,n=>e===n.identifier)}function rpe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function spe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&TV(t.body,"react-draggable-transparent-selection")}function ipe(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{h8(t)}):h8(t)}function h8(t){if(t)try{if(t.body&&RV(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function TV(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function RV(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var su={};Object.defineProperty(su,"__esModule",{value:!0});su.canDragX=cpe;su.canDragY=lpe;su.createCoreData=dpe;su.createDraggableData=hpe;su.getBoundPosition=ope;su.getControlPosition=upe;su.snapToGrid=ape;var Mo=ru,Fy=Dr;function ope(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:fpe(r);const s=TL(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,Mo.int)(u.paddingLeft)+(0,Mo.int)(l.marginLeft),top:-s.offsetTop+(0,Mo.int)(u.paddingTop)+(0,Mo.int)(l.marginTop),right:(0,Fy.innerWidth)(c)-(0,Fy.outerWidth)(s)-s.offsetLeft+(0,Mo.int)(u.paddingRight)-(0,Mo.int)(l.marginRight),bottom:(0,Fy.innerHeight)(c)-(0,Fy.outerHeight)(s)-s.offsetTop+(0,Mo.int)(u.paddingBottom)-(0,Mo.int)(l.marginBottom)}}return(0,Mo.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Mo.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Mo.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Mo.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function ape(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function cpe(t){return t.props.axis==="both"||t.props.axis==="x"}function lpe(t){return t.props.axis==="both"||t.props.axis==="y"}function upe(t,e,n){const r=typeof e=="number"?(0,Fy.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=TL(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Fy.offsetXYFromParent)(r||t,i,n.props.scale)}function dpe(t,e,n){const r=!(0,Mo.isNum)(t.lastX),s=TL(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function hpe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function fpe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function TL(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var GN={},qN={};Object.defineProperty(qN,"__esModule",{value:!0});qN.default=ppe;function ppe(){}Object.defineProperty(GN,"__esModule",{value:!0});GN.default=void 0;var bP=PV(D),mi=RL(_V),gpe=RL(_L),ti=Dr,Td=su,vP=ru,lv=RL(qN);function RL(t){return t&&t.__esModule?t:{default:t}}function PV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(PV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function wi(t,e,n){return(e=mpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mpe(t){var e=ype(t,"string");return typeof e=="symbol"?e:e+""}function ype(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const dc={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Rd=dc.mouse,VN=class extends bP.Component{constructor(){super(...arguments),wi(this,"dragging",!1),wi(this,"lastX",NaN),wi(this,"lastY",NaN),wi(this,"touchIdentifier",null),wi(this,"mounted",!1),wi(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,ti.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,ti.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,ti.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,Td.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,Td.createCoreData)(this,o,a);(0,lv.default)("DraggableCore: handleDragStart: %j",c),(0,lv.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,ti.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,ti.addEvent)(r,Rd.move,this.handleDrag),(0,ti.addEvent)(r,Rd.stop,this.handleDragStop))}),wi(this,"handleDrag",e=>{const n=(0,Td.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,Td.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,Td.createCoreData)(this,r,s);if((0,lv.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),wi(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Td.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,Td.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,Td.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,ti.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,lv.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,lv.default)("DraggableCore: Removing handlers"),(0,ti.removeEvent)(a.ownerDocument,Rd.move,this.handleDrag),(0,ti.removeEvent)(a.ownerDocument,Rd.stop,this.handleDragStop))}),wi(this,"onMouseDown",e=>(Rd=dc.mouse,this.handleDragStart(e))),wi(this,"onMouseUp",e=>(Rd=dc.mouse,this.handleDragStop(e))),wi(this,"onTouchStart",e=>(Rd=dc.touch,this.handleDragStart(e))),wi(this,"onTouchEnd",e=>(Rd=dc.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,ti.addEvent)(e,dc.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,ti.removeEvent)(n,dc.mouse.move,this.handleDrag),(0,ti.removeEvent)(n,dc.touch.move,this.handleDrag),(0,ti.removeEvent)(n,dc.mouse.stop,this.handleDragStop),(0,ti.removeEvent)(n,dc.touch.stop,this.handleDragStop),(0,ti.removeEvent)(e,dc.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,ti.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:gpe.default.findDOMNode(this)}render(){return bP.cloneElement(bP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};GN.default=VN;wi(VN,"displayName","DraggableCore");wi(VN,"propTypes",{allowAnyClick:mi.default.bool,allowMobileScroll:mi.default.bool,children:mi.default.node.isRequired,disabled:mi.default.bool,enableUserSelectHack:mi.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:mi.default.arrayOf(mi.default.number),handle:mi.default.string,cancel:mi.default.string,nodeRef:mi.default.object,onStart:mi.default.func,onDrag:mi.default.func,onStop:mi.default.func,onMouseDown:mi.default.func,scale:mi.default.number,className:vP.dontSetMe,style:vP.dontSetMe,transform:vP.dontSetMe});wi(VN,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(D),n=u(_V),r=u(_L),s=$fe,i=Dr,o=su,a=ru,c=u(GN),l=u(qN);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,b){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(_,I){if(!I&&_&&_.__esModule)return _;var x,N,S={__proto__:null,default:_};if(_===null||typeof _!="object"&&typeof _!="function")return S;if(x=I?A:v){if(x.has(_))return x.get(_);x.set(_,S)}for(const O in _)O!=="default"&&{}.hasOwnProperty.call(_,O)&&((N=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(_,O))&&(N.get||N.set)?x(S,O,N):S[O]=_[O]);return S})(y,b)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var A in v)({}).hasOwnProperty.call(v,A)&&(y[A]=v[A])}return y},h.apply(null,arguments)}function f(y,b,v){return(b=p(b))in y?Object.defineProperty(y,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[b]=v,y}function p(y){var b=g(y,"string");return typeof b=="symbol"?b:b+""}function g(y,b){if(typeof y!="object"||!y)return y;var v=y[Symbol.toPrimitive];if(v!==void 0){var A=v.call(y,b);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}class w extends e.Component{static getDerivedStateFromProps(b,v){let{position:A}=b,{prevPropsPosition:_}=v;return A&&(!_||A.x!==_.x||A.y!==_.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:_}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(b){super(b),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const _=(0,o.createDraggableData)(this,A),I={x:_.x,y:_.y,slackX:0,slackY:0};if(this.props.bounds){const{x:N,y:S}=I;I.x+=this.state.slackX,I.y+=this.state.slackY;const[O,P]=(0,o.getBoundPosition)(this,I.x,I.y);I.x=O,I.y=P,I.slackX=this.state.slackX+(N-I.x),I.slackY=this.state.slackY+(S-I.y),_.x=I.x,_.y=I.y,_.deltaX=I.x-this.state.x,_.deltaY=I.y-this.state.y}if(this.props.onDrag(v,_)===!1)return!1;this.setState(I)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const I={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:N,y:S}=this.props.position;I.x=N,I.y=S}this.setState(I)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,v;return((v=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:v,children:A,defaultPosition:_,defaultClassName:I,defaultClassNameDragging:x,defaultClassNameDragged:N,position:S,positionOffset:O,scale:P,...F}=this.props;let q={},B=null;const R=!!!S||this.state.dragging,$=S||_,k={x:(0,o.canDragX)(this)&&R?this.state.x:$.x,y:(0,o.canDragY)(this)&&R?this.state.y:$.y};this.state.isElementSVG?B=(0,i.createSVGTransform)(k,O):q=(0,i.createCSSTransform)(k,O);const M=(0,s.clsx)(A.props.className||"",I,{[x]:this.state.dragging,[N]:this.state.dragged});return e.createElement(c.default,h({},F,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:M,style:{...A.props.style,...q},transform:B}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(bV);const{default:OV,DraggableCore:wpe}=bV;HN.exports=OV;HN.exports.default=OV;HN.exports.DraggableCore=wpe;var bpe=HN.exports;const s1=im(bpe);function Er(){return Er=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Er.apply(null,arguments)}function kV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var DV={exports:{}},Dn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ss=typeof Symbol=="function"&&Symbol.for,PL=Ss?Symbol.for("react.element"):60103,OL=Ss?Symbol.for("react.portal"):60106,KN=Ss?Symbol.for("react.fragment"):60107,YN=Ss?Symbol.for("react.strict_mode"):60108,QN=Ss?Symbol.for("react.profiler"):60114,JN=Ss?Symbol.for("react.provider"):60109,ZN=Ss?Symbol.for("react.context"):60110,kL=Ss?Symbol.for("react.async_mode"):60111,XN=Ss?Symbol.for("react.concurrent_mode"):60111,eT=Ss?Symbol.for("react.forward_ref"):60112,tT=Ss?Symbol.for("react.suspense"):60113,vpe=Ss?Symbol.for("react.suspense_list"):60120,nT=Ss?Symbol.for("react.memo"):60115,rT=Ss?Symbol.for("react.lazy"):60116,Epe=Ss?Symbol.for("react.block"):60121,Cpe=Ss?Symbol.for("react.fundamental"):60117,_pe=Ss?Symbol.for("react.responder"):60118,Ape=Ss?Symbol.for("react.scope"):60119;function aa(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case PL:switch(t=t.type,t){case kL:case XN:case KN:case QN:case YN:case tT:return t;default:switch(t=t&&t.$$typeof,t){case ZN:case eT:case rT:case nT:case JN:return t;default:return e}}case OL:return e}}}function MV(t){return aa(t)===XN}Dn.AsyncMode=kL;Dn.ConcurrentMode=XN;Dn.ContextConsumer=ZN;Dn.ContextProvider=JN;Dn.Element=PL;Dn.ForwardRef=eT;Dn.Fragment=KN;Dn.Lazy=rT;Dn.Memo=nT;Dn.Portal=OL;Dn.Profiler=QN;Dn.StrictMode=YN;Dn.Suspense=tT;Dn.isAsyncMode=function(t){return MV(t)||aa(t)===kL};Dn.isConcurrentMode=MV;Dn.isContextConsumer=function(t){return aa(t)===ZN};Dn.isContextProvider=function(t){return aa(t)===JN};Dn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===PL};Dn.isForwardRef=function(t){return aa(t)===eT};Dn.isFragment=function(t){return aa(t)===KN};Dn.isLazy=function(t){return aa(t)===rT};Dn.isMemo=function(t){return aa(t)===nT};Dn.isPortal=function(t){return aa(t)===OL};Dn.isProfiler=function(t){return aa(t)===QN};Dn.isStrictMode=function(t){return aa(t)===YN};Dn.isSuspense=function(t){return aa(t)===tT};Dn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===KN||t===XN||t===QN||t===YN||t===tT||t===vpe||typeof t=="object"&&t!==null&&(t.$$typeof===rT||t.$$typeof===nT||t.$$typeof===JN||t.$$typeof===ZN||t.$$typeof===eT||t.$$typeof===Cpe||t.$$typeof===_pe||t.$$typeof===Ape||t.$$typeof===Epe)};Dn.typeOf=aa;DV.exports=Dn;var Spe=DV.exports,DL=Spe,xpe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Ipe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Npe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},LV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ML={};ML[DL.ForwardRef]=Npe;ML[DL.Memo]=LV;function f8(t){return DL.isMemo(t)?LV:ML[t.$$typeof]||xpe}var Tpe=Object.defineProperty,Rpe=Object.getOwnPropertyNames,p8=Object.getOwnPropertySymbols,Ppe=Object.getOwnPropertyDescriptor,Ope=Object.getPrototypeOf,g8=Object.prototype;function UV(t,e,n){if(typeof e!="string"){if(g8){var r=Ope(e);r&&r!==g8&&UV(t,r,n)}var s=Rpe(e);p8&&(s=s.concat(p8(e)));for(var i=f8(t),o=f8(e),a=0;a<s.length;++a){var c=s[a];if(!Ipe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=Ppe(e,c);try{Tpe(t,c,l)}catch{}}}}return t}var kpe=UV;const Dpe=im(kpe);var $V={};Object.defineProperty($V,"__esModule",{value:!0});$V.default=Mpe;function Mpe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function NA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iI(){return iI=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iI.apply(this,arguments)}function Lpe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Pd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Upe(t){var e=function(n){Lpe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,NA(Pd(Pd(i)),"cachedTheme",void 0),NA(Pd(Pd(i)),"lastOuterTheme",void 0),NA(Pd(Pd(i)),"lastTheme",void 0),NA(Pd(Pd(i)),"renderProvider",function(l){var u=i.props.children;return Zo.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?iI({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Zo.createElement(t.Consumer,null,this.renderProvider):null},r}(Zo.Component);return e}function $pe(t){return function(n){var r=Zo.forwardRef(function(s,i){return Zo.createElement(t.Consumer,null,function(o){return Zo.createElement(n,iI({theme:o,ref:i},s))})});return Dpe(r,n),r}}function Bpe(t){var e=function(){var r=Zo.useContext(t);return r};return e}function Fpe(t){return{context:t,withTheme:$pe(t),useTheme:Bpe(t),ThemeProvider:Upe(t)}}var BV=D.createContext();Fpe(BV);var m8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mb=(typeof window>"u"?"undefined":m8(window))==="object"&&(typeof document>"u"?"undefined":m8(document))==="object"&&document.nodeType===9;function yC(t){"@babel/helpers - typeof";return yC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yC(t)}function jpe(t,e){if(yC(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Wpe(t){var e=jpe(t,"string");return yC(e)=="symbol"?e:e+""}function zpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wpe(r.key),r)}}function LL(t,e,n){return e&&zpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zk(t,e){return Zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Zk(t,e)}function FV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Zk(t,e)}function y8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Hpe={}.constructor;function Xk(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(Xk);if(t.constructor!==Hpe)return t;var e={};for(var n in t)e[n]=Xk(t[n]);return e}function sT(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=Xk(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var w8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},mg=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=w8(e[r]," ");else n=w8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function yb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function uv(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function wC(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=yb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=uv(f+":"+u+mg(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=uv(g+":"+u+mg(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=uv(y+":"+u+mg(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),uv(""+t+u+"{"+r,o)+uv("}",o))}var Gpe=/([[\].#*$><+~=|^:(),"'`\s])/g,b8=typeof CSS<"u"&&CSS.escape,UL=function(t){return b8?b8(t):t.replace(Gpe,"\\$1")},jV=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),eD=function(t){FV(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(y8(y8(o)),l),o.selectorText="."+UL(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=mg(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Er({},s,{allowEmpty:!0}):s;return wC(this.selectorText,this.style,a)},LL(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(jV),qpe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new eD(e,n,r)}},EP={indent:1,children:!0},Vpe=/@([\w-]+)/,Kpe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Vpe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new iT(Er({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=EP);var s=yb(r),i=s.linebreak;if(r.indent==null&&(r.indent=EP.indent),r.children==null&&(r.children=EP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Ype=/@container|@media|@supports\s+/,Qpe={onCreateRule:function(e,n,r){return Ype.test(e)?new Kpe(e,n,r):null}},CP={indent:1,children:!0},Jpe=/@keyframes\s+([\w-]+)/,tD=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Jpe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:UL(c(this,a)),this.rules=new iT(Er({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Er({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=CP);var s=yb(r),i=s.linebreak;if(r.indent==null&&(r.indent=CP.indent),r.children==null&&(r.children=CP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Zpe=/@keyframes\s+/,Xpe=/\$([\w-]+)/g,nD=function(e,n){return typeof e=="string"?e.replace(Xpe,function(r,s){return s in n?n[s]:r}):e},v8=function(e,n,r){var s=e[n],i=nD(s,r);i!==s&&(e[n]=i)},ege={onCreateRule:function(e,n,r){return typeof e=="string"&&Zpe.test(e)?new tD(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&v8(e,"animation-name",r.keyframes),"animation"in e&&v8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return nD(e,s.keyframes);case"animation-name":return nD(e,s.keyframes);default:return e}}},tge=function(t){FV(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Er({},s,{allowEmpty:!0}):s;return wC(this.key,this.style,a)},e}(jV),nge={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new tge(e,n,r):null}},rge=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=yb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=wC(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return wC(this.at,this.style,r)},t}(),sge=/@font-face/,ige={onCreateRule:function(e,n,r){return sge.test(e)?new rge(e,n,r):null}},oge=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return wC(this.key,this.style,r)},t}(),age={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new oge(e,n,r):null}},cge=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),lge={"@charset":!0,"@import":!0,"@namespace":!0},uge={onCreateRule:function(e,n,r){return e in lge?new cge(e,n,r):null}},E8=[qpe,Qpe,ege,nge,ige,age,uge],dge={process:!0},C8={force:!0,process:!0},iT=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Er({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+UL(this.classes[p]));var g=sT(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Er({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof eD?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof tD&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof eD?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof tD&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=dge);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,C8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,C8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=yb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),WV=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Er({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new iT(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),hge=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),fge=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=kV(s,["attached"]),a=yb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},LL(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),EE=new fge,rD=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),sD="2f1acc6c3a606b082e5eef5e54414ffb";rD[sD]==null&&(rD[sD]=0);var _8=rD[sD]++,A8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+_8+a+n:c+i.key+"-"+_8+(a?"-"+a:"")+"-"+n};return r},zV=function(e){var n;return function(){return n||(n=e()),n}},pge=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},gge=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=mg(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},mge=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},yge=function(e,n){return e.selectorText=n,e.selectorText===n},HV=zV(function(){return document.querySelector("head")});function wge(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function bge(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function vge(t){for(var e=HV(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function Ege(t){var e=EE.registry;if(e.length>0){var n=wge(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=bge(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=vge(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function Cge(t,e){var n=e.insertionPoint,r=Ege(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}HV().appendChild(t)}var _ge=zV(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),S8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},x8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},Age=function(){var e=document.createElement("style");return e.textContent=`
`,e},Sge=function(){function t(n){this.getPropertyValue=pge,this.setProperty=gge,this.removeProperty=mge,this.setSelector=yge,this.hasInsertedRules=!1,this.cssRules=[],n&&EE.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||Age(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=_ge();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){Cge(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=x8(i,s);if(a=S8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=x8(i,s),d=S8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof WV&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),xge=0,Ige=function(){function t(n){this.id=xge++,this.version="10.10.0",this.plugins=new hge,this.options={id:{minify:!1},createGenerateId:A8,Renderer:mb?Sge:null,plugins:[]},this.generateId=A8({minify:!1});for(var r=0;r<E8.length;r++)this.plugins.use(E8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Er({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=EE.index===0?0:EE.index+1);var a=new WV(r,Er({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),EE.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Er({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=sT(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),GV=function(e){return new Ige(e)},I8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},LL(t,[{key:"size",get:function(){return this.length}}]),t}(),$L=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function qV(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=qV(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */GV();var VV=Date.now(),_P="fnValues"+VV,AP="fnStyle"+ ++VV,Nge=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=sT(n,{},s);return i[AP]=r,i},onProcessStyle:function(n,r){if(_P in r||AP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[_P]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[AP];a&&(o.style=a(n)||{});var c=o[_P];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function Tge(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var wy;typeof self<"u"?wy=self:typeof window<"u"?wy=window:typeof global<"u"?wy=global:typeof module<"u"?wy=module:wy=Function("return this")();var N8=Tge(wy),T8=function(e){return e&&e[N8]&&e===e[N8]()},Rge=function(e){return{onCreateRule:function(r,s,i){if(!T8(s))return null;var o=s,a=sT(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!T8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},Pge=/;\n/,Oge=function(e){for(var n={},r=e.split(Pge),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},kge=function(e){typeof e.style=="string"&&(e.style=Oge(e.style))};function Dge(){return{onProcessRule:kge}}var of="@global",iD="@global ",Mge=function(){function t(n,r,s){this.type="global",this.at=of,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new iT(Er({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),Lge=function(){function t(n,r,s){this.type="global",this.at=of,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(iD.length);this.rule=s.jss.createRule(i,r,Er({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),Uge=/\s*,\s*/g;function KV(t,e){for(var n=t.split(Uge),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function $ge(t,e){var n=t.options,r=t.style,s=r?r[of]:null;if(s){for(var i in s)e.addRule(i,s[i],Er({},n,{selector:KV(i,t.selector)}));delete r[of]}}function Bge(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,of.length)!==of)){var i=KV(s.substr(of.length),t.selector);e.addRule(i,r[s],Er({},n,{selector:i})),delete r[s]}}function Fge(){function t(n,r,s){if(!n)return null;if(n===of)return new Mge(n,r,s);if(n[0]==="@"&&n.substr(0,iD.length)===iD)return new Lge(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||($ge(n,r),Bge(n,r))}return{onCreateRule:t,onProcessRule:e}}var US=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},SP="extendCurrValue"+Date.now();function jge(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Ip(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Er({},t,{extend:l}):t.extend[c];Ip(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Ip(t.extend.extend,e,n,r);continue}if(US(t.extend[d])){d in r||(r[d]={}),Ip(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function Wge(t,e,n,r){for(var s in t)if(s!=="extend"){if(US(r[s])&&US(t[s])){Ip(t[s],e,n,r[s]);continue}if(US(t[s])){r[s]=Ip(t[s],e,n);continue}r[s]=t[s]}}function Ip(t,e,n,r){return r===void 0&&(r={}),jge(t,e,n,r),Wge(t,e,n,r),r}function zge(){function t(n,r,s){return"extend"in n?Ip(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[SP])s.prop(i,null);return s[SP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[SP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var R8=/\s*,\s*/g,Hge=/&/g,Gge=/\$([\w-]+)/g;function qge(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(R8),a=s.split(R8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(Hge,u):u+" "+h}return c}function n(s,i,o){if(o)return Er({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Er({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Gge,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Er({},l,{selector:p})):c.addRule(g,s[d],Er({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function oD(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=oD(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return oD(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function Vge(){function t(e,n){return"composes"in e&&(oD(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Kge=/[A-Z]/g,Yge=/^ms-/,xP={};function Qge(t){return"-"+t.toLowerCase()}function YV(t){if(xP.hasOwnProperty(t))return xP[t];var e=t.replace(Kge,Qge);return xP[t]=Yge.test(e)?"-"+e:e}function oI(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:YV(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(oI):e.fallbacks=oI(t.fallbacks)),e}function Jge(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=oI(n[r]);return n}return oI(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=YV(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var de=$L&&CSS?CSS.px:"px",TA=$L&&CSS?CSS.ms:"ms",zm=$L&&CSS?CSS.percent:"%",Zge={"animation-delay":TA,"animation-duration":TA,"background-position":de,"background-position-x":de,"background-position-y":de,"background-size":de,border:de,"border-bottom":de,"border-bottom-left-radius":de,"border-bottom-right-radius":de,"border-bottom-width":de,"border-left":de,"border-left-width":de,"border-radius":de,"border-right":de,"border-right-width":de,"border-top":de,"border-top-left-radius":de,"border-top-right-radius":de,"border-top-width":de,"border-width":de,"border-block":de,"border-block-end":de,"border-block-end-width":de,"border-block-start":de,"border-block-start-width":de,"border-block-width":de,"border-inline":de,"border-inline-end":de,"border-inline-end-width":de,"border-inline-start":de,"border-inline-start-width":de,"border-inline-width":de,"border-start-start-radius":de,"border-start-end-radius":de,"border-end-start-radius":de,"border-end-end-radius":de,margin:de,"margin-bottom":de,"margin-left":de,"margin-right":de,"margin-top":de,"margin-block":de,"margin-block-end":de,"margin-block-start":de,"margin-inline":de,"margin-inline-end":de,"margin-inline-start":de,padding:de,"padding-bottom":de,"padding-left":de,"padding-right":de,"padding-top":de,"padding-block":de,"padding-block-end":de,"padding-block-start":de,"padding-inline":de,"padding-inline-end":de,"padding-inline-start":de,"mask-position-x":de,"mask-position-y":de,"mask-size":de,height:de,width:de,"min-height":de,"max-height":de,"min-width":de,"max-width":de,bottom:de,left:de,top:de,right:de,inset:de,"inset-block":de,"inset-block-end":de,"inset-block-start":de,"inset-inline":de,"inset-inline-end":de,"inset-inline-start":de,"box-shadow":de,"text-shadow":de,"column-gap":de,"column-rule":de,"column-rule-width":de,"column-width":de,"font-size":de,"font-size-delta":de,"letter-spacing":de,"text-decoration-thickness":de,"text-indent":de,"text-stroke":de,"text-stroke-width":de,"word-spacing":de,motion:de,"motion-offset":de,outline:de,"outline-offset":de,"outline-width":de,perspective:de,"perspective-origin-x":zm,"perspective-origin-y":zm,"transform-origin":zm,"transform-origin-x":zm,"transform-origin-y":zm,"transform-origin-z":zm,"transition-delay":TA,"transition-duration":TA,"vertical-align":de,"flex-basis":de,"shape-margin":de,size:de,gap:de,grid:de,"grid-gap":de,"row-gap":de,"grid-row-gap":de,"grid-column-gap":de,"grid-template-rows":de,"grid-template-columns":de,"grid-auto-rows":de,"grid-auto-columns":de,"box-shadow-x":de,"box-shadow-y":de,"box-shadow-blur":de,"box-shadow-spread":de,"font-line-height":de,"text-shadow-x":de,"text-shadow-y":de,"text-shadow-blur":de};function QV(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var Xge=QV(Zge);function CE(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=CE(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=CE(s,e[s],n);else for(var i in e)e[i]=CE(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||Xge[t];return o&&!(e===0&&o===de)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function eme(t){t===void 0&&(t={});var e=QV(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=CE(o,s[o],e);return s}function r(s,i){return CE(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var tme={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},nme={position:!0,size:!0},RA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},IP={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function rme(t,e,n){return t.map(function(r){return ZV(r,e,n,!1,!0)})}function JV(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?JV(t[0],e,n,r):typeof t[0]=="object"?rme(t,e,r):[t]}function ZV(t,e,n,r,s){if(!(RA[e]||IP[e]))return[];var i=[];if(IP[e]&&(t=sme(t,n,IP[e],r)),Object.keys(t).length)for(var o in RA[e]){if(t[o]){Array.isArray(t[o])?i.push(nme[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}RA[e][o]!=null&&i.push(RA[e][o])}return!i.length||s?i:[i]}function sme(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=bC((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function bC(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=bC(t.fallbacks[i],e,!0);continue}t[r]=JV(s,r,tme,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=bC(t.fallbacks,e,!0);continue}t[r]=ZV(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function ime(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=bC(e[r],n);return e}return bC(e,n)}return{onProcessStyle:t}}function aD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ome(t){if(Array.isArray(t))return aD(t)}function ame(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cme(t,e){if(t){if(typeof t=="string")return aD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aD(t,e):void 0}}function lme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ume(t){return ome(t)||ame(t)||cme(t)||lme()}var Bv="",cD="",XV="",eK="",dme=mb&&"ontouchstart"in document.documentElement;if(mb){var NP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},hme=document.createElement("p"),TP=hme.style,fme="Transform";for(var RP in NP)if(RP+fme in TP){Bv=RP,cD=NP[RP];break}Bv==="Webkit"&&"msHyphens"in TP&&(Bv="ms",cD=NP.ms,eK="edge"),Bv==="Webkit"&&"-apple-trailing-word"in TP&&(XV="apple")}var jt={js:Bv,css:cD,vendor:XV,browser:eK,isTouch:dme};function pme(t){return t[1]==="-"||jt.js==="ms"?t:"@"+jt.css+"keyframes"+t.substr(10)}var gme={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:jt.js==="ms"?"-webkit-"+e:jt.css+e}},mme={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:jt.js==="Webkit"?jt.css+"print-"+e:e}},yme=/[-\s]+(.)?/g;function wme(t,e){return e?e.toUpperCase():""}function BL(t){return t.replace(yme,wme)}function _f(t){return BL("-"+t)}var bme={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(jt.js==="Webkit"){var r="mask-image";if(BL(r)in n)return e;if(jt.js+_f(r)in n)return jt.css+e}return e}},vme={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:jt.vendor==="apple"&&!jt.isTouch?jt.css+e:e}},Eme={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:jt.css+e}},Cme={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:jt.css+e}},_me={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:jt.js==="Webkit"||jt.js==="ms"&&jt.browser!=="edge"?jt.css+e:e}},Ame={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:jt.js==="Moz"||jt.js==="ms"||jt.vendor==="apple"?jt.css+e:e}},Sme={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(jt.js==="Webkit"){var r="WebkitColumn"+_f(e);return r in n?jt.css+"column-"+e:!1}if(jt.js==="Moz"){var s="page"+_f(e);return s in n?"page-"+e:!1}return!1}},xme={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(jt.js==="Moz")return e;var r=e.replace("-inline","");return jt.js+_f(r)in n?jt.css+r:!1}},Ime={supportedProperty:function(e,n){return BL(e)in n?e:!1}},Nme={supportedProperty:function(e,n){var r=_f(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:jt.js+r in n?jt.css+e:jt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},Tme={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:jt.js==="ms"?""+jt.css+e:e}},Rme={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:jt.js==="ms"?jt.css+"scroll-chaining":e}},Pme={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Ome={supportedProperty:function(e,n){var r=Pme[e];return r&&jt.js+_f(r)in n?jt.css+r:!1}},tK={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},kme=Object.keys(tK),Dme=function(e){return jt.css+e},Mme={supportedProperty:function(e,n,r){var s=r.multiple;if(kme.indexOf(e)>-1){var i=tK[e];if(!Array.isArray(i))return jt.js+_f(i)in n?jt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(jt.js+_f(i[0])in n))return!1;return i.map(Dme)}return!1}},nK=[gme,mme,bme,vme,Eme,Cme,_me,Ame,Sme,xme,Ime,Nme,Tme,Rme,Ome,Mme],P8=nK.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),Lme=nK.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,ume(e.noPrefill)),t},[]),Fv,fp={};if(mb){Fv=document.createElement("p");var PP=window.getComputedStyle(document.documentElement,"");for(var OP in PP)isNaN(OP)||(fp[PP[OP]]=PP[OP]);Lme.forEach(function(t){return delete fp[t]})}function lD(t,e){if(e===void 0&&(e={}),!Fv)return t;if(fp[t]!=null)return fp[t];(t==="transition"||t==="transform")&&(e[t]=t in Fv.style);for(var n=0;n<P8.length&&(fp[t]=P8[n](t,Fv.style,e),!fp[t]);n++);try{Fv.style[t]=""}catch{return!1}return fp[t]}var Hm={},Ume={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},$me=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Kd;function Bme(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?lD(e):", "+lD(n);return r||e||n}mb&&(Kd=document.createElement("p"));function O8(t,e){var n=e;if(!Kd||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Hm[r]!=null)return Hm[r];try{Kd.style[t]=n}catch{return Hm[r]=!1,!1}if(Ume[t])n=n.replace($me,Bme);else if(Kd.style[t]===""&&(n=jt.css+n,n==="-ms-flex"&&(Kd.style[t]="-ms-flexbox"),Kd.style[t]=n,Kd.style[t]===""))return Hm[r]=!1,!1;return Kd.style[t]="",Hm[r]=n,Hm[r]}function Fme(){function t(s){if(s.type==="keyframes"){var i=s;i.at=pme(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=lD(i);c&&c!==i&&(a=!0);var l=!1,u=O8(c,mg(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return O8(i,mg(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function jme(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var Wme=function(e){return e===void 0&&(e={}),{plugins:[Nge(),Rge(e.observable),Dge(),Fge(),zge(),qge(),Vge(),Jge(),eme(e.defaultUnit),ime(),Fme(),jme()]}},zme=Number.MIN_SAFE_INTEGER||-1e9,Hme=function(){return zme++},Gme=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!mb}),k8=new Map,FL=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new I8),r[n];var s=k8.get(n);return s||(s=new I8,k8.set(n,s)),s},D8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=FL(r,s);o.manage(i),r.registry&&r.registry.add(n)}},qme=function(e){if(e.sheet){var n=FL(e.context,e.index);n.unmanage(e.theme)}},Vme=GV(Wme()),rK=new WeakMap,sK=function(e){return rK.get(e)},Kme=function(e,n){rK.set(e,n)},Yme=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function Qme(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Er({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Jme=function(e){if(!e.context.disableStylesGeneration){var n=FL(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||Vme,i=Yme(e),o=qV(i),a=s.createStyleSheet(i,Qme(e,o!==null));return Kme(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Zme=function(e,n){for(var r in n)e.deleteRule(n[r])},Xme=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},eye=function(e,n){var r=sK(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},tye=function(e,n){if(!n)return e.classes;var r=sK(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function M8(t){return t?D.useEffect:Zo.useInsertionEffect||D.useLayoutEffect}var kP={},Kc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?Hme():s,o=r.theming,a=r.name,c=kV(r,["index","theming","name"]),l=o&&o.context||BV,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||kP},d={};return function(f){var p=D.useRef(!0),g=D.useContext(Gme),w=u(f&&f.theme),y=D.useMemo(function(){var _=Jme({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return _&&g.isSSR&&D8({index:i,context:g,sheet:_,theme:w}),[_,_?eye(_,f):null]},[g,w]),b=y[0],v=y[1];M8(g.isSSR)(function(){b&&v&&!p.current&&Xme(f,b,v)},[f]),M8(g.isSSR)(function(){return b&&D8({index:i,context:g,sheet:b,theme:w}),function(){b&&(qme({index:i,context:g,sheet:b,theme:w}),v&&Zme(b,v))}},[b]);var A=D.useMemo(function(){return b&&v?tye(b,v):d},[b,v]);return D.useDebugValue(A),D.useDebugValue(w===kP?"No theme":w),D.useEffect(function(){p.current=!1}),A}};const nye=Kc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function DP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=nye(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(s1,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const rye=Kc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function ba({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=rye({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return m.jsx(s1,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const MP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],sye=80,iye=80,oye=10,aye=10,cye=10,lye=10,uye=({onIconClick:t})=>{const e=MP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:cye+d*(sye+oye),y:lye+u*(iye+aye)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(DP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(ba,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:MP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(DP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(ba,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:MP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(DP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},dye=Kc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),hye=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=dye({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function iK(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function jL(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function oK(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function WL(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function aK(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function cK(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,g,w,y,b,v,A,_,I,x,N,S,O,P,F,q,B,T,R,$,k,M,z,K,ne,le,oe;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(_=u.mint)==null?void 0:_.slice(0,8)}`,image_url:((N=(x=(I=u.content)==null?void 0:I.files)==null?void 0:x[0])==null?void 0:N.uri)||((O=(S=u.content)==null?void 0:S.metadata)==null?void 0:O.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:((F=(P=u.content)==null?void 0:P.metadata)==null?void 0:F.description)||"",image:((T=(B=(q=u.content)==null?void 0:q.files)==null?void 0:B[0])==null?void 0:T.uri)||(($=(R=u.content)==null?void 0:R.metadata)==null?void 0:$.image)||"",image_url_shrunk:((z=(M=(k=u.content)==null?void 0:k.files)==null?void 0:M[0])==null?void 0:z.uri)||((ne=(K=u.content)==null?void 0:K.metadata)==null?void 0:ne.image)||"",animation_url:((oe=(le=u.content)==null?void 0:le.metadata)==null?void 0:oe.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function fye(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,g,w,y,b,v,A,_,I,x,N,S,O,P,F,q,B,T,R,$,k,M,z,K,ne,le,oe,ae,ue;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(_=u.mint)==null?void 0:_.slice(0,8)}`,image_url:((N=(x=(I=u.content)==null?void 0:I.files)==null?void 0:x[0])==null?void 0:N.uri)||((O=(S=u.content)==null?void 0:S.metadata)==null?void 0:O.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:((F=(P=u.content)==null?void 0:P.metadata)==null?void 0:F.description)||"",image:((T=(B=(q=u.content)==null?void 0:q.files)==null?void 0:B[0])==null?void 0:T.uri)||(($=(R=u.content)==null?void 0:R.metadata)==null?void 0:$.image)||"",image_url_shrunk:((z=(M=(k=u.content)==null?void 0:k.files)==null?void 0:M[0])==null?void 0:z.uri)||((ne=(K=u.content)==null?void 0:K.metadata)==null?void 0:ne.image)||"",animation_url:((oe=(le=u.content)==null?void 0:le.metadata)==null?void 0:oe.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((ue=(ae=u.grouping)==null?void 0:ae.find(Ze=>Ze.group_key==="collection"))==null?void 0:ue.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const lK="2.32.0";let dv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${lK}`},pe=class uD extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof uD?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof uD&&n.cause.docsPath||n.docsPath,i=(a=dv.getDocsUrl)==null?void 0:a.call(dv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...dv.version?[`Version: ${dv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=lK}walk(e){return uK(this,e)}};function uK(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?uK(t.cause,e):e?null:t}let dK=class extends pe{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class pye extends pe{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class gye extends pe{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let mye=class extends pe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},hK=class extends pe{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},fK=class extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class L8 extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function wb(t,{dir:e,size:n=32}={}){return typeof t=="string"?af(t,{dir:e,size:n}):yye(t,{dir:e,size:n})}function af(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new fK({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function yye(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new fK({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Kl(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Pr(t){return Kl(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Wl(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const wye=new TextEncoder;function bb(t,e={}){return typeof t=="number"||typeof t=="bigint"?vye(t,e):typeof t=="boolean"?bye(t,e):Kl(t)?za(t,e):yg(t,e)}function bye(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ka(n,{size:e.size}),wb(n,{size:e.size})):n}const au={zero:48,nine:57,A:65,F:70,a:97,f:102};function U8(t){if(t>=au.zero&&t<=au.nine)return t-au.zero;if(t>=au.A&&t<=au.F)return t-(au.A-10);if(t>=au.a&&t<=au.f)return t-(au.a-10)}function za(t,e={}){let n=t;e.size&&(Ka(n,{size:e.size}),n=wb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=U8(r.charCodeAt(a++)),l=U8(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new pe(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function vye(t,e){const n=nt(t,e);return za(n)}function yg(t,e={}){const n=wye.encode(t);return typeof e.size=="number"?(Ka(n,{size:e.size}),wb(n,{dir:"right",size:e.size})):n}function Ka(t,{size:e}){if(Pr(t)>e)throw new mye({givenSize:Pr(t),maxSize:e})}function ra(t,e={}){const{signed:n}=e;e.size&&Ka(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Eye(t,e={}){let n=t;if(e.size&&(Ka(n,{size:e.size}),n=Wl(n)),Wl(n)==="0x00")return!1;if(Wl(n)==="0x01")return!0;throw new gye(n)}function zc(t,e={}){return Number(ra(t,e))}function pK(t,e={}){let n=za(t);return e.size&&(Ka(n,{size:e.size}),n=Wl(n,{dir:"right"})),new TextDecoder().decode(n)}const Cye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ha(t,e={}){return typeof t=="number"||typeof t=="bigint"?nt(t,e):typeof t=="string"?Tw(t,e):typeof t=="boolean"?gK(t,e):cs(t,e)}function gK(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ka(n,{size:e.size}),wb(n,{size:e.size})):n}function cs(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Cye[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ka(r,{size:e.size}),wb(r,{dir:"right",size:e.size})):r}function nt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new dK({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?wb(a,{size:r}):a}const _ye=new TextEncoder;function Tw(t,e={}){const n=_ye.encode(t);return cs(n,e)}async function Aye(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:nt(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Hc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new Uye(t.type);return`${t.name}(${oT(t.inputs,{includeName:e})})`}function oT(t,{includeName:e=!1}={}){return t?t.map(n=>Sye(n,{includeName:e})).join(e?", ":","):""}function Sye(t,{includeName:e}){return t.type.startsWith("tuple")?`(${oT(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class xye extends pe{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class $8 extends pe{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class mK extends pe{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${oT(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class i1 extends pe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Iye extends pe{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Nye extends pe{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Pr(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Tye extends pe{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Rye extends pe{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class B8 extends pe{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class yK extends pe{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Pye extends pe{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class wK extends pe{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class F8 extends pe{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Rw extends pe{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class bK extends pe{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Oye extends pe{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class kye extends pe{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Hc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Hc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Dye=class extends pe{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class vC extends pe{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${oT(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class aT extends pe{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Hc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Mye extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Lye extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let vK=class extends pe{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class Uye extends pe{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Ga(t){return typeof t[0]=="string"?vb(t):$ye(t)}function $ye(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function vb(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let Af=class extends pe{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},cT=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const PA=BigInt(2**32-1),j8=BigInt(32);function Bye(t,e=!1){return e?{h:Number(t&PA),l:Number(t>>j8&PA)}:{h:Number(t>>j8&PA)|0,l:Number(t&PA)|0}}function Fye(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Bye(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const jye=(t,e,n)=>t<<n|e>>>32-n,Wye=(t,e,n)=>e<<n|t>>>32-n,zye=(t,e,n)=>e<<n-32|t>>>64-n,Hye=(t,e,n)=>t<<n-32|e>>>64-n,Gm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function EC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Gc(t,...e){if(!zL(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Gye(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");EC(t.outputLen),EC(t.blockLen)}function Pw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function EK(t,e){Gc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function qye(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ow(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function LP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function tl(t,e){return t<<32-e|t>>>e}const Vye=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Kye(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Yye(t){for(let e=0;e<t.length;e++)t[e]=Kye(t[e]);return t}const W8=Vye?t=>t:Yye,CK=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Qye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function CC(t){if(Gc(t),CK)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Qye[t[n]];return e}const cu={_0:48,_9:57,A:65,F:70,a:97,f:102};function z8(t){if(t>=cu._0&&t<=cu._9)return t-cu._0;if(t>=cu.A&&t<=cu.F)return t-(cu.A-10);if(t>=cu.a&&t<=cu.f)return t-(cu.a-10)}function HL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(CK)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=z8(t.charCodeAt(i)),a=z8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Jye(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function o1(t){return typeof t=="string"&&(t=Jye(t)),Gc(t),t}function Np(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Gc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let GL=class{};function _K(t){const e=r=>t().update(o1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Zye(t){const e=(r,s)=>t(s).update(o1(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Xye(t=32){if(Gm&&typeof Gm.getRandomValues=="function")return Gm.getRandomValues(new Uint8Array(t));if(Gm&&typeof Gm.randomBytes=="function")return Uint8Array.from(Gm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const e0e=BigInt(0),hv=BigInt(1),t0e=BigInt(2),n0e=BigInt(7),r0e=BigInt(256),s0e=BigInt(113),AK=[],SK=[],xK=[];for(let t=0,e=hv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],AK.push(2*(5*r+n)),SK.push((t+1)*(t+2)/2%64);let s=e0e;for(let i=0;i<7;i++)e=(e<<hv^(e>>n0e)*s0e)%r0e,e&t0e&&(s^=hv<<(hv<<BigInt(i))-hv);xK.push(s)}const IK=Fye(xK,!0),i0e=IK[0],o0e=IK[1],H8=(t,e,n)=>n>32?zye(t,e,n):jye(t,e,n),G8=(t,e,n)=>n>32?Hye(t,e,n):Wye(t,e,n);function NK(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=H8(l,u,1)^n[a],h=G8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=SK[o],c=H8(s,i,a),l=G8(s,i,a),u=AK[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=i0e[r],t[1]^=o0e[r]}Ow(n)}let qL=class TK extends GL{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,EC(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=qye(this.state)}clone(){return this._cloneInto()}keccak(){W8(this.state32),NK(this.state32,this.rounds),W8(this.state32),this.posOut=0,this.pos=0}update(e){Pw(this),e=o1(e),Gc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Pw(this,!1),Gc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return EC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(EK(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ow(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new TK(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Uf=(t,e,n)=>_K(()=>new qL(e,t,n)),a0e=Uf(6,144,224/8),c0e=Uf(6,136,256/8),l0e=Uf(6,104,384/8),u0e=Uf(6,72,512/8),d0e=Uf(1,144,224/8),VL=Uf(1,136,256/8),h0e=Uf(1,104,384/8),f0e=Uf(1,72,512/8),RK=(t,e,n)=>Zye((r={})=>new qL(e,t,r.dkLen===void 0?n:r.dkLen,!0)),p0e=RK(31,168,128/8),g0e=RK(31,136,256/8),yVe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:qL,keccakP:NK,keccak_224:d0e,keccak_256:VL,keccak_384:h0e,keccak_512:f0e,sha3_224:a0e,sha3_256:c0e,sha3_384:l0e,sha3_512:u0e,shake128:p0e,shake256:g0e},Symbol.toStringTag,{value:"Module"}));function Ws(t,e){const n=e||"hex",r=VL(Kl(t,{strict:!1})?bb(t):t);return n==="bytes"?r:Ha(r)}const UP=new cT(8192);function a1(t,e){if(UP.has(`${t}.${e}`))return UP.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Ws(yg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return UP.set(`${t}.${e}`,i),i}function Yu(t,e){if(!qa(t,{strict:!1}))throw new Af({address:t});return a1(t,e)}const m0e=/^0x[a-fA-F0-9]{40}$/,$P=new cT(8192);function qa(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if($P.has(r))return $P.get(r);const s=m0e.test(t)?t.toLowerCase()===t?!0:n?a1(t)===t:!0:!1;return $P.set(r,s),s}function kw(t,e,n,{strict:r}={}){return Kl(t,{strict:!1})?aI(t,e,n,{strict:r}):kK(t,e,n,{strict:r})}function PK(t,e){if(typeof e=="number"&&e>0&&e>Pr(t)-1)throw new hK({offset:e,position:"start",size:Pr(t)})}function OK(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Pr(t)!==n-e)throw new hK({offset:n,position:"end",size:Pr(t)})}function kK(t,e,n,{strict:r}={}){PK(t,e);const s=t.slice(e,n);return r&&OK(s,e,n),s}function aI(t,e,n,{strict:r}={}){PK(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&OK(s,e,n),s}const y0e=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,DK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function $f(t,e){if(t.length!==e.length)throw new Tye({expectedLength:t.length,givenLength:e.length});const n=w0e({params:t,values:e}),r=YL(n);return r.length===0?"0x":r}function w0e({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(KL({param:t[r],value:e[r]}));return n}function KL({param:t,value:e}){const n=QL(t.type);if(n){const[r,s]=n;return v0e(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return S0e(e,{param:t});if(t.type==="address")return b0e(e);if(t.type==="bool")return C0e(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=DK.exec(t.type)??[];return _0e(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return E0e(e,{param:t});if(t.type==="string")return A0e(e);throw new Mye(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function YL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Pr(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(nt(e+s,{size:32})),r.push(a),s+=Pr(a)):n.push(a)}return Ga([...n,...r])}function b0e(t){if(!qa(t))throw new Af({address:t});return{dynamic:!1,encoded:af(t.toLowerCase())}}function v0e(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new vK(t);if(!r&&t.length!==e)throw new Iye({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=KL({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=YL(i);if(r){const a=nt(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Ga([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Ga(i.map(({encoded:o})=>o))}}function E0e(t,{param:e}){const[,n]=e.type.split("bytes"),r=Pr(t);if(!n){let s=t;return r%32!==0&&(s=af(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Ga([af(nt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Nye({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:af(t,{dir:"right"})}}function C0e(t){if(typeof t!="boolean")throw new pe(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:af(gK(t))}}function _0e(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new dK({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:nt(t,{size:32,signed:e})}}function A0e(t){const e=Tw(t),n=Math.ceil(Pr(e)/32),r=[];for(let s=0;s<n;s++)r.push(af(kw(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ga([af(nt(Pr(e),{size:32})),...r])}}function S0e(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=KL({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?YL(r):Ga(r.map(({encoded:s})=>s))}}function QL(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const BP="/docs/contract/encodeDeployData";function lT(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new xye({docsPath:BP});if(!("inputs"in s))throw new $8({docsPath:BP});if(!s.inputs||s.inputs.length===0)throw new $8({docsPath:BP});const i=$f(s.inputs,n);return vb([r,i])}function kr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class dm extends pe{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class $S extends pe{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function x0e(t){const e=Ws(`0x${t.substring(4)}`).substring(26);return a1(`0x${e}`)}const I0e="modulepreload",N0e=function(t){return"/"+t},q8={},ci=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=N0e(c),c in q8)return;q8[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":I0e,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function T0e({hash:t,signature:e}){const n=Kl(t)?t:Ha(t),{secp256k1:r}=await ci(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>GCe);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=V8(f);return new r.Signature(ra(l),ra(u)).addRecoveryBit(p)}const o=Kl(e)?e:Ha(e);if(Pr(o)!==65)throw new Error("invalid signature length");const a=zc(`0x${o.slice(130)}`),c=V8(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function V8(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function MK({hash:t,signature:e}){return x0e(await T0e({hash:t,signature:e}))}class K8 extends pe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class LK extends pe{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class R0e extends pe{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const P0e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new R0e({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new LK({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new K8({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new K8({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function JL(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(P0e);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function O0e(t,e="hex"){const n=UK(t),r=JL(new Uint8Array(n.length));return n.encode(r),e==="hex"?cs(r.bytes):r.bytes}function UK(t){return Array.isArray(t)?k0e(t.map(e=>UK(e))):D0e(t)}function k0e(t){const e=t.reduce((s,i)=>s+i.length,0),n=$K(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function D0e(t){const e=typeof t=="string"?za(t):t,n=$K(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function $K(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new pe("Length is too large.")}function M0e(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Ws(vb(["0x05",O0e([e?nt(e):"0x",s,n?nt(n):"0x"])]));return r==="bytes"?za(i):i}async function BK(t){const{authorization:e,signature:n}=t;return MK({hash:M0e(e),signature:n??e})}class dD extends pe{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class L0e extends pe{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class U0e extends pe{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class FK extends pe{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function jK({chain:t,currentChainId:e}){if(!t)throw new U0e;if(e!==t.id)throw new L0e({chain:t,currentChainId:e})}const $0e={gwei:9,wei:18},B0e={ether:-9,wei:9},F0e={ether:-18,gwei:-9};function hm(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function Co(t,e="wei"){return hm(t,B0e[e])}class Tp extends pe{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Tp,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Tp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class cI extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Co(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(cI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class hD extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Co(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(hD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class fD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(fD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class pD extends pe{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(pD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class gD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(gD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class mD extends pe{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(mD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class yD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(yD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class wD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(wD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class bD extends pe{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(bD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class lI extends pe{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Co(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Co(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(lI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class c1 extends pe{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function ZL(t,e="wei"){return hm(t,$0e[e])}function l1(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class j0e extends pe{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class W0e extends pe{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",l1(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class z0e extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=l1({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${ZL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Co(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Co(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Co(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class WK extends pe{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class zK extends pe{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class H0e extends pe{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const os=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),G0e=t=>t,XL=t=>t;class _E extends pe{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${XL(o)}`,e&&`Request body: ${os(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class eU extends pe{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${XL(r)}`,`Request body: ${os(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Y8 extends pe{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${XL(n)}`,`Request body: ${os(e)}`],name:"TimeoutError"})}}const q0e=-1;class Io extends pe{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof eU?e.code:n??q0e}}class ca extends Io{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class _C extends Io{constructor(e){super(e,{code:_C.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(_C,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class AC extends Io{constructor(e){super(e,{code:AC.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(AC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class SC extends Io{constructor(e,{method:n}={}){super(e,{code:SC.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(SC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class xC extends Io{constructor(e){super(e,{code:xC.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(xC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class kg extends Io{constructor(e){super(e,{code:kg.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(kg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Dg extends Io{constructor(e){super(e,{code:Dg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Dg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class IC extends Io{constructor(e){super(e,{code:IC.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(IC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class cf extends Io{constructor(e){super(e,{code:cf.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(cf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Dw extends Io{constructor(e){super(e,{code:Dw.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Dw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Rp extends Io{constructor(e,{method:n}={}){super(e,{code:Rp.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Rp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Mw extends Io{constructor(e){super(e,{code:Mw.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Mw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class NC extends Io{constructor(e){super(e,{code:NC.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(NC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Zr extends ca{constructor(e){super(e,{code:Zr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Zr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class TC extends ca{constructor(e){super(e,{code:TC.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(TC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class RC extends ca{constructor(e,{method:n}={}){super(e,{code:RC.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(RC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class PC extends ca{constructor(e){super(e,{code:PC.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(PC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class OC extends ca{constructor(e){super(e,{code:OC.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(OC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Yl extends ca{constructor(e){super(e,{code:Yl.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Yl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Lw extends ca{constructor(e){super(e,{code:Lw.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Lw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class kC extends ca{constructor(e){super(e,{code:kC.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(kC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class DC extends ca{constructor(e){super(e,{code:DC.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(DC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class MC extends ca{constructor(e){super(e,{code:MC.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(MC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class LC extends ca{constructor(e){super(e,{code:LC.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(LC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class UC extends ca{constructor(e){super(e,{code:UC.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(UC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Uw extends ca{constructor(e){super(e,{code:Uw.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Uw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class V0e extends Io{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function uT(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof pe?t.walk(s=>(s==null?void 0:s.code)===Tp.code):t;return r instanceof pe?new Tp({cause:t,message:r.details}):Tp.nodeMessage.test(n)?new Tp({cause:t,message:t.details}):cI.nodeMessage.test(n)?new cI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):hD.nodeMessage.test(n)?new hD({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):fD.nodeMessage.test(n)?new fD({cause:t,nonce:e==null?void 0:e.nonce}):pD.nodeMessage.test(n)?new pD({cause:t,nonce:e==null?void 0:e.nonce}):gD.nodeMessage.test(n)?new gD({cause:t,nonce:e==null?void 0:e.nonce}):mD.nodeMessage.test(n)?new mD({cause:t}):yD.nodeMessage.test(n)?new yD({cause:t,gas:e==null?void 0:e.gas}):wD.nodeMessage.test(n)?new wD({cause:t,gas:e==null?void 0:e.gas}):bD.nodeMessage.test(n)?new bD({cause:t}):lI.nodeMessage.test(n)?new lI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new c1({cause:t})}function HK(t,{docsPath:e,...n}){const r=(()=>{const s=uT(t,n);return s instanceof c1?t:s})();return new z0e(r,{docsPath:e,...n})}function dT(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const K0e={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Eb(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Y0e(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>cs(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=nt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=nt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=nt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=nt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=nt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=nt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=K0e[t.type]),typeof t.value<"u"&&(e.value=nt(t.value)),e}function Y0e(t){return t.map(e=>({address:e.address,r:e.r?nt(BigInt(e.r)):e.r,s:e.s?nt(BigInt(e.s)):e.s,chainId:nt(e.chainId),nonce:nt(e.nonce),...typeof e.yParity<"u"?{yParity:nt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:nt(e.v)}:{}}))}function ht(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const Q0e=2n**256n-1n;function fm(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?kr(e):void 0;if(o&&!qa(o.address))throw new Af({address:o.address});if(i&&!qa(i))throw new Af({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new j0e;if(r&&r>Q0e)throw new cI({maxFeePerGas:r});if(s&&r&&s>r)throw new lI({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Cb(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return zc(e)}class J0e extends pe{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class tU extends pe{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Z0e extends pe{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Co(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class GK extends pe{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const qK={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function VK(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?zc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?zc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?qK[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=X0e(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function X0e(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function KK(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:VK(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function $l(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?nt(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new GK({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||KK)(c)}async function nU(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function ewe(t,e){return YK(t,e)}async function YK(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await ht(t,$l,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return ra(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):ht(t,$l,"getBlock")({}),ht(t,nU,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new tU;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function twe(t,e){return vD(t,e)}async function vD(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new J0e;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await ht(t,$l,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new tU;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await YK(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await ht(t,nU,"getGasPrice")({}))}}class nwe extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=l1({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${ZL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Co(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Co(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Co(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function rwe(t,{docsPath:e,...n}){const r=(()=>{const s=uT(t,n);return s instanceof c1?t:s})();return new nwe(r,{docsPath:e,...n})}class swe extends pe{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class iwe extends pe{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Q8(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function owe(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=Q8(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=Q8(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function J8(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new L8({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new L8({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function awe(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=nt(e)),n!==void 0&&(o.nonce=nt(n)),r!==void 0&&(o.state=J8(r)),s!==void 0){if(o.state)throw new iwe;o.stateDiff=J8(s)}return o}function rU(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!qa(n,{strict:!1}))throw new Af({address:n});if(e[n])throw new swe({address:n});e[n]=awe(r)}return e}async function sU(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?nt(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function hT(t,e){var s,i,o;const{account:n=t.account}=e,r=n?kr(n):void 0;try{let B=function(R){const{block:$,request:k,rpcStateOverride:M}=R;return t.request({method:"eth_estimateGas",params:M?[k,$??"latest",M]:$?[k,$]:[k]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,value:A,stateOverride:_,...I}=await u1(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?nt(d):void 0)||h,S=rU(_),O=await(async()=>{if(I.to)return I.to;if(c&&c.length>0)return await BK({authorization:c[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`")})})();fm(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,q=(P||Eb)({...dT(I,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:O,value:A});let T=BigInt(await B({block:N,request:q,rpcStateOverride:S}));if(c){const R=await sU(t,{address:q.from}),$=await Promise.all(c.map(async k=>{const{address:M}=k,z=await B({block:N,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:M,value:nt(R)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(z)}));T+=$.reduce((k,M)=>k+M,0n)}return T}catch(a){throw rwe(a,{...e,account:r,chain:t.chain})}}async function iU(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?nt(r):n]},{dedupe:!!r});return zc(s)}function QK(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>za(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>cs(i))}function JK(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>za(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>za(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>cs(o))}function cwe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function lwe(t,e,n){return t&e^~t&n}function uwe(t,e,n){return t&e^t&n^e&n}class dwe extends GL{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=LP(this.buffer)}update(e){Pw(this),e=o1(e),Gc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=LP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Pw(this),EK(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Ow(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;cwe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=LP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Od=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hwe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kd=new Uint32Array(64);let fwe=class extends dwe{constructor(e=32){super(64,e,8,!1),this.A=Od[0]|0,this.B=Od[1]|0,this.C=Od[2]|0,this.D=Od[3]|0,this.E=Od[4]|0,this.F=Od[5]|0,this.G=Od[6]|0,this.H=Od[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)kd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=kd[d-15],f=kd[d-2],p=tl(h,7)^tl(h,18)^h>>>3,g=tl(f,17)^tl(f,19)^f>>>10;kd[d]=g+kd[d-7]+p+kd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=tl(a,6)^tl(a,11)^tl(a,25),f=u+h+lwe(a,c,l)+hwe[d]+kd[d]|0,g=(tl(r,2)^tl(r,13)^tl(r,22))+uwe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Ow(kd)}destroy(){this.set(0,0,0,0,0,0,0,0),Ow(this.buffer)}};const ZK=_K(()=>new fwe),pwe=ZK;function gwe(t,e){return pwe(Kl(t,{strict:!1})?bb(t):t)}function mwe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=gwe(e);return s.set([n],0),r==="bytes"?s:cs(s)}function ywe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(mwe({commitment:i,to:r,version:n}));return s}const Z8=6,XK=32,oU=4096,eY=XK*oU,X8=eY*Z8-1-1*oU*Z8;class wwe extends pe{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class bwe extends pe{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function vwe(t){const e=typeof t.data=="string"?za(t.data):t.data,n=Pr(e);if(!n)throw new bwe;if(n>X8)throw new wwe({maxSize:X8,size:n});const r=[];let s=!0,i=0;for(;s;){const o=JL(new Uint8Array(eY));let a=0;for(;a<oU;){const c=e.slice(i,i+(XK-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>cs(o.bytes))}function Ewe(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??vwe({data:e}),i=t.commitments??QK({blobs:s,kzg:n,to:r}),o=t.proofs??JK({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Cwe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new W0e({transaction:t})}const tY=["blobVersionedHashes","chainId","fees","gas","nonce","type"],e4=new Map;async function u1(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=tY,type:u}=e,d=n&&kr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await ht(t,$l,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await ht(t,Cb,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await ht(t,iU,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=QK({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=ywe({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=JK({blobs:r,commitments:y,kzg:o}),v=Ewe({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=Cwe(h)}catch{let y=e4.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",e4.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await vD(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new Z0e({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new tU;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await vD(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await ht(t,hT,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),fm(h),delete h.parameters,h}async function aU(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const FP=new cT(128);async function d1(t,e){var b,v,A,_;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new dm({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?kr(n):null;try{fm(e);const I=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await BK({authorization:i[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let x;r!==null&&(x=await ht(t,Cb,"getChainId")({}),jK({currentChainId:x,chain:r}));const N=(A=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,O=(N||Eb)({...dT(w,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:I,type:p,value:g}),P=FP.get(t.uid),F=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:F,params:[O]},{retryCount:0})}catch(q){if(P===!1)throw q;const B=q;if(B.name==="InvalidInputRpcError"||B.name==="InvalidParamsRpcError"||B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(T=>(FP.set(t.uid,!0),T)).catch(T=>{const R=T;throw R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError"?(FP.set(t.uid,!1),B):R});throw B}}if((y==null?void 0:y.type)==="local"){const x=await ht(t,u1,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...tY,"sidecars"],type:p,value:g,...w,to:I}),N=(_=r==null?void 0:r.serializers)==null?void 0:_.transaction,S=await y.signTransaction(x,{serializer:N});return await ht(t,aU,"sendRawTransaction")({serializedTransaction:S})}throw(y==null?void 0:y.type)==="smart"?new $S({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new $S({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(I){throw I instanceof $S?I:HK(I,{...e,account:y,chain:e.chain||void 0})}}function _we(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=lT({abi:n,args:r,bytecode:s});return d1(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const ED=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],CD=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],nY=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],rY=[...nY,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Awe=[...nY,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],t4=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],n4=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],r4=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function Swe(t,e={}){typeof e.size<"u"&&Ka(t,{size:e.size});const n=cs(t,e);return ra(n,e)}function xwe(t,e={}){let n=t;if(typeof e.size<"u"&&(Ka(n,{size:e.size}),n=Wl(n)),n.length>1||n[0]>1)throw new pye(n);return!!n[0]}function ed(t,e={}){typeof e.size<"u"&&Ka(t,{size:e.size});const n=cs(t,e);return zc(n,e)}function Iwe(t,e={}){let n=t;return typeof e.size<"u"&&(Ka(n,{size:e.size}),n=Wl(n,{dir:"right"})),new TextDecoder().decode(n)}function h1(t,e){const n=typeof e=="string"?za(e):e,r=JL(n);if(Pr(n)===0&&t.length>0)throw new i1;if(Pr(e)&&Pr(e)<32)throw new mK({data:typeof e=="string"?e:cs(e),params:t,size:Pr(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=i0(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function i0(t,e,{staticPosition:n}){const r=QL(e.type);if(r){const[s,i]=r;return Twe(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return kwe(t,e,{staticPosition:n});if(e.type==="address")return Nwe(t);if(e.type==="bool")return Rwe(t);if(e.type.startsWith("bytes"))return Pwe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Owe(t,e);if(e.type==="string")return Dwe(t,{staticPosition:n});throw new Lye(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const s4=32,_D=32;function Nwe(t){const e=t.readBytes(32);return[a1(cs(kK(e,-20))),32]}function Twe(t,e,{length:n,staticPosition:r}){if(!n){const o=ed(t.readBytes(_D)),a=r+o,c=a+s4;t.setPosition(a);const l=ed(t.readBytes(s4)),u=$C(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=i0(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if($C(e)){const o=ed(t.readBytes(_D)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=i0(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=i0(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Rwe(t){return[xwe(t.readBytes(32),{size:32}),32]}function Pwe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=ed(t.readBytes(32));t.setPosition(n+o);const a=ed(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[cs(c),32]}return[cs(t.readBytes(Number.parseInt(s),32)),32]}function Owe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?Swe(s,{signed:n}):ed(s,{signed:n}),32]}function kwe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if($C(e)){const o=ed(t.readBytes(_D)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=i0(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=i0(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Dwe(t,{staticPosition:e}){const n=ed(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ed(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Iwe(Wl(i));return t.setPosition(e+32),[o,32]}function $C(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some($C);const n=QL(t.type);return!!(n&&$C({...t,type:n[1]}))}const Mwe=t=>Ws(bb(t));function Lwe(t){return Mwe(t)}const Uwe="1.0.8";let la=class AD extends Error{constructor(e,n={}){var o;const r=n.cause instanceof AD?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof AD&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Uwe}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Cd(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const sY=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,iY=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,oY=/^\(.+?\).*?$/,i4=/^tuple(?<array>(\[(\d*)\])*)$/;function SD(t){let e=t.type;if(i4.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=SD(i),s<n-1&&(e+=", ")}const r=Cd(i4,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,SD({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function fv(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=SD(s),r!==n-1&&(e+=", ")}return e}function uI(t){var e;return t.type==="function"?`function ${t.name}(${fv(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${fv(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${fv(t.inputs)})`:t.type==="error"?`error ${t.name}(${fv(t.inputs)})`:t.type==="constructor"?`constructor(${fv(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const aY=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function $we(t){return aY.test(t)}function Bwe(t){return Cd(aY,t)}const cY=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Fwe(t){return cY.test(t)}function jwe(t){return Cd(cY,t)}const lY=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Wwe(t){return lY.test(t)}function zwe(t){return Cd(lY,t)}const uY=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function cU(t){return uY.test(t)}function Hwe(t){return Cd(uY,t)}const dY=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Gwe(t){return dY.test(t)}function qwe(t){return Cd(dY,t)}const hY=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Vwe(t){return hY.test(t)}function Kwe(t){return Cd(hY,t)}const Ywe=/^receive\(\) external payable$/;function Qwe(t){return Ywe.test(t)}const Jwe=new Set(["indexed"]),xD=new Set(["calldata","memory","storage"]);class Zwe extends la{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Xwe extends la{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class ebe extends la{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class tbe extends la{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class nbe extends la{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class rbe extends la{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class sbe extends la{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class ibe extends la{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class _b extends la{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class obe extends la{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class abe extends la{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class cbe extends la{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class lbe extends la{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function ube(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const jP=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function ID(t,e={}){if(Wwe(t))return dbe(t,e);if(Fwe(t))return hbe(t,e);if($we(t))return fbe(t,e);if(Gwe(t))return pbe(t,e);if(Vwe(t))return gbe(t);if(Qwe(t))return{type:"receive",stateMutability:"payable"};throw new obe({signature:t})}function dbe(t,e={}){const n=zwe(t);if(!n)throw new _b({signature:t,type:"function"});const r=Pc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Mg(r[a],{modifiers:xD,structs:e,type:"function"}));const o=[];if(n.returns){const a=Pc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Mg(a[l],{modifiers:xD,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function hbe(t,e={}){const n=jwe(t);if(!n)throw new _b({signature:t,type:"event"});const r=Pc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Mg(r[o],{modifiers:Jwe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function fbe(t,e={}){const n=Bwe(t);if(!n)throw new _b({signature:t,type:"error"});const r=Pc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Mg(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function pbe(t,e={}){const n=qwe(t);if(!n)throw new _b({signature:t,type:"constructor"});const r=Pc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Mg(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function gbe(t){const e=Kwe(t);if(!e)throw new _b({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const mbe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,ybe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,wbe=/^u?int$/;function Mg(t,e){var d,h;const n=ube(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(jP.has(n))return jP.get(n);const r=oY.test(t),s=Cd(r?ybe:mbe,t);if(!s)throw new tbe({param:t});if(s.name&&vbe(s.name))throw new nbe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Pc(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(Mg(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(wbe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!fY(c))throw new ebe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new rbe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(xD.has(s.modifier)&&!Ebe(c,!!s.array))throw new sbe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return jP.set(n,u),u}function Pc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Pc(a,[...e,n.trim()]):Pc(a,e,`${n}${o}`,r);case"(":return Pc(a,e,`${n}${o}`,r+1);case")":return Pc(a,e,`${n}${o}`,r-1);default:return Pc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new lbe({current:n,depth:r});return e.push(n.trim()),e}function fY(t){return t==="address"||t==="bool"||t==="function"||t==="string"||sY.test(t)||iY.test(t)}const bbe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function vbe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||sY.test(t)||iY.test(t)||bbe.test(t)}function Ebe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function pY(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!cU(a))continue;const c=Hwe(a);if(!c)throw new _b({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Mg(p,{type:"struct"});u.push(g)}if(!u.length)throw new abe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=gY(c,e)}return r}const Cbe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function gY(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(oY.test(o.type))r.push(o);else{const c=Cd(Cbe,o.type);if(!(c!=null&&c.type))throw new ibe({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new cbe({type:u});r.push({...o,type:`tuple${l??""}`,components:gY(e[u]??[],e,new Set([...n,u]))})}else if(fY(u))r.push(o);else throw new Xwe({type:u})}}return r}function mY(t){const e=pY(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];cU(i)||n.push(ID(i,e))}return n}function o4(t){let e;if(typeof t=="string")e=ID(t);else{const n=pY(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!cU(i)){e=ID(i,n);break}}}if(!e)throw new Zwe({signature:t});return e}function _be(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new pe("Unable to normalize signature.");return s}const Abe=t=>{const e=typeof t=="string"?t:uI(t);return _be(e)};function yY(t){return Lwe(Abe(t))}const fT=yY,f1=t=>kw(yY(t),0,4);function pm(t){const{abi:e,args:n=[],name:r}=t,s=Kl(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?f1(a)===r:a.type==="event"?fT(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?ND(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=wY(a.inputs,o.inputs,n);if(l)throw new kye({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function ND(t,e){const n=typeof t,r=e.type;switch(r){case"address":return qa(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>ND(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>ND(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function wY(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return wY(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?qa(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?qa(n[r],{strict:!1}):!1)return o}}const WP="/docs/contract/decodeFunctionResult";function gm(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=pm({abi:e,args:n,name:r});if(!a)throw new Rw(r,{docsPath:WP});i=a}if(i.type!=="function")throw new Rw(void 0,{docsPath:WP});if(!i.outputs)throw new bK(i.name,{docsPath:WP});const o=h1(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const a4="/docs/contract/encodeFunctionData";function Sbe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=pm({abi:e,args:n,name:r});if(!i)throw new Rw(r,{docsPath:a4});s=i}if(s.type!=="function")throw new Rw(void 0,{docsPath:a4});return{abi:[s],functionName:f1(Hc(s))}}function Ya(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Sbe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?$f(s.inputs,e??[]):void 0;return vb([i,o??"0x"])}function Ab({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new dD({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new dD({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const bY={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},vY={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},xbe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Ibe(t){const{abi:e,data:n}=t,r=kw(n,0,4);if(r==="0x")throw new i1;const i=[...e||[],vY,xbe].find(o=>o.type==="error"&&r===f1(Hc(o)));if(!i)throw new yK(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?h1(i.inputs,kw(n,4)):void 0,errorName:i.name}}function EY({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?os(e[i]):e[i]}`).join(", ")})`}class CY extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?kr(n):void 0;let g=l1({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${ZL(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Co(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Co(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Co(l)} gwei`,nonce:u});f&&(g+=`
${owe(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class _Y extends pe{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=pm({abi:n,args:r,name:o}),l=c?EY({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Hc(c,{includeName:!0}):void 0,d=l1({address:s&&G0e(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class TD extends pe{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Ibe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=bY[f]}else{const f=u?Hc(u,{includeName:!0}):void 0,p=u&&h?EY({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof yK&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class Nbe extends pe{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Tbe extends pe{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class pT extends pe{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function lU(t,e){var r,s,i,o,a,c;if(!(t instanceof pe))return!1;const n=t.walk(l=>l instanceof TD);return n instanceof TD?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===bY[50]):!1}function Rbe(t){const{abi:e,data:n}=t,r=kw(n,0,4),s=e.find(i=>i.type==="function"&&r===f1(Hc(i)));if(!s)throw new Oye(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?h1(s.inputs,kw(n,4)):void 0}}const zP="/docs/contract/encodeErrorResult";function c4(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=pm({abi:e,args:r,name:n});if(!c)throw new B8(n,{docsPath:zP});s=c}if(s.type!=="error")throw new B8(void 0,{docsPath:zP});const i=Hc(s),o=f1(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Rye(s.name,{docsPath:zP});a=$f(s.inputs,r)}return vb([o,a])}const HP="/docs/contract/encodeFunctionResult";function Pbe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=pm({abi:e,name:n});if(!o)throw new Rw(n,{docsPath:HP});s=o}if(s.type!=="function")throw new Rw(void 0,{docsPath:HP});if(!s.outputs)throw new bK(s.name,{docsPath:HP});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new vK(r)})();return $f(s.outputs,i)}const uU="x-batch-gateway:true";async function Obe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=Rbe({abi:CD,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(uU)?await Obe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=kbe(c)}})),Pbe({abi:CD,functionName:"query",result:[s,i]})}function kbe(t){return t.name==="HttpRequestError"&&t.status?c4({abi:CD,errorName:"HttpError",args:[t.status,t.shortMessage]}):c4({abi:[vY],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function AY(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Kl(e)?e:null}function BS(t){let e=new Uint8Array(32).fill(0);if(!t)return cs(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=AY(n[r]),i=s?bb(s):Ws(yg(n[r]),"bytes");e=Ws(Ga([e,i]),"bytes")}return cs(e)}function Dbe(t){return`[${t.slice(2)}]`}function Mbe(t){const e=new Uint8Array(32).fill(0);return t?AY(t)||Ws(yg(t)):cs(e)}function gT(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(yg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=yg(s[i]);o.byteLength>255&&(o=yg(Dbe(Mbe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Lbe=3;function Lg(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof pT?t:t instanceof pe?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof i1?new Nbe({functionName:i}):[Lbe,kg.code].includes(c)&&(l||u||d||h)?new TD({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof eU?u:h??d}):t;return new _Y(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dU=BigInt(0),RD=BigInt(1);function dI(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function OA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function SY(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?dU:BigInt("0x"+t)}function mT(t){return SY(CC(t))}function xY(t){return Gc(t),SY(CC(Uint8Array.from(t).reverse()))}function hU(t,e){return HL(t.toString(16).padStart(e*2,"0"))}function IY(t,e){return hU(t,e).reverse()}function _a(t,e,n){let r;if(typeof e=="string")try{r=HL(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(zL(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const GP=t=>typeof t=="bigint"&&dU<=t;function Ube(t,e,n){return GP(t)&&GP(e)&&GP(n)&&e<=t&&t<n}function $be(t,e,n,r){if(!Ube(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Bbe(t){let e;for(e=0;t>dU;t>>=RD,e+=1);return e}const yT=t=>(RD<<BigInt(t))-RD;function Fbe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return Np(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function fU(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function l4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const jbe="0.1.1";function Wbe(){return jbe}let jr=class PD extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof PD){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof PD&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Wbe()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return NY(this,e)}};function NY(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?NY(t.cause,e):e?null:t}const zbe="#__bigint";function Hbe(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+zbe:s,n)}function Gbe(t,e){if(d4(t)>e)throw new tve({givenSize:d4(t),maxSize:e})}const lu={zero:48,nine:57,A:65,F:70,a:97,f:102};function u4(t){if(t>=lu.zero&&t<=lu.nine)return t-lu.zero;if(t>=lu.A&&t<=lu.F)return t-(lu.A-10);if(t>=lu.a&&t<=lu.f)return t-(lu.a-10)}function qbe(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new nve({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function pU(t,e){if(Va(t)>e)throw new ave({givenSize:Va(t),maxSize:e})}function Vbe(t,e){if(typeof e=="number"&&e>0&&e>Va(t)-1)throw new kY({offset:e,position:"start",size:Va(t)})}function Kbe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Va(t)!==n-e)throw new kY({offset:n,position:"end",size:Va(t)})}function TY(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new cve({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Ybe=new TextEncoder;function Qbe(t){return t instanceof Uint8Array?t:typeof t=="string"?Zbe(t):Jbe(t)}function Jbe(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Zbe(t,e={}){const{size:n}=e;let r=t;n&&(pU(t,n),r=$g(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=u4(s.charCodeAt(c++)),u=u4(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new jr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function Xbe(t,e={}){const{size:n}=e,r=Ybe.encode(t);return typeof n=="number"?(Gbe(r,n),eve(r,n)):r}function eve(t,e){return qbe(t,{dir:"right",size:e})}function d4(t){return t.length}let tve=class extends jr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},nve=class extends jr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const rve=new TextEncoder,sve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ive(t,e={}){const{strict:n=!1}=e;if(!t)throw new h4(t);if(typeof t!="string")throw new h4(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new f4(t);if(!t.startsWith("0x"))throw new f4(t)}function Ql(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function RY(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(pU(n,e.size),Ug(n,e.size)):n}function PY(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=sve[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(pU(r,e.size),$g(r,e.size)):r}function xi(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new OY({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ug(c,r):c}function gU(t,e={}){return PY(rve.encode(t),e)}function Ug(t,e){return TY(t,{dir:"left",size:e})}function $g(t,e){return TY(t,{dir:"right",size:e})}function mU(t,e,n,r={}){const{strict:s}=r;Vbe(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Kbe(i,e,n),i}function Va(t){return Math.ceil((t.length-2)/2)}function ove(t,e={}){const{strict:n=!1}=e;try{return ive(t,{strict:n}),!0}catch{return!1}}let OY=class extends jr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class h4 extends jr{constructor(e){super(`Value \`${typeof e=="object"?Hbe(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class f4 extends jr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let ave=class extends jr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class kY extends jr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let cve=class extends jr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function lve(t){return{address:t.address,amount:xi(t.amount),index:xi(t.index),validatorIndex:xi(t.validatorIndex)}}function DY(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:xi(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:xi(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:xi(t.gasLimit)},...typeof t.number=="bigint"&&{number:xi(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:xi(t.prevRandao)},...typeof t.time=="bigint"&&{time:xi(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(lve)}}}const uve="0x82ad56cb",MY="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",dve="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",hve="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function LY(t,{docsPath:e,...n}){const r=(()=>{const s=uT(t,n);return s instanceof c1?t:s})();return new CY(r,{docsPath:e,...n})}function yU(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const qP=new Map;function UY({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>qP.delete(e),a=()=>c().map(({args:u})=>u),c=()=>qP.get(e)||[],l=u=>qP.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=yU();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function p1(t,e){var q,B,T,R;const{account:n=t.account,authorizationList:r,batch:s=!!((q=t.batch)!=null&&q.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:A,value:_,stateOverride:I,...x}=e,N=n?kr(n):void 0;if(u&&(h||f))throw new pe("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new pe("Cannot provide both `code` & `to` as parameters.");const S=u&&d,O=h&&f&&A&&d,P=S||O,F=S?gve({code:u,data:d}):O?mve({data:d,factory:h,factoryData:f,to:A}):d;try{fm(e);const k=(typeof i=="bigint"?nt(i):void 0)||o,M=l?DY(l):void 0,z=rU(I),K=(R=(T=(B=t.chain)==null?void 0:B.formatters)==null?void 0:T.transactionRequest)==null?void 0:R.format,le=(K||Eb)({...dT(x,{format:K}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:F,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:P?void 0:A,value:_});if(s&&fve({request:le})&&!z&&!M)try{return await pve(t,{...le,blockNumber:i,blockTag:o})}catch(ue){if(!(ue instanceof FK)&&!(ue instanceof dD))throw ue}const oe=(()=>{const ue=[le,k];return z&&M?[...ue,z,M]:z?[...ue,z]:M?[...ue,{},M]:ue})(),ae=await t.request({method:"eth_call",params:oe});return ae==="0x"?{data:void 0}:{data:ae}}catch($){const k=yve($),{offchainLookup:M,offchainLookupSignature:z}=await ci(async()=>{const{offchainLookup:K,offchainLookupSignature:ne}=await import("./ccip-BSo4or6O.js");return{offchainLookup:K,offchainLookupSignature:ne}},[]);if(t.ccipRead!==!1&&(k==null?void 0:k.slice(0,10))===z&&A)return{data:await M(t,{data:k,to:A})};throw P&&(k==null?void 0:k.slice(0,10))==="0x101bb98d"?new Tbe({factory:h}):LY($,{...e,account:N,chain:t.chain})}}function fve({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(uve)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function pve(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new FK;l=Ab({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?nt(s):void 0)||i,{schedule:h}=UY({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const y=w.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),b=Ya({abi:ED,args:[y],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return gm({abi:ED,args:[y],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new pT({data:f});return f==="0x"?{data:void 0}:{data:f}}function gve(t){const{code:e,data:n}=t;return lT({abi:mY(["constructor(bytes, bytes)"]),bytecode:MY,args:[e,n]})}function mve(t){const{data:e,factory:n,factoryData:r,to:s}=t;return lT({abi:mY(["constructor(address, bytes, address, bytes)"]),bytecode:dve,args:[s,e,n,r]})}function yve(t){var n;if(!(t instanceof pe))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Jl(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Ya({abi:n,args:s,functionName:i});try{const{data:c}=await ht(t,p1,"call")({...o,data:a,to:r});return gm({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Lg(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function wve(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Ab({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Ya({abi:n4,functionName:"addr",...s!=null?{args:[BS(i),BigInt(s)]}:{args:[BS(i)]}}),h={address:l,abi:rY,functionName:"resolve",args:[Ha(gT(i)),d,o??[uU]],blockNumber:n,blockTag:r},p=await ht(t,Jl,"readContract")(h);if(p[0]==="0x")return null;const g=gm({abi:n4,args:s!=null?[BS(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Wl(g)==="0x00"?null:g}catch(d){if(a)throw d;if(lU(d,"resolve"))return null;throw d}}class bve extends pe{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class pv extends pe{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class wU extends pe{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class vve extends pe{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Eve=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Cve=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,_ve=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Ave=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Sve(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function p4(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function $Y({uri:t,gatewayUrls:e}){const n=_ve.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=p4(e==null?void 0:e.ipfs,"https://ipfs.io"),s=p4(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(Eve),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||Cve.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(Ave,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new wU({uri:t})}function BY(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new bve({data:t});return t.image||t.image_url||t.image_data}async function xve({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await bU({gatewayUrls:t,uri:BY(n)})}catch{throw new wU({uri:e})}}async function bU({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=$Y({uri:e,gatewayUrls:t});if(r||await Sve(n))return n;throw new wU({uri:e})}function Ive(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new pv({reason:"Only EIP-155 supported"});if(!o)throw new pv({reason:"Chain ID not found"});if(!c)throw new pv({reason:"Contract address not found"});if(!s)throw new pv({reason:"Token ID not found"});if(!a)throw new pv({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function Nve(t,{nft:e}){if(e.namespace==="erc721")return Jl(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Jl(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new vve({namespace:e.namespace})}async function Tve(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Rve(t,{gatewayUrls:e,record:n}):bU({uri:n,gatewayUrls:e})}async function Rve(t,{gatewayUrls:e,record:n}){const r=Ive(n),s=await Nve(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=$Y({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return bU({uri:BY(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),xve({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function FY(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Ab({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:rY,functionName:"resolve",args:[Ha(gT(i)),Ya({abi:t4,functionName:"text",args:[BS(i),s]}),o??[uU]],blockNumber:n,blockTag:r},f=await ht(t,Jl,"readContract")(d);if(f[0]==="0x")return null;const p=gm({abi:t4,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(lU(d,"resolve"))return null;throw d}}async function Pve(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await ht(t,FY,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await Tve(t,{record:c,gatewayUrls:r})}catch{return null}}async function jY(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=Ab({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:Awe,functionName:"reverse",args:[Ha(gT(c))],blockNumber:n,blockTag:r},u=ht(t,Jl,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(lU(l,"reverse"))return null;throw l}}async function Ove(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Ab({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await ht(t,Jl,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ha(gT(s))],blockNumber:n,blockTag:r});return c}async function WY(t,e){var w,y,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?kr(n):void 0;try{fm(e);const A=(typeof r=="bigint"?nt(r):void 0)||s,_=(b=(y=(w=t.chain)==null?void 0:w.formatters)==null?void 0:y.transactionRequest)==null?void 0:b.format,x=(_||Eb)({...dT(p,{format:_}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),N=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:N.accessList,gasUsed:BigInt(N.gasUsed)}}catch(v){throw LY(v,{...e,account:g,chain:t.chain})}}function wT(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function kve(t){const e=wT(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class Dve extends pe{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const g4="/docs/contract/encodeEventTopics";function g1(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=pm({abi:e,name:n});if(!l)throw new F8(n,{docsPath:g4});s=l}if(s.type!=="event")throw new F8(void 0,{docsPath:g4});const i=Hc(s),o=fT(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>m4({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?m4({param:d,value:u[h]}):null))??[])}return[o,...a]}function m4({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Ws(bb(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Dve(t.type);return $f([t],[e])}async function zY(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=wT(t,{method:"eth_newFilter"}),u=i?g1({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?nt(o):o,toBlock:typeof c=="bigint"?nt(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function HY(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=wT(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>g1({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?nt(i):i,toBlock:typeof a=="bigint"?nt(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function GY(t){const e=wT(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Mve(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Ya({abi:n,args:s,functionName:i});try{return await ht(t,hT,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?kr(a.account):void 0;throw Lg(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function Lve(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const Uve=new Map,$ve=new Map;function Bve(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Uve),r=e(t,$ve);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Fve(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Bve(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const jve=t=>`blockNumber.${t}`;async function m1(t,{cacheTime:e=t.cacheTime}={}){const n=await Fve(()=>t.request({method:"eth_blockNumber"}),{cacheKey:jve(t.uid),cacheTime:e});return BigInt(n)}async function Wve(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?nt(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),zc(i)}async function y4(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?nt(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function bT(t,e){if(!qa(t,{strict:!1}))throw new Af({address:t});if(!qa(e,{strict:!1}))throw new Af({address:e});return t.toLowerCase()===e.toLowerCase()}const w4="/docs/contract/decodeEventLog";function vU(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Pye({docsPath:w4});const c=e.find(g=>g.type==="event"&&o===fT(Hc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new wK(o,{docsPath:w4});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],b=a[g];if(!b)throw new aT({abiItem:c,param:w});h[d?y:w.name||y]=zve({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=h1(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof mK||g instanceof LK?new vC({abiItem:c,data:n,params:p,size:Pr(n)}):g}else if(i)throw new vC({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function zve({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(h1([t],e)||[])[0]}function EU(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===fT(u));if(!c)return null;const l=vU({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!Hve({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof wK)return null;if(c instanceof vC||c instanceof aT){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function Hve(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?bT(o,a):i.type==="string"||i.type==="bytes"?Ws(bb(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function pd(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function CU(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>g1({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?nt(r):r,toBlock:typeof s=="bigint"?nt(s):s}]});const f=h.map(p=>pd(p));return u?EU({abi:u,args:a,logs:f,strict:l}):f}async function qY(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?pm({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return ht(t,CU,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class Gve extends pe{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function qve(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await ht(t,Jl,"readContract")({abi:Vve,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new Gve({address:n}):o}}const Vve=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Kve(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function Yve(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?nt(n):void 0,o=await t.request({method:"eth_feeHistory",params:[nt(e),i||r,s]},{dedupe:!!i});return Kve(o)}async function vT(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>pd(i));return!("abi"in e)||!e.abi?s:EU({abi:e.abi,logs:s,strict:n})}async function Qve(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>pd(i));return e.abi?EU({abi:e.abi,logs:s,strict:n}):s}async function Jve(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?nt(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function ET(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?nt(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,nt(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,nt(i)]},{dedupe:!!a}),!c)throw new WK({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||VK)(c)}async function Zve(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([ht(t,m1,"getBlockNumber")({}),e?ht(t,ET,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const VY={"0x0":"reverted","0x1":"success"};function Xve(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>pd(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?zc(t.transactionIndex):null,status:t.status?VY[t.status]:null,type:t.type?qK[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function OD(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new zK({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Xve)(n)}async function KY(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=Ab({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:A,args:_,functionName:I}=l[b];try{const x=Ya({abi:v,args:_,functionName:I});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const N=Lg(x,{abi:v,address:A,args:_,docsPath:"/docs/contract/multicall",functionName:I,sender:n});if(!r)throw N;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(b=>ht(t,Jl,"readContract")({abi:ED,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let _=0;_<h[b].length;_++)w.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let _=0;_<A.length;_++){const{returnData:I,success:x}=A[_],{callData:N}=h[b][_],{abi:S,address:O,functionName:P,args:F}=l[w.length];try{if(N==="0x")throw new i1;if(!x)throw new pT({data:I});const q=gm({abi:S,args:F,data:I,functionName:P});w.push(r?{result:q,status:"success"}:q)}catch(q){const B=Lg(q,{abi:S,address:O,args:F,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw B;w.push({error:B,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new pe("multicall results mismatch");return w}async function kD(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?DY(h.blockOverrides):void 0,p=h.calls.map(w=>{const y=w,b=y.account?kr(y.account):void 0,v=y.abi?Ya(y):y.data,A={...y,data:y.dataSuffix?Ga([v||"0x",y.dataSuffix]):v,from:y.from??(b==null?void 0:b.address)};return fm(A),Eb(A)}),g=h.stateOverrides?rU(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?nt(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...KK(h),calls:h.calls.map((p,g)=>{var O,P;const{abi:w,args:y,functionName:b,to:v}=s[f].calls[g],A=((O=p.error)==null?void 0:O.data)??p.returnData,_=BigInt(p.gasUsed),I=(P=p.logs)==null?void 0:P.map(F=>pd(F)),x=p.status==="0x1"?"success":"failure",N=w&&x==="success"&&A!=="0x"?gm({abi:w,data:A,functionName:b}):null,S=(()=>{var q;if(x==="success")return;let F;if(((q=p.error)==null?void 0:q.data)==="0x"?F=new i1:p.error&&(F=new pT(p.error)),!!F)return Lg(F,{abi:w??[],address:v??"0x",args:y,functionName:b??"<unknown>"})})();return{data:A,gasUsed:_,logs:I,status:x,...x==="success"?{result:N}:{error:S}}})}))}catch(c){const l=c,u=uT(l,{});throw u instanceof c1?l:u}}function YY(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=VL(Qbe(t));return n==="Bytes"?r:PY(r)}let eEe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const tEe={checksum:new eEe(8192)},VP=tEe.checksum,nEe=/^0x[a-fA-F0-9]{40}$/;function CT(t,e={}){const{strict:n=!0}=e;if(!nEe.test(t))throw new b4({address:t,cause:new sEe});if(n){if(t.toLowerCase()===t)return;if(rEe(t)!==t)throw new b4({address:t,cause:new iEe})}}function rEe(t){if(VP.has(t))return VP.get(t);CT(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=YY(Xbe(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return VP.set(t,s),s}function DD(t,e={}){const{strict:n=!0}=e??{};try{return CT(t,{strict:n}),!0}catch{return!1}}class b4 extends jr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class sEe extends jr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class iEe extends jr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function MD(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new jr("Unable to normalize signature.");return s}function LD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return DD(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>LD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>LD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function QY(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return QY(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?DD(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?DD(n[r],{strict:!1}):!1)return o}}function JY(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?o4(t):t;return{...r,...n?{hash:jy(r)}:{}}}function oEe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=ove(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?ZY(l)===mU(e,0,4):l.type==="event"?jy(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new UD({name:e});if(o.length===1)return{...o[0],...s?{hash:jy(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:jy(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?LD(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=QY(l.inputs,a.inputs,r);if(d)throw new cEe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new UD({name:e});return{...c,...s?{hash:jy(c)}:{}}}function ZY(t){return mU(jy(t),0,4)}function aEe(t){const e=typeof t=="string"?t:uI(t);return MD(e)}function jy(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:YY(gU(aEe(t)))}class cEe extends jr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${MD(uI(e.abiItem))}\`, and`,`\`${n.type}\` in \`${MD(uI(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class UD extends jr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const lEe=/^(.*)\[([0-9]*)\]$/,uEe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,XY=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function dEe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(_U({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function _U({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=bEe(r.type);if(s){const[i,o]=s;return fEe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return wEe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return hEe(n,{checksum:t});if(r.type==="bool")return gEe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=XY.exec(r.type)??[];return mEe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return pEe(n,{type:r.type});if(r.type==="string")return yEe(n);throw new rQ(r.type)}function AU(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Va(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(xi(e+s,{size:32})),r.push(a),s+=Va(a)):n.push(a)}return Ql(...n,...r)}function hEe(t,e){const{checksum:n=!1}=e;return CT(t,{strict:n}),{dynamic:!1,encoded:Ug(t.toLowerCase())}}function fEe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new EEe(t);if(!i&&t.length!==r)throw new vEe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=_U({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=AU(a);if(i){const l=xi(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Ql(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Ql(...a.map(({encoded:c})=>c))}}function pEe(t,{type:e}){const[,n]=e.split("bytes"),r=Va(t);if(!n){let s=t;return r%32!==0&&(s=$g(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Ql(Ug(xi(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new tQ({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:$g(t)}}function gEe(t){if(typeof t!="boolean")throw new jr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Ug(RY(t))}}function mEe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new OY({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:xi(t,{size:32,signed:e})}}function yEe(t){const e=gU(t),n=Math.ceil(Va(e)/32),r=[];for(let s=0;s<n;s++)r.push($g(mU(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Ql($g(xi(Va(e),{size:32})),...r)}}function wEe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=_U({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?AU(i):Ql(...i.map(({encoded:o})=>o))}}function bEe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function eQ(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new nQ({expectedLength:t.length,givenLength:e.length});const s=dEe({checksumAddress:r,parameters:t,values:e}),i=AU(s);return i.length===0?"0x":i}function $D(t,e){if(t.length!==e.length)throw new nQ({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push($D.encode(s,i))}return Ql(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return CT(c),Ug(c.toLowerCase(),s?32:0)}if(n==="string")return gU(r);if(n==="bytes")return r;if(n==="bool")return Ug(RY(r),s?32:1);const i=n.match(XY);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return xi(r,{size:s?32:d,signed:l==="int"})}const o=n.match(uEe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new tQ({expectedSize:Number.parseInt(l),value:r});return $g(r,s?32:0)}const a=n.match(lEe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Ql(...u)}throw new rQ(n)}t.encode=e})($D||($D={}));class vEe extends jr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class tQ extends jr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Va(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class nQ extends jr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class EEe extends jr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class rQ extends jr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function CEe(t,e){var s;const{bytecode:n,args:r}=e;return Ql(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?eQ(t.inputs,r):"0x")}function _Ee(t){return JY(t)}function AEe(t,...e){const{overloads:n}=t,r=n?SEe([t,...n],t.name,{args:e[0]}):t,s=xEe(r),i=e.length>0?eQ(r.inputs,e[0]):void 0;return i?Ql(s,i):s}function qm(t,e={}){return JY(t,e)}function SEe(t,e,n){const r=oEe(t,e,n);if(r.type!=="function")throw new UD({name:e,type:"function"});return r}function xEe(t){return ZY(t)}const IEe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",nl="0x0000000000000000000000000000000000000000",kA=new cT(8192);function NEe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(kA.get(n))return kA.get(n);const r=t().finally(()=>kA.delete(n));return kA.set(n,r),r}async function hI(t){return new Promise(e=>setTimeout(e,t))}function fI(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await hI(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function TEe(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Rp(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Rp(new Error("method not supported"),{method:l});const u=s?Tw(`${c}.${os(n)}`):void 0;return NEe(()=>fI(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case _C.code:throw new _C(f);case AC.code:throw new AC(f);case SC.code:throw new SC(f,{method:n.method});case xC.code:throw new xC(f);case kg.code:throw new kg(f);case Dg.code:throw new Dg(f);case IC.code:throw new IC(f);case cf.code:throw new cf(f);case Dw.code:throw new Dw(f);case Rp.code:throw new Rp(f,{method:n.method});case Mw.code:throw new Mw(f);case NC.code:throw new NC(f);case Zr.code:throw new Zr(f);case TC.code:throw new TC(f);case RC.code:throw new RC(f);case PC.code:throw new PC(f);case OC.code:throw new OC(f);case Yl.code:throw new Yl(f);case Lw.code:throw new Lw(f);case kC.code:throw new kC(f);case DC.code:throw new DC(f);case MC.code:throw new MC(f);case LC.code:throw new LC(f);case UC.code:throw new UC(f);case Uw.code:throw new Uw(f);case 5e3:throw new Zr(f);default:throw h instanceof pe?h:new V0e(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof _E){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>REe(h)}),{enabled:s,id:u})}}function REe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Mw.code||t.code===kg.code:t instanceof _E&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function sQ(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function iQ(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function PEe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const v4=PEe();function OEe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await iQ(async({signal:p})=>{const g={...a,body:Array.isArray(r)?os(r.map(v=>({jsonrpc:"2.0",id:v.id??v4.take(),...v}))):os({jsonrpc:"2.0",id:r.id??v4.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new Y8({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new _E({body:r,details:os(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof _E||h instanceof Y8?h:new _E({body:r,cause:h,url:t})}}}}class kEe extends pe{constructor({domain:e}){super(`Invalid domain "${os(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class DEe extends pe{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class MEe extends pe{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function LEe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:dQ({domain:e}),...t.types};uQ({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(UEe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(oQ({data:n,primaryType:r,types:s})),Ws(Ga(i))}function UEe({domain:t,types:e}){return oQ({data:t,primaryType:"EIP712Domain",types:e})}function oQ({data:t,primaryType:e,types:n}){const r=aQ({data:t,primaryType:e,types:n});return Ws(r)}function aQ({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[$Ee({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=lQ({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return $f(r,s)}function $Ee({primaryType:t,types:e}){const n=Ha(BEe({primaryType:t,types:e}));return Ws(n)}function BEe({primaryType:t,types:e}){let n="";const r=cQ({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function cQ({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])cQ({primaryType:i.type,types:e},n);return n}function lQ({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Ws(aQ({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Ws(r)];if(n==="string")return[{type:"bytes32"},Ws(Ha(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>lQ({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Ws($f(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function FEe(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return os({domain:o,message:a,primaryType:r,types:s})}function uQ(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(DK);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;nt(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!qa(d))throw new Af({address:d});const f=u.match(y0e);if(f){const[g,w]=f;if(w&&Pr(d)!==Number.parseInt(w))throw new Dye({expectedSize:Number.parseInt(w),givenSize:Pr(d)})}const p=s[u];p&&(jEe(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new kEe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new DEe({primaryType:r,types:s})}function dQ({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function jEe(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new MEe({type:t})}const WEe=`Ethereum Signed Message:
`;function zEe(t){const e=typeof t=="string"?Tw(t):typeof t.raw=="string"?t.raw:cs(t.raw),n=Tw(`${WEe}${Pr(e)}`);return Ga([n,e])}function hQ(t,e){return Ws(zEe(t),e)}const fQ="0x6492649264926492649264926492649264926492649264926492649264926492";function HEe(t){return aI(t,-32)===fQ}function GEe(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=vb([$f([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),fQ]);return s==="hex"?i:za(i)}class qEe extends pe{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function VEe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new qEe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const KEe="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function YEe(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?kr(e.account):void 0;if(o&&!l)throw new pe("`account` is required when `traceAssetChanges` is true");const u=l?CEe(_Ee("constructor(bytes, bytes)"),{bytecode:MY,args:[KEe,AEe(qm("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async k=>{if(!k.data&&!k.abi)return;const{accessList:M}=await WY(t,{account:l.address,...k,data:k.abi?Ya(k):k.data});return M.map(({address:z,storageKeys:K})=>K.length>0?z:null)})).then(k=>k.flat().filter(Boolean)):[],h=await kD(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((k,M)=>({abi:[qm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:nl,nonce:M})),stateOverrides:[{address:nl,nonce:0}]}]:[],{calls:[...s,{}].map(k=>({...k,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((k,M)=>({abi:[qm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:nl,nonce:M})),stateOverrides:[{address:nl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[qm("function decimals() returns (uint256)")],functionName:"decimals",from:nl,nonce:M})),stateOverrides:[{address:nl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[qm("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:nl,nonce:M})),stateOverrides:[{address:nl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[qm("function symbol() returns (string)")],functionName:"symbol",from:nl,nonce:M})),stateOverrides:[{address:nl,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,y,b,v,A]=o?h:[],{calls:_,...I}=f,x=_.slice(0,-1)??[],N=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],O=[...N,...S].map(k=>k.status==="success"?ra(k.data):null),P=(w==null?void 0:w.calls)??[],F=(y==null?void 0:y.calls)??[],q=[...P,...F].map(k=>k.status==="success"?ra(k.data):null),B=((b==null?void 0:b.calls)??[]).map(k=>k.status==="success"?k.result:null),T=((A==null?void 0:A.calls)??[]).map(k=>k.status==="success"?k.result:null),R=((v==null?void 0:v.calls)??[]).map(k=>k.status==="success"?k.result:null),$=[];for(const[k,M]of q.entries()){const z=O[k];if(typeof M!="bigint"||typeof z!="bigint")continue;const K=B[k-1],ne=T[k-1],le=R[k-1],oe=k===0?{address:IEe,decimals:18,symbol:"ETH"}:{address:d[k-1],decimals:le||K?Number(K??1):void 0,symbol:ne??void 0};$.some(ae=>ae.token.address===oe.address)||$.push({token:oe,value:{pre:z,post:M,diff:M-z}})}return{assetChanges:$,block:I,results:x}}const KP=new Map,E4=new Map;let QEe=0;function gd(t,e,n){const r=++QEe,s=()=>KP.get(t)||[],i=()=>{const u=s();KP.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=E4.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(KP.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&E4.set(t,l),o}function Sb(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await hI(c);const l=async()=>{s&&(await t({unpoll:i}),await hI(r),l())};l()})(),i}function JEe(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=os(["watchBlocks",t.uid,e,n,r,u,c]);return gd(p,{onBlock:s,onError:i},g=>Sb(async()=>{var w;try{const y=await ht(t,$l,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<y.number;b++){const v=await ht(t,$l,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(w=g.onError)==null||w.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&ht(t,$l,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:b}=await y.subscribe({params:["newHeads"],async onData(v){var _;if(!p)return;const A=await ht(t,$l,"getBlock")({blockNumber:(_=v.result)==null?void 0:_.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});w=b,p||w()}catch(y){i==null||i(y)}})(),()=>w()})()}function pQ(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=os(["watchBlockNumber",t.uid,e,n,o]);return gd(d,{onBlockNumber:r,onError:s},h=>Sb(async()=>{var f;try{const p=await ht(t,m1,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=os(["watchBlockNumber",t.uid,e,n]);return gd(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var v;if(!f)return;const b=ra((v=y.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function _T(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function ZEe(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=os(["watchEvent",e,n,r,t.uid,s,u,o]);return gd(w,{onLogs:c,onError:a},y=>{let b;o!==void 0&&(b=o-1n);let v,A=!1;const _=Sb(async()=>{var I;if(!A){try{v=await ht(t,HY,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await ht(t,vT,"getFilterChanges")({filter:v});else{const N=await ht(t,m1,"getBlockNumber")({});b&&b!==N?x=await ht(t,CU,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:N}):x=[],b=N}if(x.length===0)return;if(r)y.onLogs(x);else for(const N of x)y.onLogs([N])}catch(x){v&&x instanceof Dg&&(A=!1),(I=y.onError)==null||I.call(y,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await ht(t,_T,"uninstallFilter")({filter:v}),_()}})})():(()=>{let w=!0,y=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return I?I.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>g1({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:_}=await b.subscribe({params:["logs",{address:e,topics:A}],onData(I){var N;if(!w)return;const x=I.result;try{const{eventName:S,args:O}=vU({abi:v??[],data:x.data,topics:x.topics,strict:f}),P=pd(x,{args:O,eventName:S});c([P])}catch(S){let O,P;if(S instanceof vC||S instanceof aT){if(d)return;O=S.abiItem.name,P=(N=S.abiItem.inputs)==null?void 0:N.some(q=>!("name"in q&&q.name))}const F=pd(x,{args:P?[]:{},eventName:O});c([F])}},onError(I){a==null||a(I)}});y=_,w||y()}catch(b){a==null||a(b)}})(),()=>y()})()}function gQ(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=os(["watchPendingTransactions",t.uid,e,i]);return gd(l,{onTransactions:r,onError:n},u=>{let d;const h=Sb(async()=>{var f;try{if(!d)try{d=await ht(t,GY,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await ht(t,vT,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await ht(t,_T,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function XEe(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>a1(r))}async function eCe(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function tCe(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?kr(n):void 0,i=r?[s==null?void 0:s.address,[nt(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const mQ="0x5792579257925792579257925792579257925792579257925792579257925792",yQ=nt(0,{size:32});async function nCe(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?kr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Ya({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Ga([p,f.dataSuffix]):p,to:f.to,value:f.value?nt(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:nt(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Lw(new pe(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Uw(new pe(y,{details:y}))}const p=[];for(const y of d){const b=d1(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?ra(y.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:yQ);return{id:Ga([...w,nt(s.id,{size:32}),mQ])}}throw HK(h,{...e,account:u,chain:e.chain})}}async function wQ(t,e){async function n(u){if(u.endsWith(mQ.slice(2))){const h=Wl(aI(u,-64,-32)),f=aI(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>yQ.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:zc(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?zc(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:ra(u.blockNumber),gasUsed:ra(u.gasUsed),status:VY[u.status]})))??[],statusCode:l,status:c,version:o}}async function rCe(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function sCe(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=os(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=yU();let u;const d=gd(o,{resolve:c,reject:l},h=>{const f=Sb(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await wQ(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new iCe({id:n}))},i):void 0,await a}class iCe extends pe{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function oCe(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function aCe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?zc(t.nonce):void 0,storageProof:t.storageProof?oCe(t.storageProof):void 0}}async function cCe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?nt(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return aCe(a)}async function bQ(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=os(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=yU(),b=a?setTimeout(()=>{p(),f(),y(new H0e({hash:n}))},a):void 0;return f=gd(c,{onReplaced:r,resolve:w,reject:y},v=>{p=ht(t,pQ,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const _=x=>{clearTimeout(b),p(),x(),f()};let I=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;_(()=>v.resolve(d));return}if(l||(h=!0,await fI(async()=>{l=await ht(t,ET,"getTransaction")({hash:n}),l.blockNumber&&(I=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await ht(t,OD,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;_(()=>v.resolve(d))}catch(x){if(x instanceof WK||x instanceof zK){if(!l){h=!1;return}try{u=l,h=!0;const N=await fI(()=>ht(t,$l,"getBlock")({blockNumber:I,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof GK});h=!1;const S=N.transactions.find(({from:P,nonce:F})=>P===u.from&&F===u.nonce);if(!S||(d=await ht(t,OD,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e)))return;let O="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?O="repriced":S.from===S.to&&S.value===0n&&(O="cancelled"),_(()=>{var P;(P=v.onReplaced)==null||P.call(v,{reason:O,replacedTransaction:u,transaction:S,transactionReceipt:d}),v.resolve(d)})}catch(N){_(()=>v.reject(N))}}else _(()=>v.reject(x))}}})}),g}async function lCe(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Yu(n))}async function uCe(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function vQ(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new dm({docsPath:"/docs/eip7702/prepareAuthorization"});const i=kr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:kr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await ht(t,Cb,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await ht(t,iU,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&bT(o.address,i.address))&&(a.nonce+=1)),a}async function dCe(t,e){const{account:n=t.account}=e;if(!n)throw new dm({docsPath:"/docs/eip7702/signAuthorization"});const r=kr(n);if(!r.signAuthorization)throw new $S({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await vQ(t,e);return r.signAuthorization(s)}async function hCe(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new dm({docsPath:"/docs/actions/wallet/signTransaction"});const i=kr(n);fm({account:i,...e});const o=await ht(t,Cb,"getChainId")({});r!==null&&jK({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||Eb;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:nt(o),from:i.address}]},{retryCount:0})}async function EQ(t,{account:e=t.account,message:n}){if(!e)throw new dm({docsPath:"/docs/actions/wallet/signMessage"});const r=kr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Tw(n):n.raw instanceof Uint8Array?Ha(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function fCe(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new dm({docsPath:"/docs/actions/wallet/signTypedData"});const o=kr(n),a={EIP712Domain:dQ({domain:r}),...e.types};if(uQ({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=FEe({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function pCe(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?kr(a.account):t.account,l=Ya({abi:n,args:s,functionName:o});try{const{data:u}=await ht(t,p1,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=gm({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw Lg(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function gCe(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(e)}]},{retryCount:0})}let CQ=class extends GL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Gye(e);const r=o1(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ow(i)}update(e){return Pw(this),this.iHash.update(e),this}digestInto(e){Pw(this),Gc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const _Q=(t,e,n)=>new CQ(t,e).update(n).digest();_Q.create=(t,e)=>new CQ(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wo=BigInt(0),Mi=BigInt(1),Pp=BigInt(2),mCe=BigInt(3),AQ=BigInt(4),SQ=BigInt(5),xQ=BigInt(8);function Pa(t,e){const n=t%e;return n>=wo?n:e+n}function da(t,e,n){let r=t;for(;e-- >wo;)r*=r,r%=n;return r}function C4(t,e){if(t===wo)throw new Error("invert: expected non-zero number");if(e<=wo)throw new Error("invert: expected positive modulus, got "+e);let n=Pa(t,e),r=e,s=wo,i=Mi;for(;n!==wo;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Mi)throw new Error("invert: does not exist");return Pa(s,e)}function IQ(t,e){const n=(t.ORDER+Mi)/AQ,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function yCe(t,e){const n=(t.ORDER-SQ)/xQ,r=t.mul(e,Pp),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Pp),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function wCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Mi,n=0;for(;e%Pp===wo;)e/=Pp,n++;let r=Pp;const s=AT(t);for(;_4(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return IQ;let i=s.pow(r,e);const o=(e+Mi)/Pp;return function(c,l){if(c.is0(l))return l;if(_4(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=Mi<<BigInt(u-p-1),y=c.pow(d,w);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function bCe(t){return t%AQ===mCe?IQ:t%xQ===SQ?yCe:wCe(t)}const vCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ECe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=vCe.reduce((r,s)=>(r[s]="function",r),e);return fU(t,n),t}function CCe(t,e,n){if(n<wo)throw new Error("invalid exponent, negatives unsupported");if(n===wo)return t.ONE;if(n===Mi)return e;let r=t.ONE,s=e;for(;n>wo;)n&Mi&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Mi;return r}function NQ(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function _4(t,e){const n=(t.ORDER-Mi)/Pp,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function _Ce(t,e){e!==void 0&&EC(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function AT(t,e,n=!1,r={}){if(t<=wo)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=_Ce(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:yT(o),ZERO:wo,ONE:Mi,create:u=>Pa(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return wo<=u&&u<t},is0:u=>u===wo,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Mi)===Mi,neg:u=>Pa(-u,t),eql:(u,d)=>u===d,sqr:u=>Pa(u*u,t),add:(u,d)=>Pa(u+d,t),sub:(u,d)=>Pa(u-d,t),mul:(u,d)=>Pa(u*d,t),pow:(u,d)=>CCe(l,u,d),div:(u,d)=>Pa(u*C4(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>C4(u,t),sqrt:i||(u=>(c||(c=bCe(t)),c(l,u))),toBytes:u=>n?IY(u,a):hU(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?xY(u):mT(u)},invertBatch:u=>NQ(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function TQ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function RQ(t){const e=TQ(t);return e+Math.ceil(e/2)}function ACe(t,e,n=!1){const r=t.length,s=TQ(e),i=RQ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?xY(t):mT(t),a=Pa(o,e-Mi)+Mi;return n?IY(a,s):hU(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $w=BigInt(0),Op=BigInt(1);function AE(t,e){const n=e.negate();return t?n:e}function SCe(t,e,n){const r=o=>o.pz,s=NQ(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function PQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function YP(t,e){PQ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=yT(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function A4(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Op);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function xCe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function ICe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const QP=new WeakMap,OQ=new WeakMap;function JP(t){return OQ.get(t)||1}function S4(t){if(t!==$w)throw new Error("invalid wNAF")}function NCe(t,e){return{constTimeNegate:AE,hasPrecomputes(n){return JP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>$w;)r&Op&&(s=s.add(i)),i=i.double(),r>>=Op;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=YP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=YP(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=A4(s,c,a);s=l,d?o=o.add(AE(f,r[p])):i=i.add(AE(h,r[u]))}return S4(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=YP(n,e);for(let a=0;a<o.windows&&s!==$w;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=A4(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return S4(s),i},getPrecomputes(n,r,s){let i=QP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),QP.set(r,i))),i},wNAFCached(n,r,s){const i=JP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=JP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){PQ(r,e),OQ.set(n,r),QP.delete(n)}}}function TCe(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>$w||r>$w;)n&Op&&(i=i.add(s)),r&Op&&(o=o.add(s)),s=s.double(),n>>=Op,r>>=Op;return{p1:i,p2:o}}function RCe(t,e,n,r){xCe(n,t),ICe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Bbe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=yT(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function x4(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return ECe(e),e}else return AT(t)}function PCe(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>$w))throw new Error(`CURVE.${a} must be positive bigint`)}const r=x4(e.p,n.Fp),s=x4(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function I4(t){t.lowS!==void 0&&dI("lowS",t.lowS),t.prehash!==void 0&&dI("prehash",t.prehash)}class OCe extends Error{constructor(e=""){super(e)}}const Iu={Err:OCe,_tlv:{encode:(t,e)=>{const{Err:n}=Iu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=OA(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?OA(s.length/2|128):"";return OA(t)+i+s+e},decode(t,e){const{Err:n}=Iu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Iu;if(t<SE)throw new e("integer: negative integers are not allowed");let n=OA(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Iu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return mT(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Iu,s=_a("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Iu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},SE=BigInt(0),xE=BigInt(1),kCe=BigInt(2),DA=BigInt(3),DCe=BigInt(4);function MCe(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function kQ(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=_a("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function LCe(t,e={}){const{Fp:n,Fn:r}=PCe("weierstrass",t,e),{h:s,n:i}=t;fU(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(N,S,O){const{x:P,y:F}=S.toAffine(),q=n.toBytes(P);if(dI("isCompressed",O),O){a();const B=!n.isOdd(F);return Np(DQ(B),q)}else return Np(Uint8Array.of(4),q,n.toBytes(F))}function l(N){Gc(N);const S=n.BYTES,O=S+1,P=2*S+1,F=N.length,q=N[0],B=N.subarray(1);if(F===O&&(q===2||q===3)){const T=n.fromBytes(B);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const R=h(T);let $;try{$=n.sqrt(R)}catch(z){const K=z instanceof Error?": "+z.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}a();const k=n.isOdd($);return(q&1)===1!==k&&($=n.neg($)),{x:T,y:$}}else if(F===P&&q===4){const T=n.fromBytes(B.subarray(S*0,S*1)),R=n.fromBytes(B.subarray(S*1,S*2));if(!f(T,R))throw new Error("bad point: is not on curve");return{x:T,y:R}}else throw new Error(`bad point: got length ${F}, expected compressed=${O} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=MCe(n,t.a,t.b);function f(N,S){const O=n.sqr(S),P=h(N);return n.eql(O,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,DA),DCe),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(N,S,O=!1){if(!n.isValid(S)||O&&n.is0(S))throw new Error(`bad point coordinate ${N}`);return S}function y(N){if(!(N instanceof _))throw new Error("ProjectivePoint expected")}const b=l4((N,S)=>{const{px:O,py:P,pz:F}=N;if(n.eql(F,n.ONE))return{x:O,y:P};const q=N.is0();S==null&&(S=q?n.ONE:n.inv(F));const B=n.mul(O,S),T=n.mul(P,S),R=n.mul(F,S);if(q)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:B,y:T}}),v=l4(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:S,y:O}=N.toAffine();if(!n.isValid(S)||!n.isValid(O))throw new Error("bad point: x or y not field elements");if(!f(S,O))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(N,S,O,P,F){return O=new _(n.mul(O.px,N),O.py,O.pz),S=AE(P,S),O=AE(F,O),S.add(O)}class _{constructor(S,O,P){this.px=w("x",S),this.py=w("y",O,!0),this.pz=w("z",P),Object.freeze(this)}static fromAffine(S){const{x:O,y:P}=S||{};if(!S||!n.isValid(O)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof _)throw new Error("projective point not allowed");return n.is0(O)&&n.is0(P)?_.ZERO:new _(O,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return SCe(_,"pz",S)}static fromBytes(S){return Gc(S),_.fromHex(S)}static fromHex(S){const O=_.fromAffine(d(_a("pointHex",S)));return O.assertValidity(),O}static fromPrivateKey(S){const O=kQ(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(O(S))}static msm(S,O){return RCe(_,r,S,O)}precompute(S=8,O=!0){return x.setWindowSize(this,S),O||this.multiply(DA),this}_setWindowSize(S){this.precompute(S)}assertValidity(){v(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){y(S);const{px:O,py:P,pz:F}=this,{px:q,py:B,pz:T}=S,R=n.eql(n.mul(O,T),n.mul(q,F)),$=n.eql(n.mul(P,T),n.mul(B,F));return R&&$}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:O}=t,P=n.mul(O,DA),{px:F,py:q,pz:B}=this;let T=n.ZERO,R=n.ZERO,$=n.ZERO,k=n.mul(F,F),M=n.mul(q,q),z=n.mul(B,B),K=n.mul(F,q);return K=n.add(K,K),$=n.mul(F,B),$=n.add($,$),T=n.mul(S,$),R=n.mul(P,z),R=n.add(T,R),T=n.sub(M,R),R=n.add(M,R),R=n.mul(T,R),T=n.mul(K,T),$=n.mul(P,$),z=n.mul(S,z),K=n.sub(k,z),K=n.mul(S,K),K=n.add(K,$),$=n.add(k,k),k=n.add($,k),k=n.add(k,z),k=n.mul(k,K),R=n.add(R,k),z=n.mul(q,B),z=n.add(z,z),k=n.mul(z,K),T=n.sub(T,k),$=n.mul(z,M),$=n.add($,$),$=n.add($,$),new _(T,R,$)}add(S){y(S);const{px:O,py:P,pz:F}=this,{px:q,py:B,pz:T}=S;let R=n.ZERO,$=n.ZERO,k=n.ZERO;const M=t.a,z=n.mul(t.b,DA);let K=n.mul(O,q),ne=n.mul(P,B),le=n.mul(F,T),oe=n.add(O,P),ae=n.add(q,B);oe=n.mul(oe,ae),ae=n.add(K,ne),oe=n.sub(oe,ae),ae=n.add(O,F);let ue=n.add(q,T);return ae=n.mul(ae,ue),ue=n.add(K,le),ae=n.sub(ae,ue),ue=n.add(P,F),R=n.add(B,T),ue=n.mul(ue,R),R=n.add(ne,le),ue=n.sub(ue,R),k=n.mul(M,ae),R=n.mul(z,le),k=n.add(R,k),R=n.sub(ne,k),k=n.add(ne,k),$=n.mul(R,k),ne=n.add(K,K),ne=n.add(ne,K),le=n.mul(M,le),ae=n.mul(z,ae),ne=n.add(ne,le),le=n.sub(K,le),le=n.mul(M,le),ae=n.add(ae,le),K=n.mul(ne,ae),$=n.add($,K),K=n.mul(ue,ae),R=n.mul(oe,R),R=n.sub(R,K),K=n.mul(oe,ne),k=n.mul(ue,k),k=n.add(k,K),new _(R,$,k)}subtract(S){return this.add(S.negate())}is0(){return this.equals(_.ZERO)}multiply(S){const{endo:O}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let P,F;const q=B=>x.wNAFCached(this,B,_.normalizeZ);if(O){const{k1neg:B,k1:T,k2neg:R,k2:$}=O.splitScalar(S),{p:k,f:M}=q(T),{p:z,f:K}=q($);F=M.add(K),P=A(O.beta,k,z,B,R)}else{const{p:B,f:T}=q(S);P=B,F=T}return _.normalizeZ([P,F])[0]}multiplyUnsafe(S){const{endo:O}=e,P=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===SE||P.is0())return _.ZERO;if(S===xE)return P;if(x.hasPrecomputes(this))return this.multiply(S);if(O){const{k1neg:F,k1:q,k2neg:B,k2:T}=O.splitScalar(S),{p1:R,p2:$}=TCe(_,P,q,T);return A(O.beta,R,$,F,B)}else return x.wNAFCachedUnsafe(P,S)}multiplyAndAddUnsafe(S,O,P){const F=this.multiplyUnsafe(O).add(S.multiplyUnsafe(P));return F.is0()?void 0:F}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===xE?!0:S?S(_,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===xE?this:S?S(_,this):this.multiplyUnsafe(s)}toBytes(S=!0){return dI("isCompressed",S),this.assertValidity(),u(_,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return CC(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const I=r.BITS,x=NCe(_,e.endo?Math.ceil(I/2):I);return _}function DQ(t){return Uint8Array.of(t?2:3)}function UCe(t,e,n={}){fU(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Xye,s=e.hmac||((P,...F)=>_Q(e.hash,P,Np(...F))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const F=a>>xE;return P>F}function u(P){return l(P)?o.neg(P):P}function d(P,F){if(!o.isValidNot0(F))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor(F,q,B){d("r",F),d("s",q),this.r=F,this.s=q,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(F){const q=o.BYTES,B=_a("compactSignature",F,q*2);return new h(o.fromBytes(B.subarray(0,q)),o.fromBytes(B.subarray(q,q*2)))}static fromDER(F){const{r:q,s:B}=Iu.toSig(_a("DER",F));return new h(q,B)}assertValidity(){}addRecoveryBit(F){return new h(this.r,this.s,F)}recoverPublicKey(F){const q=i.ORDER,{r:B,s:T,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(a*kCe<q&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const k=R===2||R===3?B+a:B;if(!i.isValid(k))throw new Error("recovery id 2 or 3 invalid");const M=i.toBytes(k),z=t.fromHex(Np(DQ((R&1)===0),M)),K=o.inv(k),ne=v(_a("msgHash",F)),le=o.create(-ne*K),oe=o.create(T*K),ae=t.BASE.multiplyUnsafe(le).add(z.multiplyUnsafe(oe));if(ae.is0())throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(F){if(F==="compact")return Np(o.toBytes(this.r),o.toBytes(this.s));if(F==="der")return HL(Iu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return CC(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return CC(this.toBytes("compact"))}}const f=kQ(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return ACe(r(RQ(P)),P)},precompute(P=8,F=t.BASE){return F.precompute(P,!1)}};function g(P,F=!0){return t.fromPrivateKey(P).toBytes(F)}function w(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const q=_a("key",P).length,B=i.BYTES,T=B+1,R=2*B+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===T))return q===T||q===R}function y(P,F,q=!0){if(w(P)===!0)throw new Error("first arg must be private key");if(w(F)===!1)throw new Error("second arg must be public key");return t.fromHex(F).multiply(f(P)).toBytes(q)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const F=mT(P),q=P.length*8-c;return q>0?F>>BigInt(q):F},v=e.bits2int_modN||function(P){return o.create(b(P))},A=yT(c);function _(P){return $be("num < 2^"+c,P,SE,A),o.toBytes(P)}function I(P,F,q=x){if(["recovered","canonical"].some(oe=>oe in q))throw new Error("sign() legacy options not supported");const{hash:B}=e;let{lowS:T,prehash:R,extraEntropy:$}=q;T==null&&(T=!0),P=_a("msgHash",P),I4(q),R&&(P=_a("prehashed msgHash",B(P)));const k=v(P),M=f(F),z=[_(M),_(k)];if($!=null&&$!==!1){const oe=$===!0?r(i.BYTES):$;z.push(_a("extraEntropy",oe))}const K=Np(...z),ne=k;function le(oe){const ae=b(oe);if(!o.isValidNot0(ae))return;const ue=o.inv(ae),Ze=t.BASE.multiply(ae).toAffine(),Ie=o.create(Ze.x);if(Ie===SE)return;const De=o.create(ue*o.create(ne+Ie*M));if(De===SE)return;let st=(Ze.x===Ie?0:2)|Number(Ze.y&xE),Ot=De;return T&&l(De)&&(Ot=u(De),st^=1),new h(Ie,Ot,st)}return{seed:K,k2sig:le}}const x={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function S(P,F,q=x){const{seed:B,k2sig:T}=I(P,F,q);return Fbe(e.hash.outputLen,o.BYTES,s)(B,T)}t.BASE.precompute(8);function O(P,F,q,B=N){const T=P;F=_a("msgHash",F),q=_a("publicKey",q),I4(B);const{lowS:R,prehash:$,format:k}=B;if("strict"in B)throw new Error("options.strict was renamed to lowS");if(k!==void 0&&!["compact","der","js"].includes(k))throw new Error('format must be "compact", "der" or "js"');const M=typeof T=="string"||zL(T),z=!M&&!k&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!M&&!z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,ne;try{if(z)if(k===void 0||k==="js")K=new h(T.r,T.s);else throw new Error("invalid format");if(M){try{k!=="compact"&&(K=h.fromDER(T))}catch(Ot){if(!(Ot instanceof Iu.Err))throw Ot}!K&&k!=="der"&&(K=h.fromCompact(T))}ne=t.fromHex(q)}catch{return!1}if(!K||R&&K.hasHighS())return!1;$&&(F=e.hash(F));const{r:le,s:oe}=K,ae=v(F),ue=o.inv(oe),Ze=o.create(ae*ue),Ie=o.create(le*ue),De=t.BASE.multiplyUnsafe(Ze).add(ne.multiplyUnsafe(Ie));return De.is0()?!1:o.create(De.x)===le}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:S,verify:O,utils:p,Point:t,Signature:h})}function $Ce(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=AT(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function BCe(t){const{CURVE:e,curveOpts:n}=$Ce(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function FCe(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function jCe(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=BCe(t),s=LCe(e,n),i=UCe(s,r,n);return FCe(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function WCe(t,e){const n=r=>jCe({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const zCe=BigInt(1),BD=BigInt(2),N4=(t,e)=>(t+e/BD)/e;function HCe(t){const e=pI.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=da(u,n,e)*u%e,h=da(d,n,e)*u%e,f=da(h,BD,e)*l%e,p=da(f,s,e)*f%e,g=da(p,i,e)*p%e,w=da(g,a,e)*g%e,y=da(w,c,e)*w%e,b=da(y,a,e)*g%e,v=da(b,n,e)*u%e,A=da(v,o,e)*p%e,_=da(A,r,e)*l%e,I=da(_,BD,e);if(!FD.eql(FD.sqr(I),t))throw new Error("Cannot find square root");return I}const FD=AT(pI.p,void 0,void 0,{sqrt:HCe}),MQ=WCe({...pI,Fp:FD,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=pI.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-zCe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=N4(i*t,e),c=N4(-r*t,e);let l=Pa(t-a*n-c*s,e),u=Pa(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},ZK),GCe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:MQ},Symbol.toStringTag,{value:"Module"}));function qCe({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new MQ.Signature(ra(t),ra(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:za(o)}async function SU(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Kl(o)?o:typeof o=="object"&&"r"in o&&"s"in o?qCe(o):cs(o),u=await(async()=>!r&&!s||HEe(l)?l:GEe({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Ya({abi:r4,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:lT({abi:r4,args:[n,i,u],bytecode:hve}),...c},{data:g}=await ht(t,p1,"call")(p);return Eye(g??"0x0")}catch(p){try{if(bT(Yu(n),await MK({hash:i,signature:o})))return!0}catch{}if(p instanceof CY)return!1;throw p}}async function VCe(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=hQ(n);return SU(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function KCe(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=LEe({message:o,primaryType:a,types:c,domain:l});return SU(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function YCe(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function QCe(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,y=os(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return gd(y,{onLogs:l,onError:c},b=>{let v;a!==void 0&&(v=a-1n);let A,_=!1;const I=Sb(async()=>{var x;if(!_){try{A=await ht(t,zY,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}_=!0;return}try{let N;if(A)N=await ht(t,vT,"getFilterChanges")({filter:A});else{const S=await ht(t,m1,"getBlockNumber")({});v&&v<S?N=await ht(t,qY,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:S,strict:w}):N=[],v=S}if(N.length===0)return;if(i)b.onLogs(N);else for(const S of N)b.onLogs([S])}catch(N){A&&N instanceof Dg&&(_=!1),(x=b.onError)==null||x.call(b,N)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await ht(t,_T,"uninstallFilter")({filter:A}),I()}})})():(()=>{const w=h??!1,y=os(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,v=()=>b=!1;return gd(y,{onLogs:l,onError:c},A=>((async()=>{try{const _=(()=>{if(t.transport.type==="fallback"){const N=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return N?N.value:t.transport}return t.transport})(),I=o?g1({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await _.subscribe({params:["logs",{address:r,topics:I}],onData(N){var O;if(!b)return;const S=N.result;try{const{eventName:P,args:F}=vU({abi:n,data:S.data,topics:S.topics,strict:h}),q=pd(S,{args:F,eventName:P});A.onLogs([q])}catch(P){let F,q;if(P instanceof vC||P instanceof aT){if(h)return;F=P.abiItem.name,q=(O=P.abiItem.inputs)==null?void 0:O.some(T=>!("name"in T&&T.name))}const B=pd(S,{args:q?[]:{},eventName:F});A.onLogs([B])}},onError(N){var S;(S=A.onError)==null||S.call(A,N)}});v=x,b||v()}catch(_){c==null||c(_)}})(),()=>v()))})()}async function LQ(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new dm({docsPath:"/docs/contract/writeContract"});const l=r?kr(r):null,u=Ya({abi:n,args:i,functionName:a});try{return await ht(t,d1,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Lg(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function ta(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const FS="2.17.3",JCe=()=>`@wagmi/core@${FS}`;var UQ=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},gI,$Q;let _d=class jD extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return JCe()}constructor(e,n={}){var i;super(),gI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof jD?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof jD&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return UQ(this,gI,"m",$Q).call(this,this,e)}};gI=new WeakSet,$Q=function t(e,n){return n!=null&&n(e)?e:e.cause?UQ(this,gI,"m",t).call(this,e.cause,n):e};class BC extends _d{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class ZCe extends _d{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class XCe extends _d{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class e_e extends _d{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class t_e extends _d{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class n_e extends _d{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function jS(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new ZCe;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const WD=256;let MA=WD,LA;function BQ(t=11){if(!LA||MA+t>WD*2){LA="",MA=0;for(let e=0;e<WD;e++)LA+=(256+Math.random()*256|0).toString(16).substring(1)}return LA.substring(MA,MA+++t)}function FQ(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?kr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:BQ()};function y(b){return v=>{const A=v(b);for(const I in w)delete A[I];const _={...b,...A};return Object.assign(_,{extend:y(_)})}}return Object.assign(w,{extend:y(w)})}function xU({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=BQ();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:TEe(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function r_e(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>xU({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function mI(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=s_e,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=xU({key:n,name:r,async request({method:g,params:w}){let y;const b=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const _=await A.request({method:g,params:w});return f({method:g,params:w,response:_,transport:A,status:"success"}),_}catch(_){if(f({error:_,method:g,params:w,transport:A,status:"error"}),i(_)||v===h.length-1||(y??(y=h.slice(v+1).some(I=>{const{include:x,exclude:N}=I({chain:c}).config.methods||{};return x?x.includes(g):N?!N.includes(g):!0})),!y))throw _;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};i_e({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function s_e(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Dw.code||t.code===Zr.code||Tp.nodeMessage.test(t.message)||t.code===5e3))}function i_e({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-y,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(I=>I[w].latency),v=1-y.reduce((I,x)=>I+x,0)/y.length/f,A=u.map(I=>I[w].success),_=A.reduce((I,x)=>I+x,0)/A.length;return _===0?[0,w]:[l*v+c*_,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await hI(e),d()};d()}class o_e extends pe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Ua(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new o_e;const v=OEe(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return xU({key:s,methods:i,name:o,async request({method:A,params:_}){const I={method:A,params:_},{schedule:x}=UY({id:b,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>v.request({body:P}),sort:(P,F)=>P.id-F.id}),N=async P=>n?x(P):[await v.request({body:P})],[{error:S,result:O}]=await N(I);if(u)return{error:S,result:O};if(S)throw new eU({body:I,error:S,url:b});return O},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function a_e(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(c_e))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(l_e))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const c_e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,l_e=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function u_e(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!qa(r.address,{strict:!1})||e&&!bT(r.address,e))return!1}catch{return!1}return!0}async function d_e(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=a_e(s);if(!u.address||!u_e({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=hQ(s);return SU(t,{address:u.address,hash:h,signature:a,...l})}function h_e(t){return{call:e=>p1(t,e),createAccessList:e=>WY(t,e),createBlockFilter:()=>kve(t),createContractEventFilter:e=>zY(t,e),createEventFilter:e=>HY(t,e),createPendingTransactionFilter:()=>GY(t),estimateContractGas:e=>Mve(t,e),estimateGas:e=>hT(t,e),getBalance:e=>sU(t,e),getBlobBaseFee:()=>Lve(t),getBlock:e=>$l(t,e),getBlockNumber:e=>m1(t,e),getBlockTransactionCount:e=>Wve(t,e),getBytecode:e=>y4(t,e),getChainId:()=>Cb(t),getCode:e=>y4(t,e),getContractEvents:e=>qY(t,e),getEip712Domain:e=>qve(t,e),getEnsAddress:e=>wve(t,e),getEnsAvatar:e=>Pve(t,e),getEnsName:e=>jY(t,e),getEnsResolver:e=>Ove(t,e),getEnsText:e=>FY(t,e),getFeeHistory:e=>Yve(t,e),estimateFeesPerGas:e=>twe(t,e),getFilterChanges:e=>vT(t,e),getFilterLogs:e=>Qve(t,e),getGasPrice:()=>nU(t),getLogs:e=>CU(t,e),getProof:e=>cCe(t,e),estimateMaxPriorityFeePerGas:e=>ewe(t,e),getStorageAt:e=>Jve(t,e),getTransaction:e=>ET(t,e),getTransactionConfirmations:e=>Zve(t,e),getTransactionCount:e=>iU(t,e),getTransactionReceipt:e=>OD(t,e),multicall:e=>KY(t,e),prepareTransactionRequest:e=>u1(t,e),readContract:e=>Jl(t,e),sendRawTransaction:e=>aU(t,e),simulate:e=>kD(t,e),simulateBlocks:e=>kD(t,e),simulateCalls:e=>YEe(t,e),simulateContract:e=>pCe(t,e),verifyMessage:e=>VCe(t,e),verifySiweMessage:e=>d_e(t,e),verifyTypedData:e=>KCe(t,e),uninstallFilter:e=>_T(t,e),waitForTransactionReceipt:e=>bQ(t,e),watchBlocks:e=>JEe(t,e),watchBlockNumber:e=>pQ(t,e),watchContractEvent:e=>QCe(t,e),watchEvent:e=>ZEe(t,e),watchPendingTransactions:e=>gQ(t,e)}}function f_e(t){return{addChain:e=>Aye(t,e),deployContract:e=>_we(t,e),getAddresses:()=>XEe(t),getCallsStatus:e=>wQ(t,e),getCapabilities:e=>tCe(t,e),getChainId:()=>Cb(t),getPermissions:()=>eCe(t),prepareAuthorization:e=>vQ(t,e),prepareTransactionRequest:e=>u1(t,e),requestAddresses:()=>lCe(t),requestPermissions:e=>uCe(t,e),sendCalls:e=>nCe(t,e),sendRawTransaction:e=>aU(t,e),sendTransaction:e=>d1(t,e),showCallsStatus:e=>rCe(t,e),signAuthorization:e=>dCe(t,e),signMessage:e=>EQ(t,e),signTransaction:e=>hCe(t,e),signTypedData:e=>fCe(t,e),switchChain:e=>gCe(t,e),waitForCallsStatus:e=>sCe(t,e),watchAsset:e=>YCe(t,e),writeContract:e=>LQ(t,e)}}async function y1(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new n_e({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new XCe;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new t_e({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=kr(e.account??n.accounts[0]);if(o&&(o.address=Yu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new e_e({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return FQ({account:o,chain:a,name:"Connector Client",transport:l=>r_e(c)({...l,retryCount:0})})}async function zD(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function p_e(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await y1(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return ta(o,hT,"estimateGas")({...s,account:i})}function jQ(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(F0e[t])}function o0(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function g_e(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return ta(o,KY,"multicall")({allowFailure:n,contracts:s,...i})}function WQ(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ta(s,Jl,"readContract")(r)}async function m_e(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>g_e(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof _Y)throw c;const l=()=>o.map(u=>WQ(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function zQ(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await T4(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await T4(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=pK(Wl(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await ta(c,sU,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:hm(u,jQ(a)),symbol:d.nativeCurrency.symbol,value:u}}async function T4(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await m_e(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=hm(c??"0",jQ(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function R4(t){return t.state.chainId}function Sf(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Sf(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Sf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let ZP=[];function P4(t){const e=t.chains;return Sf(ZP,e)?ZP:(ZP=e,e)}function y_e(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let UA=[];function mc(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Sf(UA,e)?UA:(UA=e,e)}let XP=[];function O4(t){const e=t.connectors;return Sf(XP,e)?XP:(XP=e,e)}function w_e(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ta(s,jY,"getEnsName")(r)}function HD(t,e={}){const n=y_e(t,e);return n==null?void 0:n.extend(h_e)}async function b_e(t,e={}){return(await y1(t,e)).extend(f_e)}async function v_e(t,e){const{account:n,chainId:r,...s}=e,i=n??o0(t).address,o=t.getClient({chainId:r});return ta(o,u1,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let eO=!1;async function GD(t,e={}){var l,u;if(eO)return[];eO=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),eO=!1,a}async function E_e(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await y1(t,{account:n??void 0,chainId:r,connector:s}),await ta(o,d1,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function C_e(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await y1(t,{account:n,connector:r}),ta(i,EQ,"signMessage")({...s,...n?{account:n}:{}})}class eh extends _d{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class __e extends _d{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function qD(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new __e({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new BC;return t.setState(a=>({...a,chainId:r})),i}function HQ(t,e){const{onChange:n}=e;return t.subscribe(()=>o0(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Sf(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function A_e(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function GQ(t,e){const{onChange:n}=e;return t.subscribe(()=>mc(t),n,{equalityFn:Sf})}function qQ(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function S_e(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=ta(l,gQ,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function x_e(t,e){const{onChange:n}=e;return t.subscribe(()=>HD(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function VQ(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await ta(i,bQ,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await ta(i,ET,"getTransaction")({hash:a.transactionHash}),d=await ta(i,p1,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?pK(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function KQ(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await y1(t,{account:n??void 0,chainId:r,connector:s}),await ta(o,LQ,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function xVe(t){return t}ST.type="injected";function ST(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...I_e[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:ST.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,b;const d=await this.getProvider();if(!d)throw new eh;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(A=>Yu(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===Zr.code)throw new Zr(A);if(A.code===cf.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(_=>Yu(_))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(_=>{if(_.code===Zr.code)throw _;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===Zr.code?new Zr(A):A.code===cf.code?new cf(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new eh;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await iQ(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new eh;return(await l.request({method:"eth_accounts"})).map(d=>Yu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new eh;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=WS(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new eh}return!!(await fI(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new eh;const h=c.chains.find(b=>b.id===u);if(!h)throw new Yl(new BC);const f=new Promise(b=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,..._}=h.blockExplorers??{};let I;l!=null&&l.blockExplorerUrls?I=l.blockExplorerUrls:A&&(I=[A.url,...Object.values(_).map(S=>S.url)]);let x;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?x=l.rpcUrls:x=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const N={blockExplorerUrls:I,chainId:nt(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Zr(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new Zr(A)}throw v.code===Zr.code?new Zr(v):new Yl(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Yu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const I_e={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:WS(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return WS(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:WS(t,"isPhantom")}}};function WS(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function N_e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function T_e(){const t=new Set;let e=[];const n=()=>N_e(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const R_e=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},P_e=R_e;function O_e(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const VD=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return VD(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return VD(r)(n)}}}},k_e=(t,e)=>(n,r,s)=>{let i={storage:O_e(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return VD(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[A,_]=b;if(f=i.merge(_,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},D_e=k_e,k4=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},tO=t=>t?k4(t):k4;var YQ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(y-1);v<y;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var A=w.length,_;for(v=0;v<A;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),y){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(YQ);var M_e=YQ.exports;const L_e=im(M_e);class U_e{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new L_e})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function $_e(t){return new U_e(t)}function B_e(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function D4(t,e){return t.slice(0,e).join(".")||"."}function M4(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function F_e(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=M4(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=M4(s,c);if(u!==0)return r?e.call(this,a,c,D4(i,u)):`[ref=${D4(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function j_e(t,e,n,r){return JSON.stringify(t,F_e((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function W_e(t){const{deserialize:e=B_e,key:n="wagmi",serialize:r=j_e,storage:s=QQ}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const QQ={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function z_e(){const t=typeof window<"u"&&window.localStorage?window.localStorage:QQ;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const KD=256;let $A=KD,BA;function H_e(t=11){if(!BA||$A+t>KD*2){BA="",$A=0;for(let e=0;e<KD;e++)BA+=(256+Math.random()*256|0).toString(16).substring(1)}return BA.substring($A,$A+++t)}function JQ(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=W_e({storage:z_e()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?T_e():void 0,a=tO(()=>i.chains),c=tO(()=>{const _=[],I=new Set;for(const x of i.connectors??[]){const N=l(x);if(_.push(N),!s&&N.rdns){const S=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const O of S)I.add(O)}}if(!s&&o){const x=o.getProviders();for(const N of x)I.has(N.info.rdns)||_.push(l(u(N)))}return _});function l(_){var N;const I=$_e(H_e()),x={..._({emitter:I,chains:a.getState(),storage:n,transports:i.transports}),emitter:I,uid:I.uid};return I.on("connect",v),(N=x.setup)==null||N.call(x),x}function u(_){const{info:I}=_,x=_.provider;return ST({target:{...I,id:I.rdns,provider:x}})}const d=new Map;function h(_={}){const I=_.chainId??w.getState().chainId,x=a.getState().find(S=>S.id===I);if(_.chainId&&!x)throw new BC;{const S=d.get(w.getState().chainId);if(S&&!x)return S;if(!x)throw new BC}{const S=d.get(I);if(S)return S}let N;if(i.client)N=i.client({chain:x});else{const S=x.id,O=a.getState().map(q=>q.id),P={},F=Object.entries(i);for(const[q,B]of F)if(!(q==="chains"||q==="client"||q==="connectors"||q==="transports"))if(typeof B=="object")if(S in B)P[q]=B[S];else{if(O.some(R=>R in B))continue;P[q]=B}else P[q]=B;N=FQ({...P,chain:x,batch:P.batch??{multicall:!0},transport:q=>i.transports[S]({...q,connectors:c})})}return d.set(I,N),N}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";FS.startsWith(g)?p=Number.parseInt(FS.replace(g,"")):p=Number.parseInt(FS.split(".")[0]??"0");const w=tO(P_e(n?D_e(f,{migrate(_,I){if(I===p)return _;const x=f(),N=y(_,x.chainId);return{...x,chainId:N}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([I,x])=>{const{id:N,name:S,type:O,uid:P}=x.connector;return[I,{...x,connector:{id:N,name:S,type:O,uid:P}}]})},chainId:_.chainId,current:_.current}},merge(_,I){typeof _=="object"&&_&&"status"in _&&delete _.status;const x=y(_,I.chainId);return{...I,..._,chainId:x}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(_,I){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(x=>x.id===_.chainId)?_.chainId:I}r&&w.subscribe(({connections:_,current:I})=>{var x;return I?(x=_.get(I))==null?void 0:x.chainId:void 0},_=>{if(a.getState().some(x=>x.id===_))return w.setState(x=>({...x,chainId:_??x.chainId}))}),o==null||o.subscribe(_=>{const I=new Set,x=new Set;for(const S of c.getState())if(I.add(S.id),S.rdns){const O=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const P of O)x.add(P)}const N=[];for(const S of _){if(x.has(S.info.rdns))continue;const O=l(u(S));I.has(O.id)||N.push(O)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...N],!0)});function b(_){w.setState(I=>{const x=I.connections.get(_.uid);return x?{...I,connections:new Map(I.connections).set(_.uid,{accounts:_.accounts??x.accounts,chainId:_.chainId??x.chainId,connector:x.connector})}:I})}function v(_){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(I=>{const x=c.getState().find(N=>N.uid===_.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",b),x.emitter.listenerCount("change")||x.emitter.on("change",b),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...I,connections:new Map(I.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:x}),current:_.uid,status:"connected"}):I})}function A(_){w.setState(I=>{const x=I.connections.get(_.uid);if(x){const S=x.connector;S.emitter.listenerCount("change")&&x.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),S.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(I.connections.delete(_.uid),I.connections.size===0)return{...I,connections:new Map,current:null,status:"disconnected"};const N=I.connections.values().next().value;return{...I,connections:new Map(I.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(_){let I;typeof _=="function"?I=_(w.getState()):I=_;const x=f();typeof I!="object"&&(I=x),Object.keys(x).some(S=>!(S in I))&&(I=x),w.setState(I,!0)},subscribe(_,I,x){return w.subscribe(_,I,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(_){const I=typeof _=="function"?_(a.getState()):_;if(I.length!==0)return a.setState(I,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:l,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:b,connect:v,disconnect:A}}}}function G_e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?GD(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function q_e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=G_e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const ZQ=D.createContext(void 0);function V_e(t){const{children:e,config:n}=t,r={value:n};return D.createElement(q_e,t,D.createElement(ZQ.Provider,r,e))}const K_e="2.15.6",Y_e=()=>`wagmi@${K_e}`;let Q_e=class extends _d{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return Y_e()}};class J_e extends Q_e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Fi(t={}){const e=t.config??D.useContext(ZQ);if(!e)throw new J_e;return e}function Z_e(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var XQ={exports:{}},eJ={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT=D,X_e=uV;function e1e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var t1e=typeof Object.is=="function"?Object.is:e1e,n1e=X_e.useSyncExternalStore,r1e=xT.useRef,s1e=xT.useEffect,i1e=xT.useMemo,o1e=xT.useDebugValue;eJ.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=r1e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=i1e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,t1e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=n1e(t,i[0],i[1]);return s1e(function(){o.hasValue=!0,o.value=a},[a]),o1e(a),a};XQ.exports=eJ;var tJ=XQ.exports;const nO=t=>typeof t=="object"&&!Array.isArray(t);function a1e(t,e,n=e,r=Sf){const s=D.useRef([]),i=tJ.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(nO(o)&&nO(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(nO(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function xb(t={}){const e=Fi(t);return a1e(n=>HQ(e,{onChange:n}),()=>o0(e))}var Ib=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Bg=typeof window>"u"||"Deno"in globalThis;function Ai(){}function c1e(t,e){return typeof t=="function"?t(e):t}function YD(t){return typeof t=="number"&&t>=0&&t!==1/0}function nJ(t,e){return Math.max(t+(e||0)-Date.now(),0)}function lf(t,e){return typeof t=="function"?t(e):t}function Oa(t,e){return typeof t=="function"?t(e):t}function L4(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==IU(o,e.options))return!1}else if(!FC(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function U4(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Fg(e.options.mutationKey)!==Fg(i))return!1}else if(!FC(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function IU(t,e){return((e==null?void 0:e.queryKeyHashFn)||Fg)(t)}function Fg(t){return JSON.stringify(t,(e,n)=>QD(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function FC(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>FC(t[n],e[n])):!1}function NU(t,e){if(t===e)return t;const n=$4(t)&&$4(e);if(n||QD(t)&&QD(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=NU(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function yI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function $4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function QD(t){if(!B4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!B4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function B4(t){return Object.prototype.toString.call(t)==="[object Object]"}function l1e(t){return new Promise(e=>{setTimeout(e,t)})}function JD(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?NU(t,e):e}function u1e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function d1e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var TU=Symbol();function rJ(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===TU?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function sJ(t,e){return typeof t=="function"?t(...e):!!t}var Bp,lh,y0,nz,h1e=(nz=class extends Ib{constructor(){super();Q(this,Bp);Q(this,lh);Q(this,y0);L(this,y0,e=>{if(!Bg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){C(this,lh)||this.setEventListener(C(this,y0))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,lh))==null||e.call(this),L(this,lh,void 0))}setEventListener(e){var n;L(this,y0,e),(n=C(this,lh))==null||n.call(this),L(this,lh,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){C(this,Bp)!==e&&(L(this,Bp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof C(this,Bp)=="boolean"?C(this,Bp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Bp=new WeakMap,lh=new WeakMap,y0=new WeakMap,nz),RU=new h1e,w0,uh,b0,rz,f1e=(rz=class extends Ib{constructor(){super();Q(this,w0,!0);Q(this,uh);Q(this,b0);L(this,b0,e=>{if(!Bg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){C(this,uh)||this.setEventListener(C(this,b0))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,uh))==null||e.call(this),L(this,uh,void 0))}setEventListener(e){var n;L(this,b0,e),(n=C(this,uh))==null||n.call(this),L(this,uh,e(this.setOnline.bind(this)))}setOnline(e){C(this,w0)!==e&&(L(this,w0,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return C(this,w0)}},w0=new WeakMap,uh=new WeakMap,b0=new WeakMap,rz),wI=new f1e;function ZD(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function p1e(t){return Math.min(1e3*2**t,3e4)}function iJ(t){return(t??"online")==="online"?wI.isOnline():!0}var oJ=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function rO(t){return t instanceof oJ}function aJ(t){let e=!1,n=0,r=!1,s;const i=ZD(),o=g=>{var w;r||(h(new oJ(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>RU.isFocused()&&(t.networkMode==="always"||wI.isOnline())&&t.canRun(),u=()=>iJ(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var I;if(r)return;const b=t.retry??(Bg?0:3),v=t.retryDelay??p1e,A=typeof v=="function"?v(n,y):v,_=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!_){h(y);return}n++,(I=t.onFail)==null||I.call(t,n,y),l1e(A).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var g1e=t=>setTimeout(t,0);function m1e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=g1e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var ns=m1e(),Fp,sz,cJ=(sz=class{constructor(){Q(this,Fp)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),YD(this.gcTime)&&L(this,Fp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Bg?1/0:5*60*1e3))}clearGcTimeout(){C(this,Fp)&&(clearTimeout(C(this,Fp)),L(this,Fp,void 0))}},Fp=new WeakMap,sz),v0,jp,Aa,Wp,si,N_,zp,wc,Eu,iz,y1e=(iz=class extends cJ{constructor(e){super();Q(this,wc);Q(this,v0);Q(this,jp);Q(this,Aa);Q(this,Wp);Q(this,si);Q(this,N_);Q(this,zp);L(this,zp,!1),L(this,N_,e.defaultOptions),this.setOptions(e.options),this.observers=[],L(this,Wp,e.client),L(this,Aa,C(this,Wp).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,L(this,v0,w1e(this.options)),this.state=e.state??C(this,v0),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=C(this,si))==null?void 0:e.promise}setOptions(e){this.options={...C(this,N_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,Aa).remove(this)}setData(e,n){const r=JD(this.state.data,e,this.options);return he(this,wc,Eu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){he(this,wc,Eu).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=C(this,si))==null?void 0:r.promise;return(s=C(this,si))==null||s.cancel(e),n?n.then(Ai).catch(Ai):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,v0))}isActive(){return this.observers.some(e=>Oa(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===TU||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>lf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!nJ(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=C(this,si))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=C(this,si))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),C(this,Aa).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(C(this,si)&&(C(this,zp)?C(this,si).cancel({revert:!0}):C(this,si).cancelRetry()),this.scheduleGc()),C(this,Aa).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||he(this,wc,Eu).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(C(this,si))return C(this,si).continueRetry(),C(this,si).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(L(this,zp,!0),r.signal)})},i=()=>{const h=rJ(this.options,n),p=(()=>{const g={client:C(this,Wp),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return L(this,zp,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:C(this,Wp),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),L(this,jp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&he(this,wc,Eu).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;rO(h)&&h.silent||he(this,wc,Eu).call(this,{type:"error",error:h}),rO(h)||((p=(f=C(this,Aa).config).onError)==null||p.call(f,h,this),(w=(g=C(this,Aa).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return L(this,si,aJ({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=C(this,Aa).config).onSuccess)==null||p.call(f,h,this),(w=(g=C(this,Aa).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{he(this,wc,Eu).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{he(this,wc,Eu).call(this,{type:"pause"})},onContinue:()=>{he(this,wc,Eu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),C(this,si).start()}},v0=new WeakMap,jp=new WeakMap,Aa=new WeakMap,Wp=new WeakMap,si=new WeakMap,N_=new WeakMap,zp=new WeakMap,wc=new WeakSet,Eu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...lJ(r.data,this.options),fetchMeta:e.meta??null};case"success":return L(this,jp,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return rO(s)&&s.revert&&C(this,jp)?{...C(this,jp),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),ns.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),C(this,Aa).notify({query:this,type:"updated",action:e})})},iz);function lJ(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:iJ(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function w1e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var pl,oz,b1e=(oz=class extends Ib{constructor(e={}){super();Q(this,pl);this.config=e,L(this,pl,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??IU(s,n);let o=this.get(i);return o||(o=new y1e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){C(this,pl).has(e.queryHash)||(C(this,pl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=C(this,pl).get(e.queryHash);n&&(e.destroy(),n===e&&C(this,pl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ns.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return C(this,pl).get(e)}getAll(){return[...C(this,pl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>L4(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>L4(e,r)):n}notify(e){ns.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ns.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ns.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},pl=new WeakMap,oz),gl,bi,Hp,ml,Yd,az,v1e=(az=class extends cJ{constructor(e){super();Q(this,ml);Q(this,gl);Q(this,bi);Q(this,Hp);this.mutationId=e.mutationId,L(this,bi,e.mutationCache),L(this,gl,[]),this.state=e.state||uJ(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){C(this,gl).includes(e)||(C(this,gl).push(e),this.clearGcTimeout(),C(this,bi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){L(this,gl,C(this,gl).filter(n=>n!==e)),this.scheduleGc(),C(this,bi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){C(this,gl).length||(this.state.status==="pending"?this.scheduleGc():C(this,bi).remove(this))}continue(){var e;return((e=C(this,Hp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,b,v,A,_,I,x,N;const n=()=>{he(this,ml,Yd).call(this,{type:"continue"})};L(this,Hp,aJ({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,O)=>{he(this,ml,Yd).call(this,{type:"failed",failureCount:S,error:O})},onPause:()=>{he(this,ml,Yd).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,bi).canRun(this)}));const r=this.state.status==="pending",s=!C(this,Hp).canStart();try{if(r)n();else{he(this,ml,Yd).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=C(this,bi).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));O!==this.state.context&&he(this,ml,Yd).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const S=await C(this,Hp).start();return await((u=(l=C(this,bi).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=C(this,bi).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),he(this,ml,Yd).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(y=C(this,bi).config).onError)==null?void 0:b.call(y,S,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,S,e,this.state.context)),await((I=(_=C(this,bi).config).onSettled)==null?void 0:I.call(_,void 0,S,this.state.variables,this.state.context,this)),await((N=(x=this.options).onSettled)==null?void 0:N.call(x,void 0,S,e,this.state.context)),S}finally{he(this,ml,Yd).call(this,{type:"error",error:S})}}finally{C(this,bi).runNext(this)}}},gl=new WeakMap,bi=new WeakMap,Hp=new WeakMap,ml=new WeakSet,Yd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ns.batch(()=>{C(this,gl).forEach(r=>{r.onMutationUpdate(e)}),C(this,bi).notify({mutation:this,type:"updated",action:e})})},az);function uJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ru,bc,T_,cz,E1e=(cz=class extends Ib{constructor(e={}){super();Q(this,Ru);Q(this,bc);Q(this,T_);this.config=e,L(this,Ru,new Set),L(this,bc,new Map),L(this,T_,0)}build(e,n,r){const s=new v1e({mutationCache:this,mutationId:++Id(this,T_)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){C(this,Ru).add(e);const n=FA(e);if(typeof n=="string"){const r=C(this,bc).get(n);r?r.push(e):C(this,bc).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(C(this,Ru).delete(e)){const n=FA(e);if(typeof n=="string"){const r=C(this,bc).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&C(this,bc).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=FA(e);if(typeof n=="string"){const r=C(this,bc).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=FA(e);if(typeof n=="string"){const s=(r=C(this,bc).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ns.batch(()=>{C(this,Ru).forEach(e=>{this.notify({type:"removed",mutation:e})}),C(this,Ru).clear(),C(this,bc).clear()})}getAll(){return Array.from(C(this,Ru))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>U4(n,r))}findAll(e={}){return this.getAll().filter(n=>U4(e,n))}notify(e){ns.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ns.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ai))))}},Ru=new WeakMap,bc=new WeakMap,T_=new WeakMap,cz);function FA(t){var e;return(e=t.options.scope)==null?void 0:e.id}function F4(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=rJ(e.options,e.fetchOptions),b=async(v,A,_)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:A,direction:_?"backward":"forward",meta:e.options.meta};return w(P),P})(),N=await y(x),{maxPages:S}=e.options,O=_?d1e:u1e;return{pages:O(v.pages,N,S),pageParams:O(v.pageParams,A,S)}};if(s&&i.length){const v=s==="backward",A=v?C1e:j4,_={pages:i,pageParams:o},I=A(r,_);a=await b(_,I,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:j4(r,a);if(c>0&&A==null)break;a=await b(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function j4(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function C1e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var xr,dh,hh,E0,C0,fh,_0,A0,lz,_1e=(lz=class{constructor(t={}){Q(this,xr);Q(this,dh);Q(this,hh);Q(this,E0);Q(this,C0);Q(this,fh);Q(this,_0);Q(this,A0);L(this,xr,t.queryCache||new b1e),L(this,dh,t.mutationCache||new E1e),L(this,hh,t.defaultOptions||{}),L(this,E0,new Map),L(this,C0,new Map),L(this,fh,0)}mount(){Id(this,fh)._++,C(this,fh)===1&&(L(this,_0,RU.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,xr).onFocus())})),L(this,A0,wI.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,xr).onOnline())})))}unmount(){var t,e;Id(this,fh)._--,C(this,fh)===0&&((t=C(this,_0))==null||t.call(this),L(this,_0,void 0),(e=C(this,A0))==null||e.call(this),L(this,A0,void 0))}isFetching(t){return C(this,xr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return C(this,dh).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=C(this,xr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=C(this,xr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(lf(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return C(this,xr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=C(this,xr).get(r.queryHash),i=s==null?void 0:s.state.data,o=c1e(e,i);if(o!==void 0)return C(this,xr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return ns.batch(()=>C(this,xr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=C(this,xr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=C(this,xr);ns.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=C(this,xr);return ns.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=ns.batch(()=>C(this,xr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ai).catch(Ai)}invalidateQueries(t,e={}){return ns.batch(()=>(C(this,xr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=ns.batch(()=>C(this,xr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ai)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ai)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=C(this,xr).build(this,e);return n.isStaleByTime(lf(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ai).catch(Ai)}fetchInfiniteQuery(t){return t.behavior=F4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ai).catch(Ai)}ensureInfiniteQueryData(t){return t.behavior=F4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return wI.isOnline()?C(this,dh).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,xr)}getMutationCache(){return C(this,dh)}getDefaultOptions(){return C(this,hh)}setDefaultOptions(t){L(this,hh,t)}setQueryDefaults(t,e){C(this,E0).set(Fg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...C(this,E0).values()],n={};return e.forEach(r=>{FC(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){C(this,C0).set(Fg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...C(this,C0).values()],n={};return e.forEach(r=>{FC(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...C(this,hh).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=IU(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===TU&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...C(this,hh).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){C(this,xr).clear(),C(this,dh).clear()}},xr=new WeakMap,dh=new WeakMap,hh=new WeakMap,E0=new WeakMap,C0=new WeakMap,fh=new WeakMap,_0=new WeakMap,A0=new WeakMap,lz),ro,sn,R_,vi,Gp,S0,ph,gh,P_,x0,I0,qp,Vp,mh,N0,In,jv,XD,e3,t3,n3,r3,s3,i3,dJ,uz,A1e=(uz=class extends Ib{constructor(e,n){super();Q(this,In);Q(this,ro);Q(this,sn);Q(this,R_);Q(this,vi);Q(this,Gp);Q(this,S0);Q(this,ph);Q(this,gh);Q(this,P_);Q(this,x0);Q(this,I0);Q(this,qp);Q(this,Vp);Q(this,mh);Q(this,N0,new Set);this.options=n,L(this,ro,e),L(this,gh,null),L(this,ph,ZD()),this.options.experimental_prefetchInRender||C(this,ph).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,sn).addObserver(this),W4(C(this,sn),this.options)?he(this,In,jv).call(this):this.updateResult(),he(this,In,n3).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return o3(C(this,sn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return o3(C(this,sn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,he(this,In,r3).call(this),he(this,In,s3).call(this),C(this,sn).removeObserver(this)}setOptions(e){const n=this.options,r=C(this,sn);if(this.options=C(this,ro).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Oa(this.options.enabled,C(this,sn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");he(this,In,i3).call(this),C(this,sn).setOptions(this.options),n._defaulted&&!yI(this.options,n)&&C(this,ro).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,sn),observer:this});const s=this.hasListeners();s&&z4(C(this,sn),r,this.options,n)&&he(this,In,jv).call(this),this.updateResult(),s&&(C(this,sn)!==r||Oa(this.options.enabled,C(this,sn))!==Oa(n.enabled,C(this,sn))||lf(this.options.staleTime,C(this,sn))!==lf(n.staleTime,C(this,sn)))&&he(this,In,XD).call(this);const i=he(this,In,e3).call(this);s&&(C(this,sn)!==r||Oa(this.options.enabled,C(this,sn))!==Oa(n.enabled,C(this,sn))||i!==C(this,mh))&&he(this,In,t3).call(this,i)}getOptimisticResult(e){const n=C(this,ro).getQueryCache().build(C(this,ro),e),r=this.createResult(n,e);return x1e(this,r)&&(L(this,vi,r),L(this,S0,this.options),L(this,Gp,C(this,sn).state)),r}getCurrentResult(){return C(this,vi)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){C(this,N0).add(e)}getCurrentQuery(){return C(this,sn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=C(this,ro).defaultQueryOptions(e),r=C(this,ro).getQueryCache().build(C(this,ro),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return he(this,In,jv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,vi)))}createResult(e,n){var S;const r=C(this,sn),s=this.options,i=C(this,vi),o=C(this,Gp),a=C(this,S0),l=e!==r?e.state:C(this,R_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),P=!O&&W4(e,n),F=O&&z4(e,r,n,s);(P||F)&&(d={...d,...lJ(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,y=!0):O=typeof n.placeholderData=="function"?n.placeholderData((S=C(this,I0))==null?void 0:S.state.data,C(this,I0)):n.placeholderData,O!==void 0&&(w="success",f=JD(i==null?void 0:i.data,O,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===C(this,P_))f=C(this,x0);else try{L(this,P_,n.select),f=n.select(f),f=JD(i==null?void 0:i.data,f,n),L(this,x0,f),L(this,gh,null)}catch(O){L(this,gh,O)}C(this,gh)&&(p=C(this,gh),f=C(this,x0),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",A=w==="error",_=v&&b,I=f!==void 0,N={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:A,isInitialLoading:_,isLoading:_,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:A&&!I,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&I,isStale:PU(e,n),refetch:this.refetch,promise:C(this,ph),isEnabled:Oa(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const O=q=>{N.status==="error"?q.reject(N.error):N.data!==void 0&&q.resolve(N.data)},P=()=>{const q=L(this,ph,N.promise=ZD());O(q)},F=C(this,ph);switch(F.status){case"pending":e.queryHash===r.queryHash&&O(F);break;case"fulfilled":(N.status==="error"||N.data!==F.value)&&P();break;case"rejected":(N.status!=="error"||N.error!==F.reason)&&P();break}}return N}updateResult(){const e=C(this,vi),n=this.createResult(C(this,sn),this.options);if(L(this,Gp,C(this,sn).state),L(this,S0,this.options),C(this,Gp).data!==void 0&&L(this,I0,C(this,sn)),yI(n,e))return;L(this,vi,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!C(this,N0).size)return!0;const o=new Set(i??C(this,N0));return this.options.throwOnError&&o.add("error"),Object.keys(C(this,vi)).some(a=>{const c=a;return C(this,vi)[c]!==e[c]&&o.has(c)})};he(this,In,dJ).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&he(this,In,n3).call(this)}},ro=new WeakMap,sn=new WeakMap,R_=new WeakMap,vi=new WeakMap,Gp=new WeakMap,S0=new WeakMap,ph=new WeakMap,gh=new WeakMap,P_=new WeakMap,x0=new WeakMap,I0=new WeakMap,qp=new WeakMap,Vp=new WeakMap,mh=new WeakMap,N0=new WeakMap,In=new WeakSet,jv=function(e){he(this,In,i3).call(this);let n=C(this,sn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ai)),n},XD=function(){he(this,In,r3).call(this);const e=lf(this.options.staleTime,C(this,sn));if(Bg||C(this,vi).isStale||!YD(e))return;const r=nJ(C(this,vi).dataUpdatedAt,e)+1;L(this,qp,setTimeout(()=>{C(this,vi).isStale||this.updateResult()},r))},e3=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,sn)):this.options.refetchInterval)??!1},t3=function(e){he(this,In,s3).call(this),L(this,mh,e),!(Bg||Oa(this.options.enabled,C(this,sn))===!1||!YD(C(this,mh))||C(this,mh)===0)&&L(this,Vp,setInterval(()=>{(this.options.refetchIntervalInBackground||RU.isFocused())&&he(this,In,jv).call(this)},C(this,mh)))},n3=function(){he(this,In,XD).call(this),he(this,In,t3).call(this,he(this,In,e3).call(this))},r3=function(){C(this,qp)&&(clearTimeout(C(this,qp)),L(this,qp,void 0))},s3=function(){C(this,Vp)&&(clearInterval(C(this,Vp)),L(this,Vp,void 0))},i3=function(){const e=C(this,ro).getQueryCache().build(C(this,ro),this.options);if(e===C(this,sn))return;const n=C(this,sn);L(this,sn,e),L(this,R_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},dJ=function(e){ns.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(C(this,vi))}),C(this,ro).getQueryCache().notify({query:C(this,sn),type:"observerResultsUpdated"})})},uz);function S1e(t,e){return Oa(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function W4(t,e){return S1e(t,e)||t.state.data!==void 0&&o3(t,e,e.refetchOnMount)}function o3(t,e,n){if(Oa(e.enabled,t)!==!1&&lf(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&PU(t,e)}return!1}function z4(t,e,n,r){return(t!==e||Oa(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&PU(t,n)}function PU(t,e){return Oa(e.enabled,t)!==!1&&t.isStaleByTime(lf(e.staleTime,t))}function x1e(t,e){return!yI(t.getCurrentResult(),e)}var yh,wh,so,Pu,ad,zS,a3,dz,I1e=(dz=class extends Ib{constructor(n,r){super();Q(this,ad);Q(this,yh);Q(this,wh);Q(this,so);Q(this,Pu);L(this,yh,n),this.setOptions(r),this.bindMethods(),he(this,ad,zS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=C(this,yh).defaultMutationOptions(n),yI(this.options,r)||C(this,yh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,so),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Fg(r.mutationKey)!==Fg(this.options.mutationKey)?this.reset():((s=C(this,so))==null?void 0:s.state.status)==="pending"&&C(this,so).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=C(this,so))==null||n.removeObserver(this)}onMutationUpdate(n){he(this,ad,zS).call(this),he(this,ad,a3).call(this,n)}getCurrentResult(){return C(this,wh)}reset(){var n;(n=C(this,so))==null||n.removeObserver(this),L(this,so,void 0),he(this,ad,zS).call(this),he(this,ad,a3).call(this)}mutate(n,r){var s;return L(this,Pu,r),(s=C(this,so))==null||s.removeObserver(this),L(this,so,C(this,yh).getMutationCache().build(C(this,yh),this.options)),C(this,so).addObserver(this),C(this,so).execute(n)}},yh=new WeakMap,wh=new WeakMap,so=new WeakMap,Pu=new WeakMap,ad=new WeakSet,zS=function(){var r;const n=((r=C(this,so))==null?void 0:r.state)??uJ();L(this,wh,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},a3=function(n){ns.batch(()=>{var r,s,i,o,a,c,l,u;if(C(this,Pu)&&this.hasListeners()){const d=C(this,wh).variables,h=C(this,wh).context;(n==null?void 0:n.type)==="success"?((s=(r=C(this,Pu)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=C(this,Pu)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=C(this,Pu)).onError)==null||c.call(a,n.error,d,h),(u=(l=C(this,Pu)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(C(this,wh))})})},dz);function N1e(t,e){return NU(t,e)}function T1e(t){return JSON.stringify(t,(e,n)=>R1e(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function R1e(t){if(!H4(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!H4(n)||!n.hasOwnProperty("isPrototypeOf"))}function H4(t){return Object.prototype.toString.call(t)==="[object Object]"}function w1(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:v,enabled:A,notifyOnChangeProps:_,placeholderData:I,refetchInterval:x,refetchIntervalInBackground:N,refetchOnMount:S,refetchOnReconnect:O,refetchOnWindowFocus:P,retryOnMount:F,select:q,staleTime:B,suspense:T,throwOnError:R,config:$,connector:k,query:M,...z}=t;return z}function P1e(t){return{mutationFn(e){return jS(t,e)},mutationKey:["connect"]}}function O1e(t){return{mutationFn(e){return zD(t,e)},mutationKey:["disconnect"]}}function k1e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return await zQ(t,{...i,address:r})??null},queryKey:D1e(e)}}function D1e(t={}){return["balance",w1(t)]}function M1e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return w_e(t,{...i,address:r})},queryKey:L1e(e)}}function L1e(t={}){return["ensName",w1(t)]}function U1e(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return b_e(t,{...o,connector:r})},queryKey:$1e(e)}}function $1e(t={}){const{connector:e,...n}=t;return["walletClient",{...w1(n),connectorUid:e==null?void 0:e.uid}]}function B1e(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return WQ(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:F1e(e)}}function F1e(t={}){const{abi:e,...n}=t;return["readContract",w1(n)]}function j1e(t){return{mutationFn(e){return qD(t,e)},mutationKey:["switchChain"]}}function W1e(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return VQ(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:z1e(e)}}function z1e(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",w1(n)]}function H1e(t){return{mutationFn(e){return KQ(t,e)},mutationKey:["writeContract"]}}var hJ=D.createContext(void 0),OU=t=>{const e=D.useContext(hJ);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},G1e=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(hJ.Provider,{value:t,children:e})),fJ=D.createContext(!1),q1e=()=>D.useContext(fJ);fJ.Provider;function V1e(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var K1e=D.createContext(V1e()),Y1e=()=>D.useContext(K1e),Q1e=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},J1e=t=>{D.useEffect(()=>{t.clearReset()},[t])},Z1e=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||sJ(n,[t.error,r])),X1e=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},eAe=(t,e)=>t.isLoading&&t.isFetching&&!e,tAe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,G4=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function nAe(t,e,n){var d,h,f,p,g;const r=q1e(),s=Y1e(),i=OU(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",X1e(o),Q1e(o,s),J1e(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(w=>{const y=u?c.subscribe(ns.batchCalls(w)):Ai;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),tAe(o,l))throw G4(o,c,s);if(Z1e({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Bg&&eAe(l,r)){const w=a?G4(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(Ai).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function rAe(t,e){return nAe(t,A1e)}function IT(t,e){const n=OU(),[r]=D.useState(()=>new I1e(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(ns.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(Ai)},[r]);if(s.error&&sJ(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function b1(t){const e=rAe({...t,queryKeyHashFn:T1e});return e.queryKey=t.queryKey,e}function Qa(t={}){const e=Fi(t);return D.useSyncExternalStore(n=>A_e(e,{onChange:n}),()=>R4(e),()=>R4(e))}function sAe(t={}){const{address:e,query:n={}}=t,r=Fi(t),s=Qa({config:r}),i=k1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return b1({...n,...i,enabled:o})}function iAe(t={}){const e=Fi(t);return D.useSyncExternalStore(n=>Z_e(e,{onChange:n}),()=>P4(e),()=>P4(e))}function oAe(t={}){const e=Fi(t);return D.useSyncExternalStore(n=>qQ(e,{onChange:n}),()=>O4(e),()=>O4(e))}function aAe(t={}){const{mutation:e}=t,n=Fi(t),r=P1e(n),{mutate:s,mutateAsync:i,...o}=IT({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:oAe({config:n})}}function cAe(t={}){const e=Fi(t);return D.useSyncExternalStore(n=>GQ(e,{onChange:n}),()=>mc(e),()=>mc(e))}function lAe(t={}){const{mutation:e}=t,n=Fi(t),r=O1e(n),{mutate:s,mutateAsync:i,...o}=IT({...e,...r});return{...o,connectors:cAe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function uAe(t={}){const{address:e,query:n={}}=t,r=Fi(t),s=Qa({config:r}),i=M1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return b1({...n,...i,enabled:o})}function dAe(t={}){const e=Fi(t);return tJ.useSyncExternalStoreWithSelector(n=>x_e(e,{onChange:n}),()=>HD(e,t),()=>HD(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function IE(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=Fi(t),a=Qa({config:o}),c=B1e(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return b1({...s,...c,enabled:l,structuralSharing:s.structuralSharing??N1e})}function kU(t={}){const{mutation:e}=t,n=Fi(t),r=j1e(n),{mutate:s,mutateAsync:i,...o}=IT({...e,...r});return{...o,chains:iAe({config:n}),switchChain:s,switchChainAsync:i}}function hAe(t={}){const{query:e={},...n}=t,r=Fi(n),s=OU(),{address:i,connector:o,status:a}=xb({config:r}),c=Qa({config:r}),l=t.connector??o,{queryKey:u,...d}=U1e(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),b1({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function Wv(t={}){const{hash:e,query:n={}}=t,r=Fi(t),s=Qa({config:r}),i=W1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return b1({...n,...i,enabled:o})}function zv(t={}){const{mutation:e}=t,n=Fi(t),r=H1e(n),{mutate:s,mutateAsync:i,...o}=IT({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const bI=sQ({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),Qo=sQ({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),fAe=Kc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),pAe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=fAe({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),[w,y]=D.useState(null),b=Qa(),{switchChain:v}=kU();D.useEffect(()=>{t&&r&&A()},[t,r]);const A=async()=>{if(l(!0),g(null),b!==Qo.id){g(`Please switch to Ethereum mainnet to mint Pixelawbs. Current network: ${b}`),l(!1);return}try{const S=await iK(r);a(S);const O={};S.forEach(P=>{O[P.id]=0}),f(O)}catch(S){g(S.message)}finally{l(!1)}},_=(S,O)=>{f(P=>({...P,[S]:Math.max(0,O)}))},I=async()=>{const S=Object.entries(h).filter(([,O])=>O>0).map(([O,P])=>({id:O,quantity:P}));if(S.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}if(b!==Qo.id){g("Please switch to Ethereum mainnet to mint Pixelawbs");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const O=await oK(r,S);if(console.log("Mint API result:",O),O.success&&O.mintTransaction){console.log("Got mint transaction:",O.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const P=await w.sendTransaction({to:O.mintTransaction.to,value:BigInt(O.mintTransaction.value),data:O.mintTransaction.data});console.log("Transaction sent successfully:",P),alert(`NFT Minted Successfully: Transaction Hash - ${P}`),e()}catch(P){console.error("Transaction sending failed:",P),g("Transaction failed: "+P.message)}}else throw new Error(O.message||"Could not retrieve minting transaction.")}catch(O){console.error("Minting failed:",O),g("Minting failed: "+O.message)}finally{d(!1)}},x=(S,O)=>`${parseFloat(S)} ${O}`,N=()=>{n&&n()};return t?m.jsx(s1,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsxs("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:[p,b!==Qo.id&&m.jsx("div",{style:{marginTop:"10px"},children:m.jsx("button",{onClick:()=>v({chainId:Qo.id}),style:{backgroundColor:"#008000",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Switch to Ethereum"})})]}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(S=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:S.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",x(S.token_price,S.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",S.wallet_limit===4294967295?"Unlimited":S.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:S.wallet_limit===4294967295?999:S.wallet_limit,value:h[S.id]||0,onChange:O=>_(S.id,parseInt(O.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},S.id))]}),m.jsx("button",{onClick:()=>void I(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},pJ=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",gJ=({src:t,alt:e,style:n})=>{const[r,s]=D.useState(t),[i,o]=D.useState(!1),[a,c]=D.useState(0);D.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?m.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):m.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},gAe=Kc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),mAe=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},yAe=({nft:t,onClose:e})=>{const n=gAe(),r=D.useRef(null),s=mAe(t.attributes);return m.jsx(s1,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx(gJ,{src:pJ(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},wAe=Symbol(),q4=Object.getPrototypeOf,c3=new WeakMap,bAe=t=>t&&(c3.has(t)?c3.get(t):q4(t)===Object.prototype||q4(t)===Array.prototype),vAe=t=>bAe(t)&&t[wAe]||null,V4=(t,e=!0)=>{c3.set(t,e)},vI={},sO=t=>typeof t=="object"&&t!==null,th=new WeakMap,Hv=new WeakSet,EAe=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>sO(l)&&!Hv.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return V4(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if(Hv.has(g))V4(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(th.has(g)){const[b,v]=th.get(g);y.value=i(b,v(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!sO(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,O=++a[0])=>{d!==O&&(d=O,h.forEach(P=>P(S,O)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,y.forEach(([O])=>{const P=O[1](S);P>d&&(d=P)})),d),w=S=>(O,P)=>{const F=[...O];F[1]=[S,...F[1]],f(F,P)},y=new Map,b=(S,O)=>{if((vI?"production":void 0)!=="production"&&y.has(S))throw new Error("prop listener already exists");if(h.size){const P=O[3](w(S));y.set(S,[O,P])}else y.set(S,[O])},v=S=>{var O;const P=y.get(S);P&&(y.delete(S),(O=P[1])==null||O.call(P))},A=S=>(h.add(S),h.size===1&&y.forEach(([P,F],q)=>{if((vI?"production":void 0)!=="production"&&F)throw new Error("remove already exists");const B=P[3](w(q));y.set(q,[P,B])}),()=>{h.delete(S),h.size===0&&y.forEach(([P,F],q)=>{F&&(F(),y.set(q,[P]))})}),_=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(_,{deleteProperty(S,O){const P=Reflect.get(S,O);v(O);const F=Reflect.deleteProperty(S,O);return F&&f(["delete",[O],P]),F},set(S,O,P,F){const q=Reflect.has(S,O),B=Reflect.get(S,O,F);if(q&&(t(B,P)||o.has(P)&&t(B,o.get(P))))return!0;v(O),sO(P)&&(P=vAe(P)||P);let T=P;if(P instanceof Promise)P.then(R=>{P.status="fulfilled",P.value=R,f(["resolve",[O],R])}).catch(R=>{P.status="rejected",P.reason=R,f(["reject",[O],R])});else{!th.has(P)&&n(P)&&(T=c(P));const R=!Hv.has(T)&&th.get(T);R&&b(O,R)}return Reflect.set(S,O,T,F),f(["set",[O],P,B]),!0}});o.set(l,x);const N=[_,g,i,A];return th.set(x,N),Reflect.ownKeys(l).forEach(S=>{const O=Object.getOwnPropertyDescriptor(l,S);"value"in O&&(x[S]=l[S],delete O.value,delete O.writable),Object.defineProperty(_,S,O)}),x})=>[c,th,Hv,t,e,n,r,s,i,o,a],[CAe]=EAe();function cr(t={}){return CAe(t)}function hi(t,e,n){const r=th.get(t);(vI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function jC(t,e){const n=th.get(t);(vI?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function jg(t){return Hv.add(t),t}function pi(t,e,n,r){let s=t[e];return hi(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function _Ae(t){const e=cr({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var K4={};const Fe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof K4<"u"?K4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},mJ={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Fe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var AAe=20,SAe=1,Wg=1e6,Y4=1e6,xAe=-7,IAe=21,NAe=!1,v1="[big.js] ",mm=v1+"Invalid ",NT=mm+"decimal places",TAe=mm+"rounding mode",yJ=v1+"Division by zero",kn={},zl=void 0,RAe=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function wJ(){function t(e){var n=this;if(!(n instanceof t))return e===zl?wJ():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(mm+"value");e=e===0&&1/e<0?"-0":String(e)}PAe(n,e)}n.constructor=t}return t.prototype=kn,t.DP=AAe,t.RM=SAe,t.NE=xAe,t.PE=IAe,t.strict=NAe,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function PAe(t,e){var n,r,s;if(!RAe.test(e))throw Error(mm+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function ym(t,e,n,r){var s=t.c;if(n===zl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(TAe);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==zl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==zl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function wm(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}kn.abs=function(){var t=new this.constructor(this);return t.s=1,t};kn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};kn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Wg)throw Error(NT);if(!s[0])throw Error(yJ);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,b=y.c=[],v=0,A=o+(y.e=e.e-t.e)+1;for(y.s=i,i=A<0?0:A,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==zl)&&i--);return!b[0]&&v!=1&&(b.shift(),y.e--,A--),v>A&&ym(y,A,n.RM,g[0]!==zl),y};kn.eq=function(t){return this.cmp(t)===0};kn.gt=function(t){return this.cmp(t)>0};kn.gte=function(t){return this.cmp(t)>-1};kn.lt=function(t){return this.cmp(t)<0};kn.lte=function(t){return this.cmp(t)<1};kn.minus=kn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};kn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(yJ);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};kn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};kn.plus=kn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};kn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-Y4||t>Y4)throw Error(mm+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};kn.prec=function(t,e){if(t!==~~t||t<1||t>Wg)throw Error(mm+"precision");return ym(new this.constructor(this),t,e)};kn.round=function(t,e){if(t===zl)t=0;else if(t!==~~t||t<-Wg||t>Wg)throw Error(NT);return ym(new this.constructor(this),t+this.e+1,e)};kn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(v1+"No square root");i=Math.sqrt(+wm(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return ym(t,(s.DP-=4)+t.e+1,s.RM)};kn.times=kn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};kn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==zl){if(t!==~~t||t<0||t>Wg)throw Error(NT);for(n=ym(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return wm(n,!0,!!r)};kn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==zl){if(t!==~~t||t<0||t>Wg)throw Error(NT);for(n=ym(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return wm(n,!1,!!r)};kn[Symbol.for("nodejs.util.inspect.custom")]=kn.toJSON=kn.toString=function(){var t=this,e=t.constructor;return wm(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};kn.toNumber=function(){var t=+wm(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(v1+"Imprecise conversion");return t};kn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==zl){if(t!==~~t||t<1||t>Wg)throw Error(mm+"precision");for(n=ym(new r(n),t,e);n.c.length<t;)n.c.push(0)}return wm(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};kn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(v1+"valueOf disallowed");return wm(t,t.e<=e.NE||t.e>=e.PE,!0)};var Dl=wJ();const OAe={bigNumber(t){return t?new Dl(t):new Dl(0)},multiply(t,e){if(t===void 0||e===void 0)return new Dl(0);const n=new Dl(t),r=new Dl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},kAe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],DAe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],MAe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],LAe={getERC20Abi:t=>Fe.USDT_CONTRACT_ADDRESSES.includes(t)?MAe:kAe,getSwapAbi:()=>DAe},Dd={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},$t={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function iO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Rt={setItem(t,e){Gv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Gv())return localStorage.getItem(t)||void 0},removeItem(t){Gv()&&localStorage.removeItem(t)},clear(){Gv()&&localStorage.clear()}};function Gv(){return typeof window<"u"&&typeof localStorage<"u"}function Qu(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var Q4={};const oO=(typeof process<"u"&&typeof Q4<"u"?Q4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",bJ=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],UAe="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Bn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:oO,SECURE_SITE_DASHBOARD:`${oO}/dashboard`,SECURE_SITE_FAVICON:`${oO}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Ye={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ye.getActiveNamespace(),e=Ye.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Rt.setItem($t.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Rt.getItem($t.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Rt.removeItem($t.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Rt.setItem($t.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Rt.setItem($t.ACTIVE_CAIP_NETWORK_ID,t),Ye.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Rt.getItem($t.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Rt.removeItem($t.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=iO(t);Rt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ye.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Rt.setItem($t.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Rt.getItem($t.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=iO(t);Rt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Rt.getItem($t.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=iO(t);return Rt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{Rt.setItem($t.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Rt.getItem($t.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Rt.removeItem($t.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Rt.getItem($t.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Rt.getItem($t.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Rt.setItem($t.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Rt.getItem($t.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Rt.getItem($t.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Rt.setItem($t.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ye.getConnectedNamespaces();e.includes(t)||(e.push(t),Ye.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ye.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Ye.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Rt.getItem($t.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Rt.setItem($t.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Rt.removeItem($t.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Rt.getItem($t.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ye.getBalanceCache();Rt.setItem($t.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Ye.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Ye.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ye.getBalanceCache();e[t.caipAddress]=t,Rt.setItem($t.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Rt.getItem($t.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ye.getBalanceCache();Rt.setItem($t.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Ye.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Ye.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ye.getNativeBalanceCache();e[t.caipAddress]=t,Rt.setItem($t.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Rt.getItem($t.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Ye.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Ye.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ye.getEnsCache();e[t.address]=t,Rt.setItem($t.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ye.getEnsCache();Rt.setItem($t.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Rt.getItem($t.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Ye.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Ye.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ye.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Rt.setItem($t.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ye.getIdentityCache();Rt.setItem($t.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Rt.removeItem($t.PORTFOLIO_CACHE),Rt.removeItem($t.NATIVE_BALANCE_CACHE),Rt.removeItem($t.ENS_CACHE),Rt.removeItem($t.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Rt.setItem($t.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Rt.getItem($t.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Ye.getConnections(),[e]:t};Rt.setItem($t.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Rt.getItem($t.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},ct={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ct.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Bn.TEN_SEC_MS:!0},isAllowedRetry(t,e=Bn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ct.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Bn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ct.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ct.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ye.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ct.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Fe.W3M_API_URL},getBlockchainApiUrl(){return Fe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Fe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Bn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Fe.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function gv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let E1=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await gv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await gv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await gv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await gv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await gv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const $Ae={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Bn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ct.isTelegram()){if(ct.isIos())return t.filter(e=>e!=="google");if(ct.isMac())return t.filter(e=>e!=="x");if(ct.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},gt=cr({features:Bn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Bn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),be={state:gt,subscribeKey(t,e){return pi(gt,t,e)},setOptions(t){Object.assign(gt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...gt.remoteFeatures,...t};gt.remoteFeatures=e,(n=gt.remoteFeatures)!=null&&n.socials&&(gt.remoteFeatures.socials=$Ae.filterSocialsByPlatform(gt.remoteFeatures.socials))},setFeatures(t){if(!t)return;gt.features||(gt.features=Bn.DEFAULT_FEATURES);const e={...gt.features,...t};gt.features=e},setProjectId(t){gt.projectId=t},setCustomRpcUrls(t){gt.customRpcUrls=t},setAllWallets(t){gt.allWallets=t},setIncludeWalletIds(t){gt.includeWalletIds=t},setExcludeWalletIds(t){gt.excludeWalletIds=t},setFeaturedWalletIds(t){gt.featuredWalletIds=t},setTokens(t){gt.tokens=t},setTermsConditionsUrl(t){gt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){gt.privacyPolicyUrl=t},setCustomWallets(t){gt.customWallets=t},setIsSiweEnabled(t){gt.isSiweEnabled=t},setIsUniversalProvider(t){gt.isUniversalProvider=t},setSdkVersion(t){gt.sdkVersion=t},setMetadata(t){gt.metadata=t},setDisableAppend(t){gt.disableAppend=t},setEIP6963Enabled(t){gt.enableEIP6963=t},setDebug(t){gt.debug=t},setEnableWalletConnect(t){gt.enableWalletConnect=t},setEnableWalletGuide(t){gt.enableWalletGuide=t},setEnableAuthLogger(t){gt.enableAuthLogger=t},setEnableWallets(t){gt.enableWallets=t},setPreferUniversalLinks(t){gt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){gt.hasMultipleAddresses=t},setSIWX(t){gt.siwx=t},setConnectMethodsOrder(t){gt.features={...gt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){gt.features={...gt.features,walletFeaturesOrder:t}},setSocialsOrder(t){gt.remoteFeatures={...gt.remoteFeatures,socials:t}},setCollapseWallets(t){gt.features={...gt.features,collapseWallets:t}},setEnableEmbedded(t){gt.enableEmbedded=t},setAllowUnsupportedChain(t){gt.allowUnsupportedChain=t},setManualWCControl(t){gt.manualWCControl=t},setEnableNetworkSwitch(t){gt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(gt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){gt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return gt.universalProviderConfigOverride},getSnapshot(){return jC(gt)}},BAe=Object.freeze({enabled:!0,events:[]}),FAe=new E1({baseUrl:ct.getAnalyticsUrl(),clientId:null}),jAe=5,WAe=60*1e3,Md=cr({...BAe}),zAe={state:Md,subscribeKey(t,e){return pi(Md,t,e)},async sendError(t,e){if(!Md.enabled)return;const n=Date.now();if(Md.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<WAe}).length>=jAe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Md.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=be.state;await FAe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ct.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Md.enabled=!0},disable(){Md.enabled=!1},clearEvents(){Md.events=[]}};let l3=class u3 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,u3.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,u3):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function J4(t,e){const n=t instanceof l3?t:new l3(t instanceof Error?t.message:String(t),e,t);throw zAe.sendError(n,n.category),n}function ua(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return J4(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return J4(a,e)}},n[r]=i}else n[r]=s}),n}const Il={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},HAe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Il.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Il.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Il.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Il.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Fe.CHAIN.SOLANA&&t===Il.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Il.COINBASE.url}/dapp?cb_url=${r}`)}},Ro=cr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),GAe={state:Ro,subscribeNetworkImages(t){return hi(Ro.networkImages,()=>t(Ro.networkImages))},subscribeKey(t,e){return pi(Ro,t,e)},subscribe(t){return hi(Ro,()=>t(Ro))},setWalletImage(t,e){Ro.walletImages[t]=e},setNetworkImage(t,e){Ro.networkImages[t]=e},setChainImage(t,e){Ro.chainImages[t]=e},setConnectorImage(t,e){Ro.connectorImages={...Ro.connectorImages,[t]:e}},setTokenImage(t,e){Ro.tokenImages[t]=e},setCurrencyImage(t,e){Ro.currencyImages[t]=e}},Ic=ua(GAe),qAe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},aO=cr({networkImagePromises:{}}),vJ={async fetchWalletImage(t){if(t)return await lt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(aO.networkImagePromises[t]||(aO.networkImagePromises[t]=lt._fetchNetworkImage(t)),await aO.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Ic.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Ic.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Ic.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Ic.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Ic.state.connectorImages[t.imageId]},getChainImage(t){return Ic.state.networkImages[qAe[t]]}},Ld=cr({message:"",variant:"info",open:!1}),VAe={state:Ld,subscribeKey(t,e){return pi(Ld,t,e)},open(t,e){const{debug:n}=be.state,{shortMessage:r,longMessage:s}=t;n&&(Ld.message=r,Ld.variant=e,Ld.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Ld.open=!1,Ld.message="",Ld.variant="info"}},Ml=ua(VAe),KAe=ct.getAnalyticsUrl(),YAe=new E1({baseUrl:KAe,clientId:null}),QAe=["MODAL_CREATED"],uu=cr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),gr={state:uu,subscribe(t){return hi(uu,()=>t(uu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=be.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ke.state.address;if(QAe.includes(t.data.event)||typeof window>"u")return;await YAe.post({path:"/e",params:gr.getSdkProperties(),body:{eventId:ct.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),uu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Fe.HTTP_STATUS_CODES.FORBIDDEN&&!uu.reportedErrors.FORBIDDEN&&(Ml.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Gv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),uu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;uu.timestamp=Date.now(),uu.data=t,(e=be.state.features)!=null&&e.analytics&&gr._sendAnalyticsEvent(uu)}},JAe=ct.getApiUrl(),Gi=new E1({baseUrl:JAe,clientId:null}),ZAe=40,Z4=4,XAe=20,Bt=cr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),lt={state:Bt,subscribeKey(t,e){return pi(Bt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=be.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return be.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Gi.baseUrl}/getWalletImage/${t}`,n=await Gi.getBlob({path:e,params:lt._getSdkProperties()});Ic.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Gi.baseUrl}/public/getAssetImage/${t}`,n=await Gi.getBlob({path:e,params:lt._getSdkProperties()});Ic.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Gi.baseUrl}/public/getAssetImage/${t}`,n=await Gi.getBlob({path:e,params:lt._getSdkProperties()});Ic.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Gi.baseUrl}/public/getCurrencyImage/${t}`,n=await Gi.getBlob({path:e,params:lt._getSdkProperties()});Ic.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Gi.baseUrl}/public/getTokenImage/${t}`,n=await Gi.getBlob({path:e,params:lt._getSdkProperties()});Ic.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ct.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Il.COINBASE.id?!0:H.state.activeChain==="solana"&&(n.id===Il.SOLFLARE.id||n.id===Il.PHANTOM.id)):t},async fetchProjectConfig(){return(await Gi.get({path:"/appkit/v1/config",params:lt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Gi.get({path:"/projects/v1/origins",params:lt._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=H.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!vJ.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>lt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Be.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>lt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>lt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>lt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];lt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Il).map(o=>o.id));const r=await Gi.get({path:"/getWallets",params:{...lt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:lt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=be.state;if(t!=null&&t.length){const e={...lt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??Z4,include:t},{data:n}=await lt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>lt._fetchWalletImage(i))),Bt.featured=r,Bt.allFeatured=r}},async fetchRecommendedWallets(){try{Bt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=be.state,r=[...e??[],...n??[]].filter(Boolean),s=H.getRequestedCaipNetworkIds().join(","),i={page:1,entries:Z4,include:t,exclude:r,chains:s},{data:o,count:a}=await lt.fetchWallets(i),c=Ye.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>lt._fetchWalletImage(d))),Bt.recommended=o,Bt.allRecommended=o,Bt.count=a??0}catch{}finally{Bt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=be.state,s=H.getRequestedCaipNetworkIds().join(","),i=[...Bt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:ZAe,include:e,exclude:i,chains:s},{data:a,count:c}=await lt.fetchWallets(o),l=a.slice(0,XAe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>lt._fetchWalletImage(u))),Bt.wallets=ct.uniqueBy([...Bt.wallets,...lt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Bt.count=c>Bt.count?c:Bt.count,Bt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await lt.fetchWallets(e);n&&n.forEach(r=>{Bt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=be.state,s=H.getRequestedCaipNetworkIds().join(",");Bt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await lt.fetchWallets(i);gr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>lt._fetchWalletImage(c)),ct.wait(300)]),Bt.search=lt._filterOutExtensions(o)},initPromise(t,e){const n=Bt.promises[t];return n||(Bt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&lt.initPromise("connectorImages",lt.fetchConnectorImages),e&&lt.initPromise("featuredWallets",lt.fetchFeaturedWallets),n&&lt.initPromise("recommendedWallets",lt.fetchRecommendedWallets),r&&lt.initPromise("networkImages",lt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=be.state.features)!=null&&t.analytics&&lt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Gi.get({path:"/getAnalyticsConfig",params:lt._getSdkProperties()});be.setFeatures({analytics:t})}catch{be.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Bt.featured=Bt.allFeatured,Bt.recommended=Bt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Bt.featured=Bt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Bt.recommended=Bt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Bt.filteredWallets=Bt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Bt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Bt.featured=Bt.allFeatured,Bt.recommended=Bt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Bt.featured=Bt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Bt.recommended=Bt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Bt.filteredWallets=Bt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Mn=cr({view:"Connect",history:["Connect"],transactionStack:[]}),eSe={state:Mn,subscribeKey(t,e){return pi(Mn,t,e)},pushTransactionStack(t){Mn.transactionStack.push(t)},popTransactionStack(t){const e=Mn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),qt.goBack();break;case"cancel":s==null||s(),qt.goBack();break}},push(t,e){t!==Mn.view&&(Mn.view=t,Mn.history.push(t),Mn.data=e)},reset(t,e){Mn.view=t,Mn.history=[t],Mn.data=e},replace(t,e){Mn.history.at(-1)===t||(Mn.view=t,Mn.history[Mn.history.length-1]=t,Mn.data=e)},goBack(){var r;const t=H.state.activeCaipAddress,e=qt.state.view==="ConnectingFarcaster",n=!t&&e;if(Mn.history.length>1){Mn.history.pop();const[s]=Mn.history.slice(-1);s&&(t&&s==="Connect"?Mn.view="Account":Mn.view=s)}else vs.close();(r=Mn.data)!=null&&r.wallet&&(Mn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ke.setFarcasterUrl(void 0,H.state.activeChain);const a=Be.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=jC(be.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Mn.history.length>1){Mn.history=Mn.history.slice(0,t+1);const[e]=Mn.history.slice(-1);e&&(Mn.view=e)}},goBackOrCloseModal(){qt.state.history.length>1?qt.goBack():vs.close()}},qt=ua(eSe),du=cr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),d3={state:du,subscribe(t){return hi(du,()=>t(du))},setThemeMode(t){du.themeMode=t;try{const e=Be.getAuthConnector();if(e){const n=d3.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Qu(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){du.themeVariables={...du.themeVariables,...t};try{const e=Be.getAuthConnector();if(e){const n=d3.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Qu(du.themeVariables,du.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return jC(du)}},co=ua(d3),EJ={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},fn=cr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...EJ},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),tSe={state:fn,subscribe(t){return hi(fn,()=>{t(fn)})},subscribeKey(t,e){return pi(fn,t,e)},initialize(t){t.forEach(e=>{const n=Ye.getConnectedConnectorId(e);n&&Be.setConnectorId(n,e)})},setActiveConnector(t){t&&(fn.activeConnector=jg(t))},setConnectors(t){t.filter(s=>!fn.allConnectors.some(i=>i.id===s.id&&Be.getConnectorName(i.name)===Be.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&fn.allConnectors.push(jg(s))});const n=Be.getEnabledNamespaces(),r=Be.getEnabledConnectors(n);fn.connectors=Be.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(fn.filterByNamespaceMap).forEach(e=>{fn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{fn.filterByNamespaceMap[e]=!0}),Be.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){fn.filterByNamespaceMap[t]=e,Be.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Be.getEnabledNamespaces(),e=Be.getEnabledConnectors(t),n=Be.areAllNamespacesEnabled();fn.connectors=Be.mergeMultiChainConnectors(e),n?lt.clearFilterByNamespaces():lt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(fn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return fn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(fn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Be.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Fe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Be.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Fe.CONNECTOR_ID.AUTH){const s=t,i=jC(be.state),o=co.getSnapshot().themeMode,a=co.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Qu(a,o)}),Be.setConnectors([t])}else Be.setConnectors([t])},getAuthConnector(t){var r;const e=t||H.state.activeChain,n=fn.connectors.find(s=>s.id===Fe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return fn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return fn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return fn.allConnectors.filter(r=>r.chain===H.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=jC(be.state),r=co.getSnapshot().themeMode,s=co.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Qu(s,r)})},getConnectorsByNamespace(t){const e=fn.allConnectors.filter(n=>n.chain===t);return Be.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Be.getConnector(t.id,t.rdns),n=H.state.activeChain;HAe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?qt.push("ConnectingExternal",{connector:e}):qt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Be.getConnectorsByNamespace(t):Be.mergeMultiChainConnectors(fn.allConnectors)},setFilterByNamespace(t){fn.filterByNamespace=t,fn.connectors=Be.getConnectors(t),lt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(fn.activeConnectorIds={...fn.activeConnectorIds,[e]:t},Ye.setConnectedConnectorId(e,t))},removeConnectorId(t){fn.activeConnectorIds={...fn.activeConnectorIds,[t]:void 0},Ye.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return fn.activeConnectorIds[t]},isConnected(t){return t?!!fn.activeConnectorIds[t]:Object.values(fn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){fn.activeConnectorIds={...EJ}}},Be=ua(tSe);var Bw={};const nSe="https://secure.walletconnect.org/sdk",rSe=(typeof process<"u"&&typeof Bw<"u"?Bw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||nSe,sSe=(typeof process<"u"&&typeof Bw<"u"?Bw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",iSe=(typeof process<"u"&&typeof Bw<"u"?Bw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",qe={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Hs={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},ap=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Yr=cr({...ap}),oSe={state:Yr,subscribeKey(t,e){return pi(Yr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ct.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Yr.message=ap.message,Yr.variant=ap.variant,Yr.svg=ap.svg,Yr.open=ap.open,Yr.autoClose=ap.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ap.autoClose}){Yr.open?(Yr.open=!1,setTimeout(()=>{Yr.message=t,Yr.variant=n,Yr.svg=e,Yr.open=!0,Yr.autoClose=r},150)):(Yr.message=t,Yr.variant=n,Yr.svg=e,Yr.open=!0,Yr.autoClose=r)}},Oc=oSe,Kn=cr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),aSe={state:Kn,subscribe(t){return hi(Kn,()=>t(Kn))},setLastNetworkInView(t){Kn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Kn.loading=!0;try{const s=await wt.fetchTransactions({account:t,cursor:Kn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=qv.filterSpamTransactions(s.data),o=qv.filterByConnectedChain(i),a=[...Kn.transactions,...o];Kn.loading=!1,e==="coinbase"?Kn.coinbaseTransactions=qv.groupTransactionsByYearAndMonth(Kn.coinbaseTransactions,s.data):(Kn.transactions=a,Kn.transactionsByYear=qv.groupTransactionsByYearAndMonth(Kn.transactionsByYear,o)),Kn.empty=a.length===0,Kn.next=s.next?s.next:void 0}catch{const i=H.state.activeChain;gr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:be.state.projectId,cursor:Kn.next,isSmartAccount:((r=Ke.state.preferredAccountTypes)==null?void 0:r[i])===Hs.ACCOUNT_TYPES.SMART_ACCOUNT}}),Oc.showError("Failed to fetch transactions"),Kn.loading=!1,Kn.empty=!0,Kn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Kn.next=void 0},resetTransactions(){Kn.transactions=[],Kn.transactionsByYear={},Kn.lastNetworkInView=void 0,Kn.loading=!1,Kn.empty=!1,Kn.next=void 0}},qv=ua(aSe,"API_ERROR"),zn=cr({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Kf;const cSe={state:zn,subscribeKey(t,e){return pi(zn,t,e)},_getClient(){return zn._client},setClient(t){zn._client=jg(t)},async connectWalletConnect(){var t,e,n,r;if(ct.isTelegram()||ct.isSafari()&&ct.isIos()){if(Kf){await Kf,Kf=void 0;return}if(!ct.isPairingExpired(zn==null?void 0:zn.wcPairingExpiry)){const s=zn.wcUri;zn.wcUri=s;return}Kf=(e=(t=bt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),bt.state.status="connecting",await Kf,Kf=void 0,zn.wcPairingExpiry=void 0,bt.state.status="connected"}else await((r=(n=bt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=bt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&H.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=bt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||H.state.activeChain;e&&Be.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;vs.setLoading(!0,H.state.activeChain);const n=Be.getAuthConnector();n&&(Ke.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Ye.setPreferredAccountTypes(Ke.state.preferredAccountTypes??{[e]:t}),await bt.reconnectExternal(n),vs.setLoading(!1,H.state.activeChain),gr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=bt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=bt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=bt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=bt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=bt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=bt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=bt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=bt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=bt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=bt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=bt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=bt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){zn.wcUri=void 0,zn.wcPairingExpiry=void 0,zn.wcLinking=void 0,zn.recentWallet=void 0,zn.status="disconnected",qv.resetTransactions(),Ye.deleteWalletConnectDeepLink()},resetUri(){zn.wcUri=void 0,zn.wcPairingExpiry=void 0,Kf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=bt.state;t&&Ye.setWalletConnectDeepLink(t),e&&Ye.setAppKitRecent(e),gr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=qt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){zn.wcBasic=t},setUri(t){zn.wcUri=t,zn.wcPairingExpiry=ct.getPairingExpiry()},setWcLinking(t){zn.wcLinking=t},setWcError(t){zn.wcError=t,zn.buffering=!1},setRecentWallet(t){zn.recentWallet=t},setBuffering(t){zn.buffering=t},setStatus(t){zn.status=t},async disconnect(t){var e;try{await((e=bt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new l3("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){zn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(Be.state.activeConnectorIds[n]===t.connectorId){const i=H.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Ke.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=Be.getConnector(t.connectorId);i?bt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},bt=ua(cSe),Vm=cr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Hl={state:Vm,subscribe(t){return hi(Vm,()=>t(Vm))},subscribeOpen(t){return pi(Vm,"open",t)},set(t){Object.assign(Vm,{...Vm,...t})}},cO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return hm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},X4={async getMyTokensWithBalance(t){const e=Ke.state.address,n=H.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await wt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=cO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await bt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await bt.walletGetAssets({account:t,chainFilter:[s]});return cO.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>cO.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:H.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Rn=cr({tokenBalances:[],loading:!1}),lSe={state:Rn,subscribe(t){return hi(Rn,()=>t(Rn))},subscribeKey(t,e){return pi(Rn,t,e)},setToken(t){t&&(Rn.token=jg(t))},setTokenAmount(t){Rn.sendTokenAmount=t},setReceiverAddress(t){Rn.receiverAddress=t},setReceiverProfileImageUrl(t){Rn.receiverProfileImageUrl=t},setReceiverProfileName(t){Rn.receiverProfileName=t},setNetworkBalanceInUsd(t){Rn.networkBalanceInUSD=t},setLoading(t){Rn.loading=t},async sendToken(){var t;try{switch(Cn.setLoading(!0),(t=H.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Cn.sendEvmToken();return;case"solana":await Cn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Cn.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=H.state.activeChain,e=(n=Ke.state.preferredAccountTypes)==null?void 0:n[t];if(!Cn.state.sendTokenAmount||!Cn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Cn.state.token)throw new Error("A token is required");(r=Cn.state.token)!=null&&r.address?(gr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Hs.ACCOUNT_TYPES.SMART_ACCOUNT,token:Cn.state.token.address,amount:Cn.state.sendTokenAmount,network:((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Cn.sendERC20Token({receiverAddress:Cn.state.receiverAddress,tokenAddress:Cn.state.token.address,sendTokenAmount:Cn.state.sendTokenAmount,decimals:Cn.state.token.quantity.decimals})):(gr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Hs.ACCOUNT_TYPES.SMART_ACCOUNT,token:Cn.state.token.symbol||"",amount:Cn.state.sendTokenAmount,network:((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Cn.sendNativeToken({receiverAddress:Cn.state.receiverAddress,sendTokenAmount:Cn.state.sendTokenAmount,decimals:Cn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Rn.loading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?ct.getPlainAddress(r):void 0;if(Rn.lastRetry&&!ct.isAllowedRetry(Rn.lastRetry,30*Bn.ONE_SEC_MS))return Rn.loading=!1,[];try{if(s&&e&&n){const a=await X4.getMyTokensWithBalance();return Rn.tokenBalances=a,Rn.lastRetry=void 0,a}}catch(a){Rn.lastRetry=Date.now(),t==null||t(a),Oc.showError("Token Balance Unavailable")}finally{Rn.loading=!1}return[]},fetchNetworkBalance(){if(Rn.tokenBalances.length===0)return;const t=X4.mapBalancesToSwapTokens(Rn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===H.getActiveNetworkTokenAddress());e&&(Rn.networkBalanceInUSD=e?OAe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;qt.pushTransactionStack({});const e=t.receiverAddress,n=Ke.state.address,r=bt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await bt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),gr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ke.state.preferredAccountTypes)==null?void 0:i.eip155)===Hs.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Cn.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=bt._getClient())==null||c.updateBalance("eip155"),Cn.resetSend()},async sendERC20Token(t){qt.pushTransactionStack({onSuccess(){qt.replace("Account")}});const e=bt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ke.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ct.getPlainAddress(t.tokenAddress);await bt.writeContract({fromAddress:Ke.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:LAe.getERC20Abi(n),chainNamespace:"eip155"}),Cn.resetSend()}},async sendSolanaToken(){var t;if(!Cn.state.sendTokenAmount||!Cn.state.receiverAddress)throw new Error("An amount and receiver address are required");qt.pushTransactionStack({onSuccess(){qt.replace("Account")}}),await bt.sendTransaction({chainNamespace:"solana",to:Cn.state.receiverAddress,value:Cn.state.sendTokenAmount}),(t=bt._getClient())==null||t.updateBalance("solana"),Cn.resetSend()},resetSend(){Rn.token=void 0,Rn.sendTokenAmount=void 0,Rn.receiverAddress=void 0,Rn.receiverProfileImageUrl=void 0,Rn.receiverProfileName=void 0,Rn.loading=!1,Rn.tokenBalances=[]}},Cn=ua(lSe),lO={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},jA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Oe=cr({chains:_Ae(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),uSe={state:Oe,subscribe(t){return hi(Oe,()=>{t(Oe)})},subscribeKey(t,e){return pi(Oe,t,e)},subscribeChainProp(t,e,n){let r;return hi(Oe.chains,()=>{var i;const s=n||Oe.activeChain;if(s){const o=(i=Oe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Ye.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=be.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Oe.noAdapters=!0),Oe.noAdapters||(Oe.activeChain=a==null?void 0:a.namespace,Oe.activeCaipNetwork=i,H.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Oe.activeChain&&Hl.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);H.state.chains.set(u,{namespace:u,networkState:cr({...jA,caipNetwork:d==null?void 0:d[0]}),accountState:cr(lO),caipNetworks:d??[],...n}),H.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Oe.activeChain===t){const r=Array.from(Oe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&H.setActiveCaipNetwork(s)}}Oe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Oe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...jA,caipNetwork:r[0]},accountState:lO,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),H.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Oe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Oe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),H.setRequestedCaipNetworks(r,t.chainNamespace),Be.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Oe.chains.get(t);if(n){const o=((r=Oe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&H.setActiveCaipNetwork(n.caipNetworks[0]),Oe.chains.set(t,{...n,caipNetworks:a}),H.setRequestedCaipNetworks(a||[],t),a.length===0&&Be.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Oe.chains.get(t);n&&(n.networkState={...n.networkState||jA,...e},Oe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Oe.chains.get(t);if(r){const s={...r.accountState||lO,...e};Oe.chains.set(t,{...r,accountState:s}),(Oe.chains.size===1||Oe.activeChain===t)&&(e.caipAddress&&(Oe.activeCaipAddress=e.caipAddress),Ke.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Oe.chains.get(t);if(n){const r={...n.networkState||jA,...e};Oe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){H.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Be.removeConnectorId(n)},setActiveNamespace(t){var r,s;Oe.activeChain=t;const e=t?Oe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Oe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Oe.activeCaipNetwork=n,H.setChainNetworkData(t,{caipNetwork:n}),Ye.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Hl.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Oe.activeChain!==t.chainNamespace&&H.setIsSwitchingNamespace(!0);const e=Oe.chains.get(t.chainNamespace);Oe.activeChain=t.chainNamespace,Oe.activeCaipNetwork=t,H.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Oe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Oe.activeCaipAddress=void 0,H.setAccountProp("caipAddress",Oe.activeCaipAddress,t.chainNamespace),e&&Ke.replaceState(e.accountState),Cn.resetSend(),Hl.set({activeChain:Oe.activeChain,selectedNetworkId:(i=Oe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Ye.setActiveCaipNetworkId(t.caipNetworkId),!H.checkIfSupportedNetwork(t.chainNamespace)&&be.state.enableNetworkSwitch&&!be.state.allowUnsupportedChain&&!bt.state.wcBasic&&H.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Oe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==H.state.activeChain,n=(s=H.getNetworkData(t))==null?void 0:s.caipNetwork,r=H.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await H.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=H.state.chains.get(H.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Oe.activeCaipNetwork)==null?void 0:o.id)})),r=H.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&vs.close()}catch{qt.goBack()}gr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Oe.activeChain,n=Oe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Oe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Oe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Oe.activeChain;if(e&&(n=e),!n)return;const r=(s=Oe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Oe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Oe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ct.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Oe.chains.forEach(e=>{const n=H.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){H.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=H.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Be.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Oe.chains.forEach(e=>{const n=H.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Oe.activeCaipNetwork},getActiveCaipAddress(){return Oe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Oe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=H.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());H.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Oe.activeCaipNetwork,r=H.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Oe.activeChain)return!0;const e=H.getRequestedCaipNetworks(Oe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){H.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=mJ.caipNetworkIdToNumber((r=Oe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Oe.activeChain;if(!e||!t)return!1;const n=H.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=Oe.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Oe.activeCaipNetwork)==null?void 0:s.id)||1,n=Bn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){vs.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Oe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Bn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){H.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Oe.activeCaipAddress=void 0,H.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Be.removeConnectorId(e)},setIsSwitchingNamespace(t){Oe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Oe.chains.forEach(s=>{Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Oe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=H.state.chains.get(t))==null?void 0:e.accountState:Ke.state},getNetworkData(t){var n;const e=t||Oe.activeChain;if(e)return(n=H.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=H.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Be.state.filterByNamespace;return(t?[Oe.chains.get(t)]:Array.from(Oe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?H.getRequestedCaipNetworks(t):H.getAllRequestedCaipNetworks()}},H=ua(uSe),dSe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},CJ=ct.getBlockchainApiUrl(),qi=cr({clientId:null,api:new E1({baseUrl:CJ,clientId:null}),supportedChains:{http:[],ws:[]}}),wt={state:qi,async get(t){const{st:e,sv:n}=wt.getSdkProperties(),r=be.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return qi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=be.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{qi.supportedChains.http.length||await wt.getSupportedNetworks()}catch{return!1}return qi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await wt.get({path:"v1/supported-chains"});return qi.supportedChains=t,t}catch{return qi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await wt.isNetworkSupported(e))return{avatar:"",name:""};const r=Ye.getIdentityFromCacheForAddress(t);if(r)return r;const s=await wt.get({path:`/v1/identity/${t}`,params:{sender:H.state.activeCaipAddress?ct.getPlainAddress(H.state.activeCaipAddress):void 0}});return Ye.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await wt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?wt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await wt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?wt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:be.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await wt.isNetworkSupported((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?wt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=wt.getSdkProperties();if(!await wt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return wt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await wt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return qi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Bn.CONVERT_SLIPPAGE_TOLERANCE},projectId:be.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=wt.getSdkProperties();if(!await wt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return wt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=wt.getSdkProperties();if(!await wt.isNetworkSupported((l=H.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Oc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ye.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await wt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Ye.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ke.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await wt.isNetworkSupported((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?qi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await wt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await qi.api.post({path:"/v1/generators/onrampurl",params:{projectId:be.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await wt.isNetworkSupported((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await wt.get({path:"/v1/onramp/options"})}catch{return dSe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await wt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await qi.api.post({path:"/v1/onramp/quote",params:{projectId:be.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await wt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?wt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await wt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?qi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:be.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){qi.clientId=t,qi.api=new E1({baseUrl:CJ,clientId:t})}},ha=cr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),hSe={state:ha,replaceState(t){t&&Object.assign(ha,jg(t))},subscribe(t){return H.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return H.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){H.setAccountProp("status",t,e)},getCaipAddress(t){return H.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ct.getPlainAddress(t):void 0;e===H.state.activeChain&&(H.state.activeCaipAddress=t),H.setAccountProp("caipAddress",t,e),H.setAccountProp("address",n,e)},setBalance(t,e,n){H.setAccountProp("balance",t,n),H.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){H.setAccountProp("profileName",t,e)},setProfileImage(t,e){H.setAccountProp("profileImage",t,e)},setUser(t,e){H.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){H.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){H.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){H.setAccountProp("currentTab",t,H.state.activeChain)},setTokenBalance(t,e){t&&H.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){H.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){H.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=H.getAccountProp("addressLabels",n)||new Map;r.set(t,e),H.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=H.getAccountProp("addressLabels",e)||new Map;n.delete(t),H.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){H.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){H.setAccountProp("preferredAccountTypes",{...ha.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){ha.preferredAccountTypes=t},setSocialProvider(t,e){t&&H.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){H.setAccountProp("socialWindow",t?jg(t):void 0,e)},setFarcasterUrl(t,e){H.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;ha.balanceLoading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?ct.getPlainAddress(r):void 0;if(ha.lastRetry&&!ct.isAllowedRetry(ha.lastRetry,30*Bn.ONE_SEC_MS))return ha.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await wt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Ke.setTokenBalance(c,n),ha.lastRetry=void 0,ha.balanceLoading=!1,c}}catch(a){ha.lastRetry=Date.now(),t==null||t(a),Oc.showError("Token Balance Unavailable")}finally{ha.balanceLoading=!1}return[]},resetAccount(t){H.resetAccount(t)}},Ke=ua(hSe),fSe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=H.state.activeCaipNetwork,r=qt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ke.getCaipAddress(H.state.activeChain),o=t.chainNamespace!==H.state.activeChain,a=Ke.getCaipAddress(t.chainNamespace),l=Be.getConnectorId(H.state.activeChain)===Fe.CONNECTOR_ID.AUTH,u=Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?qt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?qt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):qt.push("SwitchNetwork",{...r,network:t})}},Vi=cr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),pSe={state:Vi,subscribe(t){return hi(Vi,()=>t(Vi))},subscribeKey(t,e){return pi(Vi,t,e)},async open(t){var o,a;const e=Ke.state.status==="connected",n=t==null?void 0:t.namespace,r=H.state.activeChain,s=n&&n!==r,i=(o=H.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(bt.state.wcBasic?lt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await lt.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Be.setFilterByNamespace(t==null?void 0:t.namespace),vs.setLoading(!0,n),n&&s){const c=((a=H.getNetworkData(n))==null?void 0:a.caipNetwork)||H.getRequestedCaipNetworks(n)[0];c&&fSe.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=H.state.noAdapters;be.state.manualWCControl||c&&!i?ct.isMobile()?qt.reset("AllWallets"):qt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?qt.reset(t.view,t.data):i?qt.reset("Account"):qt.reset("Connect")}Vi.open=!0,Hl.set({open:!0}),gr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=be.state.enableEmbedded,e=!!H.state.activeCaipAddress;Vi.open&&gr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Vi.open=!1,qt.reset("Connect"),vs.clearLoading(),t?e?qt.replace("Account"):qt.push("Connect"):Hl.set({open:!1}),bt.resetUri()},setLoading(t,e){e&&Vi.loadingNamespaceMap.set(e,t),Vi.loading=t,Hl.set({loading:t})},clearLoading(){Vi.loadingNamespaceMap.clear(),Vi.loading=!1},shake(){Vi.shake||(Vi.shake=!0,setTimeout(()=>{Vi.shake=!1},500))}},vs=ua(pSe),NE={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},h3={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},gSe={providers:bJ,selectedProvider:null,error:null,purchaseCurrency:NE,paymentCurrency:h3,purchaseCurrencies:[NE],paymentCurrencies:[],quotesLoading:!1},un=cr(gSe),mSe={state:un,subscribe(t){return hi(un,()=>t(un))},subscribeKey(t,e){return pi(un,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=H.state.activeChain===Fe.CHAIN.SOLANA?"SOL":"USDC",n=Ke.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",UAe),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",be.state.projectId),un.selectedProvider={...t,url:r.toString()}}else un.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=bJ.filter(r=>e.includes(r.name));un.providers=n}else un.providers=[]},setPurchaseCurrency(t){un.purchaseCurrency=t},setPaymentCurrency(t){un.paymentCurrency=t},setPurchaseAmount(t){f3.state.purchaseAmount=t},setPaymentAmount(t){f3.state.paymentAmount=t},async getAvailableCurrencies(){const t=await wt.getOnrampOptions();un.purchaseCurrencies=t.purchaseCurrencies,un.paymentCurrencies=t.paymentCurrencies,un.paymentCurrency=t.paymentCurrencies[0]||h3,un.purchaseCurrency=t.purchaseCurrencies[0]||NE,await lt.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await lt.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;un.quotesLoading=!0;try{const n=await wt.getOnrampQuote({purchaseCurrency:un.purchaseCurrency,paymentCurrency:un.paymentCurrency,amount:((t=un.paymentAmount)==null?void 0:t.toString())||"0",network:(e=un.purchaseCurrency)==null?void 0:e.symbol});return un.quotesLoading=!1,un.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return un.error=n.message,un.quotesLoading=!1,null}finally{un.quotesLoading=!1}},resetState(){un.selectedProvider=null,un.error=null,un.purchaseCurrency=NE,un.paymentCurrency=h3,un.purchaseCurrencies=[NE],un.paymentCurrencies=[],un.paymentAmount=void 0,un.purchaseAmount=void 0,un.quotesLoading=!1}},f3=ua(mSe),eF=2147483648,ySe={convertEVMChainIdToCoinType(t){if(t>=eF)throw new Error("Invalid chainId");return(eF|t)>>>0}},fa=cr({suggestions:[],loading:!1}),wSe={state:fa,subscribe(t){return hi(fa,()=>t(fa))},subscribeKey(t,e){return pi(fa,t,e)},async resolveName(t){var e,n;try{return await wt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await wt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{fa.loading=!0,fa.suggestions=[];const e=await wt.getEnsNameSuggestions(t);return fa.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],fa.suggestions}catch(e){const n=TE.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{fa.loading=!1}},async getNamesForAddress(t){try{if(!H.state.activeCaipNetwork)return[];const n=Ye.getEnsFromCacheForAddress(t);if(n)return n;const r=await wt.reverseLookupEnsName({address:t});return Ye.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=TE.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=H.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ke.state.address,r=Be.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");fa.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});qt.pushTransactionStack({onCancel(){qt.replace("RegisterAccountName")}});const i=await bt.signMessage(s);fa.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=ySe.convertEVMChainIdToCoinType(Number(o));await wt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ke.setProfileName(t,e.chainNamespace),qt.replace("RegisterAccountNameSuccess")}catch(s){const i=TE.parseEnsApiError(s,`Error registering name ${t}`);throw qt.replace("RegisterAccountName"),new Error(i)}finally{fa.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},TE=ua(wSe);var DU={exports:{}},a0=typeof Reflect=="object"?Reflect:null,tF=a0&&typeof a0.apply=="function"?a0.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},HS;a0&&typeof a0.ownKeys=="function"?HS=a0.ownKeys:Object.getOwnPropertySymbols?HS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:HS=function(e){return Object.getOwnPropertyNames(e)};function bSe(t){console&&console.warn&&console.warn(t)}var _J=Number.isNaN||function(e){return e!==e};function Wn(){Wn.init.call(this)}DU.exports=Wn;DU.exports.once=_Se;Wn.EventEmitter=Wn;Wn.prototype._events=void 0;Wn.prototype._eventsCount=0;Wn.prototype._maxListeners=void 0;var nF=10;function TT(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Wn,"defaultMaxListeners",{enumerable:!0,get:function(){return nF},set:function(t){if(typeof t!="number"||t<0||_J(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");nF=t}});Wn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Wn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||_J(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function AJ(t){return t._maxListeners===void 0?Wn.defaultMaxListeners:t._maxListeners}Wn.prototype.getMaxListeners=function(){return AJ(this)};Wn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")tF(c,this,n);else for(var l=c.length,u=TJ(c,l),r=0;r<l;++r)tF(u[r],this,n);return!0};function SJ(t,e,n,r){var s,i,o;if(TT(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=AJ(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,bSe(a)}return t}Wn.prototype.addListener=function(e,n){return SJ(this,e,n,!1)};Wn.prototype.on=Wn.prototype.addListener;Wn.prototype.prependListener=function(e,n){return SJ(this,e,n,!0)};function vSe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xJ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=vSe.bind(r);return s.listener=n,r.wrapFn=s,s}Wn.prototype.once=function(e,n){return TT(n),this.on(e,xJ(this,e,n)),this};Wn.prototype.prependOnceListener=function(e,n){return TT(n),this.prependListener(e,xJ(this,e,n)),this};Wn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(TT(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():ESe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Wn.prototype.off=Wn.prototype.removeListener;Wn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function IJ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?CSe(s):TJ(s,s.length)}Wn.prototype.listeners=function(e){return IJ(this,e,!0)};Wn.prototype.rawListeners=function(e){return IJ(this,e,!1)};Wn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):NJ.call(t,e)};Wn.prototype.listenerCount=NJ;function NJ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Wn.prototype.eventNames=function(){return this._eventsCount>0?HS(this._events):[]};function TJ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function ESe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function CSe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function _Se(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}RJ(t,e,i,{once:!0}),e!=="error"&&ASe(t,s,{once:!0})})}function ASe(t,e,n){typeof t.on=="function"&&RJ(t,"error",e,n)}function RJ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Ja=DU.exports;const MU=im(Ja);var Te={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var p3=function(t,e){return p3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},p3(t,e)};function SSe(t,e){p3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var g3=function(){return g3=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g3.apply(this,arguments)};function xSe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ISe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function NSe(t,e){return function(n,r){e(n,r,t)}}function TSe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function RSe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function PSe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function OSe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function kSe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function m3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function PJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function DSe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(PJ(arguments[e]));return t}function MSe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function WC(t){return this instanceof WC?(this.v=t,this):new WC(t)}function LSe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof WC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function USe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:WC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function $Se(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof m3=="function"?m3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function BSe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function FSe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function jSe(t){return t&&t.__esModule?t:{default:t}}function WSe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function zSe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const HSe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return g3},__asyncDelegator:USe,__asyncGenerator:LSe,__asyncValues:$Se,__await:WC,__awaiter:RSe,__classPrivateFieldGet:WSe,__classPrivateFieldSet:zSe,__createBinding:OSe,__decorate:ISe,__exportStar:kSe,__extends:SSe,__generator:PSe,__importDefault:jSe,__importStar:FSe,__makeTemplateObject:BSe,__metadata:TSe,__param:NSe,__read:PJ,__rest:xSe,__spread:DSe,__spreadArrays:MSe,__values:m3},Symbol.toStringTag,{value:"Module"})),RT=pz(HSe);var uO={},mv={},rF;function GSe(){if(rF)return mv;rF=1,Object.defineProperty(mv,"__esModule",{value:!0}),mv.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return mv.delay=t,mv}var Yf={},dO={},Qf={},sF;function qSe(){return sF||(sF=1,Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.ONE_THOUSAND=Qf.ONE_HUNDRED=void 0,Qf.ONE_HUNDRED=100,Qf.ONE_THOUSAND=1e3),Qf}var hO={},iF;function VSe(){return iF||(iF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(hO)),hO}var oF;function OJ(){return oF||(oF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=RT;e.__exportStar(qSe(),t),e.__exportStar(VSe(),t)}(dO)),dO}var aF;function KSe(){if(aF)return Yf;aF=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.fromMiliseconds=Yf.toMiliseconds=void 0;const t=OJ();function e(r){return r*t.ONE_THOUSAND}Yf.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Yf.fromMiliseconds=n,Yf}var cF;function YSe(){return cF||(cF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=RT;e.__exportStar(GSe(),t),e.__exportStar(KSe(),t)}(uO)),uO}var Km={},lF;function QSe(){if(lF)return Km;lF=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Km.Watch=t,Km.default=t,Km}var fO={},yv={},uF;function JSe(){if(uF)return yv;uF=1,Object.defineProperty(yv,"__esModule",{value:!0}),yv.IWatch=void 0;class t{}return yv.IWatch=t,yv}var dF;function ZSe(){return dF||(dF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),RT.__exportStar(JSe(),t)}(fO)),fO}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=RT;e.__exportStar(YSe(),t),e.__exportStar(QSe(),t),e.__exportStar(ZSe(),t),e.__exportStar(OJ(),t)})(Te);class bm{}let XSe=class extends bm{constructor(e){super()}};const hF=Te.FIVE_SECONDS,vm={pulse:"heartbeat_pulse"};let exe=class kJ extends XSe{constructor(e){super(e),this.events=new Ja.EventEmitter,this.interval=hF,this.interval=(e==null?void 0:e.interval)||hF}static async init(e){const n=new kJ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Te.toMiliseconds(this.interval))}pulse(){this.events.emit(vm.pulse)}};const txe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,nxe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,rxe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function sxe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){ixe(t);return}return e}function ixe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function WA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!rxe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(txe.test(t)||nxe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,sxe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Em(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function DJ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Em(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let pO;function C1(){return pO||(pO=DJ("keyval-store","keyval")),pO}function fF(t,e=C1()){return e("readonly",n=>Em(n.get(t)))}function oxe(t,e,n=C1()){return n("readwrite",r=>(r.put(e,t),Em(r.transaction)))}function axe(t,e=C1()){return e("readwrite",n=>(n.delete(t),Em(n.transaction)))}function cxe(t=C1()){return t("readwrite",e=>(e.clear(),Em(e.transaction)))}function lxe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Em(t.transaction)}function uxe(t=C1()){return t("readonly",e=>{if(e.getAllKeys)return Em(e.getAllKeys());const n=[];return lxe(e,r=>n.push(r.key)).then(()=>n)})}const dxe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),hxe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function zg(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return hxe(t)}catch{return t}}function md(t){return typeof t=="string"?t:dxe(t)||""}function fxe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var pxe=gxe;function gxe(t,e,n){var r=n&&n.stringify||fxe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const pF=pxe;var by=Gl;const zC=Sxe().console||{},mxe={mapHttpRequest:zA,mapHttpResponse:zA,wrapRequestSerializer:gO,wrapResponseSerializer:gO,wrapErrorSerializer:gO,req:zA,res:zA,err:Exe};function yxe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Gl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||zC;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=yxe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=HC),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:Cxe(t)};c.levels=Gl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=HC,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=y3());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Ym(l,c,"error","log"),Ym(l,c,"fatal","error"),Ym(l,c,"warn","error"),Ym(l,c,"info","log"),Ym(l,c,"debug","log"),Ym(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,PT([p],b,y,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=Qm(A,p,"error"),this.fatal=Qm(A,p,"fatal"),this.warn=Qm(A,p,"warn"),this.info=Qm(A,p,"info"),this.debug=Qm(A,p,"debug"),this.trace=Qm(A,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=y3([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Gl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Gl.stdSerializers=mxe;Gl.stdTimeFunctions=Object.assign({},{nullTime:MJ,epochTime:LJ,unixTime:_xe,isoTime:Axe});function Ym(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?HC:s[n]?s[n]:zC[n]||zC[r]||HC,wxe(t,e,n)}function wxe(t,e,n){!t.transmit&&e[n]===HC||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===zC?zC:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&PT(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,bxe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Gl.levels.values[l],d=Gl.levels.values[n];if(d<u)return;vxe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Gl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function bxe(t,e,n,r){t._serialize&&PT(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Gl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?pF(s.shift(),s):void 0}else typeof i=="string"&&(i=pF(s.shift(),s));return i!==void 0&&(o.msg=i),o}function PT(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Gl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Qm(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function vxe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;PT(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=y3(c)}function y3(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Exe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function Cxe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?MJ:LJ}function zA(){return{}}function gO(t){return t}function HC(){}function MJ(){return!1}function LJ(){return Date.now()}function _xe(){return Math.round(Date.now()/1e3)}function Axe(){return new Date(Date.now()).toISOString()}function Sxe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const _1=im(by),xxe={level:"info"},A1="custom_context",LU=1e3*1024;let Ixe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},gF=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Ixe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},UJ=class{constructor(e,n=LU){this.level=e??"error",this.levelValue=by.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new gF(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===by.levels.values.error?console.error(e):n===by.levels.values.warn?console.warn(e):n===by.levels.values.debug?console.debug(e):n===by.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(md({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new gF(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(md({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Nxe=class{constructor(e,n=LU){this.baseChunkLogger=new UJ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},Txe=class{constructor(e,n=LU){this.baseChunkLogger=new UJ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Rxe=Object.defineProperty,Pxe=Object.defineProperties,Oxe=Object.getOwnPropertyDescriptors,mF=Object.getOwnPropertySymbols,kxe=Object.prototype.hasOwnProperty,Dxe=Object.prototype.propertyIsEnumerable,yF=(t,e,n)=>e in t?Rxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,EI=(t,e)=>{for(var n in e||(e={}))kxe.call(e,n)&&yF(t,n,e[n]);if(mF)for(var n of mF(e))Dxe.call(e,n)&&yF(t,n,e[n]);return t},CI=(t,e)=>Pxe(t,Oxe(e));function Cm(t){return CI(EI({},t),{level:(t==null?void 0:t.level)||xxe.level})}function Mxe(t,e=A1){return t[e]||""}function Lxe(t,e,n=A1){return t[n]=e,t}function No(t,e=A1){let n="";return typeof t.bindings>"u"?n=Mxe(t,e):n=t.bindings().context||"",n}function Uxe(t,e,n=A1){const r=No(t,n);return r.trim()?`${r}/${e}`:e}function Ys(t,e,n=A1){const r=Uxe(t,e,n),s=t.child({context:r});return Lxe(s,r,n)}function $xe(t){var e,n;const r=new Nxe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:_1(CI(EI({},t.opts),{level:"trace",browser:CI(EI({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Bxe(t){var e;const n=new Txe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:_1(CI(EI({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function OT(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?$xe(t):Bxe(t)}function Fxe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $J(t,...e){if(!Fxe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function wF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function jxe(t,e){$J(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Jm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Wxe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function BJ(t){return typeof t=="string"&&(t=Wxe(t)),$J(t),t}let zxe=class{clone(){return this._cloneInto()}};function Hxe(t){const e=r=>t().update(BJ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function FJ(t=32){if(Jm&&typeof Jm.getRandomValues=="function")return Jm.getRandomValues(new Uint8Array(t));if(Jm&&typeof Jm.randomBytes=="function")return Jm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Gxe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let qxe=class extends zxe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=mO(this.buffer)}update(e){wF(this);const{view:n,buffer:r,blockLen:s}=this;e=BJ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=mO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wF(this),jxe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Gxe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=mO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const HA=BigInt(2**32-1),w3=BigInt(32);function jJ(t,e=!1){return e?{h:Number(t&HA),l:Number(t>>w3&HA)}:{h:Number(t>>w3&HA)|0,l:Number(t&HA)|0}}function Vxe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=jJ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Kxe=(t,e)=>BigInt(t>>>0)<<w3|BigInt(e>>>0),Yxe=(t,e,n)=>t>>>n,Qxe=(t,e,n)=>t<<32-n|e>>>n,Jxe=(t,e,n)=>t>>>n|e<<32-n,Zxe=(t,e,n)=>t<<32-n|e>>>n,Xxe=(t,e,n)=>t<<64-n|e>>>n-32,eIe=(t,e,n)=>t>>>n-32|e<<64-n,tIe=(t,e)=>e,nIe=(t,e)=>t,rIe=(t,e,n)=>t<<n|e>>>32-n,sIe=(t,e,n)=>e<<n|t>>>32-n,iIe=(t,e,n)=>e<<n-32|t>>>64-n,oIe=(t,e,n)=>t<<n-32|e>>>64-n;function aIe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const cIe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),lIe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,uIe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),dIe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,hIe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),fIe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ht={fromBig:jJ,split:Vxe,toBig:Kxe,shrSH:Yxe,shrSL:Qxe,rotrSH:Jxe,rotrSL:Zxe,rotrBH:Xxe,rotrBL:eIe,rotr32H:tIe,rotr32L:nIe,rotlSH:rIe,rotlSL:sIe,rotlBH:iIe,rotlBL:oIe,add:aIe,add3L:cIe,add3H:lIe,add4L:uIe,add4H:dIe,add5H:fIe,add5L:hIe},[pIe,gIe]=Ht.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ud=new Uint32Array(80),$d=new Uint32Array(80);let mIe=class extends qxe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Ud[v]=e.getUint32(n),$d[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Ud[v-15]|0,_=$d[v-15]|0,I=Ht.rotrSH(A,_,1)^Ht.rotrSH(A,_,8)^Ht.shrSH(A,_,7),x=Ht.rotrSL(A,_,1)^Ht.rotrSL(A,_,8)^Ht.shrSL(A,_,7),N=Ud[v-2]|0,S=$d[v-2]|0,O=Ht.rotrSH(N,S,19)^Ht.rotrBH(N,S,61)^Ht.shrSH(N,S,6),P=Ht.rotrSL(N,S,19)^Ht.rotrBL(N,S,61)^Ht.shrSL(N,S,6),F=Ht.add4L(x,P,$d[v-7],$d[v-16]),q=Ht.add4H(F,I,O,Ud[v-7],Ud[v-16]);Ud[v]=q|0,$d[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const A=Ht.rotrSH(d,h,14)^Ht.rotrSH(d,h,18)^Ht.rotrBH(d,h,41),_=Ht.rotrSL(d,h,14)^Ht.rotrSL(d,h,18)^Ht.rotrBL(d,h,41),I=d&f^~d&g,x=h&p^~h&w,N=Ht.add5L(b,_,x,gIe[v],$d[v]),S=Ht.add5H(N,y,A,I,pIe[v],Ud[v]),O=N|0,P=Ht.rotrSH(r,s,28)^Ht.rotrBH(r,s,34)^Ht.rotrBH(r,s,39),F=Ht.rotrSL(r,s,28)^Ht.rotrBL(r,s,34)^Ht.rotrBL(r,s,39),q=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ht.add(l|0,u|0,S|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=Ht.add3L(O,F,B);r=Ht.add3H(T,S,P,q),s=T|0}({h:r,l:s}=Ht.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ht.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ht.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ht.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ht.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ht.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Ht.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Ht.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){Ud.fill(0),$d.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const yIe=Hxe(()=>new mIe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const UU=BigInt(0),WJ=BigInt(1),wIe=BigInt(2);function $U(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function BU(t){if(!$U(t))throw new Error("Uint8Array expected")}function yO(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const bIe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function FU(t){BU(t);let e="";for(let n=0;n<t.length;n++)e+=bIe[t[n]];return e}function zJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?UU:BigInt("0x"+t)}const hu={_0:48,_9:57,A:65,F:70,a:97,f:102};function bF(t){if(t>=hu._0&&t<=hu._9)return t-hu._0;if(t>=hu.A&&t<=hu.F)return t-(hu.A-10);if(t>=hu.a&&t<=hu.f)return t-(hu.a-10)}function HJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=bF(t.charCodeAt(i)),a=bF(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function vIe(t){return zJ(FU(t))}function GS(t){return BU(t),zJ(FU(Uint8Array.from(t).reverse()))}function GJ(t,e){return HJ(t.toString(16).padStart(e*2,"0"))}function b3(t,e){return GJ(t,e).reverse()}function fu(t,e,n){let r;if(typeof e=="string")try{r=HJ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if($U(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function vF(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];BU(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const wO=t=>typeof t=="bigint"&&UU<=t;function EIe(t,e,n){return wO(t)&&wO(e)&&wO(n)&&e<=t&&t<n}function wv(t,e,n,r){if(!EIe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function CIe(t){let e;for(e=0;t>UU;t>>=WJ,e+=1);return e}const _Ie=t=>(wIe<<BigInt(t-1))-WJ,AIe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||$U(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function jU(t,e,n={}){const r=(s,i,o)=>{const a=AIe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function EF(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Es=BigInt(0),$r=BigInt(1),pp=BigInt(2),SIe=BigInt(3),v3=BigInt(4),CF=BigInt(5),_F=BigInt(8);function es(t,e){const n=t%e;return n>=Es?n:e+n}function xIe(t,e,n){if(e<Es)throw new Error("invalid exponent, negatives unsupported");if(n<=Es)throw new Error("invalid modulus");if(n===$r)return Es;let r=$r;for(;e>Es;)e&$r&&(r=r*t%n),t=t*t%n,e>>=$r;return r}function rl(t,e,n){let r=t;for(;e-- >Es;)r*=r,r%=n;return r}function AF(t,e){if(t===Es)throw new Error("invert: expected non-zero number");if(e<=Es)throw new Error("invert: expected positive modulus, got "+e);let n=es(t,e),r=e,s=Es,i=$r;for(;n!==Es;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==$r)throw new Error("invert: does not exist");return es(s,e)}function IIe(t){const e=(t-$r)/pp;let n,r,s;for(n=t-$r,r=0;n%pp===Es;n/=pp,r++);for(s=pp;s<t&&xIe(s,e,t)!==t-$r;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+$r)/v3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+$r)/pp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,$r<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function NIe(t){if(t%v3===SIe){const e=(t+$r)/v3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%_F===CF){const e=(t-CF)/_F;return function(n,r){const s=n.mul(r,pp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,pp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return IIe(t)}const TIe=(t,e)=>(es(t,e)&$r)===$r,RIe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function PIe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=RIe.reduce((r,s)=>(r[s]="function",r),e);return jU(t,n)}function OIe(t,e,n){if(n<Es)throw new Error("invalid exponent, negatives unsupported");if(n===Es)return t.ONE;if(n===$r)return e;let r=t.ONE,s=e;for(;n>Es;)n&$r&&(r=t.mul(r,s)),s=t.sqr(s),n>>=$r;return r}function kIe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function qJ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function VJ(t,e,n=!1,r={}){if(t<=Es)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=qJ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:_Ie(s),ZERO:Es,ONE:$r,create:c=>es(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Es<=c&&c<t},is0:c=>c===Es,isOdd:c=>(c&$r)===$r,neg:c=>es(-c,t),eql:(c,l)=>c===l,sqr:c=>es(c*c,t),add:(c,l)=>es(c+l,t),sub:(c,l)=>es(c-l,t),mul:(c,l)=>es(c*l,t),pow:(c,l)=>OIe(a,c,l),div:(c,l)=>es(c*AF(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>AF(c,t),sqrt:r.sqrt||(c=>(o||(o=NIe(t)),o(a,c))),invertBatch:c=>kIe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?b3(c,i):GJ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?GS(c):vIe(c)}});return Object.freeze(a)}const SF=BigInt(0),GA=BigInt(1);function bO(t,e){const n=e.negate();return t?n:e}function KJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function vO(t,e){KJ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function DIe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function MIe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const EO=new WeakMap,YJ=new WeakMap;function CO(t){return YJ.get(t)||1}function LIe(t,e){return{constTimeNegate:bO,hasPrecomputes(n){return CO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>SF;)r&GA&&(s=s.add(i)),i=i.double(),r>>=GA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=vO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=vO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=GA);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(bO(y,r[g])):a=a.add(bO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=vO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===SF)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=GA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=EO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&EO.set(r,s(i))),i},wNAFCached(n,r,s){const i=CO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=CO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){KJ(r,e),YJ.set(n,r),EO.delete(n)}}}function UIe(t,e,n,r){if(DIe(n,t),MIe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=CIe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function $Ie(t){return PIe(t.Fp),jU(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...qJ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const oc=BigInt(0),Ki=BigInt(1),qA=BigInt(2),BIe=BigInt(8),FIe={zip215:!0};function jIe(t){const e=$Ie(t);return jU(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function WIe(t){const e=jIe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=qA<<BigInt(a*8)-Ki,u=n.create,d=VJ(e.n,e.nBitLength),h=e.uvRatio||((T,R)=>{try{return{isValid:!0,value:n.sqrt(T*n.inv(R))}}catch{return{isValid:!1,value:oc}}}),f=e.adjustScalarBytes||(T=>T),p=e.domain||((T,R,$)=>{if(yO("phflag",$),R.length||$)throw new Error("Contexts/pre-hash are not supported");return T});function g(T,R){wv("coordinate "+T,R,oc,l)}function w(T){if(!(T instanceof v))throw new Error("ExtendedPoint expected")}const y=EF((T,R)=>{const{ex:$,ey:k,ez:M}=T,z=T.is0();R==null&&(R=z?BIe:n.inv(M));const K=u($*R),ne=u(k*R),le=u(M*R);if(z)return{x:oc,y:Ki};if(le!==Ki)throw new Error("invZ was invalid");return{x:K,y:ne}}),b=EF(T=>{const{a:R,d:$}=e;if(T.is0())throw new Error("bad point: ZERO");const{ex:k,ey:M,ez:z,et:K}=T,ne=u(k*k),le=u(M*M),oe=u(z*z),ae=u(oe*oe),ue=u(ne*R),Ze=u(oe*u(ue+le)),Ie=u(ae+u($*u(ne*le)));if(Ze!==Ie)throw new Error("bad point: equation left != right (1)");const De=u(k*M),st=u(z*K);if(De!==st)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(R,$,k,M){this.ex=R,this.ey=$,this.ez=k,this.et=M,g("x",R),g("y",$),g("z",k),g("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof v)throw new Error("extended point not allowed");const{x:$,y:k}=R||{};return g("x",$),g("y",k),new v($,k,Ki,u($*k))}static normalizeZ(R){const $=n.invertBatch(R.map(k=>k.ez));return R.map((k,M)=>k.toAffine($[M])).map(v.fromAffine)}static msm(R,$){return UIe(v,d,R,$)}_setWindowSize(R){I.setWindowSize(this,R)}assertValidity(){b(this)}equals(R){w(R);const{ex:$,ey:k,ez:M}=this,{ex:z,ey:K,ez:ne}=R,le=u($*ne),oe=u(z*M),ae=u(k*ne),ue=u(K*M);return le===oe&&ae===ue}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:R}=e,{ex:$,ey:k,ez:M}=this,z=u($*$),K=u(k*k),ne=u(qA*u(M*M)),le=u(R*z),oe=$+k,ae=u(u(oe*oe)-z-K),ue=le+K,Ze=ue-ne,Ie=le-K,De=u(ae*Ze),st=u(ue*Ie),Ot=u(ae*Ie),tn=u(Ze*ue);return new v(De,st,tn,Ot)}add(R){w(R);const{a:$,d:k}=e,{ex:M,ey:z,ez:K,et:ne}=this,{ex:le,ey:oe,ez:ae,et:ue}=R;if($===BigInt(-1)){const ot=u((z-M)*(oe+le)),yt=u((z+M)*(oe-le)),St=u(yt-ot);if(St===oc)return this.double();const qn=u(K*qA*ue),kt=u(ne*qA*ae),Wr=kt+qn,Dt=yt+ot,Vn=kt-qn,Mr=u(Wr*St),Wi=u(Dt*Vn),tc=u(Wr*Vn),jf=u(St*Dt);return new v(Mr,Wi,jf,tc)}const Ze=u(M*le),Ie=u(z*oe),De=u(ne*k*ue),st=u(K*ae),Ot=u((M+z)*(le+oe)-Ze-Ie),tn=st-De,X=st+De,ce=u(Ie-$*Ze),Ee=u(Ot*tn),ge=u(X*ce),ve=u(Ot*ce),Xe=u(tn*X);return new v(Ee,ge,Xe,ve)}subtract(R){return this.add(R.negate())}wNAF(R){return I.wNAFCached(this,R,v.normalizeZ)}multiply(R){const $=R;wv("scalar",$,Ki,r);const{p:k,f:M}=this.wNAF($);return v.normalizeZ([k,M])[0]}multiplyUnsafe(R,$=v.ZERO){const k=R;return wv("scalar",k,oc,r),k===oc?_:this.is0()||k===Ki?this:I.wNAFCachedUnsafe(this,k,v.normalizeZ,$)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(R){return y(this,R)}clearCofactor(){const{h:R}=e;return R===Ki?this:this.multiplyUnsafe(R)}static fromHex(R,$=!1){const{d:k,a:M}=e,z=n.BYTES;R=fu("pointHex",R,z),yO("zip215",$);const K=R.slice(),ne=R[z-1];K[z-1]=ne&-129;const le=GS(K),oe=$?l:n.ORDER;wv("pointHex.y",le,oc,oe);const ae=u(le*le),ue=u(ae-Ki),Ze=u(k*ae-M);let{isValid:Ie,value:De}=h(ue,Ze);if(!Ie)throw new Error("Point.fromHex: invalid y coordinate");const st=(De&Ki)===Ki,Ot=(ne&128)!==0;if(!$&&De===oc&&Ot)throw new Error("Point.fromHex: x=0 and x_0=1");return Ot!==st&&(De=u(-De)),v.fromAffine({x:De,y:le})}static fromPrivateKey(R){return S(R).point}toRawBytes(){const{x:R,y:$}=this.toAffine(),k=b3($,n.BYTES);return k[k.length-1]|=R&Ki?128:0,k}toHex(){return FU(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Ki,u(e.Gx*e.Gy)),v.ZERO=new v(oc,Ki,Ki,oc);const{BASE:A,ZERO:_}=v,I=LIe(v,a*8);function x(T){return es(T,r)}function N(T){return x(GS(T))}function S(T){const R=n.BYTES;T=fu("private key",T,R);const $=fu("hashed private key",i(T),2*R),k=f($.slice(0,R)),M=$.slice(R,2*R),z=N(k),K=A.multiply(z),ne=K.toRawBytes();return{head:k,prefix:M,scalar:z,point:K,pointBytes:ne}}function O(T){return S(T).pointBytes}function P(T=new Uint8Array,...R){const $=vF(...R);return N(i(p($,fu("context",T),!!s)))}function F(T,R,$={}){T=fu("message",T),s&&(T=s(T));const{prefix:k,scalar:M,pointBytes:z}=S(R),K=P($.context,k,T),ne=A.multiply(K).toRawBytes(),le=P($.context,ne,z,T),oe=x(K+le*M);wv("signature.s",oe,oc,r);const ae=vF(ne,b3(oe,n.BYTES));return fu("result",ae,n.BYTES*2)}const q=FIe;function B(T,R,$,k=q){const{context:M,zip215:z}=k,K=n.BYTES;T=fu("signature",T,2*K),R=fu("message",R),$=fu("publicKey",$,K),z!==void 0&&yO("zip215",z),s&&(R=s(R));const ne=GS(T.slice(K,2*K));let le,oe,ae;try{le=v.fromHex($,z),oe=v.fromHex(T.slice(0,K),z),ae=A.multiplyUnsafe(ne)}catch{return!1}if(!z&&le.isSmallOrder())return!1;const ue=P(M,oe.toRawBytes(),le.toRawBytes(),R);return oe.add(le.multiplyUnsafe(ue)).subtract(ae).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:F,verify:B,ExtendedPoint:v,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(T=8,R=v.BASE){return R._setWindowSize(T),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const WU=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),xF=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const zIe=BigInt(1),IF=BigInt(2);BigInt(3);const HIe=BigInt(5),GIe=BigInt(8);function qIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=WU,o=t*t%i*t%i,a=rl(o,IF,i)*o%i,c=rl(a,zIe,i)*t%i,l=rl(c,HIe,i)*c%i,u=rl(l,e,i)*l%i,d=rl(u,n,i)*u%i,h=rl(d,r,i)*d%i,f=rl(h,s,i)*h%i,p=rl(f,s,i)*h%i,g=rl(p,e,i)*l%i;return{pow_p_5_8:rl(g,IF,i)*t%i,b2:o}}function VIe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function KIe(t,e){const n=WU,r=es(e*e*e,n),s=es(r*r*e,n),i=qIe(t*s).pow_p_5_8;let o=es(t*r*i,n);const a=es(e*o*o,n),c=o,l=es(o*xF,n),u=a===t,d=a===es(-t,n),h=a===es(-t*xF,n);return u&&(o=c),(d||h)&&(o=l),TIe(o,n)&&(o=es(-o,n)),{isValid:u||d,value:o}}const YIe=VJ(WU,void 0,!0),QIe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:YIe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:GIe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:yIe,randomBytes:FJ,adjustScalarBytes:VIe,uvRatio:KIe},QJ=WIe(QIe),JIe="EdDSA",ZIe="JWT",_I=".",kT="base64url",JJ="utf8",ZJ="utf8",XIe=":",eNe="did",tNe="key",NF="base58btc",nNe="z",rNe="K36",sNe=32;function zU(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function XJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?zU(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function eZ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=XJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return zU(n)}function iNe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var oNe=iNe,aNe=oNe;const tZ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},cNe=t=>new TextEncoder().encode(t),lNe=t=>new TextDecoder().decode(t);let uNe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},dNe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return nZ(this,e)}},hNe=class{constructor(e){this.decoders=e}or(e){return nZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const nZ=(t,e)=>new hNe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let fNe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new uNe(e,n,r),this.decoder=new dNe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const DT=({name:t,prefix:e,encode:n,decode:r})=>new fNe(t,e,n,r),S1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=aNe(n,e);return DT({prefix:t,name:e,encode:r,decode:i=>tZ(s(i))})},pNe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},gNe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Qs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>DT({prefix:e,name:t,encode(s){return gNe(s,r,n)},decode(s){return pNe(s,r,n,t)}}),mNe=DT({prefix:"\0",name:"identity",encode:t=>lNe(t),decode:t=>cNe(t)});var yNe=Object.freeze({__proto__:null,identity:mNe});const wNe=Qs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var bNe=Object.freeze({__proto__:null,base2:wNe});const vNe=Qs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ENe=Object.freeze({__proto__:null,base8:vNe});const CNe=S1({prefix:"9",name:"base10",alphabet:"0123456789"});var _Ne=Object.freeze({__proto__:null,base10:CNe});const ANe=Qs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),SNe=Qs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var xNe=Object.freeze({__proto__:null,base16:ANe,base16upper:SNe});const INe=Qs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),NNe=Qs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),TNe=Qs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),RNe=Qs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),PNe=Qs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ONe=Qs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kNe=Qs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),DNe=Qs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),MNe=Qs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var LNe=Object.freeze({__proto__:null,base32:INe,base32upper:NNe,base32pad:TNe,base32padupper:RNe,base32hex:PNe,base32hexupper:ONe,base32hexpad:kNe,base32hexpadupper:DNe,base32z:MNe});const UNe=S1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$Ne=S1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var BNe=Object.freeze({__proto__:null,base36:UNe,base36upper:$Ne});const FNe=S1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),jNe=S1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var WNe=Object.freeze({__proto__:null,base58btc:FNe,base58flickr:jNe});const zNe=Qs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),HNe=Qs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),GNe=Qs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qNe=Qs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var VNe=Object.freeze({__proto__:null,base64:zNe,base64pad:HNe,base64url:GNe,base64urlpad:qNe});const rZ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),KNe=rZ.reduce((t,e,n)=>(t[n]=e,t),[]),YNe=rZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function QNe(t){return t.reduce((e,n)=>(e+=KNe[n],e),"")}function JNe(t){const e=[];for(const n of t){const r=YNe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const ZNe=DT({prefix:"🚀",name:"base256emoji",encode:QNe,decode:JNe});var XNe=Object.freeze({__proto__:null,base256emoji:ZNe}),eTe=sZ,TF=128,tTe=-128,nTe=Math.pow(2,31);function sZ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=nTe;)e[n++]=t&255|TF,t/=128;for(;t&tTe;)e[n++]=t&255|TF,t>>>=7;return e[n]=t|0,sZ.bytes=n-r+1,e}var rTe=E3,sTe=128,RF=127;function E3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw E3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&RF)<<s:(o&RF)*Math.pow(2,s),s+=7}while(o>=sTe);return E3.bytes=i-r,n}var iTe=Math.pow(2,7),oTe=Math.pow(2,14),aTe=Math.pow(2,21),cTe=Math.pow(2,28),lTe=Math.pow(2,35),uTe=Math.pow(2,42),dTe=Math.pow(2,49),hTe=Math.pow(2,56),fTe=Math.pow(2,63),pTe=function(t){return t<iTe?1:t<oTe?2:t<aTe?3:t<cTe?4:t<lTe?5:t<uTe?6:t<dTe?7:t<hTe?8:t<fTe?9:10},gTe={encode:eTe,decode:rTe,encodingLength:pTe},iZ=gTe;const PF=(t,e,n=0)=>(iZ.encode(t,e,n),e),OF=t=>iZ.encodingLength(t),C3=(t,e)=>{const n=e.byteLength,r=OF(t),s=r+OF(n),i=new Uint8Array(s+n);return PF(t,i,0),PF(n,i,r),i.set(e,s),new mTe(t,n,e,i)};let mTe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const oZ=({name:t,code:e,encode:n})=>new yTe(t,e,n);let yTe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?C3(this.code,n):n.then(r=>C3(this.code,r))}else throw Error("Unknown type, must be binary type")}};const aZ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),wTe=oZ({name:"sha2-256",code:18,encode:aZ("SHA-256")}),bTe=oZ({name:"sha2-512",code:19,encode:aZ("SHA-512")});var vTe=Object.freeze({__proto__:null,sha256:wTe,sha512:bTe});const cZ=0,ETe="identity",lZ=tZ,CTe=t=>C3(cZ,lZ(t)),_Te={code:cZ,name:ETe,encode:lZ,digest:CTe};var ATe=Object.freeze({__proto__:null,identity:_Te});new TextEncoder,new TextDecoder;const kF={...yNe,...bNe,...ENe,..._Ne,...xNe,...LNe,...BNe,...WNe,...VNe,...XNe};({...vTe,...ATe});function uZ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const DF=uZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),_O=uZ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=XJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),dZ={utf8:DF,"utf-8":DF,hex:kF.base16,latin1:_O,ascii:_O,binary:_O,...kF};function MT(t,e="utf8"){const n=dZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Nb(t,e="utf8"){const n=dZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?zU(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function MF(t){return zg(MT(Nb(t,kT),JJ))}function AI(t){return MT(Nb(md(t),JJ),kT)}function hZ(t){const e=Nb(rNe,NF),n=nNe+MT(eZ([e,t]),NF);return[eNe,tNe,n].join(XIe)}function STe(t){return MT(t,kT)}function xTe(t){return Nb(t,kT)}function ITe(t){return Nb([AI(t.header),AI(t.payload)].join(_I),ZJ)}function NTe(t){return[AI(t.header),AI(t.payload),STe(t.signature)].join(_I)}function _3(t){const e=t.split(_I),n=MF(e[0]),r=MF(e[1]),s=xTe(e[2]),i=Nb(e.slice(0,2).join(_I),ZJ);return{header:n,payload:r,signature:s,data:i}}function LF(t=FJ(sNe)){const e=QJ.getPublicKey(t);return{secretKey:eZ([t,e]),publicKey:e}}async function TTe(t,e,n,r,s=Te.fromMiliseconds(Date.now())){const i={alg:JIe,typ:ZIe},o=hZ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=ITe({header:i,payload:c}),u=QJ.sign(l,r.secretKey.slice(0,32));return NTe({header:i,payload:c,signature:u})}var UF=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},RTe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),PTe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),OTe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),kTe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),DTe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),MTe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,LTe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,$F=3,UTe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",MTe]],BF=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function $Te(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new DTe:typeof navigator<"u"?FTe(navigator.userAgent):WTe()}function BTe(t){return t!==""&&UTe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function FTe(t){var e=BTe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new kTe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<$F&&(s=UF(UF([],s,!0),zTe($F-s.length),!0)):s=[];var i=s.join("."),o=jTe(t),a=LTe.exec(t);return a&&a[1]?new OTe(n,i,o,a[1]):new RTe(n,i,o)}function jTe(t){for(var e=0,n=BF.length;e<n;e++){var r=BF[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function WTe(){var t=typeof process<"u"&&process.version;return t?new PTe(process.version.slice(1)):null}function zTe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.getLocalStorage=Zn.getLocalStorageOrThrow=Zn.getCrypto=Zn.getCryptoOrThrow=fZ=Zn.getLocation=Zn.getLocationOrThrow=HU=Zn.getNavigator=Zn.getNavigatorOrThrow=Hg=Zn.getDocument=Zn.getDocumentOrThrow=Zn.getFromWindowOrThrow=Zn.getFromWindow=void 0;function _m(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Zn.getFromWindow=_m;function Tb(t){const e=_m(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Zn.getFromWindowOrThrow=Tb;function HTe(){return Tb("document")}Zn.getDocumentOrThrow=HTe;function GTe(){return _m("document")}var Hg=Zn.getDocument=GTe;function qTe(){return Tb("navigator")}Zn.getNavigatorOrThrow=qTe;function VTe(){return _m("navigator")}var HU=Zn.getNavigator=VTe;function KTe(){return Tb("location")}Zn.getLocationOrThrow=KTe;function YTe(){return _m("location")}var fZ=Zn.getLocation=YTe;function QTe(){return Tb("crypto")}Zn.getCryptoOrThrow=QTe;function JTe(){return _m("crypto")}Zn.getCrypto=JTe;function ZTe(){return Tb("localStorage")}Zn.getLocalStorageOrThrow=ZTe;function XTe(){return _m("localStorage")}Zn.getLocalStorage=XTe;var GU={};Object.defineProperty(GU,"__esModule",{value:!0});var pZ=GU.getWindowMetadata=void 0;const FF=Zn;function eRe(){let t,e;try{t=FF.getDocumentOrThrow(),e=FF.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");y+=v+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}pZ=GU.getWindowMetadata=eRe;function tRe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let A=p-1;(b!==0||v<d)&&A!==-1;A--,v++)b+=256*g[A]>>>0,g[A]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let A=0;for(let _=f-1;(v!==0||A<h)&&_!==-1;_--,A++)v+=n*p[_]>>>0,p[_]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var nRe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const gZ=tRe(nRe);function mZ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function RE(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=mZ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function rRe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var sRe=rRe,iRe=sRe;const oRe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},aRe=t=>new TextEncoder().encode(t),cRe=t=>new TextDecoder().decode(t);class lRe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class uRe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return yZ(this,e)}}class dRe{constructor(e){this.decoders=e}or(e){return yZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const yZ=(t,e)=>new dRe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class hRe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new lRe(e,n,r),this.decoder=new uRe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const LT=({name:t,prefix:e,encode:n,decode:r})=>new hRe(t,e,n,r),x1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=iRe(n,e);return LT({prefix:t,name:e,encode:r,decode:i=>oRe(s(i))})},fRe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},pRe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Js=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>LT({prefix:e,name:t,encode(s){return pRe(s,r,n)},decode(s){return fRe(s,r,n,t)}}),gRe=LT({prefix:"\0",name:"identity",encode:t=>cRe(t),decode:t=>aRe(t)}),mRe=Object.freeze(Object.defineProperty({__proto__:null,identity:gRe},Symbol.toStringTag,{value:"Module"})),yRe=Js({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),wRe=Object.freeze(Object.defineProperty({__proto__:null,base2:yRe},Symbol.toStringTag,{value:"Module"})),bRe=Js({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),vRe=Object.freeze(Object.defineProperty({__proto__:null,base8:bRe},Symbol.toStringTag,{value:"Module"})),ERe=x1({prefix:"9",name:"base10",alphabet:"0123456789"}),CRe=Object.freeze(Object.defineProperty({__proto__:null,base10:ERe},Symbol.toStringTag,{value:"Module"})),_Re=Js({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ARe=Js({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),SRe=Object.freeze(Object.defineProperty({__proto__:null,base16:_Re,base16upper:ARe},Symbol.toStringTag,{value:"Module"})),xRe=Js({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),IRe=Js({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),NRe=Js({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),TRe=Js({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),RRe=Js({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),PRe=Js({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ORe=Js({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),kRe=Js({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),DRe=Js({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),MRe=Object.freeze(Object.defineProperty({__proto__:null,base32:xRe,base32hex:RRe,base32hexpad:ORe,base32hexpadupper:kRe,base32hexupper:PRe,base32pad:NRe,base32padupper:TRe,base32upper:IRe,base32z:DRe},Symbol.toStringTag,{value:"Module"})),LRe=x1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),URe=x1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),$Re=Object.freeze(Object.defineProperty({__proto__:null,base36:LRe,base36upper:URe},Symbol.toStringTag,{value:"Module"})),BRe=x1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),FRe=x1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),jRe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:BRe,base58flickr:FRe},Symbol.toStringTag,{value:"Module"})),WRe=Js({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zRe=Js({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),HRe=Js({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),GRe=Js({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),qRe=Object.freeze(Object.defineProperty({__proto__:null,base64:WRe,base64pad:zRe,base64url:HRe,base64urlpad:GRe},Symbol.toStringTag,{value:"Module"})),wZ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),VRe=wZ.reduce((t,e,n)=>(t[n]=e,t),[]),KRe=wZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function YRe(t){return t.reduce((e,n)=>(e+=VRe[n],e),"")}function QRe(t){const e=[];for(const n of t){const r=KRe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const JRe=LT({prefix:"🚀",name:"base256emoji",encode:YRe,decode:QRe}),ZRe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:JRe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const jF={...mRe,...wRe,...vRe,...CRe,...SRe,...MRe,...$Re,...jRe,...qRe,...ZRe};function bZ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const WF=bZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),AO=bZ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=mZ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),vZ={utf8:WF,"utf-8":WF,hex:jF.base16,latin1:AO,ascii:AO,binary:AO,...jF};function $a(t,e="utf8"){const n=vZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function _o(t,e="utf8"){const n=vZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const XRe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},ePe="PARSE_ERROR",tPe="INVALID_REQUEST",nPe="METHOD_NOT_FOUND",rPe="INVALID_PARAMS",EZ="INTERNAL_ERROR",qU="SERVER_ERROR",sPe=[-32700,-32600,-32601,-32602,-32603],PE={[ePe]:{code:-32700,message:"Parse error"},[tPe]:{code:-32600,message:"Invalid Request"},[nPe]:{code:-32601,message:"Method not found"},[rPe]:{code:-32602,message:"Invalid params"},[EZ]:{code:-32603,message:"Internal error"},[qU]:{code:-32e3,message:"Server error"}},CZ=qU;function iPe(t){return sPe.includes(t)}function zF(t){return Object.keys(PE).includes(t)?PE[t]:PE[CZ]}function oPe(t){const e=Object.values(PE).find(n=>n.code===t);return e||PE[CZ]}function _Z(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var AZ={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var A3=function(t,e){return A3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},A3(t,e)};function aPe(t,e){A3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var S3=function(){return S3=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},S3.apply(this,arguments)};function cPe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function lPe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function uPe(t,e){return function(n,r){e(n,r,t)}}function dPe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function hPe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function fPe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function pPe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function gPe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function x3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function SZ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function mPe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(SZ(arguments[e]));return t}function yPe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function GC(t){return this instanceof GC?(this.v=t,this):new GC(t)}function wPe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof GC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function bPe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:GC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function vPe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof x3=="function"?x3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function EPe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function CPe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _Pe(t){return t&&t.__esModule?t:{default:t}}function APe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function SPe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const xPe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return S3},__asyncDelegator:bPe,__asyncGenerator:wPe,__asyncValues:vPe,__await:GC,__awaiter:hPe,__classPrivateFieldGet:APe,__classPrivateFieldSet:SPe,__createBinding:pPe,__decorate:lPe,__exportStar:gPe,__extends:aPe,__generator:fPe,__importDefault:_Pe,__importStar:CPe,__makeTemplateObject:EPe,__metadata:dPe,__param:uPe,__read:SZ,__rest:cPe,__spread:mPe,__spreadArrays:yPe,__values:x3},Symbol.toStringTag,{value:"Module"})),IPe=pz(xPe);var pu={},HF;function NPe(){if(HF)return pu;HF=1,Object.defineProperty(pu,"__esModule",{value:!0}),pu.isBrowserCryptoAvailable=pu.getSubtleCrypto=pu.getBrowerCrypto=void 0;function t(){return(xl==null?void 0:xl.crypto)||(xl==null?void 0:xl.msCrypto)||{}}pu.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}pu.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return pu.isBrowserCryptoAvailable=n,pu}var gu={},GF;function TPe(){if(GF)return gu;GF=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.isBrowser=gu.isNode=gu.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}gu.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}gu.isNode=e;function n(){return!t()&&!e()}return gu.isBrowser=n,gu}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=IPe;e.__exportStar(NPe(),t),e.__exportStar(TPe(),t)})(AZ);function dl(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function kp(t=6){return BigInt(dl(t))}function Fh(t,e,n){return{id:n||dl(),jsonrpc:"2.0",method:t,params:e}}function UT(t,e){return{id:t,jsonrpc:"2.0",result:e}}function $T(t,e,n){return{id:t,jsonrpc:"2.0",error:RPe(e)}}function RPe(t,e){return typeof t>"u"?zF(EZ):(typeof t=="string"&&(t=Object.assign(Object.assign({},zF(qU)),{message:t})),iPe(t.code)&&(t=oPe(t.code)),t)}let PPe=class{},OPe=class extends PPe{constructor(){super()}},kPe=class extends OPe{constructor(e){super()}};const DPe="^https?:",MPe="^wss?:";function LPe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function xZ(t,e){const n=LPe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function qF(t){return xZ(t,DPe)}function VF(t){return xZ(t,MPe)}function UPe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function IZ(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function VU(t){return IZ(t)&&"method"in t}function BT(t){return IZ(t)&&(hl(t)||Ta(t))}function hl(t){return"result"in t}function Ta(t){return"error"in t}let Za=class extends kPe{constructor(e){super(e),this.events=new Ja.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Fh(e.method,e.params||[],e.id||kp().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ta(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),BT(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const $Pe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),BPe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",KF=t=>t.split("?")[0],YF=10,FPe=$Pe();let jPe=class{constructor(e){if(this.url=e,this.events=new Ja.EventEmitter,this.registering=!1,!VF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(md(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!VF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=AZ.isReactNative()?void 0:{rejectUnauthorized:!UPe(e)},i=new FPe(e,[],s);BPe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?zg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=$T(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return _Z(e,KF(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>YF&&this.events.setMaxListeners(YF)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${KF(this.url)}`));return this.events.emit("register_error",n),n}};var I3={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof xl<"u"&&xl,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof xl<"u"&&xl||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(T){return T&&DataView.prototype.isPrototypeOf(T)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(T){return T&&u.indexOf(Object.prototype.toString.call(T))>-1};function h(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError('Invalid character in header field name: "'+T+'"');return T.toLowerCase()}function f(T){return typeof T!="string"&&(T=String(T)),T}function p(T){var R={next:function(){var $=T.shift();return{done:$===void 0,value:$}}};return c.iterable&&(R[Symbol.iterator]=function(){return R}),R}function g(T){this.map={},T instanceof g?T.forEach(function(R,$){this.append($,R)},this):Array.isArray(T)?T.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(R){this.append(R,T[R])},this)}g.prototype.append=function(T,R){T=h(T),R=f(R);var $=this.map[T];this.map[T]=$?$+", "+R:R},g.prototype.delete=function(T){delete this.map[h(T)]},g.prototype.get=function(T){return T=h(T),this.has(T)?this.map[T]:null},g.prototype.has=function(T){return this.map.hasOwnProperty(h(T))},g.prototype.set=function(T,R){this.map[h(T)]=f(R)},g.prototype.forEach=function(T,R){for(var $ in this.map)this.map.hasOwnProperty($)&&T.call(R,this.map[$],$,this)},g.prototype.keys=function(){var T=[];return this.forEach(function(R,$){T.push($)}),p(T)},g.prototype.values=function(){var T=[];return this.forEach(function(R){T.push(R)}),p(T)},g.prototype.entries=function(){var T=[];return this.forEach(function(R,$){T.push([$,R])}),p(T)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(T){if(!T._noBody){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}}function y(T){return new Promise(function(R,$){T.onload=function(){R(T.result)},T.onerror=function(){$(T.error)}})}function b(T){var R=new FileReader,$=y(R);return R.readAsArrayBuffer(T),$}function v(T){var R=new FileReader,$=y(R),k=/charset=([A-Za-z0-9_-]+)/.exec(T.type),M=k?k[1]:"utf-8";return R.readAsText(T,M),$}function A(T){for(var R=new Uint8Array(T),$=new Array(R.length),k=0;k<R.length;k++)$[k]=String.fromCharCode(R[k]);return $.join("")}function _(T){if(T.slice)return T.slice(0);var R=new Uint8Array(T.byteLength);return R.set(new Uint8Array(T)),R.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:c.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:c.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():c.arrayBuffer&&c.blob&&l(T)?(this._bodyArrayBuffer=_(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||d(T))?this._bodyArrayBuffer=_(T):this._bodyText=T=Object.prototype.toString.call(T):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=w(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(T){var R=T.toUpperCase();return x.indexOf(R)>-1?R:T}function S(T,R){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var $=R.body;if(T instanceof S){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,R.headers||(this.headers=new g(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!$&&T._bodyInit!=null&&($=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new g(R.headers)),this.method=N(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in a){var z=new AbortController;return z.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody($),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function O(T){var R=new FormData;return T.trim().split("&").forEach(function($){if($){var k=$.split("="),M=k.shift().replace(/\+/g," "),z=k.join("=").replace(/\+/g," ");R.append(decodeURIComponent(M),decodeURIComponent(z))}}),R}function P(T){var R=new g,$=T.replace(/\r?\n[\t ]+/g," ");return $.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var M=k.split(":"),z=M.shift().trim();if(z){var K=M.join(":").trim();try{R.append(z,K)}catch(ne){console.warn("Response "+ne.message)}}}),R}I.call(S.prototype);function F(T,R){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new g(R.headers),this.url=R.url||"",this._initBody(T)}I.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var T=new F(null,{status:200,statusText:""});return T.ok=!1,T.status=0,T.type="error",T};var q=[301,302,303,307,308];F.redirect=function(T,R){if(q.indexOf(R)===-1)throw new RangeError("Invalid status code");return new F(null,{status:R,headers:{location:T}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(R,$){this.message=R,this.name=$;var k=Error(R);this.stack=k.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function B(T,R){return new Promise(function($,k){var M=new S(T,R);if(M.signal&&M.signal.aborted)return k(new o.DOMException("Aborted","AbortError"));var z=new XMLHttpRequest;function K(){z.abort()}z.onload=function(){var oe={statusText:z.statusText,headers:P(z.getAllResponseHeaders()||"")};M.url.indexOf("file://")===0&&(z.status<200||z.status>599)?oe.status=200:oe.status=z.status,oe.url="responseURL"in z?z.responseURL:oe.headers.get("X-Request-URL");var ae="response"in z?z.response:z.responseText;setTimeout(function(){$(new F(ae,oe))},0)},z.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},z.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},z.onabort=function(){setTimeout(function(){k(new o.DOMException("Aborted","AbortError"))},0)};function ne(oe){try{return oe===""&&a.location.href?a.location.href:oe}catch{return oe}}if(z.open(M.method,ne(M.url),!0),M.credentials==="include"?z.withCredentials=!0:M.credentials==="omit"&&(z.withCredentials=!1),"responseType"in z&&(c.blob?z.responseType="blob":c.arrayBuffer&&(z.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof g||a.Headers&&R.headers instanceof a.Headers)){var le=[];Object.getOwnPropertyNames(R.headers).forEach(function(oe){le.push(h(oe)),z.setRequestHeader(oe,f(R.headers[oe]))}),M.headers.forEach(function(oe,ae){le.indexOf(ae)===-1&&z.setRequestHeader(ae,oe)})}else M.headers.forEach(function(oe,ae){z.setRequestHeader(ae,oe)});M.signal&&(M.signal.addEventListener("abort",K),z.onreadystatechange=function(){z.readyState===4&&M.signal.removeEventListener("abort",K)}),z.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=g,a.Request=S,a.Response=F),o.Headers=g,o.Request=S,o.Response=F,o.fetch=B,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(I3,I3.exports);var WPe=I3.exports;const QF=im(WPe);var zPe=Object.defineProperty,HPe=Object.defineProperties,GPe=Object.getOwnPropertyDescriptors,JF=Object.getOwnPropertySymbols,qPe=Object.prototype.hasOwnProperty,VPe=Object.prototype.propertyIsEnumerable,ZF=(t,e,n)=>e in t?zPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,XF=(t,e)=>{for(var n in e||(e={}))qPe.call(e,n)&&ZF(t,n,e[n]);if(JF)for(var n of JF(e))VPe.call(e,n)&&ZF(t,n,e[n]);return t},ej=(t,e)=>HPe(t,GPe(e));const KPe={Accept:"application/json","Content-Type":"application/json"},YPe="POST",tj={headers:KPe,method:YPe},nj=10;let Yc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Ja.EventEmitter,this.isAvailable=!1,this.registering=!1,!qF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=md(e),r=await(await QF(this.url,ej(XF({},tj),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!qF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=md({id:1,jsonrpc:"2.0",method:"test",params:[]});await QF(e,ej(XF({},tj),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?zg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=$T(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return _Z(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>nj&&this.events.setMaxListeners(nj)}};const OE={getSIWX(){return be.state.siwx},async initializeIfEnabled(){var i;const t=be.state.siwx,e=H.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(H.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await vs.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=bt._getClient())==null?void 0:i.disconnect().catch(console.error)),qt.reset("Connect"),Oc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=be.state.siwx,e=ct.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork(),r=bt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Be.getConnectorId(n.chainNamespace)===Fe.CONNECTOR_ID.AUTH&&qt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),vs.close(),gr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!vs.state.open||qt.state.view==="ApproveTransaction")&&await vs.open({view:"SIWXSignMessage"}),i.isSmartAccount?Oc.showError("This application might not support Smart Accounts"):Oc.showError("Signature declined"),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await bt.disconnect():vs.close(),qt.reset("Connect"),gr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=be.state.siwx,e=ct.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=qt.state.view==="ApproveTransaction",r=qt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=OE.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=H.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Oc.showLoading("Authenticating...",{autoClose:!1}),Ke.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),gr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:OE.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:OE.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Oc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=H.state.activeChain;return{network:((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ke.state.preferredAccountTypes)==null?void 0:n[t])===Hs.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function VA(t,e){return Be.getConnectorId(t)===e}function QPe(t){const e=Array.from(H.state.chains.keys());let n=[];return t?(n.push([t,H.state.chains.get(t)]),VA(t,Fe.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&VA(r,Fe.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,H.state.chains.get(r)])}):VA(t,Fe.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&VA(r,Fe.CONNECTOR_ID.AUTH)&&n.push([r,H.state.chains.get(r)])})):n=Array.from(H.state.chains.entries()),n}const lo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},SI={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Fe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Fe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Fe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Fe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Fe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Fe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Fe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Fe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Fe.CONNECTOR_ID.COINBASE]:"Coinbase",[Fe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Fe.CONNECTOR_ID.LEDGER]:"Ledger",[Fe.CONNECTOR_ID.SAFE]:"Safe"}},FT={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${lo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},JPe=new AbortController,Nl={EmbeddedWalletAbortController:JPe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${ZPe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function ZPe(){return typeof window<"u"}const XPe={createLogger(t,e="error"){const n=Cm({level:e}),{logger:r}=OT({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},eOe="rpc.walletconnect.org";function rj(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const SO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],vy={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===eOe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Fe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Fe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return SO.includes(e)?rj(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:SI.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>vy.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ua(a.url,a.config))}),SO.includes(t.caipNetworkId)&&r.push(Ua(rj(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ua(a))}),mI(r)},extendWagmiTransports(t,e,n){if(SO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return mI([n,Ua(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Fe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Ye.getActiveCaipNetworkId(),n=H.getAllRequestedCaipNetworks(),r=Array.from(((c=H.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},xI={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Yi=cr({providers:{...xI},providerIds:{...xI}}),Un={state:Yi,subscribeKey(t,e){return pi(Yi,t,e)},subscribe(t){return hi(Yi,()=>{t(Yi)})},subscribeProviders(t){return hi(Yi.providers,()=>t(Yi.providers))},setProvider(t,e){e&&(Yi.providers[t]=jg(e))},getProvider(t){return Yi.providers[t]},setProviderId(t,e){e&&(Yi.providerIds[t]=e)},getProviderId(t){if(t)return Yi.providerIds[t]},reset(){Yi.providers={...xI},Yi.providerIds={...xI}},resetChain(t){Yi.providers[t]=void 0,Yi.providerIds[t]=void 0}},sj={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ds={set(t,e){Ko.isClient&&localStorage.setItem(`${qe.STORAGE_KEY}${t}`,e)},get(t){return Ko.isClient?localStorage.getItem(`${qe.STORAGE_KEY}${t}`):null},delete(t,e){Ko.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${qe.STORAGE_KEY}${t}`))}},KA=30*1e3,Ko={checkIfAllowedToTriggerEmail(){const t=Ds.get(qe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<KA){const n=Math.ceil((KA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ds.get(qe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<KA)return Math.ceil((KA-e)/1e3)}return 0},checkIfRequestExists(t){return Hs.NOT_SAFE_RPC_METHODS.includes(t.method)||Hs.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(sj.transactionHash))||(t==null?void 0:t.match(sj.signedMessage)))?qe.RPC_RESPONSE_TYPE_TX:qe.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Hs.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var wn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(wn||(wn={}));var N3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(N3||(N3={}));const Le=wn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),oh=t=>{switch(typeof t){case"undefined":return Le.undefined;case"string":return Le.string;case"number":return isNaN(t)?Le.nan:Le.number;case"boolean":return Le.boolean;case"function":return Le.function;case"bigint":return Le.bigint;case"symbol":return Le.symbol;case"object":return Array.isArray(t)?Le.array:t===null?Le.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Le.promise:typeof Map<"u"&&t instanceof Map?Le.map:typeof Set<"u"&&t instanceof Set?Le.set:typeof Date<"u"&&t instanceof Date?Le.date:Le.object;default:return Le.unknown}},xe=wn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),tOe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Fc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,wn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Fc.create=t=>new Fc(t);const qC=(t,e)=>{let n;switch(t.code){case xe.invalid_type:t.received===Le.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case xe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,wn.jsonStringifyReplacer)}`;break;case xe.unrecognized_keys:n=`Unrecognized key(s) in object: ${wn.joinValues(t.keys,", ")}`;break;case xe.invalid_union:n="Invalid input";break;case xe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${wn.joinValues(t.options)}`;break;case xe.invalid_enum_value:n=`Invalid enum value. Expected ${wn.joinValues(t.options)}, received '${t.received}'`;break;case xe.invalid_arguments:n="Invalid function arguments";break;case xe.invalid_return_type:n="Invalid function return type";break;case xe.invalid_date:n="Invalid date";break;case xe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:wn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case xe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case xe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case xe.custom:n="Invalid input";break;case xe.invalid_intersection_types:n="Intersection results could not be merged";break;case xe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case xe.not_finite:n="Number must be finite";break;default:n=e.defaultError,wn.assertNever(t)}return{message:n}};let NZ=qC;function nOe(t){NZ=t}function II(){return NZ}const NI=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},rOe=[];function He(t,e){const n=NI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,II(),qC].filter(r=>!!r)});t.common.issues.push(n)}class fi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Lt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return fi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Lt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Lt=Object.freeze({status:"aborted"}),TZ=t=>({status:"dirty",value:t}),Ui=t=>({status:"valid",value:t}),T3=t=>t.status==="aborted",R3=t=>t.status==="dirty",VC=t=>t.status==="valid",TI=t=>typeof Promise<"u"&&t instanceof Promise;var dt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(dt||(dt={}));class Zl{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ij=(t,e)=>{if(VC(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Fc(t.common.issues);return this._error=n,this._error}}};function Wt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Vt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return oh(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:oh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fi,ctx:{common:e.parent.common,data:e.data,parsedType:oh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(TI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oh(e)},i=this._parseSync({data:e,path:s.path,parent:s});return ij(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oh(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(TI(s)?s:Promise.resolve(s));return ij(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:xe.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new qc({schema:this,typeName:At.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return td.create(this,this._def)}nullable(){return Vg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return jc.create(this,this._def)}promise(){return jw.create(this,this._def)}or(e){return JC.create([this,e],this._def)}and(e){return ZC.create(this,e,this._def)}transform(e){return new qc({...Wt(this._def),schema:this,typeName:At.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new r_({...Wt(this._def),innerType:this,defaultValue:n,typeName:At.ZodDefault})}brand(){return new PZ({typeName:At.ZodBranded,type:this,...Wt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new kI({...Wt(this._def),innerType:this,catchValue:n,typeName:At.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return I1.create(this,e)}readonly(){return MI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const sOe=/^c[^\s-]{8,}$/i,iOe=/^[a-z][a-z0-9]*$/,oOe=/^[0-9A-HJKMNP-TV-Z]{26}$/,aOe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cOe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lOe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let xO;const uOe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,dOe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,hOe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function fOe(t,e){return!!((e==="v4"||!e)&&uOe.test(t)||(e==="v6"||!e)&&dOe.test(t))}class Mc extends Vt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Le.string){const i=this._getOrReturnCtx(e);return He(i,{code:xe.invalid_type,expected:Le.string,received:i.parsedType}),Lt}const r=new fi;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:xe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:xe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?He(s,{code:xe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&He(s,{code:xe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")cOe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"email",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")xO||(xO=new RegExp(lOe,"u")),xO.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"emoji",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")aOe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"uuid",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")sOe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cuid",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")iOe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cuid2",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")oOe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"ulid",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),He(s,{validation:"url",code:xe.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"regex",code:xe.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),He(s,{code:xe.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),He(s,{code:xe.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),He(s,{code:xe.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?hOe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{code:xe.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?fOe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"ip",code:xe.invalid_string,message:i.message}),r.dirty()):wn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:xe.invalid_string,...dt.errToObj(r)})}_addCheck(e){return new Mc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...dt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...dt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...dt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...dt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...dt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...dt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...dt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...dt.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...dt.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...dt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...dt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...dt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...dt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...dt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...dt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...dt.errToObj(n)})}nonempty(e){return this.min(1,dt.errToObj(e))}trim(){return new Mc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Mc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Mc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Mc.create=t=>{var e;return new Mc({checks:[],typeName:At.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Wt(t)})};function pOe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class xf extends Vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Le.number){const i=this._getOrReturnCtx(e);return He(i,{code:xe.invalid_type,expected:Le.number,received:i.parsedType}),Lt}let r;const s=new fi;for(const i of this._def.checks)i.kind==="int"?wn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:xe.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?pOe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:xe.not_finite,message:i.message}),s.dirty()):wn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,dt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,dt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,dt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,dt.toString(n))}setLimit(e,n,r,s){return new xf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:dt.toString(s)}]})}_addCheck(e){return new xf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:dt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:dt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:dt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:dt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:dt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:dt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:dt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:dt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:dt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&wn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}xf.create=t=>new xf({checks:[],typeName:At.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Wt(t)});class If extends Vt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Le.bigint){const i=this._getOrReturnCtx(e);return He(i,{code:xe.invalid_type,expected:Le.bigint,received:i.parsedType}),Lt}let r;const s=new fi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):wn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,dt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,dt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,dt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,dt.toString(n))}setLimit(e,n,r,s){return new If({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:dt.toString(s)}]})}_addCheck(e){return new If({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:dt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:dt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:dt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:dt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:dt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}If.create=t=>{var e;return new If({checks:[],typeName:At.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Wt(t)})};class KC extends Vt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Le.boolean){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Le.boolean,received:r.parsedType}),Lt}return Ui(e.data)}}KC.create=t=>new KC({typeName:At.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Wt(t)});class Gg extends Vt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Le.date){const i=this._getOrReturnCtx(e);return He(i,{code:xe.invalid_type,expected:Le.date,received:i.parsedType}),Lt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return He(i,{code:xe.invalid_date}),Lt}const r=new fi;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:xe.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:xe.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):wn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Gg({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:dt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:dt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Gg.create=t=>new Gg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:At.ZodDate,...Wt(t)});class RI extends Vt{_parse(e){if(this._getType(e)!==Le.symbol){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Le.symbol,received:r.parsedType}),Lt}return Ui(e.data)}}RI.create=t=>new RI({typeName:At.ZodSymbol,...Wt(t)});class YC extends Vt{_parse(e){if(this._getType(e)!==Le.undefined){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Le.undefined,received:r.parsedType}),Lt}return Ui(e.data)}}YC.create=t=>new YC({typeName:At.ZodUndefined,...Wt(t)});class QC extends Vt{_parse(e){if(this._getType(e)!==Le.null){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Le.null,received:r.parsedType}),Lt}return Ui(e.data)}}QC.create=t=>new QC({typeName:At.ZodNull,...Wt(t)});class Fw extends Vt{constructor(){super(...arguments),this._any=!0}_parse(e){return Ui(e.data)}}Fw.create=t=>new Fw({typeName:At.ZodAny,...Wt(t)});class wg extends Vt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ui(e.data)}}wg.create=t=>new wg({typeName:At.ZodUnknown,...Wt(t)});class yd extends Vt{_parse(e){const n=this._getOrReturnCtx(e);return He(n,{code:xe.invalid_type,expected:Le.never,received:n.parsedType}),Lt}}yd.create=t=>new yd({typeName:At.ZodNever,...Wt(t)});class PI extends Vt{_parse(e){if(this._getType(e)!==Le.undefined){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Le.void,received:r.parsedType}),Lt}return Ui(e.data)}}PI.create=t=>new PI({typeName:At.ZodVoid,...Wt(t)});class jc extends Vt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Le.array)return He(n,{code:xe.invalid_type,expected:Le.array,received:n.parsedType}),Lt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(He(n,{code:o?xe.too_big:xe.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(He(n,{code:xe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(He(n,{code:xe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Zl(n,o,n.path,a)))).then(o=>fi.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Zl(n,o,n.path,a)));return fi.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new jc({...this._def,minLength:{value:e,message:dt.toString(n)}})}max(e,n){return new jc({...this._def,maxLength:{value:e,message:dt.toString(n)}})}length(e,n){return new jc({...this._def,exactLength:{value:e,message:dt.toString(n)}})}nonempty(e){return this.min(1,e)}}jc.create=(t,e)=>new jc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:At.ZodArray,...Wt(e)});function Ey(t){if(t instanceof yr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=td.create(Ey(r))}return new yr({...t._def,shape:()=>e})}else return t instanceof jc?new jc({...t._def,type:Ey(t.element)}):t instanceof td?td.create(Ey(t.unwrap())):t instanceof Vg?Vg.create(Ey(t.unwrap())):t instanceof Xl?Xl.create(t.items.map(e=>Ey(e))):t}class yr extends Vt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=wn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Le.object){const l=this._getOrReturnCtx(e);return He(l,{code:xe.invalid_type,expected:Le.object,received:l.parsedType}),Lt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof yd&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Zl(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof yd){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(He(s,{code:xe.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Zl(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>fi.mergeObjectSync(r,l)):fi.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return dt.errToObj,new yr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=dt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new yr({...this._def,unknownKeys:"strip"})}passthrough(){return new yr({...this._def,unknownKeys:"passthrough"})}extend(e){return new yr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new yr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:At.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new yr({...this._def,catchall:e})}pick(e){const n={};return wn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new yr({...this._def,shape:()=>n})}omit(e){const n={};return wn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new yr({...this._def,shape:()=>n})}deepPartial(){return Ey(this)}partial(e){const n={};return wn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new yr({...this._def,shape:()=>n})}required(e){const n={};return wn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof td;)i=i._def.innerType;n[r]=i}}),new yr({...this._def,shape:()=>n})}keyof(){return RZ(wn.objectKeys(this.shape))}}yr.create=(t,e)=>new yr({shape:()=>t,unknownKeys:"strip",catchall:yd.create(),typeName:At.ZodObject,...Wt(e)});yr.strictCreate=(t,e)=>new yr({shape:()=>t,unknownKeys:"strict",catchall:yd.create(),typeName:At.ZodObject,...Wt(e)});yr.lazycreate=(t,e)=>new yr({shape:t,unknownKeys:"strip",catchall:yd.create(),typeName:At.ZodObject,...Wt(e)});class JC extends Vt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Fc(a.ctx.common.issues));return He(n,{code:xe.invalid_union,unionErrors:o}),Lt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Fc(c));return He(n,{code:xe.invalid_union,unionErrors:a}),Lt}}get options(){return this._def.options}}JC.create=(t,e)=>new JC({options:t,typeName:At.ZodUnion,...Wt(e)});const qS=t=>t instanceof e_?qS(t.schema):t instanceof qc?qS(t.innerType()):t instanceof t_?[t.value]:t instanceof Nf?t.options:t instanceof n_?Object.keys(t.enum):t instanceof r_?qS(t._def.innerType):t instanceof YC?[void 0]:t instanceof QC?[null]:null;class jT extends Vt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.object)return He(n,{code:xe.invalid_type,expected:Le.object,received:n.parsedType}),Lt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(He(n,{code:xe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Lt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=qS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new jT({typeName:At.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Wt(r)})}}function P3(t,e){const n=oh(t),r=oh(e);if(t===e)return{valid:!0,data:t};if(n===Le.object&&r===Le.object){const s=wn.objectKeys(e),i=wn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=P3(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Le.array&&r===Le.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=P3(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Le.date&&r===Le.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ZC extends Vt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(T3(i)||T3(o))return Lt;const a=P3(i.value,o.value);return a.valid?((R3(i)||R3(o))&&n.dirty(),{status:n.value,value:a.data}):(He(r,{code:xe.invalid_intersection_types}),Lt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ZC.create=(t,e,n)=>new ZC({left:t,right:e,typeName:At.ZodIntersection,...Wt(n)});class Xl extends Vt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.array)return He(r,{code:xe.invalid_type,expected:Le.array,received:r.parsedType}),Lt;if(r.data.length<this._def.items.length)return He(r,{code:xe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Lt;!this._def.rest&&r.data.length>this._def.items.length&&(He(r,{code:xe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Zl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>fi.mergeArray(n,o)):fi.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Xl({...this._def,rest:e})}}Xl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xl({items:t,typeName:At.ZodTuple,rest:null,...Wt(e)})};class XC extends Vt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.object)return He(r,{code:xe.invalid_type,expected:Le.object,received:r.parsedType}),Lt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Zl(r,a,r.path,a)),value:o._parse(new Zl(r,r.data[a],r.path,a))});return r.common.async?fi.mergeObjectAsync(n,s):fi.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Vt?new XC({keyType:e,valueType:n,typeName:At.ZodRecord,...Wt(r)}):new XC({keyType:Mc.create(),valueType:e,typeName:At.ZodRecord,...Wt(n)})}}class OI extends Vt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.map)return He(r,{code:xe.invalid_type,expected:Le.map,received:r.parsedType}),Lt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Zl(r,a,r.path,[l,"key"])),value:i._parse(new Zl(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Lt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Lt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}OI.create=(t,e,n)=>new OI({valueType:e,keyType:t,typeName:At.ZodMap,...Wt(n)});class qg extends Vt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.set)return He(r,{code:xe.invalid_type,expected:Le.set,received:r.parsedType}),Lt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(He(r,{code:xe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(He(r,{code:xe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Lt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Zl(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new qg({...this._def,minSize:{value:e,message:dt.toString(n)}})}max(e,n){return new qg({...this._def,maxSize:{value:e,message:dt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}qg.create=(t,e)=>new qg({valueType:t,minSize:null,maxSize:null,typeName:At.ZodSet,...Wt(e)});class c0 extends Vt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.function)return He(n,{code:xe.invalid_type,expected:Le.function,received:n.parsedType}),Lt;function r(a,c){return NI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,II(),qC].filter(l=>!!l),issueData:{code:xe.invalid_arguments,argumentsError:c}})}function s(a,c){return NI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,II(),qC].filter(l=>!!l),issueData:{code:xe.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof jw){const a=this;return Ui(async function(...c){const l=new Fc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Ui(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Fc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Fc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new c0({...this._def,args:Xl.create(e).rest(wg.create())})}returns(e){return new c0({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new c0({args:e||Xl.create([]).rest(wg.create()),returns:n||wg.create(),typeName:At.ZodFunction,...Wt(r)})}}class e_ extends Vt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}e_.create=(t,e)=>new e_({getter:t,typeName:At.ZodLazy,...Wt(e)});class t_ extends Vt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return He(n,{received:n.data,code:xe.invalid_literal,expected:this._def.value}),Lt}return{status:"valid",value:e.data}}get value(){return this._def.value}}t_.create=(t,e)=>new t_({value:t,typeName:At.ZodLiteral,...Wt(e)});function RZ(t,e){return new Nf({values:t,typeName:At.ZodEnum,...Wt(e)})}class Nf extends Vt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return He(n,{expected:wn.joinValues(r),received:n.parsedType,code:xe.invalid_type}),Lt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return He(n,{received:n.data,code:xe.invalid_enum_value,options:r}),Lt}return Ui(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Nf.create(e)}exclude(e){return Nf.create(this.options.filter(n=>!e.includes(n)))}}Nf.create=RZ;class n_ extends Vt{_parse(e){const n=wn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Le.string&&r.parsedType!==Le.number){const s=wn.objectValues(n);return He(r,{expected:wn.joinValues(s),received:r.parsedType,code:xe.invalid_type}),Lt}if(n.indexOf(e.data)===-1){const s=wn.objectValues(n);return He(r,{received:r.data,code:xe.invalid_enum_value,options:s}),Lt}return Ui(e.data)}get enum(){return this._def.values}}n_.create=(t,e)=>new n_({values:t,typeName:At.ZodNativeEnum,...Wt(e)});class jw extends Vt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.promise&&n.common.async===!1)return He(n,{code:xe.invalid_type,expected:Le.promise,received:n.parsedType}),Lt;const r=n.parsedType===Le.promise?n.data:Promise.resolve(n.data);return Ui(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}jw.create=(t,e)=>new jw({type:t,typeName:At.ZodPromise,...Wt(e)});class qc extends Vt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===At.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{He(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Lt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Lt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!VC(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>VC(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);wn.assertNever(s)}}qc.create=(t,e,n)=>new qc({schema:t,typeName:At.ZodEffects,effect:e,...Wt(n)});qc.createWithPreprocess=(t,e,n)=>new qc({schema:e,effect:{type:"preprocess",transform:t},typeName:At.ZodEffects,...Wt(n)});class td extends Vt{_parse(e){return this._getType(e)===Le.undefined?Ui(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}td.create=(t,e)=>new td({innerType:t,typeName:At.ZodOptional,...Wt(e)});class Vg extends Vt{_parse(e){return this._getType(e)===Le.null?Ui(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Vg.create=(t,e)=>new Vg({innerType:t,typeName:At.ZodNullable,...Wt(e)});class r_ extends Vt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Le.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}r_.create=(t,e)=>new r_({innerType:t,typeName:At.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Wt(e)});class kI extends Vt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return TI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Fc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Fc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}kI.create=(t,e)=>new kI({innerType:t,typeName:At.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Wt(e)});class DI extends Vt{_parse(e){if(this._getType(e)!==Le.nan){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Le.nan,received:r.parsedType}),Lt}return{status:"valid",value:e.data}}}DI.create=t=>new DI({typeName:At.ZodNaN,...Wt(t)});const gOe=Symbol("zod_brand");class PZ extends Vt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class I1 extends Vt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Lt:i.status==="dirty"?(n.dirty(),TZ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Lt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new I1({in:e,out:n,typeName:At.ZodPipeline})}}class MI extends Vt{_parse(e){const n=this._def.innerType._parse(e);return VC(n)&&(n.value=Object.freeze(n.value)),n}}MI.create=(t,e)=>new MI({innerType:t,typeName:At.ZodReadonly,...Wt(e)});const OZ=(t,e={},n)=>t?Fw.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Fw.create(),mOe={object:yr.lazycreate};var At;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(At||(At={}));const yOe=(t,e={message:`Input not instance of ${t.name}`})=>OZ(n=>n instanceof t,e),kZ=Mc.create,DZ=xf.create,wOe=DI.create,bOe=If.create,MZ=KC.create,vOe=Gg.create,EOe=RI.create,COe=YC.create,_Oe=QC.create,AOe=Fw.create,SOe=wg.create,xOe=yd.create,IOe=PI.create,NOe=jc.create,TOe=yr.create,ROe=yr.strictCreate,POe=JC.create,OOe=jT.create,kOe=ZC.create,DOe=Xl.create,MOe=XC.create,LOe=OI.create,UOe=qg.create,$Oe=c0.create,BOe=e_.create,FOe=t_.create,jOe=Nf.create,WOe=n_.create,zOe=jw.create,oj=qc.create,HOe=td.create,GOe=Vg.create,qOe=qc.createWithPreprocess,VOe=I1.create,KOe=()=>kZ().optional(),YOe=()=>DZ().optional(),QOe=()=>MZ().optional(),JOe={string:t=>Mc.create({...t,coerce:!0}),number:t=>xf.create({...t,coerce:!0}),boolean:t=>KC.create({...t,coerce:!0}),bigint:t=>If.create({...t,coerce:!0}),date:t=>Gg.create({...t,coerce:!0})},ZOe=Lt;var E=Object.freeze({__proto__:null,defaultErrorMap:qC,setErrorMap:nOe,getErrorMap:II,makeIssue:NI,EMPTY_PATH:rOe,addIssueToContext:He,ParseStatus:fi,INVALID:Lt,DIRTY:TZ,OK:Ui,isAborted:T3,isDirty:R3,isValid:VC,isAsync:TI,get util(){return wn},get objectUtil(){return N3},ZodParsedType:Le,getParsedType:oh,ZodType:Vt,ZodString:Mc,ZodNumber:xf,ZodBigInt:If,ZodBoolean:KC,ZodDate:Gg,ZodSymbol:RI,ZodUndefined:YC,ZodNull:QC,ZodAny:Fw,ZodUnknown:wg,ZodNever:yd,ZodVoid:PI,ZodArray:jc,ZodObject:yr,ZodUnion:JC,ZodDiscriminatedUnion:jT,ZodIntersection:ZC,ZodTuple:Xl,ZodRecord:XC,ZodMap:OI,ZodSet:qg,ZodFunction:c0,ZodLazy:e_,ZodLiteral:t_,ZodEnum:Nf,ZodNativeEnum:n_,ZodPromise:jw,ZodEffects:qc,ZodTransformer:qc,ZodOptional:td,ZodNullable:Vg,ZodDefault:r_,ZodCatch:kI,ZodNaN:DI,BRAND:gOe,ZodBranded:PZ,ZodPipeline:I1,ZodReadonly:MI,custom:OZ,Schema:Vt,ZodSchema:Vt,late:mOe,get ZodFirstPartyTypeKind(){return At},coerce:JOe,any:AOe,array:NOe,bigint:bOe,boolean:MZ,date:vOe,discriminatedUnion:OOe,effect:oj,enum:jOe,function:$Oe,instanceof:yOe,intersection:kOe,lazy:BOe,literal:FOe,map:LOe,nan:wOe,nativeEnum:WOe,never:xOe,null:_Oe,nullable:GOe,number:DZ,object:TOe,oboolean:QOe,onumber:YOe,optional:HOe,ostring:KOe,pipeline:VOe,preprocess:qOe,promise:zOe,record:MOe,set:UOe,strictObject:ROe,string:kZ,symbol:EOe,transformer:oj,tuple:DOe,undefined:COe,union:POe,unknown:SOe,void:IOe,NEVER:ZOe,ZodIssueCode:xe,quotelessJson:tOe,ZodError:Fc});const Ar=E.object({message:E.string()});function We(t){return E.literal(qe[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const XOe=E.object({chainId:E.string().or(E.number())}),e2e=E.object({email:E.string().email()}),t2e=E.object({otp:E.string()}),n2e=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),r2e=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),s2e=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),i2e=E.object({email:E.string().email()}),o2e=E.object({otp:E.string()}),a2e=E.object({otp:E.string()}),c2e=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),l2e=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),u2e=E.object({type:E.string()}),d2e=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),h2e=E.object({url:E.string()}),f2e=E.object({userName:E.string()}),p2e=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Hs.ACCOUNT_TYPES.EOA,Hs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),g2e=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),m2e=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Hs.ACCOUNT_TYPES.EOA,Hs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),y2e=E.object({uri:E.string()}),w2e=E.object({isConnected:E.boolean()}),b2e=E.object({chainId:E.string().or(E.number())}),v2e=E.object({chainId:E.string().or(E.number())}),E2e=E.object({newEmail:E.string().email()}),C2e=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const _2e=E.object({version:E.string().optional()}),A2e=E.object({type:E.string(),address:E.string()}),S2e=E.any(),x2e=E.object({method:E.literal("eth_accounts")}),I2e=E.object({method:E.literal("eth_blockNumber")}),N2e=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),T2e=E.object({method:E.literal("eth_chainId")}),R2e=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),P2e=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),O2e=E.object({method:E.literal("eth_gasPrice")}),k2e=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),D2e=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),M2e=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),L2e=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),U2e=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),$2e=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),B2e=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),F2e=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),j2e=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),W2e=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),z2e=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),H2e=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),G2e=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),q2e=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),V2e=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),K2e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),Y2e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),Q2e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),J2e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),Z2e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),X2e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),eke=E.object({method:E.literal("eth_newBlockFilter")}),tke=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),nke=E.object({method:E.literal("eth_newPendingTransactionFilter")}),rke=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),ske=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),ike=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),aj=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),oke=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),ake=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),cke=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),lke=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),uke=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),dke=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),hke=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),fke=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),pke=E.object({method:E.literal("wallet_getCapabilities")}),gke=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),mke=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),yke=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),cj=E.object({token:E.string()}),ze=E.object({id:E.string().optional()}),bv={appEvent:ze.extend({type:We("APP_SWITCH_NETWORK"),payload:XOe}).or(ze.extend({type:We("APP_CONNECT_EMAIL"),payload:e2e})).or(ze.extend({type:We("APP_CONNECT_DEVICE")})).or(ze.extend({type:We("APP_CONNECT_OTP"),payload:t2e})).or(ze.extend({type:We("APP_CONNECT_SOCIAL"),payload:n2e})).or(ze.extend({type:We("APP_GET_FARCASTER_URI")})).or(ze.extend({type:We("APP_CONNECT_FARCASTER")})).or(ze.extend({type:We("APP_GET_USER"),payload:E.optional(r2e)})).or(ze.extend({type:We("APP_GET_SOCIAL_REDIRECT_URI"),payload:s2e})).or(ze.extend({type:We("APP_SIGN_OUT")})).or(ze.extend({type:We("APP_IS_CONNECTED"),payload:E.optional(cj)})).or(ze.extend({type:We("APP_GET_CHAIN_ID")})).or(ze.extend({type:We("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(ze.extend({type:We("APP_INIT_SMART_ACCOUNT")})).or(ze.extend({type:We("APP_SET_PREFERRED_ACCOUNT"),payload:u2e})).or(ze.extend({type:We("APP_RPC_REQUEST"),payload:aj.or(yke).or(x2e).or(I2e).or(N2e).or(T2e).or(R2e).or(P2e).or(O2e).or(k2e).or(D2e).or(M2e).or(L2e).or(U2e).or($2e).or(B2e).or(F2e).or(j2e).or(W2e).or(z2e).or(H2e).or(G2e).or(q2e).or(V2e).or(K2e).or(Y2e).or(Q2e).or(J2e).or(Z2e).or(X2e).or(eke).or(tke).or(nke).or(rke).or(ske).or(ike).or(aj).or(oke).or(ake).or(cke).or(lke).or(uke).or(dke).or(fke).or(hke).or(pke).or(gke).or(mke)})).or(ze.extend({type:We("APP_UPDATE_EMAIL"),payload:i2e})).or(ze.extend({type:We("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:o2e})).or(ze.extend({type:We("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:a2e})).or(ze.extend({type:We("APP_SYNC_THEME"),payload:c2e})).or(ze.extend({type:We("APP_SYNC_DAPP_DATA"),payload:l2e})).or(ze.extend({type:We("APP_RELOAD")})),frameEvent:ze.extend({type:We("FRAME_SWITCH_NETWORK_ERROR"),payload:Ar}).or(ze.extend({type:We("FRAME_SWITCH_NETWORK_SUCCESS"),payload:v2e})).or(ze.extend({type:We("FRAME_CONNECT_EMAIL_SUCCESS"),payload:d2e})).or(ze.extend({type:We("FRAME_CONNECT_EMAIL_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:h2e})).or(ze.extend({type:We("FRAME_GET_FARCASTER_URI_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:f2e})).or(ze.extend({type:We("FRAME_CONNECT_FARCASTER_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_CONNECT_OTP_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_CONNECT_OTP_SUCCESS")})).or(ze.extend({type:We("FRAME_CONNECT_DEVICE_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_CONNECT_DEVICE_SUCCESS")})).or(ze.extend({type:We("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:p2e})).or(ze.extend({type:We("FRAME_CONNECT_SOCIAL_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_GET_USER_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_GET_USER_SUCCESS"),payload:m2e})).or(ze.extend({type:We("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:y2e})).or(ze.extend({type:We("FRAME_SIGN_OUT_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_SIGN_OUT_SUCCESS")})).or(ze.extend({type:We("FRAME_IS_CONNECTED_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_IS_CONNECTED_SUCCESS"),payload:w2e})).or(ze.extend({type:We("FRAME_GET_CHAIN_ID_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_GET_CHAIN_ID_SUCCESS"),payload:b2e})).or(ze.extend({type:We("FRAME_RPC_REQUEST_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_RPC_REQUEST_SUCCESS"),payload:S2e})).or(ze.extend({type:We("FRAME_SESSION_UPDATE"),payload:cj})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_SUCCESS"),payload:g2e})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:E2e})).or(ze.extend({type:We("FRAME_SYNC_THEME_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_SYNC_THEME_SUCCESS")})).or(ze.extend({type:We("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(ze.extend({type:We("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:C2e})).or(ze.extend({type:We("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:A2e})).or(ze.extend({type:We("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_READY"),payload:_2e})).or(ze.extend({type:We("FRAME_RELOAD_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_RELOAD_SUCCESS")}))};function IO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let wke=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=Fe.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!IO(qe.FRAME_EVENT_KEY,l))return;const u=bv.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Ko.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Ko.isClient&&window.addEventListener("message",({data:o})=>{if(!IO(qe.FRAME_EVENT_KEY,o))return;const a=bv.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Ko.isClient&&window.addEventListener("message",({data:o})=>{if(!IO(qe.APP_EVENT_KEY,o))return;const a=bv.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Ko.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");bv.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Ko.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");bv.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Ko.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${rSe}?projectId=${e}&chainId=${r}&version=${iSe}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},bke=class{constructor(e){var i;const n=Cm({level:sSe}),{logger:r,chunkLoggerController:s}=OT({opts:n});this.logger=Ys(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},vke=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new bke(e)),this.abortController=i,this.w3mFrame=new wke({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ds.get(qe.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ds.get(qe.EMAIL)}getUsername(){return Ds.get(qe.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:qe.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Ko.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:qe.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:qe.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:qe.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:qe.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:qe.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:qe.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:qe.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:qe.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:qe.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:qe.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:qe.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:qe.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:qe.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:qe.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:qe.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:qe.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:qe.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:qe.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:qe.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:qe.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Hs.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:qe.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_IS_CONNECTED_ERROR&&e(),n.type===qe.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===qe.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Hs.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===qe.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Hs.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[qe.APP_SYNC_DAPP_DATA,qe.APP_SYNC_THEME,qe.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[qe.APP_CONNECT_EMAIL,qe.APP_CONNECT_DEVICE,qe.APP_CONNECT_OTP,qe.APP_CONNECT_SOCIAL,qe.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,A;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ds.set(qe.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ds.set(qe.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ds.set(qe.EMAIL,e),Ds.set(qe.EMAIL_LOGIN_USED_KEY,"true"),Ds.delete(qe.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ds.delete(qe.EMAIL_LOGIN_USED_KEY),Ds.delete(qe.EMAIL),Ds.delete(qe.LAST_USED_CHAIN_KEY),Ds.delete(qe.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ds.set(qe.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ds.get(qe.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ds.set(qe.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},Eke=class VS{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return VS.instance||(VS.instance=new vke({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),VS.instance}};function Cke(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function ds(t,...e){try{return Cke(t(...e))}catch(n){return Promise.reject(n)}}function _ke(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Ake(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function KS(t){if(_ke(t))return String(t);if(Ake(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return KS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const O3="base64:";function Ske(t){return typeof t=="string"?t:O3+Nke(t)}function xke(t){return typeof t!="string"||!t.startsWith(O3)?t:Ike(t.slice(O3.length))}function Ike(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Nke(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function eo(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function Tke(...t){return eo(t.join(":"))}function YA(t){return t=eo(t),t?t+":":""}function Rke(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function Pke(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const Oke="memory",kke=()=>{const t=new Map;return{name:Oke,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Dke(t={}){const e={mounts:{"":t.driver||kke()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=eo(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await lj(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=eo(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:y,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=eo(l);const{relativeKey:d,driver:h}=n(l);return ds(h.hasItem,d,u)},getItem(l,u={}){l=eo(l);const{relativeKey:d,driver:h}=n(l);return ds(h.getItem,d,u).then(f=>WA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?ds(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:Tke(d.base,f.key),value:WA(f.value)}))):Promise.all(d.items.map(h=>ds(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:WA(f)})))))},getItemRaw(l,u={}){l=eo(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?ds(h.getItemRaw,d,u):ds(h.getItem,d,u).then(f=>xke(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=eo(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await ds(f.setItem,h,KS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return ds(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:KS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>ds(d.driver.setItem,h.relativeKey,KS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=eo(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await ds(f.setItemRaw,h,u,d);else if(f.setItem)await ds(f.setItem,h,Ske(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=eo(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await ds(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await ds(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=eo(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await ds(h.getMeta,d,u)),!u.nativeOnly){const p=await ds(h.getItem,d+"$",u).then(g=>WA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=YA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await ds(y.driver.getKeys,y.relativeBase,u);for(const v of b){const A=y.mountpoint+eo(v);h.some(_=>A.startsWith(_))||f.push(A)}h=[y.mountpoint,...h.filter(v=>!v.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||Rke(y,u.maxDepth))&&Pke(y,l))},async clear(l,u={}){l=YA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return ds(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>uj(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=YA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(lj(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=YA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await uj(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=eo(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=eo(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function lj(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function uj(t){typeof t.dispose=="function"&&await ds(t.dispose)}const Mke="idb-keyval";var Lke=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=DJ(t.dbName,t.storeName)),{name:Mke,options:t,async hasItem(s){return!(typeof await fF(n(s),r)>"u")},async getItem(s){return await fF(n(s),r)??null},setItem(s,i){return oxe(n(s),i,r)},removeItem(s){return axe(n(s),r)},getKeys(){return uxe(r)},clear(){return cxe(r)}}};const Uke="WALLET_CONNECT_V2_INDEXED_DB",$ke="keyvaluestorage";let Bke=class{constructor(){this.indexedDb=Dke({driver:Lke({dbName:Uke,storeName:$ke})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,md(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var NO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},YS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof NO<"u"&&NO.localStorage?YS.exports=NO.localStorage:typeof window<"u"&&window.localStorage?YS.exports=window.localStorage:YS.exports=new e})();function Fke(t){var e;return[t[0],zg((e=t[1])!=null?e:"")]}let jke=class{constructor(){this.localStorage=YS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Fke)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return zg(n)}async setItem(e,n){this.localStorage.setItem(e,md(n))}async removeItem(e){this.localStorage.removeItem(e)}};const Wke="wc_storage_version",dj=1,zke=async(t,e,n)=>{const r=Wke,s=await e.getItem(r);if(s&&s>=dj){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,dj),n(e),Hke(t,o)},Hke=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let Gke=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new jke;this.storage=e;try{const n=new Bke;zke(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var qke=Object.defineProperty,Vke=(t,e,n)=>e in t?qke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hj=(t,e,n)=>Vke(t,typeof e!="symbol"?e+"":e,n);let Kke=class extends bm{constructor(e){super(),this.opts=e,hj(this,"protocol","wc"),hj(this,"version",2)}};var Yke=Object.defineProperty,Qke=(t,e,n)=>e in t?Yke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jke=(t,e,n)=>Qke(t,e+"",n);let Zke=class extends bm{constructor(e,n){super(),this.core=e,this.logger=n,Jke(this,"records",new Map)}},Xke=class{constructor(e,n){this.logger=e,this.core=n}},eDe=class extends bm{constructor(e,n){super(),this.relayer=e,this.logger=n}},tDe=class extends bm{constructor(e){super()}},nDe=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},rDe=class extends bm{constructor(e,n){super(),this.relayer=e,this.logger=n}},sDe=class extends bm{constructor(e,n){super(),this.core=e,this.logger=n}},iDe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},oDe=class{constructor(e,n){this.projectId=e,this.logger=n}},aDe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var cDe=Object.defineProperty,lDe=(t,e,n)=>e in t?cDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fj=(t,e,n)=>lDe(t,typeof e!="symbol"?e+"":e,n);let uDe=class{constructor(e){this.opts=e,fj(this,"protocol","wc"),fj(this,"version",2)}},dDe=class{constructor(e){this.client=e}};function s_(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function pj(t){return s_(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const LZ="2.23.2";let vv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${LZ}`};class Kg extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Kg?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Kg&&n.cause.docsPath||n.docsPath,i=(a=vv.getDocsUrl)==null?void 0:a.call(vv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...vv.version?[`Version: ${vv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=LZ}walk(e){return UZ(this,e)}}function UZ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?UZ(t.cause,e):e?null:t}class $Z extends Kg{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Rb(t,{dir:e,size:n=32}={}){return typeof t=="string"?hDe(t,{dir:e,size:n}):fDe(t,{dir:e,size:n})}function hDe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new $Z({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function fDe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new $Z({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class pDe extends Kg{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class gDe extends Kg{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Pb(t,{size:e}){if(pj(t)>e)throw new gDe({givenSize:pj(t),maxSize:e})}function k3(t,e={}){const{signed:n}=e;e.size&&Pb(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function mDe(t,e={}){return Number(k3(t,e))}const yDe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function D3(t,e={}){return typeof t=="number"||typeof t=="bigint"?FZ(t,e):typeof t=="string"?vDe(t,e):typeof t=="boolean"?wDe(t,e):BZ(t,e)}function wDe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Pb(n,{size:e.size}),Rb(n,{size:e.size})):n}function BZ(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=yDe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Pb(r,{size:e.size}),Rb(r,{dir:"right",size:e.size})):r}function FZ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new pDe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Rb(a,{size:r}):a}const bDe=new TextEncoder;function vDe(t,e={}){const n=bDe.encode(t);return BZ(n,e)}const EDe=new TextEncoder;function CDe(t,e={}){return typeof t=="number"||typeof t=="bigint"?ADe(t,e):typeof t=="boolean"?_De(t,e):s_(t)?jZ(t,e):WZ(t,e)}function _De(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Pb(n,{size:e.size}),Rb(n,{size:e.size})):n}const mu={zero:48,nine:57,A:65,F:70,a:97,f:102};function gj(t){if(t>=mu.zero&&t<=mu.nine)return t-mu.zero;if(t>=mu.A&&t<=mu.F)return t-(mu.A-10);if(t>=mu.a&&t<=mu.f)return t-(mu.a-10)}function jZ(t,e={}){let n=t;e.size&&(Pb(n,{size:e.size}),n=Rb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=gj(r.charCodeAt(a++)),l=gj(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Kg(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function ADe(t,e){const n=FZ(t,e);return jZ(n)}function WZ(t,e={}){const n=EDe.encode(t);return typeof e.size=="number"?(Pb(n,{size:e.size}),Rb(n,{dir:"right",size:e.size})):n}function LI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function SDe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function WT(t,...e){if(!SDe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function mKe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");LI(t.outputLen),LI(t.blockLen)}function mj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function xDe(t,e){WT(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const QA=BigInt(2**32-1),yj=BigInt(32);function IDe(t,e=!1){return e?{h:Number(t&QA),l:Number(t>>yj&QA)}:{h:Number(t>>yj&QA)|0,l:Number(t&QA)|0}}function NDe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=IDe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const TDe=(t,e,n)=>t<<n|e>>>32-n,RDe=(t,e,n)=>e<<n|t>>>32-n,PDe=(t,e,n)=>e<<n-32|t>>>64-n,ODe=(t,e,n)=>t<<n-32|e>>>64-n,Zm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kDe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function yKe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function wKe(t,e){return t<<32-e|t>>>e}const wj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function DDe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function bj(t){for(let e=0;e<t.length;e++)t[e]=DDe(t[e])}function MDe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function zZ(t){return typeof t=="string"&&(t=MDe(t)),WT(t),t}function bKe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];WT(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let LDe=class{clone(){return this._cloneInto()}};function UDe(t){const e=r=>t().update(zZ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function EKe(t=32){if(Zm&&typeof Zm.getRandomValues=="function")return Zm.getRandomValues(new Uint8Array(t));if(Zm&&typeof Zm.randomBytes=="function")return Zm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const HZ=[],GZ=[],qZ=[],$De=BigInt(0),Ev=BigInt(1),BDe=BigInt(2),FDe=BigInt(7),jDe=BigInt(256),WDe=BigInt(113);for(let t=0,e=Ev,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],HZ.push(2*(5*r+n)),GZ.push((t+1)*(t+2)/2%64);let s=$De;for(let i=0;i<7;i++)e=(e<<Ev^(e>>FDe)*WDe)%jDe,e&BDe&&(s^=Ev<<(Ev<<BigInt(i))-Ev);qZ.push(s)}const[zDe,HDe]=NDe(qZ,!0),vj=(t,e,n)=>n>32?PDe(t,e,n):TDe(t,e,n),Ej=(t,e,n)=>n>32?ODe(t,e,n):RDe(t,e,n);function GDe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=vj(l,u,1)^n[a],h=Ej(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=GZ[o],c=vj(s,i,a),l=Ej(s,i,a),u=HZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=zDe[r],t[1]^=HDe[r]}n.fill(0)}let qDe=class VZ extends LDe{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,LI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=kDe(this.state)}keccak(){wj||bj(this.state32),GDe(this.state32,this.rounds),wj||bj(this.state32),this.posOut=0,this.pos=0}update(e){mj(this);const{blockLen:n,state:r}=this;e=zZ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){mj(this,!1),WT(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return LI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(xDe(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new VZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const VDe=(t,e,n)=>UDe(()=>new qDe(e,t,n)),KDe=VDe(1,136,256/8);function KZ(t,e){const n=e||"hex",r=KDe(s_(t,{strict:!1})?CDe(t):t);return n==="bytes"?r:D3(r)}class YDe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const TO=new YDe(8192);function QDe(t,e){if(TO.has(`${t}.${e}`))return TO.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=KZ(WZ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return TO.set(`${t}.${e}`,i),i}function JDe(t){const e=KZ(`0x${t.substring(4)}`).substring(26);return QDe(`0x${e}`)}async function ZDe({hash:t,signature:e}){const n=s_(t)?t:D3(t),{secp256k1:r}=await ci(async()=>{const{secp256k1:o}=await import("./secp256k1-B7MnuUmq.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=Cj(f);return new r.Signature(k3(l),k3(u)).addRecoveryBit(p)}const o=s_(e)?e:D3(e),a=mDe(`0x${o.slice(130)}`),c=Cj(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Cj(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function XDe({hash:t,signature:e}){return JDe(await ZDe({hash:t,signature:e}))}var e3e={};const t3e=":";function l0(t){const[e,n]=t.split(t3e);return{namespace:e,reference:n}}function YZ(t,e){return t.includes(":")?[t]:e.chains||[]}var n3e=Object.defineProperty,r3e=Object.defineProperties,s3e=Object.getOwnPropertyDescriptors,_j=Object.getOwnPropertySymbols,i3e=Object.prototype.hasOwnProperty,o3e=Object.prototype.propertyIsEnumerable,Aj=(t,e,n)=>e in t?n3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sj=(t,e)=>{for(var n in e||(e={}))i3e.call(e,n)&&Aj(t,n,e[n]);if(_j)for(var n of _j(e))o3e.call(e,n)&&Aj(t,n,e[n]);return t},a3e=(t,e)=>r3e(t,s3e(e));const c3e="ReactNative",Jo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},l3e="js";function UI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Bf(){return!Hg()&&!!HU()&&navigator.product===c3e}function u3e(){return Bf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function d3e(){return Bf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Ob(){return!UI()&&!!HU()&&!!Hg()}function N1(){return Bf()?Jo.reactNative:UI()?Jo.node:Ob()?Jo.browser:Jo.unknown}function xj(){var t;try{return Bf()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function h3e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function f3e(t){var e,n;const r=QZ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),a3e(Sj(Sj({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function QZ(){return pZ()||{name:"",description:"",url:"",icons:[""]}}function p3e(){if(N1()===Jo.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=$Te();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function g3e(){var t;const e=N1();return e===Jo.browser?[e,((t=fZ())==null?void 0:t.host)||"unknown"].join(":"):e}function JZ(t,e,n){const r=p3e(),s=g3e();return[[t,e].join("-"),[l3e,n].join("-"),r,s].join("/")}function m3e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=JZ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=h3e(l[1]||"",d);return l[0]+"?"+h}function Dp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function M3(t){return Object.fromEntries(t.entries())}function L3(t){return new Map(Object.entries(t))}function cp(t=Te.FIVE_MINUTES,e){const n=Te.toMiliseconds(t||Te.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function jh(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function ZZ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function y3e(t){return ZZ("topic",t)}function w3e(t){return ZZ("id",t)}function XZ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Jr(t,e){return Te.fromMiliseconds(Date.now()+Te.toMiliseconds(t))}function nh(t){return Date.now()>=Te.toMiliseconds(t)}function Sn(t,e){return`${t}${e?`:${e}`:""}`}function ql(t=[],e=[]){return[...new Set([...t,...e])]}async function b3e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=v3e(i,t,e),a=N1();if(a===Jo.browser){if(!((r=Hg())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}E3e(o)}else a===Jo.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function v3e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${S3e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function E3e(t){let e="_self";A3e()?e="_top":(_3e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function C3e(t,e){let n="";try{if(Ob()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function Ij(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function Nj(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function KU(){return typeof process<"u"&&e3e.IS_VITEST==="true"}function _3e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function A3e(){try{return window.self!==window.top}catch{return!1}}function S3e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function eX(t){return Buffer.from(t,"base64").toString("utf-8")}function x3e(t){return new Promise(e=>setTimeout(e,t))}function i_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function I3e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function T1(t,...e){if(!I3e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function YU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");i_(t.outputLen),i_(t.blockLen)}function Ww(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function tX(t,e){T1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const JA=BigInt(2**32-1),Tj=BigInt(32);function N3e(t,e=!1){return e?{h:Number(t&JA),l:Number(t>>Tj&JA)}:{h:Number(t>>Tj&JA)|0,l:Number(t&JA)|0}}function T3e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=N3e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const R3e=(t,e,n)=>t<<n|e>>>32-n,P3e=(t,e,n)=>e<<n|t>>>32-n,O3e=(t,e,n)=>e<<n-32|t>>>64-n,k3e=(t,e,n)=>t<<n-32|e>>>64-n,Xm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function D3e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function RO(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function sl(t,e){return t<<32-e|t>>>e}const Rj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function M3e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Pj(t){for(let e=0;e<t.length;e++)t[e]=M3e(t[e])}function L3e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function zw(t){return typeof t=="string"&&(t=L3e(t)),T1(t),t}function U3e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];T1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let QU=class{clone(){return this._cloneInto()}};function nX(t){const e=r=>t().update(zw(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function kb(t=32){if(Xm&&typeof Xm.getRandomValues=="function")return Xm.getRandomValues(new Uint8Array(t));if(Xm&&typeof Xm.randomBytes=="function")return Xm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const rX=[],sX=[],iX=[],$3e=BigInt(0),Cv=BigInt(1),B3e=BigInt(2),F3e=BigInt(7),j3e=BigInt(256),W3e=BigInt(113);for(let t=0,e=Cv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],rX.push(2*(5*r+n)),sX.push((t+1)*(t+2)/2%64);let s=$3e;for(let i=0;i<7;i++)e=(e<<Cv^(e>>F3e)*W3e)%j3e,e&B3e&&(s^=Cv<<(Cv<<BigInt(i))-Cv);iX.push(s)}const[z3e,H3e]=T3e(iX,!0),Oj=(t,e,n)=>n>32?O3e(t,e,n):R3e(t,e,n),kj=(t,e,n)=>n>32?k3e(t,e,n):P3e(t,e,n);function G3e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Oj(l,u,1)^n[a],h=kj(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=sX[o],c=Oj(s,i,a),l=kj(s,i,a),u=rX[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=z3e[r],t[1]^=H3e[r]}n.fill(0)}let q3e=class oX extends QU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,i_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=D3e(this.state)}keccak(){Rj||Pj(this.state32),G3e(this.state32,this.rounds),Rj||Pj(this.state32),this.posOut=0,this.pos=0}update(e){Ww(this);const{blockLen:n,state:r}=this;e=zw(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Ww(this,!1),T1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return i_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(tX(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new oX(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const V3e=(t,e,n)=>nX(()=>new q3e(e,t,n)),K3e=V3e(1,136,256/8),Y3e="https://rpc.walletconnect.org/v1";function aX(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(K3e(n)).toString("hex")}async function Q3e(t,e,n,r,s,i){switch(n.t){case"eip191":return await J3e(t,e,n.s);case"eip1271":return await Z3e(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function J3e(t,e,n){return(await XDe({hash:aX(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Z3e(t,e,n,r,s,i){const o=l0(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=aX(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||Y3e}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:X3e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function X3e(){return Date.now()+Math.floor(Math.random()*1e3)}function e5e(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return gZ.encode(i)}var t5e=Object.defineProperty,n5e=Object.defineProperties,r5e=Object.getOwnPropertyDescriptors,Dj=Object.getOwnPropertySymbols,s5e=Object.prototype.hasOwnProperty,i5e=Object.prototype.propertyIsEnumerable,Mj=(t,e,n)=>e in t?t5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,o5e=(t,e)=>{for(var n in e||(e={}))s5e.call(e,n)&&Mj(t,n,e[n]);if(Dj)for(var n of Dj(e))i5e.call(e,n)&&Mj(t,n,e[n]);return t},a5e=(t,e)=>n5e(t,r5e(e));const c5e="did:pkh:",JU=t=>t==null?void 0:t.split(":"),l5e=t=>{const e=t&&JU(t);if(e)return t.includes(c5e)?e[3]:e[1]},U3=t=>{const e=t&&JU(t);if(e)return e[2]+":"+e[3]},$I=t=>{const e=t&&JU(t);if(e)return e.pop()};async function Lj(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=cX(s,s.iss),o=$I(s.iss);return await Q3e(o,i,r,U3(s.iss),n)}const cX=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=$I(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${l5e(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=QS(t.resources);if(p){const g=o_(p);s=w5e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function u5e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function d5e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Yg(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function h5e(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:f5e(e,n,r)}}}function f5e(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function lX(t){return Yg(t),`urn:recap:${u5e(t).replace(/=/g,"")}`}function o_(t){const e=d5e(t.replace("urn:recap:",""));return Yg(e),e}function p5e(t,e,n){const r=h5e(t,e,n);return lX(r)}function g5e(t){return t&&t.includes("urn:recap:")}function m5e(t,e){const n=o_(t),r=o_(e),s=y5e(n,r);return lX(s)}function y5e(t,e){Yg(t),Yg(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=a5e(o5e({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function w5e(t="",e){Yg(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function Uj(t){var e;const n=o_(t);Yg(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function $j(t){const e=o_(t);Yg(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function QS(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return g5e(e)?e:void 0}function PO(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function uX(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Vo(t,...e){if(!uX(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Bj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function b5e(t,e){Vo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Fj(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const uf=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),v5e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),E5e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!E5e)throw new Error("Non little-endian hardware is not supported");function C5e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function $3(t){if(typeof t=="string")t=C5e(t);else if(uX(t))t=B3(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function _5e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function A5e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const S5e=(t,e)=>{function n(r,...s){if(Vo(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Vo(l):Vo(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Vo(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Vo(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Vo(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Vo(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function jj(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!x5e(e))throw new Error("invalid output, must be aligned");return e}function Wj(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function x5e(t){return t.byteOffset%4===0}function B3(t){return Uint8Array.from(t)}function Hw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const dX=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),I5e=dX("expand 16-byte k"),N5e=dX("expand 32-byte k"),T5e=uf(I5e),R5e=uf(N5e);function pn(t,e){return t<<e|t>>>32-e}function F3(t){return t.byteOffset%4===0}const ZA=64,P5e=16,hX=2**32-1,zj=new Uint32Array;function O5e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(ZA),u=uf(l),d=F3(s)&&F3(i),h=d?uf(s):zj,f=d?uf(i):zj;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=hX)throw new Error("arx: counter overflow");const g=Math.min(ZA,c-p);if(d&&g===ZA){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<P5e;y++)b=w+y,f[b]=h[b]^u[y];p+=ZA;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function k5e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=_5e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return PO(s),PO(o),Fj(i),Fj(n),(a,c,l,u,d=0)=>{Vo(a),Vo(c),Vo(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Vo(u),PO(d),d<0||d>=hX)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=B3(a)),w=R5e;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=T5e,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);F3(c)||f.push(c=B3(c));const y=uf(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,uf(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=uf(c);return O5e(t,w,y,v,l,u,d,o),Hw(...f),u}}const Ts=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class D5e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=$3(e),Vo(e,32);const n=Ts(e,0),r=Ts(e,2),s=Ts(e,4),i=Ts(e,6),o=Ts(e,8),a=Ts(e,10),c=Ts(e,12),l=Ts(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ts(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Ts(e,n+0),b=Ts(e,n+2),v=Ts(e,n+4),A=Ts(e,n+6),_=Ts(e,n+8),I=Ts(e,n+10),x=Ts(e,n+12),N=Ts(e,n+14);let S=i[0]+(y&8191),O=i[1]+((y>>>13|b<<3)&8191),P=i[2]+((b>>>10|v<<6)&8191),F=i[3]+((v>>>7|A<<9)&8191),q=i[4]+((A>>>4|_<<12)&8191),B=i[5]+(_>>>1&8191),T=i[6]+((_>>>14|I<<2)&8191),R=i[7]+((I>>>11|x<<5)&8191),$=i[8]+((x>>>8|N<<8)&8191),k=i[9]+(N>>>5|s),M=0,z=M+S*a+O*(5*w)+P*(5*g)+F*(5*p)+q*(5*f);M=z>>>13,z&=8191,z+=B*(5*h)+T*(5*d)+R*(5*u)+$*(5*l)+k*(5*c),M+=z>>>13,z&=8191;let K=M+S*c+O*a+P*(5*w)+F*(5*g)+q*(5*p);M=K>>>13,K&=8191,K+=B*(5*f)+T*(5*h)+R*(5*d)+$*(5*u)+k*(5*l),M+=K>>>13,K&=8191;let ne=M+S*l+O*c+P*a+F*(5*w)+q*(5*g);M=ne>>>13,ne&=8191,ne+=B*(5*p)+T*(5*f)+R*(5*h)+$*(5*d)+k*(5*u),M+=ne>>>13,ne&=8191;let le=M+S*u+O*l+P*c+F*a+q*(5*w);M=le>>>13,le&=8191,le+=B*(5*g)+T*(5*p)+R*(5*f)+$*(5*h)+k*(5*d),M+=le>>>13,le&=8191;let oe=M+S*d+O*u+P*l+F*c+q*a;M=oe>>>13,oe&=8191,oe+=B*(5*w)+T*(5*g)+R*(5*p)+$*(5*f)+k*(5*h),M+=oe>>>13,oe&=8191;let ae=M+S*h+O*d+P*u+F*l+q*c;M=ae>>>13,ae&=8191,ae+=B*a+T*(5*w)+R*(5*g)+$*(5*p)+k*(5*f),M+=ae>>>13,ae&=8191;let ue=M+S*f+O*h+P*d+F*u+q*l;M=ue>>>13,ue&=8191,ue+=B*c+T*a+R*(5*w)+$*(5*g)+k*(5*p),M+=ue>>>13,ue&=8191;let Ze=M+S*p+O*f+P*h+F*d+q*u;M=Ze>>>13,Ze&=8191,Ze+=B*l+T*c+R*a+$*(5*w)+k*(5*g),M+=Ze>>>13,Ze&=8191;let Ie=M+S*g+O*p+P*f+F*h+q*d;M=Ie>>>13,Ie&=8191,Ie+=B*u+T*l+R*c+$*a+k*(5*w),M+=Ie>>>13,Ie&=8191;let De=M+S*w+O*g+P*p+F*f+q*h;M=De>>>13,De&=8191,De+=B*d+T*u+R*l+$*c+k*a,M+=De>>>13,De&=8191,M=(M<<2)+M|0,M=M+z|0,z=M&8191,M=M>>>13,K+=M,i[0]=z,i[1]=K,i[2]=ne,i[3]=le,i[4]=oe,i[5]=ae,i[6]=ue,i[7]=Ze,i[8]=Ie,i[9]=De}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Hw(r)}update(e){Bj(this);const{buffer:n,blockLen:r}=this;e=$3(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Hw(this.h,this.r,this.buffer,this.pad)}digestInto(e){Bj(this),b5e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function M5e(t){const e=(r,s)=>t(s).update($3(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const L5e=M5e(t=>new D5e(t));function U5e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=s,v=n[0],A=n[1],_=n[2],I=o,x=a,N=c,S=l,O=u,P=d,F=h,q=f,B=p,T=g,R=w,$=y,k=b,M=v,z=A,K=_;for(let le=0;le<i;le+=2)I=I+O|0,k=pn(k^I,16),B=B+k|0,O=pn(O^B,12),I=I+O|0,k=pn(k^I,8),B=B+k|0,O=pn(O^B,7),x=x+P|0,M=pn(M^x,16),T=T+M|0,P=pn(P^T,12),x=x+P|0,M=pn(M^x,8),T=T+M|0,P=pn(P^T,7),N=N+F|0,z=pn(z^N,16),R=R+z|0,F=pn(F^R,12),N=N+F|0,z=pn(z^N,8),R=R+z|0,F=pn(F^R,7),S=S+q|0,K=pn(K^S,16),$=$+K|0,q=pn(q^$,12),S=S+q|0,K=pn(K^S,8),$=$+K|0,q=pn(q^$,7),I=I+P|0,K=pn(K^I,16),R=R+K|0,P=pn(P^R,12),I=I+P|0,K=pn(K^I,8),R=R+K|0,P=pn(P^R,7),x=x+F|0,k=pn(k^x,16),$=$+k|0,F=pn(F^$,12),x=x+F|0,k=pn(k^x,8),$=$+k|0,F=pn(F^$,7),N=N+q|0,M=pn(M^N,16),B=B+M|0,q=pn(q^B,12),N=N+q|0,M=pn(M^N,8),B=B+M|0,q=pn(q^B,7),S=S+O|0,z=pn(z^S,16),T=T+z|0,O=pn(O^T,12),S=S+O|0,z=pn(z^S,8),T=T+z|0,O=pn(O^T,7);let ne=0;r[ne++]=o+I|0,r[ne++]=a+x|0,r[ne++]=c+N|0,r[ne++]=l+S|0,r[ne++]=u+O|0,r[ne++]=d+P|0,r[ne++]=h+F|0,r[ne++]=f+q|0,r[ne++]=p+B|0,r[ne++]=g+T|0,r[ne++]=w+R|0,r[ne++]=y+$|0,r[ne++]=b+k|0,r[ne++]=v+M|0,r[ne++]=A+z|0,r[ne++]=_+K|0}const $5e=k5e(U5e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),B5e=new Uint8Array(16),Hj=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(B5e.subarray(n))},F5e=new Uint8Array(32);function Gj(t,e,n,r,s){const i=t(e,n,F5e),o=L5e.create(i);s&&Hj(o,s),Hj(o,r);const a=new Uint8Array(16),c=v5e(a);Wj(c,0,BigInt(s?s.length:0),!0),Wj(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Hw(i,a),l}const j5e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=jj(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Gj(t,e,n,a,r);return i.set(c,o),Hw(c),i},decrypt(s,i){i=jj(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Gj(t,e,n,o,r);if(!A5e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Hw(c),i}}),fX=S5e({blockSize:64,nonceLength:12,tagLength:16},j5e($5e));let pX=class extends QU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,YU(e);const r=zw(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ww(this),this.iHash.update(e),this}digestInto(e){Ww(this),T1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const zT=(t,e,n)=>new pX(t,e).update(n).digest();zT.create=(t,e)=>new pX(t,e);function W5e(t,e,n){return YU(t),n===void 0&&(n=new Uint8Array(t.outputLen)),zT(t,zw(n),zw(e))}const OO=new Uint8Array([0]),qj=new Uint8Array;function z5e(t,e,n,r=32){if(YU(t),i_(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=qj);const i=new Uint8Array(s*t.outputLen),o=zT.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)OO[0]=l+1,a.update(l===0?qj:c).update(n).update(OO).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),OO.fill(0),i.slice(0,r)}const H5e=(t,e,n,r,s)=>z5e(t,W5e(t,e,n),r,s);function G5e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function q5e(t,e,n){return t&e^~t&n}function V5e(t,e,n){return t&e^t&n^e&n}let K5e=class extends QU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=RO(this.buffer)}update(e){Ww(this);const{view:n,buffer:r,blockLen:s}=this;e=zw(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=RO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ww(this),tX(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;G5e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=RO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Y5e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fd=new Uint32Array(64);class Q5e extends K5e{constructor(){super(64,32,8,!1),this.A=Bd[0]|0,this.B=Bd[1]|0,this.C=Bd[2]|0,this.D=Bd[3]|0,this.E=Bd[4]|0,this.F=Bd[5]|0,this.G=Bd[6]|0,this.H=Bd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Fd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Fd[d-15],f=Fd[d-2],p=sl(h,7)^sl(h,18)^h>>>3,g=sl(f,17)^sl(f,19)^f>>>10;Fd[d]=g+Fd[d-7]+p+Fd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=sl(a,6)^sl(a,11)^sl(a,25),f=u+h+q5e(a,c,l)+Y5e[d]+Fd[d]|0,p=(sl(r,2)^sl(r,13)^sl(r,22))+V5e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Fd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const R1=nX(()=>new Q5e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const HT=BigInt(0),GT=BigInt(1),J5e=BigInt(2);function Qg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function P1(t){if(!Qg(t))throw new Error("Uint8Array expected")}function Gw(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Z5e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function qw(t){P1(t);let e="";for(let n=0;n<t.length;n++)e+=Z5e[t[n]];return e}function Wy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function ZU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?HT:BigInt("0x"+t)}const yu={_0:48,_9:57,A:65,F:70,a:97,f:102};function Vj(t){if(t>=yu._0&&t<=yu._9)return t-yu._0;if(t>=yu.A&&t<=yu.F)return t-(yu.A-10);if(t>=yu.a&&t<=yu.f)return t-(yu.a-10)}function Vw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Vj(t.charCodeAt(i)),a=Vj(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function bg(t){return ZU(qw(t))}function a_(t){return P1(t),ZU(qw(Uint8Array.from(t).reverse()))}function Kw(t,e){return Vw(t.toString(16).padStart(e*2,"0"))}function qT(t,e){return Kw(t,e).reverse()}function X5e(t){return Vw(Wy(t))}function Go(t,e,n){let r;if(typeof e=="string")try{r=Vw(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Qg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function c_(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];P1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function eMe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function tMe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const kO=t=>typeof t=="bigint"&&HT<=t;function VT(t,e,n){return kO(t)&&kO(e)&&kO(n)&&e<=t&&t<n}function nd(t,e,n,r){if(!VT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function gX(t){let e;for(e=0;t>HT;t>>=GT,e+=1);return e}function nMe(t,e){return t>>BigInt(e)&GT}function rMe(t,e,n){return t|(n?GT:HT)<<BigInt(e)}const XU=t=>(J5e<<BigInt(t-1))-GT,DO=t=>new Uint8Array(t),Kj=t=>Uint8Array.from(t);function mX(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=DO(t),s=DO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=DO())=>{s=a(Kj([0]),u),r=a(),u.length!==0&&(s=a(Kj([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return c_(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const sMe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Qg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Db(t,e,n={}){const r=(s,i,o)=>{const a=sMe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const iMe=()=>{throw new Error("not implemented")};function j3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var oMe=Object.freeze({__proto__:null,isBytes:Qg,abytes:P1,abool:Gw,bytesToHex:qw,numberToHexUnpadded:Wy,hexToNumber:ZU,hexToBytes:Vw,bytesToNumberBE:bg,bytesToNumberLE:a_,numberToBytesBE:Kw,numberToBytesLE:qT,numberToVarBytesBE:X5e,ensureBytes:Go,concatBytes:c_,equalBytes:eMe,utf8ToBytes:tMe,inRange:VT,aInRange:nd,bitLen:gX,bitGet:nMe,bitSet:rMe,bitMask:XU,createHmacDrbg:mX,validateObject:Db,notImplemented:iMe,memoized:j3});const Cs=BigInt(0),Br=BigInt(1),gp=BigInt(2),aMe=BigInt(3),W3=BigInt(4),Yj=BigInt(5),Qj=BigInt(8);function uo(t,e){const n=t%e;return n>=Cs?n:e+n}function yX(t,e,n){if(e<Cs)throw new Error("invalid exponent, negatives unsupported");if(n<=Cs)throw new Error("invalid modulus");if(n===Br)return Cs;let r=Br;for(;e>Cs;)e&Br&&(r=r*t%n),t=t*t%n,e>>=Br;return r}function hc(t,e,n){let r=t;for(;e-- >Cs;)r*=r,r%=n;return r}function z3(t,e){if(t===Cs)throw new Error("invert: expected non-zero number");if(e<=Cs)throw new Error("invert: expected positive modulus, got "+e);let n=uo(t,e),r=e,s=Cs,i=Br;for(;n!==Cs;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Br)throw new Error("invert: does not exist");return uo(s,e)}function cMe(t){const e=(t-Br)/gp;let n,r,s;for(n=t-Br,r=0;n%gp===Cs;n/=gp,r++);for(s=gp;s<t&&yX(s,e,t)!==t-Br;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Br)/W3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Br)/gp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Br<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function lMe(t){if(t%W3===aMe){const e=(t+Br)/W3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%Qj===Yj){const e=(t-Yj)/Qj;return function(n,r){const s=n.mul(r,gp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,gp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return cMe(t)}const uMe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function dMe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=uMe.reduce((r,s)=>(r[s]="function",r),e);return Db(t,n)}function hMe(t,e,n){if(n<Cs)throw new Error("invalid exponent, negatives unsupported");if(n===Cs)return t.ONE;if(n===Br)return e;let r=t.ONE,s=e;for(;n>Cs;)n&Br&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Br;return r}function fMe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function wX(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function bX(t,e,n=!1,r={}){if(t<=Cs)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=wX(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:XU(s),ZERO:Cs,ONE:Br,create:c=>uo(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Cs<=c&&c<t},is0:c=>c===Cs,isOdd:c=>(c&Br)===Br,neg:c=>uo(-c,t),eql:(c,l)=>c===l,sqr:c=>uo(c*c,t),add:(c,l)=>uo(c+l,t),sub:(c,l)=>uo(c-l,t),mul:(c,l)=>uo(c*l,t),pow:(c,l)=>hMe(a,c,l),div:(c,l)=>uo(c*z3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>z3(c,t),sqrt:r.sqrt||(c=>(o||(o=lMe(t)),o(a,c))),invertBatch:c=>fMe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?qT(c,i):Kw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?a_(c):bg(c)}});return Object.freeze(a)}function vX(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function EX(t){const e=vX(t);return e+Math.ceil(e/2)}function pMe(t,e,n=!1){const r=t.length,s=vX(e),i=EX(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?a_(t):bg(t),a=uo(o,e-Br)+Br;return n?qT(a,s):Kw(a,s)}const Jj=BigInt(0),XA=BigInt(1);function MO(t,e){const n=e.negate();return t?n:e}function CX(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function LO(t,e){CX(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function gMe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function mMe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const UO=new WeakMap,_X=new WeakMap;function $O(t){return _X.get(t)||1}function yMe(t,e){return{constTimeNegate:MO,hasPrecomputes(n){return $O(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Jj;)r&XA&&(s=s.add(i)),i=i.double(),r>>=XA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=LO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=LO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=XA);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(MO(y,r[g])):a=a.add(MO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=LO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===Jj)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=XA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=UO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&UO.set(r,s(i))),i},wNAFCached(n,r,s){const i=$O(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=$O(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){CX(r,e),_X.set(n,r),UO.delete(n)}}}function wMe(t,e,n,r){if(gMe(n,t),mMe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=gX(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function AX(t){return dMe(t.Fp),Db(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...wX(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const ey=BigInt(0),BO=BigInt(1);function bMe(t){return Db(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function vMe(t){const e=bMe(t),{P:n}=e,r=b=>uo(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>yX(b,n-BigInt(2),n));function l(b,v,A){const _=r(b*(v-A));return v=r(v-_),A=r(A+_),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,v){nd("u",b,ey,n),nd("scalar",v,ey,n);const A=v,_=b;let I=BO,x=ey,N=b,S=BO,O=ey,P;for(let q=BigInt(s-1);q>=ey;q--){const B=A>>q&BO;O^=B,P=l(O,I,N),I=P[0],N=P[1],P=l(O,x,S),x=P[0],S=P[1],O=B;const T=I+x,R=r(T*T),$=I-x,k=r($*$),M=R-k,z=N+S,K=N-S,ne=r(K*T),le=r(z*$),oe=ne+le,ae=ne-le;N=r(oe*oe),S=r(_*r(ae*ae)),I=r(R*k),x=r(M*(R+r(u*M)))}P=l(O,I,N),I=P[0],N=P[1],P=l(O,x,S),x=P[0],S=P[1];const F=c(x);return r(I*F)}function h(b){return qT(r(b),i)}function f(b){const v=Go("u coordinate",b,i);return o===32&&(v[31]&=127),a_(v)}function p(b){const v=Go("scalar",b),A=v.length;if(A!==i&&A!==o){let _=""+i+" or "+o;throw new Error("invalid scalar, expected "+_+" bytes, got "+A)}return a_(a(v))}function g(b,v){const A=f(v),_=p(b),I=d(A,_);if(I===ey)throw new Error("invalid private or public key received");return h(I)}const w=h(e.Gu);function y(b){return g(b,w)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(b,v)=>g(b,v),getPublicKey:b=>y(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const H3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const EMe=BigInt(1),Zj=BigInt(2),CMe=BigInt(3),_Me=BigInt(5);BigInt(8);function AMe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=H3,o=t*t%i*t%i,a=hc(o,Zj,i)*o%i,c=hc(a,EMe,i)*t%i,l=hc(c,_Me,i)*c%i,u=hc(l,e,i)*l%i,d=hc(u,n,i)*u%i,h=hc(d,r,i)*d%i,f=hc(h,s,i)*h%i,p=hc(f,s,i)*h%i,g=hc(p,e,i)*l%i;return{pow_p_5_8:hc(g,Zj,i)*t%i,b2:o}}function SMe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const G3=vMe({P:H3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=H3,{pow_p_5_8:n,b2:r}=AMe(t);return uo(hc(n,CMe,e)*r,e)},adjustScalarBytes:SMe,randomBytes:kb});function Xj(t){t.lowS!==void 0&&Gw("lowS",t.lowS),t.prehash!==void 0&&Gw("prehash",t.prehash)}function xMe(t){const e=AX(t);Db(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:IMe,hexToBytes:NMe}=oMe;class TMe extends Error{constructor(e=""){super(e)}}const Nu={Err:TMe,_tlv:{encode:(t,e)=>{const{Err:n}=Nu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Wy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Wy(s.length/2|128):"";return Wy(t)+i+s+e},decode(t,e){const{Err:n}=Nu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Nu;if(t<Hu)throw new e("integer: negative integers are not allowed");let n=Wy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Nu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return IMe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Nu,s=typeof t=="string"?NMe(t):t;P1(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Nu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Hu=BigInt(0),fs=BigInt(1);BigInt(2);const e9=BigInt(3);BigInt(4);function RMe(t){const e=xMe(t),{Fp:n}=e,r=bX(e.n,e.nBitLength),s=e.toBytes||((g,w,y)=>{const b=w.toAffine();return c_(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function o(g){const{a:w,b:y}=e,b=n.sqr(g),v=n.mul(b,g);return n.add(n.add(v,n.mul(g,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return VT(g,fs,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:b,n:v}=e;if(w&&typeof g!="bigint"){if(Qg(g)&&(g=qw(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let A;try{A=typeof g=="bigint"?g:bg(Go("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return b&&(A=uo(A,v)),nd("private key",A,fs,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=j3((g,w)=>{const{px:y,py:b,pz:v}=g;if(n.eql(v,n.ONE))return{x:y,y:b};const A=g.is0();w==null&&(w=A?n.ONE:n.inv(v));const _=n.mul(y,w),I=n.mul(b,w),x=n.mul(v,w);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:_,y:I}}),d=j3(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=g.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),v=o(w);if(!n.eql(b,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,y,b){if(this.px=w,this.py=y,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:b}=w||{};if(!w||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(y)&&v(b)?h.ZERO:new h(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(y[v])).map(h.fromAffine)}static fromHex(w){const y=h.fromAffine(i(Go("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,y){return wMe(h,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:b,pz:v}=this,{px:A,py:_,pz:I}=w,x=n.eql(n.mul(y,I),n.mul(A,v)),N=n.eql(n.mul(b,I),n.mul(_,v));return x&&N}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,b=n.mul(y,e9),{px:v,py:A,pz:_}=this;let I=n.ZERO,x=n.ZERO,N=n.ZERO,S=n.mul(v,v),O=n.mul(A,A),P=n.mul(_,_),F=n.mul(v,A);return F=n.add(F,F),N=n.mul(v,_),N=n.add(N,N),I=n.mul(w,N),x=n.mul(b,P),x=n.add(I,x),I=n.sub(O,x),x=n.add(O,x),x=n.mul(I,x),I=n.mul(F,I),N=n.mul(b,N),P=n.mul(w,P),F=n.sub(S,P),F=n.mul(w,F),F=n.add(F,N),N=n.add(S,S),S=n.add(N,S),S=n.add(S,P),S=n.mul(S,F),x=n.add(x,S),P=n.mul(A,_),P=n.add(P,P),S=n.mul(P,F),I=n.sub(I,S),N=n.mul(P,O),N=n.add(N,N),N=n.add(N,N),new h(I,x,N)}add(w){l(w);const{px:y,py:b,pz:v}=this,{px:A,py:_,pz:I}=w;let x=n.ZERO,N=n.ZERO,S=n.ZERO;const O=e.a,P=n.mul(e.b,e9);let F=n.mul(y,A),q=n.mul(b,_),B=n.mul(v,I),T=n.add(y,b),R=n.add(A,_);T=n.mul(T,R),R=n.add(F,q),T=n.sub(T,R),R=n.add(y,v);let $=n.add(A,I);return R=n.mul(R,$),$=n.add(F,B),R=n.sub(R,$),$=n.add(b,v),x=n.add(_,I),$=n.mul($,x),x=n.add(q,B),$=n.sub($,x),S=n.mul(O,R),x=n.mul(P,B),S=n.add(x,S),x=n.sub(q,S),S=n.add(q,S),N=n.mul(x,S),q=n.add(F,F),q=n.add(q,F),B=n.mul(O,B),R=n.mul(P,R),q=n.add(q,B),B=n.sub(F,B),B=n.mul(O,B),R=n.add(R,B),F=n.mul(q,R),N=n.add(N,F),F=n.mul($,R),x=n.mul(T,x),x=n.sub(x,F),F=n.mul(T,q),S=n.mul($,S),S=n.add(S,F),new h(x,N,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:b}=e;nd("scalar",w,Hu,b);const v=h.ZERO;if(w===Hu)return v;if(this.is0()||w===fs)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:A,k1:_,k2neg:I,k2:x}=y.splitScalar(w),N=v,S=v,O=this;for(;_>Hu||x>Hu;)_&fs&&(N=N.add(O)),x&fs&&(S=S.add(O)),O=O.double(),_>>=fs,x>>=fs;return A&&(N=N.negate()),I&&(S=S.negate()),S=new h(n.mul(S.px,y.beta),S.py,S.pz),N.add(S)}multiply(w){const{endo:y,n:b}=e;nd("scalar",w,fs,b);let v,A;if(y){const{k1neg:_,k1:I,k2neg:x,k2:N}=y.splitScalar(w);let{p:S,f:O}=this.wNAF(I),{p:P,f:F}=this.wNAF(N);S=p.constTimeNegate(_,S),P=p.constTimeNegate(x,P),P=new h(n.mul(P.px,y.beta),P.py,P.pz),v=S.add(P),A=O.add(F)}else{const{p:_,f:I}=this.wNAF(w);v=_,A=I}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(w,y,b){const v=h.BASE,A=(I,x)=>x===Hu||x===fs||!I.equals(v)?I.multiplyUnsafe(x):I.multiply(x),_=A(this,y).add(A(w,b));return _.is0()?void 0:_}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===fs)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===fs?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return Gw("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return Gw("isCompressed",w),qw(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=yMe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function PMe(t){const e=AX(t);return Db(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function OMe(t){const e=PMe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(B){return uo(B,r)}function a(B){return z3(B,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=RMe({...e,toBytes(B,T,R){const $=T.toAffine(),k=n.toBytes($.x),M=c_;return Gw("isCompressed",R),R?M(Uint8Array.from([T.hasEvenY()?2:3]),k):M(Uint8Array.from([4]),k,n.toBytes($.y))},fromBytes(B){const T=B.length,R=B[0],$=B.subarray(1);if(T===s&&(R===2||R===3)){const k=bg($);if(!VT(k,fs,n.ORDER))throw new Error("Point is not on curve");const M=u(k);let z;try{z=n.sqrt(M)}catch(ne){const le=ne instanceof Error?": "+ne.message:"";throw new Error("Point is not on curve"+le)}const K=(z&fs)===fs;return(R&1)===1!==K&&(z=n.neg(z)),{x:k,y:z}}else if(T===i&&R===4){const k=n.fromBytes($.subarray(0,n.BYTES)),M=n.fromBytes($.subarray(n.BYTES,2*n.BYTES));return{x:k,y:M}}else{const k=s,M=i;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+M+", got "+T)}}}),h=B=>qw(Kw(B,e.nByteLength));function f(B){const T=r>>fs;return B>T}function p(B){return f(B)?o(-B):B}const g=(B,T,R)=>bg(B.slice(T,R));class w{constructor(T,R,$){this.r=T,this.s=R,this.recovery=$,this.assertValidity()}static fromCompact(T){const R=e.nByteLength;return T=Go("compactSignature",T,R*2),new w(g(T,0,R),g(T,R,2*R))}static fromDER(T){const{r:R,s:$}=Nu.toSig(Go("DER",T));return new w(R,$)}assertValidity(){nd("r",this.r,fs,r),nd("s",this.s,fs,r)}addRecoveryBit(T){return new w(this.r,this.s,T)}recoverPublicKey(T){const{r:R,s:$,recovery:k}=this,M=I(Go("msgHash",T));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const z=k===2||k===3?R+e.n:R;if(z>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const K=k&1?"03":"02",ne=c.fromHex(K+h(z)),le=a(z),oe=o(-M*le),ae=o($*le),ue=c.BASE.multiplyAndAddUnsafe(ne,oe,ae);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Vw(this.toDERHex())}toDERHex(){return Nu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Vw(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(B){try{return l(B),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const B=EX(e.n);return pMe(e.randomBytes(B),e.n)},precompute(B=8,T=c.BASE){return T._setWindowSize(B),T.multiply(BigInt(3)),T}};function b(B,T=!0){return c.fromPrivateKey(B).toRawBytes(T)}function v(B){const T=Qg(B),R=typeof B=="string",$=(T||R)&&B.length;return T?$===s||$===i:R?$===2*s||$===2*i:B instanceof c}function A(B,T,R=!0){if(v(B))throw new Error("first arg must be private key");if(!v(T))throw new Error("second arg must be public key");return c.fromHex(T).multiply(l(B)).toRawBytes(R)}const _=e.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const T=bg(B),R=B.length*8-e.nBitLength;return R>0?T>>BigInt(R):T},I=e.bits2int_modN||function(B){return o(_(B))},x=XU(e.nBitLength);function N(B){return nd("num < 2^"+e.nBitLength,B,Hu,x),Kw(B,e.nByteLength)}function S(B,T,R=O){if(["recovered","canonical"].some(Ie=>Ie in R))throw new Error("sign() legacy options not supported");const{hash:$,randomBytes:k}=e;let{lowS:M,prehash:z,extraEntropy:K}=R;M==null&&(M=!0),B=Go("msgHash",B),Xj(R),z&&(B=Go("prehashed msgHash",$(B)));const ne=I(B),le=l(T),oe=[N(le),N(ne)];if(K!=null&&K!==!1){const Ie=K===!0?k(n.BYTES):K;oe.push(Go("extraEntropy",Ie))}const ae=c_(...oe),ue=ne;function Ze(Ie){const De=_(Ie);if(!d(De))return;const st=a(De),Ot=c.BASE.multiply(De).toAffine(),tn=o(Ot.x);if(tn===Hu)return;const X=o(st*o(ue+tn*le));if(X===Hu)return;let ce=(Ot.x===tn?0:2)|Number(Ot.y&fs),Ee=X;return M&&f(X)&&(Ee=p(X),ce^=1),new w(tn,Ee,ce)}return{seed:ae,k2sig:Ze}}const O={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function F(B,T,R=O){const{seed:$,k2sig:k}=S(B,T,R),M=e;return mX(M.hash.outputLen,M.nByteLength,M.hmac)($,k)}c.BASE._setWindowSize(8);function q(B,T,R,$=P){var X;const k=B;T=Go("msgHash",T),R=Go("publicKey",R);const{lowS:M,prehash:z,format:K}=$;if(Xj($),"strict"in $)throw new Error("options.strict was renamed to lowS");if(K!==void 0&&K!=="compact"&&K!=="der")throw new Error("format must be compact or der");const ne=typeof k=="string"||Qg(k),le=!ne&&!K&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!ne&&!le)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let oe,ae;try{if(le&&(oe=new w(k.r,k.s)),ne){try{K!=="compact"&&(oe=w.fromDER(k))}catch(ce){if(!(ce instanceof Nu.Err))throw ce}!oe&&K!=="der"&&(oe=w.fromCompact(k))}ae=c.fromHex(R)}catch{return!1}if(!oe||M&&oe.hasHighS())return!1;z&&(T=e.hash(T));const{r:ue,s:Ze}=oe,Ie=I(T),De=a(Ze),st=o(Ie*De),Ot=o(ue*De),tn=(X=c.BASE.multiplyAndAddUnsafe(ae,st,Ot))==null?void 0:X.toAffine();return tn?o(tn.x)===ue:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:A,sign:F,verify:q,ProjectivePoint:c,Signature:w,utils:y}}function kMe(t){return{hash:t,hmac:(e,...n)=>zT(t,e,U3e(...n)),randomBytes:kb}}function DMe(t,e){const n=r=>OMe({...t,...kMe(r)});return{...n(e),create:n}}const SX=bX(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),MMe=SX.create(BigInt("-3")),LMe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),UMe=DMe({a:MMe,b:LMe,Fp:SX,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},R1),xX="base10",Li="base16",Lc="base64pad",ah="base64url",O1="utf8",IX=0,rd=1,k1=2,$Me=0,t9=1,kE=12,e$=32;function BMe(){const t=G3.utils.randomPrivateKey(),e=G3.getPublicKey(t);return{privateKey:_o(t,Li),publicKey:_o(e,Li)}}function q3(){const t=kb(e$);return _o(t,Li)}function FMe(t,e){const n=G3.getSharedSecret($a(t,Li),$a(e,Li)),r=H5e(R1,n,void 0,void 0,e$);return _o(r,Li)}function JS(t){const e=R1($a(t,Li));return _o(e,Li)}function Tl(t){const e=R1($a(t,O1));return _o(e,Li)}function NX(t){return $a(`${t}`,xX)}function Jg(t){return Number(_o(t,xX))}function TX(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function RX(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function jMe(t){const e=NX(typeof t.type<"u"?t.type:IX);if(Jg(e)===rd&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?$a(t.senderPublicKey,Li):void 0,r=typeof t.iv<"u"?$a(t.iv,Li):kb(kE),s=$a(t.symKey,Li),i=fX(s,r).encrypt($a(t.message,O1)),o=PX({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===ah?TX(o):o}function WMe(t){const e=$a(t.symKey,Li),{sealed:n,iv:r}=l_({encoded:t.encoded,encoding:t.encoding}),s=fX(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return _o(s,O1)}function zMe(t,e){const n=NX(k1),r=kb(kE),s=$a(t,O1),i=PX({type:n,sealed:s,iv:r});return e===ah?TX(i):i}function HMe(t,e){const{sealed:n}=l_({encoded:t,encoding:e});return _o(n,O1)}function PX(t){if(Jg(t.type)===k1)return _o(RE([t.type,t.sealed]),Lc);if(Jg(t.type)===rd){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return _o(RE([t.type,t.senderPublicKey,t.iv,t.sealed]),Lc)}return _o(RE([t.type,t.iv,t.sealed]),Lc)}function l_(t){const e=(t.encoding||Lc)===ah?RX(t.encoded):t.encoded,n=$a(e,Lc),r=n.slice($Me,t9),s=t9;if(Jg(r)===rd){const c=s+e$,l=c+kE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Jg(r)===k1){const c=n.slice(s),l=kb(kE);return{type:r,sealed:c,iv:l}}const i=s+kE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function GMe(t,e){const n=l_({encoded:t,encoding:e==null?void 0:e.encoding});return OX({type:Jg(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?_o(n.senderPublicKey,Li):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function OX(t){const e=(t==null?void 0:t.type)||IX;if(e===rd){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function n9(t){return t.type===rd&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function r9(t){return t.type===k1}function qMe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return RE([new Uint8Array([4]),e,n])}function VMe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(RX(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=R1(c),u=qMe(e);if(!UMe.verify(RE([o,a]),l,u))throw new Error("Invalid signature");return _3(t).payload}const KMe="irn";function BI(t){return(t==null?void 0:t.relay)||{protocol:KMe}}function Vv(t){const e=XRe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function YMe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function s9(t){if(!t.includes("wc:")){const l=eX(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:QMe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:YMe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function QMe(t){return t.startsWith("//")?t.substring(2):t}function JMe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function i9(t){const e=new URLSearchParams,n=JMe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function eS(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var ZMe=Object.defineProperty,XMe=Object.defineProperties,eLe=Object.getOwnPropertyDescriptors,o9=Object.getOwnPropertySymbols,tLe=Object.prototype.hasOwnProperty,nLe=Object.prototype.propertyIsEnumerable,a9=(t,e,n)=>e in t?ZMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rLe=(t,e)=>{for(var n in e||(e={}))tLe.call(e,n)&&a9(t,n,e[n]);if(o9)for(var n of o9(e))nLe.call(e,n)&&a9(t,n,e[n]);return t},sLe=(t,e)=>XMe(t,eLe(e));function Mb(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function iLe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Mb(n.accounts))}),e}function oLe(t,e){const n=[];return Object.values(t).forEach(r=>{Mb(r.accounts).includes(e)&&n.push(...r.methods)}),n}function aLe(t,e){const n=[];return Object.values(t).forEach(r=>{Mb(r.accounts).includes(e)&&n.push(...r.events)}),n}function KT(t){return t.includes(":")}function zy(t){return KT(t)?t.split(":")[0]:t}function c9(t){var e,n,r;const s={};if(!hf(t))return s;for(const[i,o]of Object.entries(t)){const a=KT(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=zy(i);s[u]=sLe(rLe({},s[u]),{chains:ql(a,(e=s[u])==null?void 0:e.chains),methods:ql(c,(n=s[u])==null?void 0:n.methods),events:ql(l,(r=s[u])==null?void 0:r.events)})}return s}function cLe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function l9(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=cLe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=ql(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function lLe(t,e){var n,r,s,i,o,a;const c=c9(t),l=c9(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:ql((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:ql((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:ql((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const uLe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},dLe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Re(t,e){const{message:n,code:r}=dLe[t];return{message:e?`${n} ${e}`:n,code:r}}function $n(t,e){const{message:n,code:r}=uLe[t];return{message:e?`${n} ${e}`:n,code:r}}function df(t,e){return!!Array.isArray(t)}function hf(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function $s(t){return typeof t>"u"}function Gr(t,e){return e&&$s(t)?!0:typeof t=="string"&&!!t.trim().length}function t$(t,e){return e&&$s(t)?!0:typeof t=="number"&&!isNaN(t)}function hLe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Dp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Mb(a),d=n[o];(!Dp(YZ(o,d),u)||!Dp(d.methods,c)||!Dp(d.events,l))&&(i=!1)}),i):!1}function FI(t){return Gr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function fLe(t){if(Gr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&FI(n)}}return!1}function pLe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Gr(t,!1)){if(e(t))return!0;const n=eX(t);return e(n)}}catch{}return!1}function gLe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function mLe(t){return t==null?void 0:t.topic}function yLe(t,e){let n=null;return Gr(t==null?void 0:t.publicKey,!1)||(n=Re("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function u9(t){let e=!0;return df(t)?t.length&&(e=t.every(n=>Gr(n,!1))):e=!1,e}function wLe(t,e,n){let r=null;return df(e)&&e.length?e.forEach(s=>{r||FI(s)||(r=$n("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):FI(t)||(r=$n("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function bLe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=wLe(s,YZ(s,i),`${e} ${n}`);o&&(r=o)}),r}function vLe(t,e){let n=null;return df(t)?t.forEach(r=>{n||fLe(r)||(n=$n("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=$n("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function ELe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=vLe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function CLe(t,e){let n=null;return u9(t==null?void 0:t.methods)?u9(t==null?void 0:t.events)||(n=$n("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=$n("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function kX(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=CLe(r,`${e}, namespace`);s&&(n=s)}),n}function _Le(t,e,n){let r=null;if(t&&hf(t)){const s=kX(t,e);s&&(r=s);const i=bLe(t,e,n);i&&(r=i)}else r=Re("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function FO(t,e){let n=null;if(t&&hf(t)){const r=kX(t,e);r&&(n=r);const s=ELe(t,e);s&&(n=s)}else n=Re("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function DX(t){return Gr(t.protocol,!0)}function ALe(t,e){let n=!1;return t?t&&df(t)&&t.length&&t.forEach(r=>{n=DX(r)}):n=!0,n}function SLe(t){return typeof t=="number"}function no(t){return typeof t<"u"&&typeof t!==null}function xLe(t){return!(!t||typeof t!="object"||!t.code||!t$(t.code,!1)||!t.message||!Gr(t.message,!1))}function ILe(t){return!($s(t)||!Gr(t.method,!1))}function NLe(t){return!($s(t)||$s(t.result)&&$s(t.error)||!t$(t.id,!1)||!Gr(t.jsonrpc,!1))}function TLe(t){return!($s(t)||!Gr(t.name,!1))}function d9(t,e){return!(!FI(e)||!iLe(t).includes(e))}function RLe(t,e,n){return Gr(n,!1)?oLe(t,e).includes(n):!1}function PLe(t,e,n){return Gr(n,!1)?aLe(t,e).includes(n):!1}function h9(t,e,n){let r=null;const s=OLe(t),i=kLe(e),o=Object.keys(s),a=Object.keys(i),c=f9(Object.keys(t)),l=f9(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Re("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Dp(o,a)||(r=Re("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Mb(e[d].accounts);h.includes(d)||(r=Re("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Dp(s[d].methods,i[d].methods)?Dp(s[d].events,i[d].events)||(r=Re("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Re("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function OLe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function f9(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function kLe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Mb(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function DLe(t,e){return t$(t,!1)&&t<=e.max&&t>=e.min}function p9(){const t=N1();return new Promise(e=>{switch(t){case Jo.browser:e(MLe());break;case Jo.reactNative:e(LLe());break;case Jo.node:e(ULe());break;default:e(!0)}})}function MLe(){return Ob()&&(navigator==null?void 0:navigator.onLine)}async function LLe(){if(Bf()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function ULe(){return!0}function $Le(t){switch(N1()){case Jo.browser:BLe(t);break;case Jo.reactNative:FLe(t);break}}function BLe(t){!Bf()&&Ob()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function FLe(t){Bf()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function jLe(){var t;return Ob()&&Hg()?((t=Hg())==null?void 0:t.visibilityState)==="visible":!0}const jO={};class _v{static get(e){return jO[e]}static set(e,n){jO[e]=n}static delete(e){delete jO[e]}}var WLe={};const MX="wc",LX=2,V3="core",eu=`${MX}@2:${V3}:`,zLe={logger:"error"},HLe={database:":memory:"},GLe="crypto",g9="client_ed25519_seed",qLe=Te.ONE_DAY,VLe="keychain",KLe="0.3",YLe="messages",QLe="0.3",m9=Te.SIX_HOURS,JLe="publisher",UX="irn",ZLe="error",$X="wss://relay.walletconnect.org",XLe="relayer",ws={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},eUe="_subscription",pa={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},tUe=.1,K3="2.21.0",or={link_mode:"link_mode",relay:"relay"},ZS={inbound:"inbound",outbound:"outbound"},nUe="0.3",rUe="WALLETCONNECT_CLIENT_ID",y9="WALLETCONNECT_LINK_MODE_APPS",$o={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},sUe="subscription",iUe="0.3",oUe="pairing",aUe="0.3",Av={wc_pairingDelete:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Te.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Te.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:0},res:{ttl:Te.ONE_DAY,prompt:!1,tag:0}}},mp={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ac={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},cUe="history",lUe="0.3",uUe="expirer",va={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},dUe="0.3",hUe="verify-api",fUe="https://verify.walletconnect.com",BX="https://verify.walletconnect.org",DE=BX,pUe=`${DE}/v3`,gUe=[fUe,BX],mUe="echo",yUe="https://echo.walletconnect.com",ll={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Cu={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},cc={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Jf={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Zf={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Sv={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},wUe=.1,bUe="event-client",vUe=86400,EUe="https://pulse.walletconnect.org/batch";function CUe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var _Ue=CUe,AUe=_Ue;const FX=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},SUe=t=>new TextEncoder().encode(t),xUe=t=>new TextDecoder().decode(t);class IUe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class NUe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jX(this,e)}}class TUe{constructor(e){this.decoders=e}or(e){return jX(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const jX=(t,e)=>new TUe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class RUe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new IUe(e,n,r),this.decoder=new NUe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const YT=({name:t,prefix:e,encode:n,decode:r})=>new RUe(t,e,n,r),D1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=AUe(n,e);return YT({prefix:t,name:e,encode:r,decode:i=>FX(s(i))})},PUe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},OUe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Zs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>YT({prefix:e,name:t,encode(s){return OUe(s,r,n)},decode(s){return PUe(s,r,n,t)}}),kUe=YT({prefix:"\0",name:"identity",encode:t=>xUe(t),decode:t=>SUe(t)});var DUe=Object.freeze({__proto__:null,identity:kUe});const MUe=Zs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var LUe=Object.freeze({__proto__:null,base2:MUe});const UUe=Zs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var $Ue=Object.freeze({__proto__:null,base8:UUe});const BUe=D1({prefix:"9",name:"base10",alphabet:"0123456789"});var FUe=Object.freeze({__proto__:null,base10:BUe});const jUe=Zs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),WUe=Zs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var zUe=Object.freeze({__proto__:null,base16:jUe,base16upper:WUe});const HUe=Zs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),GUe=Zs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),qUe=Zs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),VUe=Zs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),KUe=Zs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),YUe=Zs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),QUe=Zs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),JUe=Zs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ZUe=Zs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var XUe=Object.freeze({__proto__:null,base32:HUe,base32upper:GUe,base32pad:qUe,base32padupper:VUe,base32hex:KUe,base32hexupper:YUe,base32hexpad:QUe,base32hexpadupper:JUe,base32z:ZUe});const e$e=D1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),t$e=D1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var n$e=Object.freeze({__proto__:null,base36:e$e,base36upper:t$e});const r$e=D1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s$e=D1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var i$e=Object.freeze({__proto__:null,base58btc:r$e,base58flickr:s$e});const o$e=Zs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),a$e=Zs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),c$e=Zs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),l$e=Zs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var u$e=Object.freeze({__proto__:null,base64:o$e,base64pad:a$e,base64url:c$e,base64urlpad:l$e});const WX=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),d$e=WX.reduce((t,e,n)=>(t[n]=e,t),[]),h$e=WX.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function f$e(t){return t.reduce((e,n)=>(e+=d$e[n],e),"")}function p$e(t){const e=[];for(const n of t){const r=h$e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const g$e=YT({prefix:"🚀",name:"base256emoji",encode:f$e,decode:p$e});var m$e=Object.freeze({__proto__:null,base256emoji:g$e}),y$e=zX,w9=128,w$e=-128,b$e=Math.pow(2,31);function zX(t,e,n){e=e||[],n=n||0;for(var r=n;t>=b$e;)e[n++]=t&255|w9,t/=128;for(;t&w$e;)e[n++]=t&255|w9,t>>>=7;return e[n]=t|0,zX.bytes=n-r+1,e}var v$e=Y3,E$e=128,b9=127;function Y3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw Y3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&b9)<<s:(o&b9)*Math.pow(2,s),s+=7}while(o>=E$e);return Y3.bytes=i-r,n}var C$e=Math.pow(2,7),_$e=Math.pow(2,14),A$e=Math.pow(2,21),S$e=Math.pow(2,28),x$e=Math.pow(2,35),I$e=Math.pow(2,42),N$e=Math.pow(2,49),T$e=Math.pow(2,56),R$e=Math.pow(2,63),P$e=function(t){return t<C$e?1:t<_$e?2:t<A$e?3:t<S$e?4:t<x$e?5:t<I$e?6:t<N$e?7:t<T$e?8:t<R$e?9:10},O$e={encode:y$e,decode:v$e,encodingLength:P$e},HX=O$e;const v9=(t,e,n=0)=>(HX.encode(t,e,n),e),E9=t=>HX.encodingLength(t),Q3=(t,e)=>{const n=e.byteLength,r=E9(t),s=r+E9(n),i=new Uint8Array(s+n);return v9(t,i,0),v9(n,i,r),i.set(e,s),new k$e(t,n,e,i)};class k$e{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const GX=({name:t,code:e,encode:n})=>new D$e(t,e,n);class D$e{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Q3(this.code,n):n.then(r=>Q3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const qX=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),M$e=GX({name:"sha2-256",code:18,encode:qX("SHA-256")}),L$e=GX({name:"sha2-512",code:19,encode:qX("SHA-512")});var U$e=Object.freeze({__proto__:null,sha256:M$e,sha512:L$e});const VX=0,$$e="identity",KX=FX,B$e=t=>Q3(VX,KX(t)),F$e={code:VX,name:$$e,encode:KX,digest:B$e};var j$e=Object.freeze({__proto__:null,identity:F$e});new TextEncoder,new TextDecoder;const C9={...DUe,...LUe,...$Ue,...FUe,...zUe,...XUe,...n$e,...i$e,...u$e,...m$e};({...U$e,...j$e});function W$e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function YX(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const _9=YX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),WO=YX("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=W$e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),z$e={utf8:_9,"utf-8":_9,hex:C9.base16,latin1:WO,ascii:WO,binary:WO,...C9};function H$e(t,e="utf8"){const n=z$e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var G$e=Object.defineProperty,q$e=(t,e,n)=>e in t?G$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,il=(t,e,n)=>q$e(t,typeof e!="symbol"?e+"":e,n);class V$e{constructor(e,n){this.core=e,this.logger=n,il(this,"keychain",new Map),il(this,"name",VLe),il(this,"version",KLe),il(this,"initialized",!1),il(this,"storagePrefix",eu),il(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),il(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),il(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),il(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Re("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),il(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Ys(n,this.name)}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,M3(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?L3(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var K$e=Object.defineProperty,Y$e=(t,e,n)=>e in t?K$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rs=(t,e,n)=>Y$e(t,typeof e!="symbol"?e+"":e,n);class Q$e{constructor(e,n,r){this.core=e,this.logger=n,Rs(this,"name",GLe),Rs(this,"keychain"),Rs(this,"randomSessionIdentifier",q3()),Rs(this,"initialized",!1),Rs(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Rs(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Rs(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=LF(s);return hZ(i.publicKey)}),Rs(this,"generateKeyPair",()=>{this.isInitialized();const s=BMe();return this.setPrivateKey(s.publicKey,s.privateKey)}),Rs(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=LF(i),a=this.randomSessionIdentifier;return await TTe(a,s,qLe,o)}),Rs(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=FMe(a,i);return this.setSymKey(c,o)}),Rs(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||JS(s);return await this.keychain.set(o,s),o}),Rs(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Rs(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Rs(this,"encode",async(s,i,o)=>{this.isInitialized();const a=OX(o),c=md(i);if(r9(a))return zMe(c,o==null?void 0:o.encoding);if(n9(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return jMe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Rs(this,"decode",async(s,i,o)=>{this.isInitialized();const a=GMe(i,o);if(r9(a)){const c=HMe(i,o==null?void 0:o.encoding);return zg(c)}if(n9(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=WMe({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return zg(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Rs(this,"getPayloadType",(s,i=Lc)=>{const o=l_({encoded:s,encoding:i});return Jg(o.type)}),Rs(this,"getPayloadSenderPublicKey",(s,i=Lc)=>{const o=l_({encoded:s,encoding:i});return o.senderPublicKey?_o(o.senderPublicKey,Li):void 0}),this.core=e,this.logger=Ys(n,this.name),this.keychain=r||new V$e(this.core,this.logger)}get context(){return No(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(g9)}catch{e=q3(),await this.keychain.set(g9,e)}return H$e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var J$e=Object.defineProperty,Z$e=Object.defineProperties,X$e=Object.getOwnPropertyDescriptors,A9=Object.getOwnPropertySymbols,eBe=Object.prototype.hasOwnProperty,tBe=Object.prototype.propertyIsEnumerable,J3=(t,e,n)=>e in t?J$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nBe=(t,e)=>{for(var n in e||(e={}))eBe.call(e,n)&&J3(t,n,e[n]);if(A9)for(var n of A9(e))tBe.call(e,n)&&J3(t,n,e[n]);return t},rBe=(t,e)=>Z$e(t,X$e(e)),Po=(t,e,n)=>J3(t,typeof e!="symbol"?e+"":e,n);class sBe extends Xke{constructor(e,n){super(e,n),this.logger=e,this.core=n,Po(this,"messages",new Map),Po(this,"messagesWithoutClientAck",new Map),Po(this,"name",YLe),Po(this,"version",QLe),Po(this,"initialized",!1),Po(this,"storagePrefix",eu),Po(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Po(this,"set",async(r,s,i)=>{this.isInitialized();const o=Tl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===ZS.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,rBe(nBe({},c),{[o]:s}))}return await this.persist(),o}),Po(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Po(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Po(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Tl(s);return typeof i[o]<"u"}),Po(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Tl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Po(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Ys(e,this.name),this.core=n}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,M3(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,M3(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?L3(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?L3(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var iBe=Object.defineProperty,oBe=Object.defineProperties,aBe=Object.getOwnPropertyDescriptors,S9=Object.getOwnPropertySymbols,cBe=Object.prototype.hasOwnProperty,lBe=Object.prototype.propertyIsEnumerable,Z3=(t,e,n)=>e in t?iBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tS=(t,e)=>{for(var n in e||(e={}))cBe.call(e,n)&&Z3(t,n,e[n]);if(S9)for(var n of S9(e))lBe.call(e,n)&&Z3(t,n,e[n]);return t},zO=(t,e)=>oBe(t,aBe(e)),lc=(t,e,n)=>Z3(t,typeof e!="symbol"?e+"":e,n);class uBe extends eDe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,lc(this,"events",new Ja.EventEmitter),lc(this,"name",JLe),lc(this,"queue",new Map),lc(this,"publishTimeout",Te.toMiliseconds(Te.ONE_MINUTE)),lc(this,"initialPublishTimeout",Te.toMiliseconds(Te.ONE_SECOND*15)),lc(this,"needsTransportRestart",!1),lc(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||m9,c=BI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||kp().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(ws.publish,w),g(h))};this.relayer.events.on(ws.publish,w);const y=jh(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(ws.publish,w)}catch(b){this.queue.set(d,zO(tS({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await jh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),lc(this,"on",(r,s)=>{this.events.on(r,s)}),lc(this,"once",(r,s)=>{this.events.once(r,s)}),lc(this,"off",(r,s)=>{this.events.off(r,s)}),lc(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Ys(n,this.name),this.registerEventListeners()}get context(){return No(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=m9,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Vv(BI().protocol).publish,params:tS({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};$s((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),$s((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(ws.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,zO(tS({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(zO(tS({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(vm.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ws.connection_stalled);return}this.checkQueue()}),this.relayer.on(ws.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var dBe=Object.defineProperty,hBe=(t,e,n)=>e in t?dBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ty=(t,e,n)=>hBe(t,typeof e!="symbol"?e+"":e,n);class fBe{constructor(){ty(this,"map",new Map),ty(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),ty(this,"get",e=>this.map.get(e)||[]),ty(this,"exists",(e,n)=>this.get(e).includes(n)),ty(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),ty(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var pBe=Object.defineProperty,gBe=Object.defineProperties,mBe=Object.getOwnPropertyDescriptors,x9=Object.getOwnPropertySymbols,yBe=Object.prototype.hasOwnProperty,wBe=Object.prototype.propertyIsEnumerable,X3=(t,e,n)=>e in t?pBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xv=(t,e)=>{for(var n in e||(e={}))yBe.call(e,n)&&X3(t,n,e[n]);if(x9)for(var n of x9(e))wBe.call(e,n)&&X3(t,n,e[n]);return t},HO=(t,e)=>gBe(t,mBe(e)),Hn=(t,e,n)=>X3(t,typeof e!="symbol"?e+"":e,n);class bBe extends rDe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Hn(this,"subscriptions",new Map),Hn(this,"topicMap",new fBe),Hn(this,"events",new Ja.EventEmitter),Hn(this,"name",sUe),Hn(this,"version",iUe),Hn(this,"pending",new Map),Hn(this,"cached",[]),Hn(this,"initialized",!1),Hn(this,"storagePrefix",eu),Hn(this,"subscribeTimeout",Te.toMiliseconds(Te.ONE_MINUTE)),Hn(this,"initialSubscribeTimeout",Te.toMiliseconds(Te.ONE_SECOND*15)),Hn(this,"clientId"),Hn(this,"batchSubscribeTopicsLimit",500),Hn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Hn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=BI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Hn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Hn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Hn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Hn(this,"on",(r,s)=>{this.events.on(r,s)}),Hn(this,"once",(r,s)=>{this.events.once(r,s)}),Hn(this,"off",(r,s)=>{this.events.off(r,s)}),Hn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Hn(this,"start",async()=>{await this.onConnect()}),Hn(this,"stop",async()=>{await this.onDisconnect()}),Hn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Hn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Hn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(vm.pulse,async()=>{await this.checkPending()}),this.events.on($o.created,async r=>{const s=$o.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on($o.deleted,async r=>{const s=$o.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Ys(n,this.name),this.clientId=""}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=BI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=$n("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===or.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Vv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===or.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},Te.toMiliseconds(Te.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener($o.created,d),u(h.id))};this.events.on($o.created,d);try{const h=await jh(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener($o.created,d),u(h)}catch{}}),l=await jh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ws.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Vv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await jh(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(ws.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Vv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await jh(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(ws.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Vv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,HO(xv({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,xv({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,xv({},n)),this.topicMap.set(n.topic,e),this.events.emit($o.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit($o.deleted,HO(xv({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit($o.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit($o.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>HO(xv({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await x3e(Te.toMiliseconds(Te.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Tl(e+await this.getClientId())}}var vBe=Object.defineProperty,I9=Object.getOwnPropertySymbols,EBe=Object.prototype.hasOwnProperty,CBe=Object.prototype.propertyIsEnumerable,e5=(t,e,n)=>e in t?vBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N9=(t,e)=>{for(var n in e||(e={}))EBe.call(e,n)&&e5(t,n,e[n]);if(I9)for(var n of I9(e))CBe.call(e,n)&&e5(t,n,e[n]);return t},gn=(t,e,n)=>e5(t,typeof e!="symbol"?e+"":e,n);class _Be extends tDe{constructor(e){super(e),gn(this,"protocol","wc"),gn(this,"version",2),gn(this,"core"),gn(this,"logger"),gn(this,"events",new Ja.EventEmitter),gn(this,"provider"),gn(this,"messages"),gn(this,"subscriber"),gn(this,"publisher"),gn(this,"name",XLe),gn(this,"transportExplicitlyClosed",!1),gn(this,"initialized",!1),gn(this,"connectionAttemptInProgress",!1),gn(this,"relayUrl"),gn(this,"projectId"),gn(this,"packageName"),gn(this,"bundleId"),gn(this,"hasExperiencedNetworkDisruption",!1),gn(this,"pingTimeout"),gn(this,"heartBeatTimeout",Te.toMiliseconds(Te.THIRTY_SECONDS+Te.FIVE_SECONDS)),gn(this,"reconnectTimeout"),gn(this,"connectPromise"),gn(this,"reconnectInProgress",!1),gn(this,"requestsInFlight",[]),gn(this,"connectTimeout",Te.toMiliseconds(Te.ONE_SECOND*15)),gn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||kp().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),gn(this,"resetPingTimeout",()=>{UI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),gn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),gn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(ws.connect)}),gn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),gn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(ws.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),gn(this,"registerProviderListeners",()=>{this.provider.on(pa.payload,this.onPayloadHandler),this.provider.on(pa.connect,this.onConnectHandler),this.provider.on(pa.disconnect,this.onDisconnectHandler),this.provider.on(pa.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ys(e.logger,this.name):_1(Cm({level:e.logger||ZLe})),this.messages=new sBe(this.logger,e.core),this.subscriber=new bBe(this,this.logger),this.publisher=new uBe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||$X,this.projectId=e.projectId,u3e()?this.packageName=xj():d3e()&&(this.bundleId=xj()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return No(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:or.relay},ZS.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off($o.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on($o.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,N9({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await jh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await p9())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Jr(Te.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(ws.message,e),await this.recordMessageEvent(e,ZS.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(pa.disconnect,i),await jh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(pa.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(pa.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(pa.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Te.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(UI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Za(new jPe(m3e({sdkVersion:K3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),VU(e)){if(!e.method.endsWith(eUe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:or.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(N9({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else BT(e)&&this.events.emit(ws.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,ZS.inbound),this.events.emit(ws.message,e))}async acknowledgePayload(e){const n=UT(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(pa.payload,this.onPayloadHandler),this.provider.off(pa.connect,this.onConnectHandler),this.provider.off(pa.disconnect,this.onDisconnectHandler),this.provider.off(pa.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await p9();$Le(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(vm.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&jLe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(ws.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Te.toMiliseconds(tUe)))))}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function ABe(){}function T9(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function R9(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function P9(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const SBe="[object RegExp]",xBe="[object String]",IBe="[object Number]",NBe="[object Boolean]",O9="[object Arguments]",TBe="[object Symbol]",RBe="[object Date]",PBe="[object Map]",OBe="[object Set]",kBe="[object Array]",DBe="[object Function]",MBe="[object ArrayBuffer]",GO="[object Object]",LBe="[object Error]",UBe="[object DataView]",$Be="[object Uint8Array]",BBe="[object Uint8ClampedArray]",FBe="[object Uint16Array]",jBe="[object Uint32Array]",WBe="[object BigUint64Array]",zBe="[object Int8Array]",HBe="[object Int16Array]",GBe="[object Int32Array]",qBe="[object BigInt64Array]",VBe="[object Float32Array]",KBe="[object Float64Array]";function YBe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function QBe(t,e,n){return Kv(t,e,void 0,void 0,void 0,void 0,n)}function Kv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return ME(t,e,i,o)}return ME(t,e,i,o)}function ME(t,e,n,r){if(Object.is(t,e))return!0;let s=P9(t),i=P9(e);if(s===O9&&(s=GO),i===O9&&(i=GO),s!==i)return!1;switch(s){case xBe:return t.toString()===e.toString();case IBe:{const c=t.valueOf(),l=e.valueOf();return YBe(c,l)}case NBe:case RBe:case TBe:return Object.is(t.valueOf(),e.valueOf());case SBe:return t.source===e.source&&t.flags===e.flags;case DBe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case PBe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Kv(l,e.get(c),c,t,e,n,r))return!1;return!0}case OBe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Kv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case kBe:case $Be:case BBe:case FBe:case jBe:case WBe:case zBe:case HBe:case GBe:case qBe:case VBe:case KBe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Kv(t[c],e[c],c,t,e,n,r))return!1;return!0}case MBe:return t.byteLength!==e.byteLength?!1:ME(new Uint8Array(t),new Uint8Array(e),n,r);case UBe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:ME(new Uint8Array(t),new Uint8Array(e),n,r);case LBe:return t.name===e.name&&t.message===e.message;case GO:{if(!(ME(t.constructor,e.constructor,n,r)||T9(t)&&T9(e)))return!1;const c=[...Object.keys(t),...R9(t)],l=[...Object.keys(e),...R9(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Kv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function JBe(t,e){return QBe(t,e,ABe)}var ZBe=Object.defineProperty,k9=Object.getOwnPropertySymbols,XBe=Object.prototype.hasOwnProperty,e6e=Object.prototype.propertyIsEnumerable,t5=(t,e,n)=>e in t?ZBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D9=(t,e)=>{for(var n in e||(e={}))XBe.call(e,n)&&t5(t,n,e[n]);if(k9)for(var n of k9(e))e6e.call(e,n)&&t5(t,n,e[n]);return t},Qi=(t,e,n)=>t5(t,typeof e!="symbol"?e+"":e,n);class Am extends nDe{constructor(e,n,r,s=eu,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Qi(this,"map",new Map),Qi(this,"version",nUe),Qi(this,"cached",[]),Qi(this,"initialized",!1),Qi(this,"getKey"),Qi(this,"storagePrefix",eu),Qi(this,"recentlyDeleted",[]),Qi(this,"recentlyDeletedLimit",200),Qi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!$s(o)?this.map.set(this.getKey(o),o):gLe(o)?this.map.set(o.id,o):mLe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Qi(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Qi(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Qi(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>JBe(a[c],o[c]))):this.values)),Qi(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=D9(D9({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Qi(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Ys(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Re("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var t6e=Object.defineProperty,n6e=(t,e,n)=>e in t?t6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nn=(t,e,n)=>n6e(t,typeof e!="symbol"?e+"":e,n);class r6e{constructor(e,n){this.core=e,this.logger=n,nn(this,"name",oUe),nn(this,"version",aUe),nn(this,"events",new MU),nn(this,"pairings"),nn(this,"initialized",!1),nn(this,"storagePrefix",eu),nn(this,"ignoredPayloadTypes",[rd]),nn(this,"registeredMethods",[]),nn(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),nn(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),nn(this,"create",async r=>{this.isInitialized();const s=q3(),i=await this.core.crypto.setSymKey(s),o=Jr(Te.FIVE_MINUTES),a={protocol:UX},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=i9({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(mp.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),nn(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ll.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=s9(r.uri);s.props.properties.topic=i,s.addTrace(ll.pairing_uri_validation_success),s.addTrace(ll.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(ll.existing_pairing),u.active)throw s.setError(Cu.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ll.pairing_not_expired)}const d=c||Jr(Te.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(ll.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(mp.create,h),s.addTrace(ll.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ll.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Cu.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Cu.subscribe_pairing_topic_failure),f}return s.addTrace(ll.subscribe_pairing_topic_success),h}),nn(this,"activate",async({topic:r})=>{this.isInitialized();const s=Jr(Te.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),nn(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=cp();this.events.once(Sn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),nn(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),nn(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),nn(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),nn(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",$n("USER_DISCONNECTED")),await this.deletePairing(s))}),nn(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return i9({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),nn(this,"sendRequest",async(r,s,i)=>{const o=Fh(s,i),a=await this.core.crypto.encode(r,o),c=Av[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),nn(this,"sendResult",async(r,s,i)=>{const o=UT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Av[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),nn(this,"sendError",async(r,s,i)=>{const o=$T(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Av[c]?Av[c].res:Av.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),nn(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,$n("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),nn(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>nh(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),nn(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),nn(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),nn(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(mp.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),nn(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{hl(s)?this.events.emit(Sn("pairing_ping",i),{}):Ta(s)&&this.events.emit(Sn("pairing_ping",i),{error:s.error})},500)}),nn(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(mp.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),nn(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=$n("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),nn(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error($n("WC_METHOD_UNSUPPORTED",r))}),nn(this,"isValidPair",(r,s)=>{var i;if(!no(r)){const{message:a}=Re("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Cu.malformed_pairing_uri),new Error(a)}if(!pLe(r.uri)){const{message:a}=Re("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Cu.malformed_pairing_uri),new Error(a)}const o=s9(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Re("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Cu.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Re("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Cu.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Te.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Cu.pairing_expired);const{message:a}=Re("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),nn(this,"isValidPing",async r=>{if(!no(r)){const{message:i}=Re("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),nn(this,"isValidDisconnect",async r=>{if(!no(r)){const{message:i}=Re("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),nn(this,"isValidPairingTopic",async r=>{if(!Gr(r,!1)){const{message:s}=Re("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Re("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(nh(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Re("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Ys(n,this.name),this.pairings=new Am(this.core,this.logger,this.name,this.storagePrefix)}get context(){return No(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ws.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==or.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);VU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):BT(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(va.expired,async e=>{const{topic:n}=XZ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(mp.expire,{topic:n}))})}}var s6e=Object.defineProperty,i6e=(t,e,n)=>e in t?s6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ps=(t,e,n)=>i6e(t,typeof e!="symbol"?e+"":e,n);class o6e extends Zke{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ps(this,"records",new Map),Ps(this,"events",new Ja.EventEmitter),Ps(this,"name",cUe),Ps(this,"version",lUe),Ps(this,"cached",[]),Ps(this,"initialized",!1),Ps(this,"storagePrefix",eu),Ps(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ps(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Jr(Te.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ac.created,o)}),Ps(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ta(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(ac.updated,s))}),Ps(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Ps(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(ac.deleted,i)}}),this.persist()}),Ps(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Ps(this,"on",(r,s)=>{this.events.on(r,s)}),Ps(this,"once",(r,s)=>{this.events.once(r,s)}),Ps(this,"off",(r,s)=>{this.events.off(r,s)}),Ps(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ys(n,this.name)}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Fh(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ac.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ac.created,e=>{const n=ac.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ac.updated,e=>{const n=ac.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ac.deleted,e=>{const n=ac.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(vm.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Te.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ac.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var a6e=Object.defineProperty,c6e=(t,e,n)=>e in t?a6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ni=(t,e,n)=>c6e(t,typeof e!="symbol"?e+"":e,n);class l6e extends sDe{constructor(e,n){super(e,n),this.core=e,this.logger=n,ni(this,"expirations",new Map),ni(this,"events",new Ja.EventEmitter),ni(this,"name",uUe),ni(this,"version",dUe),ni(this,"cached",[]),ni(this,"initialized",!1),ni(this,"storagePrefix",eu),ni(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ni(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),ni(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(va.created,{target:i,expiration:o})}),ni(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),ni(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(va.deleted,{target:s,expiration:i})}}),ni(this,"on",(r,s)=>{this.events.on(r,s)}),ni(this,"once",(r,s)=>{this.events.once(r,s)}),ni(this,"off",(r,s)=>{this.events.off(r,s)}),ni(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ys(n,this.name)}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return y3e(e);if(typeof e=="number")return w3e(e);const{message:n}=Re("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(va.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Te.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(va.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(vm.pulse,()=>this.checkExpirations()),this.events.on(va.created,e=>{const n=va.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(va.expired,e=>{const n=va.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(va.deleted,e=>{const n=va.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var u6e=Object.defineProperty,d6e=(t,e,n)=>e in t?u6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hr=(t,e,n)=>d6e(t,typeof e!="symbol"?e+"":e,n);class h6e extends iDe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Hr(this,"name",hUe),Hr(this,"abortController"),Hr(this,"isDevEnv"),Hr(this,"verifyUrlV3",pUe),Hr(this,"storagePrefix",eu),Hr(this,"version",LX),Hr(this,"publicKey"),Hr(this,"fetchPromise"),Hr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Te.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Hr(this,"register",async s=>{if(!Ob()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Hg(),u=this.startAbortTimer(Te.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(_3(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Hr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(_3(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Hr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Te.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Hr(this,"getVerifyUrl",s=>{let i=s||DE;return gUe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${DE}`),i=DE),i}),Hr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Te.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Hr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Hr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Hr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Hr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Hr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Hr(this,"validateAttestation",(s,i)=>{const o=VMe(s,i.publicKey),a={hasExpired:Te.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Ys(n,this.name),this.abortController=new AbortController,this.isDevEnv=KU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return No(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Te.toMiliseconds(e))}}var f6e=Object.defineProperty,p6e=(t,e,n)=>e in t?f6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M9=(t,e,n)=>p6e(t,typeof e!="symbol"?e+"":e,n);class g6e extends oDe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,M9(this,"context",mUe),M9(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${yUe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Ys(n,this.context)}}var m6e=Object.defineProperty,L9=Object.getOwnPropertySymbols,y6e=Object.prototype.hasOwnProperty,w6e=Object.prototype.propertyIsEnumerable,n5=(t,e,n)=>e in t?m6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Iv=(t,e)=>{for(var n in e||(e={}))y6e.call(e,n)&&n5(t,n,e[n]);if(L9)for(var n of L9(e))w6e.call(e,n)&&n5(t,n,e[n]);return t},ls=(t,e,n)=>n5(t,typeof e!="symbol"?e+"":e,n);class b6e extends aDe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,ls(this,"context",bUe),ls(this,"storagePrefix",eu),ls(this,"storageVersion",wUe),ls(this,"events",new Map),ls(this,"shouldPersist",!1),ls(this,"init",async()=>{if(!KU())try{const s={eventId:Nj(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:JZ(this.core.relayer.protocol,this.core.relayer.version,K3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),ls(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=Nj(),u=this.core.projectId||"",d=Date.now(),h=Iv({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),ls(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Iv(Iv({},a),this.setMethods(a.eventId))}),ls(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),ls(this,"setEventListeners",()=>{this.core.heartbeat.on(vm.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Te.fromMiliseconds(Date.now())-Te.fromMiliseconds(s.timestamp)>vUe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),ls(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),ls(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),ls(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),ls(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),ls(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Iv(Iv({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),ls(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),ls(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${EUe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${K3}${i}`,{method:"POST",body:JSON.stringify(s)})}),ls(this,"getAppDomain",()=>QZ().url),this.logger=Ys(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var v6e=Object.defineProperty,U9=Object.getOwnPropertySymbols,E6e=Object.prototype.hasOwnProperty,C6e=Object.prototype.propertyIsEnumerable,r5=(t,e,n)=>e in t?v6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$9=(t,e)=>{for(var n in e||(e={}))E6e.call(e,n)&&r5(t,n,e[n]);if(U9)for(var n of U9(e))C6e.call(e,n)&&r5(t,n,e[n]);return t},Yn=(t,e,n)=>r5(t,typeof e!="symbol"?e+"":e,n);let _6e=class QX extends Kke{constructor(e){var n;super(e),Yn(this,"protocol",MX),Yn(this,"version",LX),Yn(this,"name",V3),Yn(this,"relayUrl"),Yn(this,"projectId"),Yn(this,"customStoragePrefix"),Yn(this,"events",new Ja.EventEmitter),Yn(this,"logger"),Yn(this,"heartbeat"),Yn(this,"relayer"),Yn(this,"crypto"),Yn(this,"storage"),Yn(this,"history"),Yn(this,"expirer"),Yn(this,"pairing"),Yn(this,"verify"),Yn(this,"echoClient"),Yn(this,"linkModeSupportedApps"),Yn(this,"eventClient"),Yn(this,"initialized",!1),Yn(this,"logChunkController"),Yn(this,"on",(a,c)=>this.events.on(a,c)),Yn(this,"once",(a,c)=>this.events.once(a,c)),Yn(this,"off",(a,c)=>this.events.off(a,c)),Yn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Yn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:or.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||$X,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Cm({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:zLe.logger,name:V3}),{logger:i,chunkLoggerController:o}=OT({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ys(i,this.name),this.heartbeat=new exe,this.crypto=new Q$e(this,this.logger,e==null?void 0:e.keychain),this.history=new o6e(this,this.logger),this.expirer=new l6e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Gke($9($9({},HLe),e==null?void 0:e.storageOptions)),this.relayer=new _Be({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new r6e(this,this.logger),this.verify=new h6e(this,this.logger,this.storage),this.echoClient=new g6e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new b6e(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new QX(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(rUe,r),n}get context(){return No(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(y9,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(y9)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&WLe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const A6e=_6e,JX="wc",ZX=2,XX="client",n$=`${JX}@${ZX}:${XX}:`,qO={name:XX,logger:"error"},B9="WALLETCONNECT_DEEPLINK_CHOICE",S6e="proposal",F9="Proposal expired",x6e="session",ny=Te.SEVEN_DAYS,I6e="engine",us={wc_sessionPropose:{req:{ttl:Te.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Te.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Te.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Te.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Te.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1119}}},VO={min:Te.FIVE_MINUTES,max:Te.SEVEN_DAYS},ol={idle:"IDLE",active:"ACTIVE"},j9={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},N6e="request",T6e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],R6e="wc",P6e="auth",O6e="authKeys",k6e="pairingTopics",D6e="requests",QT=`${R6e}@${1.5}:${P6e}:`,XS=`${QT}:PUB_KEY`;var M6e=Object.defineProperty,L6e=Object.defineProperties,U6e=Object.getOwnPropertyDescriptors,W9=Object.getOwnPropertySymbols,$6e=Object.prototype.hasOwnProperty,B6e=Object.prototype.propertyIsEnumerable,s5=(t,e,n)=>e in t?M6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gn=(t,e)=>{for(var n in e||(e={}))$6e.call(e,n)&&s5(t,n,e[n]);if(W9)for(var n of W9(e))B6e.call(e,n)&&s5(t,n,e[n]);return t},yi=(t,e)=>L6e(t,U6e(e)),we=(t,e,n)=>s5(t,typeof e!="symbol"?e+"":e,n);class F6e extends dDe{constructor(e){super(e),we(this,"name",I6e),we(this,"events",new MU),we(this,"initialized",!1),we(this,"requestQueue",{state:ol.idle,queue:[]}),we(this,"sessionRequestQueue",{state:ol.idle,queue:[]}),we(this,"requestQueueDelay",Te.ONE_SECOND),we(this,"expectedPairingMethodMap",new Map),we(this,"recentlyDeletedMap",new Map),we(this,"recentlyDeletedLimit",200),we(this,"relayMessageCache",[]),we(this,"pendingSessions",new Map),we(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(us)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Te.toMiliseconds(this.requestQueueDelay)))}),we(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=yi(Gn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=lLe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const I=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),I}if(!u||!h){const{topic:I,uri:x}=await this.client.core.pairing.create();u=I,d=x}if(!u){const{message:I}=Re("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(I)}const f=await this.client.core.crypto.generateKeyPair(),p=us.wc_sessionPropose.req.ttl||Te.FIVE_MINUTES,g=Jr(p),w=yi(Gn(Gn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:UX}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:dl()}),y=Sn("session_connect",w.id),{reject:b,resolve:v,done:A}=cp(p,F9),_=({id:I})=>{I===w.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:F9,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(y,({error:I,session:x})=>{this.client.events.off("proposal_expire",_),I?b(I):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:A}}),we(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),we(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[cc.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(Jf.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Jf.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Jf.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:cc.session_approve_started,properties:{topic:p,trace:[cc.session_approve_started,cc.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,_=await this.client.core.crypto.generateSharedKey(v,A),I=Gn(Gn(Gn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:Jr(ny)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=or.relay;b.addTrace(cc.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:x})}catch(S){throw b.setError(Jf.subscribe_session_topic_failure),S}b.addTrace(cc.subscribe_session_topic_success);const N=yi(Gn({},I),{topic:_,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:I.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:or.relay});await this.client.session.set(_,N),b.addTrace(cc.store_session);try{b.addTrace(cc.publishing_session_settle),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:I,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Jf.session_settle_publish_failure),S}),b.addTrace(cc.session_settle_publish_success),b.addTrace(cc.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Jf.session_approve_publish_failure),S}),b.addTrace(cc.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(_,$n("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,$n("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(_,Jr(ny)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),we(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:us.wc_sessionPropose.reject}),await this.client.proposal.delete(r,$n("USER_DISCONNECTED")))}),we(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=cp(),c=dl(),l=kp().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Sn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),we(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=dl(),{done:i,resolve:o,reject:a}=cp();return this.events.once(Sn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Jr(ny)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),we(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=us.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===or.relay&&await this.confirmOnlineStateOrThrow();const c=dl(),l=kp().toString(),{done:u,resolve:d,reject:h}=cp(o,"Request expired. Please try again.");this.events.once(Sn("session_request",c),({error:y,result:b})=>{y?h(y):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:yi(Gn({},s),{expiryTimestamp:Jr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:yi(Gn({},s),{expiryTimestamp:Jr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(Gn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const v=await C3e(this.client.core.storage,B9);await b3e({id:c,topic:i,wcDeepLink:v})}y()}),u()]).then(y=>y[2])}),we(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===or.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);hl(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Ta(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),we(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=dl(),i=kp().toString(),{done:o,resolve:a,reject:c}=cp();this.events.once(Sn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),we(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=kp().toString(),a=dl();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),we(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:$n("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Re("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),we(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>hLe(r,n)))),we(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),we(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?or.link_mode:or.relay;o===or.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),_=JS(A);if(await Promise.all([this.client.auth.authKeys.set(XS,{responseTopic:_,publicKey:A}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:b})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:M}=l0(a[0]);let z=p5e(M,"request",g);QS(y)&&(z=m5e(z,y.pop())),y.push(z)}const I=w&&w>us.wc_sessionAuthenticate.req.ttl?w:us.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Jr(I)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Jr(us.wc_sessionPropose.req.ttl),id:dl()},{done:O,resolve:P,reject:F}=cp(I,"Request expired"),q=dl(),B=Sn("session_connect",S.id),T=Sn("session_request",q),R=async({error:M,session:z})=>{this.events.off(T,$),M?F(M):z&&P({session:z})},$=async M=>{var z,K,ne;if(await this.deletePendingAuthRequest(q,{message:"fulfilled",code:0}),M.error){const De=$n("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return M.error.code===De.code?void 0:(this.events.off(B,R),F(M.error.message))}await this.deleteProposal(S.id),this.events.off(B,R);const{cacaos:le,responder:oe}=M.result,ae=[],ue=[];for(const De of le){await Lj({cacao:De,projectId:this.client.core.projectId})||(this.client.logger.error(De,"Signature verification failed"),F($n("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:st}=De,Ot=QS(st.resources),tn=[U3(st.iss)],X=$I(st.iss);if(Ot){const ce=Uj(Ot),Ee=$j(Ot);ae.push(...ce),tn.push(...Ee)}for(const ce of tn)ue.push(`${ce}:${X}`)}const Ze=await this.client.core.crypto.generateSharedKey(A,oe.publicKey);let Ie;ae.length>0&&(Ie={topic:Ze,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:oe,controller:oe.publicKey,expiry:Jr(ny),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:l9([...new Set(ae)],[...new Set(ue)]),transportType:o},await this.client.core.relayer.subscribe(Ze,{transportType:o}),await this.client.session.set(Ze,Ie),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:oe.metadata}),Ie=this.client.session.get(Ze)),(z=this.client.metadata.redirect)!=null&&z.linkMode&&(K=oe.metadata.redirect)!=null&&K.linkMode&&(ne=oe.metadata.redirect)!=null&&ne.universal&&r&&(this.client.core.addLinkModeSupportedApp(oe.metadata.redirect.universal),this.client.session.update(Ze,{transportType:or.link_mode})),P({auths:le,session:Ie})};this.events.once(B,R),this.events.once(T,$);let k;try{if(i){const M=Fh("wc_sessionAuthenticate",x,q);this.client.core.history.set(b,M);const z=await this.client.core.crypto.encode("",M,{type:k1,encoding:ah});k=eS(r,b,z)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:q}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:us.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(M){throw this.events.off(B,R),this.events.off(T,$),M}return await this.setProposal(S.id,S),await this.setAuthRequest(q,{request:yi(Gn({},x),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:k??v,response:O}}),we(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Zf.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(Sv.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Sv.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||or.relay;a===or.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=JS(c),d={type:rd,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await Lj({cacao:w,projectId:this.client.core.projectId})){i.setError(Sv.invalid_cacao);const _=$n("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(Zf.cacaos_verified);const{p:y}=w,b=QS(y.resources),v=[U3(y.iss)],A=$I(y.iss);if(b){const _=Uj(b),I=$j(b);h.push(..._),v.push(...I)}for(const _ of v)f.push(`${_}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Zf.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Jr(ny),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:l9([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Zf.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(Sv.subscribe_authenticated_session_topic_failure),w}i.addTrace(Zf.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Zf.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Zf.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(Sv.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),we(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===or.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=JS(o),l={type:rd,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:us.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,$n("USER_DISCONNECTED"))}),we(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return cX(r,s)}),we(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),we(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),we(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,$n("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(B9).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,$n("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ol.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),we(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Jf.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,$n("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),we(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=ol.idle,this.client.events.emit("session_request_expire",{id:n}))}),we(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),we(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),we(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Jr(us.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),we(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=or.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),we(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Jr(us.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),we(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Fh(s,i,c);let f;const p=!!u;try{const y=p?ah:Lc;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(T6e.includes(s)){const y=Tl(JSON.stringify(h)),b=Tl(f);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=us[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=eS(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=us[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=yi(Gn({},d),{correlationId:h.id}),l?(y.internal=yi(Gn({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),we(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=UT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?ah:Lc;u=await this.client.core.crypto.encode(s,l,yi(Gn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=eS(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=us[p].res;g.tvf=yi(Gn({},f),{correlationId:r}),o?(g.internal=yi(Gn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),we(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=$T(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?ah:Lc;u=await this.client.core.crypto.encode(s,l,yi(Gn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=eS(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||us[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),we(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;nh(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{nh(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),we(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),we(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),we(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ol.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ol.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ol.idle}),we(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),we(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),we(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Re("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),we(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),we(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Cu.proposal_listener_not_found)),this.isValidConnect(Gn({},s.params));const u=a.expiryTimestamp||Jr(us.wc_sessionPropose.req.ttl),d=Gn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Tl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(ll.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:us.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),we(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(hl(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ta(r)){await this.client.proposal.delete(i,$n("USER_DISCONNECTED"));const o=Sn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),we(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=yi(Gn(Gn(Gn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:or.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Sn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;hl(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Sn("session_approve",s),{})):Ta(r)&&(await this.client.session.delete(n,$n("USER_DISCONNECTED")),this.events.emit(Sn("session_approve",s),{error:r.error}))}),we(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=_v.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:$n("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Gn({topic:n},s));try{_v.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw _v.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),we(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Sn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);hl(r)?this.events.emit(Sn("session_update",s),{}):Ta(r)&&this.events.emit(Sn("session_update",s),{error:r.error})}),we(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Jr(ny)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Sn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);hl(r)?this.events.emit(Sn("session_extend",s),{}):Ta(r)&&this.events.emit(Sn("session_extend",s),{error:r.error})}),we(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Sn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);hl(r)?this.events.emit(Sn("session_ping",s),{}):Ta(r)&&this.events.emit(Sn("session_ping",s),{error:r.error})},500)}),we(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(ws.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:$n("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),we(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Gn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Tl(JSON.stringify(Fh("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===or.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),we(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Sn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);hl(r)?this.events.emit(Sn("session_request",s),{result:r.result}):Ta(r)&&this.events.emit(Sn("session_request",s),{error:r.error})}),we(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=_v.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Gn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),_v.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),hl(r)?this.events.emit(Sn("session_request",s),{result:r.result}):Ta(r)&&this.events.emit(Sn("session_request",s),{error:r.error})}),we(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Tl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===or.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:rd,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:us.wc_sessionAuthenticate.autoReject,appLink:h})}}),we(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),we(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ol.idle,this.processSessionRequestQueue()},Te.toMiliseconds(this.requestQueueDelay))}),we(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Sn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Sn("session_request",i.request.id),{error:r})})}),we(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ol.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ol.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),we(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),we(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Fh("wc_sessionPropose",yi(Gn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),we(this,"isValidConnect",async n=>{if(!no(n)){const{message:l}=Re("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if($s(r)||await this.isValidPairingTopic(r),!ALe(c)){const{message:l}=Re("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!$s(s)&&hf(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!$s(i)&&hf(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),$s(o)||this.validateSessionProps(o,"sessionProperties"),!$s(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),we(this,"validateNamespaces",(n,r)=>{const s=_Le(n,"connect()",r);if(s)throw new Error(s.message)}),we(this,"isValidApprove",async n=>{if(!no(n))throw new Error(Re("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=FO(s,"approve()");if(l)throw new Error(l.message);const u=h9(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Gr(i,!0)){const{message:d}=Re("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if($s(o)||this.validateSessionProps(o,"sessionProperties"),!$s(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),we(this,"isValidReject",async n=>{if(!no(n)){const{message:i}=Re("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!xLe(s)){const{message:i}=Re("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),we(this,"isValidSessionSettleRequest",n=>{if(!no(n)){const{message:l}=Re("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!DX(r)){const{message:l}=Re("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=yLe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=FO(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(nh(o)){const{message:l}=Re("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),we(this,"isValidUpdate",async n=>{if(!no(n)){const{message:c}=Re("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=FO(s,"update()");if(o)throw new Error(o.message);const a=h9(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),we(this,"isValidExtend",async n=>{if(!no(n)){const{message:s}=Re("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),we(this,"isValidRequest",async n=>{if(!no(n)){const{message:c}=Re("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!d9(a,i)){const{message:c}=Re("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!ILe(s)){const{message:c}=Re("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!RLe(a,i,s.method)){const{message:c}=Re("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!DLe(o,VO)){const{message:c}=Re("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${VO.min} and ${VO.max}`);throw new Error(c)}}),we(this,"isValidRespond",async n=>{var r;if(!no(n)){const{message:o}=Re("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!NLe(i)){const{message:o}=Re("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),we(this,"isValidPing",async n=>{if(!no(n)){const{message:s}=Re("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidEmit",async n=>{if(!no(n)){const{message:a}=Re("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!d9(o,i)){const{message:a}=Re("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!TLe(s)){const{message:a}=Re("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!PLe(o,i,s.name)){const{message:a}=Re("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),we(this,"isValidDisconnect",async n=>{if(!no(n)){const{message:s}=Re("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Gr(s,!1))throw new Error("uri is required parameter");if(!Gr(i,!1))throw new Error("domain is required parameter");if(!Gr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>l0(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=l0(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),we(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||DE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===or.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),we(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Re("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),we(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),we(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),we(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Re("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),we(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==or.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),we(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),we(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=Ij(n,"topic")||"",s=decodeURIComponent(Ij(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:or.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),we(this,"registerLinkModeListeners",async()=>{var n;if(KU()||Bf()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),we(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(j9).includes(s.method)}),we(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return yi(Gn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),we(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),we(this,"extractTxHashesFromResult",(n,r)=>{try{const s=j9[n];if(typeof r=="string")return[r];const i=r[s.key];if(df(i))return n==="solana_signAllTransactions"?i.map(o=>e5e(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ws.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(XS)?this.client.auth.authKeys.get(XS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===or.link_mode?ah:Lc});VU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Tl(r)})):BT(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(va.expired,async e=>{const{topic:n,id:r}=XZ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Re("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Re("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(mp.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(mp.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Gr(e,!1)){const{message:n}=Re("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Re("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(nh(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Re("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Gr(e,!1)){const{message:n}=Re("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Re("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(nh(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Re("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Re("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gr(e,!1)){const{message:n}=Re("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Re("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!SLe(e)){const{message:n}=Re("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Re("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(nh(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Re("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class j6e extends Am{constructor(e,n){super(e,n,S6e,n$),this.core=e,this.logger=n}}let W6e=class extends Am{constructor(e,n){super(e,n,x6e,n$),this.core=e,this.logger=n}};class z6e extends Am{constructor(e,n){super(e,n,N6e,n$,r=>r.id),this.core=e,this.logger=n}}class H6e extends Am{constructor(e,n){super(e,n,O6e,QT,()=>XS),this.core=e,this.logger=n}}class G6e extends Am{constructor(e,n){super(e,n,k6e,QT),this.core=e,this.logger=n}}class q6e extends Am{constructor(e,n){super(e,n,D6e,QT,r=>r.id),this.core=e,this.logger=n}}var V6e=Object.defineProperty,K6e=(t,e,n)=>e in t?V6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,KO=(t,e,n)=>K6e(t,typeof e!="symbol"?e+"":e,n);class Y6e{constructor(e,n){this.core=e,this.logger=n,KO(this,"authKeys"),KO(this,"pairingTopics"),KO(this,"requests"),this.authKeys=new H6e(this.core,this.logger),this.pairingTopics=new G6e(this.core,this.logger),this.requests=new q6e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Q6e=Object.defineProperty,J6e=(t,e,n)=>e in t?Q6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rn=(t,e,n)=>J6e(t,typeof e!="symbol"?e+"":e,n);let Z6e=class eee extends uDe{constructor(e){super(e),rn(this,"protocol",JX),rn(this,"version",ZX),rn(this,"name",qO.name),rn(this,"metadata"),rn(this,"core"),rn(this,"logger"),rn(this,"events",new Ja.EventEmitter),rn(this,"engine"),rn(this,"session"),rn(this,"proposal"),rn(this,"pendingRequest"),rn(this,"auth"),rn(this,"signConfig"),rn(this,"on",(r,s)=>this.events.on(r,s)),rn(this,"once",(r,s)=>this.events.once(r,s)),rn(this,"off",(r,s)=>this.events.off(r,s)),rn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),rn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),rn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),rn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),rn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||qO.name,this.metadata=f3e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:_1(Cm({level:(e==null?void 0:e.logger)||qO.logger}));this.core=(e==null?void 0:e.core)||new A6e(e),this.logger=Ys(n,this.name),this.session=new W6e(this.core,this.logger),this.proposal=new j6e(this.core,this.logger),this.pendingRequest=new z6e(this.core,this.logger),this.engine=new F6e(this),this.auth=new Y6e(this.core,this.logger)}static async init(e){const n=new eee(e);return await n.initialize(),n}get context(){return No(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},Te.toMiliseconds(Te.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const z9="error",X6e="wss://relay.walletconnect.org",e8e="wc",t8e="universal_provider",nS=`${e8e}@2:${t8e}:`,tee="https://rpc.walletconnect.org/v1/",Cy="generic",n8e=`${tee}bundler`,Xa={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function r8e(){}function r$(t){return t==null||typeof t!="object"&&typeof t!="function"}function s$(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function s8e(t){if(r$(t))return t;if(Array.isArray(t)||s$(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function H9(t){return typeof t=="object"&&t!==null}function nee(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function ree(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const i8e="[object RegExp]",see="[object String]",iee="[object Number]",oee="[object Boolean]",aee="[object Arguments]",o8e="[object Symbol]",a8e="[object Date]",c8e="[object Map]",l8e="[object Set]",u8e="[object Array]",d8e="[object ArrayBuffer]",h8e="[object Object]",f8e="[object DataView]",p8e="[object Uint8Array]",g8e="[object Uint8ClampedArray]",m8e="[object Uint16Array]",y8e="[object Uint32Array]",w8e="[object Int8Array]",b8e="[object Int16Array]",v8e="[object Int32Array]",E8e="[object Float32Array]",C8e="[object Float64Array]";function _8e(t,e){return Hy(t,void 0,t,new Map,e)}function Hy(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(r$(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Hy(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Hy(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Hy(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(s$(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Hy(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),yp(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),yp(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),yp(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,yp(o,t,n,r,s),o}if(typeof t=="object"&&A8e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),yp(o,t,n,r,s),o}return t}function yp(t,e,n=t,r,s){const i=[...Object.keys(e),...nee(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Hy(e[a],a,n,r,s))}}function A8e(t){switch(ree(t)){case aee:case u8e:case d8e:case f8e:case oee:case a8e:case E8e:case C8e:case w8e:case b8e:case v8e:case c8e:case iee:case h8e:case i8e:case l8e:case see:case o8e:case p8e:case g8e:case m8e:case y8e:return!0;default:return!1}}function S8e(t,e){return _8e(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case iee:case see:case oee:{const o=new t.constructor(t==null?void 0:t.valueOf());return yp(o,t),o}case aee:{const o={};return yp(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function G9(t){return S8e(t)}function q9(t){return t!==null&&typeof t=="object"&&ree(t)==="[object Arguments]"}function x8e(t){return s$(t)}function I8e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function N8e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=i5(s,o,r,new Map)}return s}function i5(t,e,n,r){if(r$(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return s8e(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...nee(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(q9(a)&&(a={...a}),q9(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=G9(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||H9(c)&&H9(a)?t[o]=i5(c,a,n,r):c==null&&I8e(a)?t[o]=i5({},a,n,r):c==null&&x8e(a)?t[o]=G9(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function T8e(t,...e){return N8e(t,...e,r8e)}var R8e=Object.defineProperty,P8e=Object.defineProperties,O8e=Object.getOwnPropertyDescriptors,V9=Object.getOwnPropertySymbols,k8e=Object.prototype.hasOwnProperty,D8e=Object.prototype.propertyIsEnumerable,K9=(t,e,n)=>e in t?R8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rS=(t,e)=>{for(var n in e||(e={}))k8e.call(e,n)&&K9(t,n,e[n]);if(V9)for(var n of V9(e))D8e.call(e,n)&&K9(t,n,e[n]);return t},M8e=(t,e)=>P8e(t,O8e(e));function sa(t,e,n){var r;const s=l0(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${tee}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Sm(t){return t.includes(":")?t.split(":")[1]:t}function cee(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function L8e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function sS(t={},e={}){const n=Y9(t),r=Y9(e);return T8e(n,r)}function Y9(t){var e,n,r,s,i;const o={};if(!hf(t))return o;for(const[a,c]of Object.entries(t)){const l=KT(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=zy(a);o[f]=M8e(rS(rS({},o[f]),c),{chains:ql(l,(e=o[f])==null?void 0:e.chains),methods:ql(u,(n=o[f])==null?void 0:n.methods),events:ql(d,(r=o[f])==null?void 0:r.events)}),(hf(h)||hf(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=rS(rS({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function Q9(t){return t.includes(":")?t.split(":")[2]:t}function J9(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=KT(n)?[n]:r.chains?r.chains:cee(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function YO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const lee={},vn=t=>lee[t],QO=(t,e)=>{lee[t]=e};var U8e=Object.defineProperty,$8e=(t,e,n)=>e in t?U8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ry=(t,e,n)=>$8e(t,typeof e!="symbol"?e+"":e,n);class B8e{constructor(e){ry(this,"name","polkadot"),ry(this,"client"),ry(this,"httpProviders"),ry(this,"events"),ry(this,"namespace"),ry(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Sm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Za(new Yc(r,vn("disableProviderPing")))}}var F8e=Object.defineProperty,j8e=Object.defineProperties,W8e=Object.getOwnPropertyDescriptors,Z9=Object.getOwnPropertySymbols,z8e=Object.prototype.hasOwnProperty,H8e=Object.prototype.propertyIsEnumerable,o5=(t,e,n)=>e in t?F8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,X9=(t,e)=>{for(var n in e||(e={}))z8e.call(e,n)&&o5(t,n,e[n]);if(Z9)for(var n of Z9(e))H8e.call(e,n)&&o5(t,n,e[n]);return t},e7=(t,e)=>j8e(t,W8e(e)),sy=(t,e,n)=>o5(t,typeof e!="symbol"?e+"":e,n);class G8e{constructor(e){sy(this,"name","eip155"),sy(this,"client"),sy(this,"chainId"),sy(this,"namespace"),sy(this,"httpProviders"),sy(this,"events"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Xa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||sa(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Za(new Yc(r,vn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Sm(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:e7(X9({},u.sessionProperties||{}),{capabilities:e7(X9({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fh("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${n8e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var q8e=Object.defineProperty,V8e=(t,e,n)=>e in t?q8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iy=(t,e,n)=>V8e(t,typeof e!="symbol"?e+"":e,n);class K8e{constructor(e){iy(this,"name","solana"),iy(this,"client"),iy(this,"httpProviders"),iy(this,"events"),iy(this,"namespace"),iy(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Sm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Za(new Yc(r,vn("disableProviderPing")))}}var Y8e=Object.defineProperty,Q8e=(t,e,n)=>e in t?Y8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oy=(t,e,n)=>Q8e(t,typeof e!="symbol"?e+"":e,n);class J8e{constructor(e){oy(this,"name","cosmos"),oy(this,"client"),oy(this,"httpProviders"),oy(this,"events"),oy(this,"namespace"),oy(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Sm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Za(new Yc(r,vn("disableProviderPing")))}}var Z8e=Object.defineProperty,X8e=(t,e,n)=>e in t?Z8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ay=(t,e,n)=>X8e(t,typeof e!="symbol"?e+"":e,n);class e4e{constructor(e){ay(this,"name","algorand"),ay(this,"client"),ay(this,"httpProviders"),ay(this,"events"),ay(this,"namespace"),ay(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||sa(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Xa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Za(new Yc(r,vn("disableProviderPing")))}}var t4e=Object.defineProperty,n4e=(t,e,n)=>e in t?t4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cy=(t,e,n)=>n4e(t,typeof e!="symbol"?e+"":e,n);class r4e{constructor(e){cy(this,"name","cip34"),cy(this,"client"),cy(this,"httpProviders"),cy(this,"events"),cy(this,"namespace"),cy(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Sm(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Za(new Yc(r,vn("disableProviderPing")))}}var s4e=Object.defineProperty,i4e=(t,e,n)=>e in t?s4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ly=(t,e,n)=>i4e(t,typeof e!="symbol"?e+"":e,n);class o4e{constructor(e){ly(this,"name","elrond"),ly(this,"client"),ly(this,"httpProviders"),ly(this,"events"),ly(this,"namespace"),ly(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Sm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Za(new Yc(r,vn("disableProviderPing")))}}var a4e=Object.defineProperty,c4e=(t,e,n)=>e in t?a4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uy=(t,e,n)=>c4e(t,typeof e!="symbol"?e+"":e,n);class l4e{constructor(e){uy(this,"name","multiversx"),uy(this,"client"),uy(this,"httpProviders"),uy(this,"events"),uy(this,"namespace"),uy(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Sm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Za(new Yc(r,vn("disableProviderPing")))}}var u4e=Object.defineProperty,d4e=(t,e,n)=>e in t?u4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dy=(t,e,n)=>d4e(t,typeof e!="symbol"?e+"":e,n);class h4e{constructor(e){dy(this,"name","near"),dy(this,"client"),dy(this,"httpProviders"),dy(this,"events"),dy(this,"namespace"),dy(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||sa(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Xa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace);return typeof r>"u"?void 0:new Za(new Yc(r,vn("disableProviderPing")))}}var f4e=Object.defineProperty,p4e=(t,e,n)=>e in t?f4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hy=(t,e,n)=>p4e(t,typeof e!="symbol"?e+"":e,n);class g4e{constructor(e){hy(this,"name","tezos"),hy(this,"client"),hy(this,"httpProviders"),hy(this,"events"),hy(this,"namespace"),hy(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||sa(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Xa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace);return typeof r>"u"?void 0:new Za(new Yc(r))}}var m4e=Object.defineProperty,y4e=(t,e,n)=>e in t?m4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fy=(t,e,n)=>y4e(t,typeof e!="symbol"?e+"":e,n);class w4e{constructor(e){fy(this,"name",Cy),fy(this,"client"),fy(this,"httpProviders"),fy(this,"events"),fy(this,"namespace"),fy(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=l0(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Za(new Yc(r,vn("disableProviderPing")))}}var b4e=Object.defineProperty,v4e=Object.defineProperties,E4e=Object.getOwnPropertyDescriptors,t7=Object.getOwnPropertySymbols,C4e=Object.prototype.hasOwnProperty,_4e=Object.prototype.propertyIsEnumerable,a5=(t,e,n)=>e in t?b4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iS=(t,e)=>{for(var n in e||(e={}))C4e.call(e,n)&&a5(t,n,e[n]);if(t7)for(var n of t7(e))_4e.call(e,n)&&a5(t,n,e[n]);return t},JO=(t,e)=>v4e(t,E4e(e)),ga=(t,e,n)=>a5(t,typeof e!="symbol"?e+"":e,n);let A4e=class uee{constructor(e){ga(this,"client"),ga(this,"namespaces"),ga(this,"optionalNamespaces"),ga(this,"sessionProperties"),ga(this,"scopedProperties"),ga(this,"events",new MU),ga(this,"rpcProviders",{}),ga(this,"session"),ga(this,"providerOpts"),ga(this,"logger"),ga(this,"uri"),ga(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:_1(Cm({level:(e==null?void 0:e.logger)||z9})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new uee(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:iS({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,UT(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:$n("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=J9(this.session.namespaces);this.namespaces=sS(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=J9(s.namespaces);return this.namespaces=sS(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Cy?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(df(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Z6e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||z9,relayUrl:this.providerOpts.relayUrl||X6e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>zy(n)))];QO("client",this.client),QO("events",this.events),QO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=L8e(n,this.session),s=cee(r),i=sS(this.namespaces,this.optionalNamespaces),o=JO(iS({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new G8e({namespace:o});break;case"algorand":this.rpcProviders[n]=new e4e({namespace:o});break;case"solana":this.rpcProviders[n]=new K8e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new J8e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new B8e({namespace:o});break;case"cip34":this.rpcProviders[n]=new r4e({namespace:o});break;case"elrond":this.rpcProviders[n]=new o4e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new l4e({namespace:o});break;case"near":this.rpcProviders[n]=new h4e({namespace:o});break;case"tezos":this.rpcProviders[n]=new g4e({namespace:o});break;default:this.rpcProviders[Cy]?this.rpcProviders[Cy].updateNamespace(o):this.rpcProviders[Cy]=new w4e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&df(o)&&this.events.emit("accountsChanged",o.map(Q9))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=zy(o),l=YO(o)!==YO(a)?`${c}:${YO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=JO(iS({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",JO(iS({},$n("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Xa.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Cy]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=sS(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>zy(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=zy(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(Q9);if(!df(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${nS}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${nS}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${nS}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(nS)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var n7={};const S4e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof n7<"u"?n7.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},c5={filterOutDuplicatesByRDNS(t){const e=be.state.enableEIP6963?Be.state.connectors:[],n=Ye.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ct.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Be.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Ye.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Be.state,{featuredWalletIds:n}=be.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=be.state.features)==null?void 0:c.connectMethodsOrder),r=e||Be.state.connectors;if(n)return n;const{injected:s,announced:i}=ex.getConnectorsByType(r,lt.state.recommended,lt.state.featured),o=s.filter(ex.showConnector),a=i.filter(ex.showConnector);return o.length||a.length?["wallet","email","social"]:S4e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&lt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&lt.state.excludedWallets.some(r=>FT.isLowerCaseMatch(r.name,t.name));return e||n}},ex={getConnectorsByType(t,e,n){const{customWallets:r}=be.state,s=Ye.getRecentWallets(),i=c5.filterOutDuplicateWallets(e),o=c5.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&lt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&lt.state.excludedWallets.some(i=>FT.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ct.isMobile()||ct.isMobile()&&!e&&!bt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(H.state.chains.values()).some(n=>Be.getConnectorId(n.namespace)===Fe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=be.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=ex.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:be.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:v})=>v===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tx=globalThis,i$=tx.ShadowRoot&&(tx.ShadyCSS===void 0||tx.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o$=Symbol(),r7=new WeakMap;let dee=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==o$)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(i$&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=r7.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&r7.set(n,e))}return e}toString(){return this.cssText}};const wa=t=>new dee(typeof t=="string"?t:t+"",void 0,o$),sd=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new dee(n,t,o$)},x4e=(t,e)=>{if(i$)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=tx.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},s7=i$?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return wa(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:I4e,defineProperty:N4e,getOwnPropertyDescriptor:T4e,getOwnPropertyNames:R4e,getOwnPropertySymbols:P4e,getPrototypeOf:O4e}=Object,ff=globalThis,i7=ff.trustedTypes,k4e=i7?i7.emptyScript:"",ZO=ff.reactiveElementPolyfillSupport,LE=(t,e)=>t,l5={toAttribute(t,e){switch(e){case Boolean:t=t?k4e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},hee=(t,e)=>!I4e(t,e),o7={attribute:!0,type:String,converter:l5,reflect:!1,useDefault:!1,hasChanged:hee};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),ff.litPropertyMetadata??(ff.litPropertyMetadata=new WeakMap);let _y=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=o7){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&N4e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=T4e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??o7}static _$Ei(){if(this.hasOwnProperty(LE("elementProperties")))return;const e=O4e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(LE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(LE("properties"))){const n=this.properties,r=[...R4e(n),...P4e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(s7(s))}else e!==void 0&&n.push(s7(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return x4e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:l5).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:l5;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??hee)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};_y.elementStyles=[],_y.shadowRootOptions={mode:"open"},_y[LE("elementProperties")]=new Map,_y[LE("finalized")]=new Map,ZO==null||ZO({ReactiveElement:_y}),(ff.reactiveElementVersions??(ff.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const UE=globalThis,jI=UE.trustedTypes,a7=jI?jI.createPolicy("lit-html",{createHTML:t=>t}):void 0,fee="$lit$",ch=`lit$${Math.random().toFixed(9).slice(2)}$`,pee="?"+ch,D4e=`<${pee}>`,Zg=document,u_=()=>Zg.createComment(""),d_=t=>t===null||typeof t!="object"&&typeof t!="function",a$=Array.isArray,M4e=t=>a$(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",XO=`[ 	
\f\r]`,Nv=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,c7=/-->/g,l7=/>/g,Xf=RegExp(`>|${XO}(?:([^\\s"'>=/]+)(${XO}*=${XO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),u7=/'/g,d7=/"/g,gee=/^(?:script|style|textarea|title)$/i,mee=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),NKe=mee(1),TKe=mee(2),Yw=Symbol.for("lit-noChange"),bs=Symbol.for("lit-nothing"),h7=new WeakMap,Mp=Zg.createTreeWalker(Zg,129);function yee(t,e){if(!a$(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return a7!==void 0?a7.createHTML(e):e}const L4e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Nv;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Nv?u[1]==="!--"?o=c7:u[1]!==void 0?o=l7:u[2]!==void 0?(gee.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Xf):u[3]!==void 0&&(o=Xf):o===Xf?u[0]===">"?(o=s??Nv,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Xf:u[3]==='"'?d7:u7):o===d7||o===u7?o=Xf:o===c7||o===l7?o=Nv:(o=Xf,s=void 0);const f=o===Xf&&t[a+1].startsWith("/>")?" ":"";i+=o===Nv?c+D4e:d>=0?(r.push(l),c.slice(0,d)+fee+c.slice(d)+ch+f):c+ch+(d===-2?a:f)}return[yee(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class h_{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=L4e(e,n);if(this.el=h_.createElement(l,r),Mp.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Mp.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(fee)){const h=u[o++],f=s.getAttribute(d).split(ch),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?$4e:p[1]==="?"?B4e:p[1]==="@"?F4e:JT}),s.removeAttribute(d)}else d.startsWith(ch)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(gee.test(s.tagName)){const d=s.textContent.split(ch),h=d.length-1;if(h>0){s.textContent=jI?jI.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],u_()),Mp.nextNode(),c.push({type:2,index:++i});s.append(d[h],u_())}}}else if(s.nodeType===8)if(s.data===pee)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(ch,d+1))!==-1;)c.push({type:7,index:i}),d+=ch.length-1}i++}}static createElement(e,n){const r=Zg.createElement("template");return r.innerHTML=e,r}}function Qw(t,e,n=t,r){var o,a;if(e===Yw)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=d_(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Qw(t,s._$AS(t,e.values),s,r)),e}class U4e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Zg).importNode(n,!0);Mp.currentNode=s;let i=Mp.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new M1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new j4e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Mp.nextNode(),o++)}return Mp.currentNode=Zg,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class M1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=bs,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Qw(this,e,n),d_(e)?e===bs||e==null||e===""?(this._$AH!==bs&&this._$AR(),this._$AH=bs):e!==this._$AH&&e!==Yw&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):M4e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==bs&&d_(this._$AH)?this._$AA.nextSibling.data=e:this.T(Zg.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=h_.createElement(yee(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new U4e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=h7.get(e.strings);return n===void 0&&h7.set(e.strings,n=new h_(e)),n}k(e){a$(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new M1(this.O(u_()),this.O(u_()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class JT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=bs,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=bs}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Qw(this,e,n,0),o=!d_(e)||e!==this._$AH&&e!==Yw,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Qw(this,a[r+c],n,c),l===Yw&&(l=this._$AH[c]),o||(o=!d_(l)||l!==this._$AH[c]),l===bs?e=bs:e!==bs&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===bs?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class $4e extends JT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===bs?void 0:e}}class B4e extends JT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==bs)}}class F4e extends JT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Qw(this,e,n,0)??bs)===Yw)return;const r=this._$AH,s=e===bs&&r!==bs||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==bs&&(r===bs||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class j4e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Qw(this,e)}}const e2=UE.litHtmlPolyfillSupport;e2==null||e2(h_,M1),(UE.litHtmlVersions??(UE.litHtmlVersions=[])).push("3.3.1");const W4e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new M1(e.insertBefore(u_(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vg=globalThis;let nx=class extends _y{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=W4e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Yw}};var hz;nx._$litElement$=!0,nx.finalized=!0,(hz=vg.litElementHydrateSupport)==null||hz.call(vg,{LitElement:nx});const t2=vg.litElementPolyfillSupport;t2==null||t2({LitElement:nx});(vg.litElementVersions??(vg.litElementVersions=[])).push("4.2.1");let $E,pf,gf;function PKe(t,e){$E=document.createElement("style"),pf=document.createElement("style"),gf=document.createElement("style"),$E.textContent=u0(t).core.cssText,pf.textContent=u0(t).dark.cssText,gf.textContent=u0(t).light.cssText,document.head.appendChild($E),document.head.appendChild(pf),document.head.appendChild(gf),wee(e)}function wee(t){pf&&gf&&(t==="light"?(pf.removeAttribute("media"),gf.media="enabled"):(gf.removeAttribute("media"),pf.media="enabled"))}function z4e(t){$E&&pf&&gf&&($E.textContent=u0(t).core.cssText,pf.textContent=u0(t).dark.cssText,gf.textContent=u0(t).light.cssText)}function u0(t){return{core:sd`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${wa(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${wa((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${wa((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${wa((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${wa((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:sd`
      :root {
        --w3m-color-mix: ${wa((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${wa(Qu(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${wa(Qu(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:sd`
      :root {
        --w3m-color-mix: ${wa((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${wa(Qu(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${wa(Qu(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const OKe=sd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,kKe=sd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,DKe=sd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Yv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};function L1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const WI=L1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),zI=L1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),bee=L1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});L1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});L1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const H4e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},rx={getMethodsByChainNamespace(t){return H4e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case WI.caipNetworkId:u.chains.push(WI.deprecatedCaipNetworkId);break;case zI.caipNetworkId:u.chains.push(zI.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await TE.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let vee=class{constructor({provider:e,namespace:n}){this.id=Fe.CONNECTOR_ID.WALLET_CONNECT,this.name=SI.ConnectorNamesMap[Fe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=SI.ConnectorImageIds[Fe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=H.getCaipNetworks.bind(H),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=be.state.universalProviderConfigOverride,s=rx.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return OE.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:G4e})}};const G4e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let q4e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>H.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:Fe.CONNECTOR_ID.AUTH,type:"AUTH",name:Fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:SI.ConnectorImageIds[Fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ke.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ke.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof vee);if(!e)throw new Error("WalletConnectConnector not found");return e}};class V4e extends q4e{setUniversalProvider(e){this.addConnector(new vee({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ct.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Bn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ke.state.balanceLoading&&e.chainId===((c=H.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ke.state.balance||"0.00",symbol:Ke.state.balanceSymbol||""};const s=(await Ke.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===Fe.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:gZ.encode(new TextEncoder().encode(r)),pubkey:s}},(a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=H.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===Fe.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Ha(n.id)}]}))}catch(u){if(u.code===Yv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Yv.ERROR_INVALID_CHAIN_ID||u.code===Yv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Yv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Ha(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const K4e=["email","socials","swaps","onramp","activity","reownBranding"],oS={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},Y4e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=oS[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=oS[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return oS[t].processApi(e)},processFallbackFeature(t,e){return oS[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await lt.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Bn.DEFAULT_REMOTE_FEATURES:Bn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of K4e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Bn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Ml.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class Q4e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=H.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=H.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=H.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return H.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>H.getCaipNetworks(n),this.getActiveChainNamespace=()=>H.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{H.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>H.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>H.state.activeChain===n||!n?H.state.activeCaipAddress:H.getAccountProp("caipAddress",n),this.setClientId=n=>{wt.setClientId(n)},this.getProvider=n=>Un.getProvider(n),this.getProviderType=n=>Un.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ke.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ke.setCaipAddress(n,r),n&&be.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ke.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ke.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ke.setProfileImage(n,r)},this.setUser=(n,r)=>{Ke.setUser(n,r)},this.resetAccount=n=>{Ke.resetAccount(n)},this.setCaipNetwork=n=>{H.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{H.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ke.setAllAccounts(n,r),be.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ke.setStatus(n,r),Be.isConnected()?Ye.setConnectionStatus("connected"):Ye.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>H.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Be.state.allConnectors,...n];Be.setConnectors(r)},this.setConnections=(n,r)=>{bt.setConnections(n,r)},this.fetchIdentity=n=>wt.fetchIdentity(n),this.getReownName=n=>TE.getNamesForAddress(n),this.getConnectors=()=>Be.getConnectors(),this.getConnectorImage=n=>vJ.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Un.getProviderId(r),i=n?{...n,type:s}:void 0;Ke.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!H.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ke.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ke.removeAddressLabel(n,r)},this.getAddress=n=>H.state.activeChain===n||!n?Ke.state.address:H.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>H.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{H.resetNetwork(n)},this.addConnector=n=>{Be.addConnector(n)},this.resetWcConnection=()=>{bt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ke.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ke.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{H.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ke.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{be.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await Y4e.fetchRemoteFeatures(e),be.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&f3.setOnrampProviders(this.remoteFeatures.onramp),((n=be.state.remoteFeatures)!=null&&n.email||Array.isArray((r=be.state.remoteFeatures)==null?void 0:r.socials)&&((s=be.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await lt.fetchAllowedOrigins();if(e&&ct.isClient()){const n=window.location.origin;rx.isOriginAllowed(n,e,Yv.DEFAULT_ALLOWED_ANCESTORS)||Ml.open(Nl.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Ml.open(Nl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,gr.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&co.setThemeMode(e.themeMode),e.themeVariables&&co.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");H.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&H.setActiveCaipNetwork(n)}initializeConnectionController(e){bt.setWcBasic(e.basic??!1)}initializeConnectorController(){Be.initialize(this.chainNamespaces)}initializeProjectSettings(e){be.setProjectId(e.projectId),be.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;be.setDebug(e.debug!==!1),be.setEnableWalletConnect(e.enableWalletConnect!==!1),be.setEnableWalletGuide(e.enableWalletGuide!==!1),be.setEnableWallets(e.enableWallets!==!1),be.setEIP6963Enabled(e.enableEIP6963!==!1),be.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),be.setEnableAuthLogger(e.enableAuthLogger!==!1),be.setCustomRpcUrls(e.customRpcUrls),be.setEnableEmbedded(e.enableEmbedded),be.setAllWallets(e.allWallets),be.setIncludeWalletIds(e.includeWalletIds),be.setExcludeWalletIds(e.excludeWalletIds),be.setFeaturedWalletIds(e.featuredWalletIds),be.setTokens(e.tokens),be.setTermsConditionsUrl(e.termsConditionsUrl),be.setPrivacyPolicyUrl(e.privacyPolicyUrl),be.setCustomWallets(e.customWallets),be.setFeatures(e.features),be.setAllowUnsupportedChain(e.allowUnsupportedChain),be.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),be.setPreferUniversalLinks(e.experimental_preferUniversalLinks),be.setDefaultAccountTypes(e.defaultAccountTypes);const n=Ye.getPreferredAccountTypes()||{},r={...be.state.defaultAccountTypes,...n};Ke.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),be.setMetadata(e.metadata),be.setDisableAppend(e.disableAppend),be.setEnableEmbedded(e.enableEmbedded),be.setSIWX(e.siwx),!e.projectId){Ml.open(Nl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===Fe.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");be.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ct.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=vy.getUnsupportedNetwork(`${n}:${e}`);H.setActiveCaipNetwork(r)}}getDefaultNetwork(){return vy.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return vy.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return vy.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?vy.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Un.getProvider(e),s=Un.getProviderId(e),{caipAddress:i}=H.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Ye.removeConnectedNamespace(e),Un.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Be.removeConnectorId(e),H.resetAccount(e),H.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=H.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Ye.setConnectedNamespaces([...H.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Be.setConnectorId(lo.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,b,v,A;const c=H.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const _=this.getCaipNetworks().find(I=>I.chainNamespace===i);_&&this.setCaipNetwork(_)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((A=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Ye.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ke.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=H.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Ye.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=QPe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));Cn.resetSend(),bt.resetWcConnection(),await OE.clearSessions(),Be.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Ye.deleteConnectedSocialProvider(),gr.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(H.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ke.state.address,provider:Un.getProvider(H.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Bn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(H.state.activeChain),s=Un.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Fe.CHAIN.EVM){const n=this.getAdapter(H.state.activeChain),r=Un.getProvider(H.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ke.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:H.state.activeChain}),Ke.state.profileImage||!1},getEnsAddress:async e=>await rx.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(H.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Un.getProvider(H.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ke.state.address||this.updateNativeBalance(Ke.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},bt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Un.getProviderId(H.state.activeChain)===lo.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Un.getProvider(n),i=Un.getProviderId(n);if(e.chainNamespace===H.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===lo.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Dd.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new V4e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Ye.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Ye.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=H.state.activeChain===e,c=H.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ke.state.address,i=H.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=H.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=H.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=H.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===Fe.CHAIN.EVM&&ct.isSafeApp()&&Be.setConnectorId(Fe.CONNECTOR_ID.SAFE,e);const n=Be.getConnectorId(e);switch(this.setStatus("connecting",e),n){case Fe.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Fe.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Be.getConnectorId(e),s=this.getCaipNetwork(e),o=Be.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([ct.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=H.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=Dd.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=Dd.validateCaipAddress(o),{chainId:f,address:p}=Dd.parseCaipAddress(h);if(Un.setProviderId(n,lo.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&H.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==Fe.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:H.state.activeCaipNetwork});Un.setProvider(n,g)}else Un.setProvider(n,this.universalProvider);Be.setConnectorId(Fe.CONNECTOR_ID.WALLET_CONNECT,n),Ye.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await H.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Dd.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>ct.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Un.setProviderId(s,e),Un.setProvider(s,n),Be.setConnectorId(r,s)}async syncAllAccounts(e){const n=Be.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===H.state.activeChain,r=H.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Ye.getActiveNetworkProps(),c=i||a,l=((d=H.state.activeCaipNetwork)==null?void 0:d.name)===Fe.UNSUPPORTED_NETWORK_NAME,u=H.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(v=>{var A;return((A=Dd.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),b=w.find(v=>{var A;return((A=Dd.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===y),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===H.state.activeChain?be.state.enableNetworkSwitch&&!be.state.allowUnsupportedChain&&((h=H.state.activeCaipNetwork)==null?void 0:h.name)===Fe.UNSUPPORTED_NETWORK_NAME?H.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),FT.isLowerCaseMatch(s,Ke.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Be.getConnectorId(e),r=Un.getProviderId(e);if(r===lo.CONNECTOR_TYPE_ANNOUNCED||r===lo.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===lo.CONNECTOR_TYPE_WALLET_CONNECT){const i=Un.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===Fe.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===Fe.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!mJ.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=H.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=XPe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};be.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await A4e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{bt.setUri(e)}),this.universalProvider.on("connect",bt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),bt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(rx.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&ct.isCaipAddress(r[0])&&this.syncAccount(Dd.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ct.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){gr.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Nl.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Nl.ALERT_ERRORS[o];a&&(Ml.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&bt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return vs.open({...e,data:{swap:e.arguments}})}return vs.open(e)}async close(){await this.injectModalUi(),vs.close()}setLoading(e,n){vs.setLoading(e,n)}async disconnect(e){await bt.disconnect(e)}getSIWX(){return be.state.siwx}getError(){return""}getChainId(){var e;return(e=H.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Ml.open(Nl.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await H.switchActiveNetwork(n)}getWalletProvider(){return H.state.activeChain?Un.state.providers[H.state.activeChain]:null}getWalletProviderType(){return Un.getProviderId(H.state.activeChain)}subscribeProviders(e){return Un.subscribeProviders(e)}getThemeMode(){return co.state.themeMode}getThemeVariables(){return co.state.themeVariables}setThemeMode(e){co.setThemeMode(e),wee(co.state.themeMode)}setTermsConditionsUrl(e){be.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){be.setPrivacyPolicyUrl(e)}setThemeVariables(e){co.setThemeVariables(e),z4e(co.state.themeVariables)}subscribeTheme(e){return co.subscribe(e)}getWalletInfo(){return Ke.state.connectedWalletInfo}getAccount(e){var o;const n=Be.getAuthConnector(e),r=H.getAccountData(e),s=H.state.activeChain,i=Ye.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:ct.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===Fe.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Ye.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?H.subscribeChainProp("accountState",r,n):H.subscribe(r),Be.subscribe(r)}subscribeNetwork(e){return H.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Ke.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ke.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){H.subscribeKey("activeCaipNetwork",e)}getState(){return Hl.state}subscribeState(e){return Hl.subscribe(e)}showErrorMessage(e){Oc.showError(e)}showSuccessMessage(e){Oc.showSuccess(e)}getEvent(){return{...gr.state}}subscribeEvents(e){return gr.subscribe(e)}replace(e){qt.replace(e)}redirect(e){qt.push(e)}popTransactionStack(e){qt.popTransactionStack(e)}isOpen(){return vs.state.open}isTransactionStackEmpty(){return qt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){be.setFeatures(e)}updateRemoteFeatures(e){be.setRemoteFeatures(e)}updateOptions(e){const r={...be.state||{},...e};be.setOptions(r)}setConnectMethodsOrder(e){be.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){be.setWalletFeaturesOrder(e)}setCollapseWallets(e){be.setCollapseWallets(e)}setSocialsOrder(e){be.setSocialsOrder(e)}getConnectMethodsOrder(){return c5.getConnectOrderMethod(be.state.features,Be.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||H.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&H.removeNetwork(e,n)}}let f7=!1;class J4e extends Q4e{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Ko.checkIfRequestExists(n)?Ko.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Hs.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Hs.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Ko.checkIfRequestIsSafe(r),i=Ke.state.address,o=H.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=H.state.activeChain;Be.getConnectorId(n)===Fe.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=H.state.activeChain,s=r===Fe.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=be.state.defaultAccountTypes[r],o=(l=Ke.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;FT.isLowerCaseMatch(n.address,Ke.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ke.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>ct.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[ct.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ke.state.user||{},username:n},H.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,H.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,H.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Ke.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=co.getSnapshot(),l=be.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Qu(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:Fe.CONNECTOR_ID.AUTH,info:{name:Fe.CONNECTOR_ID.AUTH},type:lo.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=H.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):Be.getConnectorId(n)===Fe.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Ye.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ct.isTelegram())return;const r=Ye.getTelegramSocialProvider();if(!r||!ct.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ke.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Be.getAuthConnector();r&&o&&(this.setLoading(!0,e),await bt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Ye.setConnectedSocialProvider(r),Ye.removeTelegramSocialProvider(),gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=Eke.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:Nl.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Ml.open(Nl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Ml.open(Nl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Ml.open(Nl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Hl.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&lt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=H.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Un.getProvider(r),u=Un.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Un.getProviderId(n)===lo.CONNECTOR_TYPE_AUTH,u=Un.getProviderId(r),d=u===lo.CONNECTOR_TYPE_AUTH,h=Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(H.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:Fe.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:lo.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===lo.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Hl.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==Fe.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Un.getProviderId(e);if(n===lo.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Ye.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ct.isClient()&&!f7)try{const e={...Bn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ct.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!be.state.disableAppend&&!be.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}f7=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ct.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(ci(()=>import("./embedded-wallet-BhoaEcwK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(ci(()=>import("./email-BGtp8NWd.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(ci(()=>import("./socials-u4ZDoqNy.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(ci(()=>import("./swaps-CSKefHbJ.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(ci(()=>import("./send-BloF-QlV.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(ci(()=>import("./receive-DlS_WLXi.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(ci(()=>import("./onramp-BhQCM9iI.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(ci(()=>import("./transactions-CxZ1dbr0.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(ci(()=>import("./index-DUoodf2-.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,ci(()=>import("./index-CPCSfY6C.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),ci(()=>import("./w3m-modal-DEo1GCyA.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Qd;function Eee(t){t&&(Qd=t)}function U1(){if(!Qd)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Qd==null?void 0:Qd.open(n))}async function e(){await(Qd==null?void 0:Qd.close())}return{open:t,close:e}}const Z4e="1.7.8";let aS;function X4e(t){return aS||(aS=new J4e({...t,sdkVersion:ct.generateSdkVersion(t.adapters??[],"react",Z4e)}),Eee(aS)),aS}const eFe=Kc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),p7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],tFe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=eFe({isOpen:t}),{open:i}=U1(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,w]=D.useState(1),[y,b]=D.useState(1),[v,A]=D.useState(0),[_,I]=D.useState(null),[x,N]=D.useState(p7[0]),[S,O]=D.useState(!1),[P,F]=D.useState(null),q=D.useCallback(async()=>{var M,z;try{if((M=window.solana)!=null&&M.isPhantom){const K=await window.solana.connect();F(K.publicKey.toString());return}if((z=window.solflare)!=null&&z.isSolflare){const K=await window.solflare.connect();F(K.publicKey.toString());return}i()}catch(K){console.error("Failed to connect Solana wallet:",K),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}O(!1)},[i]);D.useEffect(()=>{var M,z;(M=window.solana)!=null&&M.publicKey?F(window.solana.publicKey.toString()):(z=window.solflare)!=null&&z.publicKey&&F(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var z;u(!0),h(null);try{let K,ne=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!P){O(!0),u(!1);return}ne=P||void 0,K=await cK(x.slug,50),console.log("Fetched Solana NFTs from collection:",K.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(z=K.data[0])==null?void 0:z.owners),console.log("All NFTs owner data:",K.data.map(oe=>({name:oe.name,owners:oe.owners,owner_of:oe.owner_of}))),K.data.some(oe=>oe.owners&&oe.owners.length>0)?(K.data=K.data.filter(oe=>{const ae=oe.owners.some(ue=>ue.owner_of&&ue.owner_of.toLowerCase()===P.toLowerCase());return ae&&console.log("Found owned NFT:",oe.name),ae}),console.log("NFTs after filtering:",K.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?K=await WL(x.slug,50,ne):K=await jL(x.slug,g,50,ne);c(K.data),b(K.totalPages),A(K.totalCount)}catch(K){K instanceof Error?h(K.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,P]),D.useEffect(()=>{S&&q()},[S,q]);const B=M=>new Date(M).toLocaleDateString(),T=M=>x.api==="opensea-solana"?M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"N/A",R=()=>{n&&n()},$=async M=>{if(x.api==="opensea"&&x.chain)try{const z=await aK(x.chain,M.address,M.token_id.toString()),K={...M,attributes:JSON.stringify(z.traits||[])};I(K)}catch(z){console.error("Failed to fetch full NFT details",z),I(M)}else I(M)},k=M=>{N(M),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(s1,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:R,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:s.collectionSelector,children:p7.map(M=>m.jsx("button",{className:`${s.collectionButton} ${x.slug===M.slug?"active":""}`,onClick:()=>k(M),children:M.name},M.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{q()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!P&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(M=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{$(M)},children:[m.jsx(gJ,{src:pJ(M),alt:`NFT #${M.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",M.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",T(M)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",B(M.created_at)]})]},M.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(M=>Math.min(y,M+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),_&&m.jsx(yAe,{nft:_,onClose:()=>I(null)})]}):null};var cS,nFe=new Uint8Array(16);function rFe(){if(!cS&&(cS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!cS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cS(nFe)}const sFe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function iFe(t){return typeof t=="string"&&sFe.test(t)}var Os=[];for(var n2=0;n2<256;++n2)Os.push((n2+256).toString(16).substr(1));function oFe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Os[t[e+0]]+Os[t[e+1]]+Os[t[e+2]]+Os[t[e+3]]+"-"+Os[t[e+4]]+Os[t[e+5]]+"-"+Os[t[e+6]]+Os[t[e+7]]+"-"+Os[t[e+8]]+Os[t[e+9]]+"-"+Os[t[e+10]]+Os[t[e+11]]+Os[t[e+12]]+Os[t[e+13]]+Os[t[e+14]]+Os[t[e+15]]).toLowerCase();if(!iFe(n))throw TypeError("Stringified UUID is invalid");return n}function aFe(t,e,n){t=t||{};var r=t.random||(t.rng||rFe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,oFe(r)}const cFe=Kc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),lFe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],uFe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],Oo=500;function Cee(){const t=cFe(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(50),[u,d]=D.useState(50),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[w,y]=D.useState(!1),[b,v]=D.useState(!1),[A,_]=D.useState(!1),[I,x]=D.useState([]),[N,S]=D.useState(null),O=D.useRef(null),[P,F]=D.useState(null),q=async X=>{const ce=X.getContext("2d");if(!ce)return;ce.clearRect(0,0,X.width,X.height),n?await new Promise(ge=>{const ve=new window.Image;ve.crossOrigin="anonymous",ve.onload=()=>{const Xe=Math.min(X.width/ve.width,X.height/ve.height),ot=(X.width-ve.width*Xe)/2,yt=(X.height-ve.height*Xe)/2;ce.drawImage(ve,ot,yt,ve.width*Xe,ve.height*Xe),ge()},ve.onerror=()=>ge(),ve.src=n}):(ce.fillStyle="#333",ce.fillRect(0,0,X.width,X.height)),(ge=>{ge.textAlign="center",ge.strokeStyle="black",ge.lineWidth=3,ge.fillStyle="white";const ve=(Xe,ot)=>{const yt=Xe.toUpperCase().split(" "),St=[];let qn=yt[0];for(let kt=1;kt<yt.length;kt++){const Wr=yt[kt];ge.measureText(qn+" "+Wr).width<ot?qn+=" "+Wr:(St.push(qn),qn=Wr)}return St.push(qn),St};if(s&&(ge.font=`${c}px Impact`,ve(s,Oo-20).forEach((ot,yt)=>{const St=c+yt*c*1.2;ge.strokeText(ot,Oo/2,St),ge.fillText(ot,Oo/2,St)})),o){ge.font=`${u}px Impact`;const Xe=ve(o,Oo-20);Xe.forEach((ot,yt)=>{const St=Oo-(Xe.length-yt)*u*1.2+u;ge.strokeText(ot,Oo/2,St),ge.fillText(ot,Oo/2,St)})}})(ce),await Promise.all(I.map(ge=>new Promise(ve=>{const Xe=new window.Image;Xe.src=ge.src,Xe.onload=()=>{ce.save(),ce.translate(ge.x,ge.y),ce.rotate(ge.rotation*Math.PI/180),ce.scale(ge.scale,ge.scale),ce.drawImage(Xe,-40,-40,80,80),ce.restore(),ve()},Xe.onerror=()=>ve()})));try{h&&B(X),p&&T(X),w&&R(X)}catch(ge){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",ge),f(!1),g(!1),y(!1)}},B=X=>{const ce=X.getContext("2d");if(!ce)return;const Ee=ce.getImageData(0,0,X.width,X.height),ge=Ee.data;for(let ve=0;ve<ge.length;ve+=4){const Xe=ge[ve],ot=ge[ve+1],yt=ge[ve+2],St=(Xe+ot+yt)/3,qn=1.8;ge[ve]=Math.min(255,St+(Xe-St)*qn),ge[ve+1]=Math.min(255,St+(ot-St)*qn*.7),ge[ve+2]=Math.min(255,St+(yt-St)*qn*.4);const kt=1.3;ge[ve]=Math.min(255,Math.max(0,ge[ve]*kt)),ge[ve+1]=Math.min(255,Math.max(0,ge[ve+1]*kt)),ge[ve+2]=Math.min(255,Math.max(0,ge[ve+2]*kt))}ce.putImageData(Ee,0,0)},T=X=>{const ce=X.getContext("2d");if(!ce)return;const Ee=4,ve=ce.getImageData(0,0,X.width,X.height).data,Xe=new Uint8ClampedArray(ve);for(let ot=0;ot<X.height;ot+=Ee)for(let yt=0;yt<X.width;yt+=Ee){const St=(ot*X.width+yt)*4,qn=ve[St],kt=ve[St+1],Wr=ve[St+2],Dt=ve[St+3];for(let Vn=0;Vn<Ee&&ot+Vn<X.height;Vn++)for(let Mr=0;Mr<Ee&&yt+Mr<X.width;Mr++){const Wi=((ot+Vn)*X.width+(yt+Mr))*4;Xe[Wi]=qn,Xe[Wi+1]=kt,Xe[Wi+2]=Wr,Xe[Wi+3]=Dt}}ce.putImageData(new ImageData(Xe,X.width,X.height),0,0)},R=X=>{const ce=X.getContext("2d");if(!ce)return;const Ee=ce.getImageData(0,0,X.width,X.height),ge=Ee.data;for(let ve=0;ve<ge.length;ve+=4){const Xe=(Math.random()-.5)*50;ge[ve]=Math.max(0,Math.min(255,ge[ve]+Xe)),ge[ve+1]=Math.max(0,Math.min(255,ge[ve+1]+Xe)),ge[ve+2]=Math.max(0,Math.min(255,ge[ve+2]+Xe))}ce.putImageData(Ee,0,0)};D.useEffect(()=>{e.current&&q(e.current)},[q]);const $=D.useRef(null),k=500,M=X=>{X.preventDefault(),$.current=setTimeout(()=>{const ce=e.current;ce&&(navigator.share?ce.toBlob(Ee=>{if(Ee){const ge=new File([Ee],"meme.png",{type:"image/png"});navigator.share({title:"Lawb Meme",text:"Check out this meme I made!",files:[ge]}).catch(()=>{ae()})}}):ae())},k)},z=()=>{$.current&&(clearTimeout($.current),$.current=null)},K=()=>{$.current&&(clearTimeout($.current),$.current=null)},ne=X=>{X.preventDefault()},le=X=>{var Ee;const ce=(Ee=X.target.files)==null?void 0:Ee[0];ce&&r(URL.createObjectURL(ce))},oe=()=>{r(null),i(""),a(""),l(50),d(50),f(!1),g(!1),y(!1)},ae=async()=>{const X=e.current;if(!X)return;await q(X);const ce=document.createElement("a");ce.download="meme.png",ce.href=X.toDataURL("image/png"),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},ue=async X=>{_(!0),v(!1);try{console.log("Fetching NFTs for collection:",X);let ce;if(X.api==="opensea"){console.log("Using OpenSea API for:",X.slug);const Ee=await WL(X.slug,50);ce=Ee.data,console.log("OpenSea response:",Ee)}else if(X.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",X.slug);const Ee=await cK(X.slug,50);if(ce=Ee.data,console.log("Helius Solana response:",Ee),!ce||ce.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",X.slug);const Ee=await jL(X.slug,1,50);ce=Ee.data,console.log("Scatter response:",Ee)}if(ce&&ce.length>0){const Ee=ce[Math.floor(Math.random()*ce.length)],ge=Ee.image||Ee.image_url||Ee.image_url_shrunk;console.log("Selected NFT:",Ee),console.log("Image URL:",ge),r(ge)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ce){console.error("Error fetching NFTs:",ce),alert("Failed to fetch NFT images. Check console for details.")}finally{_(!1)}},Ze=X=>{const ce={id:aFe(),src:X,x:80,y:80,scale:1,rotation:0};x(Ee=>Ee.length>=2||Ee.some(ge=>ge.src===X&&!ge.id.startsWith("upload-"))?Ee:[...Ee,ce]),F(ce.id)},Ie=X=>{var Ee;const ce=(Ee=X.target.files)==null?void 0:Ee[0];if(ce){const ge=URL.createObjectURL(ce);Ze(ge)}},De=(X,ce,Ee)=>{x(ge=>ge.map(ve=>{if(ve.id!==X)return ve;let Xe=ve.x+ce/1.2,ot=ve.y+Ee/1.2;const yt=40*ve.scale,St=40*ve.scale;return Xe=Math.max(yt,Math.min(Oo-yt,Xe)),ot=Math.max(St,Math.min(Oo-St,ot)),{...ve,x:Xe,y:ot}}))},st=(X,ce,Ee,ge,ve)=>{x(Xe=>Xe.map(ot=>{if(ot.id!==X)return ot;const yt=ot.x,St=ot.y,qn=Math.atan2(ve-St,ge-yt)*180/Math.PI;return{...ot,rotation:Ee+(qn-ce)*.5}}))},Ot=X=>{x(ce=>ce.filter(Ee=>Ee.id!==X))},tn=(X,ce)=>{x(Ee=>Ee.map(ge=>ge.id===X?{...ge,scale:Math.max(.2,ge.scale*(1+(ce-1)*.2))}:ge))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>v(X=>!X),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:lFe.map(X=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{ue(X)},children:X.name},X.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:le})]}),A&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:X=>i(X.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:X=>l(Number(X.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:X=>a(X.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:X=>d(Number(X.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(X=>!X),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(X=>!X),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(X=>!X),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[uFe.map((X,ce)=>m.jsx("img",{src:X,alt:`sticker${ce+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>Ze(X)},X)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:O,onChange:Ie})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:ae,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:oe,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:Oo,height:Oo,className:t.canvas,onTouchStart:M,onTouchEnd:z,onTouchMove:K,onContextMenu:ne,style:{touchAction:"none"}})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:Oo,height:Oo,pointerEvents:"none"},children:I.map(X=>P===X.id?m.jsxs("div",{style:{position:"absolute",left:X.x,top:X.y,width:80*X.scale,height:80*X.scale,transform:`rotate(${X.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ce=>{S(X.id),ce.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:ce=>{N===X.id&&ce.buttons===1&&De(X.id,ce.movementX,ce.movementY)},children:[m.jsx("img",{src:X.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ce=>{var qn;ce.stopPropagation();const Ee=(qn=ce.currentTarget.parentElement)==null?void 0:qn.getBoundingClientRect(),ge=Ee?Ee.left+Ee.width/2:0,ve=Ee?Ee.top+Ee.height/2:0,Xe=Math.atan2(ce.clientY-ve,ce.clientX-ge)*180/Math.PI,ot=X.rotation,yt=kt=>{st(X.id,Xe,ot,kt.clientX,kt.clientY)},St=()=>{window.removeEventListener("mousemove",yt),window.removeEventListener("mouseup",St)};window.addEventListener("mousemove",yt),window.addEventListener("mouseup",St)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ce=>{ce.stopPropagation();const Ee=ce.clientX,ge=Xe=>{const ot=(Xe.clientX-Ee)/80;tn(X.id,1+ot)},ve=()=>{window.removeEventListener("mousemove",ge),window.removeEventListener("mouseup",ve)};window.addEventListener("mousemove",ge),window.addEventListener("mouseup",ve)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>Ot(X.id),children:"×"}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>F(null),children:"Place"})]},X.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function f_(){return f_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f_.apply(this,arguments)}var Wh;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wh||(Wh={}));const g7="popstate";function dFe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return u5("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Aee(s)}return fFe(e,n,null,t)}function as(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _ee(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hFe(){return Math.random().toString(36).substr(2,8)}function m7(t,e){return{usr:t.state,key:t.key,idx:e}}function u5(t,e,n,r){return n===void 0&&(n=null),f_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Lb(e):e,{state:n,key:e&&e.key||r||hFe()})}function Aee(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Lb(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function fFe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Wh.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(f_({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Wh.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=Wh.Push;let b=u5(g.location,w,y);l=u()+1;let v=m7(b,l),A=g.createHref(b);try{o.pushState(v,"",A)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=Wh.Replace;let b=u5(g.location,w,y);l=u();let v=m7(b,l),A=g.createHref(b);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:Aee(w);return b=b.replace(/ $/,"%20"),as(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(g7,d),c=w,()=>{s.removeEventListener(g7,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var y7;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(y7||(y7={}));function pFe(t,e,n){return n===void 0&&(n="/"),gFe(t,e,n)}function gFe(t,e,n,r){let s=typeof e=="string"?Lb(e):e,i=Iee(s.pathname||"/",n);if(i==null)return null;let o=See(t);mFe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=NFe(i);a=SFe(o[c],l)}return a}function See(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(as(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Eg([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(as(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),See(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:_Fe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of xee(i.path))s(i,o,c)}),e}function xee(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=xee(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function mFe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:AFe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const yFe=/^:[\w-]+$/,wFe=3,bFe=2,vFe=1,EFe=10,CFe=-2,w7=t=>t==="*";function _Fe(t,e){let n=t.split("/"),r=n.length;return n.some(w7)&&(r+=CFe),e&&(r+=bFe),n.filter(s=>!w7(s)).reduce((s,i)=>s+(yFe.test(i)?wFe:i===""?vFe:EFe),r)}function AFe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function SFe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=xFe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Eg([i,d.pathname]),pathnameBase:DFe(Eg([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Eg([i,d.pathnameBase]))}return o}function xFe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=IFe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function IFe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_ee(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function NFe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _ee(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Iee(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function TFe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Lb(t):t;return{pathname:n?n.startsWith("/")?n:RFe(n,e):e,search:MFe(r),hash:LFe(s)}}function RFe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function r2(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PFe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function OFe(t,e){let n=PFe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function kFe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Lb(t):(s=f_({},t),as(!s.pathname||!s.pathname.includes("?"),r2("?","pathname","search",s)),as(!s.pathname||!s.pathname.includes("#"),r2("#","pathname","hash",s)),as(!s.search||!s.search.includes("#"),r2("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=TFe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Eg=t=>t.join("/").replace(/\/\/+/g,"/"),DFe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MFe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LFe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function UFe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Nee=["post","put","patch","delete"];new Set(Nee);const $Fe=["get",...Nee];new Set($Fe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p_(){return p_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p_.apply(this,arguments)}const c$=D.createContext(null),BFe=D.createContext(null),ZT=D.createContext(null),XT=D.createContext(null),Ub=D.createContext({outlet:null,matches:[],isDataRoute:!1}),Tee=D.createContext(null);function eR(){return D.useContext(XT)!=null}function Ree(){return eR()||as(!1),D.useContext(XT).location}function Pee(t){D.useContext(ZT).static||D.useLayoutEffect(t)}function FFe(){let{isDataRoute:t}=D.useContext(Ub);return t?XFe():jFe()}function jFe(){eR()||as(!1);let t=D.useContext(c$),{basename:e,future:n,navigator:r}=D.useContext(ZT),{matches:s}=D.useContext(Ub),{pathname:i}=Ree(),o=JSON.stringify(OFe(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return Pee(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=kFe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Eg([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function WFe(t,e){return zFe(t,e)}function zFe(t,e,n,r){eR()||as(!1);let{navigator:s}=D.useContext(ZT),{matches:i}=D.useContext(Ub),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=Ree(),u;if(e){var d;let w=typeof e=="string"?Lb(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||as(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=pFe(t,{pathname:f}),g=KFe(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Eg([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Eg([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?D.createElement(XT.Provider,{value:{location:p_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Wh.Pop}},g):g}function HFe(){let t=ZFe(),e=UFe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const GFe=D.createElement(HFe,null);class qFe extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Ub.Provider,{value:this.props.routeContext},D.createElement(Tee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VFe(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(c$);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Ub.Provider,{value:e},r)}function KFe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||as(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||GFe,c&&(l<0&&h===0?(eje("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=w:d.route.Component?v=D.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,D.createElement(VFe,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(qFe,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var Oee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Oee||{}),kee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kee||{});function YFe(t){let e=D.useContext(c$);return e||as(!1),e}function QFe(t){let e=D.useContext(BFe);return e||as(!1),e}function JFe(t){let e=D.useContext(Ub);return e||as(!1),e}function Dee(t){let e=JFe(),n=e.matches[e.matches.length-1];return n.route.id||as(!1),n.route.id}function ZFe(){var t;let e=D.useContext(Tee),n=QFe(),r=Dee();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function XFe(){let{router:t}=YFe(Oee.UseNavigateStable),e=Dee(kee.UseNavigateStable),n=D.useRef(!1);return Pee(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,p_({fromRouteId:e},i)))},[t,e])}const b7={};function eje(t,e,n){b7[t]||(b7[t]=!0)}function tje(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function sx(t){as(!1)}function nje(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Wh.Pop,navigator:i,static:o=!1,future:a}=t;eR()&&as(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:p_({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Lb(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let w=Iee(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(ZT.Provider,{value:l},D.createElement(XT.Provider,{children:n,value:g}))}function rje(t){let{children:e,location:n}=t;return WFe(d5(e),n)}new Promise(()=>{});function d5(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,d5(r.props.children,i));return}r.type!==sx&&as(!1),!r.props.index||!r.props.children||as(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=d5(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const sje="6";try{window.__reactRouterVersion=sje}catch{}const ije="startTransition",v7=Nre[ije];function oje(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=dFe({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&v7?v7(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>tje(r),[r]),D.createElement(nje,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var E7;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(E7||(E7={}));var C7;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(C7||(C7={}));const aje=Kc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function cje(){const t=aje(),{open:e}=U1(),{address:n,isConnected:r}=xb(),s=Qa(),[i,o]=D.useState("pixelawbs-popup"),[a,c]=D.useState(new Set),[l,u]=D.useState(!1),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,w]=D.useState(!1),y=FFe();D.useEffect(()=>{if(g){const B=setTimeout(()=>{console.log("[CHESS] Loading timeout reached, navigating directly"),w(!1),y("/chess")},5e3);return()=>clearTimeout(B)}},[g,y]);const b=D.useRef(null);D.useEffect(()=>{if(i==="halloween-popup"&&b.current){const B=b.current.querySelector("script[data-tiktok-embed]");B&&B.remove();const T=document.createElement("script");T.src="https://www.tiktok.com/embed.js",T.async=!0,T.setAttribute("data-tiktok-embed","true"),b.current.appendChild(T)}},[i]);const v=(B,T,R)=>{if(B==="url"&&R)window.open(R,"_blank");else if(B==="popup"&&T)o(T),c($=>{const k=new Set($);return k.delete(T),k}),document.body.offsetWidth;else if(B==="wallet")r?console.log("Wallet disconnect requested"):e();else if(B==="mint"){if(!n){alert("Please connect your wallet first!");return}if(s!==Qo.id){alert("Please switch to Ethereum mainnet to mint Pixelawbs. Current network: "+s);return}u(!0)}else B==="nft-gallery"?h(!0):B==="meme-generator"?p(!0):B==="chess"&&(console.log("[CHESS] Chess icon clicked, isConnected:",r),w(!0))},A=()=>o(null),_=B=>{c(T=>new Set(T).add(B)),o(null)},I=B=>{B==="mint-popup"?u(!0):B==="nft-gallery-popup"?h(!0):B==="meme-generator-popup"?p(!0):o(B),c(T=>{const R=new Set(T);return R.delete(B),R})},x=()=>u(!1),N=()=>h(!1),S=()=>p(!1),O=()=>{u(!1),c(B=>new Set(B).add("mint-popup"))},P=()=>{h(!1),c(B=>new Set(B).add("nft-gallery-popup"))},F=()=>{p(!1),c(B=>new Set(B).add("meme-generator-popup"))},q=m.jsxs("div",{onClick:()=>{r?console.log("Wallet disconnect requested"):e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),r?`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[g&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("video",{src:"/images/loadingchess.mp4",style:{width:120,height:120,marginBottom:32},autoPlay:!0,muted:!0,onEnded:()=>{w(!1),y("/chess")},onError:()=>{console.log("[CHESS] Video failed to load, navigating directly"),w(!1),y("/chess")}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(uye,{onIconClick:v}),m.jsx(hye,{minimizedWindows:Array.from(a),onRestoreWindow:I,walletButton:q,connectionStatus:{connected:r,address:n,ens:void 0}}),m.jsxs(ba,{id:"chat-popup",isOpen:i==="chat-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(ba,{id:"purity-popup",isOpen:i==="purity-popup",onClose:A,onMinimize:_,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(ba,{id:"lawbstarz-popup",isOpen:i==="lawbstarz-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(ba,{id:"lawbstation-popup",isOpen:i==="lawbstation-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(ba,{id:"nexus-popup",isOpen:i==="nexus-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(ba,{id:"lawbsters-popup",isOpen:i==="lawbsters-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(kfe,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(ba,{id:"pixelawbs-popup",isOpen:i==="pixelawbs-popup",onClose:A,onMinimize:_,children:(()=>{const B=T=>{T.preventDefault(),o(null),u(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:B,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(ba,{id:"halloween-popup",isOpen:i==="halloween-popup",onClose:A,onMinimize:_,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:b,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),m.jsxs(ba,{id:"lawb-popup",isOpen:i==="lawb-popup",onClose:A,onMinimize:_,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(pAe,{isOpen:l,onClose:x,onMinimize:O,walletAddress:n||""}),m.jsx(tFe,{isOpen:d,onClose:N,onMinimize:P,walletAddress:n}),m.jsx(ba,{id:"meme-generator-popup",isOpen:f,onClose:S,onMinimize:F,children:m.jsx(Cee,{})})]})}const lje=Kc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),_7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],uje=({onBack:t,walletAddress:e})=>{const n=lje(),{open:r}=U1(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(_7[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[w,y]=D.useState("all"),[b,v]=D.useState(null),A=D.useCallback(async()=>{var N,S;try{if((N=window.solana)!=null&&N.isPhantom){const O=await window.solana.connect();g(O.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const O=await window.solflare.connect();g(O.publicKey.toString());return}r()}catch(O){console.error("Failed to connect Solana wallet:",O),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var N,S;(N=window.solana)!=null&&N.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let S,O=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}O=p,S=await fye(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await WL(u.slug,100,O):S=await jL(u.slug,1,100,O);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some(F=>F.owners&&F.owners.length>0)?S.data=S.data.filter(F=>F.owners.some(B=>B.owner_of&&B.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),D.useEffect(()=>{h&&A()},[h,A]);const _=async N=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await aK(u.chain,N.address,N.token_id.toString()),O={...N,attributes:JSON.stringify(S.traits||[])};l(O)}catch(S){console.error("Failed to fetch full NFT details",S),l(N)}else l(N);a(!1)},I=()=>{if(!c)return null;let N=[];try{N=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:N.map((S,O)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},O))})]})},x=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:_7.map(N=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===N.slug?"active":""}`,onClick:()=>d(N),children:N.name},N.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(N=>{let S=N.image||N.image_url||N.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void _(N),children:[m.jsx("img",{src:S,alt:N.name,onError:O=>{O.currentTarget.src!==N.image_url&&N.image_url?O.currentTarget.src=N.image_url:O.currentTarget.src!==N.image_url_shrunk&&N.image_url_shrunk?O.currentTarget.src=N.image_url_shrunk:O.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:N.name})]},N.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?I():x()})]})},dje=Kc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),fc=({isOpen:t,onClose:e,title:n,children:r})=>{const s=dje();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),m.jsx("div",{className:s.content,children:r})]})}):null},hje=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=hAe(),p=Qa(),{switchChain:g}=kU();D.useEffect(()=>{t&&n&&w()},[t,n]);const w=async()=>{if(o(!0),h(null),p!==Qo.id){h(`Please switch to Ethereum mainnet to mint Pixelawbs. Current network: ${p}`),o(!1);return}try{const I=await iK(n);s(I);const x={};I.forEach(N=>{x[N.id]=0}),u(x)}catch(I){h(I.message)}finally{o(!1)}},y=(I,x)=>{u(N=>({...N,[I]:Math.max(0,x)}))},b=async()=>{const I=Object.entries(l).filter(([,x])=>x>0).map(([x,N])=>({id:x,quantity:N}));if(I.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}if(p!==Qo.id){h("Please switch to Ethereum mainnet to mint Pixelawbs");return}c(!0),h(null);try{const x=await oK(n,I);if(x.success&&x.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const N=await f.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${N}`),e()}catch(N){h("Transaction failed: "+N.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){h("Minting failed: "+x.message)}finally{c(!1)}},v=(I,x)=>`${parseFloat(I)} ${x}`,A={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},_={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(fc,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsxs("div",{style:_,children:[d,p!==Qo.id&&m.jsx("div",{style:{marginTop:"10px"},children:m.jsx("button",{onClick:()=>g({chainId:Qo.id}),style:{backgroundColor:"#008000",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Switch to Ethereum"})})]}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(I=>m.jsxs("div",{style:A,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:I.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",v(I.token_price,I.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",I.wallet_limit===4294967295?"Unlimited":I.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:I.wallet_limit===4294967295?void 0:I.wallet_limit,value:l[I.id]||"",onChange:x=>y(I.id,parseInt(x.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},I.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:b,disabled:a,children:a?"Minting...":"Mint"})]})]})},fje=Kc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),pje=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],gje=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],mje=()=>{const t=fje(),{open:e}=U1(),{address:n,isConnected:r}=xb(),{isPending:s}=aAe(),{disconnect:i}=lAe(),{data:o}=uAe({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),[v,A]=D.useState(!1),[_,I]=D.useState(!1),[x,N]=D.useState(!1),[S,O]=D.useState(!1),[P,F]=D.useState(!1),[q,B]=D.useState(!1),[T,R]=D.useState(!1),[$,k]=D.useState(!1),[M,z]=D.useState(!1),K=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>I(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],ne=ae=>{ae.disabled||ae.action()};if(D.useEffect(()=>{const ae=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ae)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(uje,{onBack:()=>c("main"),walletAddress:n||void 0});function le({open:ae,onClose:ue,title:Ze,nfts:Ie}){const De=st=>{switch(st){case"lawbsters":N(!0);break;case"lawbstarz":O(!0);break;case"pixelawbs":F(!0);break;case"halloween":B(!0);break;case"lawbstation":R(!0);break;case"nexus":k(!0);break}};return m.jsx(fc,{isOpen:ae,onClose:ue,title:Ze,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:Ie.map(st=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>De(st.id),children:[m.jsx("img",{src:st.image,alt:st.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:st.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:st.description})]},st.id))})})}function oe({open:ae,onClose:ue}){return ae?m.jsxs(fc,{isOpen:ae,onClose:ue,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:K.map(ae=>m.jsxs("div",{className:t.icon,onClick:()=>ne(ae),children:[m.jsx("img",{src:ae.icon,alt:ae.label}),m.jsx("span",{children:ae.label})]},ae.label))}),l&&m.jsxs(fc,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ae=>ae.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),z(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(hje,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(le,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:pje}),m.jsx(le,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:gje}),m.jsx(oe,{open:_,onClose:()=>I(!1)}),m.jsxs(fc,{isOpen:x,onClose:()=>N(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(fc,{isOpen:S,onClose:()=>O(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(fc,{isOpen:P,onClose:()=>F(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{F(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(fc,{isOpen:q,onClose:()=>B(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(fc,{isOpen:T,onClose:()=>R(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(fc,{isOpen:$,onClose:()=>k(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(fc,{isOpen:M,onClose:()=>z(!1),title:"Meme Generator",children:m.jsx(Cee,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function yje(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const HI={id:1992,name:"Sanko Testnet",network:"sanko-testnet",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://testnet.sankoscan.io"}}},GI={id:1996,name:"Sanko",network:"sanko",nativeCurrency:{decimals:18,name:"DMT",symbol:"DMT"},rpcUrls:{default:{http:["https://mainnet.sanko.xyz","https://sanko-mainnet.calderachain.xyz/http"]},public:{http:["https://mainnet.sanko.xyz","https://sanko-mainnet.calderachain.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://explorer.sanko.xyz"}}},wje=JQ({chains:[Qo,bI,HI,GI],transports:{[Qo.id]:Ua(),[bI.id]:Ua(),[HI.id]:Ua("https://sanko-arb-sepolia.rpc.caldera.xyz/http"),[GI.id]:Ua("https://mainnet.sanko.xyz")}}),l$=()=>{if(!Dx)throw new Error("[FIREBASE] Database not initialized");return Dx},Xg=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,qI=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=l$(),s=to(r,`leaderboard/${t}`),i=await hp(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await dE(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Xg(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},bje=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Xg(e),redPlayer:Xg(n)}),await qI(e,t==="blue"?"win":t==="red"?"loss":"draw"),await qI(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},Mee=async(t=20)=>{try{const e=l$(),n=to(e,"leaderboard"),r=await hp(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Lee=async()=>{try{const t=l$(),e=to(t,"leaderboard/0x0000000000000000000000000000000000000000");return await eG(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},uc=()=>{if(!Dx)throw new Error("[FIREBASE] Database not initialized");return Dx},ri={async getGame(t){try{const e=uc(),n=to(e,`chess_games/${t}`),r=await hp(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=uc(),r=to(n,`chess_games/${t}`);await bce(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=uc(),r=to(n,`chess_games/${t}`);return qB(r,i=>{if(i.exists()){const o=i.val();e(o)}})}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=uc(),r=to(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await dE(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await hp(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async createGameFromTransaction(t,e,n,r){try{const s=uc(),i=to(s,`chess_games/${t}`);let o="DMT";n==="0x754cDAd6f5821077d6915004Be2cE05f93d176f8"?o="DMT":n==="0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"?o="LAWB":n==="0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D"?o="GOLD":n==="0xeA240b96A9621e67159c59941B9d588eb290ef09"&&(o="MOSS");const a={invite_code:t,game_title:`Chess Game ${t.slice(-6)}`,bet_amount:r,bet_token:o,blue_player:e,red_player:"0x0000000000000000000000000000000000000000",game_state:"waiting",board:{positions:{"0,0":"R","0,1":"N","0,2":"B","0,3":"Q","0,4":"K","0,5":"B","0,6":"N","0,7":"R","1,0":"P","1,1":"P","1,2":"P","1,3":"P","1,4":"P","1,5":"P","1,6":"P","1,7":"P","6,0":"p","6,1":"p","6,2":"p","6,3":"p","6,4":"p","6,5":"p","6,6":"p","6,7":"p","7,0":"r","7,1":"n","7,2":"b","7,3":"q","7,4":"k","7,5":"b","7,6":"n","7,7":"r"},rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56",is_public:!0,created_at:new Date().toISOString()};return await dE(i,a),console.log("[FIREBASE] Game created from transaction:",t,"with token:",o),a}catch(s){throw console.error("[FIREBASE] Error creating game from transaction:",s),s}},async getActiveGames(){try{const t=uc(),e=to(t,"chess_games"),n=await hp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=uc(),e=to(t,"chess_games"),n=await hp(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r),console.log("[FIREBASE] Number of total games:",Object.keys(r||{}).length),r&&Object.keys(r).forEach(i=>{const o=r[i];console.log("[FIREBASE] Game details:",{inviteCode:o.invite_code,gameState:o.game_state,isPublic:o.is_public,redPlayer:o.red_player,bluePlayer:o.blue_player,createdAt:o.created_at})});const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting"||i.game_state==="active",a=i.is_public!==!1,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000",l=i.game_state==="waiting"||i.game_state==="active"||i.game_state===void 0;return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,originalIsPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,isPublic:a,noRedPlayer:c,hasValidState:l,passes:l&&a&&c}),l&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=uc(),n=to(e,`chess_games/${t}`);await eG(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=uc(),n=to(e,`leaderboard/${t.username}`);await dE(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=uc(),e=to(t,"leaderboard"),n=await hp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=uc(),n=to(e,"leaderboard");return qB(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},vje="6.15.0";function Eje(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function _i(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function vt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&Eje(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Gy(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Gy(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Gy(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Gy(r,e)}: ${Gy(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function js(t,e){return t&&t.code===e}function u$(t){return js(t,"CALL_EXCEPTION")}function fr(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Gy(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Gy(a))}}i.push(`code=${e}`),i.push(`version=${vje}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return vt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&vt(s,{shortMessage:r}),s}function ye(t,e,n,r){if(!t)throw fr(e,n,r)}function Z(t,e,n,r){ye(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Uee(t,e,n){n==null&&(n=""),n&&(n=": "+n),ye(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ye(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function tR(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),ye(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function $ee(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Z(!1,"invalid BytesLike value",e||"value",t)}function Jt(t,e){return $ee(t,e,!1)}function Ii(t,e){return $ee(t,e,!0)}function rr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function d$(t){return rr(t,!0)||t instanceof Uint8Array}const A7="0123456789abcdef";function ke(t){const e=Jt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=A7[(s&240)>>4]+A7[s&15]}return n}function Or(t){return"0x"+t.map(e=>ke(e).substring(2)).join("")}function d0(t){return rr(t,!0)?(t.length-2)/2:Jt(t).length}function Ir(t,e,n){const r=Jt(t);return n!=null&&n>r.length&&ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),ke(r.slice(e??0,n??r.length))}function Bee(t,e,n){const r=Jt(t);ye(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),ke(s)}function wd(t,e){return Bee(t,e,!0)}function Cje(t,e){return Bee(t,e,!1)}const nR=BigInt(0),kc=BigInt(1),qy=9007199254740991;function _je(t,e){const n=rR(t,"value"),r=BigInt(Zt(e,"width"));if(ye(n>>r===nR,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-kc){const s=(kc<<r)-kc;return-((~n&s)+kc)}return n}function Fee(t,e){let n=Je(t,"value");const r=BigInt(Zt(e,"width")),s=kc<<r-kc;if(n<nR){n=-n,ye(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(kc<<r)-kc;return(~n&i)+kc}else ye(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Qv(t,e){const n=rR(t,"value"),r=BigInt(Zt(e,"bits"));return n&(kc<<r)-kc}function Je(t,e){switch(typeof t){case"bigint":return t;case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-qy&&t<=qy,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Z(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Z(!1,"invalid BigNumberish value",e||"value",t)}function rR(t,e){const n=Je(t,e);return ye(n>=nR,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const S7="0123456789abcdef";function h$(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=S7[n>>4],e+=S7[n&15];return BigInt(e)}return Je(t)}function Zt(t,e){switch(typeof t){case"bigint":return Z(t>=-qy&&t<=qy,"overflow",e||"value",t),Number(t);case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-qy&&t<=qy,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Zt(BigInt(t),e)}catch(n){Z(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Z(!1,"invalid numeric value",e||"value",t)}function Aje(t){return Zt(h$(t))}function Tf(t,e){let r=rR(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Zt(e,"width");for(ye(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function is(t){const e=rR(t,"value");if(e===nR)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function Nc(t){let e=ke(d$(t)?t:is(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const x7="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const I7=BigInt(58);function Sje(t){const e=Jt(t);let n=h$(e),r="";for(;n;)r=x7[Number(n%I7)]+r,n/=I7;for(let s=0;s<e.length&&!e[s];s++)r=x7[0]+r;return r}function xje(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Jt(e)}function Ije(t){const e=Jt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var T0;class jee{constructor(e,n,r){te(this,"filter");te(this,"emitter");Q(this,T0);L(this,T0,n),vt(this,{emitter:e,filter:r})}async removeListener(){C(this,T0)!=null&&await this.emitter.off(this.filter,C(this,T0))}}T0=new WeakMap;function Nje(t,e,n,r,s){Z(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Wee(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function Tje(t,e,n,r,s){return t==="OVERLONG"?(Z(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),Wee(t,e,n))}const Rje=Object.freeze({error:Nje,ignore:Wee,replace:Tje});function Pje(t,e){e==null&&(e=Rje.error);const n=Jt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function id(t,e){Z(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Z(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function Oje(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function VI(t,e){return Oje(Pje(t,e))}function zee(t){async function e(n,r){ye(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();ye(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ye(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=fr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=fr("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const kje=12,Dje=250;let N7=zee();const Mje=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Lje=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let s2=!1;async function Hee(t,e){try{const n=t.match(Mje);if(!n)throw new Error("invalid data");return new mf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?xje(n[3]):$je(n[3]))}catch{return new mf(599,"BAD REQUEST (invalid data: URI)",{},null,new Rf(t))}}function Gee(t){async function e(n,r){try{const s=n.match(Lje);if(!s)throw new Error("invalid link");return new Rf(`${t}${s[2]}`)}catch{return new mf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Rf(n))}}return e}const lS={data:Hee,ipfs:Gee("https://gateway.ipfs.io/ipfs/")},qee=new WeakMap;var Kp,bh;class Uje{constructor(e){Q(this,Kp);Q(this,bh);L(this,Kp,[]),L(this,bh,!1),qee.set(e,()=>{if(!C(this,bh)){L(this,bh,!0);for(const n of C(this,Kp))setTimeout(()=>{n()},0);L(this,Kp,[])}})}addListener(e){ye(!C(this,bh),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),C(this,Kp).push(e)}get cancelled(){return C(this,bh)}checkSignal(){ye(!this.cancelled,"cancelled","CANCELLED",{})}}Kp=new WeakMap,bh=new WeakMap;function uS(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var R0,P0,vc,Ou,O0,k0,hs,Fo,ku,Yp,Qp,Jp,yl,Ec,vh,Zp,Jv;const cN=class cN{constructor(e){Q(this,Zp);Q(this,R0);Q(this,P0);Q(this,vc);Q(this,Ou);Q(this,O0);Q(this,k0);Q(this,hs);Q(this,Fo);Q(this,ku);Q(this,Yp);Q(this,Qp);Q(this,Jp);Q(this,yl);Q(this,Ec);Q(this,vh);L(this,k0,String(e)),L(this,R0,!1),L(this,P0,!0),L(this,vc,{}),L(this,Ou,""),L(this,O0,3e5),L(this,Ec,{slotInterval:Dje,maxAttempts:kje}),L(this,vh,null)}get url(){return C(this,k0)}set url(e){L(this,k0,String(e))}get body(){return C(this,hs)==null?null:new Uint8Array(C(this,hs))}set body(e){if(e==null)L(this,hs,void 0),L(this,Fo,void 0);else if(typeof e=="string")L(this,hs,id(e)),L(this,Fo,"text/plain");else if(e instanceof Uint8Array)L(this,hs,e),L(this,Fo,"application/octet-stream");else if(typeof e=="object")L(this,hs,id(JSON.stringify(e))),L(this,Fo,"application/json");else throw new Error("invalid body")}hasBody(){return C(this,hs)!=null}get method(){return C(this,Ou)?C(this,Ou):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),L(this,Ou,String(e).toUpperCase())}get headers(){const e=Object.assign({},C(this,vc));return C(this,ku)&&(e.authorization=`Basic ${Ije(id(C(this,ku)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&C(this,Fo)&&(e["content-type"]=C(this,Fo)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){C(this,vc)[String(e).toLowerCase()]=String(n)}clearHeaders(){L(this,vc,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return C(this,ku)||null}setCredentials(e,n){Z(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),L(this,ku,`${e}:${n}`)}get allowGzip(){return C(this,P0)}set allowGzip(e){L(this,P0,!!e)}get allowInsecureAuthentication(){return!!C(this,R0)}set allowInsecureAuthentication(e){L(this,R0,!!e)}get timeout(){return C(this,O0)}set timeout(e){Z(e>=0,"timeout must be non-zero","timeout",e),L(this,O0,e)}get preflightFunc(){return C(this,Yp)||null}set preflightFunc(e){L(this,Yp,e)}get processFunc(){return C(this,Qp)||null}set processFunc(e){L(this,Qp,e)}get retryFunc(){return C(this,Jp)||null}set retryFunc(e){L(this,Jp,e)}get getUrlFunc(){return C(this,vh)||N7}set getUrlFunc(e){L(this,vh,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${C(this,hs)?ke(C(this,hs)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(C(this,Ec).slotInterval=e.slotInterval),e.maxAttempts!=null&&(C(this,Ec).maxAttempts=e.maxAttempts)}send(){return ye(C(this,yl)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),L(this,yl,new Uje(this)),he(this,Zp,Jv).call(this,0,T7()+this.timeout,0,this,new mf(0,"",{},null,this))}cancel(){ye(C(this,yl)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=qee.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ye(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new cN(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,L(s,vc,Object.assign({},C(this,vc))),C(this,hs)&&L(s,hs,new Uint8Array(C(this,hs))),L(s,Fo,C(this,Fo)),s}clone(){const e=new cN(this.url);return L(e,Ou,C(this,Ou)),C(this,hs)&&L(e,hs,C(this,hs)),L(e,Fo,C(this,Fo)),L(e,vc,Object.assign({},C(this,vc))),L(e,ku,C(this,ku)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),L(e,Yp,C(this,Yp)),L(e,Qp,C(this,Qp)),L(e,Jp,C(this,Jp)),L(e,Ec,Object.assign({},C(this,Ec))),L(e,vh,C(this,vh)),e}static lockConfig(){s2=!0}static getGateway(e){return lS[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(s2)throw new Error("gateways locked");lS[e]=n}static registerGetUrl(e){if(s2)throw new Error("gateways locked");N7=e}static createGetUrlFunc(e){return zee(e)}static createDataGateway(){return Hee}static createIpfsGatewayFunc(e){return Gee(e)}};R0=new WeakMap,P0=new WeakMap,vc=new WeakMap,Ou=new WeakMap,O0=new WeakMap,k0=new WeakMap,hs=new WeakMap,Fo=new WeakMap,ku=new WeakMap,Yp=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,yl=new WeakMap,Ec=new WeakMap,vh=new WeakMap,Zp=new WeakSet,Jv=async function(e,n,r,s,i){var u,d,h;if(e>=C(this,Ec).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ye(T7()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await Bje(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in lS){const f=await lS[a](o.url,uS(C(s,yl)));if(f instanceof mf){let p=f;if(this.processFunc){uS(C(s,yl));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,uS(C(s,yl)));let l=new mf(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return he(u=o.redirect(f),Zp,Jv).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=C(this,Ec).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),he(d=o.clone(),Zp,Jv).call(d,e+1,n,p,s,l)}if(this.processFunc){uS(C(s,yl));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=C(this,Ec).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),he(h=o.clone(),Zp,Jv).call(h,e+1,n,p,s,l)}}return l};let Rf=cN;var O_,k_,D_,jo,D0,Xp;const D$=class D${constructor(e,n,r,s,i){Q(this,O_);Q(this,k_);Q(this,D_);Q(this,jo);Q(this,D0);Q(this,Xp);L(this,O_,e),L(this,k_,n),L(this,D_,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),L(this,jo,s==null?null:new Uint8Array(s)),L(this,D0,i||null),L(this,Xp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${C(this,jo)?ke(C(this,jo)):"null"}>`}get statusCode(){return C(this,O_)}get statusMessage(){return C(this,k_)}get headers(){return Object.assign({},C(this,D_))}get body(){return C(this,jo)==null?null:new Uint8Array(C(this,jo))}get bodyText(){try{return C(this,jo)==null?"":VI(C(this,jo))}catch{ye(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ye(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new D$(599,r,this.headers,this.body,C(this,D0)||void 0);return L(s,Xp,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Z(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw vt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return C(this,jo)!=null}get request(){return C(this,D0)}ok(){return C(this,Xp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=C(this,Xp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{C(this,jo)&&(s=VI(C(this,jo)))}catch{}ye(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};O_=new WeakMap,k_=new WeakMap,D_=new WeakMap,jo=new WeakMap,D0=new WeakMap,Xp=new WeakMap;let mf=D$;function T7(){return new Date().getTime()}function $je(t){return id(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function Bje(t){return new Promise(e=>setTimeout(e,t))}function Fje(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function R7(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function P7(t,e,n,r){const s=[];for(;n<e+1+r;){const i=Vee(t,n);s.push(i.result),n+=i.consumed,ye(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function Vee(t,e){ye(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{ye(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=R7(t,e+1,r);return n(e+1+r+s),P7(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),P7(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=R7(t,e+1,r);n(e+1+r+s);const i=ke(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=ke(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:Fje(t[e])}}function $1(t){const e=Jt(t,"data"),n=Vee(e,0);return Z(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function O7(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Kee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(Kee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=O7(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Jt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=O7(e.length);return n.unshift(183+n.length),n.concat(e)}const k7="0123456789abcdef";function Pf(t){let e="0x";for(const n of Kee(t))e+=k7[n>>4],e+=k7[n&15];return e}const Ti=32,h5=new Uint8Array(Ti),jje=["then"],dS={},Yee=new WeakMap;function wp(t){return Yee.get(t)}function D7(t,e){Yee.set(t,e)}function Tv(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function f5(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof Jw?f5(wp(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof Jw&&(o=f5(wp(o),o,n)),r[s]=o),r},{})}var M0;const Vy=class Vy extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==dS&&(s=n,i=[],o=!1);super(s.length);Q(this,M0);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(D7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),L(this,M0,[]),C(this,M0)==null&&C(this,M0),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Zt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&Tv(`index ${f}`,p),p}if(jje.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return D7(c,wp(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&Tv(`index ${i}`,s),n&&s instanceof Vy&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=wp(this);return r.reduce((s,i,o)=>(ye(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),f5(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=wp(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Vy(dS,i,o)}filter(n,r){const s=wp(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&Tv(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Vy(dS,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Tv(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=wp(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&Tv(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Vy(dS,n,r)}};M0=new WeakMap;let Jw=Vy;function M7(t){let e=is(t);return ye(e.length<=Ti,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Ti,offset:e.length}),e.length!==Ti&&(e=Ii(Or([h5.slice(e.length%Ti),e]))),e}class Ad{constructor(e,n,r,s){te(this,"name");te(this,"type");te(this,"localName");te(this,"dynamic");vt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Z(!1,e,this.localName,n)}}var Du,eg,L0,ix;class p5{constructor(){Q(this,L0);Q(this,Du);Q(this,eg);L(this,Du,[]),L(this,eg,0)}get data(){return Or(C(this,Du))}get length(){return C(this,eg)}appendWriter(e){return he(this,L0,ix).call(this,Ii(e.data))}writeBytes(e){let n=Ii(e);const r=n.length%Ti;return r&&(n=Ii(Or([n,h5.slice(r)]))),he(this,L0,ix).call(this,n)}writeValue(e){return he(this,L0,ix).call(this,M7(e))}writeUpdatableValue(){const e=C(this,Du).length;return C(this,Du).push(h5),L(this,eg,C(this,eg)+Ti),n=>{C(this,Du)[e]=M7(n)}}}Du=new WeakMap,eg=new WeakMap,L0=new WeakSet,ix=function(e){return C(this,Du).push(e),L(this,eg,C(this,eg)+e.length),e.length};var io,Wo,tg,ng,Eh,sm,m5,Qee;const M$=class M${constructor(e,n,r){Q(this,sm);te(this,"allowLoose");Q(this,io);Q(this,Wo);Q(this,tg);Q(this,ng);Q(this,Eh);vt(this,{allowLoose:!!n}),L(this,io,Ii(e)),L(this,tg,0),L(this,ng,null),L(this,Eh,r??1024),L(this,Wo,0)}get data(){return ke(C(this,io))}get dataLength(){return C(this,io).length}get consumed(){return C(this,Wo)}get bytes(){return new Uint8Array(C(this,io))}subReader(e){const n=new M$(C(this,io).slice(C(this,Wo)+e),this.allowLoose,C(this,Eh));return L(n,ng,this),n}readBytes(e,n){let r=he(this,sm,Qee).call(this,0,e,!!n);return he(this,sm,m5).call(this,e),L(this,Wo,C(this,Wo)+r.length),r.slice(0,e)}readValue(){return h$(this.readBytes(Ti))}readIndex(){return Aje(this.readBytes(Ti))}};io=new WeakMap,Wo=new WeakMap,tg=new WeakMap,ng=new WeakMap,Eh=new WeakMap,sm=new WeakSet,m5=function(e){var n;if(C(this,ng))return he(n=C(this,ng),sm,m5).call(n,e);L(this,tg,C(this,tg)+e),ye(C(this,Eh)<1||C(this,tg)<=C(this,Eh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${C(this,Eh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Ii(C(this,io)),offset:C(this,Wo),length:e,info:{bytesRead:C(this,tg),dataLength:this.dataLength}})},Qee=function(e,n,r){let s=Math.ceil(n/Ti)*Ti;return C(this,Wo)+s>C(this,io).length&&(this.allowLoose&&r&&C(this,Wo)+n<=C(this,io).length?s=n:ye(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Ii(C(this,io)),length:C(this,io).length,offset:C(this,Wo)+s})),C(this,io).slice(C(this,Wo),C(this,Wo)+s)};let g5=M$;function KI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function f$(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Wje(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");KI(t.outputLen),KI(t.blockLen)}function Zw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Jee(t,e){f$(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const i2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zee=t=>t instanceof Uint8Array,zje=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),o2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),al=(t,e)=>t<<32-e|t>>>e,Hje=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Hje)throw new Error("Non little-endian hardware is not supported");function Gje(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function sR(t){if(typeof t=="string"&&(t=Gje(t)),!Zee(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function qje(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!Zee(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class p${clone(){return this._cloneInto()}}function g$(t){const e=r=>t().update(sR(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Vje(t=32){if(i2&&typeof i2.getRandomValues=="function")return i2.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Xee extends p${constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Wje(e);const r=sR(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Zw(this),this.iHash.update(e),this}digestInto(e){Zw(this),f$(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ete=(t,e,n)=>new Xee(t,e).update(n).digest();ete.create=(t,e)=>new Xee(t,e);function Kje(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class tte extends p${constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=o2(this.buffer)}update(e){Zw(this);const{view:n,buffer:r,blockLen:s}=this;e=sR(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=o2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Zw(this),Jee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Kje(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=o2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const Yje=(t,e,n)=>t&e^~t&n,Qje=(t,e,n)=>t&e^t&n^e&n,Jje=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wd=new Uint32Array(64);class Zje extends tte{constructor(){super(64,32,8,!1),this.A=jd[0]|0,this.B=jd[1]|0,this.C=jd[2]|0,this.D=jd[3]|0,this.E=jd[4]|0,this.F=jd[5]|0,this.G=jd[6]|0,this.H=jd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Wd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Wd[d-15],f=Wd[d-2],p=al(h,7)^al(h,18)^h>>>3,g=al(f,17)^al(f,19)^f>>>10;Wd[d]=g+Wd[d-7]+p+Wd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=al(a,6)^al(a,11)^al(a,25),f=u+h+Yje(a,c,l)+Jje[d]+Wd[d]|0,g=(al(r,2)^al(r,13)^al(r,22))+Qje(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Wd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const nte=g$(()=>new Zje),hS=BigInt(2**32-1),y5=BigInt(32);function rte(t,e=!1){return e?{h:Number(t&hS),l:Number(t>>y5&hS)}:{h:Number(t>>y5&hS)|0,l:Number(t&hS)|0}}function ste(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=rte(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Xje=(t,e)=>BigInt(t>>>0)<<y5|BigInt(e>>>0),e9e=(t,e,n)=>t>>>n,t9e=(t,e,n)=>t<<32-n|e>>>n,n9e=(t,e,n)=>t>>>n|e<<32-n,r9e=(t,e,n)=>t<<32-n|e>>>n,s9e=(t,e,n)=>t<<64-n|e>>>n-32,i9e=(t,e,n)=>t>>>n-32|e<<64-n,o9e=(t,e)=>e,a9e=(t,e)=>t,ite=(t,e,n)=>t<<n|e>>>32-n,ote=(t,e,n)=>e<<n|t>>>32-n,ate=(t,e,n)=>e<<n-32|t>>>64-n,cte=(t,e,n)=>t<<n-32|e>>>64-n;function c9e(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const l9e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),u9e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,d9e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),h9e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,f9e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),p9e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Gt={fromBig:rte,split:ste,toBig:Xje,shrSH:e9e,shrSL:t9e,rotrSH:n9e,rotrSL:r9e,rotrBH:s9e,rotrBL:i9e,rotr32H:o9e,rotr32L:a9e,rotlSH:ite,rotlSL:ote,rotlBH:ate,rotlBL:cte,add:c9e,add3L:l9e,add3H:u9e,add4L:d9e,add4H:h9e,add5H:p9e,add5L:f9e},[g9e,m9e]=Gt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),zd=new Uint32Array(80),Hd=new Uint32Array(80);class y9e extends tte{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)zd[v]=e.getUint32(n),Hd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=zd[v-15]|0,_=Hd[v-15]|0,I=Gt.rotrSH(A,_,1)^Gt.rotrSH(A,_,8)^Gt.shrSH(A,_,7),x=Gt.rotrSL(A,_,1)^Gt.rotrSL(A,_,8)^Gt.shrSL(A,_,7),N=zd[v-2]|0,S=Hd[v-2]|0,O=Gt.rotrSH(N,S,19)^Gt.rotrBH(N,S,61)^Gt.shrSH(N,S,6),P=Gt.rotrSL(N,S,19)^Gt.rotrBL(N,S,61)^Gt.shrSL(N,S,6),F=Gt.add4L(x,P,Hd[v-7],Hd[v-16]),q=Gt.add4H(F,I,O,zd[v-7],zd[v-16]);zd[v]=q|0,Hd[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const A=Gt.rotrSH(d,h,14)^Gt.rotrSH(d,h,18)^Gt.rotrBH(d,h,41),_=Gt.rotrSL(d,h,14)^Gt.rotrSL(d,h,18)^Gt.rotrBL(d,h,41),I=d&f^~d&g,x=h&p^~h&w,N=Gt.add5L(b,_,x,m9e[v],Hd[v]),S=Gt.add5H(N,y,A,I,g9e[v],zd[v]),O=N|0,P=Gt.rotrSH(r,s,28)^Gt.rotrBH(r,s,34)^Gt.rotrBH(r,s,39),F=Gt.rotrSL(r,s,28)^Gt.rotrBL(r,s,34)^Gt.rotrBL(r,s,39),q=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Gt.add(l|0,u|0,S|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=Gt.add3L(O,F,B);r=Gt.add3H(T,S,P,q),s=T|0}({h:r,l:s}=Gt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Gt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Gt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Gt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Gt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Gt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Gt.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Gt.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){zd.fill(0),Hd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const w9e=g$(()=>new y9e);function b9e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const L7=b9e();L7.crypto||L7.msCrypto;function v9e(t){switch(t){case"sha256":return nte.create();case"sha512":return w9e.create()}Z(!1,"invalid hashing algorithm name","algorithm",t)}const[lte,ute,dte]=[[],[],[]],E9e=BigInt(0),Rv=BigInt(1),C9e=BigInt(2),_9e=BigInt(7),A9e=BigInt(256),S9e=BigInt(113);for(let t=0,e=Rv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],lte.push(2*(5*r+n)),ute.push((t+1)*(t+2)/2%64);let s=E9e;for(let i=0;i<7;i++)e=(e<<Rv^(e>>_9e)*S9e)%A9e,e&C9e&&(s^=Rv<<(Rv<<BigInt(i))-Rv);dte.push(s)}const[x9e,I9e]=ste(dte,!0),U7=(t,e,n)=>n>32?ate(t,e,n):ite(t,e,n),$7=(t,e,n)=>n>32?cte(t,e,n):ote(t,e,n);function N9e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=U7(l,u,1)^n[a],h=$7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=ute[o],c=U7(s,i,a),l=$7(s,i,a),u=lte[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=x9e[r],t[1]^=I9e[r]}n.fill(0)}class m$ extends p${constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,KI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=zje(this.state)}keccak(){N9e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Zw(this);const{blockLen:n,state:r}=this;e=sR(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Zw(this,!1),f$(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return KI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Jee(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new m$(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const T9e=(t,e,n)=>g$(()=>new m$(e,t,n)),R9e=T9e(1,136,256/8);let hte=!1;const fte=function(t){return R9e(t)};let pte=fte;function Vr(t){const e=Jt(t,"data");return ke(pte(e))}Vr._=fte;Vr.lock=function(){hte=!0};Vr.register=function(t){if(hte)throw new TypeError("keccak256 is locked");pte=t};Object.freeze(Vr);const gte=function(t){return v9e("sha256").update(t).digest()};let mte=gte,yte=!1;function $b(t){const e=Jt(t,"data");return ke(mte(e))}$b._=gte;$b.lock=function(){yte=!0};$b.register=function(t){if(yte)throw new Error("sha256 is locked");mte=t};Object.freeze($b);Object.freeze($b);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wte=BigInt(0),iR=BigInt(1),P9e=BigInt(2),oR=t=>t instanceof Uint8Array,O9e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Xw(t){if(!oR(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=O9e[t[n]];return e}function bte(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function y$(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function eb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Cg(t){return y$(Xw(t))}function w$(t){if(!oR(t))throw new Error("Uint8Array expected");return y$(Xw(Uint8Array.from(t).reverse()))}function tb(t,e){return eb(t.toString(16).padStart(e*2,"0"))}function b$(t,e){return tb(t,e).reverse()}function k9e(t){return eb(bte(t))}function yc(t,e,n){let r;if(typeof e=="string")try{r=eb(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(oR(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function g_(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!oR(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function D9e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function M9e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function L9e(t){let e;for(e=0;t>wte;t>>=iR,e+=1);return e}function U9e(t,e){return t>>BigInt(e)&iR}const $9e=(t,e,n)=>t|(n?iR:wte)<<BigInt(e),v$=t=>(P9e<<BigInt(t-1))-iR,a2=t=>new Uint8Array(t),B7=t=>Uint8Array.from(t);function vte(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=a2(t),s=a2(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=a2())=>{s=a(B7([0]),d),r=a(),d.length!==0&&(s=a(B7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return g_(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const B9e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function B1(t,e,n={}){const r=(s,i,o)=>{const a=B9e[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const F9e=Object.freeze(Object.defineProperty({__proto__:null,bitGet:U9e,bitLen:L9e,bitMask:v$,bitSet:$9e,bytesToHex:Xw,bytesToNumberBE:Cg,bytesToNumberLE:w$,concatBytes:g_,createHmacDrbg:vte,ensureBytes:yc,equalBytes:D9e,hexToBytes:eb,hexToNumber:y$,numberToBytesBE:tb,numberToBytesLE:b$,numberToHexUnpadded:bte,numberToVarBytesBE:k9e,utf8ToBytes:M9e,validateObject:B1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _s=BigInt(0),Fr=BigInt(1),bp=BigInt(2),j9e=BigInt(3),w5=BigInt(4),F7=BigInt(5),j7=BigInt(8);BigInt(9);BigInt(16);function ho(t,e){const n=t%e;return n>=_s?n:e+n}function W9e(t,e,n){if(n<=_s||e<_s)throw new Error("Expected power/modulo > 0");if(n===Fr)return _s;let r=Fr;for(;e>_s;)e&Fr&&(r=r*t%n),t=t*t%n,e>>=Fr;return r}function ma(t,e,n){let r=t;for(;e-- >_s;)r*=r,r%=n;return r}function b5(t,e){if(t===_s||e<=_s)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=ho(t,e),r=e,s=_s,i=Fr;for(;n!==_s;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Fr)throw new Error("invert: does not exist");return ho(s,e)}function z9e(t){const e=(t-Fr)/bp;let n,r,s;for(n=t-Fr,r=0;n%bp===_s;n/=bp,r++);for(s=bp;s<t&&W9e(s,e,t)!==t-Fr;s++);if(r===1){const o=(t+Fr)/w5;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Fr)/bp;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Fr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function H9e(t){if(t%w5===j9e){const e=(t+Fr)/w5;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%j7===F7){const e=(t-F7)/j7;return function(r,s){const i=r.mul(s,bp),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,bp),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return z9e(t)}const G9e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function q9e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=G9e.reduce((r,s)=>(r[s]="function",r),e);return B1(t,n)}function V9e(t,e,n){if(n<_s)throw new Error("Expected power > 0");if(n===_s)return t.ONE;if(n===Fr)return e;let r=t.ONE,s=e;for(;n>_s;)n&Fr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Fr;return r}function K9e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Ete(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Y9e(t,e,n=!1,r={}){if(t<=_s)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Ete(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=H9e(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:v$(s),ZERO:_s,ONE:Fr,create:c=>ho(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return _s<=c&&c<t},is0:c=>c===_s,isOdd:c=>(c&Fr)===Fr,neg:c=>ho(-c,t),eql:(c,l)=>c===l,sqr:c=>ho(c*c,t),add:(c,l)=>ho(c+l,t),sub:(c,l)=>ho(c-l,t),mul:(c,l)=>ho(c*l,t),pow:(c,l)=>V9e(a,c,l),div:(c,l)=>ho(c*b5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>b5(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>K9e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?b$(c,i):tb(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?w$(c):Cg(c)}});return Object.freeze(a)}function Cte(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function _te(t){const e=Cte(t);return e+Math.ceil(e/2)}function Q9e(t,e,n=!1){const r=t.length,s=Cte(e),i=_te(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?Cg(t):w$(t),a=ho(o,e-Fr)+Fr;return n?b$(a,s):tb(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const J9e=BigInt(0),c2=BigInt(1);function Z9e(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>J9e;)i&c2&&(o=o.add(a)),a=a.double(),i>>=c2;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let w=Number(o&d);o>>=f,w>c&&(w-=h,o+=c2);const y=g,b=g+Math.abs(w)-1,v=p%2!==0,A=w<0;w===0?u=u.add(n(v,i[y])):l=l.add(n(A,i[b]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function Ate(t){return q9e(t.Fp),B1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ete(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function X9e(t){const e=Ate(t);B1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:e7e,hexToBytes:t7e}=F9e,Lp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Lp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:e7e(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Lp,n=typeof t=="string"?t7e(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Lp._parseInt(n.subarray(2)),{d:o,l:a}=Lp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Gu=BigInt(0),Ra=BigInt(1);BigInt(2);const W7=BigInt(3);BigInt(4);function n7e(t){const e=X9e(t),{Fp:n}=e,r=e.toBytes||((p,g,w)=>{const y=g.toAffine();return g_(Uint8Array.from([4]),n.toBytes(y.x),n.toBytes(y.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),w=n.fromBytes(g.subarray(0,n.BYTES)),y=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:w,y}});function i(p){const{a:g,b:w}=e,y=n.sqr(p),b=n.mul(y,p);return n.add(n.add(b,n.mul(p,g)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Gu<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:w,wrapPrivateKey:y,n:b}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Xw(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(w*2,"0")}let v;try{v=typeof p=="bigint"?p:Cg(yc("private key",p,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof p}`)}return y&&(v=ho(v,b)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,w,y){if(this.px=g,this.py=w,this.pz=y,g==null||!n.isValid(g))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(y==null||!n.isValid(y))throw new Error("z required")}static fromAffine(g){const{x:w,y}=g||{};if(!g||!n.isValid(w)||!n.isValid(y))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(w)&&b(y)?d.ZERO:new d(w,y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const w=n.invertBatch(g.map(y=>y.pz));return g.map((y,b)=>y.toAffine(w[b])).map(d.fromAffine)}static fromHex(g){const w=d.fromAffine(s(yc("pointHex",g)));return w.assertValidity(),w}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:w}=this.toAffine();if(!n.isValid(g)||!n.isValid(w))throw new Error("bad point: x or y not FE");const y=n.sqr(w),b=i(g);if(!n.eql(y,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:w,py:y,pz:b}=this,{px:v,py:A,pz:_}=g,I=n.eql(n.mul(w,_),n.mul(v,b)),x=n.eql(n.mul(y,_),n.mul(A,b));return I&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:w}=e,y=n.mul(w,W7),{px:b,py:v,pz:A}=this;let _=n.ZERO,I=n.ZERO,x=n.ZERO,N=n.mul(b,b),S=n.mul(v,v),O=n.mul(A,A),P=n.mul(b,v);return P=n.add(P,P),x=n.mul(b,A),x=n.add(x,x),_=n.mul(g,x),I=n.mul(y,O),I=n.add(_,I),_=n.sub(S,I),I=n.add(S,I),I=n.mul(_,I),_=n.mul(P,_),x=n.mul(y,x),O=n.mul(g,O),P=n.sub(N,O),P=n.mul(g,P),P=n.add(P,x),x=n.add(N,N),N=n.add(x,N),N=n.add(N,O),N=n.mul(N,P),I=n.add(I,N),O=n.mul(v,A),O=n.add(O,O),N=n.mul(O,P),_=n.sub(_,N),x=n.mul(O,S),x=n.add(x,x),x=n.add(x,x),new d(_,I,x)}add(g){u(g);const{px:w,py:y,pz:b}=this,{px:v,py:A,pz:_}=g;let I=n.ZERO,x=n.ZERO,N=n.ZERO;const S=e.a,O=n.mul(e.b,W7);let P=n.mul(w,v),F=n.mul(y,A),q=n.mul(b,_),B=n.add(w,y),T=n.add(v,A);B=n.mul(B,T),T=n.add(P,F),B=n.sub(B,T),T=n.add(w,b);let R=n.add(v,_);return T=n.mul(T,R),R=n.add(P,q),T=n.sub(T,R),R=n.add(y,b),I=n.add(A,_),R=n.mul(R,I),I=n.add(F,q),R=n.sub(R,I),N=n.mul(S,T),I=n.mul(O,q),N=n.add(I,N),I=n.sub(F,N),N=n.add(F,N),x=n.mul(I,N),F=n.add(P,P),F=n.add(F,P),q=n.mul(S,q),T=n.mul(O,T),F=n.add(F,q),q=n.sub(P,q),q=n.mul(S,q),T=n.add(T,q),P=n.mul(F,T),x=n.add(x,P),P=n.mul(R,T),I=n.mul(B,I),I=n.sub(I,P),P=n.mul(B,F),N=n.mul(R,N),N=n.add(N,P),new d(I,x,N)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,w=>{const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(y[v])).map(d.fromAffine)})}multiplyUnsafe(g){const w=d.ZERO;if(g===Gu)return w;if(a(g),g===Ra)return this;const{endo:y}=e;if(!y)return f.unsafeLadder(this,g);let{k1neg:b,k1:v,k2neg:A,k2:_}=y.splitScalar(g),I=w,x=w,N=this;for(;v>Gu||_>Gu;)v&Ra&&(I=I.add(N)),_&Ra&&(x=x.add(N)),N=N.double(),v>>=Ra,_>>=Ra;return b&&(I=I.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,y.beta),x.py,x.pz),I.add(x)}multiply(g){a(g);let w=g,y,b;const{endo:v}=e;if(v){const{k1neg:A,k1:_,k2neg:I,k2:x}=v.splitScalar(w);let{p:N,f:S}=this.wNAF(_),{p:O,f:P}=this.wNAF(x);N=f.constTimeNegate(A,N),O=f.constTimeNegate(I,O),O=new d(n.mul(O.px,v.beta),O.py,O.pz),y=N.add(O),b=S.add(P)}else{const{p:A,f:_}=this.wNAF(w);y=A,b=_}return d.normalizeZ([y,b])[0]}multiplyAndAddUnsafe(g,w,y){const b=d.BASE,v=(_,I)=>I===Gu||I===Ra||!_.equals(b)?_.multiplyUnsafe(I):_.multiply(I),A=v(this,w).add(v(g,y));return A.is0()?void 0:A}toAffine(g){const{px:w,py:y,pz:b}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(b));const A=n.mul(w,g),_=n.mul(y,g),I=n.mul(b,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:A,y:_}}isTorsionFree(){const{h:g,isTorsionFree:w}=e;if(g===Ra)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:w}=e;return g===Ra?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return Xw(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=Z9e(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function r7e(t){const e=Ate(t);return B1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function s7e(t){const e=r7e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(T){return Gu<T&&T<n.ORDER}function a(T){return ho(T,r)}function c(T){return b5(T,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=n7e({...e,toBytes(T,R,$){const k=R.toAffine(),M=n.toBytes(k.x),z=g_;return $?z(Uint8Array.from([R.hasEvenY()?2:3]),M):z(Uint8Array.from([4]),M,n.toBytes(k.y))},fromBytes(T){const R=T.length,$=T[0],k=T.subarray(1);if(R===s&&($===2||$===3)){const M=Cg(k);if(!o(M))throw new Error("Point is not on curve");const z=d(M);let K=n.sqrt(z);const ne=(K&Ra)===Ra;return($&1)===1!==ne&&(K=n.neg(K)),{x:M,y:K}}else if(R===i&&$===4){const M=n.fromBytes(k.subarray(0,n.BYTES)),z=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:M,y:z}}else throw new Error(`Point of length ${R} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=T=>Xw(tb(T,e.nByteLength));function p(T){const R=r>>Ra;return T>R}function g(T){return p(T)?a(-T):T}const w=(T,R,$)=>Cg(T.slice(R,$));class y{constructor(R,$,k){this.r=R,this.s=$,this.recovery=k,this.assertValidity()}static fromCompact(R){const $=e.nByteLength;return R=yc("compactSignature",R,$*2),new y(w(R,0,$),w(R,$,2*$))}static fromDER(R){const{r:$,s:k}=Lp.toSig(yc("DER",R));return new y($,k)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new y(this.r,this.s,R)}recoverPublicKey(R){const{r:$,s:k,recovery:M}=this,z=x(yc("msgHash",R));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const K=M===2||M===3?$+e.n:$;if(K>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ne=M&1?"03":"02",le=l.fromHex(ne+f(K)),oe=c(K),ae=a(-z*oe),ue=a(k*oe),Ze=l.BASE.multiplyAndAddUnsafe(le,ae,ue);if(!Ze)throw new Error("point at infinify");return Ze.assertValidity(),Ze}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return eb(this.toDERHex())}toDERHex(){return Lp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return eb(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(T){try{return u(T),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const T=_te(e.n);return Q9e(e.randomBytes(T),e.n)},precompute(T=8,R=l.BASE){return R._setWindowSize(T),R.multiply(BigInt(3)),R}};function v(T,R=!0){return l.fromPrivateKey(T).toRawBytes(R)}function A(T){const R=T instanceof Uint8Array,$=typeof T=="string",k=(R||$)&&T.length;return R?k===s||k===i:$?k===2*s||k===2*i:T instanceof l}function _(T,R,$=!0){if(A(T))throw new Error("first arg must be private key");if(!A(R))throw new Error("second arg must be public key");return l.fromHex(R).multiply(u(T)).toRawBytes($)}const I=e.bits2int||function(T){const R=Cg(T),$=T.length*8-e.nBitLength;return $>0?R>>BigInt($):R},x=e.bits2int_modN||function(T){return a(I(T))},N=v$(e.nBitLength);function S(T){if(typeof T!="bigint")throw new Error("bigint expected");if(!(Gu<=T&&T<N))throw new Error(`bigint expected < 2^${e.nBitLength}`);return tb(T,e.nByteLength)}function O(T,R,$=P){if(["recovered","canonical"].some(De=>De in $))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:M}=e;let{lowS:z,prehash:K,extraEntropy:ne}=$;z==null&&(z=!0),T=yc("msgHash",T),K&&(T=yc("prehashed msgHash",k(T)));const le=x(T),oe=u(R),ae=[S(oe),S(le)];if(ne!=null){const De=ne===!0?M(n.BYTES):ne;ae.push(yc("extraEntropy",De))}const ue=g_(...ae),Ze=le;function Ie(De){const st=I(De);if(!h(st))return;const Ot=c(st),tn=l.BASE.multiply(st).toAffine(),X=a(tn.x);if(X===Gu)return;const ce=a(Ot*a(Ze+X*oe));if(ce===Gu)return;let Ee=(tn.x===X?0:2)|Number(tn.y&Ra),ge=ce;return z&&p(ce)&&(ge=g(ce),Ee^=1),new y(X,ge,Ee)}return{seed:ue,k2sig:Ie}}const P={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function q(T,R,$=P){const{seed:k,k2sig:M}=O(T,R,$),z=e;return vte(z.hash.outputLen,z.nByteLength,z.hmac)(k,M)}l.BASE._setWindowSize(8);function B(T,R,$,k=F){var tn;const M=T;if(R=yc("msgHash",R),$=yc("publicKey",$),"strict"in k)throw new Error("options.strict was renamed to lowS");const{lowS:z,prehash:K}=k;let ne,le;try{if(typeof M=="string"||M instanceof Uint8Array)try{ne=y.fromDER(M)}catch(X){if(!(X instanceof Lp.Err))throw X;ne=y.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){const{r:X,s:ce}=M;ne=new y(X,ce)}else throw new Error("PARSE");le=l.fromHex($)}catch(X){if(X.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(z&&ne.hasHighS())return!1;K&&(R=e.hash(R));const{r:oe,s:ae}=ne,ue=x(R),Ze=c(ae),Ie=a(ue*Ze),De=a(oe*Ze),st=(tn=l.BASE.multiplyAndAddUnsafe(le,Ie,De))==null?void 0:tn.toAffine();return st?a(st.x)===oe:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:_,sign:q,verify:B,ProjectivePoint:l,Signature:y,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function i7e(t){return{hash:t,hmac:(e,...n)=>ete(t,e,qje(...n)),randomBytes:Vje}}function o7e(t,e){const n=r=>s7e({...t,...i7e(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ste=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),z7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),a7e=BigInt(1),v5=BigInt(2),H7=(t,e)=>(t+e/v5)/e;function c7e(t){const e=Ste,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ma(u,n,e)*u%e,h=ma(d,n,e)*u%e,f=ma(h,v5,e)*l%e,p=ma(f,s,e)*f%e,g=ma(p,i,e)*p%e,w=ma(g,a,e)*g%e,y=ma(w,c,e)*w%e,b=ma(y,a,e)*g%e,v=ma(b,n,e)*u%e,A=ma(v,o,e)*p%e,_=ma(A,r,e)*l%e,I=ma(_,v5,e);if(!E5.eql(E5.sqr(I),t))throw new Error("Cannot find square root");return I}const E5=Y9e(Ste,void 0,void 0,{sqrt:c7e}),Jd=o7e({a:BigInt(0),b:BigInt(7),Fp:E5,n:z7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=z7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-a7e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=H7(i*t,e),c=H7(-r*t,e);let l=ho(t-a*n-c*s,e),u=ho(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},nte);BigInt(0);Jd.ProjectivePoint;const m_="0x0000000000000000000000000000000000000000",G7="0x0000000000000000000000000000000000000000000000000000000000000000",q7=BigInt(0),V7=BigInt(1),K7=BigInt(2),Y7=BigInt(27),Q7=BigInt(28),fS=BigInt(35),py={};function J7(t){return wd(is(t),32)}var U0,wl,$0,rg;const pc=class pc{constructor(e,n,r,s){Q(this,U0);Q(this,wl);Q(this,$0);Q(this,rg);tR(e,py,"Signature"),L(this,U0,n),L(this,wl,r),L(this,$0,s),L(this,rg,null)}get r(){return C(this,U0)}set r(e){Z(d0(e)===32,"invalid r","value",e),L(this,U0,ke(e))}get s(){return Z(parseInt(C(this,wl).substring(0,3))<8,"non-canonical s; use ._s","s",C(this,wl)),C(this,wl)}set s(e){Z(d0(e)===32,"invalid s","value",e),L(this,wl,ke(e))}get _s(){return C(this,wl)}isValid(){return parseInt(C(this,wl).substring(0,3))<8}get v(){return C(this,$0)}set v(e){const n=Zt(e,"value");Z(n===27||n===28,"invalid v","v",e),L(this,$0,n)}get networkV(){return C(this,rg)}get legacyChainId(){const e=this.networkV;return e==null?null:pc.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Jt(this.s);return this.yParity&&(e[0]|=128),ke(e)}get compactSerialized(){return Or([this.r,this.yParityAndS])}get serialized(){return Or([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new pc(py,this.r,this._s,this.v);return this.networkV&&L(e,rg,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Je(e,"v");return n==Y7||n==Q7?q7:(Z(n>=fS,"invalid EIP-155 v","v",e),(n-fS)/K7)}static getChainIdV(e,n){return Je(e)*K7+BigInt(35+n-27)}static getNormalizedV(e){const n=Je(e);return n===q7||n===Y7?27:n===V7||n===Q7?28:(Z(n>=fS,"invalid v","v",e),n&V7?27:28)}static from(e){function n(l,u){Z(l,u,"signature",e)}if(e==null)return new pc(py,G7,G7,27);if(typeof e=="string"){const l=Jt(e,"signature");if(l.length===64){const u=ke(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new pc(py,u,ke(d),h)}if(l.length===65){const u=ke(l.slice(0,32)),d=ke(l.slice(32,64)),h=pc.getNormalizedV(l[64]);return new pc(py,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof pc)return e.clone();const r=e.r;n(r!=null,"missing r");const s=J7(r),i=function(l,u){if(l!=null)return J7(l);if(u!=null){n(rr(u,32),"invalid yParityAndS");const d=Jt(u);return d[0]&=127,ke(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Je(l);return{networkV:h>=fS?h:void 0,v:pc.getNormalizedV(h)}}if(u!=null)return n(rr(u,32),"invalid yParityAndS"),{v:Jt(u)[0]&128?28:27};if(d!=null){switch(Zt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new pc(py,s,i,a);return o&&L(c,rg,o),n(e.yParity==null||Zt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};U0=new WeakMap,wl=new WeakMap,$0=new WeakMap,rg=new WeakMap;let Ao=pc;var Mu;const vp=class vp{constructor(e){Q(this,Mu);Z(d0(e)===32,"invalid private key","privateKey","[REDACTED]"),L(this,Mu,ke(e))}get privateKey(){return C(this,Mu)}get publicKey(){return vp.computePublicKey(C(this,Mu))}get compressedPublicKey(){return vp.computePublicKey(C(this,Mu),!0)}sign(e){Z(d0(e)===32,"invalid digest length","digest",e);const n=Jd.sign(Ii(e),Ii(C(this,Mu)),{lowS:!0});return Ao.from({r:Tf(n.r,32),s:Tf(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=vp.computePublicKey(e);return ke(Jd.getSharedSecret(Ii(C(this,Mu)),Jt(n),!1))}static computePublicKey(e,n){let r=Jt(e,"key");if(r.length===32){const i=Jd.getPublicKey(r,!!n);return ke(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Jd.ProjectivePoint.fromHex(r);return ke(s.toRawBytes(n))}static recoverPublicKey(e,n){Z(d0(e)===32,"invalid digest length","digest",e);const r=Ao.from(n);let s=Jd.Signature.fromCompact(Ii(Or([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(Ii(e));return Z(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=Jd.ProjectivePoint.fromHex(vp.computePublicKey(e).substring(2)),i=Jd.ProjectivePoint.fromHex(vp.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Mu=new WeakMap;let y_=vp;const l7e=BigInt(0),u7e=BigInt(36);function Z7(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Jt(Vr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const E$={};for(let t=0;t<10;t++)E$[String(t)]=String(t);for(let t=0;t<26;t++)E$[String.fromCharCode(65+t)]=String(10+t);const X7=15;function d7e(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>E$[r]).join("");for(;e.length>=X7;){let r=e.substring(0,X7);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const h7e=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function f7e(t){t=t.toLowerCase();let e=l7e;for(let n=0;n<t.length;n++)e=e*u7e+h7e[t[n]];return e}function xn(t){if(Z(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=Z7(t);return Z(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Z(t.substring(2,4)===d7e(t),"bad icap checksum","address",t);let e=f7e(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Z7("0x"+e)}Z(!1,"invalid address","address",t)}function p7e(t){const e=xn(t.from);let r=Je(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,xn(Ir(Vr(Pf([e,r])),12))}function xte(t){return t&&typeof t.getAddress=="function"}async function l2(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(ye(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Z(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),xn(n)}function Ri(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?xn(t):(ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),l2(t,e.resolveName(t)));if(xte(t))return l2(t,t.getAddress());if(t&&typeof t.then=="function")return l2(t,t);Z(!1,"unsupported addressable value","target",t)}const Au={};function Ge(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new ui(Au,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function mn(t,e){return new ui(Au,`bytes${e||""}`,t,{size:e})}const eW=Symbol.for("_ethers_typed");var sg;const Su=class Su{constructor(e,n,r,s){te(this,"type");te(this,"value");Q(this,sg);te(this,"_typedSymbol");s==null&&(s=null),tR(Au,e,"Typed"),vt(this,{_typedSymbol:eW,type:n,value:r}),L(this,sg,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return C(this,sg)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return C(this,sg)===!0?-1:C(this,sg)===!1?this.value.length:null}static from(e,n){return new Su(Au,e,n)}static uint8(e){return Ge(e,8)}static uint16(e){return Ge(e,16)}static uint24(e){return Ge(e,24)}static uint32(e){return Ge(e,32)}static uint40(e){return Ge(e,40)}static uint48(e){return Ge(e,48)}static uint56(e){return Ge(e,56)}static uint64(e){return Ge(e,64)}static uint72(e){return Ge(e,72)}static uint80(e){return Ge(e,80)}static uint88(e){return Ge(e,88)}static uint96(e){return Ge(e,96)}static uint104(e){return Ge(e,104)}static uint112(e){return Ge(e,112)}static uint120(e){return Ge(e,120)}static uint128(e){return Ge(e,128)}static uint136(e){return Ge(e,136)}static uint144(e){return Ge(e,144)}static uint152(e){return Ge(e,152)}static uint160(e){return Ge(e,160)}static uint168(e){return Ge(e,168)}static uint176(e){return Ge(e,176)}static uint184(e){return Ge(e,184)}static uint192(e){return Ge(e,192)}static uint200(e){return Ge(e,200)}static uint208(e){return Ge(e,208)}static uint216(e){return Ge(e,216)}static uint224(e){return Ge(e,224)}static uint232(e){return Ge(e,232)}static uint240(e){return Ge(e,240)}static uint248(e){return Ge(e,248)}static uint256(e){return Ge(e,256)}static uint(e){return Ge(e,256)}static int8(e){return Ge(e,-8)}static int16(e){return Ge(e,-16)}static int24(e){return Ge(e,-24)}static int32(e){return Ge(e,-32)}static int40(e){return Ge(e,-40)}static int48(e){return Ge(e,-48)}static int56(e){return Ge(e,-56)}static int64(e){return Ge(e,-64)}static int72(e){return Ge(e,-72)}static int80(e){return Ge(e,-80)}static int88(e){return Ge(e,-88)}static int96(e){return Ge(e,-96)}static int104(e){return Ge(e,-104)}static int112(e){return Ge(e,-112)}static int120(e){return Ge(e,-120)}static int128(e){return Ge(e,-128)}static int136(e){return Ge(e,-136)}static int144(e){return Ge(e,-144)}static int152(e){return Ge(e,-152)}static int160(e){return Ge(e,-160)}static int168(e){return Ge(e,-168)}static int176(e){return Ge(e,-176)}static int184(e){return Ge(e,-184)}static int192(e){return Ge(e,-192)}static int200(e){return Ge(e,-200)}static int208(e){return Ge(e,-208)}static int216(e){return Ge(e,-216)}static int224(e){return Ge(e,-224)}static int232(e){return Ge(e,-232)}static int240(e){return Ge(e,-240)}static int248(e){return Ge(e,-248)}static int256(e){return Ge(e,-256)}static int(e){return Ge(e,-256)}static bytes1(e){return mn(e,1)}static bytes2(e){return mn(e,2)}static bytes3(e){return mn(e,3)}static bytes4(e){return mn(e,4)}static bytes5(e){return mn(e,5)}static bytes6(e){return mn(e,6)}static bytes7(e){return mn(e,7)}static bytes8(e){return mn(e,8)}static bytes9(e){return mn(e,9)}static bytes10(e){return mn(e,10)}static bytes11(e){return mn(e,11)}static bytes12(e){return mn(e,12)}static bytes13(e){return mn(e,13)}static bytes14(e){return mn(e,14)}static bytes15(e){return mn(e,15)}static bytes16(e){return mn(e,16)}static bytes17(e){return mn(e,17)}static bytes18(e){return mn(e,18)}static bytes19(e){return mn(e,19)}static bytes20(e){return mn(e,20)}static bytes21(e){return mn(e,21)}static bytes22(e){return mn(e,22)}static bytes23(e){return mn(e,23)}static bytes24(e){return mn(e,24)}static bytes25(e){return mn(e,25)}static bytes26(e){return mn(e,26)}static bytes27(e){return mn(e,27)}static bytes28(e){return mn(e,28)}static bytes29(e){return mn(e,29)}static bytes30(e){return mn(e,30)}static bytes31(e){return mn(e,31)}static bytes32(e){return mn(e,32)}static address(e){return new Su(Au,"address",e)}static bool(e){return new Su(Au,"bool",!!e)}static bytes(e){return new Su(Au,"bytes",e)}static string(e){return new Su(Au,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Su(Au,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===eW}static dereference(e,n){if(Su.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};sg=new WeakMap;let ui=Su;class g7e extends Ad{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=ui.dereference(n,"string");try{r=xn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return xn(Tf(e.readValue(),20))}}class m7e extends Ad{constructor(n){super(n.name,n.type,"_",n.dynamic);te(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function Ite(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return ye(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),ye(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Z(!1,"invalid tuple value","tuple",n);Z(e.length===r.length,"types/value length mismatch","tuple",n);let s=new p5,i=new p5,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Nte(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(js(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(js(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),Jw.fromItems(n,r)}class y7e extends Ad{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);te(this,"coder");te(this,"length");vt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=ui.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),Uee(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return Ite(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),ye(r*Ti<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Ti,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new m7e(this.coder));return Nte(n,s)}}class w7e extends Ad{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=ui.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Tte extends Ad{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=Ii(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class b7e extends Tte{constructor(e){super("bytes",e)}decode(e){return ke(super.decode(e))}}class v7e extends Ad{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);te(this,"size");vt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=Ii(ui.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return ke(n.readBytes(this.size))}}const E7e=new Uint8Array([]);class C7e extends Ad{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(E7e)}decode(e){return e.readBytes(0),null}}const _7e=BigInt(0),A7e=BigInt(1),S7e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class x7e extends Ad{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);te(this,"size");te(this,"signed");vt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Je(ui.dereference(r,this.type)),i=Qv(S7e,Ti*8);if(this.signed){let o=Qv(i,this.size*8-1);(s>o||s<-(o+A7e))&&this._throwError("value out-of-bounds",r),s=Fee(s,8*Ti)}else(s<_7e||s>Qv(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Qv(n.readValue(),this.size*8);return this.signed&&(r=_je(r,this.size*8)),r}}class I7e extends Tte{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,id(ui.dereference(n,"string")))}decode(e){return VI(super.decode(e))}}class pS extends Ad{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);te(this,"coders");vt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=ui.dereference(r,"tuple");return Ite(n,this.coders,s)}decode(n){return Nte(n,this.coders)}}function u2(t,e){return{address:xn(t),storageKeys:e.map((n,r)=>(Z(rr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function xm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Z(n.length===2,"invalid slot set",`value[${r}]`,n),u2(n[0],n[1])):(Z(n!=null&&typeof n=="object","invalid address-slot set","value",t),u2(n.address,n.storageKeys)));Z(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return u2(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Rte(t){return{address:xn(t.address),nonce:Je(t.nonce!=null?t.nonce:0),chainId:Je(t.chainId!=null?t.chainId:0),signature:Ao.from(t.signature)}}function N7e(t){let e;return typeof t=="string"?e=y_.computePublicKey(t,!1):e=t.publicKey,xn(Vr("0x"+e.substring(4)).substring(26))}function T7e(t,e){return N7e(y_.recoverPublicKey(t,e))}const ys=BigInt(0),R7e=BigInt(2),P7e=BigInt(27),O7e=BigInt(28),k7e=BigInt(35),D7e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),d2=4096*32;function M7e(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Jt(t.blobToKzgCommitment(ke(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Jt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Jt(t.blobToKZGCommitment(ke(r)));Z(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Jt(t.computeBlobProof(ke(r),ke(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Jt(t.computeBlobKZGProof(ke(r),ke(s)));Z(!1,"unsupported KZG library","kzg",t)}}}function tW(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=$b(e).substring(4),"0x"+n}function Bb(t){return t==="0x"?null:xn(t)}function aR(t,e){try{return xm(t)}catch(n){Z(!1,n.message,e,t)}}function L7e(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Bb(s[1]),nonce:Fn(s[2],"nonce"),chainId:Fn(s[0],"chainId"),signature:Ao.from({yParity:Im(s[3],"yParity"),r:wd(s[4],32),s:wd(s[5],32)})})}return n}catch(n){Z(!1,n.message,e,t)}}function Im(t,e){return t==="0x"?0:Zt(t,e)}function Fn(t,e){if(t==="0x")return ys;const n=Je(t,e);return Z(n<=D7e,"value exceeds uint size",e,n),n}function an(t,e){const n=Je(t,"value"),r=is(n);return Z(r.length<=32,"value too large",`tx.${e}`,n),r}function cR(t){return xm(t).map(e=>[e.address,e.storageKeys])}function U7e(t){return t.map(e=>[an(e.chainId,"chainId"),e.address,an(e.nonce,"nonce"),an(e.signature.yParity,"yParity"),is(e.signature.r),is(e.signature.s)])}function $7e(t,e){Z(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Z(rr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function B7e(t){const e=$1(t);Z(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Im(e[0],"nonce"),gasPrice:Fn(e[1],"gasPrice"),gasLimit:Fn(e[2],"gasLimit"),to:Bb(e[3]),value:Fn(e[4],"value"),data:ke(e[5]),chainId:ys};if(e.length===6)return n;const r=Fn(e[6],"v"),s=Fn(e[7],"r"),i=Fn(e[8],"s");if(s===ys&&i===ys)n.chainId=r;else{let o=(r-k7e)/R7e;o<ys&&(o=ys),n.chainId=o,Z(o!==ys||r===P7e||r===O7e,"non-canonical legacy v","v",e[6]),n.signature=Ao.from({r:wd(e[7],32),s:wd(e[8],32),v:r})}return n}function F7e(t,e){const n=[an(t.nonce,"nonce"),an(t.gasPrice||0,"gasPrice"),an(t.gasLimit,"gasLimit"),t.to||"0x",an(t.value,"value"),t.data];let r=ys;if(t.chainId!=ys)r=Je(t.chainId,"tx.chainId"),Z(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==ys&&(n.push(is(r)),n.push("0x"),n.push("0x")),Pf(n);let s=BigInt(27+e.yParity);return r!==ys?s=Ao.getChainIdV(r,e.v):BigInt(e.v)!==s&&Z(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(is(s)),n.push(is(e.r)),n.push(is(e.s)),Pf(n)}function lR(t,e){let n;try{if(n=Im(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Z(!1,"invalid yParity","yParity",e[0])}const r=wd(e[1],32),s=wd(e[2],32),i=Ao.from({r,s,yParity:n});t.signature=i}function j7e(t){const e=$1(Jt(t).slice(1));Z(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",ke(t));const n={type:2,chainId:Fn(e[0],"chainId"),nonce:Im(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Bb(e[5]),value:Fn(e[6],"value"),data:ke(e[7]),accessList:aR(e[8],"accessList")};return e.length===9||lR(n,e.slice(9)),n}function W7e(t,e){const n=[an(t.chainId,"chainId"),an(t.nonce,"nonce"),an(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),an(t.maxFeePerGas||0,"maxFeePerGas"),an(t.gasLimit,"gasLimit"),t.to||"0x",an(t.value,"value"),t.data,cR(t.accessList||[])];return e&&(n.push(an(e.yParity,"yParity")),n.push(is(e.r)),n.push(is(e.s))),Or(["0x02",Pf(n)])}function z7e(t){const e=$1(Jt(t).slice(1));Z(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",ke(t));const n={type:1,chainId:Fn(e[0],"chainId"),nonce:Im(e[1],"nonce"),gasPrice:Fn(e[2],"gasPrice"),gasLimit:Fn(e[3],"gasLimit"),to:Bb(e[4]),value:Fn(e[5],"value"),data:ke(e[6]),accessList:aR(e[7],"accessList")};return e.length===8||lR(n,e.slice(8)),n}function H7e(t,e){const n=[an(t.chainId,"chainId"),an(t.nonce,"nonce"),an(t.gasPrice||0,"gasPrice"),an(t.gasLimit,"gasLimit"),t.to||"0x",an(t.value,"value"),t.data,cR(t.accessList||[])];return e&&(n.push(an(e.yParity,"recoveryParam")),n.push(is(e.r)),n.push(is(e.s))),Or(["0x01",Pf(n)])}function G7e(t){let e=$1(Jt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];Z(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Z(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Z(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),Z(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}Z(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",ke(t));const s={type:3,chainId:Fn(e[0],"chainId"),nonce:Im(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Bb(e[5]),value:Fn(e[6],"value"),data:ke(e[7]),accessList:aR(e[8],"accessList"),maxFeePerBlobGas:Fn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Z(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Z(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Z(rr(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||lR(s,e.slice(11)),s}function q7e(t,e,n){const r=[an(t.chainId,"chainId"),an(t.nonce,"nonce"),an(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),an(t.maxFeePerGas||0,"maxFeePerGas"),an(t.gasLimit,"gasLimit"),t.to||m_,an(t.value,"value"),t.data,cR(t.accessList||[]),an(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),$7e(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(an(e.yParity,"yParity")),r.push(is(e.r)),r.push(is(e.s)),n)?Or(["0x03",Pf([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Or(["0x03",Pf(r)])}function V7e(t){const e=$1(Jt(t).slice(1));Z(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",ke(t));const n={type:4,chainId:Fn(e[0],"chainId"),nonce:Im(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Bb(e[5]),value:Fn(e[6],"value"),data:ke(e[7]),accessList:aR(e[8],"accessList"),authorizationList:L7e(e[9],"authorizationList")};return e.length===10||lR(n,e.slice(10)),n}function K7e(t,e){const n=[an(t.chainId,"chainId"),an(t.nonce,"nonce"),an(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),an(t.maxFeePerGas||0,"maxFeePerGas"),an(t.gasLimit,"gasLimit"),t.to||"0x",an(t.value,"value"),t.data,cR(t.accessList||[]),U7e(t.authorizationList||[])];return e&&(n.push(an(e.yParity,"yParity")),n.push(is(e.r)),n.push(is(e.s))),Or(["0x04",Pf(n)])}var Cc,B0,F0,j0,W0,z0,H0,G0,q0,V0,K0,Y0,ig,Ch,bl,_h,Q0,J0,ox;const fl=class fl{constructor(){Q(this,J0);Q(this,Cc);Q(this,B0);Q(this,F0);Q(this,j0);Q(this,W0);Q(this,z0);Q(this,H0);Q(this,G0);Q(this,q0);Q(this,V0);Q(this,K0);Q(this,Y0);Q(this,ig);Q(this,Ch);Q(this,bl);Q(this,_h);Q(this,Q0);L(this,Cc,null),L(this,B0,null),L(this,j0,0),L(this,W0,ys),L(this,z0,null),L(this,H0,null),L(this,G0,null),L(this,F0,"0x"),L(this,q0,ys),L(this,V0,ys),L(this,K0,null),L(this,Y0,null),L(this,ig,null),L(this,Ch,null),L(this,bl,null),L(this,_h,null),L(this,Q0,null)}get type(){return C(this,Cc)}set type(e){switch(e){case null:L(this,Cc,null);break;case 0:case"legacy":L(this,Cc,0);break;case 1:case"berlin":case"eip-2930":L(this,Cc,1);break;case 2:case"london":case"eip-1559":L(this,Cc,2);break;case 3:case"cancun":case"eip-4844":L(this,Cc,3);break;case 4:case"pectra":case"eip-7702":L(this,Cc,4);break;default:Z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=C(this,B0);return e==null&&this.type===3?m_:e}set to(e){L(this,B0,e==null?null:xn(e))}get nonce(){return C(this,j0)}set nonce(e){L(this,j0,Zt(e,"value"))}get gasLimit(){return C(this,W0)}set gasLimit(e){L(this,W0,Je(e))}get gasPrice(){const e=C(this,z0);return e==null&&(this.type===0||this.type===1)?ys:e}set gasPrice(e){L(this,z0,e==null?null:Je(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=C(this,H0);return e??(this.type===2||this.type===3?ys:null)}set maxPriorityFeePerGas(e){L(this,H0,e==null?null:Je(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=C(this,G0);return e??(this.type===2||this.type===3?ys:null)}set maxFeePerGas(e){L(this,G0,e==null?null:Je(e,"maxFeePerGas"))}get data(){return C(this,F0)}set data(e){L(this,F0,ke(e))}get value(){return C(this,q0)}set value(e){L(this,q0,Je(e,"value"))}get chainId(){return C(this,V0)}set chainId(e){L(this,V0,Je(e))}get signature(){return C(this,K0)||null}set signature(e){L(this,K0,e==null?null:Ao.from(e))}get accessList(){const e=C(this,Y0)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){L(this,Y0,e==null?null:xm(e))}get authorizationList(){const e=C(this,Q0)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){L(this,Q0,e==null?null:e.map(n=>Rte(n)))}get maxFeePerBlobGas(){const e=C(this,ig);return e==null&&this.type===3?ys:e}set maxFeePerBlobGas(e){L(this,ig,e==null?null:Je(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=C(this,Ch);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Z(rr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}L(this,Ch,e)}get blobs(){return C(this,_h)==null?null:C(this,_h).map(e=>Object.assign({},e))}set blobs(e){if(e==null){L(this,_h,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(d$(i)){ye(C(this,bl),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Jt(i);if(Z(o.length<=d2,"blob is too large",`blobs[${s}]`,i),o.length!==d2){const l=new Uint8Array(d2);l.set(o),o=l}const a=C(this,bl).blobToKzgCommitment(o),c=ke(C(this,bl).computeBlobKzgProof(o,a));n.push({data:ke(o),commitment:ke(a),proof:c}),r.push(tW(1,a))}else{const o=ke(i.commitment);n.push({data:ke(i.data),commitment:o,proof:ke(i.proof)}),r.push(tW(1,o))}}L(this,_h,n),L(this,Ch,r)}get kzg(){return C(this,bl)}set kzg(e){e==null?L(this,bl,null):L(this,bl,M7e(e))}get hash(){return this.signature==null?null:Vr(he(this,J0,ox).call(this,!0,!1))}get unsignedHash(){return Vr(this.unsignedSerialized)}get from(){return this.signature==null?null:T7e(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:y_.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return he(this,J0,ox).call(this,!0,!0)}get unsignedSerialized(){return he(this,J0,ox).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=C(this,ig)!=null||C(this,Ch);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ye(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ye(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return fl.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new fl;if(typeof e=="string"){const r=Jt(e);if(r[0]>=127)return fl.from(B7e(r));switch(r[0]){case 1:return fl.from(z7e(r));case 2:return fl.from(j7e(r));case 3:return fl.from(G7e(r));case 4:return fl.from(V7e(r))}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new fl;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Ao.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Z(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Z(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};Cc=new WeakMap,B0=new WeakMap,F0=new WeakMap,j0=new WeakMap,W0=new WeakMap,z0=new WeakMap,H0=new WeakMap,G0=new WeakMap,q0=new WeakMap,V0=new WeakMap,K0=new WeakMap,Y0=new WeakMap,ig=new WeakMap,Ch=new WeakMap,bl=new WeakMap,_h=new WeakMap,Q0=new WeakMap,J0=new WeakSet,ox=function(e,n){ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return F7e(this,r);case 1:return H7e(this,r);case 2:return W7e(this,r);case 3:return q7e(this,r,n?this.blobs:null);case 4:return K7e(this,r)}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let YI=fl;function em(t){return Vr(id(t))}var Y7e="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const nW=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),rW=4;function Q7e(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let _=1;_<r;_++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let w=0;for(let _=0;_<d;_++)w=w<<1|u();let y=[],b=0,v=h;for(;;){let _=Math.floor(((w-b+1)*s-1)/v),I=0,x=r;for(;x-I>1;){let O=I+x>>>1;_<i[O]?x=O:I=O}if(I==0)break;y.push(I);let N=b+Math.floor(v*i[I]/s),S=b+Math.floor(v*i[I+1]/s)-1;for(;!((N^S)&f);)w=w<<1&g|u(),N=N<<1&g,S=S<<1&g|1;for(;N&~S&p;)w=w&f|w<<1&g>>>1|u(),N=N<<1^f,S=(S^f)<<1|f|1;b=N,v=1+S-N}let A=r-4;return y.map(_=>{switch(_-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return _-1}})}function J7e(t){let e=0;return()=>t[e++]}function Pte(t){return J7e(Q7e(Z7e(t)))}function Z7e(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function X7e(t){return t&1?~t>>1:t>>1}function eWe(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=X7e(e());return n}function w_(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Ote(t){return b_(()=>{let e=w_(t);if(e.length)return e})}function kte(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(tWe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(nWe(n,t))}return e.flat()}function b_(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Dte(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)eWe(t,n).forEach((i,o)=>r[o].push(i));return r}function tWe(t,e){let n=1+e(),r=e(),s=b_(e);return Dte(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function nWe(t,e){let n=1+e();return Dte(n,1+t,e).map(s=>[s[0],s.slice(1)])}function rWe(t){let e=[],n=w_(t);return s(r([]),[]),e;function r(i){let o=t(),a=b_(()=>{let c=w_(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function sWe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Mte(t){return`{${sWe(t)}}`}function iWe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function nb(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function oWe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var aWe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const v_=44032,QI=4352,JI=4449,ZI=4519,Lte=19,Ute=21,rb=28,XI=Ute*rb,cWe=Lte*XI,lWe=v_+cWe,uWe=QI+Lte,dWe=JI+Ute,hWe=ZI+rb;function Zv(t){return t>>24&255}function $te(t){return t&16777215}let C5,sW,_5,ax;function fWe(){let t=Pte(aWe);C5=new Map(Ote(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),sW=new Set(w_(t)),_5=new Map,ax=new Map;for(let[e,n]of kte(t)){if(!sW.has(e)&&n.length==2){let[r,s]=n,i=ax.get(r);i||(i=new Map,ax.set(r,i)),i.set(s,e)}_5.set(e,n.reverse())}}function Bte(t){return t>=v_&&t<lWe}function pWe(t,e){if(t>=QI&&t<uWe&&e>=JI&&e<dWe)return v_+(t-QI)*XI+(e-JI)*rb;if(Bte(t)&&e>ZI&&e<hWe&&(t-v_)%rb==0)return t+(e-ZI);{let n=ax.get(t);return n&&(n=n.get(e),n)?n:-1}}function Fte(t){C5||fWe();let e=[],n=[],r=!1;function s(i){let o=C5.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(Bte(i)){let o=i-v_,a=o/XI|0,c=o%XI/rb|0,l=o%rb;s(QI+a),s(JI+c),l>0&&s(ZI+l)}else{let o=_5.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=Zv(e[0]);for(let o=1;o<e.length;o++){let a=Zv(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Zv(e[--c]),i<=a))break}i=Zv(e[o])}}return e}function gWe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=Zv(i),a=$te(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=pWe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function jte(t){return Fte(t).map($te)}function mWe(t){return gWe(Fte(t))}const iW=45,Wte=".",zte=65039,Hte=1,eN=t=>Array.from(t);function E_(t,e){return t.P.has(e)||t.Q.has(e)}class yWe extends Array{get is_emoji(){return!0}}let A5,Gte,Up,S5,qte,h0,h2,Ay,lp,oW,x5;function C$(){if(A5)return;let t=Pte(Y7e);const e=()=>w_(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));A5=new Map(kte(t)),Gte=n(),Up=e(),S5=new Set(e().map(u=>Up[u])),Up=new Set(Up),qte=n(),n();let s=Ote(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};h0=b_(u=>{let d=b_(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=nb(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),h2=n(),Ay=new Map;let a=e().concat(eN(h2)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),h2.has(u)||Ay.set(u,f)});for(let{V:u,M:d}of new Set(Ay.values())){let h=[];for(let p of u){let g=h0.filter(y=>E_(y,p)),w=h.find(({G:y})=>g.some(b=>y.has(b)));w||(w={G:new Set,V:[]},h.push(w)),w.V.push(p),r(w.G,g)}let f=h.flatMap(p=>eN(p.G));for(let{G:p,V:g}of h){let w=new Set(f.filter(y=>!p.has(y)));for(let y of g)d.set(y,w)}}lp=new Set;let c=new Set;const l=u=>lp.has(u)?c.add(u):lp.add(u);for(let u of h0){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of lp)!Ay.has(u)&&!c.has(u)&&Ay.set(u,Hte);r(lp,jte(lp)),oW=rWe(t).map(u=>yWe.from(u)).sort(oWe),x5=new Map;for(let u of oW){let d=[x5];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===zte?d.push(...f):d=f}for(let h of d)h.V=u}}function _$(t){return(Vte(t)?"":`${A$(uR([t]))} `)+Mte(t)}function A$(t){return`"${t}"‎`}function wWe(t){if(t.length>=4&&t[2]==iW&&t[3]==iW)throw new Error(`invalid label extension: "${nb(t.slice(0,4))}"`)}function bWe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function vWe(t){let e=t[0],n=nW.get(e);if(n)throw BE(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=nW.get(e);if(o){if(s==i)throw BE(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw BE(`trailing ${n}`)}function uR(t,e=1/0,n=Mte){let r=[];EWe(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];Vte(a)&&(r.push(nb(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(nb(t.slice(s,i))),r.join("")}function EWe(t){return C$(),Up.has(t)}function Vte(t){return C$(),qte.has(t)}function CWe(t){return xWe(_We(t,mWe,TWe))}function _We(t,e,n){if(!t)return[];C$();let r=0;return t.split(Wte).map(s=>{let i=iWe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=NWe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(bWe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))wWe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Up.has(u[0]))throw BE("leading combining mark");for(let g=1;g<c;g++){let w=a[g];if(!w.is_emoji&&Up.has(w[0]))throw BE(`emoji + combining mark: "${nb(a[g-1])} + ${uR([w[0]])}"`)}vWe(u);let f=eN(new Set(h)),[p]=SWe(f);IWe(p,h),AWe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function AWe(t,e){let n,r=[];for(let s of e){let i=Ay.get(s);if(i===Hte)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):eN(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>E_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function SWe(t){let e=h0;for(let n of t){let r=e.filter(s=>E_(s,n));if(!r.length)throw h0.some(s=>E_(s,n))?Yte(e[0],n):Kte(n);if(e=r,r.length==1)break}return e}function xWe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${A$(uR(e,63))}: ${s}`)}return nb(r)}).join(Wte)}function Kte(t){return new Error(`disallowed character: ${_$(t)}`)}function Yte(t,e){let n=_$(e),r=h0.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function BE(t){return new Error(`illegal placement: ${t}`)}function IWe(t,e){for(let n of e)if(!E_(t,n))throw Yte(t,n);if(t.M){let n=jte(e);for(let r=1,s=n.length;r<s;r++)if(S5.has(n[r])){let i=r+1;for(let o;i<s&&S5.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${_$(o)}`);if(i-r>rW)throw new Error(`excessive non-spacing marks: ${A$(uR(n.slice(r-1,i)))} (${i-r}/${rW})`);r=i}}}function NWe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=RWe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(lp.has(o))s.push(o);else{let a=A5.get(o);if(a)s.push(...a);else if(!Gte.has(o))throw Kte(o)}}}return s.length&&r.push(e(s)),r}function TWe(t){return t.filter(e=>e!=zte)}function RWe(t,e){let n=x5,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const Qte=new Uint8Array(32);Qte.fill(0);function aW(t){return Z(t.length!==0,"invalid ENS name; empty component","comp",t),t}function Jte(t){const e=id(PWe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(aW(e.slice(r,s))),r=s+1);return Z(r<e.length,"invalid ENS name; empty component","name",t),n.push(aW(e.slice(r))),n}function PWe(t){try{if(t.length===0)throw new Error("empty label");return CWe(t)}catch(e){Z(!1,`invalid ENS name (${e.message})`,"name",t)}}function I5(t){Z(typeof t=="string","invalid ENS name; not a string","name",t),Z(t.length,"invalid ENS name (empty label)","name",t);let e=Qte;const n=Jte(t);for(;n.length;)e=Vr(Or([e,Vr(n.pop())]));return ke(e)}function OWe(t,e){const n=e;return Z(n<=255,"DNS encoded label cannot exceed 255","length",n),ke(Or(Jte(t).map(r=>{Z(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const Zte=new Uint8Array(32);Zte.fill(0);const kWe=BigInt(-1),Xte=BigInt(0),ene=BigInt(1),DWe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function MWe(t){const e=Jt(t),n=e.length%32;return n?Or([e,Zte.slice(n)]):ke(e)}const LWe=Tf(ene,32),UWe=Tf(Xte,32),cW={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},f2=["name","version","chainId","verifyingContract","salt"];function lW(t){return function(e){return Z(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const $We={name:lW("name"),version:lW("version"),chainId:function(t){const e=Je(t,"domain.chainId");return Z(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Nc(e)},verifyingContract:function(t){try{return xn(t).toLowerCase()}catch{}Z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Jt(t,"domain.salt");return Z(e.length===32,'invalid domain value "salt"',"domain.salt",t),ke(e)}};function p2(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Z(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Qv(DWe,n?r-1:r),i=n?(s+ene)*kWe:Xte;return function(o){const a=Je(o,"value");return Z(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),Tf(n?Fee(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Z(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Jt(r);return Z(s.length===n,`invalid length for ${t}`,"value",r),MWe(r)}}}switch(t){case"address":return function(e){return wd(xn(e),32)};case"bool":return function(e){return e?LWe:UWe};case"bytes":return function(e){return Vr(e)};case"string":return function(e){return em(e)}}return null}function uW(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function gS(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var M_,Lu,Z0,lN,tne;const Ea=class Ea{constructor(e){Q(this,lN);te(this,"primaryType");Q(this,M_);Q(this,Lu);Q(this,Z0);L(this,Lu,new Map),L(this,Z0,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=gS(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),L(this,M_,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Z(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=gS(u.type).base;Z(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!p2(d)&&(Z(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);Z(o.length!==0,"missing primary type","types",e),Z(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),vt(this,{primaryType:o[0]});function a(c,l){Z(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),C(this,Lu).set(c,uW(c,i[c])+u.map(d=>uW(d,i[d])).join(""))}}get types(){return JSON.parse(C(this,M_))}getEncoder(e){let n=C(this,Z0).get(e);return n||(n=he(this,lN,tne).call(this,e),C(this,Z0).set(e,n)),n}encodeType(e){const n=C(this,Lu).get(e);return Z(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Vr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(p2(e))return r(e,n);const s=gS(e).array;if(s)return Z(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});Z(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Ea(e)}static getPrimaryType(e){return Ea.from(e).primaryType}static hashStruct(e,n,r){return Ea.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=cW[r];Z(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>f2.indexOf(r.name)-f2.indexOf(s.name)),Ea.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Or(["0x1901",Ea.hashDomain(e),Ea.from(n).hash(r)])}static hash(e,n,r){return Vr(Ea.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!rr(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Ea.from(n);o.visit(r,(a,c)=>(a==="address"&&!rr(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){Ea.hashDomain(e);const s={},i=[];f2.forEach(c=>{const l=e[c];l!=null&&(s[c]=$We[c](l),i.push({name:c,type:cW[c]}))});const o=Ea.from(n);n=o.types;const a=Object.assign({},n);return Z(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return ke(Jt(l));if(c.match(/^u?int/))return Je(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Z(typeof l=="string","invalid string","value",l),l}Z(!1,"unsupported type","type",c)})}}};M_=new WeakMap,Lu=new WeakMap,Z0=new WeakMap,lN=new WeakSet,tne=function(e){{const s=p2(e);if(s)return s}const n=gS(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{Z(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return C(this,Lu).has(s)&&(a=a.map(Vr)),Vr(Or(a))}}const r=this.types[e];if(r){const s=em(C(this,Lu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return C(this,Lu).has(c)?Vr(l):l});return o.unshift(s),Or(o)}}Z(!1,`unknown type: ${e}`,"type",e)};let tN=Ea;function Pi(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const BWe="external public payable override",FWe=Pi(BWe.split(" ")),nne="constant external internal payable private public pure view override",jWe=Pi(nne.split(" ")),rne="constructor error event fallback function receive struct",sne=Pi(rne.split(" ")),ine="calldata memory storage payable indexed",WWe=Pi(ine.split(" ")),zWe="tuple returns",HWe=[rne,ine,zWe,nne].join(" "),GWe=Pi(HWe.split(" ")),qWe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},VWe=new RegExp("^(\\s*)"),KWe=new RegExp("^([0-9]+)"),YWe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),one=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),ane=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Ls,_c,L_,N5;const uN=class uN{constructor(e){Q(this,L_);Q(this,Ls);Q(this,_c);L(this,Ls,0),L(this,_c,e.slice())}get offset(){return C(this,Ls)}get length(){return C(this,_c).length-C(this,Ls)}clone(){return new uN(C(this,_c))}reset(){L(this,Ls,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=he(this,L_,N5).call(this,C(this,Ls)+1,e.match+1);return L(this,Ls,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;C(this,Ls)<e.match-1;){const r=this.peek().linkNext;n.push(he(this,L_,N5).call(this,C(this,Ls)+1,r)),L(this,Ls,r)}return L(this,Ls,e.match+1),n}peek(){if(C(this,Ls)>=C(this,_c).length)throw new Error("out-of-bounds");return C(this,_c)[C(this,Ls)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Id(this,Ls)._++,e}toString(){const e=[];for(let n=C(this,Ls);n<C(this,_c).length;n++){const r=C(this,_c)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Ls=new WeakMap,_c=new WeakMap,L_=new WeakSet,N5=function(e=0,n=0){return new uN(C(this,_c).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Vc=uN;function Ff(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(VWe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=qWe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Zt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(YWe),a){if(c.text=a[1],i+=c.text.length,GWe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(ane)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(KWe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Vc(e.map(o=>Object.freeze(o)))}function dW(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function dR(t,e){if(e.peekKeyword(sne)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function bd(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function cne(t){let e=bd(t,jWe);return dW(e,Pi("constant payable nonpayable".split(" "))),dW(e,Pi("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function od(t,e){return t.popParams().map(n=>Gs.from(n,e))}function lne(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Je(t.pop().text);throw new Error("invalid gas")}return null}function tm(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const QWe=new RegExp(/^(.*)\[([0-9]*)\]$/);function hW(t){const e=t.match(ane);if(Z(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Z(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Z(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const br={},So=Symbol.for("_ethers_internal"),fW="_ParamTypeInternal",pW="_ErrorInternal",gW="_EventInternal",mW="_ConstructorInternal",yW="_FallbackInternal",wW="_FunctionInternal",bW="_StructInternal";var X0,cx;const Ca=class Ca{constructor(e,n,r,s,i,o,a,c){Q(this,X0);te(this,"name");te(this,"type");te(this,"baseType");te(this,"indexed");te(this,"components");te(this,"arrayLength");te(this,"arrayChildren");if(tR(e,br,"ParamType"),Object.defineProperty(this,So,{value:fW}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");vt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return he(this,X0,cx).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(Ca.isParamType(e))return e;if(typeof e=="string")try{return Ca.from(Ff(e),n)}catch{Z(!1,"invalid param type","obj",e)}else if(e instanceof Vc){let a="",c="",l=null;bd(e,Pi(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>Ca.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=hW(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new Ca(br,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(bd(e,WWe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ca(br,p,a,c,h,l,d,u)}const r=e.name;Z(!r||typeof r=="string"&&r.match(one),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Z(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(QWe);if(o){const a=parseInt(o[2]||"-1"),c=Ca.from({type:o[1],components:e.components});return new Ca(br,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>Ca.from(l)):null;return new Ca(br,r||"",i,"tuple",s,a,null,null)}return i=hW(e.type),new Ca(br,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[So]===fW}};X0=new WeakSet,cx=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;he(u=o,X0,cx).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;he(u=o[l],X0,cx).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Gs=Ca;class nm{constructor(e,n,r){te(this,"type");te(this,"inputs");tR(e,br,"Fragment"),r=Object.freeze(r.slice()),vt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{nm.from(JSON.parse(e))}catch{}return nm.from(Ff(e))}if(e instanceof Vc)switch(e.peekKeyword(sne)){case"constructor":return Ju.from(e);case"error":return po.from(e);case"event":return Ll.from(e);case"fallback":case"receive":return Tu.from(e);case"function":return Ul.from(e);case"struct":return _g.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Ju.from(e);case"error":return po.from(e);case"event":return Ll.from(e);case"fallback":case"receive":return Tu.from(e);case"function":return Ul.from(e);case"struct":return _g.from(e)}ye(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Z(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Ju.isFragment(e)}static isError(e){return po.isFragment(e)}static isEvent(e){return Ll.isFragment(e)}static isFunction(e){return Ul.isFragment(e)}static isStruct(e){return _g.isFragment(e)}}class hR extends nm{constructor(n,r,s,i){super(n,r,i);te(this,"name");Z(typeof s=="string"&&s.match(one),"invalid identifier","name",s),i=Object.freeze(i.slice()),vt(this,{name:s})}}function C_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class po extends hR{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,So,{value:pW})}get selector(){return em(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+C_(e,this.inputs)),n.join(" ")}static from(e){if(po.isFragment(e))return e;if(typeof e=="string")return po.from(Ff(e));if(e instanceof Vc){const n=dR("error",e),r=od(e);return tm(e),new po(br,n,r)}return new po(br,e.name,e.inputs?e.inputs.map(Gs.from):[])}static isFragment(e){return e&&e[So]===pW}}class Ll extends hR{constructor(n,r,s,i){super(n,"event",r,s);te(this,"anonymous");Object.defineProperty(this,So,{value:gW}),vt(this,{anonymous:i})}get topicHash(){return em(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+C_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Gs.from(i)),new Ll(br,n,r,!1).topicHash}static from(n){if(Ll.isFragment(n))return n;if(typeof n=="string")try{return Ll.from(Ff(n))}catch{Z(!1,"invalid event fragment","obj",n)}else if(n instanceof Vc){const r=dR("event",n),s=od(n,!0),i=!!bd(n,Pi(["anonymous"])).has("anonymous");return tm(n),new Ll(br,r,s,i)}return new Ll(br,n.name,n.inputs?n.inputs.map(r=>Gs.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[So]===gW}}class Ju extends nm{constructor(n,r,s,i,o){super(n,r,s);te(this,"payable");te(this,"gas");Object.defineProperty(this,So,{value:mW}),vt(this,{payable:i,gas:o})}format(n){if(ye(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${C_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Ju.isFragment(n))return n;if(typeof n=="string")try{return Ju.from(Ff(n))}catch{Z(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Vc){bd(n,Pi(["constructor"]));const r=od(n),s=!!bd(n,FWe).has("payable"),i=lne(n);return tm(n),new Ju(br,"constructor",r,s,i)}return new Ju(br,"constructor",n.inputs?n.inputs.map(Gs.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[So]===mW}}class Tu extends nm{constructor(n,r,s){super(n,"fallback",r);te(this,"payable");Object.defineProperty(this,So,{value:yW}),vt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Tu.isFragment(n))return n;if(typeof n=="string")try{return Tu.from(Ff(n))}catch{Z(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Vc){const r=n.toString(),s=n.peekKeyword(Pi(["fallback","receive"]));if(Z(s,"type must be fallback or receive","obj",r),n.popKeyword(Pi(["fallback","receive"]))==="receive"){const c=od(n);return Z(c.length===0,"receive cannot have arguments","obj.inputs",c),bd(n,Pi(["payable"])),tm(n),new Tu(br,[],!0)}let o=od(n);o.length?Z(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Gs.from("bytes")];const a=cne(n);if(Z(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),bd(n,Pi(["returns"])).has("returns")){const c=od(n);Z(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return tm(n),new Tu(br,o,a==="payable")}if(n.type==="receive")return new Tu(br,[],!0);if(n.type==="fallback"){const r=[Gs.from("bytes")],s=n.stateMutability==="payable";return new Tu(br,r,s)}Z(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[So]===yW}}class Ul extends hR{constructor(n,r,s,i,o,a){super(n,"function",r,i);te(this,"constant");te(this,"outputs");te(this,"stateMutability");te(this,"payable");te(this,"gas");Object.defineProperty(this,So,{value:wW}),o=Object.freeze(o.slice()),vt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return em(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+C_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(C_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Gs.from(i)),new Ul(br,n,"view",r,[],null).selector}static from(n){if(Ul.isFragment(n))return n;if(typeof n=="string")try{return Ul.from(Ff(n))}catch{Z(!1,"invalid function fragment","obj",n)}else if(n instanceof Vc){const s=dR("function",n),i=od(n),o=cne(n);let a=[];bd(n,Pi(["returns"])).has("returns")&&(a=od(n));const c=lne(n);return tm(n),new Ul(br,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Ul(br,n.name,r,n.inputs?n.inputs.map(Gs.from):[],n.outputs?n.outputs.map(Gs.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[So]===wW}}class _g extends hR{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,So,{value:bW})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return _g.from(Ff(e))}catch{Z(!1,"invalid struct fragment","obj",e)}else if(e instanceof Vc){const n=dR("struct",e),r=od(e);return tm(e),new _g(br,n,r)}return new _g(br,e.name,e.inputs?e.inputs.map(Gs.from):[])}static isFragment(e){return e&&e[So]===bW}}const Qc=new Map;Qc.set(0,"GENERIC_PANIC");Qc.set(1,"ASSERT_FALSE");Qc.set(17,"OVERFLOW");Qc.set(18,"DIVIDE_BY_ZERO");Qc.set(33,"ENUM_RANGE_ERROR");Qc.set(34,"BAD_STORAGE_DATA");Qc.set(49,"STACK_UNDERFLOW");Qc.set(50,"ARRAY_RANGE_ERROR");Qc.set(65,"OUT_OF_MEMORY");Qc.set(81,"UNINITIALIZED_FUNCTION_CALL");const JWe=new RegExp(/^bytes([0-9]*)$/),ZWe=new RegExp(/^(u?int)([0-9]*)$/);let g2=null,vW=1024;function XWe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Jt(n);if(n=ke(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(ke(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(ke(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Qc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?xn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=xn(e.from)),fr(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var Ah,Sy;const dN=class dN{constructor(){Q(this,Ah)}getDefaultValue(e){const n=e.map(s=>he(this,Ah,Sy).call(this,Gs.from(s)));return new pS(n,"_").defaultValue()}encode(e,n){Uee(n.length,e.length,"types/values length mismatch");const r=e.map(o=>he(this,Ah,Sy).call(this,Gs.from(o))),s=new pS(r,"_"),i=new p5;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>he(this,Ah,Sy).call(this,Gs.from(o)));return new pS(s,"_").decode(new g5(n,r,vW))}static _setDefaultMaxInflation(e){Z(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),vW=e}static defaultAbiCoder(){return g2==null&&(g2=new dN),g2}static getBuiltinCallException(e,n,r){return XWe(e,n,r,dN.defaultAbiCoder())}};Ah=new WeakSet,Sy=function(e){if(e.isArray())return new y7e(he(this,Ah,Sy).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new pS(e.components.map(r=>he(this,Ah,Sy).call(this,r)),e.name);switch(e.baseType){case"address":return new g7e(e.name);case"bool":return new w7e(e.name);case"string":return new I7e(e.name);case"bytes":return new b7e(e.name);case"":return new C7e(e.name)}let n=e.type.match(ZWe);if(n){let r=parseInt(n[2]||"256");return Z(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new x7e(r/8,n[1]==="int",e.name)}if(n=e.type.match(JWe),n){let r=parseInt(n[1]);return Z(r!==0&&r<=32,"invalid bytes length","param",e),new v7e(r,e.name)}Z(!1,"invalid type","type",e.type)};let __=dN;class eze{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"signature");te(this,"topic");te(this,"args");const s=e.name,i=e.format();vt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class tze{constructor(e,n,r,s){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");te(this,"value");const i=e.name,o=e.format();vt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class nze{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");const s=e.name,i=e.format();vt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class EW{constructor(e){te(this,"hash");te(this,"_isIndexed");vt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const CW={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},_W={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&CW[t.toString()]&&(e=CW[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var vl,El,Cl,ii,Vl,lx,ux;const Ep=class Ep{constructor(e){Q(this,Vl);te(this,"fragments");te(this,"deploy");te(this,"fallback");te(this,"receive");Q(this,vl);Q(this,El);Q(this,Cl);Q(this,ii);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,L(this,Cl,new Map),L(this,vl,new Map),L(this,El,new Map);const r=[];for(const o of n)try{r.push(nm.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}vt(this,{fragments:Object.freeze(r)});let s=null,i=!1;L(this,ii,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}vt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Z(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=C(this,Cl);break;case"event":c=C(this,El);break;case"error":c=C(this,vl);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||vt(this,{deploy:Ju.from("constructor()")}),vt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return __.defaultAbiCoder()}getFunctionName(e){const n=he(this,Vl,lx).call(this,e,null,!1);return Z(n,"no matching function","key",e),n.name}hasFunction(e){return!!he(this,Vl,lx).call(this,e,null,!1)}getFunction(e,n){return he(this,Vl,lx).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(C(this,Cl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,Cl).get(s),r)}}getEventName(e){const n=he(this,Vl,ux).call(this,e,null,!1);return Z(n,"no matching event","key",e),n.name}hasEvent(e){return!!he(this,Vl,ux).call(this,e,null,!1)}getEvent(e,n){return he(this,Vl,ux).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(C(this,El).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,El).get(s),r)}}getError(e,n){if(rr(e)){const s=e.toLowerCase();if(_W[s])return po.from(_W[s].signature);for(const i of C(this,vl).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of C(this,vl))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?po.from("error Error(string)"):e==="Panic"?po.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Z(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=po.from(e).format(),e==="Error(string)")return po.from("error Error(string)");if(e==="Panic(uint256)")return po.from("error Panic(uint256)");const r=C(this,vl).get(e);return r||null}forEachError(e){const n=Array.from(C(this,vl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,vl).get(s),r)}}_decodeParams(e,n){return C(this,ii).decode(e,n)}_encodeParams(e,n){return C(this,ii).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Z(Ir(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,Ir(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Or([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Z(Ir(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,Ir(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Or([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Z(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=Ii(n);if(s.length%32===0)try{return C(this,ii).decode(e.outputs,s)}catch{r="could not decode result data"}ye(!1,r,"BAD_DATA",{value:ke(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Jt(e,"data"),s=__.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=ke(r.slice(0,4)),c=this.getError(a);if(c)try{const l=C(this,ii).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return ke(C(this,ii).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Z(i,"unknown event","eventFragment",e),e=i}ye(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?em(o):i.type==="bytes"?Vr(ke(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Tf(o):i.type.match(/^bytes/)?o=Cje(o,32):i.type==="address"&&C(this,ii).encode(["address"],[o]),wd(ke(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){Z(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Z(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);Z(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Z(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(em(c));else if(o.type==="bytes")r.push(Vr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(C(this,ii).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:C(this,ii).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);Z(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;Z(rr(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Gs.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?C(this,ii).decode(s,Or(r)):null,c=C(this,ii).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new EW(null);else if(o[p])g=new EW(a[h++]);else try{g=a[h++]}catch(w){g=w}else try{g=c[d++]}catch(w){g=w}l.push(g),u.push(f.name||null)}),Jw.fromItems(l,u)}parseTransaction(e){const n=Jt(e.data,"tx.data"),r=Je(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(ke(n.slice(0,4)));if(!s)return null;const i=C(this,ii).decode(s.inputs,n.slice(4));return new tze(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new eze(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=ke(e),r=this.getError(Ir(n,0,4));if(!r)return null;const s=C(this,ii).decode(r.inputs,Ir(n,4));return new nze(r,r.selector,s)}static from(e){return e instanceof Ep?e:typeof e=="string"?new Ep(JSON.parse(e)):typeof e.formatJson=="function"?new Ep(e.formatJson()):typeof e.format=="function"?new Ep(e.format("json")):new Ep(e)}};vl=new WeakMap,El=new WeakMap,Cl=new WeakMap,ii=new WeakMap,Vl=new WeakSet,lx=function(e,n,r){if(rr(e)){const i=e.toLowerCase();for(const o of C(this,Cl).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of C(this,Cl))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;ui.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(ui.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=C(this,Cl).get(Ul.from(e).format());return s||null},ux=function(e,n,r){if(rr(e)){const i=e.toLowerCase();for(const o of C(this,El).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of C(this,El))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(ui.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=C(this,El).get(Ll.from(e).format());return s||null};let T5=Ep;const une=BigInt(0);function f0(t){return t??null}function Lr(t){return t==null?null:t.toString()}class AW{constructor(e,n,r){te(this,"gasPrice");te(this,"maxFeePerGas");te(this,"maxPriorityFeePerGas");vt(this,{gasPrice:f0(e),maxFeePerGas:f0(n),maxPriorityFeePerGas:f0(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Lr(e),maxFeePerGas:Lr(n),maxPriorityFeePerGas:Lr(r)}}}function nN(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=ke(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Je(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Zt(t[s],`request.${s}`));return t.accessList&&(e.accessList=xm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>d$(s)?ke(s):Object.assign({},s))),e}var Uu;class rze{constructor(e,n){te(this,"provider");te(this,"number");te(this,"hash");te(this,"timestamp");te(this,"parentHash");te(this,"parentBeaconBlockRoot");te(this,"nonce");te(this,"difficulty");te(this,"gasLimit");te(this,"gasUsed");te(this,"stateRoot");te(this,"receiptsRoot");te(this,"blobGasUsed");te(this,"excessBlobGas");te(this,"miner");te(this,"prevRandao");te(this,"extraData");te(this,"baseFeePerGas");Q(this,Uu);L(this,Uu,e.transactions.map(r=>typeof r!="string"?new A_(r,n):r)),vt(this,{provider:n,hash:f0(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:f0(e.prevRandao),extraData:e.extraData,baseFeePerGas:f0(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return C(this,Uu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=C(this,Uu).slice();return e.length===0?[]:(ye(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:w}=this;return{_type:"Block",baseFeePerGas:Lr(e),difficulty:Lr(n),extraData:r,gasLimit:Lr(s),gasUsed:Lr(i),blobGasUsed:Lr(this.blobGasUsed),excessBlobGas:Lr(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:w}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return C(this,Uu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=C(this,Uu)[e];else{const r=e.toLowerCase();for(const s of C(this,Uu))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Z(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return sze(this)}}Uu=new WeakMap;class F1{constructor(e,n){te(this,"provider");te(this,"transactionHash");te(this,"blockHash");te(this,"blockNumber");te(this,"removed");te(this,"address");te(this,"data");te(this,"topics");te(this,"index");te(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());vt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ye(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return ize(this)}}var U_;class dne{constructor(e,n){te(this,"provider");te(this,"to");te(this,"from");te(this,"contractAddress");te(this,"hash");te(this,"index");te(this,"blockHash");te(this,"blockNumber");te(this,"logsBloom");te(this,"gasUsed");te(this,"blobGasUsed");te(this,"cumulativeGasUsed");te(this,"gasPrice");te(this,"blobGasPrice");te(this,"type");te(this,"status");te(this,"root");Q(this,U_);L(this,U_,Object.freeze(e.logs.map(s=>new F1(s,n))));let r=une;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),vt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return C(this,U_)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Lr(this.cumulativeGasUsed),from:n,gasPrice:Lr(this.gasPrice),blobGasUsed:Lr(this.blobGasUsed),blobGasPrice:Lr(this.blobGasPrice),gasUsed:Lr(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return fne(this)}reorderedEvent(e){return ye(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),hne(this,e)}}U_=new WeakMap;var Sh;const L$=class L${constructor(e,n){te(this,"provider");te(this,"blockNumber");te(this,"blockHash");te(this,"index");te(this,"hash");te(this,"type");te(this,"to");te(this,"from");te(this,"nonce");te(this,"gasLimit");te(this,"gasPrice");te(this,"maxPriorityFeePerGas");te(this,"maxFeePerGas");te(this,"maxFeePerBlobGas");te(this,"data");te(this,"value");te(this,"chainId");te(this,"signature");te(this,"accessList");te(this,"blobVersionedHashes");te(this,"authorizationList");Q(this,Sh);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,L(this,Sh,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Lr(this.chainId),data:l,from:a,gasLimit:Lr(this.gasLimit),gasPrice:Lr(this.gasPrice),hash:s,maxFeePerGas:Lr(this.maxFeePerGas),maxPriorityFeePerGas:Lr(this.maxPriorityFeePerGas),maxFeePerBlobGas:Lr(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Lr(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await _i({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=C(this,Sh),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await _i({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<C(this,Sh)&&(o=C(this,Sh)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const w of g)if(w===this.hash)return;for(let w=0;w<g.length;w++){const y=await g.getTransaction(w);if(y.from===this.from&&y.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(y.hash);if(b==null||h-b.blockNumber+1<r)return;let v="replaced";y.data===this.data&&y.to===this.to&&y.value===this.value?v="repriced":y.data==="0x"&&y.from===y.to&&y.value===une&&(v="cancelled"),ye(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:y.replaceableTransaction(i),hash:y.hash,receipt:b})}}o++}},l=h=>{if(h==null||h.status!==0)return h;ye(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(y=>y())};if(p.push(()=>{a=!0}),s>0){const y=setTimeout(()=>{g(),f(fr("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(y)})}const w=async y=>{if(await y.confirmations()>=r){g();try{h(l(y))}catch(b){f(b)}}};if(p.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),i>=0){const y=async()=>{try{await c()}catch(b){if(js(b,"TRANSACTION_REPLACED")){g(),f(b);return}}a||this.provider.once("block",y)};p.push(()=>{this.provider.off("block",y)}),this.provider.once("block",y)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),fne(this)}reorderedEvent(e){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ye(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),hne(this,e)}replaceableTransaction(e){Z(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new L$(this,this.provider);return L(n,Sh,e),n}};Sh=new WeakMap;let A_=L$;function sze(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function hne(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function fne(t){return{orphan:"drop-transaction",tx:t}}function ize(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class S$ extends F1{constructor(n,r,s){super(n,n.provider);te(this,"interface");te(this,"fragment");te(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);vt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class pne extends F1{constructor(n,r){super(n,n.provider);te(this,"error");vt(this,{error:r})}}var ew;class oze extends dne{constructor(n,r,s){super(s,r);Q(this,ew);L(this,ew,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?C(this,ew).getEvent(n.topics[0]):null;if(r)try{return new S$(n,C(this,ew),r)}catch(s){return new pne(n,s)}return n})}}ew=new WeakMap;var $_;class x$ extends A_{constructor(n,r,s){super(s,r);Q(this,$_);L(this,$_,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new oze(C(this,$_),this.provider,s)}}$_=new WeakMap;class gne extends jee{constructor(n,r,s,i){super(n,r,s);te(this,"log");vt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class aze extends gne{constructor(e,n,r,s,i){super(e,n,r,new S$(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);vt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const SW=BigInt(0);function mne(t){return t&&typeof t.call=="function"}function yne(t){return t&&typeof t.estimateGas=="function"}function fR(t){return t&&typeof t.resolveName=="function"}function wne(t){return t&&typeof t.sendTransaction=="function"}function bne(t){if(t!=null){if(fR(t))return t;if(t.provider)return t.provider}}var B_;class cze{constructor(e,n,r){Q(this,B_);te(this,"fragment");if(vt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=rm(e.runner,"resolveName"),i=fR(s)?s:null;L(this,B_,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>Ri(h,i))):Ri(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return C(this,B_)}}B_=new WeakMap;function rm(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function $p(t){return t==null?null:t.provider||null}async function vne(t,e){const n=ui.dereference(t,"overrides");Z(typeof n=="object","invalid overrides parameter","overrides",t);const r=nN(n);return Z(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Z(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function lze(t,e,n){const r=rm(t,"resolveName"),s=fR(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=ui.dereference(c,a),a==="address"?Ri(c,s):c))))}function uze(t){const e=async function(o){const a=await vne(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Ri(a.from,bne(t.runner)));const c=t.interface,l=Je(a.value||SW,"overrides.value")===SW,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Z(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return Z(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=rm(t.runner,"call");ye(mne(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw u$(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;ye(wne(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=$p(t.runner);return new x$(t.interface,l,c)},s=async function(o){const a=rm(t.runner,"estimateGas");return ye(yne(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return vt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function dze(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return ye(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await vne(l.pop()),d.from&&(d.from=await Ri(d.from,bne(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await lze(t.runner,u.inputs,l);return Object.assign({},d,await _i({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;ye(wne(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=$p(t.runner);return new x$(t.interface,h,d)},o=async function(...l){const u=rm(t.runner,"estimateGas");return ye(yne(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=rm(t.runner,"call");ye(mne(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw u$(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return vt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return ye(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function hze(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return ye(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new cze(t,n(...s),s)};return vt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return ye(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const rN=Symbol.for("_ethersInternal_contract"),Ene=new WeakMap;function fze(t,e){Ene.set(t[rN],e)}function Bo(t){return Ene.get(t[rN])}function pze(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function I$(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(rr(o,32))return o;const a=t.interface.getEvent(o);return Z(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?rr(e,32)?n=[e]:(r=t.interface.getEvent(e),Z(r,"unknown fragment","event",e),n=[r.topicHash]):pze(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Z(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Xv(t,e){const{subs:n}=Bo(t);return n.get((await I$(t,e)).tag)||null}async function xW(t,e,n){const r=$p(t.runner);ye(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await I$(t,n),{addr:a,subs:c}=Bo(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=w=>{let y=s;if(y==null)try{y=t.interface.getEvent(w.topics[0])}catch{}if(y){const b=y,v=s?t.interface.decodeEventLog(s,w.data,w.topics):[];P5(t,n,v,A=>new aze(t,A,n,b,w))}else P5(t,n,[],b=>new gne(t,b,n,w))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let w=f;f=[],await Promise.all(w),r.off(d,h)}},c.set(i,l)}return l}let R5=Promise.resolve();async function gze(t,e,n,r){await R5;const s=await Xv(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Bo(t).subs.delete(s.tag)),i>0}async function P5(t,e,n,r){try{await R5}catch{}const s=gze(t,e,n,r);return R5=s,await s}const mS=["then"];var fz;fz=rN;const FE=class FE{constructor(e,n,r,s){te(this,"target");te(this,"interface");te(this,"runner");te(this,"filters");te(this,fz);te(this,"fallback");Z(typeof e=="string"||xte(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=T5.from(n);vt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,rN,{value:{}});let o,a=null,c=null;if(s){const d=$p(r);c=new x$(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(rr(e))a=e,o=Promise.resolve(e);else{const d=rm(r,"resolveName");if(!fR(d))throw fr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw fr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Bo(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Bo(this).addr=d,d});fze(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||mS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!js(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>mS.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return vt(this,{filters:u}),vt(this,{fallback:i.receive||i.fallback?uze(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||mS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!js(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||mS.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new FE(this.target,this.interface,e)}attach(e){return new FE(e,this.interface,this.runner)}async getAddress(){return await Bo(this).addrPromise}async getDeployedCode(){const e=$p(this.runner);ye(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=$p(this.runner);return ye(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Bo(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),dze(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),hze(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Bo(this),o=s||await i,{fragment:a,topics:c}=await I$(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=$p(this.runner);return ye(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new S$(d,this.interface,h)}catch(f){return new pne(d,f)}return new F1(d,u)})}async on(e,n){const r=await xW(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await xW(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await P5(this,e,n,null)}async listenerCount(e){if(e){const s=await Xv(this,e);return s?s.listeners.length:0}const{subs:n}=Bo(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Xv(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Bo(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Xv(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Bo(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Xv(this,e);if(!n)return this;n.stop(),Bo(this).subs.delete(n.tag)}else{const{subs:n}=Bo(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends FE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let O5=FE;function mze(){return O5}class p0 extends mze(){}function m2(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Z(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class yze{constructor(e){te(this,"name");vt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Cne=new RegExp("^(ipfs)://(.*)$","i"),IW=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Cne,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var xh,og,Ih,xy,hN,_ne;const Ky=class Ky{constructor(e,n,r){Q(this,Ih);te(this,"provider");te(this,"address");te(this,"name");Q(this,xh);Q(this,og);vt(this,{provider:e,address:n,name:r}),L(this,xh,null),L(this,og,new p0(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return C(this,xh)==null&&L(this,xh,(async()=>{try{return await C(this,og).supportsInterface("0x9061b923")}catch(e){if(js(e,"CALL_EXCEPTION"))return!1;throw L(this,xh,null),e}})()),await C(this,xh)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await he(this,Ih,xy).call(this,"addr(bytes32)");return i==null||i===m_?null:i}catch(i){if(js(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await he(this,Ih,xy).call(this,"addr(bytes32,uint)",[i]);if(rr(o,20))return xn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof yze&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await he(this,Ih,xy).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;ye(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await he(this,Ih,xy).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await he(this,Ih,xy).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${Sje("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ye(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<IW.length;r++){const s=n.match(IW[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=m2(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new p0(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",Tf(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=m2(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new Rf(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const y=f.body;return y&&e.push({type:"!metadata",value:ke(y)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(Cne)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=m2(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return ye(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await he(s=Ky,hN,_ne).call(s,e,r);if(i!=null){const o=new Ky(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};xh=new WeakMap,og=new WeakMap,Ih=new WeakSet,xy=async function(e,n){n=(n||[]).slice();const r=C(this,og).interface;n.unshift(I5(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),ye(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[OWe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await C(this,og)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!js(i,"CALL_EXCEPTION"))throw i}return null},hN=new WeakSet,_ne=async function(e,n){const r=await Ky.getEnsAddress(e);try{const i=await new p0(r,["function resolver(bytes32) view returns (address)"],e).resolver(I5(n),{enableCcipRead:!0});return i===m_?null:i}catch(s){throw s}return null},Q(Ky,hN);let sN=Ky;const NW=BigInt(0);function on(t,e){return function(n){return n==null?e:t(n)}}function S_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function j1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ye(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function wze(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Z(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function sb(t){return Z(rr(t,!0),"invalid data","value",t),t}function Fs(t){return Z(rr(t,32),"invalid hash","value",t),t}const bze=j1({address:xn,blockHash:Fs,blockNumber:Zt,data:sb,index:Zt,removed:on(wze,!1),topics:S_(Fs),transactionHash:Fs,transactionIndex:Zt},{index:["logIndex"]});function vze(t){return bze(t)}const Eze=j1({hash:on(Fs),parentHash:Fs,parentBeaconBlockRoot:on(Fs,null),number:Zt,timestamp:Zt,nonce:on(sb),difficulty:Je,gasLimit:Je,gasUsed:Je,stateRoot:on(Fs,null),receiptsRoot:on(Fs,null),blobGasUsed:on(Je,null),excessBlobGas:on(Je,null),miner:on(xn),prevRandao:on(Fs,null),extraData:sb,baseFeePerGas:on(Je)},{prevRandao:["mixHash"]});function Cze(t){const e=Eze(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Ane(n)),e}const _ze=j1({transactionIndex:Zt,blockNumber:Zt,transactionHash:Fs,address:xn,topics:S_(Fs),data:sb,index:Zt,blockHash:Fs},{index:["logIndex"]});function Aze(t){return _ze(t)}const Sze=j1({to:on(xn,null),from:on(xn,null),contractAddress:on(xn,null),index:Zt,root:on(ke),gasUsed:Je,blobGasUsed:on(Je,null),logsBloom:on(sb),blockHash:Fs,hash:Fs,logs:S_(Aze),blockNumber:Zt,cumulativeGasUsed:Je,effectiveGasPrice:on(Je),blobGasPrice:on(Je,null),status:on(Zt),type:on(Zt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function xze(t){return Sze(t)}function Ane(t){t.to&&Je(t.to)===NW&&(t.to="0x0000000000000000000000000000000000000000");const e=j1({hash:Fs,index:on(Zt,void 0),type:n=>n==="0x"||n==null?0:Zt(n),accessList:on(xm,null),blobVersionedHashes:on(S_(Fs,!0),null),authorizationList:on(S_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:xn(n.address),chainId:Je(n.chainId),nonce:Je(n.nonce),signature:Ao.from(r)}},!1),null),blockHash:on(Fs,null),blockNumber:on(Zt,null),transactionIndex:on(Zt,null),from:xn,gasPrice:on(Je),maxPriorityFeePerGas:on(Je),maxFeePerGas:on(Je),maxFeePerBlobGas:on(Je,null),gasLimit:Je,to:on(xn,null),value:Je,nonce:Zt,data:sb,creates:on(xn,null),chainId:on(Je,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=p7e(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Ao.from(t.signature):e.signature=Ao.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Je(e.blockHash)===NW&&(e.blockHash=null),e}const Ize="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class W1{constructor(e){te(this,"name");vt(this,{name:e})}clone(){return new W1(this.name)}}class pR extends W1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);te(this,"effectiveBlock");te(this,"txBase");te(this,"txCreate");te(this,"txDataZero");te(this,"txDataNonzero");te(this,"txAccessListStorageKey");te(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),Z(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),vt(this,s)}clone(){return new pR(this.effectiveBlock,this)}}class gR extends W1{constructor(n,r){super("org.ethers.plugins.network.Ens");te(this,"address");te(this,"targetNetwork");vt(this,{address:n||Ize,targetNetwork:r??1})}clone(){return new gR(this.address,this.targetNetwork)}}var F_,j_;class Nze extends W1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Q(this,F_);Q(this,j_);L(this,F_,n),L(this,j_,r)}get url(){return C(this,F_)}get processFunc(){return C(this,j_)}clone(){return this}}F_=new WeakMap,j_=new WeakMap;const y2=new Map;var tw,nw,Nh;const Yy=class Yy{constructor(e,n){Q(this,tw);Q(this,nw);Q(this,Nh);L(this,tw,e),L(this,nw,Je(n)),L(this,Nh,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return C(this,tw)}set name(e){L(this,tw,e)}get chainId(){return C(this,nw)}set chainId(e){L(this,nw,Je(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Je(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Je(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Je(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(C(this,Nh).values())}attachPlugin(e){if(C(this,Nh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return C(this,Nh).set(e.name,e.clone()),this}getPlugin(e){return C(this,Nh).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Yy(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new pR;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=xm(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(Tze(),e==null)return Yy.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=y2.get(e);if(n)return n();if(typeof e=="bigint")return new Yy("unknown",e);Z(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Z(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Yy(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new gR(e.ensAddress,e.ensNetwork)),n}Z(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=y2.get(e);r&&Z(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),y2.set(e,n)}};tw=new WeakMap,nw=new WeakMap,Nh=new WeakMap;let Bl=Yy;function TW(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function RW(t){return new Nze(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:TW(a.maxFee,9),maxPriorityFeePerGas:TW(a.maxPriorityFee,9)}}catch(i){ye(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let PW=!1;function Tze(){if(PW)return;PW=!0;function t(e,n,r){const s=function(){const i=new Bl(e,n);return r.ensNetwork!=null&&i.attachPlugin(new gR(null,r.ensNetwork)),i.attachPlugin(new pR),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Bl.register(e,s),Bl.register(n,s),r.altNames&&r.altNames.forEach(i=>{Bl.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[RW("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[RW("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function k5(t){return JSON.parse(JSON.stringify(t))}var $u,Sa,Th,_l,rw,dx;class Rze{constructor(e){Q(this,rw);Q(this,$u);Q(this,Sa);Q(this,Th);Q(this,_l);L(this,$u,e),L(this,Sa,null),L(this,Th,4e3),L(this,_l,-2)}get pollingInterval(){return C(this,Th)}set pollingInterval(e){L(this,Th,e)}start(){C(this,Sa)||(L(this,Sa,C(this,$u)._setTimeout(he(this,rw,dx).bind(this),C(this,Th))),he(this,rw,dx).call(this))}stop(){C(this,Sa)&&(C(this,$u)._clearTimeout(C(this,Sa)),L(this,Sa,null))}pause(e){this.stop(),e&&L(this,_l,-2)}resume(){this.start()}}$u=new WeakMap,Sa=new WeakMap,Th=new WeakMap,_l=new WeakMap,rw=new WeakSet,dx=async function(){try{const e=await C(this,$u).getBlockNumber();if(C(this,_l)===-2){L(this,_l,e);return}if(e!==C(this,_l)){for(let n=C(this,_l)+1;n<=e;n++){if(C(this,Sa)==null)return;await C(this,$u).emit("block",n)}L(this,_l,e)}}catch{}C(this,Sa)!=null&&L(this,Sa,C(this,$u)._setTimeout(he(this,rw,dx).bind(this),C(this,Th)))};var ag,cg,Rh;class N${constructor(e){Q(this,ag);Q(this,cg);Q(this,Rh);L(this,ag,e),L(this,Rh,!1),L(this,cg,n=>{this._poll(n,C(this,ag))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){C(this,Rh)||(L(this,Rh,!0),C(this,cg).call(this,-2),C(this,ag).on("block",C(this,cg)))}stop(){C(this,Rh)&&(L(this,Rh,!1),C(this,ag).off("block",C(this,cg)))}pause(e){this.stop()}resume(){this.start()}}ag=new WeakMap,cg=new WeakMap,Rh=new WeakMap;var sw,Bu;class Pze extends N${constructor(n,r){super(n);Q(this,sw);Q(this,Bu);L(this,sw,r),L(this,Bu,-2)}pause(n){n&&L(this,Bu,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(C(this,sw));s!=null&&(C(this,Bu)===-2?L(this,Bu,s.number):s.number>C(this,Bu)&&(r.emit(C(this,sw),s.number),L(this,Bu,s.number)))}}sw=new WeakMap,Bu=new WeakMap;var fN;class Oze extends N${constructor(n,r){super(n);Q(this,fN);L(this,fN,k5(r))}async _poll(n,r){throw new Error("@TODO")}}fN=new WeakMap;var iw;class kze extends N${constructor(n,r){super(n);Q(this,iw);L(this,iw,r)}async _poll(n,r){const s=await r.getTransactionReceipt(C(this,iw));s&&r.emit(C(this,iw),s)}}iw=new WeakMap;var Fu,ow,aw,Ph,xa,pN,Sne;class T${constructor(e,n){Q(this,pN);Q(this,Fu);Q(this,ow);Q(this,aw);Q(this,Ph);Q(this,xa);L(this,Fu,e),L(this,ow,k5(n)),L(this,aw,he(this,pN,Sne).bind(this)),L(this,Ph,!1),L(this,xa,-2)}start(){C(this,Ph)||(L(this,Ph,!0),C(this,xa)===-2&&C(this,Fu).getBlockNumber().then(e=>{L(this,xa,e)}),C(this,Fu).on("block",C(this,aw)))}stop(){C(this,Ph)&&(L(this,Ph,!1),C(this,Fu).off("block",C(this,aw)))}pause(e){this.stop(),e&&L(this,xa,-2)}resume(){this.start()}}Fu=new WeakMap,ow=new WeakMap,aw=new WeakMap,Ph=new WeakMap,xa=new WeakMap,pN=new WeakSet,Sne=async function(e){if(C(this,xa)===-2)return;const n=k5(C(this,ow));n.fromBlock=C(this,xa)+1,n.toBlock=e;const r=await C(this,Fu).getLogs(n);if(r.length===0){C(this,xa)<e-60&&L(this,xa,e-60);return}for(const s of r)C(this,Fu).emit(C(this,ow),s),L(this,xa,s.blockNumber)};const Dze=BigInt(2),Mze=10;function yS(t){return t&&typeof t.then=="function"}function hx(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class xne{constructor(e){te(this,"name");vt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Lze(t){return JSON.parse(JSON.stringify(t))}function D5(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function w2(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(rr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:hx("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:hx("orphan",n),filter:Lze(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?D5(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{rr(a)?s.push(a):i.push((async()=>{s.push(await Ri(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=D5(s.map(a=>a.toLowerCase()))}return{filter:r,tag:hx("event",r),type:"event"}}Z(!1,"unknown ProviderEvent","event",t)}function b2(){return new Date().getTime()}const Uze={cacheTimeout:250,pollingInterval:4e3};var oi,Oh,ai,cw,zo,lg,kh,ju,W_,Ia,lw,uw,Kt,Lo,M5,L5,eE,U5,tE,fx;class $ze{constructor(e,n){Q(this,Kt);Q(this,oi);Q(this,Oh);Q(this,ai);Q(this,cw);Q(this,zo);Q(this,lg);Q(this,kh);Q(this,ju);Q(this,W_);Q(this,Ia);Q(this,lw);Q(this,uw);if(L(this,uw,Object.assign({},Uze,n||{})),e==="any")L(this,lg,!0),L(this,zo,null);else if(e){const r=Bl.from(e);L(this,lg,!1),L(this,zo,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else L(this,lg,!1),L(this,zo,null);L(this,ju,-1),L(this,kh,new Map),L(this,oi,new Map),L(this,Oh,new Map),L(this,ai,null),L(this,cw,!1),L(this,W_,1),L(this,Ia,new Map),L(this,lw,!1)}get pollingInterval(){return C(this,uw).pollingInterval}get provider(){return this}get plugins(){return Array.from(C(this,Oh).values())}attachPlugin(e){if(C(this,Oh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return C(this,Oh).set(e.name,e.connect(this)),this}getPlugin(e){return C(this,Oh).get(e)||null}get disableCcipRead(){return C(this,lw)}set disableCcipRead(e){L(this,lw,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Rf(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}ye(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}ye(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new rze(Cze(e),this)}_wrapLog(e,n){return new F1(vze(e),this)}_wrapTransactionReceipt(e,n){return new dne(xze(e),this)}_wrapTransactionResponse(e,n){return new A_(Ane(e),this)}_detectNetwork(){ye(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ye(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Zt(await he(this,Kt,Lo).call(this,{method:"getBlockNumber"}),"%response");return C(this,ju)>=0&&L(this,ju,e),e}_getAddress(e){return Ri(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(rr(e))return rr(e,32)?e:Nc(e);if(typeof e=="bigint"&&(e=Zt(e,"blockTag")),typeof e=="number")return e>=0?Nc(e):C(this,ju)>=0?Nc(C(this,ju)+e):this.getBlockNumber().then(n=>Nc(n+e));Z(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?D5(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=nN(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Ri(n[s],this);yS(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);yS(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(C(this,zo)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw C(this,zo)===s&&L(this,zo,null),i}})();return L(this,zo,s),(await s).clone()}const e=C(this,zo),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(C(this,lg)?(this.emit("network",r,n),C(this,zo)===e&&L(this,zo,Promise.resolve(r))):ye(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await _i({_block:he(this,Kt,U5).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await he(this,Kt,Lo).call(this,{method:"getGasPrice"});return Je(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await he(this,Kt,Lo).call(this,{method:"getPriorityFee"});return Je(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*Dze+c),new AW(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Rf(r.url),i=await r.processFunc(n,this,s);return new AW(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return yS(n)&&(n=await n),Je(await he(this,Kt,Lo).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await _i({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await he(this,Kt,L5).call(this,he(this,Kt,M5).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Je(await he(this,Kt,eE).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Zt(await he(this,Kt,eE).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return ke(await he(this,Kt,eE).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Je(n,"position");return ke(await he(this,Kt,eE).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await _i({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=YI.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await _i({network:this.getNetwork(),params:he(this,Kt,U5).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await _i({network:this.getNetwork(),params:he(this,Kt,Lo).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await _i({network:this.getNetwork(),params:he(this,Kt,Lo).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await he(this,Kt,Lo).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await _i({network:this.getNetwork(),result:he(this,Kt,Lo).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:ke(n)}async getLogs(e){let n=this._getFilter(e);yS(n)&&(n=await n);const{network:r,params:s}=await _i({network:this.getNetwork(),params:he(this,Kt,Lo).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){ye(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await sN.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=xn(e);const n=I5(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await sN.getEnsAddress(this),i=await new p0(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===m_)return null;const a=await new p0(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(js(r,"BAD_DATA")&&r.value==="0x"||js(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(fr("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){ye(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=C(this,Ia).get(e);n&&(n.timer&&clearTimeout(n.timer),C(this,Ia).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Id(this,W_)._++,s=()=>{C(this,Ia).delete(r),e()};if(this.paused)C(this,Ia).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);C(this,Ia).set(r,{timer:i,func:s,time:b2()})}return r}_forEachSubscriber(e){for(const n of C(this,oi).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new xne(e.type);case"block":{const n=new Rze(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new Pze(this,e.type);case"event":return new T$(this,e.filter);case"transaction":return new kze(this,e.hash);case"orphan":return new Oze(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of C(this,oi).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),C(this,ai)!=null&&n.pause(C(this,ai));break}}async on(e,n){const r=await he(this,Kt,fx).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,C(this,ai)!=null&&r.subscriber.pause(C(this,ai))),this}async once(e,n){const r=await he(this,Kt,fx).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,C(this,ai)!=null&&r.subscriber.pause(C(this,ai))),this}async emit(e,...n){const r=await he(this,Kt,tE).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new jee(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),C(this,oi).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await he(this,Kt,tE).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of C(this,oi).values())n+=r.length;return n}async listeners(e){if(e){const r=await he(this,Kt,tE).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of C(this,oi).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await he(this,Kt,tE).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),C(this,oi).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await he(this,Kt,fx).call(this,e);r&&s.stop(),C(this,oi).delete(n)}else for(const[n,{started:r,subscriber:s}]of C(this,oi))r&&s.stop(),C(this,oi).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return C(this,cw)}destroy(){this.removeAllListeners();for(const e of C(this,Ia).keys())this._clearTimeout(e);L(this,cw,!0)}get paused(){return C(this,ai)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(L(this,ju,-1),C(this,ai)!=null){if(C(this,ai)==!!e)return;ye(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),L(this,ai,!!e);for(const n of C(this,Ia).values())n.timer&&clearTimeout(n.timer),n.time=b2()-n.time}resume(){if(C(this,ai)!=null){this._forEachSubscriber(e=>e.resume()),L(this,ai,null);for(const e of C(this,Ia).values()){let n=e.time;n<0&&(n=0),e.time=b2(),setTimeout(e.func,n)}}}}oi=new WeakMap,Oh=new WeakMap,ai=new WeakMap,cw=new WeakMap,zo=new WeakMap,lg=new WeakMap,kh=new WeakMap,ju=new WeakMap,W_=new WeakMap,Ia=new WeakMap,lw=new WeakMap,uw=new WeakMap,Kt=new WeakSet,Lo=async function(e){const n=C(this,uw).cacheTimeout;if(n<0)return await this._perform(e);const r=hx(e.method,e);let s=C(this,kh).get(r);return s||(s=this._perform(e),C(this,kh).set(r,s),setTimeout(()=>{C(this,kh).get(r)===s&&C(this,kh).delete(r)},n)),await s},M5=async function(e,n,r){ye(r<Mze,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=nN(e);try{return ke(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&u$(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&Ir(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Ri(s.to,this);let c;try{c=zze(Ir(i.data,4))}catch(d){ye(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}ye(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);ye(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Or([c.selector,Wze([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await he(this,Kt,M5).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},L5=async function(e){const{value:n}=await _i({network:this.getNetwork(),value:e});return n},eE=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await he(this,Kt,L5).call(this,he(this,Kt,Lo).call(this,Object.assign(e,{address:s,blockTag:i})))},U5=async function(e,n){if(rr(e,32))return await he(this,Kt,Lo).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await he(this,Kt,Lo).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},tE=async function(e,n){let r=await w2(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await w2({orphan:"drop-log",log:n[0]},this)),C(this,oi).get(r.tag)||null},fx=async function(e){const n=await w2(e,this),r=n.tag;let s=C(this,oi).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},C(this,oi).set(r,s)),s};function Bze(t,e){try{const n=$5(t,e);if(n)return VI(n)}catch{}return null}function $5(t,e){if(t==="0x")return null;try{const n=Zt(Ir(t,e,e+32)),r=Zt(Ir(t,n,n+32));return Ir(t,n+32,n+32+r)}catch{}return null}function OW(t){const e=is(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function Fze(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const jze=new Uint8Array([]);function Wze(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(jze),n+=32;for(let r=0;r<t.length;r++){const s=Jt(t[r]);e[r]=OW(n),e.push(OW(s.length)),e.push(Fze(s)),n+=32+Math.ceil(s.length/32)*32}return Or(e)}const kW="0x0000000000000000000000000000000000000000000000000000000000000000";function zze(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ye(d0(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Ir(t,0,32);ye(Ir(n,0,12)===Ir(kW,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Ir(n,12);try{const r=[],s=Zt(Ir(t,32,64)),i=Zt(Ir(t,s,s+32)),o=Ir(t,s+32);for(let a=0;a<i;a++){const c=Bze(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{ye(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=$5(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ye(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ye(Ir(t,100,128)===Ir(kW,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Ir(t,96,100);try{const r=$5(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ye(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function ep(t,e){if(t.provider)return t.provider;ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function DW(t,e){let n=nN(e);if(n.to!=null&&(n.to=Ri(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Ri(r,t)]).then(([s,i])=>(Z(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await _i(n)}class Hze{constructor(e){te(this,"provider");vt(this,{provider:e||null})}async getNonce(e){return ep(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await DW(this,e)}async populateTransaction(e){const n=ep(this,"populateTransaction"),r=await DW(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Je(r.chainId);Z(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Z(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();ye(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ye(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await _i(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await ep(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return ep(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return ep(this,"call").call(await this.populateCall(e))}async resolveName(e){return await ep(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=ep(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=YI.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){ye(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function Gze(t){return JSON.parse(JSON.stringify(t))}var Ei,Al,ug,Dh,dg,dw,kf,B5,F5;class Ine{constructor(e){Q(this,kf);Q(this,Ei);Q(this,Al);Q(this,ug);Q(this,Dh);Q(this,dg);Q(this,dw);L(this,Ei,e),L(this,Al,null),L(this,ug,he(this,kf,B5).bind(this)),L(this,Dh,!1),L(this,dg,null),L(this,dw,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){C(this,Dh)||(L(this,Dh,!0),he(this,kf,B5).call(this,-2))}stop(){C(this,Dh)&&(L(this,Dh,!1),L(this,dw,!0),he(this,kf,F5).call(this),C(this,Ei).off("block",C(this,ug)))}pause(e){e&&he(this,kf,F5).call(this),C(this,Ei).off("block",C(this,ug))}resume(){this.start()}}Ei=new WeakMap,Al=new WeakMap,ug=new WeakMap,Dh=new WeakMap,dg=new WeakMap,dw=new WeakMap,kf=new WeakSet,B5=async function(e){try{C(this,Al)==null&&L(this,Al,this._subscribe(C(this,Ei)));let n=null;try{n=await C(this,Al)}catch(i){if(!js(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){L(this,Al,null),C(this,Ei)._recoverSubscriber(this,this._recover(C(this,Ei)));return}const r=await C(this,Ei).getNetwork();if(C(this,dg)||L(this,dg,r),C(this,dg).chainId!==r.chainId)throw new Error("chaid changed");if(C(this,dw))return;const s=await C(this,Ei).send("eth_getFilterChanges",[n]);await this._emitResults(C(this,Ei),s)}catch(n){console.log("@TODO",n)}C(this,Ei).once("block",C(this,ug))},F5=function(){const e=C(this,Al);e&&(L(this,Al,null),e.then(n=>{C(this,Ei).destroyed||C(this,Ei).send("eth_uninstallFilter",[n])}))};var hg;class qze extends Ine{constructor(n,r){super(n);Q(this,hg);L(this,hg,Gze(r))}_recover(n){return new T$(n,C(this,hg))}async _subscribe(n){return await n.send("eth_newFilter",[C(this,hg)])}async _emitResults(n,r){for(const s of r)n.emit(C(this,hg),n._wrapLog(s,n._network))}}hg=new WeakMap;class Vze extends Ine{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const Kze="bigint,boolean,function,number,string,symbol".split(/,/g);function px(t){if(t==null||Kze.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(px);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function Yze(t){return new Promise(e=>{setTimeout(e,t)})}function gy(t){return t&&t.toLowerCase()}function MW(t){return t&&typeof t.pollingInterval=="number"}const Nne={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class v2 extends Hze{constructor(n,r){super(n);te(this,"address");r=xn(r),vt(this,{address:r})}connect(n){ye(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=px(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await Ri(o,this.provider);Z(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Ri(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(js(u,"CANCELLED")||js(u,"BAD_DATA")||js(u,"NETWORK_ERROR")||js(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(js(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",fr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=px(n);if(r.from){const i=await Ri(r.from,this.provider);Z(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?id(n):n;return await this.provider.send("personal_sign",[ke(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=px(s),o=await tN.resolveNames(n,r,i,async a=>{const c=await Ri(a);return Z(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(tN.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?id(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),ke(r)])}}var fg,hw,Wu,Sl,Ac,Na,oo,z_,j5;class Qze extends $ze{constructor(n,r){super(n,r);Q(this,z_);Q(this,fg);Q(this,hw);Q(this,Wu);Q(this,Sl);Q(this,Ac);Q(this,Na);Q(this,oo);L(this,hw,1),L(this,fg,Object.assign({},Nne,r||{})),L(this,Wu,[]),L(this,Sl,null),L(this,Na,null),L(this,oo,null);{let i=null;const o=new Promise(a=>{i=a});L(this,Ac,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Z(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&L(this,Na,Bl.from(n))):s&&(Z(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),L(this,Na,s))}_getOption(n){return C(this,fg)[n]}get _network(){return ye(C(this,Na),"network is not available yet","NETWORK_ERROR"),C(this,Na)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Je(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(C(this,Na))return C(this,Na)}else return n;return C(this,oo)?await C(this,oo):this.ready?(L(this,oo,(async()=>{try{const r=Bl.from(Je(await this.send("eth_chainId",[])));return L(this,oo,null),r}catch(r){throw L(this,oo,null),r}})()),await C(this,oo)):(L(this,oo,(async()=>{const r={id:Id(this,hw)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],L(this,oo,null)}catch(i){throw L(this,oo,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Bl.from(Je(s.result));throw this.getRpcError(r,s)})()),await C(this,oo))}_start(){C(this,Ac)==null||C(this,Ac).resolve==null||(C(this,Ac).resolve(),L(this,Ac,null),(async()=>{for(;C(this,Na)==null&&!this.destroyed;)try{L(this,Na,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",fr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await Yze(1e3)}he(this,z_,j5).call(this)})())}async _waitUntilReady(){if(C(this,Ac)!=null)return await C(this,Ac).promise}_getSubscriber(n){return n.type==="pending"?new Vze(this):n.type==="event"?this._getOption("polling")?new T$(this,n.filter):new qze(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new xne("orphan"):super._getSubscriber(n)}get ready(){return C(this,Ac)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Nc(Je(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=ke(n[s]))}),n.accessList&&(r.accessList=xm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Rte(s);return{address:i.address,nonce:Nc(i.nonce),chainId:Nc(i.chainId),yParity:Nc(i.signature.yParity),r:Nc(i.signature.r),s:Nc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[gy(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[gy(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[gy(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[gy(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(gy):n.filter.address=gy(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return fr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return fr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=W5(i),l=__.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(Zze(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return fr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return fr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return fr("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return fr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return fr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?fr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):fr("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(fr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=Id(this,hw)._++,i=new Promise((o,a)=>{C(this,Wu).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return he(this,z_,j5).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new v2(this,i[n])}const{accounts:s}=await _i({network:this.getNetwork(),accounts:r});n=xn(n);for(const i of s)if(xn(i)===n)return new v2(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new v2(this,r))}destroy(){C(this,Sl)&&(clearTimeout(C(this,Sl)),L(this,Sl,null));for(const{payload:n,reject:r}of C(this,Wu))r(fr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));L(this,Wu,[]),super.destroy()}}fg=new WeakMap,hw=new WeakMap,Wu=new WeakMap,Sl=new WeakMap,Ac=new WeakMap,Na=new WeakMap,oo=new WeakMap,z_=new WeakSet,j5=function(){if(C(this,Sl))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");L(this,Sl,setTimeout(()=>{L(this,Sl,null);const r=C(this,Wu);for(L(this,Wu,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==C(this,fg).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>C(this,fg).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(fr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=fr("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Mh;class Jze extends Qze{constructor(n,r){super(n,r);Q(this,Mh);let s=this._getOption("pollingInterval");s==null&&(s=Nne.pollingInterval),L(this,Mh,s)}_getSubscriber(n){const r=super._getSubscriber(n);return MW(r)&&(r.pollingInterval=C(this,Mh)),r}get pollingInterval(){return C(this,Mh)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");L(this,Mh,n),this._forEachSubscriber(r=>{MW(r)&&(r.pollingInterval=C(this,Mh))})}}Mh=new WeakMap;function W5(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&rr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=W5(t[e]);if(n)return n}return null}if(typeof t=="string")try{return W5(JSON.parse(t))}catch{}return null}function z5(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)z5(t[n],e);if(typeof t=="string")try{return z5(JSON.parse(t),e)}catch{}}}function Zze(t){const e=[];return z5(t,e),e}var fw,pw;const Cp=class Cp extends Jze{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Z(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);Q(this,fw);Q(this,pw);L(this,pw,null),s&&s.providerInfo&&L(this,pw,s.providerInfo),L(this,fw,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return C(this,pw)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){Z(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await C(this,fw).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await C(this,fw).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new Cp(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new Cp(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof Cp)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new Cp(p,void 0,{providerInfo:g}))}else a(fr("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new Cp(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};fw=new WeakMap,pw=new WeakMap;let H5=Cp;const mr={NATIVE_DMT:{symbol:"DMT",name:"Native DMT",address:"0x0000000000000000000000000000000000000000",decimals:18,logo:"/images/dmt-logo.png",isNative:!0,color:"#FF6B35"},DMT:{symbol:"DMT",name:"DMT Token",address:"0x754cDAd6f5821077d6915004Be2cE05f93d176f8",decimals:18,logo:"/images/dmt-logo.png",isNative:!1,color:"#FF6B35"},GOLD:{symbol:"GOLD",name:"GOLD",address:"0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D",decimals:18,logo:"/images/gold-logo.png",isNative:!1,color:"#FFD700"},LAWB:{symbol:"LAWB",name:"LAWB",address:"0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F",decimals:6,logo:"/images/lawb-logo.png",isNative:!1,color:"#8B4513"},MOSS:{symbol:"MOSS",name:"MOSS",address:"0xeA240b96A9621e67159c59941B9d588eb290ef09",decimals:18,logo:"/images/moss-logo.png",isNative:!1,color:"#00FF00"}},LW={testnet:{chess:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"},mainnet:{chess:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"}},zh={testnet:{chainId:1992},mainnet:{chainId:1996}},R$=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],ks=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"minWager",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxWager",type:"uint256"}],name:"TokenLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"DMT_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"GOLD_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LAWB_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MOSS_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"wagerToken",type:"address"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"createGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"},{internalType:"address",name:"wagerToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_house",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"supportedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMaxWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMinWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minWager",type:"uint256"},{internalType:"uint256",name:"maxWager",type:"uint256"}],name:"updateTokenLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawTokens",outputs:[],stateMutability:"nonpayable",type:"function"}];function Tne(t,e){return mr[t].address}function Rne(t,e){const n=Qa(),r=mr[t],s=r.isNative||!1,i=n===zh.mainnet.chainId,o=n===zh.testnet.chainId;(t==="DMT"||t==="NATIVE_DMT")&&console.log(`[CHAIN DEBUG] useTokenBalance for ${t}:`,{chainId:n,expectedMainnet:zh.mainnet.chainId,expectedTestnet:zh.testnet.chainId,isOnSankoMainnet:i,isOnSankoTestnet:o,address:!!e,isNative:s});const a=!!e&&i,{data:c,isLoading:l,error:u}=sAe({address:e,query:{enabled:a&&s}}),{data:d,isLoading:h,error:f}=IE({address:r.address,abi:R$,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:a&&!s}}),p=s?c==null?void 0:c.value:d,g=s?l:h,w=s?u:f;return console.log(`[TOKEN BALANCE QUERY] ${t}:`,{queryEnabled:a,address:!!e,isOnSankoMainnet:i,isNative:s,contractCall:a?s?"native balance":`balanceOf(${e})`:"DISABLED"}),console.log(`[TOKEN BALANCE] ${t}:`,{tokenAddress:r.address,userAddress:e,chainId:n,isOnSankoMainnet:i,isOnSankoTestnet:o,isNative:s,balance:p==null?void 0:p.toString(),balanceFormatted:p?Number(p)/Math.pow(10,r.decimals):0,isLoading:g,error:w==null?void 0:w.message,errorDetails:w,queryEnabled:!!e&&i}),{balance:p?Number(p)/Math.pow(10,r.decimals):0,balanceWei:p||BigInt(0),isLoading:g,error:w,isOnSankoMainnet:i,isOnSankoTestnet:o}}function Xze(t,e,n){const r=Qa(),s=Tne(t),i=r===zh.mainnet.chainId,o=r===zh.testnet.chainId,{data:a,isLoading:c,error:l}=IE({address:s,abi:R$,functionName:"allowance",args:n&&e?[n,e]:void 0,query:{enabled:!!n&&!!e&&i}});return{allowance:a||BigInt(0),allowanceFormatted:a?Number(a)/Math.pow(10,mr[t].decimals):0,isLoading:c,error:l,isOnSankoMainnet:i,isOnSankoTestnet:o}}function eHe(){const{writeContract:t,data:e,isPending:n,error:r}=zv(),{isLoading:s}=Wv({hash:e});return Qa(),{approve:(o,a,c)=>{const l=Tne(o);t({address:l,abi:R$,functionName:"approve",args:[a,c]})},isPending:n||s,error:r,hash:e}}const tHe=({selectedToken:t,onTokenSelect:e,wagerAmount:n,onWagerChange:r,disabled:s=!1})=>{const{address:i}=xb(),{balance:o,isOnSankoMainnet:a,isOnSankoTestnet:c}=Rne(t,i),[l,u]=D.useState(!1),d=f=>{e(f),u(!1)},h=f=>{const p=mr[f];return p.isNative?`${p.symbol} (Native)`:p.symbol};return m.jsxs("div",{style:{marginBottom:"10px"},children:[m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[m.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Token:"}),m.jsxs("div",{style:{position:"relative"},children:[m.jsxs("button",{type:"button",onClick:()=>u(!l),disabled:s,style:{padding:"5px 10px",border:"2px outset #fff",background:"#c0c0c0",cursor:s?"not-allowed":"pointer",minWidth:"120px",textAlign:"left"},children:[h(t),m.jsx("span",{style:{float:"right"},children:"▼"})]}),l&&!s&&m.jsx("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",zIndex:10,minWidth:"120px"},children:Object.entries(mr).map(([f,p])=>m.jsx("div",{onClick:()=>d(f),style:{padding:"5px 10px",cursor:"pointer",borderBottom:"1px solid #eee",fontSize:"12px"},onMouseEnter:g=>g.currentTarget.style.background="#f0f0f0",onMouseLeave:g=>g.currentTarget.style.background="#fff",children:h(f)},f))})]})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[m.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Amount:"}),m.jsx("input",{type:"number",value:n,onChange:f=>r(Number(f.target.value)),disabled:s,min:"0.1",max:"1000",step:"0.1",style:{padding:"5px",border:"2px inset #fff",background:"#fff",width:"100px"}}),m.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["Balance: ",a?`${o.toFixed(2)} ${mr[t].symbol}`:"Connect to Sanko Mainnet",mr[t].isNative&&m.jsx("span",{style:{color:"#FF6B35",fontWeight:"bold"},children:" (Native)"})]})]}),c&&m.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:"⚠️ Switch to Sanko Mainnet - tokens are not available on testnet"}),!a&&!c&&m.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:"⚠️ Switch to Sanko Mainnet to see token balances"}),n>o&&a&&m.jsxs("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:["Insufficient balance. You have ",o.toFixed(2)," ",mr[t].symbol,mr[t].isNative&&m.jsx("span",{children:" (Native)"})]}),o===0&&a&&m.jsxs("div",{style:{color:"#ffa500",fontSize:"12px",marginTop:"5px"},children:["💡 You have 0 ",mr[t].symbol,mr[t].isNative&&m.jsx("span",{children:" (Native)"}),". Get tokens from ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ffa500"},children:"Sanko Bridge"})]})]})},nHe=t=>t===zh.testnet.chainId?LW.testnet.chess:LW.mainnet.chess,cn={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},E2={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},wu=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],rHe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function sHe(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function UW(t,e){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const n=new H5(window.ethereum);return await new p0(e,ks,n).playerToGame(t)}catch(n){return console.error("Error fetching invite code from contract:",n),null}}const Pne=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{var J$;const{address:r,isConnected:s,chainId:i}=xb(),o=nHe(i||zh.mainnet.chainId),[a,c]=D.useState(""),[l,u]=D.useState(""),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),{writeContract:v,isPending:A,data:_}=zv(),{writeContract:I,isPending:x,data:N,error:S}=zv(),{writeContract:O,isPending:P,data:F}=zv(),{writeContract:q,isPending:B,data:T}=zv(),{approve:R,isPending:$,error:k,hash:M}=eHe(),z=dAe(),{isLoading:K}=Wv({hash:_}),{isLoading:ne,data:le}=Wv({hash:N}),{isLoading:oe}=Wv({hash:F}),{isLoading:ae}=Wv({hash:T});D.useEffect(()=>{T&&!ae&&(console.log("[REFUND] Transaction completed successfully"),xt("Game refunded successfully! Your wager has been returned."),(async()=>{try{let W=Ie;if(!W&&r)try{const j=await UW(r,o);j&&j!=="0x000000000000"&&(W=j)}catch(j){console.error("[REFUND] Error getting invite code from contract:",j)}W?(console.log("[REFUND] Updating Firebase for cancelled game:",W),await ri.updateGame(W,{game_state:"cancelled",red_player:"0x0000000000000000000000000000000000000000"}),console.log("[REFUND] Firebase updated successfully")):console.warn("[REFUND] Could not determine invite code for Firebase update")}catch(W){console.error("[REFUND] Error updating Firebase after refund:",W)}ur(cn.LOBBY),De(""),Kr(null),Xe(0,"refund completed"),sr(null),Um()})())},[T,ae]);const{data:ue}=IE({address:o,abi:ks,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:Ze}=IE({address:o,abi:ks,functionName:"games",args:ue?[ue]:void 0,query:{enabled:!!ue&&ue!=="0x000000000000"}}),[Ie,De]=D.useState(""),[st,Ot]=D.useState(!1),{data:tn,error:X,isLoading:ce}=IE({address:o,abi:ks,functionName:"games",args:Ie?[Ie]:void 0,query:{enabled:!!Ie&&Ie!=="0x000000000000"&&st}});D.useEffect(()=>{console.log("[LOBBY_CONTRACT] lobbyGameContractData changed:",tn),console.log("[LOBBY_CONTRACT] lobbyGameContractError:",X),console.log("[LOBBY_CONTRACT] lobbyGameContractLoading:",ce),console.log("[LOBBY_CONTRACT] isJoiningFromLobby:",st),console.log("[LOBBY_CONTRACT] inviteCode:",Ie),console.log("[LOBBY_CONTRACT] Contract read enabled:",!!Ie&&Ie!=="0x000000000000"&&st)},[tn,X,ce,st,Ie]);const Ee=()=>(console.log("[HELPER] getCurrentContractGameData called"),console.log("[HELPER] isJoiningFromLobby:",st),console.log("[HELPER] lobbyGameContractData:",tn),console.log("[HELPER] contractGameData:",Ze),st&&tn?(console.log("[HELPER] Returning lobbyGameContractData"),tn):(console.log("[HELPER] Returning contractGameData"),Ze)),ge=(U,W)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${U}" from ${W}`),Ie&&!U&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${Ie}" to "${U}" from ${W}`),De(U)},ve=(U,W="NATIVE_DMT")=>{var V;const j=((V=mr[W])==null?void 0:V.decimals)||18;return parseFloat(U.toString())/Math.pow(10,j)},Xe=(U,W)=>{console.log(`[WAGER_DEBUG] Setting wager to ${U} TDMT from ${W}`),Tm!==U&&console.log(`[WAGER_DEBUG] Wager changed from ${Tm} to ${U} TDMT`),wR(U)},[ot,yt]=D.useState("moves"),St=async()=>{if(!Ie||!r){alert("No game to refund or wallet not connected");return}try{console.log("[REFUND] Attempting to refund game:",Ie);const U=await ri.getGame(Ie);if(!U||U.blue_player!==r){alert("Only the game creator can refund the game");return}if(U.red_player&&U.red_player!=="0x0000000000000000000000000000000000000000"){alert("Cannot refund game after opponent has joined");return}await q({address:o,abi:ks,functionName:"cancelGame",args:[Ie]}),console.log("[REFUND] Cancel game transaction submitted")}catch(U){console.error("[REFUND] Error refunding game:",U),alert("Failed to refund game. Please try again.")}},qn=async()=>{if(!r||!je){console.error("[CLAIM] Missing required data for claiming winnings");return}let U=Ie;if(!U&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const W=await UW(r,o);W&&W!=="0x000000000000"&&(U=W,console.log("[CLAIM] Retrieved invite code from contract:",U))}catch(W){console.error("[CLAIM] Error getting invite code from contract:",W)}}if(!U){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{w(!0),console.log("[CLAIM] Claiming winnings for game:",U,"Player:",je,"Address:",r);const W=await ri.getGame(U);if(!W){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",W);let j=null;W.winner&&(W.blue_player||W.red_player)&&(j=W.winner==="blue"?W.blue_player:W.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:W.winner,winnerAddress:j}));const V=Ee();if(!j&&V)if(W.winner&&(W.winner==="blue"||W.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let me,Se,pt,ut,rt,Ut;if(Array.isArray(V))[me,Se,pt,ut,rt,Ut]=V;else{console.error("[CLAIM] Unexpected contract data format:",V),alert("Failed to verify winner. Please try again.");return}j=W.winner==="blue"?me:Se,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:W.winner,winnerAddress:j,player1:me,player2:Se})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",V);let me,Se,pt,ut,rt,Ut;if(Array.isArray(V))[me,Se,pt,ut,rt,Ut]=V;else{console.error("[CLAIM] Unexpected contract data format:",V),alert("Failed to verify winner. Please try again.");return}const hr=String(ut);if(hr.startsWith("0x"))j=hr;else if(hr==="blue"||hr==="red")j=hr==="blue"?me:Se;else if(hr==="1"||hr==="2")j=hr==="1"?me:Se;else{console.error("[CLAIM] Unknown winner format:",ut,"as string:",hr),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:ut,winnerAddress:j,player1:me,player2:Se,winnerType:typeof ut,winnerValue:ut,address:r,addressType:typeof r})}if(!j){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:j,address:r,playerColor:je,winnerAddressType:typeof j,addressType:typeof r,addressesMatch:j===r,winnerAddressLength:j==null?void 0:j.length,addressLength:r==null?void 0:r.length}),j!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:j,address:r,playerColor:je}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM] ✅ Winner verification passed! Proceeding with contract call...");let se=U;if(!se&&V){console.log("[CLAIM] Using invite code from contract data as fallback");let me,Se,pt,ut,rt,Ut;if(Array.isArray(V))[me,Se,pt,ut,rt,Ut]=V,se=rt;else{console.error("[CLAIM] Unexpected contract data format for invite code:",V),alert("Failed to get invite code. Please try again.");return}}if(!se||typeof se!="string"){console.error("[CLAIM] Invalid invite code format:",se),alert("Invalid invite code format.");return}let Ae=se;if(se.startsWith("0x")||(Ae="0x"+se),Ae.length!==14){console.error("[CLAIM] Invalid invite code length for contract claim:",Ae,"length:",Ae.length),alert("Invalid invite code length for contract claim.");return}console.log("[CLAIM] Formatted invite code:",Ae),console.log("[CLAIM] Original invite code:",se),console.log("[CLAIM] Winner address:",j),console.log("[CLAIM] Calling contract with:",{inviteCode:se,winner:j,functionName:"endGame",inviteCodeSource:W.invite_code?"Firebase":"Contract",inviteCodeLength:se.length,inviteCodeValid:se.startsWith("0x")&&se.length===14,winnerAddressValid:j.startsWith("0x")&&j.length===42}),console.log("[CLAIM] About to call writeEndGame with:",{address:o,functionName:"endGame",args:[Ae,j],abiLength:ks.length,chainId:i,isConnected:s});try{O({address:o,abi:ks,functionName:"endGame",args:[Ae,j]}),console.log("[CLAIM] Contract call initiated successfully"),P?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:P,endGameHash:F})}catch(me){console.error("[CLAIM] Error calling writeEndGame:",me),alert("Failed to initiate contract call. Please try again.");return}}catch(W){console.error("[CLAIM] Error claiming winnings:",W),alert("Failed to claim winnings. Please try again.")}finally{w(!1)}},[kt,Wr]=D.useState(wu),[Dt,Vn]=D.useState("blue"),[Mr,Wi]=D.useState(null),[tc,jf]=D.useState([]),[Nm,yR]=D.useState([]),[Bne,xt]=D.useState("Waiting for opponent..."),[zr,ur]=D.useState(cn.LOBBY),[Fb,iu]=D.useState(!1),[je,Kr]=D.useState(null),[jb,sr]=D.useState(null),[Tm,wR]=D.useState(0),[Wb,q1]=D.useState([]),[V1,To]=D.useState(!1),[Rm,gi]=D.useState(!1),[zi,xs]=D.useState(null),[Nn,nc]=D.useState(null),[zb,Pm]=D.useState(!1),[ou,bR]=D.useState(""),[rc,Wf]=D.useState(0),[Is,vR]=D.useState("NATIVE_DMT"),[Om,km]=D.useState("NATIVE_DMT");D.useEffect(()=>{console.log("[JOIN_TRANSACTION] joinGameHash changed:",N),console.log("[JOIN_TRANSACTION] isJoiningGameContract:",x),console.log("[JOIN_TRANSACTION] joinGameError:",S),console.log("[JOIN_TRANSACTION] Full join transaction state:",{joinGameHash:N,isJoiningGameContract:x,joinGameError:S,pendingJoinGameData:Nn})},[N,x,S,Nn]),D.useEffect(()=>{!$&&zb&&Ie&&st&&!N&&!x&&(console.log("[AUTO_JOIN] Token approval completed, attempting to auto-join"),console.log("[AUTO_JOIN] isApproving:",$),console.log("[AUTO_JOIN] waitingForApproval:",zb),console.log("[AUTO_JOIN] inviteCode:",Ie),console.log("[AUTO_JOIN] isJoiningFromLobby:",st),console.log("[AUTO_JOIN] joinGameHash:",N),console.log("[AUTO_JOIN] isJoiningGameContract:",x),Pm(!1),console.log("[AUTO_JOIN] Calling joinGame automatically"),z$(Ie))},[$,zb,Ie,st,N,x]),Rne(Is,r);const K1=BigInt(Math.floor(rc*Math.pow(10,mr[Is].decimals))),{allowance:Y1}=Xze(Is,r,o),[U$]=D.useState(!0),[Sd,Q1]=D.useState(!1),[xd,J1]=D.useState(null),[$$,Z1]=D.useState(0),[sc,X1]=D.useState(Date.now()),eA=36e5,[tA,B$]=D.useState(!1),[Dm,nA]=D.useState(null),[Mm,Hb]=D.useState(!1),[Lm,Jc]=D.useState(null),[Hi,Zc]=D.useState(!1),[Gb,Xc]=D.useState(!1),[G,Y]=D.useState("moves"),[re,ie]=D.useState(!0),[ee,_e]=D.useState(null),Me=async()=>{if(!Ie||!je)return;console.log("[TIMEOUT] Handling timeout for game:",Ie);const U=Dt==="blue"?"red":"blue",W=Ee(),j=U==="blue"?W==null?void 0:W[0]:W==null?void 0:W[1];j&&(console.log("[TIMEOUT] Ending game with winner:",j),O({address:o,abi:ks,functionName:"endGame",args:[Ie,j]}),xt(`Game ended due to timeout. ${U==="red"?"Red":"Blue"} wins!`),ur(cn.FINISHED))},tt=D.useCallback(()=>{xd&&clearTimeout(xd);const U=setTimeout(()=>{console.log("[TIMEOUT] 60-minute timeout reached, ending game"),Me()},eA);J1(U),X1(Date.now())},[Me]),Nt=D.useCallback(()=>{xd&&(clearTimeout(xd),J1(null))},[]),[zt,dr]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[En,qb]=D.useState([]),[Vb,Fne]=D.useState(null),zf=D.useRef(null),Hf=D.useRef(null),F$=D.useRef(r);D.useEffect(()=>{F$.current=r},[r]),D.useEffect(()=>{N&&!ne&&Nn&&(console.log("[CONTRACT] Join transaction confirmed:",N),r===Nn.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),Kr("red"),sr(Nn.gameData.blue_player)),ri.updateGame(Nn.inviteCode,{...Nn.gameData,red_player:Nn.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),ur(cn.ACTIVE),Xc(!0),xt("Game started!"),De(Nn.inviteCode),Gf(Nn.inviteCode),console.log("[CONTRACT] Clearing pending join data"),nc(null),Ot(!1)}).catch(U=>{console.error("Error updating game in database:",U),xt("Joined game on contract but failed to update database"),nc(null)}))},[N,ne,Nn,r]),D.useEffect(()=>{F&&!oe&&(console.log("[CLAIM] End game transaction confirmed:",F),xt("Winnings claimed successfully! Transaction hash: "+F.slice(0,10)+"..."),w(!1))},[F,oe]),D.useEffect(()=>{P===!1&&g&&!F&&(console.log("[CLAIM] End game transaction rejected or failed"),xt("Claim transaction was rejected. Please try again."),w(!1))},[P,g,F]),D.useEffect(()=>{if(_&&!K){console.log("[CONTRACT] Create game transaction confirmed:",_);let U=zi;if(!U&&z){console.log("[CREATE DEBUG] No pendingGameData, attempting to reconstruct game data");const W=(zi==null?void 0:zi.invite_code)||_;console.log("[CREATE DEBUG] Using invite code for contract read:",W),z.readContract({address:o,abi:ks,functionName:"games",args:[W]}).then(j=>{var V;if(j&&Array.isArray(j)&&j[0]!=="0x0000000000000000000000000000000000000000"){const se={invite_code:W,game_title:`Chess Game ${W.slice(-6)}`,bet_amount:((V=j[2])==null?void 0:V.toString())||"0",bet_token:j[1]||"",blue_player:j[0]||"",red_player:"0x0000000000000000000000000000000000000000",game_state:"waiting",board:{positions:Kb(wu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE DEBUG] Reconstructed game data:",se),ri.createGame(se).then(()=>{console.log("[FIREBASE] Game created successfully with reconstructed data"),De(se.invite_code),Kr("blue"),Xe(rc,"create game success"),ur(cn.WAITING),xt("Waiting for opponent to join..."),Gf(se.invite_code),setTimeout(()=>{Um()},1e3),xs(null),To(!1),gi(!1)}).catch(Ae=>{console.error("[FIREBASE] Error creating game with reconstructed data:",Ae),xt("Transaction confirmed but failed to create game in database"),xs(null),To(!1),gi(!1)})}}).catch(j=>{console.error("[CREATE DEBUG] Error reconstructing game data:",j),xt("Transaction confirmed but game data not available"),xs(null),To(!1),gi(!1)});return}U?ri.createGame(U).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),De(U.invite_code),Kr("blue"),Xe(rc,"create game success"),ur(cn.WAITING),xt("Waiting for opponent to join..."),Gf(U.invite_code),setTimeout(()=>{Um()},1e3),xs(null),To(!1),gi(!1)}).catch(W=>{console.error("[FIREBASE] Error creating game after transaction:",W),xt("Transaction confirmed but failed to create game in database"),xs(null),To(!1),gi(!1)}):(console.log("[CREATE DEBUG] No game data available for Firebase creation"),xt("Transaction confirmed but game data not available"),xs(null),To(!1),gi(!1))}},[_,K,zi,rc]),D.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",zi)},[zi]),D.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",Nn),Nn){const U=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),nc(null)},3e4);return()=>clearTimeout(U)}},[Nn]),D.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",A),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",zi),console.log("[CREATE REJECTION DEBUG] - createGameHash:",_),console.log("[CREATE REJECTION DEBUG] - condition:",A===!1&&zi&&!_),A===!1&&zi&&!_&&(console.log("[CONTRACT] Create game transaction rejected or failed"),xt("Transaction was rejected. Please try again."),xs(null),To(!1),gi(!1))},[A,zi,_]),D.useEffect(()=>{x===!1&&Nn&&!N&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",x),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",Nn),console.log("[CONTRACT] Rejection details - joinGameHash:",N),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",ue),xt("Transaction was rejected. Please try again."),ge("","join transaction rejection"),Kr(null),Xe(0,"join transaction rejection"),sr(null),ur(cn.LOBBY),xt(""),nc(null),Ot(!1))},[x,Nn,N,r,ue]),D.useEffect(()=>{if(r&&ue!==void 0&&!y){const U=Ee();(ue!=="0x000000000000"&&U||ue==="0x000000000000")&&jne()}},[r,ue,Ze,tn,y]),D.useEffect(()=>{b(!1)},[r]),D.useEffect(()=>{zr===cn.ACTIVE&&je?(console.log("[TIMEOUT] Starting timeout timer for active game"),tt()):Nt()},[zr,je]),D.useEffect(()=>{zr===cn.ACTIVE&&Nm.length>0&&(console.log("[TIMEOUT] Move made, resetting timeout timer"),tt())},[Nm,zr]),D.useEffect(()=>{if(zr===cn.ACTIVE&&xd){const U=setInterval(()=>{const W=Date.now()-sc,j=Math.max(0,eA-W);Z1(Math.ceil(j/1e3))},1e3);return()=>clearInterval(U)}},[zr,xd,sc]),D.useEffect(()=>()=>{Hne(),Nt(),zf.current&&zf.current(),Hf.current&&clearTimeout(Hf.current)},[]);const jne=async()=>{if(r)try{console.log("[GAME_STATE] Checking for active games for player:",r);const U=Ee();if(ue&&ue!=="0x000000000000"&&!U){console.log("[GAME_STATE] Waiting for contract data...");return}if(ue&&ue!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",ue),U)){let V,se,Ae,me,Se,pt;if(Array.isArray(U))[V,se,Ae,me,Se,pt]=U;else{console.error("[GAME_STATE] Unexpected contract data format:",U);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:V,player2:se,isActive:Ae,winner:me,inviteCode:Se,wagerAmount:pt}),!Se){console.error("[GAME_STATE] Invalid invite code:",Se);return}const ut=V===r?"blue":"red",rt=V===r?se:V;console.log("[GAME_STATE] Player is",ut,"opponent is",rt);const Ut=await ri.getGame(Se);if(Ut){if(console.log("[GAME_STATE] Found game in Firebase:",Ut),De(Se),Kr(ut),Xe(ve(Ut.bet_amount,Ut.bet_token||"DMT"),"checkPlayerGameState Firebase"),km(Ut.bet_token||"NATIVE_DMT"),sr(rt),Ut.game_state==="waiting")ur(cn.WAITING),xt("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(Ut.game_state==="active"||Ut.game_state==="test_update"){if(ur(cn.ACTIVE),Xc(!0),xt("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",Ut.game_state,")"),Ut.board){const hr=Ut.board;Wr($m(hr)),Vn(Ut.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",Ut.game_state,"- treating as active"),ur(cn.ACTIVE),Xc(!0),xt("Game in progress"),Ut.board){const hr=Ut.board;Wr($m(hr)),Vn(Ut.current_player||"blue")}Gf(Se),b(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",zr),console.log("[GAME_STATE] Game state from Firebase:",Ut.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase - waiting for transaction confirmation"),console.log("[GAME_STATE] This prevents ghost games from failed transactions");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const j=(await ri.getActiveGames()).filter(V=>V.chain==="sanko"&&(V.blue_player===r||V.red_player===r)&&["waiting","active"].includes(V.game_state));if(j&&j.length>0){const V=j[0];if(console.log("[GAME_STATE] Found active game in Firebase:",V),De(V.invite_code),Kr(V.blue_player===r?"blue":"red"),Xe(ve(V.bet_amount,V.bet_token||"DMT"),"checkPlayerGameState fallback"),km(V.bet_token||"NATIVE_DMT"),sr(V.blue_player===r?V.red_player:V.blue_player),V.game_state==="waiting")ur(cn.WAITING),xt("Waiting for opponent to join...");else if(V.game_state==="active"||V.game_state==="test_update"){if(ur(cn.ACTIVE),Xc(!0),xt("Game in progress"),V.board){const se=V.board;Wr($m(se)),Vn(V.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",V.game_state,"- treating as active"),ur(cn.ACTIVE),xt("Game in progress"),V.board){const se=V.board;Wr($m(se)),Vn(V.current_player||"blue")}Gf(V.invite_code),b(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),ur(cn.LOBBY),To(!1),b(!0)}catch(U){console.error("[GAME_STATE] Error in checkPlayerGameState:",U)}},rA=async()=>{try{await Lee();const U=await Mee(20);qb(U)}catch(U){console.error("Error loading leaderboard:",U)}},j$=async U=>{if(console.log("[SCORE] updateScore called with:",U,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Xg(r)),await qI(r,U)?console.log("[SCORE] Successfully updated score for:",Xg(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(W){console.error("[SCORE] Error updating score:",W)}},W$=async(U,W,j)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:U,bluePlayer:W,redPlayer:j}),!W||!j){console.error("[SCORE] Missing player addresses from contract");return}await bje(U,W,j)?(console.log("[SCORE] Successfully updated both players scores"),await rA()):console.error("[SCORE] Failed to update both players scores")}catch(V){console.error("[SCORE] Error updating both players scores:",V)}},Um=async()=>{try{console.log("[LOBBY] Loading open games...");const U=await ri.getOpenGames();console.log("[LOBBY] Loaded open games:",U),console.log("[LOBBY] Number of open games:",U.length),q1(U)}catch(U){console.error("[LOBBY] Error loading open games:",U)}},Wne=async()=>{if(!r)return!1;try{return mr[Is].isNative?(console.log("[APPROVAL] Native token detected, skipping approval"),!0):Y1<K1?(console.log("[APPROVAL] Token approval needed, calling approveToken"),new Promise(W=>{let j=0;const V=60,se=()=>{if(j++,k){console.error("[APPROVAL] User denied approval or error occurred:",k),xt("Token approval was cancelled. Please try again."),W(!1);return}if(M&&!$){console.log("[APPROVAL] Token approval successful, proceeding with game creation"),W(!0);return}if(j>=V){console.error("[APPROVAL] Timeout waiting for approval result"),xt("Approval timeout. Please try again."),W(!1);return}setTimeout(se,500)};R(Is,o,K1),se()})):(console.log("[APPROVAL] Token already approved, proceeding with game creation"),!0)}catch(U){return console.error("[APPROVAL] Error checking approval:",U),xt("Failed to check token approval. Please try again."),!1}},zne=async()=>{if(!(!r||rc<=0)){gi(!0);try{if(!await Wne()){gi(!1);return}const W=sHe(),j=mr[Is].address,V=BigInt(Math.floor(rc*Math.pow(10,mr[Is].decimals)));if(z)try{const Se=await z.readContract({address:o,abi:ks,functionName:"tokenMinWager",args:[j]}),pt=await z.readContract({address:o,abi:ks,functionName:"tokenMaxWager",args:[j]});if(console.log("[VALIDATION] Contract limits for",Is,":",{minWager:Se.toString(),maxWager:pt.toString(),userWager:V.toString()}),V<Se){const ut=Number(Se)/Math.pow(10,mr[Is].decimals);xt(`Wager too low. Minimum for ${Is}: ${ut}`),gi(!1);return}if(V>pt){const ut=Number(pt)/Math.pow(10,mr[Is].decimals);xt(`Wager too high. Maximum for ${Is}: ${ut}`),gi(!1);return}console.log("[VALIDATION] Wager amount is within contract limits")}catch(Se){console.warn("[VALIDATION] Could not validate wager limits, proceeding anyway:",Se)}const se={invite_code:W,game_title:`Chess Game ${W.slice(-6)}`,bet_amount:V.toString(),bet_token:Is,blue_player:r,game_state:"waiting",board:{positions:Kb(wu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString(),invisiKingEnabled:Sd};console.log("[CREATE] Game data prepared:",se),console.log("[CREATE] Calling contract with args:",[W,j,V]);let Ae=300000n;try{if(z){const Se=await z.estimateContractGas({address:o,abi:ks,functionName:"createGame",args:[W,j,V],account:r});Ae=Se,console.log("[CREATE] Estimated gas:",Se.toString())}}catch(Se){console.warn("[CREATE] Gas estimation failed, using default:",Se)}let me;mr[Is].isNative?(console.log("[CREATE] Native DMT transaction - adding value:",V.toString()),me=v({address:o,abi:ks,functionName:"createGame",args:[W,j,V],gas:Ae,value:V})):me=v({address:o,abi:ks,functionName:"createGame",args:[W,j,V],gas:Ae}),console.log("[CREATE] Contract call initiated, result:",me),console.log("[CREATE] createGameHash after writeCreateGame:",_),console.log("[CREATE] Pending game data being set:",se),xs(se),xt("Creating game... Please confirm transaction in your wallet.")}catch(U){console.error("[CREATE] Error creating game:",U),xt("Failed to create game. Please try again.")}finally{gi(!1)}}},z$=async U=>{var W;if(r)try{const j=await ri.getGame(U);if(!j||j.game_state!=="waiting"){xt("Game not found or already full");return}const V=ve(j.bet_amount,j.bet_token||"NATIVE_DMT");if(De(U),Ot(!0),Kr("red"),Xe(V,"joinGame"),sr(j.blue_player),r===j.blue_player){console.error("[JOIN] Player cannot join their own game"),xt("You cannot join your own game");return}if(ue&&ue!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",ue),xt("You already have an active game");return}const se=(W=mr[j.bet_token])==null?void 0:W.address;if(se&&se!=="0x0000000000000000000000000000000000000000"&&z)try{const Se=await z.readContract({address:se,abi:[{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],type:"function"}],functionName:"allowance",args:[r,o]}),pt=BigInt(j.bet_amount);if(Se<pt){xt(`Approving ${j.bet_token} spending...`),Pm(!0);try{R(j.bet_token,o,pt);return}catch(ut){console.error("[JOIN] Error approving token:",ut),xt(`Failed to approve ${j.bet_token}. Please try again.`),Pm(!1);return}}}catch(me){console.error("[JOIN] Error checking token allowance:",me)}xt("Joining game... Please confirm transaction in your wallet.");let Ae=200000n;try{if(z){const me=await z.estimateContractGas({address:o,abi:ks,functionName:"joinGame",args:[U],account:r});Ae=me,console.log("[JOIN] Estimated gas:",me.toString())}}catch(me){console.warn("[JOIN] Gas estimation failed, using default:",me)}try{const me=mr[j.bet_token];if(me==null?void 0:me.isNative){console.log("[JOIN] Native DMT game - adding value:",j.bet_amount);const pt=I({address:o,abi:ks,functionName:"joinGame",args:[U],gas:Ae,value:BigInt(j.bet_amount)})}else{const pt=I({address:o,abi:ks,functionName:"joinGame",args:[U],gas:Ae})}nc({inviteCode:U,gameData:j,address:r})}catch(me){console.error("[JOIN] Error calling writeJoinGame:",me),xt("Failed to send transaction. Please try again.")}}catch(j){console.error("[JOIN] Error joining game:",j),xt("Failed to join game. Please try again."),ge("","join game error"),Kr(null),Xe(0,"join game error"),sr(null)}},[Xqe,eVe]=D.useState(null),[tVe,nVe]=D.useState(""),[rVe,sVe]=D.useState(!0),Hne=()=>{console.log("[FIREBASE] No fallback to stop")},Gf=U=>{zf.current&&zf.current();const W=ri.subscribeToGame(U,j=>{const V=F$.current;if(!j)return;if(j.invisiKingEnabled!==void 0&&Q1(j.invisiKingEnabled),Nn&&V===Nn.address)j.game_state==="active"&&nc(null),j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"&&sr(j.blue_player===V?j.red_player:j.blue_player);else if(V&&j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"){const me=V.toLowerCase()===j.blue_player.toLowerCase(),Se=V.toLowerCase()===j.red_player.toLowerCase();me&&je!=="blue"?(Kr("blue"),sr(j.red_player)):Se&&je!=="red"?(Kr("red"),sr(j.blue_player)):!me&&!Se&&je!==null&&(Kr(null),sr(null))}else{if(!(je&&(je==="blue"||je==="red"))){if(V){const me=Ee();if(me&&Array.isArray(me)){const[Se,pt]=me;if(Se&&pt){const ut=Se.toLowerCase()===V.toLowerCase()?"blue":"red",rt=Se.toLowerCase()===V.toLowerCase()?pt:Se;Kr(ut),sr(rt)}}}}j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"&&sr(j.blue_player===V?j.red_player:j.blue_player)}if(j.board&&!Fb){const me=$m(j.board);Wr(me),console.log("[FIREBASE] Board updated from Firebase")}else j.board&&Fb&&console.log("[FIREBASE] Skipping board update due to local move in progress - promotion or local move active");j.current_player&&Vn(j.current_player),j.game_state==="active"?(ur(cn.ACTIVE),Xc(!0),xt("Game in progress")):j.game_state==="finished"?(ur(cn.FINISHED),xt("Game finished")):j.game_state==="waiting"&&(ur(cn.WAITING),xt("Waiting for opponent to join..."));let se=0;const Ae=j.bet_token||"NATIVE_DMT";if(j.bet_amount&&!isNaN(parseFloat(j.bet_amount)))se=ve(j.bet_amount,Ae),Xe(se,"Firebase subscription"),km(Ae);else{const me=Ee();me&&Array.isArray(me)&&me[5]&&(se=ve(me[5].toString(),Ae),Xe(se,"Firebase subscription"),km(Ae))}});return zf.current=W,W};D.useEffect(()=>{if(Ie){const U=Gf(Ie);return()=>{U&&typeof U=="function"&&U()}}},[Ie]),D.useEffect(()=>{const U=Ee();if(U&&!je&&r){console.log("[FALLBACK] Setting playerColor from contract data");let W,j,V,se,Ae,me;if(Array.isArray(U))[W,j,V,se,Ae,me]=U;else{console.error("[FALLBACK] Unexpected contract data format:",U);return}const Se=W===r?"blue":"red",pt=W===r?j:W;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",W),console.log("[FALLBACK] - player2 (red):",j),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Se),console.log("[FALLBACK] - opponent:",pt),console.log("[FALLBACK] - inviteCode from contract:",Ae),Kr(Se),sr(pt),!Ie&&Ae&&(console.log("[FALLBACK] Setting missing inviteCode:",Ae),De(Ae)),Ie&&(console.log("[AUTO-FIX] Checking Firebase data for inviteCode:",Ie),ri.getGame(Ie).then(ut=>{console.log("[AUTO-FIX] Current Firebase data:",ut),console.log("[AUTO-FIX] Contract data:",U);const rt=!ut||!ut.blue_player||ut.red_player==="0x0000000000000000000000000000000000000000"||ut.game_state!=="active";if(console.log("[AUTO-FIX] Needs update:",rt),rt&&U&&Array.isArray(U)){console.log("[AUTO-FIX] Updating Firebase with correct data...");const[Ut,hr]=U;console.log("[AUTO-FIX] Updating Firebase with player1 (blue):",Ut),console.log("[AUTO-FIX] Updating Firebase with player2 (red):",hr),ri.updateGame(Ie,{blue_player:Ut,red_player:hr,game_state:"active",current_player:"blue"}).then(()=>{console.log("[AUTO-FIX] Firebase updated with correct player data")}).catch(_R=>{console.error("[AUTO-FIX] Error updating Firebase:",_R)})}ut&&ut.game_state==="active"&&Nn&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),nc(null))}).catch(ut=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",ut)}))}},[Ze,tn,je,r,Ie]),D.useEffect(()=>{if(le&&Nn){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",le.transactionHash),console.log("[RECEIPT] Pending data:",Nn);const{inviteCode:U,gameData:W,address:j}=Nn;ri.updateGame(U,{red_player:j,blue_player:W.blue_player,bet_amount:W.bet_amount,game_state:"active",last_move:null,board:{positions:Kb(wu),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),xt("Game started! You are the red player."),ur(cn.ACTIVE),Xc(!0),nc(null)}).catch(V=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",V),xt("Game joined but failed to update game state. Please refresh.")})}},[le,Nn]),D.useEffect(()=>{S&&(console.error("[ERROR] Join transaction failed:",S),xt(`Failed to join game: ${S.message||"Transaction rejected"}`),ge("","join game error effect"),Kr(null),Xe(0,"join game error effect"),sr(null),nc(null))},[S]);const Kb=U=>{const W={};return U.forEach((j,V)=>{j.forEach((se,Ae)=>{W[`${V}_${Ae}`]=se})}),W},$m=U=>{if(!U||!U.positions)return console.warn("[BOARD] No board data available, using initial board"),wu;if(console.log("[BOARD] Attempting to reconstruct board from:",U),console.log("[BOARD] Positions type:",typeof U.positions),console.log("[BOARD] Positions is array:",Array.isArray(U.positions)),console.log("[BOARD] Positions value:",U.positions),typeof U.positions=="object"&&!Array.isArray(U.positions)){const W=U.positions,j=U.rows||8,V=U.cols||8,se=Array(j).fill(null).map(()=>Array(V).fill(null));for(let Ae=0;Ae<j;Ae++)for(let me=0;me<V;me++){const Se=`${Ae}_${me}`;se[Ae][me]=W[Se]||null}return console.log("[BOARD] Reconstructed from flat structure:",se),se}return Array.isArray(U.positions)?(console.log("[BOARD] Found array structure, length:",U.positions.length),U.positions.length===8?U.positions.every((j,V)=>{const se=Array.isArray(j)&&j.length===8;return se||console.warn(`[BOARD] Row ${V} is invalid:`,j,"Type:",typeof j,"Length:",j==null?void 0:j.length),se})?(console.log("[BOARD] Using legacy array structure"),U.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),wu):(console.warn("[BOARD] Array has wrong length:",U.positions.length,"expected 8"),wu)):(console.warn("[BOARD] Unknown board structure, using initial board:",U),wu)},sA=U=>U?`${U.slice(0,6)}...${U.slice(-4)}`:"Unknown",Tn=U=>U&&U===U.toUpperCase()?"red":"blue",H$=(U,W)=>U>=0&&U<8&&W>=0&&W<8,G$=(U,W)=>`${"abcdefgh"[W]}${"87654321"[U]}`,Gne=(U,W,j,V)=>{const se=G$(U.row,U.col),Ae=G$(W.row,W.col);return`${se}-${Ae}`},Yb=(U,W)=>{const j=W==="red"?"K":"k";let V=-1,se=-1;for(let me=0;me<8;me++){for(let Se=0;Se<8;Se++)if(U[me][Se]===j){V=me,se=Se;break}if(V!==-1)break}return V===-1?!1:qne(V,se,W==="red"?"blue":"red",U)},qne=(U,W,j,V)=>{if(!V||!Array.isArray(V)||V.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",V),!1;for(let se=0;se<8;se++){if(!V[se]||!Array.isArray(V[se])||V[se].length!==8)return console.warn("[SAFETY] Invalid board row structure:",V[se]),!1;for(let Ae=0;Ae<8;Ae++){const me=V[se][Ae];if(me&&Tn(me)===j&&Bm(me,se,Ae,U,W,!1,j,V,!0))return!0}}return!1},Vne=(U,W,j,V,se,Ae=kt)=>{const me=Ae[U][W];if(!me)return!1;const Se=Ae.map(pt=>[...pt]);return Se[j][V]=me,Se[U][W]=null,Yb(Se,se)},Kne=(U,W,j,V,se,Ae)=>{const me=U==="blue"?-1:1,Se=U==="blue"?6:1;if(!H$(V,se)||U==="blue"&&V>=W||U==="red"&&V<=W)return!1;if(j===se&&V===W+me)return Ae[V][se]===null;if(j===se&&W===Se&&V===W+2*me)return Ae[W+me][j]===null&&Ae[V][se]===null;if(Math.abs(j-se)===1&&V===W+me){const pt=Ae[V][se];if(pt!==null&&Tn(pt)!==U)return!0;if(pt===null&&zt.lastPawnDoubleMove){const{row:ut,col:rt}=zt.lastPawnDoubleMove;if(ut===W&&rt===se){const Ut=Ae[W][se];if(Ut&&Ut.toLowerCase()==="p"&&Tn(Ut)!==U)return!0}}}return!1},q$=(U,W,j,V,se)=>U===j||W===V,Yne=(U,W,j,V)=>{const se=Math.abs(U-j),Ae=Math.abs(W-V);return se===2&&Ae===1||se===1&&Ae===2},V$=(U,W,j,V,se)=>Math.abs(U-j)===Math.abs(W-V),Qne=(U,W,j,V,se)=>q$(U,W,j,V)||V$(U,W,j,V),Jne=(U,W,j,V,se)=>{const Ae=Math.abs(W-V),me=Math.abs(j-se);if(Ae<=1&&me<=1)return!0;if(Ae===0&&me===2){if(U==="blue"&&!zt.blueKingMoved){if(se===6&&!zt.blueRooksMove.right||se===2&&!zt.blueRooksMove.left)return!0}else if(U==="red"&&!zt.redKingMoved&&(se===6&&!zt.redRooksMove.right||se===2&&!zt.redRooksMove.left))return!0}return!1},ER=(U,W,j,V,se)=>{const Ae=U===j?0:(j-U)/Math.abs(j-U),me=W===V?0:(V-W)/Math.abs(V-W);let Se=U+Ae,pt=W+me;for(;Se!==j||pt!==V;){if(se[Se][pt]!==null)return!1;Se+=Ae,pt+=me}return!0},Bm=(U,W,j,V,se,Ae=!0,me=Tn(U),Se=kt,pt=!1)=>{if(!U||!H$(V,se))return!1;const ut=Se[V][se];if(ut&&Tn(ut)===me)return!1;let rt=!1;switch(U.toUpperCase()){case"P":rt=Kne(me,W,j,V,se,Se);break;case"R":rt=q$(W,j,V,se)&&ER(W,j,V,se,Se);break;case"N":rt=Yne(W,j,V,se);break;case"B":rt=V$(W,j,V,se)&&ER(W,j,V,se,Se);break;case"Q":rt=Qne(W,j,V,se)&&ER(W,j,V,se,Se);break;case"K":rt=Jne(me,W,j,V,se);break}return!(!rt||Ae&&Vne(W,j,V,se,me,Se))},CR=(U,W=kt,j=Dt)=>{const V=[],se=W[U.row][U.col];if(!se||Tn(se)!==j)return V;const Ae=se.toLowerCase();if(Ae==="p"){const me=j==="blue"?-1:1,Se=j==="blue"?6:1,pt=U.row+me;if(pt>=0&&pt<8&&Bm(se,U.row,U.col,pt,U.col,!0,j,W,!0)&&V.push({row:pt,col:U.col}),U.row===Se){const ut=U.row+2*me;ut>=0&&ut<8&&Bm(se,U.row,U.col,ut,U.col,!0,j,W,!0)&&V.push({row:ut,col:U.col})}for(const ut of[-1,1]){const rt=U.col+ut,Ut=U.row+me;rt>=0&&rt<8&&Ut>=0&&Ut<8&&Bm(se,U.row,U.col,Ut,rt,!0,j,W,!0)&&V.push({row:Ut,col:rt})}}else if(Ae==="n"){const me=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Se,pt]of me){const ut=U.row+Se,rt=U.col+pt;ut>=0&&ut<8&&rt>=0&&rt<8&&Bm(se,U.row,U.col,ut,rt,!0,j,W,!0)&&V.push({row:ut,col:rt})}}else for(let me=0;me<8;me++)for(let Se=0;Se<8;Se++)Bm(se,U.row,U.col,me,Se,!0,j,W,!0)&&V.push({row:me,col:Se});return V},Zne=(U,W=kt)=>{if(!Yb(W,U))return!1;for(let j=0;j<8;j++)for(let V=0;V<8;V++){const se=W[j][V];if(se&&Tn(se)===U&&CR({row:j,col:V},W,U).length>0)return!1}return!0},Xne=(U,W=kt)=>{if(Yb(W,U))return!1;for(let j=0;j<8;j++)for(let V=0;V<8;V++){const se=W[j][V];if(se&&Tn(se)===U&&CR({row:j,col:V},W,U).length>0)return!1}return!0},K$=(U,W)=>{if(console.log("[CLICK] Square clicked:",{row:U,col:W}),console.log("[CLICK] Game mode:",zr,"Player color:",je),console.log("[CLICK] Current player:",Dt,"Player color:",je),zr!==cn.ACTIVE||!je){console.log("[CLICK] Game not active or no player color");return}const j=kt[U][W],V=j?Tn(j):null;if(console.log("[CLICK] Piece at square:",j,"Piece color:",V),Dt!==je){console.log("[CLICK] Not player's turn. Current:",Dt,"Player:",je);return}if(j&&V===je){Wi({row:U,col:W});const se=CR({row:U,col:W});jf(se);return}if(Mr&&tc.some(se=>se.row===U&&se.col===W)){ere(Mr,{row:U,col:W}),Wi(null),jf([]);return}Wi(null),jf([])},ere=async(U,W)=>{if(console.log("[MAKE_MOVE] Starting move:",{from:U,to:W,playerColor:je,currentPlayer:Dt}),!je||Dt!==je){console.log("[MAKE_MOVE] Not player's turn or no player color");return}const j=kt[U.row][U.col];if(!j){console.log("[MAKE_MOVE] No piece at source position");return}if(console.log("[PAWN_PROMOTION_CHECK]",{piece:j,pieceLower:j.toLowerCase(),isPawn:j.toLowerCase()==="p",pieceColor:Tn(j),toRow:W.row,bluePromotion:Tn(j)==="blue"&&W.row===0,redPromotion:Tn(j)==="red"&&W.row===7,shouldPromote:j.toLowerCase()==="p"&&(Tn(j)==="blue"&&W.row===0||Tn(j)==="red"&&W.row===7)}),j.toLowerCase()==="p"&&(Tn(j)==="blue"&&W.row===0||Tn(j)==="red"&&W.row===7)){console.log("[PAWN_PROMOTION] Triggering promotion dialog"),console.log("[PAWN_PROMOTION] Setting promotion state:",{from:U,to:W}),Jc({from:U,to:W}),Hb(!0);return}await Y$(U,W)},Y$=async(U,W,j="q")=>{if(console.log("[EXECUTE_MOVE] Starting execution:",{from:U,to:W,promotionPiece:j,playerColor:je,currentPlayer:Dt}),!je||Dt!==je){console.log("[EXECUTE_MOVE] Not player's turn or no player color");return}const V=kt[U.row][U.col];if(!V){console.log("[EXECUTE_MOVE] No piece at source position");return}const se=kt[W.row][W.col],Ae=se!==null;if(console.log("[MOVE] Executing move:",{from:{row:U.row,col:U.col,piece:V},to:{row:W.row,col:W.col,capturedPiece:se},player:Dt,isCapture:Ae,moveType:V.toUpperCase()==="K"?"king":V.toUpperCase()==="R"?"rook":"other"}),qf(Ae?"capture":"move"),Ae){_e({row:W.row,col:W.col,show:!0}),setTimeout(()=>{Q$(U,W,j),_e(null)},500);return}Q$(U,W,j)},Q$=async(U,W,j="q")=>{if(!je||Dt!==je)return;const V=kt[U.row][U.col];if(!V)return;iu(!0),console.log("[MOVE_ANIMATION] Starting move execution:",{from:{row:U.row,col:U.col,piece:V},to:{row:W.row,col:W.col,capturedPiece:kt[W.row][W.col]},currentBoard:kt.map(rt=>[...rt])});const se=kt.map(rt=>[...rt]);console.log("[MOVE_ANIMATION] Before special moves handling"),nre(se,U,W,V,j),console.log("[MOVE_ANIMATION] After special moves handling"),se[U.row][U.col]=null;const Ae=V.toLowerCase()==="p"&&(Tn(V)==="blue"&&W.row===0||Tn(V)==="red"&&W.row===7);Ae||(se[W.row][W.col]=V),console.log("[MOVE_ANIMATION] Move completed:",{from:{row:U.row,col:U.col},to:{row:W.row,col:W.col},piece:V,isPromotion:Ae,finalBoardState:se.map(rt=>[...rt])}),rre(U,W,V);const me=Gne(U,W);yR(rt=>{const Ut=[...rt,me];return console.log("[MOVE HISTORY UPDATED]",Ut),Ut});const Se=Dt==="blue"?"red":"blue";Yb(se,Se)&&qf("check");let pt="active",ut=null;if(Zne(Se,se)){pt="finished",ut=Dt,xt(`${Dt==="red"?"Red":"Blue"} wins by checkmate!`),qf(Dt===je?"victory":"loser"),tre();const rt=Ee();rt&&rt.length>=2?await W$(Dt,rt[0],rt[1]):(await j$(Dt===je?"win":"loss"),await rA()),ut===je&&setTimeout(()=>{qn()},2e3)}else if(Xne(Se,se)){const rt=Dt;pt="finished",xt(`${rt==="red"?"Red":"Blue"} wins by stalemate!`),qf(rt===je?"victory":"loser");const Ut=Ee();Ut&&Ut.length>=2?await W$(rt,Ut[0],Ut[1]):(await j$(rt===je?"win":"loss"),await rA()),rt===je&&setTimeout(()=>{qn()},2e3)}try{if(!Ie){console.error("[BUG] inviteCode is missing when trying to update game!"),xt("Game code missing. Please reload or rejoin the game.");return}const rt=Kb(se);await ri.updateGame(Ie,{board:{positions:rt,rows:8,cols:8},current_player:Se,game_state:pt,winner:ut,last_move:{from:U,to:W}})}catch(rt){console.error("[DATABASE] Error updating game:",rt)}Wr(se),Vn(Se),Fne({from:U,to:W}),Hb(!1),Jc(null),setTimeout(()=>{console.log("[MOVE_ANIMATION] Resetting local move flag"),iu(!1)},2e3)},tre=()=>{Zc(!0);for(let U=0;U<50;U++)setTimeout(()=>{const W=document.createElement("div");W.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(W),setTimeout(()=>W.remove(),300)},U*100);Hf.current&&clearTimeout(Hf.current),Hf.current=setTimeout(()=>{Zc(!1)},5e3)},nre=(U,W,j,V,se="q")=>{if(console.log("[SPECIAL_MOVES] Checking for special moves:",{piece:V,from:W,to:j,isKing:V.toLowerCase()==="k",colDifference:Math.abs(W.col-j.col)}),console.log("[SPECIAL_MOVES_PROMOTION_CHECK]",{piece:V,isPawn:V.toLowerCase()==="p",pieceColor:Tn(V),toRow:j.row,promotionPiece:se,shouldPromote:V.toLowerCase()==="p"&&(Tn(V)==="blue"&&j.row===0||Tn(V)==="red"&&j.row===7)}),V.toLowerCase()==="p"&&(Tn(V)==="blue"&&j.row===0||Tn(V)==="red"&&j.row===7)){const Ae=Tn(V)==="blue"?se.toLowerCase():se.toUpperCase();console.log("[SPECIAL_MOVES_PROMOTION] Promoting pawn to:",Ae),console.log("[SPECIAL_MOVES_PROMOTION] Before promotion - board state:",U.map(me=>[...me])),U[j.row][j.col]=Ae,console.log("[SPECIAL_MOVES_PROMOTION] After promotion - board state:",U.map(me=>[...me]))}if(V.toLowerCase()==="k"&&Math.abs(W.col-j.col)===2){if(console.log("[SPECIAL_MOVES] Castling detected!",{fromCol:W.col,toCol:j.col,castlingType:j.col===6?"kingside":"queenside"}),j.col===6)console.log("[SPECIAL_MOVES] Executing kingside castling"),U[W.row][7]=null,U[W.row][5]=Tn(V)==="blue"?"r":"R";else if(j.col===2){console.log("[SPECIAL_MOVES] Executing queenside castling");const Ae=U[W.row][3];U[W.row][0]=null,U[W.row][3]=Tn(V)==="blue"?"r":"R",Ae&&Ae.toLowerCase()==="q"&&(U[W.row][4]=Ae)}}else console.log("[SPECIAL_MOVES] No castling detected");V.toLowerCase()==="p"&&Math.abs(W.col-j.col)===1&&U[j.row][j.col]===null&&zt.lastPawnDoubleMove&&zt.lastPawnDoubleMove.row===W.row&&zt.lastPawnDoubleMove.col===j.col&&(U[W.row][j.col]=null)},rre=(U,W,j)=>{const V={...zt};j.toLowerCase()==="k"?Tn(j)==="blue"?V.blueKingMoved=!0:V.redKingMoved=!0:j.toLowerCase()==="r"&&(Tn(j)==="blue"?(U.col===0&&(V.blueRooksMove.left=!0),U.col===7&&(V.blueRooksMove.right=!0)):(U.col===0&&(V.redRooksMove.left=!0),U.col===7&&(V.redRooksMove.right=!0))),j.toLowerCase()==="p"&&Math.abs(U.row-W.row)===2?V.lastPawnDoubleMove={row:W.row,col:W.col}:V.lastPawnDoubleMove=null,dr(V)},qf=U=>{if(!re)return;let W="";switch(U){case"move":W="/images/move.mp3";break;case"capture":W="/images/capture.mp3";break;case"check":W="/images/play.mp3";break;case"checkmate":W="/images/victory.mp3";break;case"victory":W="/images/victory.mp3";break;case"loser":W="/images/loser.mp3";break;case"upgrade":W="/images/upgrade.mp3";break;default:W="/images/move.mp3"}try{const j=new Audio(W);j.volume=.3,j.play().catch(V=>console.warn("Audio play failed:",V))}catch(j){console.warn("Sound play failed:",j)}},sre=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(U){console.error("Error checking stuck games:",U)}},ire=(U,W,j)=>{j.preventDefault(),K$(U,W)},ore=U=>{U.preventDefault()},are=(U,W)=>{if(!kt||!Array.isArray(kt)||kt.length!==8||!kt[U]||!Array.isArray(kt[U])||kt[U].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:U,col:W,board:kt}),m.jsx("div",{className:"square error",children:m.jsx("div",{className:"error-indicator",children:"!"})},`${U}-${W}`);const j=kt[U][W],V=(Mr==null?void 0:Mr.row)===U&&(Mr==null?void 0:Mr.col)===W,se=tc.some(pt=>pt.row===U&&pt.col===W),Ae=Vb&&(Vb.from.row===U&&Vb.from.col===W||Vb.to.row===U&&Vb.to.col===W),me=j&&j.toUpperCase()==="K"&&Yb(kt,Tn(j)),Se=Sd&&zr===cn.ACTIVE&&j&&(je==="blue"&&j==="K"||je==="red"&&j==="k");return m.jsxs("div",{className:`square ${V?"selected":""} ${se?"legal-move":""} ${Ae?"last-move":""} ${me?"square-in-check":""}`,onClick:()=>K$(U,W),onTouchStart:pt=>ire(U,W,pt),onTouchMove:ore,children:[j&&!Se&&m.jsx("div",{className:"piece",style:{backgroundImage:E2[j]?`url(${E2[j]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),se&&m.jsx("div",{className:"legal-move-indicator"})]},`${U}-${W}`)},cre=()=>{if(!Mm||!Lm)return null;const U=Dt==="blue"?["q","r","b","n"]:["Q","R","B","N"];return console.log("[PROMOTION_DIALOG] Rendering promotion dialog:",{showPromotion:Mm,promotionMove:Lm,pieces:U,currentPlayer:Dt}),m.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:U.map(W=>m.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION_DIALOG] Piece selected:",W),Y$(Lm.from,Lm.to,W),Hb(!1),Jc(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:m.jsx("img",{src:E2[W],alt:W,style:{width:"40px",height:"40px"}})},W))})]})})},lre=()=>m.jsxs("div",{className:"piece-gallery",children:[m.jsx("h3",{children:"Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:rHe.map(U=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>{nA(Dm===U.key?null:U.key)},children:[m.jsx("img",{src:U.img,alt:U.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:U.name}),Dm===U.key&&m.jsx("div",{className:"piece-gallery-desc",children:U.desc})]},U.key))})]});return D.useEffect(()=>{rA(),Um(),sre();const U=setInterval(Um,3e4);return()=>{clearInterval(U),zf.current&&zf.current(),Hf.current&&clearTimeout(Hf.current)}},[]),m.jsxs("div",{className:`chess-game${Gb?" game-active":""}`,children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[(zr===cn.ACTIVE||zr===cn.FINISHED)&&Gb&&m.jsxs("div",{className:"left-sidebar",children:[G==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:En.slice(0,8).map((U,W)=>m.jsxs("tr",{children:[m.jsx("td",{children:W+1}),m.jsx("td",{children:sA(U.username)}),m.jsx("td",{children:U.points})]},U.username))})]})})]}),G==="moves"&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:Nm.slice().reverse().map((U,W)=>m.jsx("li",{children:U},Nm.length-1-W))})]}),G==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:lre()})]}),m.jsxs("div",{className:"center-area",children:[zr===cn.LOBBY&&m.jsxs("div",{className:"chess-multiplayer-lobby",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",textAlign:"center",padding:"20px",marginTop:"20px"},children:[m.jsx("h2",{style:{color:"#ff0000",fontFamily:"Impact, Charcoal, sans-serif",fontSize:"48px",fontWeight:"bold",textShadow:"0 0 10px #ff0000, 0 0 20px #ff0000, 0 0 30px #ff0000",marginBottom:"10px",textTransform:"uppercase"},children:"PVP CHESS LAWBY"}),s?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"status-bar",style:{marginBottom:"20px",color:"#ff0000"},children:["Connected: ",sA(r)]}),m.jsxs("div",{className:"lobby-content",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[m.jsxs("div",{className:"actions",style:{order:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[m.jsx("button",{className:"create-btn",onClick:()=>To(!0),disabled:V1||Rm,style:{color:"#ff0000"},children:"Create New Game"}),m.jsx("button",{onClick:Um,style:{background:"rgba(255, 0, 0, 0.1)",border:"2px solid #ff0000",color:"#ff0000",padding:"8px 16px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🔄 Refresh Lobby"}),m.jsx("button",{onClick:()=>window.location.href="/chess",style:{background:"rgba(255, 0, 0, 0.1)",border:"2px solid #ff0000",color:"#ff0000",padding:"12px 24px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🏠 Back to Chess Home"})]}),V1&&m.jsxs("div",{className:"create-form",style:{order:2,marginBottom:"20px"},children:[m.jsx("h3",{children:"Create New Game"}),m.jsx(tHe,{selectedToken:Is,onTokenSelect:vR,wagerAmount:rc,onWagerChange:Wf,disabled:Rm}),m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:8,marginBottom:16},children:m.jsxs("label",{style:{color:"#ff0000",fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:[m.jsx("input",{type:"checkbox",checked:Sd,onChange:U=>Q1(U.target.checked),style:{width:"20px",height:"20px",accentColor:"#ff0000",cursor:"pointer"}}),m.jsx("span",{style:{textShadow:"0 0 6px #ff0000, 0 0 2px #ff0000"},children:"InvisiKing Mode"})]})}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"create-confirm-btn",onClick:zne,disabled:rc<=0||Rm,children:Rm?"Creating...":"Create Game"}),m.jsx("button",{className:"cancel-btn",onClick:()=>{To(!1),gi(!1)},children:"Cancel"})]})]}),m.jsxs("div",{className:"open-games",style:{order:3},children:[m.jsxs("h3",{style:{color:"#ff0000"},children:["Open Games (",Wb.length,")"]}),m.jsxs("div",{className:"games-list",style:{display:"flex",flexDirection:"column",gap:"10px"},children:[Wb.map(U=>(console.log("[RENDER LOBBY] Rendering game:",U),m.jsxs("div",{className:"game-item",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",padding:"15px",border:"2px solid #333",borderRadius:"5px"},children:[m.jsxs("div",{className:"game-info",style:{textAlign:"center"},children:[m.jsx("div",{className:"game-id",children:U.game_title||"Untitled Game"}),m.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat(U.bet_amount)/Math.pow(10,mr[U.bet_token||"DMT"].decimals)).toFixed(2)," ",U.bet_token||"DMT"]}),m.jsxs("div",{className:"title",children:["Created by: ",sA(U.blue_player)]}),U.invisiKingEnabled&&m.jsx("div",{className:"invisiKing-indicator",children:"invisiKing ✅"})]}),m.jsx("button",{className:"join-btn",onClick:()=>z$(U.invite_code),children:"Join Game"})]},U.invite_code))),Wb.length===0&&m.jsx("div",{className:"no-games",style:{color:"#ff0000"},children:"No open games available"})]})]})]})]}):m.jsx("div",{className:"wallet-notice",style:{marginBottom:"20px",color:"#ff0000"},children:"Please connect your wallet to play multiplayer chess"})]}),zr===cn.WAITING&&m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Waiting for Opponent"}),m.jsxs("div",{className:"game-code",children:["Invite Code: ",m.jsx("strong",{children:Ie})]}),m.jsx("div",{className:"game-info",children:m.jsxs("p",{children:["Wager: ",Tm.toFixed(0)," ",Om,Sd&&" • invisiKing ✅"]})}),m.jsxs("div",{className:"waiting-actions",children:[m.jsx("button",{onClick:St,disabled:B||ae,className:"refund-game-btn",children:B||ae?"⏳ Refunding...":"💰 Refund Game"}),m.jsx("p",{className:"refund-note",children:"You can refund your wager anytime before an opponent joins"})]})]}),(zr===cn.ACTIVE||zr===cn.FINISHED)&&Gb&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:Dt==="blue"?"current-blue":"current-red",children:[Dt==="blue"?"Blue":"Red"," to move"]}),m.jsxs("span",{className:"wager-display",children:["Wager: ",Tm.toFixed(((J$=mr[Om])==null?void 0:J$.decimals)||8)," ",Om]}),jb&&m.jsxs("span",{className:"opponent-info",children:["vs ",sA(jb)]})]}),m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",children:[Array.from({length:8},(U,W)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(j,V)=>are(W,V))},W)),ee&&ee.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${ee.row*12.5}%`,left:`${ee.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsxs("div",{className:"sidebar-toggle-group",children:[m.jsx("button",{className:G==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Y("moves"),children:"Moves"}),m.jsx("button",{className:G==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Y("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:G==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Y("gallery"),children:"Gallery"})]}),m.jsx("button",{onClick:()=>{ur(cn.LOBBY),Xc(!1)},children:"New Game"}),m.jsx("button",{onClick:()=>{ur(cn.LOBBY),Xc(!1)},children:"Menu"})]})]})]})]})]}),cre(),Hi&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:()=>ur(cn.LOBBY),children:"Back to Lobby"}),m.jsx("button",{onClick:()=>window.location.reload(),children:"New Game"})]})]})]})},wS={AI:"ai"},iHe=1996,bS={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},$W=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],oHe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],aHe=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},cHe=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},lHe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=xb(),i=Qa();kU();const{open:o}=U1(),[a,c]=D.useState(wS.AI),[l,u]=D.useState(()=>JSON.parse(JSON.stringify($W))),[d,h]=D.useState("blue"),[f,p]=D.useState(null),[g,w]=D.useState("active"),[y,b]=D.useState("hard"),[v,A]=D.useState("Connect wallet to play"),[_,I]=D.useState([]),[x,N]=D.useState([]),[S,O]=D.useState([]),[P,F]=D.useState(null),[q,B]=D.useState(!1),[T,R]=D.useState(!1),[$,k]=D.useState(null),[M,z]=D.useState(null),[K]=D.useState(""),[ne]=D.useState(.1),[le,oe]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ae=D.useRef(null),ue=D.useRef(!1),Ze=D.useRef(l),Ie=D.useRef(null),De=D.useRef(null),st=D.useRef(!1),Ot=D.useRef(!1),[tn,X]=D.useState(!1),[ce,Ee]=D.useState(!1),[ge,ve]=D.useState(!1),[Xe,ot]=D.useState(!1),{stockfishReady:yt}=aHe(),{getOpeningData:St}=cHe(),[qn,kt]=D.useState("loading"),[Wr,Dt]=D.useState(!1),[Vn,Mr]=D.useState([]),[Wi,tc]=D.useState(!1),[jf,Nm]=D.useState(()=>{const G=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],Y=Math.floor(Math.random()*G.length),re=G[Y];return console.log("[DEBUG] Initial random chessboard selected:",re,"(index:",Y,")"),re}),[yR,Bne]=D.useState(!0),[xt,zr]=D.useState(!1);D.useEffect(()=>{!s||!r?(A("Connect wallet to play"),B(!1),X(!1),o()):i!==iHe?(A("Switch to Sanko Mainnet to play"),B(!1),X(!1),o()):A("Select game mode")},[s,r,i,o]);const ur=()=>{const G=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],Y=Math.floor(Math.random()*G.length),re=G[Y];return console.log("[DEBUG] Random chessboard selected:",re,"(index:",Y,")"),re};D.useEffect(()=>{if(yt)kt("ready");else{const G=window.setTimeout(()=>{yt||(kt("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(G)}},[yt]),D.useEffect(()=>{Ze.current=l},[l]),D.useEffect(()=>(!ae.current&&typeof Worker<"u"&&(ae.current=new Worker("/aiWorker.js"),ae.current.onmessage=G=>{console.log("[DEBUG] AI worker response received:",G.data);const{move:Y,nodes:re}=G.data;Y&&ue.current&&g==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",Y),console.log("[DEBUG] AI searched",re,"nodes"),ue.current=!1,De.current&&(window.clearTimeout(De.current),De.current=null),Ie.current&&Ie.current(Y.from,Y.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},ae.current.onerror=G=>{console.error("[DEBUG] AI worker error:",G),A("AI worker error - using fallback mode"),ue.current=!1}),()=>{ae.current&&(ae.current.terminate(),ae.current=null),De.current&&(window.clearTimeout(De.current),De.current=null)}),[]),D.useEffect(()=>{Fb()},[]);const Fb=async()=>{try{await Lee();const G=await Mee(20);N(G),console.log("Leaderboard data loaded:",G)}catch(G){A("Failed to load leaderboard"),console.error("Leaderboard error:",G)}},iu=async G=>{if(console.log("[DEBUG] updateScore called with:",G),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Xg(r)),await qI(r,G)?(console.log("[DEBUG] Successfully updated score for:",Xg(r)),await Fb()):console.error("[DEBUG] Failed to update score")}catch(Y){console.error("[DEBUG] Error in updateScore:",Y)}},je=G=>G&&G===G.toUpperCase()?"red":"blue",Kr=(G,Y)=>G>=0&&G<8&&Y>=0&&Y<8,jb=(G,Y)=>`${String.fromCharCode(97+Y)}${8-G}`,sr=(G,Y)=>{const re=Y==="blue"?"k":"K";let ie=null;for(let Me=0;Me<8;Me++){for(let tt=0;tt<8;tt++)if(G[Me][tt]===re){ie={row:Me,col:tt};break}if(ie)break}if(!ie)return console.log(`King not found for ${Y}`),!1;const ee=Y==="blue"?"red":"blue",_e=Tm(ie.row,ie.col,ee,G);return console.log(`${Y} king at ${ie.row},${ie.col} under attack: ${_e}`),_e},Tm=(G,Y,re,ie)=>{for(let ee=0;ee<8;ee++)for(let _e=0;_e<8;_e++){const Me=ie[ee][_e];if(Me&&je(Me)===re&&xs(Me,ee,_e,G,Y,!1,re,ie,!0))return!0}return!1},wR=(G,Y,re,ie,ee,_e=l)=>{const Me=_e.map(Nt=>[...Nt]),tt=Me[G][Y];return Me[re][ie]=tt,Me[G][Y]=null,sr(Me,ee)},Wb=(G,Y,re,ie,ee,_e)=>{const Me=G==="blue"?-1:1,tt=G==="blue"?6:1;if(!Kr(ie,ee)||G==="blue"&&ie>=Y||G==="red"&&ie<=Y)return!1;const Nt=Math.abs(ie-Y),zt=Math.abs(ee-re);if((Nt===1&&zt===0||Nt===2&&zt===0&&Y===tt||Nt===1&&zt===1)&&Nt<=2&&zt<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:G,from:`${Y},${re}`,to:`${ie},${ee}`}),re===ee&&ie===Y+Me)return _e[ie][ee]===null;if(re===ee&&Y===tt&&ie===Y+2*Me)return _e[Y+Me][re]===null&&_e[ie][ee]===null;if(Math.abs(re-ee)===1&&ie===Y+Me){const En=_e[ie][ee];return En!==null&&je(En)!==G}if(Math.abs(re-ee)===1&&ie===Y+Me){const En=_e[Y][ee];if(En&&je(En)!==G&&En.toLowerCase()==="p"&&le.lastPawnDoubleMove&&le.lastPawnDoubleMove.row===Y&&le.lastPawnDoubleMove.col===ee)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},q1=(G,Y,re,ie,ee)=>G!==re&&Y!==ie?!1:zi(G,Y,re,ie,ee),V1=(G,Y,re,ie)=>{const ee=Math.abs(G-re),_e=Math.abs(Y-ie);return ee===2&&_e===1||ee===1&&_e===2},To=(G,Y,re,ie,ee)=>Math.abs(G-re)!==Math.abs(Y-ie)?!1:zi(G,Y,re,ie,ee),Rm=(G,Y,re,ie,ee)=>q1(G,Y,re,ie,ee)||To(G,Y,re,ie,ee),gi=(G,Y,re,ie,ee)=>{const _e=Math.abs(Y-ie),Me=Math.abs(re-ee);if(_e<=1&&Me<=1)return!0;if(_e===0&&Me===2){if(G==="blue"&&!le.blueKingMoved){if(ee===6&&!le.blueRooksMove.right||ee===2&&!le.blueRooksMove.left)return!0}else if(G==="red"&&!le.redKingMoved&&(ee===6&&!le.redRooksMove.right||ee===2&&!le.redRooksMove.left))return!0}return!1},zi=(G,Y,re,ie,ee)=>{const _e=G===re?0:(re-G)/Math.abs(re-G),Me=Y===ie?0:(ie-Y)/Math.abs(ie-Y);let tt=G+_e,Nt=Y+Me;for(;tt!==re||Nt!==ie;){if(ee[tt][Nt]!==null)return!1;tt+=_e,Nt+=Me}return!0},xs=(G,Y,re,ie,ee,_e=!0,Me=je(G),tt=l,Nt=!1)=>{if(!Kr(ie,ee))return Nt||console.log("[ILLEGAL MOVE] Out of board:",{piece:G,startRow:Y,startCol:re,endRow:ie,endCol:ee}),!1;const zt=tt[ie][ee];if(zt&&je(zt)===Me)return Nt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:G,startRow:Y,startCol:re,endRow:ie,endCol:ee}),!1;const dr=G.toLowerCase();let En=!1;switch(dr){case"p":En=Wb(Me,Y,re,ie,ee,tt);break;case"r":En=q1(Y,re,ie,ee,tt);break;case"n":En=V1(Y,re,ie,ee);break;case"b":En=To(Y,re,ie,ee,tt);break;case"q":En=Rm(Y,re,ie,ee,tt);break;case"k":En=gi(Me,Y,re,ie,ee);break}return En?En&&_e&&wR(Y,re,ie,ee,Me,tt)?(Nt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:G,startRow:Y,startCol:re,endRow:ie,endCol:ee}),!1):En:(Nt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:G,startRow:Y,startCol:re,endRow:ie,endCol:ee,playerColor:Me,pieceType:dr,targetPiece:tt[ie][ee],targetPieceColor:tt[ie][ee]?je(tt[ie][ee]):null}),!1)},Nn=(G,Y=l,re=d)=>{const ie=[],ee=Y[G.row][G.col];if(!ee||je(ee)!==re)return ie;const _e=ee.toLowerCase();if(_e==="p"){const Me=re==="blue"?-1:1,tt=re==="blue"?6:1,Nt=G.row+Me;if(Nt>=0&&Nt<8&&xs(ee,G.row,G.col,Nt,G.col,!0,re,Y,!0)&&ie.push({row:Nt,col:G.col}),G.row===tt){const zt=G.row+2*Me;zt>=0&&zt<8&&xs(ee,G.row,G.col,zt,G.col,!0,re,Y,!0)&&ie.push({row:zt,col:G.col})}for(const zt of[-1,1]){const dr=G.col+zt,En=G.row+Me;dr>=0&&dr<8&&En>=0&&En<8&&xs(ee,G.row,G.col,En,dr,!0,re,Y,!0)&&ie.push({row:En,col:dr})}}else if(_e==="n"){const Me=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[tt,Nt]of Me){const zt=G.row+tt,dr=G.col+Nt;zt>=0&&zt<8&&dr>=0&&dr<8&&xs(ee,G.row,G.col,zt,dr,!0,re,Y,!0)&&ie.push({row:zt,col:dr})}}else for(let Me=0;Me<8;Me++)for(let tt=0;tt<8;tt++)xs(ee,G.row,G.col,Me,tt,!0,re,Y,!0)&&ie.push({row:Me,col:tt});return ie},nc=(G,Y=l)=>{if(!sr(Y,G))return!1;for(let re=0;re<8;re++)for(let ie=0;ie<8;ie++){const ee=Y[re][ie];if(ee&&je(ee)===G&&Nn({row:re,col:ie},Y,G).length>0)return!1}return!0},zb=(G,Y=l)=>{if(sr(Y,G))return!1;for(let re=0;re<8;re++)for(let ie=0;ie<8;ie++){const ee=Y[re][ie];if(ee&&je(ee)===G&&Nn({row:re,col:ie},Y,G).length>0)return!1}return!0},Pm=(G,Y)=>{if(g!=="active"||ue.current)return;const re=l[G][Y],ie=re?je(re):null;if(f&&S.some(ee=>ee.row===G&&ee.col===Y)){ou(f,{row:G,col:Y});return}if(re&&ie===d){const ee=Nn({row:G,col:Y});p({row:G,col:Y}),O(ee);return}p(null),O([])},ou=(G,Y,re=!1)=>{const ie=l[G.row][G.col];if(console.log("[MOVE ATTEMPT]",{from:G,to:Y,piece:ie,isAIMove:re,board:JSON.parse(JSON.stringify(l)),moveHistory:_}),!!ie){if(console.log("[PAWN_PROMOTION_DEBUG] Checking promotion:",{piece:ie,pieceLower:ie.toLowerCase(),isPawn:ie.toLowerCase()==="p",pieceColor:je(ie),toRow:Y.row,blueCondition:je(ie)==="blue"&&Y.row===0,redCondition:je(ie)==="red"&&Y.row===7,shouldPromote:ie.toLowerCase()==="p"&&(je(ie)==="blue"&&Y.row===0||je(ie)==="red"&&Y.row===7)}),ie.toLowerCase()==="p"&&(je(ie)==="blue"&&Y.row===0||je(ie)==="red"&&Y.row===7)){console.log("[PAWN_PROMOTION] Detected promotion:",{piece:ie,from:G,to:Y,pieceColor:je(ie)}),k({from:G,to:Y}),R(!0);return}Z1(G,Y,"q",re)}};Ie.current=ou;const bR=D.useCallback((G,Y,re=!1,ie="q")=>{tc(!0);const ee=l.map(tt=>[...tt]),_e=ee[G.row][G.col];if(!_e)return;ee[Y.row][Y.col]=_e,ee[G.row][G.col]=null,xd(ee,G,Y,_e,ie);const Me=J1(G,Y);if(I(tt=>{const Nt=[...tt,Me];return console.log("[MOVE HISTORY UPDATED]",Nt),Nt}),F({from:G,to:Y}),p(null),O([]),_.length<10&&!re){const tt=BW(ee,d==="blue"?"red":"blue");St(tt).then(Nt=>{Nt&&Nt.moves&&Nt.moves.length>0&&(Mr(Nt.moves.slice(0,3)),Dt(!0),setTimeout(()=>Dt(!1),5e3))})}$$(G,Y,_e),h(tt=>{const Nt=tt==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",Nt),rc(ee,Nt),Nt}),rc(ee,d==="blue"?"red":"blue"),u(ee),ue.current=!1,st.current=!1,Ot.current=!1,tc(!1)},[l,d,_,St]);D.useEffect(()=>{if(!ue.current&&a==="ai"&&d==="red"&&!st.current&&!Wi)if(ue.current=!0,y==="easy")setTimeout(()=>{const G=Wf(l);G?ou(G.from,G.to,!0):ue.current=!1},600);else{A("AI is calculating...");const G=BW(l,d);if(Ot.current)return;Ot.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:G,difficulty:y,movetime:3e3})}).then(re=>{if(re.ok)return re.json();throw new Error("API call failed")}).then(re=>{console.log("[DEBUG] Stockfish API response:",re);const ie=re.bestmove||re.move;if(ie&&ie!=="(none)"&&ie.length===4){const ee=ie.charCodeAt(0)-97,_e=parseInt(ie[1]),Me=ie.charCodeAt(2)-97,tt=parseInt(ie[3]),Nt=8-_e,zt=8-tt;if(console.log("[DEBUG] Parsed move:",{fromCol:ee,fromRowStockfish:_e,toCol:Me,toRowStockfish:tt,fromRow:Nt,toRow:zt}),ee>=0&&ee<8&&Nt>=0&&Nt<8&&Me>=0&&Me<8&&zt>=0&&zt<8){const dr={from:{row:Nt,col:ee},to:{row:zt,col:Me}},En=l[Nt][ee];if(console.log("[DEBUG] Move validation:",{piece:En,moveObj:dr,isValid:En&&je(En)==="red"&&xs(En,Nt,ee,zt,Me,!0,"red",l)}),En&&je(En)==="red"&&xs(En,Nt,ee,zt,Me,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",dr),ou(dr.from,dr.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const qb=Wf(l);qb&&ou(qb.from,qb.to,!0),ue.current=!1,Ot.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const dr=Wf(l);dr&&ou(dr.from,dr.to,!0),ue.current=!1,Ot.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const ee=Wf(l);ee&&ou(ee.from,ee.to,!0),ue.current=!1,Ot.current=!1}}).catch(re=>{console.error("[DEBUG] Stockfish API error:",re),A("AI error. Falling back to random moves.");const ie=Wf(l);ie&&ou(ie.from,ie.to,!0),ue.current=!1,Ot.current=!1})}},[d,a,y,l,le,yt]);const rc=(G,Y)=>{console.log("Checking game end for player:",Y);const re=G.some(ee=>ee.some(_e=>_e==="k")),ie=G.some(ee=>ee.some(_e=>_e==="K"));if(!re)return console.log("[GAME END] KING CAPTURED - Red wins!"),w("checkmate"),A("King captured! Red wins!"),iu("loss"),ve(!0),setTimeout(()=>ve(!1),3e3),"checkmate";if(!ie)return console.log("[GAME END] KING CAPTURED - Blue wins!"),w("checkmate"),A("King captured! You win!"),iu("win"),ve(!0),setTimeout(()=>ve(!1),3e3),"checkmate";if(console.log("Is king in check:",sr(G,Y)),nc(Y,G)){console.log("[GAME END] CHECKMATE",{winner:Y==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(G)),moveHistory:_}),w("checkmate");const ee=Y==="blue"?"red":"blue";return ee==="blue"?(A("Checkmate! You win!"),sc("victory"),tA(!0),zr(!0),X1(),iu("win"),ve(!0),setTimeout(()=>ve(!1),3e3)):(A(`Checkmate! ${ee==="red"?"AI":"Opponent"} wins!`),sc("loser"),Dm(!0),iu("loss"),ve(!0),setTimeout(()=>ve(!1),3e3)),"checkmate"}if(zb(Y,G)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(G)),moveHistory:_}),w("stalemate");const ee=Y==="blue"?"red":"blue";return ee==="blue"?(A("Stalemate! You win!"),sc("victory"),tA(!0),zr(!0),X1(),iu("win"),ve(!0),setTimeout(()=>ve(!1),3e3)):(A(`Stalemate! ${ee==="red"?"AI":"Opponent"} wins!`),sc("loser"),Dm(!0),iu("loss"),ve(!0),setTimeout(()=>ve(!1),3e3)),"stalemate"}return sr(G,Y)?(console.log("CHECK detected!"),sc("check"),A(`${Y==="blue"?"Blue":"Red"} is in check!`)):A("Your turn"),null},Wf=G=>{const Y=[];for(let ee=0;ee<8;ee++)for(let _e=0;_e<8;_e++){const Me=G[ee][_e];Me&&je(Me)==="red"&&Y.push({row:ee,col:_e})}for(let ee=Y.length-1;ee>0;ee--){const _e=Math.floor(Math.random()*(ee+1));[Y[ee],Y[_e]]=[Y[_e],Y[ee]]}const re=[],ie=[];for(const ee of Y){const _e=Nn(ee,G,"red");for(const Me of _e){const tt=G[Me.row][Me.col];if(tt&&je(tt)==="blue"){const zt={p:100,n:320,b:330,r:500,q:900,k:2e4}[tt.toLowerCase()]||0;re.push({from:ee,to:Me,value:zt})}else ie.push({from:ee,to:Me})}}if(re.length>0&&Math.random()<.3){re.sort((ee,_e)=>ee.value-_e.value);for(const ee of re){const _e=G.map(tt=>[...tt]),Me=_e[ee.from.row][ee.from.col];if(_e[ee.to.row][ee.to.col]=Me,_e[ee.from.row][ee.from.col]=null,!sr(_e,"red"))return{from:ee.from,to:ee.to}}}for(const ee of ie){const _e=G.map(tt=>[...tt]),Me=_e[ee.from.row][ee.from.col];if(_e[ee.to.row][ee.to.col]=Me,_e[ee.from.row][ee.from.col]=null,!sr(_e,"red"))return ee}re.sort((ee,_e)=>ee.value-_e.value);for(const ee of re){const _e=G.map(tt=>[...tt]),Me=_e[ee.from.row][ee.from.col];if(_e[ee.to.row][ee.to.col]=Me,_e[ee.from.row][ee.from.col]=null,!sr(_e,"red"))return{from:ee.from,to:ee.to}}return null},Is=()=>{u(JSON.parse(JSON.stringify($W))),h("blue"),p(null),w("active"),I([]),O([]),F(null),B(!1),A("Select game mode"),oe({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ue.current&&(ue.current=!1)},vR=()=>{if(Lm(),console.log("[DEBUG] startGame called, difficulty:",y,"gameMode:",a),a==="online"){B(!1),X(!1);return}B(!0),X(!1),A("Game started! Your turn");const G=ur();Nm(G),console.log("[DEBUG] Game started with chessboard:",G)},Om=G=>`${G.slice(0,6)}...${G.slice(-4)}`,km=(G,Y)=>{const re=l[G][Y],ie=(f==null?void 0:f.row)===G&&(f==null?void 0:f.col)===Y,ee=S.some(tt=>tt.row===G&&tt.col===Y),_e=P&&(P.from.row===G&&P.from.col===Y||P.to.row===G&&P.to.col===Y),Me=Xe&&q&&a==="ai"&&re&&re==="K";return m.jsxs("div",{className:`square ${ie?"selected":""} ${ee?"legal-move":""} ${_e?"last-move":""}`,onClick:()=>Pm(G,Y),onTouchStart:tt=>Gb(G,Y,tt),onTouchMove:Xc,children:[re&&!Me&&m.jsx("div",{className:"piece",style:{backgroundImage:bS[re]?`url(${bS[re]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ee&&m.jsx("div",{className:"legal-move-indicator"})]},`${G}-${Y}`)},K1=()=>{if(!T||!$)return null;const G=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3,color:"white"},children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:G.map(Y=>m.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION_DIALOG] Selected piece:",Y),Z1($.from,$.to,Y),R(!1),k(null)},style:{width:"50px",height:"50px",border:"2px solid gold",borderRadius:"4px",cursor:"pointer",backgroundImage:bS[Y]?`url(${bS[Y]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"rgba(255, 255, 255, 0.1)"}},Y))})]})})},[Y1,U$]=D.useState(null),Sd=(G=!1,Y="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${G?" piece-gallery-sm":""}`,children:[m.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:oHe.map(re=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>{U$(Y1===re.key?null:re.key)},children:[m.jsx("img",{src:re.img,alt:re.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:re.name}),Y1===re.key&&m.jsx("div",{className:"piece-gallery-desc",children:re.desc})]},re.key))}),m.jsx("div",{className:"piece-gallery-tip",children:Y})]}),Q1=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),m.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${y==="easy"?" selected":""}`,style:{background:y==="easy"?"#00ff00":"transparent",color:y==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${y==="hard"?" selected":""}`,style:{background:y==="hard"?"#00ff00":"transparent",color:y==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("hard"),children:"Hard"})]}),m.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:8,marginBottom:24},children:m.jsxs("label",{style:{color:"#00ff00",fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:[m.jsx("input",{type:"checkbox",checked:Xe,onChange:G=>ot(G.target.checked),style:{width:"20px",height:"20px",accentColor:"#00ff00",cursor:"pointer"}}),m.jsx("span",{style:{textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"InvisiKing Mode"})]})}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{vR()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),xd=(G,Y,re,ie,ee="q")=>{if(ie.toLowerCase()==="p"&&(je(ie)==="blue"&&re.row===0||je(ie)==="red"&&re.row===7)){const _e=je(ie)==="blue"?ee.toLowerCase():ee.toUpperCase();console.log("[HANDLE_SPECIAL_MOVES] Promoting pawn to:",_e),G[re.row][re.col]=_e}if(ie.toLowerCase()==="k"&&Math.abs(Y.col-re.col)===2){if(re.col===6)G[Y.row][7]=null,G[Y.row][5]=je(ie)==="blue"?"r":"R";else if(re.col===2){const _e=G[Y.row][3];G[Y.row][0]=null,G[Y.row][3]=je(ie)==="blue"?"r":"R",_e&&_e.toLowerCase()==="q"&&(G[Y.row][4]=_e)}}},J1=(G,Y,re,ie)=>{const ee=jb(G.row,G.col),_e=jb(Y.row,Y.col);return`${ee}-${_e}`},$$=(G,Y,re)=>{const ie={...le};re.toLowerCase()==="k"?je(re)==="blue"?ie.blueKingMoved=!0:ie.redKingMoved=!0:re.toLowerCase()==="r"&&(je(re)==="blue"?(G.col===0&&(ie.blueRooksMove.left=!0),G.col===7&&(ie.blueRooksMove.right=!0)):(G.col===0&&(ie.redRooksMove.left=!0),G.col===7&&(ie.redRooksMove.right=!0))),re.toLowerCase()==="p"&&Math.abs(G.row-Y.row)===2?ie.lastPawnDoubleMove={row:Y.row,col:Y.col}:ie.lastPawnDoubleMove=null,oe(ie)},Z1=(G,Y,re="q",ie=!1)=>{l[G.row][G.col];const _e=l[Y.row][Y.col]!==null;if(sc(_e?"capture":"move"),_e){z({row:Y.row,col:Y.col,show:!0}),setTimeout(()=>{bR(G,Y,ie,re),z(null)},500);return}bR(G,Y,ie,re)},sc=G=>{if(!yR)return;let Y="";switch(G){case"move":Y="/images/move.mp3";break;case"capture":Y="/images/capture.mp3";break;case"check":Y="/images/play.mp3";break;case"checkmate":Y="/images/victory.mp3";break;case"victory":Y="/images/victory.mp3";break;case"loser":Y="/images/loser.mp3";break;case"upgrade":Y="/images/upgrade.mp3";break;default:Y="/images/move.mp3"}new Audio(Y).play().catch(()=>{})},X1=()=>{sc("victory");for(let G=0;G<50;G++)setTimeout(()=>{const Y=document.createElement("div");Y.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(Y),setTimeout(()=>Y.remove(),3e3)},G*100);for(let G=0;G<15;G++)setTimeout(()=>{const Y=document.createElement("div"),re=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],ie=re[Math.floor(Math.random()*re.length)];Y.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${ie};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(Y),setTimeout(()=>Y.remove(),6e3)},G*200);setTimeout(()=>zr(!1),5e3)},[eA,tA]=D.useState(!1),[B$,Dm]=D.useState(!1),nA=()=>{tA(!1),Dm(!1)},Mm=()=>{nA(),Is()},Hb=()=>{nA(),B(!1)},Lm=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Jc=a==="online",[Hi,Zc]=D.useState("leaderboard"),Gb=(G,Y,re)=>{re.preventDefault(),Pm(G,Y)},Xc=G=>{G.preventDefault()};return Jc?m.jsx(Pne,{onClose:t,onMinimize:e,fullscreen:n}):!q&&!tn?m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[Hi==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((G,Y)=>{if(typeof G=="object"&&G!==null&&"username"in G&&"wins"in G&&"losses"in G&&"draws"in G&&"points"in G){const re=G;return m.jsxs("tr",{children:[m.jsx("td",{children:Y+1}),m.jsx("td",{children:Om(re.username)}),m.jsx("td",{children:re.points})]},re.username)}return null})})]})})]}),Hi==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:Sd(!0,"Click pieces to learn more")})]}),m.jsx("div",{className:"center-area",children:m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:m.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${Jc?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===wS.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>X(!0),children:"Start Game"}),Jc&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with tDMT wagers"}),m.jsx("p",{children:"Create or join games instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),m.jsx("p",{children:m.jsx("strong",{children:"Piece Movements:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Special Rules:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Game Modes:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Single Player:"})," Choose easy or Hard difficulty and practice against the computer."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Multiplayer:"})," wage $DMT, $LAWB, $GOLD or $MOSS and challenge other players on Sanko mainnet. Winner takes the pot minus 5% house fee."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Multiplayer Flow:"})}),m.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsx("li",{children:"Connect your wallet to Sanko mainnet"}),m.jsx("li",{children:"Create a game and set your wager amount in DMT"}),m.jsx("li",{children:"Share your invite code with an opponent"}),m.jsx("li",{children:"Opponent joins and matches your wager"}),m.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),m.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Lawb Chess Mainnet Contract:"})," ",m.jsx("a",{href:"https://explorer.sanko.xyz/address/0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"})]}),m.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Network Name:"})," Sanko Mainnet"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"RPC URL:"})," https://mainnet.sanko.xyz"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Chain ID:"})," 1996"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Currency Symbol:"})," DMT"]})]})]})]}),m.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:m.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[m.jsx("button",{className:Hi==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Zc("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:Hi==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Zc("gallery"),children:"Gallery"})]})]})})]})]}):m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${q?" game-active":""}`,children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[Hi==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((G,Y)=>{if(typeof G=="object"&&G!==null&&"username"in G&&"wins"in G&&"losses"in G&&"draws"in G&&"points"in G){const re=G;return m.jsxs("tr",{children:[m.jsx("td",{children:Y+1}),m.jsx("td",{children:Om(re.username)}),m.jsx("td",{children:re.points})]},re.username)}return null})})]})})]}),Hi==="moves"&&q&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:_.slice().reverse().map((G,Y)=>m.jsx("li",{children:G},_.length-1-Y))})]}),Hi==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:Sd(!0,"Click pieces to learn more")})]}),m.jsxs("div",{className:"center-area",children:[q&&m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===wS.AI&&m.jsxs("span",{className:"mode-play",children:[y==="easy"?"Easy":"Hard"," AI"]}),Jc&&m.jsxs("span",{className:"wager-display",children:["Wager: ",ne," tDMT"]})]}),q?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${jf})`},children:[Array.from({length:8},(G,Y)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(re,ie)=>km(Y,ie))},Y)),M&&M.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${M.row*12.5}%`,left:`${M.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsxs("div",{className:"sidebar-toggle-group",children:[m.jsx("button",{className:Hi==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Zc("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:Hi==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Zc("moves"),children:"Moves"}),m.jsx("button",{className:Hi==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Zc("gallery"),children:"Gallery"})]}),m.jsx("button",{onClick:Mm,children:"New Game"}),m.jsx("button",{onClick:Hb,children:"Menu"})]})]}):tn?Q1():m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:m.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${Jc?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===wS.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>X(!0),children:"Start Game"}),Jc&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with tDMT wagers"}),m.jsx("p",{children:"Create or join games instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),m.jsx("p",{children:m.jsx("strong",{children:"Piece Movements:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Special Rules:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Game Modes:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Multiplayer:"})," wage DMT and challenge other players on Sanko mainnet. Winner takes the pot minus 5% house fee."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Multiplayer Flow:"})}),m.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsx("li",{children:"Connect your wallet to Sanko mainnet"}),m.jsx("li",{children:"Create a game and set your wager amount in DMT"}),m.jsx("li",{children:"Share your invite code with an opponent"}),m.jsx("li",{children:"Opponent joins and matches your wager"}),m.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),m.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Lawb Chess Mainnet Contract:"})," ",m.jsx("a",{href:"https://explorer.sanko.xyz/address/0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"})]}),m.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Network Name:"})," Sanko Mainnet"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"RPC URL:"})," https://mainnet.sanko.xyz"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Chain ID:"})," 1996"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Currency Symbol:"})," DMT"]})]})]})]}),m.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:m.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[m.jsx("button",{className:Hi==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Zc("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:Hi==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Zc("gallery"),children:"Gallery"})]})]})]})]}),ce&&Sd(!0),T&&K1(),ge&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),eA&&m.jsxs("div",{className:"victory-overlay",children:[m.jsx("div",{className:"balloons-container"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Victory!"}),m.jsx("button",{onClick:Mm,children:"New Game"})]})})]}),B$&&m.jsxs("div",{className:"defeat-overlay",children:[m.jsx("div",{className:"blood-overlay"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Defeat!"}),m.jsx("button",{onClick:Mm,children:"Try Again"})]})})]})]})};function BW(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const FW=()=>{const[t,e]=D.useState("singleplayer"),n=()=>{window.location.href="/"};return m.jsx("div",{className:"chess-page",children:m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(lHe,{onClose:n}):m.jsx(Pne,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},uHe=Symbol(),jW=Object.getPrototypeOf,G5=new WeakMap,dHe=t=>t&&(G5.has(t)?G5.get(t):jW(t)===Object.prototype||jW(t)===Array.prototype),hHe=t=>dHe(t)&&t[uHe]||null,WW=(t,e=!0)=>{G5.set(t,e)},iN={},P$=t=>typeof t=="object"&&t!==null,fHe=t=>P$(t)&&!z1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),One=(t,e)=>{const n=q5.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return WW(r,!0),q5.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(z1.has(i))WW(i,!1);else if(Of.has(i)){const[c,l]=Of.get(i);a.value=One(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},pHe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(zW(l,o)||x_.has(o)&&zW(l,x_.get(o))))return!0;n(i),P$(o)&&(o=hHe(o)||o);const u=!Of.has(o)&&mHe(o)?lr(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Of=new WeakMap,z1=new WeakSet,q5=new WeakMap,nE=[1,1],x_=new WeakMap;let zW=Object.is,gHe=(t,e)=>new Proxy(t,e),mHe=fHe,yHe=One,wHe=pHe;function lr(t={}){if(!P$(t))throw new Error("object required");const e=x_.get(t);if(e)return e;let n=nE[0];const r=new Set,s=(w,y=++nE[0])=>{n!==y&&(n=y,r.forEach(b=>b(w,y)))};let i=nE[1];const o=(w=++nE[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([y])=>{const b=y[1](w);b>n&&(n=b)})),n),a=w=>(y,b)=>{const v=[...y];v[1]=[w,...v[1]],s(v,b)},c=new Map,l=(w,y)=>{const b=!z1.has(y)&&Of.get(y);if(b){if((iN?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const v=b[2](a(w));c.set(w,[b,v])}else c.set(w,[b])}},u=w=>{var y;const b=c.get(w);b&&(c.delete(w),(y=b[1])==null||y.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,v],A)=>{if((iN?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const _=b[2](a(A));c.set(A,[b,_])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,v],A)=>{v&&(v(),c.set(A,[b]))})});let h=!0;const f=wHe(()=>h,l,u,s),p=gHe(t,f);x_.set(t,p);const g=[t,o,d];return Of.set(p,g),Reflect.ownKeys(t).forEach(w=>{const y=Object.getOwnPropertyDescriptor(t,w);"value"in y&&y.writable&&(p[w]=t[w])}),h=!1,p}function xo(t,e,n){const r=Of.get(t);(iN?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function I_(t){const e=Of.get(t);(iN?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return yHe(n,r())}function ib(t){return z1.add(t),t}function bHe(){return{proxyStateMap:Of,refSet:z1,snapCache:q5,versionHolder:nE,proxyCache:x_}}function ji(t,e,n,r){let s=t[e];return xo(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:vHe,snapCache:EHe}=bHe(),vS=t=>vHe.has(t);function CHe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=EHe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return vS(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!vS(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!vS(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!vS(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=lr(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var HW={};const fe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof HW<"u"?HW.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},oN={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=fe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},_He={bigNumber(t){return t?new Dl(t):new Dl(0)},multiply(t,e){if(t===void 0||e===void 0)return new Dl(0);const n=new Dl(t),r=new Dl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},AHe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],SHe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],xHe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],IHe={getERC20Abi:t=>fe.USDT_CONTRACT_ADDRESSES.includes(t)?xHe:AHe,getSwapAbi:()=>SHe},Hh={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Tt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function C2(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Et={setItem(t,e){rE()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(rE())return localStorage.getItem(t)||void 0},removeItem(t){rE()&&localStorage.removeItem(t)},clear(){rE()&&localStorage.clear()}};function rE(){return typeof window<"u"&&typeof localStorage<"u"}function aN(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const Oi={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[fe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},et={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=et.getActiveNamespace(),e=et.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Et.setItem(Tt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Et.getItem(Tt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Et.removeItem(Tt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Et.setItem(Tt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Et.setItem(Tt.ACTIVE_CAIP_NETWORK_ID,t),et.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Et.getItem(Tt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Et.removeItem(Tt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=C2(t);Et.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=et.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Et.setItem(Tt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Et.getItem(Tt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=C2(t);Et.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Et.getItem(Tt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=C2(t);return Et.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Et.setItem(Tt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Et.getItem(Tt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Et.removeItem(Tt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Et.getItem(Tt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Et.getItem(Tt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Et.setItem(Tt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Et.getItem(Tt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Et.getItem(Tt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Et.setItem(Tt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=et.getConnectedNamespaces();e.includes(t)||(e.push(t),et.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=et.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),et.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Et.getItem(Tt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Et.setItem(Tt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Et.removeItem(Tt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Et.getItem(Tt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=et.getBalanceCache();Et.setItem(Tt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=et.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=et.getBalanceCache();e[t.caipAddress]=t,Et.setItem(Tt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Et.getItem(Tt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=et.getBalanceCache();Et.setItem(Tt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=et.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=et.getNativeBalanceCache();e[t.caipAddress]=t,Et.setItem(Tt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Et.getItem(Tt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=et.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;et.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=et.getEnsCache();e[t.address]=t,Et.setItem(Tt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=et.getEnsCache();Et.setItem(Tt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Et.getItem(Tt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=et.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;et.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=et.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Et.setItem(Tt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=et.getIdentityCache();Et.setItem(Tt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Et.removeItem(Tt.PORTFOLIO_CACHE),Et.removeItem(Tt.NATIVE_BALANCE_CACHE),Et.removeItem(Tt.ENS_CACHE),Et.removeItem(Tt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Et.setItem(Tt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Et.getItem(Tt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=et.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===fe.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Et.setItem(Tt.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Et.getItem(Tt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=et.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Et.setItem(Tt.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Et.getItem(Tt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Et.setItem(Tt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Et.setItem(Tt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(et.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},ft={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ft.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Oi.TEN_SEC_MS:!0},isAllowedRetry(t,e=Oi.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ft.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Oi.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ft.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ft.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?et.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ft.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return fe.W3M_API_URL},getBlockchainApiUrl(){return fe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return fe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Oi.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in fe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Pv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class H1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Pv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Pv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Pv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Pv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Pv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const NHe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Oi.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ft.isTelegram()){if(ft.isIos())return t.filter(e=>e!=="google");if(ft.isMac())return t.filter(e=>e!=="x");if(ft.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},mt=lr({features:Oi.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Oi.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Mt={state:mt,subscribeKey(t,e){return ji(mt,t,e)},setOptions(t){Object.assign(mt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...mt.remoteFeatures,...t};mt.remoteFeatures=e,(n=mt.remoteFeatures)!=null&&n.socials&&(mt.remoteFeatures.socials=NHe.filterSocialsByPlatform(mt.remoteFeatures.socials))},setFeatures(t){if(!t)return;mt.features||(mt.features=Oi.DEFAULT_FEATURES);const e={...mt.features,...t};mt.features=e},setProjectId(t){mt.projectId=t},setCustomRpcUrls(t){mt.customRpcUrls=t},setAllWallets(t){mt.allWallets=t},setIncludeWalletIds(t){mt.includeWalletIds=t},setExcludeWalletIds(t){mt.excludeWalletIds=t},setFeaturedWalletIds(t){mt.featuredWalletIds=t},setTokens(t){mt.tokens=t},setTermsConditionsUrl(t){mt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){mt.privacyPolicyUrl=t},setCustomWallets(t){mt.customWallets=t},setIsSiweEnabled(t){mt.isSiweEnabled=t},setIsUniversalProvider(t){mt.isUniversalProvider=t},setSdkVersion(t){mt.sdkVersion=t},setMetadata(t){mt.metadata=t},setDisableAppend(t){mt.disableAppend=t},setEIP6963Enabled(t){mt.enableEIP6963=t},setDebug(t){mt.debug=t},setEnableWalletConnect(t){mt.enableWalletConnect=t},setEnableWalletGuide(t){mt.enableWalletGuide=t},setEnableAuthLogger(t){mt.enableAuthLogger=t},setEnableWallets(t){mt.enableWallets=t},setPreferUniversalLinks(t){mt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(Oi.SIWX_DEFAULTS))t[e]??(t[e]=n);mt.siwx=t},setConnectMethodsOrder(t){mt.features={...mt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){mt.features={...mt.features,walletFeaturesOrder:t}},setSocialsOrder(t){mt.remoteFeatures={...mt.remoteFeatures,socials:t}},setCollapseWallets(t){mt.features={...mt.features,collapseWallets:t}},setEnableEmbedded(t){mt.enableEmbedded=t},setAllowUnsupportedChain(t){mt.allowUnsupportedChain=t},setManualWCControl(t){mt.manualWCControl=t},setEnableNetworkSwitch(t){mt.enableNetworkSwitch=t},setEnableReconnect(t){mt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(mt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){mt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return mt.universalProviderConfigOverride},getSnapshot(){return I_(mt)}},THe=Object.freeze({enabled:!0,events:[]}),RHe=new H1({baseUrl:ft.getAnalyticsUrl(),clientId:null}),PHe=5,OHe=60*1e3,Gd=lr({...THe}),kHe={state:Gd,subscribeKey(t,e){return ji(Gd,t,e)},async sendError(t,e){if(!Gd.enabled)return;const n=Date.now();if(Gd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<OHe}).length>=PHe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Gd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Mt.state;await RHe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ft.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Gd.enabled=!0},disable(){Gd.enabled=!1},clearEvents(){Gd.events=[]}};class ob extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,ob.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,ob):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function GW(t,e){const n=t instanceof ob?t:new ob(t instanceof Error?t.message:String(t),e,t);throw kHe.sendError(n,n.category),n}function ec(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return GW(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return GW(a,e)}},n[r]=i}else n[r]=s}),n}var ab={};const DHe="https://secure.walletconnect.org/sdk",MHe=(typeof process<"u"&&typeof ab<"u"?ab.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||DHe,LHe=(typeof process<"u"&&typeof ab<"u"?ab.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",UHe=(typeof process<"u"&&typeof ab<"u"?ab.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Qe={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},qs={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Rl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},$He={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Rl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Rl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Rl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Rl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===fe.CHAIN.SOLANA&&t===Rl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Rl.COINBASE.url}/dapp?cb_url=${r}`)}},ko=lr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),BHe={state:ko,subscribeNetworkImages(t){return xo(ko.networkImages,()=>t(ko.networkImages))},subscribeKey(t,e){return ji(ko,t,e)},subscribe(t){return xo(ko,()=>t(ko))},setWalletImage(t,e){ko.walletImages[t]=e},setNetworkImage(t,e){ko.networkImages[t]=e},setChainImage(t,e){ko.chainImages[t]=e},setConnectorImage(t,e){ko.connectorImages={...ko.connectorImages,[t]:e}},setTokenImage(t,e){ko.tokenImages[t]=e},setCurrencyImage(t,e){ko.currencyImages[t]=e}},Tc=ec(BHe),FHe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},_2=lr({networkImagePromises:{}}),jHe={async fetchWalletImage(t){if(t)return await Ct._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(_2.networkImagePromises[t]||(_2.networkImagePromises[t]=Ct._fetchNetworkImage(t)),await _2.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Tc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Tc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Tc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Tc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Tc.state.connectorImages[t.imageId]},getChainImage(t){return Tc.state.networkImages[FHe[t]]}},qd=lr({message:"",variant:"info",open:!1}),WHe={state:qd,subscribeKey(t,e){return ji(qd,t,e)},open(t,e){const{debug:n}=Mt.state,{shortMessage:r,longMessage:s}=t;n&&(qd.message=r,qd.variant=e,qd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){qd.open=!1,qd.message="",qd.variant="info"}},up=ec(WHe),zHe=ft.getAnalyticsUrl(),HHe=new H1({baseUrl:zHe,clientId:null}),GHe=["MODAL_CREATED"],bu=lr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),vr={state:bu,subscribe(t){return xo(bu,()=>t(bu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Mt.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=_n.state.address;if(GHe.includes(t.data.event)||typeof window>"u")return;await HHe.post({path:"/e",params:vr.getSdkProperties(),body:{eventId:ft.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),bu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===fe.HTTP_STATUS_CODES.FORBIDDEN&&!bu.reportedErrors.FORBIDDEN&&(up.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${rE()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),bu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;bu.timestamp=Date.now(),bu.data=t,(e=Mt.state.features)!=null&&e.analytics&&vr._sendAnalyticsEvent(bu)}},qHe=ft.getApiUrl(),Ji=new H1({baseUrl:qHe,clientId:null}),VHe=40,qW=4,KHe=20,Ft=lr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Ct={state:Ft,subscribeKey(t,e){return ji(Ft,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Mt.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Mt.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ji.baseUrl}/getWalletImage/${t}`,n=await Ji.getBlob({path:e,params:Ct._getSdkProperties()});Tc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ji.baseUrl}/public/getAssetImage/${t}`,n=await Ji.getBlob({path:e,params:Ct._getSdkProperties()});Tc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ji.baseUrl}/public/getAssetImage/${t}`,n=await Ji.getBlob({path:e,params:Ct._getSdkProperties()});Tc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ji.baseUrl}/public/getCurrencyImage/${t}`,n=await Ji.getBlob({path:e,params:Ct._getSdkProperties()});Tc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ji.baseUrl}/public/getTokenImage/${t}`,n=await Ji.getBlob({path:e,params:Ct._getSdkProperties()});Tc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ft.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Rl.COINBASE.id?!0:J.state.activeChain==="solana"&&(n.id===Rl.SOLFLARE.id||n.id===Rl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ji.get({path:"/appkit/v1/config",params:Ct._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ji.get({path:"/projects/v1/origins",params:Ct._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===fe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=fe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=J.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!jHe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Ct._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=at.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Ct._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Ct._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Ct._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Ct._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Rl).map(o=>o.id));const r=await Ji.get({path:"/getWallets",params:{...Ct._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Ct._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Mt.state;if(t!=null&&t.length){const e={...Ct._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??qW,include:t},{data:n}=await Ct.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Ct._fetchWalletImage(i))),Ft.featured=r,Ft.allFeatured=r}},async fetchRecommendedWallets(){try{Ft.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=Mt.state,r=[...e??[],...n??[]].filter(Boolean),s=J.getRequestedCaipNetworkIds().join(","),i={page:1,entries:qW,include:t,exclude:r,chains:s},{data:o,count:a}=await Ct.fetchWallets(i),c=et.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Ct._fetchWalletImage(d))),Ft.recommended=o,Ft.allRecommended=o,Ft.count=a??0}catch{}finally{Ft.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=Mt.state,s=J.getRequestedCaipNetworkIds().join(","),i=[...Ft.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:VHe,include:e,exclude:i,chains:s},{data:a,count:c}=await Ct.fetchWallets(o),l=a.slice(0,KHe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Ct._fetchWalletImage(u))),Ft.wallets=ft.uniqueBy([...Ft.wallets,...Ct._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Ft.count=c>Ft.count?c:Ft.count,Ft.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Ct.fetchWallets(e);n&&n.forEach(r=>{Ft.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=Mt.state,s=J.getRequestedCaipNetworkIds().join(",");Ft.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Ct.fetchWallets(i);vr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Ct._fetchWalletImage(c)),ft.wait(300)]),Ft.search=Ct._filterOutExtensions(o)},initPromise(t,e){const n=Ft.promises[t];return n||(Ft.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Ct.initPromise("connectorImages",Ct.fetchConnectorImages),e&&Ct.initPromise("featuredWallets",Ct.fetchFeaturedWallets),n&&Ct.initPromise("recommendedWallets",Ct.fetchRecommendedWallets),r&&Ct.initPromise("networkImages",Ct.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=Mt.state.features)!=null&&t.analytics&&Ct.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ji.get({path:"/getAnalyticsConfig",params:Ct._getSdkProperties()});Mt.setFeatures({analytics:t})}catch{Mt.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Ft.featured=Ft.allFeatured,Ft.recommended=Ft.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Ft.featured=Ft.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ft.recommended=Ft.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ft.filteredWallets=Ft.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Ft.filteredWallets=[]},setFilterByNamespace(t){if(!t){Ft.featured=Ft.allFeatured,Ft.recommended=Ft.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Ft.featured=Ft.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ft.recommended=Ft.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ft.filteredWallets=Ft.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Ln=lr({view:"Connect",history:["Connect"],transactionStack:[]}),YHe={state:Ln,subscribeKey(t,e){return ji(Ln,t,e)},pushTransactionStack(t){Ln.transactionStack.push(t)},popTransactionStack(t){const e=Ln.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Pt.goBack();break;case"cancel":s==null||s(),Pt.goBack();break}},push(t,e){t!==Ln.view&&(Ln.view=t,Ln.history.push(t),Ln.data=e)},reset(t,e){Ln.view=t,Ln.history=[t],Ln.data=e},replace(t,e){Ln.history.at(-1)===t||(Ln.view=t,Ln.history[Ln.history.length-1]=t,Ln.data=e)},goBack(){var r;const t=J.state.activeCaipAddress,e=Pt.state.view==="ConnectingFarcaster",n=!t&&e;if(Ln.history.length>1){Ln.history.pop();const[s]=Ln.history.slice(-1);s&&(t&&s==="Connect"?Ln.view="Account":Ln.view=s)}else er.close();(r=Ln.data)!=null&&r.wallet&&(Ln.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){_n.setFarcasterUrl(void 0,J.state.activeChain);const a=at.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=I_(Mt.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Ln.history.length>1){Ln.history=Ln.history.slice(0,t+1);const[e]=Ln.history.slice(-1);e&&(Ln.view=e)}},goBackOrCloseModal(){Pt.state.history.length>1?Pt.goBack():er.close()}},Pt=ec(YHe),vu=lr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),V5={state:vu,subscribe(t){return xo(vu,()=>t(vu))},setThemeMode(t){vu.themeMode=t;try{const e=at.getAuthConnector();if(e){const n=V5.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:aN(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){vu.themeVariables={...vu.themeVariables,...t};try{const e=at.getAuthConnector();if(e){const n=V5.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:aN(vu.themeVariables,vu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return I_(vu)}},ES=ec(V5),kne={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},yn=lr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...kne},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),QHe={state:yn,subscribe(t){return xo(yn,()=>{t(yn)})},subscribeKey(t,e){return ji(yn,t,e)},initialize(t){t.forEach(e=>{const n=et.getConnectedConnectorId(e);n&&at.setConnectorId(n,e)})},setActiveConnector(t){t&&(yn.activeConnector=ib(t))},setConnectors(t){t.filter(s=>!yn.allConnectors.some(i=>i.id===s.id&&at.getConnectorName(i.name)===at.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&yn.allConnectors.push(ib(s))});const n=at.getEnabledNamespaces(),r=at.getEnabledConnectors(n);yn.connectors=at.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(yn.filterByNamespaceMap).forEach(e=>{yn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{yn.filterByNamespaceMap[e]=!0}),at.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){yn.filterByNamespaceMap[t]=e,at.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=at.getEnabledNamespaces(),e=at.getEnabledConnectors(t),n=at.areAllNamespacesEnabled();yn.connectors=at.mergeMultiChainConnectors(e),n?Ct.clearFilterByNamespaces():Ct.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(yn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return yn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(yn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=at.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===fe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=at.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===fe.CONNECTOR_ID.AUTH){const s=t,i=I_(Mt.state),o=ES.getSnapshot().themeMode,a=ES.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:aN(a,o)}),at.setConnectors([t])}else at.setConnectors([t])},getAuthConnector(t){var r;const e=t||J.state.activeChain,n=yn.connectors.find(s=>s.id===fe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return yn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return yn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return yn.allConnectors.filter(r=>r.chain===J.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=I_(Mt.state),r=ES.getSnapshot().themeMode,s=ES.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:aN(s,r)})},getConnectorsByNamespace(t){const e=yn.allConnectors.filter(n=>n.chain===t);return at.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&tu(t)===qs.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=at.getConnector(t.id,t.rdns);$He.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,J.state.activeChain),e?Pt.push("ConnectingExternal",{connector:e}):Pt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?at.getConnectorsByNamespace(t):at.mergeMultiChainConnectors(yn.allConnectors)},setFilterByNamespace(t){yn.filterByNamespace=t,yn.connectors=at.getConnectors(t),Ct.setFilterByNamespace(t)},setConnectorId(t,e){t&&(yn.activeConnectorIds={...yn.activeConnectorIds,[e]:t},et.setConnectedConnectorId(e,t))},removeConnectorId(t){yn.activeConnectorIds={...yn.activeConnectorIds,[t]:void 0},et.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return yn.activeConnectorIds[t]},isConnected(t){return t?!!yn.activeConnectorIds[t]:Object.values(yn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){yn.activeConnectorIds={...kne}}},at=ec(QHe),JHe=1e3,Ov={checkNamespaceConnectorId(t,e){return at.getConnectorId(t)===e},isSocialProvider(t){return Oi.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&at.setActiveConnector(e),s==null||s(ft.isMobile()&&t),r){const l=er.subscribeKey("open",u=>{u||(Pt.state.view!==r&&Pt.replace(r),l(),a(new Error("Modal closed")))})}const c=J.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&er.close(),c(),o(Hh.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=J.subscribeKey("activeCaipAddress",s=>{s&&(er.close(),r(),e(Hh.parseCaipAddress(s)))});it.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=_n.state.socialWindow,i=_n.state.socialProvider,o=!1,a=null;const c=J.subscribeKey("activeCaipAddress",l=>{l&&(e&&er.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===fe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=at.getAuthConnector();if(g&&!o){s&&(s.close(),_n.setSocialWindow(void 0,J.state.activeChain),s=_n.state.socialWindow),o=!0;const w=f.data.resultUri;i&&vr.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=J.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:y==null?void 0:y.caipNetworkId}),i){et.setConnectedSocialProvider(i),await it.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const b=J.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(Hh.parseCaipAddress(b)),vr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&vr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&vr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(_n.setSocialProvider(t,J.state.activeChain),i=_n.state.socialProvider,vr.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=er.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=at.getAuthConnector();if(p&&!_n.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();_n.setFarcasterUrl(g,J.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=at.getAuthConnector();a=ft.returnOpenHref(`${fe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){_n.setSocialWindow(a,J.state.activeChain),s=_n.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=er.subscribeKey("open",c=>{c||(Pt.state.view!==e&&Pt.replace(e),a(),i(new Error("Modal closed")))})}const o=J.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&er.close(),o(),s(Hh.parseCaipAddress(a)))})})},async updateEmail(){const t=et.getConnectedConnectorId(J.state.activeChain),e=at.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==fe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Pt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(er.close(),clearInterval(i),o(),r({email:a}))},JHe),o=er.subscribeKey("open",a=>{a||(Pt.state.view!=="Connect"&&Pt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&tu(t)===qs.ACCOUNT_TYPES.EOA}};function Dne(){var r,s;const t=((r=J.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=J.state.activeCaipNetwork)==null?void 0:s.id)||1,n=Oi.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function tu(t){var n;return(n=J.getAccountData(t))==null?void 0:n.preferredAccountType}const Mne={getConnectionStatus(t,e){const n=at.state.activeConnectorIds[e],r=it.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=Mt.state.remoteFeatures)!=null&&a.multiWallet),n=at.state.activeConnectorIds[t],r=it.getConnections(t),i=(it.state.recentConnections.get(t)??[]).filter(c=>at.getConnectorById(c.connectorId)),o=Mne.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},dp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Qr=lr({...dp}),ZHe={state:Qr,subscribeKey(t,e){return ji(Qr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ft.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Qr.message=dp.message,Qr.variant=dp.variant,Qr.svg=dp.svg,Qr.open=dp.open,Qr.autoClose=dp.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=dp.autoClose}){Qr.open?(Qr.open=!1,setTimeout(()=>{Qr.message=t,Qr.variant=n,Qr.svg=e,Qr.open=!0,Qr.autoClose=r},150)):(Qr.message=t,Qr.variant=n,Qr.svg=e,Qr.open=!0,Qr.autoClose=r)}},Gh=ZHe,Qn=lr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),XHe={state:Qn,subscribe(t){return xo(Qn,()=>t(Qn))},setLastNetworkInView(t){Qn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Qn.loading=!0;try{const r=await It.fetchTransactions({account:t,cursor:Qn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=sE.filterSpamTransactions(r.data),i=sE.filterByConnectedChain(s),o=[...Qn.transactions,...i];Qn.loading=!1,e==="coinbase"?Qn.coinbaseTransactions=sE.groupTransactionsByYearAndMonth(Qn.coinbaseTransactions,r.data):(Qn.transactions=o,Qn.transactionsByYear=sE.groupTransactionsByYearAndMonth(Qn.transactionsByYear,i)),Qn.empty=o.length===0,Qn.next=r.next?r.next:void 0}catch{const s=J.state.activeChain;vr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Mt.state.projectId,cursor:Qn.next,isSmartAccount:tu(s)===qs.ACCOUNT_TYPES.SMART_ACCOUNT}}),Gh.showError("Failed to fetch transactions"),Qn.loading=!1,Qn.empty=!0,Qn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Qn.next=void 0},resetTransactions(){Qn.transactions=[],Qn.transactionsByYear={},Qn.lastNetworkInView=void 0,Qn.loading=!1,Qn.empty=!1,Qn.next=void 0}},sE=ec(XHe,"API_ERROR"),ln=lr({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let tp;const eGe={state:ln,subscribe(t){return xo(ln,()=>t(ln))},subscribeKey(t,e){return ji(ln,t,e)},_getClient(){return ln._client},setClient(t){ln._client=ib(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);it.syncStorageConnections(e)},syncStorageConnections(t){const e=et.getConnections(),n=t??Array.from(J.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(ln.recentConnections);i.set(r,s),ln.recentConnections=i}},getConnections(t){return t?ln.connections.get(t)??[]:[]},hasAnyConnection(t){const e=it.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(ft.isTelegram()||ft.isSafari()&&ft.isIos()){if(tp){await tp,tp=void 0;return}if(!ft.isPairingExpired(ln==null?void 0:ln.wcPairingExpiry)){const s=ln.wcUri;ln.wcUri=s;return}tp=(e=(t=it._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),it.state.status="connecting",await tp,tp=void 0,ln.wcPairingExpiry=void 0,it.state.status="connected"}else await((r=(n=it._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=it._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&J.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=it._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||J.state.activeChain;e&&at.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;er.setLoading(!0,J.state.activeChain);const n=at.getAuthConnector();n&&(_n.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),et.setPreferredAccountTypes(Object.entries(J.state.chains).reduce((s,[i,o])=>{const a=i,c=tu(a);return c!==void 0&&(s[a]=c),s},{})),await it.reconnectExternal(n),er.setLoading(!1,J.state.activeChain),vr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=it._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=it._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=it._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=it._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=it._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=it._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=it._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=it._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=it._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=it._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=it._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=it._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){ln.wcUri=void 0,ln.wcPairingExpiry=void 0,ln.wcLinking=void 0,ln.recentWallet=void 0,ln.status="disconnected",sE.resetTransactions(),et.deleteWalletConnectDeepLink()},resetUri(){ln.wcUri=void 0,ln.wcPairingExpiry=void 0,tp=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=it.state;t&&et.setWalletConnectDeepLink(t),e&&et.setAppKitRecent(e),vr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Pt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){ln.wcBasic=t},setUri(t){ln.wcUri=t,ln.wcPairingExpiry=ft.getPairingExpiry()},setWcLinking(t){ln.wcLinking=t},setWcError(t){ln.wcError=t,ln.buffering=!1},setRecentWallet(t){ln.recentWallet=t},setBuffering(t){ln.buffering=t},setStatus(t){ln.status=t},setIsSwitchingConnection(t){ln.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=it._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new ob("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(ln.connections);n.set(e,t),ln.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=_n.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&Ov.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await it.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=at.getConnectorById(t.connectorId),s=t.connectorId===fe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await it.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await it.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=at.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===fe.CONNECTOR_ID.AUTH,a=t.connectorId===fe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Ov.isSocialProvider(i)){const{address:d}=await Ov.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){er.open({view:"ConnectingFarcaster"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else{const{address:d}=await Ov.connectEmail({closeModalOnConnect:r,onOpen(){er.open({view:"EmailLogin"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Ov.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){er.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else{const d=await it.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await it.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=_n.getCaipAddress(n);if(o){const{address:c}=Hh.parseCaipAddress(o);i=c}const a=Mne.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await it.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await it.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},it=ec(eGe),my=lr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),g0={state:my,subscribe(t){return xo(my,()=>t(my))},subscribeOpen(t){return ji(my,"open",t)},set(t){Object.assign(my,{...my,...t})}},tGe={async getTokenList(){var r;const t=J.state.activeCaipNetwork,e=await It.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=J.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(it==null?void 0:it.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await It.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await It.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=it.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await O$.getMyTokensWithBalance(t);return _n.setTokenBalance(e,J.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Dne(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Pn=lr({tokenBalances:[],loading:!1}),nGe={state:Pn,subscribe(t){return xo(Pn,()=>t(Pn))},subscribeKey(t,e){return ji(Pn,t,e)},setToken(t){t&&(Pn.token=ib(t))},setTokenAmount(t){Pn.sendTokenAmount=t},setReceiverAddress(t){Pn.receiverAddress=t},setReceiverProfileImageUrl(t){Pn.receiverProfileImageUrl=t},setReceiverProfileName(t){Pn.receiverProfileName=t},setNetworkBalanceInUsd(t){Pn.networkBalanceInUSD=t},setLoading(t){Pn.loading=t},async sendToken(){var t;try{switch(An.setLoading(!0),(t=J.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await An.sendEvmToken();return;case"solana":await An.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{An.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=J.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=tu(t);if(!An.state.sendTokenAmount||!An.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!An.state.token)throw new Error("A token is required");(n=An.state.token)!=null&&n.address?(vr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===qs.ACCOUNT_TYPES.SMART_ACCOUNT,token:An.state.token.address,amount:An.state.sendTokenAmount,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await An.sendERC20Token({receiverAddress:An.state.receiverAddress,tokenAddress:An.state.token.address,sendTokenAmount:An.state.sendTokenAmount,decimals:An.state.token.quantity.decimals})):(vr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===qs.ACCOUNT_TYPES.SMART_ACCOUNT,token:An.state.token.symbol||"",amount:An.state.sendTokenAmount,network:((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await An.sendNativeToken({receiverAddress:An.state.receiverAddress,sendTokenAmount:An.state.sendTokenAmount,decimals:An.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Pn.loading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?ft.getPlainAddress(r):void 0;if(Pn.lastRetry&&!ft.isAllowedRetry(Pn.lastRetry,30*Oi.ONE_SEC_MS))return Pn.loading=!1,[];try{if(s&&e&&n){const a=await O$.getMyTokensWithBalance();return Pn.tokenBalances=a,Pn.lastRetry=void 0,a}}catch(a){Pn.lastRetry=Date.now(),t==null||t(a),Gh.showError("Token Balance Unavailable")}finally{Pn.loading=!1}return[]},fetchNetworkBalance(){if(Pn.tokenBalances.length===0)return;const t=tGe.mapBalancesToSwapTokens(Pn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Dne());e&&(Pn.networkBalanceInUSD=e?_He.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;Pt.pushTransactionStack({});const e=t.receiverAddress,n=_n.state.address,r=it.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await it.sendTransaction({chainNamespace:fe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),vr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:tu("eip155")===qs.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=An.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=it._getClient())==null||a.updateBalance("eip155"),An.resetSend()},async sendERC20Token(t){Pt.pushTransactionStack({onSuccess(){Pt.replace("Account")}});const e=it.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(_n.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ft.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await it.writeContract({fromAddress:_n.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:IHe.getERC20Abi(n),chainNamespace:fe.CHAIN.EVM}),An.resetSend()}},async sendSolanaToken(){var t;if(!An.state.sendTokenAmount||!An.state.receiverAddress)throw new Error("An amount and receiver address are required");Pt.pushTransactionStack({onSuccess(){Pt.replace("Account")}}),await it.sendTransaction({chainNamespace:"solana",to:An.state.receiverAddress,value:An.state.sendTokenAmount}),(t=it._getClient())==null||t.updateBalance("solana"),An.resetSend()},resetSend(){Pn.token=void 0,Pn.sendTokenAmount=void 0,Pn.receiverAddress=void 0,Pn.receiverProfileImageUrl=void 0,Pn.receiverProfileName=void 0,Pn.loading=!1,Pn.tokenBalances=[]}},An=ec(nGe),A2={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},CS={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Pe=lr({chains:CHe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),rGe={state:Pe,subscribe(t){return xo(Pe,()=>{t(Pe)})},subscribeKey(t,e){return ji(Pe,t,e)},subscribeChainProp(t,e,n){let r;return xo(Pe.chains,()=>{var i;const s=n||Pe.activeChain;if(s){const o=(i=Pe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=et.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=Mt.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Pe.noAdapters=!0),Pe.noAdapters||(Pe.activeChain=a==null?void 0:a.namespace,Pe.activeCaipNetwork=i,J.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Pe.activeChain&&g0.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=et.getPreferredAccountTypes()||{},f={...Mt.state.defaultAccountTypes,...h};J.state.chains.set(u,{namespace:u,networkState:lr({...CS,caipNetwork:d==null?void 0:d[0]}),accountState:lr({...A2,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),J.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Pe.activeChain===t){const r=Array.from(Pe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&J.setActiveCaipNetwork(s)}}Pe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Pe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...CS,caipNetwork:r[0]},accountState:A2,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),J.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Pe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Pe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),J.setRequestedCaipNetworks(r,t.chainNamespace),at.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Pe.chains.get(t);if(n){const o=((r=Pe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&J.setActiveCaipNetwork(n.caipNetworks[0]),Pe.chains.set(t,{...n,caipNetworks:a}),J.setRequestedCaipNetworks(a||[],t),a.length===0&&at.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Pe.chains.get(t);n&&(n.networkState={...n.networkState||CS,...e},Pe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Pe.chains.get(t);if(r){const s={...r.accountState||A2,...e};Pe.chains.set(t,{...r,accountState:s}),(Pe.chains.size===1||Pe.activeChain===t)&&(e.caipAddress&&(Pe.activeCaipAddress=e.caipAddress),_n.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Pe.chains.get(t);if(n){const r={...n.networkState||CS,...e};Pe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){J.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Pe.activeChain=t;const e=t?Pe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Pe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Pe.activeCaipNetwork=n,J.setChainNetworkData(t,{caipNetwork:n}),et.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),g0.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Pe.activeChain!==t.chainNamespace&&J.setIsSwitchingNamespace(!0);const e=Pe.chains.get(t.chainNamespace);Pe.activeChain=t.chainNamespace,Pe.activeCaipNetwork=t,J.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Pe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Pe.activeCaipAddress=void 0,J.setAccountProp("caipAddress",Pe.activeCaipAddress,t.chainNamespace),e&&_n.replaceState(e.accountState),An.resetSend(),g0.set({activeChain:Pe.activeChain,selectedNetworkId:(i=Pe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),et.setActiveCaipNetworkId(t.caipNetworkId),!J.checkIfSupportedNetwork(t.chainNamespace)&&Mt.state.enableNetworkSwitch&&!Mt.state.allowUnsupportedChain&&!it.state.wcBasic&&J.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Pe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==J.state.activeChain,n=(s=J.getNetworkData(t))==null?void 0:s.caipNetwork,r=J.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await J.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=J.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=J.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Pe.activeCaipNetwork)==null?void 0:a.id)})),s=J.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&er.close()}catch{Pt.goBack()}vr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Pe.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Pe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Pe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Pe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Pe.activeChain;if(e&&(n=e),!n)return;const r=(s=Pe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Pe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Pe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ft.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Pe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=J.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){J.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=J.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));at.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Pe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=J.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Pe.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Pe.activeCaipNetwork},getActiveCaipAddress(){return Pe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Pe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=J.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());J.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Pe.activeCaipNetwork,r=J.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Pe.activeChain)return!0;const e=J.getRequestedCaipNetworks(Pe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){J.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=oN.caipNetworkIdToNumber((r=Pe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Pe.activeChain;if(!e||!t)return!1;const n=J.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){er.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Pe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Oi.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){J.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=J.getAccountProp("preferredAccountType",e);Pe.activeCaipAddress=void 0,J.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),at.removeConnectorId(e)},setIsSwitchingNamespace(t){Pe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Pe.chains.forEach(s=>{fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Pe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=J.state.chains.get(t))==null?void 0:e.accountState:_n.state},getNetworkData(t){var n;const e=t||Pe.activeChain;if(e)return(n=J.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=J.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=at.state.filterByNamespace;return(t?[Pe.chains.get(t)]:Array.from(Pe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?J.getRequestedCaipNetworks(t):J.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Pe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Pe.lastConnectedSIWECaipNetwork}},J=ec(rGe),sGe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Lne=ft.getBlockchainApiUrl(),Zi=lr({clientId:null,api:new H1({baseUrl:Lne,clientId:null}),supportedChains:{http:[],ws:[]}}),It={state:Zi,async get(t){const{st:e,sv:n}=It.getSdkProperties(),r=Mt.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Zi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Mt.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Zi.supportedChains.http.length||await It.getSupportedNetworks()}catch{return!1}return Zi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await It.get({path:"v1/supported-chains"});return Zi.supportedChains=t,t}catch{return Zi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await It.isNetworkSupported(e))return{avatar:"",name:""};const r=et.getIdentityFromCacheForAddress(t);if(r)return r;const s=await It.get({path:`/v1/identity/${t}`,params:{sender:J.state.activeCaipAddress?ft.getPlainAddress(J.state.activeCaipAddress):void 0}});return et.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await It.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?It.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await It.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?It.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await It.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?It.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await It.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Zi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Mt.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await It.isNetworkSupported((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?It.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=It.getSdkProperties();if(!await It.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return It.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await It.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Zi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Oi.CONVERT_SLIPPAGE_TOLERANCE},projectId:Mt.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=It.getSdkProperties();if(!await It.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return It.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=It.getSdkProperties();if(!await It.isNetworkSupported((l=J.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Gh.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=et.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await It.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return et.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await It.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?It.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await It.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?It.get({path:`/v1/profile/reverse/${t}`,params:{sender:_n.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await It.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?It.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await It.isNetworkSupported((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Zi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await It.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Zi.api.post({path:"/v1/generators/onrampurl",params:{projectId:Mt.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await It.isNetworkSupported((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await It.get({path:"/v1/onramp/options"})}catch{return sGe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await It.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Zi.api.post({path:"/v1/onramp/quote",params:{projectId:Mt.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await It.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?It.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await It.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Zi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Mt.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Zi.clientId=t,Zi.api=new H1({baseUrl:Lne,clientId:t})}},S2={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return hm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},O$={async getMyTokensWithBalance(t){const e=_n.state.address,n=J.state.activeCaipNetwork,r=at.getConnectorId("eip155")===fe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=et.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===fe.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await It.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=S2.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await it.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await it.walletGetAssets({account:t,chainFilter:[s]});if(!S2.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>S2.createBalance(l,e.caipNetworkId));return et.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},cl=lr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),iGe={state:cl,replaceState(t){t&&Object.assign(cl,ib(t))},subscribe(t){return J.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return J.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){J.setAccountProp("status",t,e)},getCaipAddress(t){return J.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ft.getPlainAddress(t):void 0;e===J.state.activeChain&&(J.state.activeCaipAddress=t),J.setAccountProp("caipAddress",t,e),J.setAccountProp("address",n,e)},setBalance(t,e,n){J.setAccountProp("balance",t,n),J.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){J.setAccountProp("profileName",t,e)},setProfileImage(t,e){J.setAccountProp("profileImage",t,e)},setUser(t,e){J.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){J.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){J.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){J.setAccountProp("currentTab",t,J.state.activeChain)},setTokenBalance(t,e){t&&J.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){J.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=J.getAccountProp("addressLabels",n)||new Map;r.set(t,e),J.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=J.getAccountProp("addressLabels",e)||new Map;n.delete(t),J.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){J.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){J.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&J.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){J.setAccountProp("socialWindow",t?ib(t):void 0,e)},setFarcasterUrl(t,e){J.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;cl.balanceLoading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?ft.getPlainAddress(r):void 0;if(cl.lastRetry&&!ft.isAllowedRetry(cl.lastRetry,30*Oi.ONE_SEC_MS))return cl.balanceLoading=!1,[];try{if(s&&e&&n){const a=await O$.getMyTokensWithBalance();return _n.setTokenBalance(a,n),cl.lastRetry=void 0,cl.balanceLoading=!1,a}}catch(a){cl.lastRetry=Date.now(),t==null||t(a),Gh.showError("Token Balance Unavailable")}finally{cl.balanceLoading=!1}return[]},resetAccount(t){J.resetAccount(t)}},_n=ec(iGe),oGe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=J.state.activeCaipNetwork,r=Pt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=_n.getCaipAddress(J.state.activeChain),o=t.chainNamespace!==J.state.activeChain,a=_n.getCaipAddress(t.chainNamespace),l=at.getConnectorId(J.state.activeChain)===fe.CONNECTOR_ID.AUTH,u=fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Pt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Pt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Pt.push("SwitchNetwork",{...r,network:t})}},Xi=lr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),aGe={state:Xi,subscribe(t){return xo(Xi,()=>t(Xi))},subscribeKey(t,e){return ji(Xi,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=J.state.activeChain,r=e&&e!==n,s=(i=J.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(it.state.wcBasic?Ct.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Ct.prefetch(),at.setFilterByNamespace(t==null?void 0:t.namespace),er.setLoading(!0,e),e&&r){const a=((o=J.getNetworkData(e))==null?void 0:o.caipNetwork)||J.getRequestedCaipNetworks(e)[0];a&&oGe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=J.state.noAdapters;Mt.state.manualWCControl||a&&!s?ft.isMobile()?Pt.reset("AllWallets"):Pt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Pt.reset(t.view,t.data):s?Pt.reset("Account"):Pt.reset("Connect")}Xi.open=!0,g0.set({open:!0}),vr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=Mt.state.enableEmbedded,e=!!J.state.activeCaipAddress;Xi.open&&vr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Xi.open=!1,Pt.reset("Connect"),er.clearLoading(),t?e?Pt.replace("Account"):Pt.push("Connect"):g0.set({open:!1}),it.resetUri()},setLoading(t,e){e&&Xi.loadingNamespaceMap.set(e,t),Xi.loading=t,g0.set({loading:t})},clearLoading(){Xi.loadingNamespaceMap.clear(),Xi.loading=!1},shake(){Xi.shake||(Xi.shake=!0,setTimeout(()=>{Xi.shake=!1},500))}},er=ec(aGe),VW=2147483648,cGe={convertEVMChainIdToCoinType(t){if(t>=VW)throw new Error("Invalid chainId");return(VW|t)>>>0}},ya=lr({suggestions:[],loading:!1}),lGe={state:ya,subscribe(t){return xo(ya,()=>t(ya))},subscribeKey(t,e){return ji(ya,t,e)},async resolveName(t){var e,n;try{return await It.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await It.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ya.loading=!0,ya.suggestions=[];const e=await It.getEnsNameSuggestions(t);return ya.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ya.suggestions}catch(e){const n=gx.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ya.loading=!1}},async getNamesForAddress(t){try{if(!J.state.activeCaipNetwork)return[];const n=et.getEnsFromCacheForAddress(t);if(n)return n;const r=await It.reverseLookupEnsName({address:t});return et.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=gx.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=J.state.activeCaipNetwork,n=_n.state.address,r=at.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");ya.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Pt.pushTransactionStack({onCancel(){Pt.replace("RegisterAccountName")}});const i=await it.signMessage(s);ya.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=cGe.convertEVMChainIdToCoinType(Number(o));await It.registerEnsName({coinType:a,address:n,signature:i,message:s}),_n.setProfileName(t,e.chainNamespace),Pt.replace("RegisterAccountNameSuccess")}catch(s){const i=gx.parseEnsApiError(s,`Error registering name ${t}`);throw Pt.replace("RegisterAccountName"),new Error(i)}finally{ya.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},gx=ec(lGe);let np=null;const rh={getSIWX(){return Mt.state.siwx},async initializeIfEnabled(){var i;const t=Mt.state.siwx,e=J.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(J.checkIfSupportedNetwork(n))try{if(np&&await np,(await t.getSessions(`${n}:${r}`,s)).length)return;await er.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),vr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=it._getClient())==null?void 0:i.disconnect().catch(console.error)),Pt.reset("Connect"),Gh.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Mt.state.siwx,e=ft.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork(),r=it._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();at.getConnectorId(n.chainNamespace)===fe.CONNECTOR_ID.AUTH&&Pt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),J.setLastConnectedSIWECaipNetwork(n),er.close(),vr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!er.state.open||Pt.state.view==="ApproveTransaction")&&await er.open({view:"SIWXSignMessage"}),Gh.showError("Error signing message"),vr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=J.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,ft.getPlainAddress(J.getActiveCaipAddress())||""));s&&s.length>0?await J.switchActiveNetwork(r):await it.disconnect()}else await it.disconnect()}else er.close();er.close(),vr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=J.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,ft.getPlainAddress(J.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=Mt.state.siwx,e=ft.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Pt.state.view==="ApproveTransaction",r=Pt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=rh.getSIWX();if(!i||!s.includes(fe.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=J.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await rh.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(np)return np;const r=rh.getSIWX();return r?(np=r.addSession({data:t,message:e,signature:n}).finally(()=>{np=null}),np):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=rh.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Gh.showLoading("Authenticating...",{autoClose:!1}),_n.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),vr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:rh.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),vr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:rh.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Gh.hide()}}return!0},getSIWXEventProperties(){var e;const t=J.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:tu(t)===qs.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Uo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:fe.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},qo={ConnectorExplorerIds:{[fe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[fe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[fe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[fe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[fe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Uo.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Uo.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Uo.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Uo.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Uo.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Uo.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Uo.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Uo.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Uo.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Uo.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Uo.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[fe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[fe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[fe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[fe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[fe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[fe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[fe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[fe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[fe.CONNECTOR_ID.COINBASE]:"Coinbase",[fe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[fe.CONNECTOR_ID.LEDGER]:"Ledger",[fe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[fe.CONNECTOR_ID.INJECTED]:"INJECTED",[fe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[fe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[fe.CONNECTOR_ID.AUTH]:"AUTH",[Uo.CONNECTOR_TYPE_AUTH]:"AUTH"}},go={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Uo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=J.state.activeChain;return fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>at.getConnectorId(e)===fe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},uGe=new AbortController,Vd={EmbeddedWalletAbortController:uGe,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},dGe="rpc.walletconnect.org";function KW(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const x2=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],iE={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===dGe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:fe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${fe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return x2.includes(e)?KW(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:qo.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>iE.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ua(a.url,a.config))}),x2.includes(t.caipNetworkId)&&r.push(Ua(KW(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ua(a))}),mI(r)},extendWagmiTransports(t,e,n){if(x2.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return mI([n,Ua(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:fe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=et.getActiveCaipNetworkId(),n=J.getAllRequestedCaipNetworks(),r=Array.from(((c=J.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},YW={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ms={set(t,e){Pl.isClient&&localStorage.setItem(`${Qe.STORAGE_KEY}${t}`,e)},get(t){return Pl.isClient?localStorage.getItem(`${Qe.STORAGE_KEY}${t}`):null},delete(t,e){Pl.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Qe.STORAGE_KEY}${t}`))}},_S=30*1e3,Pl={checkIfAllowedToTriggerEmail(){const t=Ms.get(Qe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<_S){const n=Math.ceil((_S-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ms.get(Qe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<_S)return Math.ceil((_S-e)/1e3)}return 0},checkIfRequestExists(t){return qs.NOT_SAFE_RPC_METHODS.includes(t.method)||qs.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(YW.transactionHash))||(t==null?void 0:t.match(YW.signedMessage)))?Qe.RPC_RESPONSE_TYPE_TX:Qe.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return qs.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Sr=E.object({message:E.string()});function Ue(t){return E.literal(Qe[t])}const mR=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const hGe=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),fGe=E.object({email:E.string().email()}),pGe=E.object({otp:E.string()}),gGe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(mR),rpcUrl:E.optional(E.string())}),mGe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(mR),rpcUrl:E.optional(E.string())}),yGe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),wGe=E.object({email:E.string().email()}),bGe=E.object({otp:E.string()}),vGe=E.object({otp:E.string()}),EGe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),CGe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),_Ge=E.object({type:E.string()}),AGe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),SGe=E.object({url:E.string()}),xGe=E.object({userName:E.string()}),IGe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([qs.ACCOUNT_TYPES.EOA,qs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(mR)}),NGe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),TGe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([qs.ACCOUNT_TYPES.EOA,qs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(mR)}),RGe=E.object({uri:E.string()}),PGe=E.object({isConnected:E.boolean()}),OGe=E.object({chainId:E.string().or(E.number())}),kGe=E.object({chainId:E.string().or(E.number())}),DGe=E.object({newEmail:E.string().email()}),MGe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const LGe=E.object({version:E.string().optional()}),UGe=E.object({type:E.string(),address:E.string()}),$Ge=E.any(),BGe=E.object({method:E.literal("eth_accounts")}),FGe=E.object({method:E.literal("eth_blockNumber")}),jGe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),WGe=E.object({method:E.literal("eth_chainId")}),zGe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),HGe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),GGe=E.object({method:E.literal("eth_gasPrice")}),qGe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),VGe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),KGe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),YGe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),QGe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),JGe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),ZGe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),XGe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),eqe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),tqe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),nqe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),rqe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),sqe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),iqe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),oqe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),aqe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),cqe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),lqe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),uqe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),dqe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),hqe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),fqe=E.object({method:E.literal("eth_newBlockFilter")}),pqe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),gqe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),mqe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),yqe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),wqe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),QW=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),bqe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),vqe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),Eqe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),Cqe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),_qe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),Aqe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),Sqe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),xqe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),Iqe=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),Nqe=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),Tqe=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),Rqe=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),JW=E.object({token:E.string()}),$e=E.object({id:E.string().optional()}),kv={appEvent:$e.extend({type:Ue("APP_SWITCH_NETWORK"),payload:hGe}).or($e.extend({type:Ue("APP_CONNECT_EMAIL"),payload:fGe})).or($e.extend({type:Ue("APP_CONNECT_DEVICE")})).or($e.extend({type:Ue("APP_CONNECT_OTP"),payload:pGe})).or($e.extend({type:Ue("APP_CONNECT_SOCIAL"),payload:gGe})).or($e.extend({type:Ue("APP_GET_FARCASTER_URI")})).or($e.extend({type:Ue("APP_CONNECT_FARCASTER")})).or($e.extend({type:Ue("APP_GET_USER"),payload:E.optional(mGe)})).or($e.extend({type:Ue("APP_GET_SOCIAL_REDIRECT_URI"),payload:yGe})).or($e.extend({type:Ue("APP_SIGN_OUT")})).or($e.extend({type:Ue("APP_IS_CONNECTED"),payload:E.optional(JW)})).or($e.extend({type:Ue("APP_GET_CHAIN_ID")})).or($e.extend({type:Ue("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or($e.extend({type:Ue("APP_INIT_SMART_ACCOUNT")})).or($e.extend({type:Ue("APP_SET_PREFERRED_ACCOUNT"),payload:_Ge})).or($e.extend({type:Ue("APP_RPC_REQUEST"),payload:QW.or(Rqe).or(BGe).or(FGe).or(jGe).or(WGe).or(zGe).or(HGe).or(GGe).or(qGe).or(VGe).or(KGe).or(YGe).or(QGe).or(JGe).or(ZGe).or(XGe).or(eqe).or(tqe).or(nqe).or(rqe).or(sqe).or(iqe).or(oqe).or(aqe).or(cqe).or(lqe).or(uqe).or(dqe).or(hqe).or(fqe).or(pqe).or(gqe).or(mqe).or(yqe).or(wqe).or(QW).or(bqe).or(vqe).or(Eqe).or(Cqe).or(_qe).or(Aqe).or(xqe).or(Sqe).or(Iqe).or(Nqe).or(Tqe).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or($e.extend({type:Ue("APP_UPDATE_EMAIL"),payload:wGe})).or($e.extend({type:Ue("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:bGe})).or($e.extend({type:Ue("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:vGe})).or($e.extend({type:Ue("APP_SYNC_THEME"),payload:EGe})).or($e.extend({type:Ue("APP_SYNC_DAPP_DATA"),payload:CGe})).or($e.extend({type:Ue("APP_RELOAD")})).or($e.extend({type:Ue("APP_RPC_ABORT")})),frameEvent:$e.extend({type:Ue("FRAME_SWITCH_NETWORK_ERROR"),payload:Sr}).or($e.extend({type:Ue("FRAME_SWITCH_NETWORK_SUCCESS"),payload:kGe})).or($e.extend({type:Ue("FRAME_CONNECT_EMAIL_SUCCESS"),payload:AGe})).or($e.extend({type:Ue("FRAME_CONNECT_EMAIL_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:SGe})).or($e.extend({type:Ue("FRAME_GET_FARCASTER_URI_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:xGe})).or($e.extend({type:Ue("FRAME_CONNECT_FARCASTER_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_CONNECT_OTP_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_CONNECT_OTP_SUCCESS")})).or($e.extend({type:Ue("FRAME_CONNECT_DEVICE_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_CONNECT_DEVICE_SUCCESS")})).or($e.extend({type:Ue("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:IGe})).or($e.extend({type:Ue("FRAME_CONNECT_SOCIAL_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_GET_USER_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_GET_USER_SUCCESS"),payload:TGe})).or($e.extend({type:Ue("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:RGe})).or($e.extend({type:Ue("FRAME_SIGN_OUT_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_SIGN_OUT_SUCCESS")})).or($e.extend({type:Ue("FRAME_IS_CONNECTED_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_IS_CONNECTED_SUCCESS"),payload:PGe})).or($e.extend({type:Ue("FRAME_GET_CHAIN_ID_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_GET_CHAIN_ID_SUCCESS"),payload:OGe})).or($e.extend({type:Ue("FRAME_RPC_REQUEST_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_RPC_REQUEST_SUCCESS"),payload:$Ge})).or($e.extend({type:Ue("FRAME_SESSION_UPDATE"),payload:JW})).or($e.extend({type:Ue("FRAME_UPDATE_EMAIL_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_UPDATE_EMAIL_SUCCESS"),payload:NGe})).or($e.extend({type:Ue("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or($e.extend({type:Ue("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:DGe})).or($e.extend({type:Ue("FRAME_SYNC_THEME_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_SYNC_THEME_SUCCESS")})).or($e.extend({type:Ue("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or($e.extend({type:Ue("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:MGe})).or($e.extend({type:Ue("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:UGe})).or($e.extend({type:Ue("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_READY"),payload:LGe})).or($e.extend({type:Ue("FRAME_RELOAD_ERROR"),payload:Sr})).or($e.extend({type:Ue("FRAME_RELOAD_SUCCESS")}))};function I2(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function Pqe({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=fe.BLOCKCHAIN_API_RPC_URL}){const i=new URL(MHe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class Oqe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=fe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!I2(Qe.FRAME_EVENT_KEY,u))return;const d=kv.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Pl.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Pl.isClient&&window.addEventListener("message",({data:a})=>{if(!I2(Qe.FRAME_EVENT_KEY,a))return;const c=kv.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Pl.isClient&&window.addEventListener("message",({data:a})=>{if(!I2(Qe.APP_EVENT_KEY,a))return;const c=kv.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Pl.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");kv.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Pl.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");kv.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Pl.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=Pqe({projectId:e,chainId:r,version:UHe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class kqe{constructor(e){var i;const n=Cm({level:LHe}),{logger:r,chunkLoggerController:s}=OT({opts:n});this.logger=Ys(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Dqe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new kqe(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new Oqe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ms.get(Qe.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ms.get(Qe.EMAIL)}getUsername(){return Ms.get(Qe.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Qe.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Pl.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Qe.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Qe.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Qe.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Qe.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Qe.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Qe.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Qe.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Qe.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Qe.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Qe.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Qe.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Qe.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Qe.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Qe.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Qe.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Qe.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Qe.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Qe.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Qe.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Qe.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(qs.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Qe.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Qe.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Qe.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:qs.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{qs.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Qe.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Qe.APP_SYNC_DAPP_DATA,Qe.APP_SYNC_THEME,Qe.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Qe.APP_CONNECT_EMAIL,Qe.APP_CONNECT_DEVICE,Qe.APP_CONNECT_OTP,Qe.APP_CONNECT_SOCIAL,Qe.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,A;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ms.set(Qe.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ms.set(Qe.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ms.set(Qe.EMAIL,e),Ms.set(Qe.EMAIL_LOGIN_USED_KEY,"true"),Ms.delete(Qe.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ms.delete(Qe.EMAIL_LOGIN_USED_KEY),Ms.delete(Qe.EMAIL),Ms.delete(Qe.LAST_USED_CHAIN_KEY),Ms.delete(Qe.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ms.set(Qe.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ms.get(Qe.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ms.set(Qe.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Hh.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class m0{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return m0.instance||(m0.instance=new Dqe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),m0.instance}}const Mqe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},ZW={filterOutDuplicatesByRDNS(t){const e=Mt.state.enableEIP6963?at.state.connectors:[],n=et.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ft.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=at.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=et.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=at.state,{featuredWalletIds:n}=Mt.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=Mt.state.features)==null?void 0:c.connectMethodsOrder),r=e||at.state.connectors;if(n)return n;const{injected:s,announced:i}=mx.getConnectorsByType(r,Ct.state.recommended,Ct.state.featured),o=s.filter(mx.showConnector),a=i.filter(mx.showConnector);return o.length||a.length?["wallet","email","social"]:Mqe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Ct.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Ct.state.excludedWallets.some(r=>go.isLowerCaseMatch(r.name,t.name));return e||n}},mx={getConnectorsByType(t,e,n){const{customWallets:r}=Mt.state,s=et.getRecentWallets(),i=ZW.filterOutDuplicateWallets(e),o=ZW.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Ct.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Ct.state.excludedWallets.some(i=>go.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ft.isMobile()||ft.isMobile()&&!e&&!it.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(J.state.chains.values()).some(n=>at.getConnectorId(n.namespace)===fe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=Mt.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:Mt.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ft.isMobile())return{accounts:[],chainId:void 0};if(t.id===fe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};sd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;sd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;sd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const yx={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([yx.getAddresses(t),yx.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:yx.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[qo.NetworkImageIds[e.id]]}]})}},yy={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function G1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const XW=G1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),ez=G1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});G1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});G1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});G1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const Lqe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Ag={getMethodsByChainNamespace(t){return Lqe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case XW.caipNetworkId:u.chains.push(XW.deprecatedCaipNetworkId);break;case ez.caipNetworkId:u.chains.push(ez.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await gx.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Ag.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Ag.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>ft.isCaipAddress(d)).map(d=>Hh.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Hh.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class Uqe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case fe.CHAIN.EVM:await this.syncEVMConnections(e);break;case fe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case fe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const c=Ag.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await mx.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==fe.CONNECTOR_ID.AUTH&&a.id!==fe.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const c=Ag.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,y;if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const b=Ag.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>ft.createAccount(fe.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:fe.CHAIN.BITCOIN,publicKey:((h=u[yy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[yy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[yy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:fe.CHAIN.BITCOIN,publicKey:((g=u[yy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[yy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((y=u[yy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>go.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>go.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>go.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>go.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>go.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class Une{constructor({provider:e,namespace:n}){this.id=fe.CONNECTOR_ID.WALLET_CONNECT,this.name=qo.ConnectorNamesMap[fe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=qo.ConnectorImageIds[fe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=J.getCaipNetworks.bind(J),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=Mt.state.universalProviderConfigOverride,s=Ag.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return rh.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:$qe})}}const $qe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],Bqe=[fe.CONNECTOR_ID.AUTH,fe.CONNECTOR_ID.WALLET_CONNECT];class Fqe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>J.getCaipNetworks(n),this.getConnectorId=n=>at.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new Uqe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:fe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:fe.CONNECTOR_ID.AUTH,type:"AUTH",name:fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:qo.ConnectorImageIds[fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!go.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){_n.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=tu(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Une);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ft.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ft.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=ft.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&go.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=ft.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),go.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?yx.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),go.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(Bqe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function jqe(t){let e=[],n,r;function s(a){return oN.parseEvmChainId(a)||1}function i(){var a;return n||(n=m0.getInstance({projectId:t.options.projectId,chainId:(a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?up.open(Vd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?up.open(Vd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&up.open(Vd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Vd.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>J.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=oN.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=w||y,!l)throw new Error("ChainId not found in provider")}const u=tu("eip155"),{address:d,chainId:h,accounts:f}=await rh.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:fe.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:fe.CONNECTOR_ID.AUTH,name:fe.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:fe.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=m0.getInstance({projectId:t.options.projectId,chainId:(c=J.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Vd.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?up.open(Vd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?up.open(Vd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&up.open(Vd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>J.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=J.state.activeChain===fe.CHAIN.EVM;if(fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>at.getConnectorId(h)===fe.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Yl(new Error("chain not found on connector."));const d=await this.getProvider(),h=tu("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Yl(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Yu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}k$.type="walletConnect";function k$(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:k$.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=J.getCaipNetworks(),w=await this.getProvider();if(!w)throw new eh;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=Mt.state.universalProviderConfigOverride;if(!w.session||y){const S=Ag.createNamespaces(g,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const v=await this.getAccounts(),A=await this.getChainId(),_=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,I=_==null?void 0:_.some(S=>Number(S.split(":")[1])===A);let x=1;I?x=A:_!=null&&_[0]&&(x=Number(_[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const N=b==null?void 0:b.defaultChain;return w.setDefaultChain(N??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Zr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,y,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[fe.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=et.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=et.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],b=y==null?void 0:y.find(v=>v.id===w);b&&b.chainNamespace===fe.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,y,b;const d=(g=e.getCaipNetwork(fe.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[fe.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=J.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,b;const f=await this.getProvider();if(!f)throw new eh;const p=J.getCaipNetworks().find(v=>v.id===h);if(!p)throw new Yl(new BC);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new Zr(A);try{let _;d!=null&&d.blockExplorerUrls?_=d.blockExplorerUrls:_=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const I=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],x={blockExplorerUrls:_,chainId:nt(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:I};await f.request({method:"wallet_addEthereumChain",params:[x]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,h]),{...p,id:p.id}}catch(_){throw new Zr(_)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Yu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(J.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[fe.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Dv=lr({pendingTransactions:0}),tz={state:Dv,subscribeKey(t,e){return ji(Dv,t,e)},increase(t){Dv[t]+=1},decrease(t){Dv[t]-=1},reset(t){Dv[t]=0}};function Wqe(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function zqe(t){if(ft.isSafeApp()){const{safe:e}=await ci(async()=>{const{safe:n}=await import("./index-Cu6_dfEf.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function Hqe(t){try{const{coinbaseWallet:e}=await ci(async()=>{const{coinbaseWallet:n}=await import("./index-Cu6_dfEf.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Gqe={enable:!1,pollingInterval:3e4};class qqe extends Fqe{constructor(e){const n=iE.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=fe.CHAIN.EVM,this.adapterType=fe.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Gqe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===fe.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ft.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=o0(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ft.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=o0(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===fe.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=iE.getCaipNetworkId(s);i?n[s.id]=iE.extendWagmiTransports(s,e.projectId,i):n[s.id]=iE.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=JQ({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=S_e(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),tz.increase("pendingTransactions")}});const e=tz.subscribeKey("pendingTransactions",n=>{var r;n>=fe.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){HQ(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),GQ(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===fe.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:et.getConnectedSocialProvider(),username:et.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await Hqe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await zqe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(k$(e,n)),e.enableEIP6963!==!1&&r.push(ST({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(jqe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:qo.ConnectorNamesMap[r.id]??r.name,imageId:qo.ConnectorImageIds[r.id],type:qo.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===fe.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await C_e(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=o0(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await v_e(this.wagmiConfig,s);const i=await E_e(this.wagmiConfig,s);return await VQ(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(oN.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await KQ(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await p_e(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return VEe(e.value,e.decimals)}formatUnits(e){return hm(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===fe.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===fe.CONNECTOR_ID.AUTH||e.id===fe.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:qo.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:qo.ConnectorNamesMap[e.id]??e.name,imageId:qo.ConnectorImageIds[e.id],type:qo.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===fe.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){qQ(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=mc(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(ft.isSafeApp()&&n===fe.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await jS(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await jS(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await qD(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===fe.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((b,v)=>go.isLowerCaseMatch(b,r)?-1:go.isLowerCaseMatch(v,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await jS(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await GD(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=et.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await zQ(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});et.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=mc(this.wagmiConfig).find(i=>go.isLowerCaseMatch(i.connector.id,e.id));return await zD(this.wagmiConfig,{connector:n}),Mt.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=mc(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await zD(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await qD(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=mc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=Wqe(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=mc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=mc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=mc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:fe.CONNECTOR_ID.AUTH,type:"AUTH",name:fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:qo.ConnectorImageIds[fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=mc(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(J.state.activeChain==="eip155")return;GD(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new Une({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const $ne="7c65f27254d6ddd24cf7eedf2685c4fb",Vqe={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},Kqe=new qqe({projectId:$ne,networks:[Qo,bI,WI,bee,zI,HI,GI],pendingTransactionsFilter:{enable:!0,pollingInterval:1e3}}),Yqe=X4e({projectId:$ne,metadata:Vqe,adapters:[Kqe],networks:[Qo,bI,WI,bee,zI,HI,GI],features:{analytics:!0}});Eee(Yqe);const Qqe=new _1e,Jqe=typeof window<"u"&&window.location.hostname.startsWith("chess."),Zqe=()=>yje("(max-width: 768px)")?m.jsx(mje,{}):m.jsx(cje,{});Y2.createRoot(document.getElementById("root")).render(m.jsx(Zo.StrictMode,{children:m.jsx(V_e,{config:wje,children:m.jsx(G1e,{client:Qqe,children:m.jsx(oje,{children:m.jsx(rje,{children:Jqe?m.jsx(sx,{path:"/*",element:m.jsx(FW,{})}):m.jsxs(m.Fragment,{children:[m.jsx(sx,{path:"/",element:m.jsx(Zqe,{})}),m.jsx(sx,{path:"/chess",element:m.jsx(FW,{})})]})})})})})}));export{PKe as $,Ke as A,wt as B,Be as C,lt as D,TE as E,f3 as F,qv as G,Ic as H,LAe as I,Un as J,DKe as K,c5 as L,vs as M,OAe as N,be as O,Dd as P,ex as Q,qt as R,Oc as S,co as T,fSe as U,OE as V,Hs as W,TKe as X,bs as Y,im as Z,xl as _,nx as a,hee as a0,l5 as a1,Yw as a2,ci as a3,xVe as a4,Yu as a5,Yl as a6,BC as a7,nt as a8,Zr as a9,pz as aA,yVe as aB,CC as aC,pwe as aD,L_e as aE,Ja as aF,Ya as aG,hQ as aH,LEe as aI,eh as aa,iQ as ab,ST as ac,pe as ad,XL as ae,os as af,Ibe as ag,bT as ah,uU as ai,Obe as aj,p1 as ak,Ga as al,$f as am,_E as an,Kl as ao,LDe as ap,yKe as aq,mj as ar,zZ as as,xDe as at,UDe as au,wKe as av,mKe as aw,WT as ax,EKe as ay,bKe as az,Bn as b,Fe as c,ct as d,H as e,gr as f,Qu as g,kKe as h,sd as i,Ko as j,bt as k,lo as l,vke as m,Ml as n,S4e as o,Ye as p,Nl as q,OKe as r,Cn as s,vJ as t,cr as u,X4 as v,ua as w,NKe as x,pi as y,hi as z};
