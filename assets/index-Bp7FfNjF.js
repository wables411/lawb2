const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-bXUULimP.js","assets/hmac-1sSuisKG.js","assets/secp256k1-CCewJa4z.js","assets/embedded-wallet-Dnuh5cDw.js","assets/if-defined-BHdjTtIe.js","assets/index-BBXl6XAY.js","assets/index-DPVLcEBZ.js","assets/ref-DV-As3jw.js","assets/index-BRFg65NP.js","assets/index-DYfuZoI7.js","assets/index-CdtjQIKK.js","assets/index-BQR1Dyvq.js","assets/index-CgrAQJ8u.js","assets/index-D7LZQ6Qj.js","assets/index-C5JR-7PF.js","assets/email-GLz6IISo.js","assets/index-CpSaF8jp.js","assets/socials-q0-nBcsT.js","assets/index-BTYPlUw6.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-DixOVatz.js","assets/index-BRaXJKkE.js","assets/index-Du8pYP3s.js","assets/index-DLWix9VC.js","assets/swaps-DAsJ_YcH.js","assets/index-DlqHdr6F.js","assets/index-BwO0M9UI.js","assets/index-DhA5Vx2D.js","assets/send-D_gvK26P.js","assets/index-BoX1k7FO.js","assets/index-B-lWGYtx.js","assets/receive-DPN7rvsN.js","assets/index-D8PLFAUp.js","assets/onramp-raK3wOP0.js","assets/index-HXvxb7zM.js","assets/index-4-t_y9JS.js","assets/index-DEGw8JYl.js","assets/transactions-BhWkdO_S.js","assets/index-DatZh8pO.js","assets/index-CBcjtt5d.js","assets/index-CJnD2CWS.js","assets/index-CLS79m8e.js","assets/index-Bqg7rjRP.js","assets/w3m-modal-BpqXXi0h.js"])))=>i.map(i=>d[i]);
var hI=t=>{throw TypeError(t)};var Mb=(t,e,n)=>e.has(t)||hI("Cannot "+n);var B=(t,e,n)=>(Mb(t,e,"read from private field"),n?n.call(t):e.get(t)),Be=(t,e,n)=>e.has(t)?hI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ae=(t,e,n,r)=>(Mb(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),st=(t,e,n)=>(Mb(t,e,"access private method"),n);var ey=(t,e,n,r)=>({set _(s){Ae(t,e,s,n)},get _(){return B(t,e,r)}});function QL(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Su(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function rv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var XR={exports:{}},sv={},e3={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm=Symbol.for("react.element"),JL=Symbol.for("react.portal"),ZL=Symbol.for("react.fragment"),XL=Symbol.for("react.strict_mode"),eM=Symbol.for("react.profiler"),tM=Symbol.for("react.provider"),nM=Symbol.for("react.context"),rM=Symbol.for("react.forward_ref"),sM=Symbol.for("react.suspense"),iM=Symbol.for("react.memo"),oM=Symbol.for("react.lazy"),fI=Symbol.iterator;function aM(t){return t===null||typeof t!="object"?null:(t=fI&&t[fI]||t["@@iterator"],typeof t=="function"?t:null)}var t3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n3=Object.assign,r3={};function Oh(t,e,n){this.props=t,this.context=e,this.refs=r3,this.updater=n||t3}Oh.prototype.isReactComponent={};Oh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function s3(){}s3.prototype=Oh.prototype;function _S(t,e,n){this.props=t,this.context=e,this.refs=r3,this.updater=n||t3}var ES=_S.prototype=new s3;ES.constructor=_S;n3(ES,Oh.prototype);ES.isPureReactComponent=!0;var pI=Array.isArray,i3=Object.prototype.hasOwnProperty,CS={current:null},o3={key:!0,ref:!0,__self:!0,__source:!0};function a3(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)i3.call(e,r)&&!o3.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:hm,type:t,key:i,ref:o,props:s,_owner:CS.current}}function cM(t,e){return{$$typeof:hm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xS(t){return typeof t=="object"&&t!==null&&t.$$typeof===hm}function lM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gI=/\/+/g;function Bb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lM(""+t.key):e.toString(36)}function fw(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hm:case JL:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Bb(o,0):r,pI(s)?(n="",t!=null&&(n=t.replace(gI,"$&/")+"/"),fw(s,e,n,"",function(l){return l})):s!=null&&(xS(s)&&(s=cM(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(gI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",pI(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Bb(i,a);o+=fw(i,e,n,c,s)}else if(c=aM(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Bb(i,a++),o+=fw(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ty(t,e,n){if(t==null)return t;var r=[],s=0;return fw(t,r,"","",function(i){return e.call(n,i,s++)}),r}function uM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qr={current:null},pw={transition:null},dM={ReactCurrentDispatcher:qr,ReactCurrentBatchConfig:pw,ReactCurrentOwner:CS};function c3(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:ty,forEach:function(t,e,n){ty(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ty(t,function(){e++}),e},toArray:function(t){return ty(t,function(e){return e})||[]},only:function(t){if(!xS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=Oh;ct.Fragment=ZL;ct.Profiler=eM;ct.PureComponent=_S;ct.StrictMode=XL;ct.Suspense=sM;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dM;ct.act=c3;ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=n3({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=CS.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)i3.call(e,c)&&!o3.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:hm,type:t.type,key:s,ref:i,props:r,_owner:o}};ct.createContext=function(t){return t={$$typeof:nM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tM,_context:t},t.Consumer=t};ct.createElement=a3;ct.createFactory=function(t){var e=a3.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:rM,render:t}};ct.isValidElement=xS;ct.lazy=function(t){return{$$typeof:oM,_payload:{_status:-1,_result:t},_init:uM}};ct.memo=function(t,e){return{$$typeof:iM,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=pw.transition;pw.transition={};try{t()}finally{pw.transition=e}};ct.unstable_act=c3;ct.useCallback=function(t,e){return qr.current.useCallback(t,e)};ct.useContext=function(t){return qr.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return qr.current.useDeferredValue(t)};ct.useEffect=function(t,e){return qr.current.useEffect(t,e)};ct.useId=function(){return qr.current.useId()};ct.useImperativeHandle=function(t,e,n){return qr.current.useImperativeHandle(t,e,n)};ct.useInsertionEffect=function(t,e){return qr.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return qr.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return qr.current.useMemo(t,e)};ct.useReducer=function(t,e,n){return qr.current.useReducer(t,e,n)};ct.useRef=function(t){return qr.current.useRef(t)};ct.useState=function(t){return qr.current.useState(t)};ct.useSyncExternalStore=function(t,e,n){return qr.current.useSyncExternalStore(t,e,n)};ct.useTransition=function(){return qr.current.useTransition()};ct.version="18.3.1";e3.exports=ct;var P=e3.exports;const $s=Su(P),hM=QL({__proto__:null,default:$s},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fM=P,pM=Symbol.for("react.element"),gM=Symbol.for("react.fragment"),mM=Object.prototype.hasOwnProperty,yM=fM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wM={key:!0,ref:!0,__self:!0,__source:!0};function l3(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mM.call(e,r)&&!wM.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:pM,type:t,key:i,ref:o,props:s,_owner:yM.current}}sv.Fragment=gM;sv.jsx=l3;sv.jsxs=l3;XR.exports=sv;var g=XR.exports,cE={},u3={exports:{}},Bs={},d3={exports:{}},h3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,$){var U=D.length;D.push($);e:for(;0<U;){var W=U-1>>>1,J=D[W];if(0<s(J,$))D[W]=$,D[U]=J,U=W;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var $=D[0],U=D.pop();if(U!==$){D[0]=U;e:for(var W=0,J=D.length,ie=J>>>1;W<ie;){var ne=2*(W+1)-1,se=D[ne],we=ne+1,Y=D[we];if(0>s(se,U))we<J&&0>s(Y,se)?(D[W]=Y,D[we]=U,W=we):(D[W]=se,D[ne]=U,W=ne);else if(we<J&&0>s(Y,U))D[W]=Y,D[we]=U,W=we;else break e}}return $}function s(D,$){var U=D.sortIndex-$.sortIndex;return U!==0?U:D.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var $=n(l);$!==null;){if($.callback===null)r(l);else if($.startTime<=D)r(l),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(l)}}function E(D){if(m=!1,v(D),!p)if(n(c)!==null)p=!0,T(_);else{var $=n(l);$!==null&&L(E,$.startTime-D)}}function _(D,$){p=!1,m&&(m=!1,y(A),A=-1),f=!0;var U=h;try{for(v($),d=n(c);d!==null&&(!(d.expirationTime>$)||D&&!O());){var W=d.callback;if(typeof W=="function"){d.callback=null,h=d.priorityLevel;var J=W(d.expirationTime<=$);$=t.unstable_now(),typeof J=="function"?d.callback=J:d===n(c)&&r(c),v($)}else r(c);d=n(c)}if(d!==null)var ie=!0;else{var ne=n(l);ne!==null&&L(E,ne.startTime-$),ie=!1}return ie}finally{d=null,h=U,f=!1}}var S=!1,x=null,A=-1,C=5,k=-1;function O(){return!(t.unstable_now()-k<C)}function M(){if(x!==null){var D=t.unstable_now();k=D;var $=!0;try{$=x(!0,D)}finally{$?F():(S=!1,x=null)}}else S=!1}var F;if(typeof b=="function")F=function(){b(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,N=V.port2;V.port1.onmessage=M,F=function(){N.postMessage(null)}}else F=function(){w(M,0)};function T(D){x=D,S||(S=!0,F())}function L(D,$){A=w(function(){D(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,T(_))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var U=h;h=$;try{return D()}finally{h=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=h;h=D;try{return $()}finally{h=U}},t.unstable_scheduleCallback=function(D,$,U){var W=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?W+U:W):U=W,D){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=U+J,D={id:u++,callback:$,priorityLevel:D,startTime:U,expirationTime:J,sortIndex:-1},U>W?(D.sortIndex=U,e(l,D),n(c)===null&&D===n(l)&&(m?(y(A),A=-1):m=!0,L(E,U-W))):(D.sortIndex=J,e(c,D),p||f||(p=!0,T(_))),D},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(D){var $=h;return function(){var U=h;h=$;try{return D.apply(this,arguments)}finally{h=U}}}})(h3);d3.exports=h3;var vM=d3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bM=P,Ls=vM;function de(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f3=new Set,zp={};function Au(t,e){uh(t,e),uh(t+"Capture",e)}function uh(t,e){for(zp[t]=e,t=0;t<e.length;t++)f3.add(e[t])}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lE=Object.prototype.hasOwnProperty,_M=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mI={},yI={};function EM(t){return lE.call(yI,t)?!0:lE.call(mI,t)?!1:_M.test(t)?yI[t]=!0:(mI[t]=!0,!1)}function CM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xM(t,e,n,r){if(e===null||typeof e>"u"||CM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ar[t]=new Hr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ar[e]=new Hr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ar[t]=new Hr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ar[t]=new Hr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ar[t]=new Hr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ar[t]=new Hr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ar[t]=new Hr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ar[t]=new Hr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ar[t]=new Hr(t,5,!1,t.toLowerCase(),null,!1,!1)});var SS=/[\-:]([a-z])/g;function AS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(SS,AS);ar[e]=new Hr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(SS,AS);ar[e]=new Hr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(SS,AS);ar[e]=new Hr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ar[t]=new Hr(t,1,!1,t.toLowerCase(),null,!1,!1)});ar.xlinkHref=new Hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ar[t]=new Hr(t,1,!1,t.toLowerCase(),null,!0,!0)});function IS(t,e,n,r){var s=ar.hasOwnProperty(e)?ar[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xM(e,n,s,r)&&(n=null),r||s===null?EM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ea=bM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ny=Symbol.for("react.element"),Cd=Symbol.for("react.portal"),xd=Symbol.for("react.fragment"),TS=Symbol.for("react.strict_mode"),uE=Symbol.for("react.profiler"),p3=Symbol.for("react.provider"),g3=Symbol.for("react.context"),NS=Symbol.for("react.forward_ref"),dE=Symbol.for("react.suspense"),hE=Symbol.for("react.suspense_list"),PS=Symbol.for("react.memo"),Ka=Symbol.for("react.lazy"),m3=Symbol.for("react.offscreen"),wI=Symbol.iterator;function hf(t){return t===null||typeof t!="object"?null:(t=wI&&t[wI]||t["@@iterator"],typeof t=="function"?t:null)}var dn=Object.assign,Fb;function Gf(t){if(Fb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fb=e&&e[1]||""}return`
`+Fb+t}var zb=!1;function Wb(t,e){if(!t||zb)return"";zb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{zb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gf(t):""}function SM(t){switch(t.tag){case 5:return Gf(t.type);case 16:return Gf("Lazy");case 13:return Gf("Suspense");case 19:return Gf("SuspenseList");case 0:case 2:case 15:return t=Wb(t.type,!1),t;case 11:return t=Wb(t.type.render,!1),t;case 1:return t=Wb(t.type,!0),t;default:return""}}function fE(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xd:return"Fragment";case Cd:return"Portal";case uE:return"Profiler";case TS:return"StrictMode";case dE:return"Suspense";case hE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case g3:return(t.displayName||"Context")+".Consumer";case p3:return(t._context.displayName||"Context")+".Provider";case NS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case PS:return e=t.displayName||null,e!==null?e:fE(t.type)||"Memo";case Ka:e=t._payload,t=t._init;try{return fE(t(e))}catch{}}return null}function AM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fE(e);case 8:return e===TS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function y3(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IM(t){var e=y3(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ry(t){t._valueTracker||(t._valueTracker=IM(t))}function w3(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=y3(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pE(t,e){var n=e.checked;return dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function v3(t,e){e=e.checked,e!=null&&IS(t,"checked",e,!1)}function gE(t,e){v3(t,e);var n=Hc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mE(t,e.type,n):e.hasOwnProperty("defaultValue")&&mE(t,e.type,Hc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mE(t,e,n){(e!=="number"||Hw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Kf=Array.isArray;function Ld(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hc(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function yE(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return dn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _I(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(de(92));if(Kf(n)){if(1<n.length)throw Error(de(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hc(n)}}function b3(t,e){var n=Hc(e.value),r=Hc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function EI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _3(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wE(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_3(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sy,E3=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sy=sy||document.createElement("div"),sy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sy.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var up={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TM=["Webkit","ms","Moz","O"];Object.keys(up).forEach(function(t){TM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),up[e]=up[t]})});function C3(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||up.hasOwnProperty(t)&&up[t]?(""+e).trim():e+"px"}function x3(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=C3(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var NM=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vE(t,e){if(e){if(NM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function bE(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _E=null;function kS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var EE=null,Md=null,Bd=null;function CI(t){if(t=gm(t)){if(typeof EE!="function")throw Error(de(280));var e=t.stateNode;e&&(e=lv(e),EE(t.stateNode,t.type,e))}}function S3(t){Md?Bd?Bd.push(t):Bd=[t]:Md=t}function A3(){if(Md){var t=Md,e=Bd;if(Bd=Md=null,CI(t),e)for(t=0;t<e.length;t++)CI(e[t])}}function I3(t,e){return t(e)}function T3(){}var qb=!1;function N3(t,e,n){if(qb)return t(e,n);qb=!0;try{return I3(t,e,n)}finally{qb=!1,(Md!==null||Bd!==null)&&(T3(),A3())}}function qp(t,e){var n=t.stateNode;if(n===null)return null;var r=lv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(de(231,e,typeof n));return n}var CE=!1;if(ha)try{var ff={};Object.defineProperty(ff,"passive",{get:function(){CE=!0}}),window.addEventListener("test",ff,ff),window.removeEventListener("test",ff,ff)}catch{CE=!1}function PM(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var dp=!1,Vw=null,Gw=!1,xE=null,kM={onError:function(t){dp=!0,Vw=t}};function OM(t,e,n,r,s,i,o,a,c){dp=!1,Vw=null,PM.apply(kM,arguments)}function RM(t,e,n,r,s,i,o,a,c){if(OM.apply(this,arguments),dp){if(dp){var l=Vw;dp=!1,Vw=null}else throw Error(de(198));Gw||(Gw=!0,xE=l)}}function Iu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function P3(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xI(t){if(Iu(t)!==t)throw Error(de(188))}function $M(t){var e=t.alternate;if(!e){if(e=Iu(t),e===null)throw Error(de(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return xI(s),t;if(i===r)return xI(s),e;i=i.sibling}throw Error(de(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(de(189))}}if(n.alternate!==r)throw Error(de(190))}if(n.tag!==3)throw Error(de(188));return n.stateNode.current===n?t:e}function k3(t){return t=$M(t),t!==null?O3(t):null}function O3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=O3(t);if(e!==null)return e;t=t.sibling}return null}var R3=Ls.unstable_scheduleCallback,SI=Ls.unstable_cancelCallback,DM=Ls.unstable_shouldYield,jM=Ls.unstable_requestPaint,vn=Ls.unstable_now,UM=Ls.unstable_getCurrentPriorityLevel,OS=Ls.unstable_ImmediatePriority,$3=Ls.unstable_UserBlockingPriority,Kw=Ls.unstable_NormalPriority,LM=Ls.unstable_LowPriority,D3=Ls.unstable_IdlePriority,iv=null,vo=null;function MM(t){if(vo&&typeof vo.onCommitFiberRoot=="function")try{vo.onCommitFiberRoot(iv,t,void 0,(t.current.flags&128)===128)}catch{}}var Mi=Math.clz32?Math.clz32:zM,BM=Math.log,FM=Math.LN2;function zM(t){return t>>>=0,t===0?32:31-(BM(t)/FM|0)|0}var iy=64,oy=4194304;function Yf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Yf(a):(i&=o,i!==0&&(r=Yf(i)))}else o=n&~s,o!==0?r=Yf(o):i!==0&&(r=Yf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mi(e),s=1<<n,r|=t[n],e&=~s;return r}function WM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mi(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=WM(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function SE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function j3(){var t=iy;return iy<<=1,!(iy&4194240)&&(iy=64),t}function Hb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mi(e),t[e]=n}function HM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mi(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function RS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mi(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var jt=0;function U3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var L3,$S,M3,B3,F3,AE=!1,ay=[],Ic=null,Tc=null,Nc=null,Hp=new Map,Vp=new Map,rc=[],VM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function AI(t,e){switch(t){case"focusin":case"focusout":Ic=null;break;case"dragenter":case"dragleave":Tc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Hp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vp.delete(e.pointerId)}}function pf(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=gm(e),e!==null&&$S(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function GM(t,e,n,r,s){switch(e){case"focusin":return Ic=pf(Ic,t,e,n,r,s),!0;case"dragenter":return Tc=pf(Tc,t,e,n,r,s),!0;case"mouseover":return Nc=pf(Nc,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Hp.set(i,pf(Hp.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vp.set(i,pf(Vp.get(i)||null,t,e,n,r,s)),!0}return!1}function z3(t){var e=Tl(t.target);if(e!==null){var n=Iu(e);if(n!==null){if(e=n.tag,e===13){if(e=P3(n),e!==null){t.blockedOn=e,F3(t.priority,function(){M3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gw(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=IE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);_E=r,n.target.dispatchEvent(r),_E=null}else return e=gm(n),e!==null&&$S(e),t.blockedOn=n,!1;e.shift()}return!0}function II(t,e,n){gw(t)&&n.delete(e)}function KM(){AE=!1,Ic!==null&&gw(Ic)&&(Ic=null),Tc!==null&&gw(Tc)&&(Tc=null),Nc!==null&&gw(Nc)&&(Nc=null),Hp.forEach(II),Vp.forEach(II)}function gf(t,e){t.blockedOn===e&&(t.blockedOn=null,AE||(AE=!0,Ls.unstable_scheduleCallback(Ls.unstable_NormalPriority,KM)))}function Gp(t){function e(s){return gf(s,t)}if(0<ay.length){gf(ay[0],t);for(var n=1;n<ay.length;n++){var r=ay[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ic!==null&&gf(Ic,t),Tc!==null&&gf(Tc,t),Nc!==null&&gf(Nc,t),Hp.forEach(e),Vp.forEach(e),n=0;n<rc.length;n++)r=rc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rc.length&&(n=rc[0],n.blockedOn===null);)z3(n),n.blockedOn===null&&rc.shift()}var Fd=Ea.ReactCurrentBatchConfig,Qw=!0;function YM(t,e,n,r){var s=jt,i=Fd.transition;Fd.transition=null;try{jt=1,DS(t,e,n,r)}finally{jt=s,Fd.transition=i}}function QM(t,e,n,r){var s=jt,i=Fd.transition;Fd.transition=null;try{jt=4,DS(t,e,n,r)}finally{jt=s,Fd.transition=i}}function DS(t,e,n,r){if(Qw){var s=IE(t,e,n,r);if(s===null)t1(t,e,r,Jw,n),AI(t,r);else if(GM(s,t,e,n,r))r.stopPropagation();else if(AI(t,r),e&4&&-1<VM.indexOf(t)){for(;s!==null;){var i=gm(s);if(i!==null&&L3(i),i=IE(t,e,n,r),i===null&&t1(t,e,r,Jw,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else t1(t,e,r,null,n)}}var Jw=null;function IE(t,e,n,r){if(Jw=null,t=kS(r),t=Tl(t),t!==null)if(e=Iu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=P3(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jw=t,null}function W3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UM()){case OS:return 1;case $3:return 4;case Kw:case LM:return 16;case D3:return 536870912;default:return 16}default:return 16}}var vc=null,jS=null,mw=null;function q3(){if(mw)return mw;var t,e=jS,n=e.length,r,s="value"in vc?vc.value:vc.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return mw=s.slice(t,1<r?1-r:void 0)}function yw(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cy(){return!0}function TI(){return!1}function Fs(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?cy:TI,this.isPropagationStopped=TI,this}return dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cy)},persist:function(){},isPersistent:cy}),e}var Rh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},US=Fs(Rh),pm=dn({},Rh,{view:0,detail:0}),JM=Fs(pm),Vb,Gb,mf,ov=dn({},pm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:LS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mf&&(mf&&t.type==="mousemove"?(Vb=t.screenX-mf.screenX,Gb=t.screenY-mf.screenY):Gb=Vb=0,mf=t),Vb)},movementY:function(t){return"movementY"in t?t.movementY:Gb}}),NI=Fs(ov),ZM=dn({},ov,{dataTransfer:0}),XM=Fs(ZM),eB=dn({},pm,{relatedTarget:0}),Kb=Fs(eB),tB=dn({},Rh,{animationName:0,elapsedTime:0,pseudoElement:0}),nB=Fs(tB),rB=dn({},Rh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sB=Fs(rB),iB=dn({},Rh,{data:0}),PI=Fs(iB),oB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cB[t])?!!e[t]:!1}function LS(){return lB}var uB=dn({},pm,{key:function(t){if(t.key){var e=oB[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yw(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aB[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:LS,charCode:function(t){return t.type==="keypress"?yw(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yw(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dB=Fs(uB),hB=dn({},ov,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kI=Fs(hB),fB=dn({},pm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:LS}),pB=Fs(fB),gB=dn({},Rh,{propertyName:0,elapsedTime:0,pseudoElement:0}),mB=Fs(gB),yB=dn({},ov,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wB=Fs(yB),vB=[9,13,27,32],MS=ha&&"CompositionEvent"in window,hp=null;ha&&"documentMode"in document&&(hp=document.documentMode);var bB=ha&&"TextEvent"in window&&!hp,H3=ha&&(!MS||hp&&8<hp&&11>=hp),OI=" ",RI=!1;function V3(t,e){switch(t){case"keyup":return vB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function G3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sd=!1;function _B(t,e){switch(t){case"compositionend":return G3(e);case"keypress":return e.which!==32?null:(RI=!0,OI);case"textInput":return t=e.data,t===OI&&RI?null:t;default:return null}}function EB(t,e){if(Sd)return t==="compositionend"||!MS&&V3(t,e)?(t=q3(),mw=jS=vc=null,Sd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return H3&&e.locale!=="ko"?null:e.data;default:return null}}var CB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $I(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CB[t.type]:e==="textarea"}function K3(t,e,n,r){S3(r),e=Zw(e,"onChange"),0<e.length&&(n=new US("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fp=null,Kp=null;function xB(t){i$(t,0)}function av(t){var e=Td(t);if(w3(e))return t}function SB(t,e){if(t==="change")return e}var Y3=!1;if(ha){var Yb;if(ha){var Qb="oninput"in document;if(!Qb){var DI=document.createElement("div");DI.setAttribute("oninput","return;"),Qb=typeof DI.oninput=="function"}Yb=Qb}else Yb=!1;Y3=Yb&&(!document.documentMode||9<document.documentMode)}function jI(){fp&&(fp.detachEvent("onpropertychange",Q3),Kp=fp=null)}function Q3(t){if(t.propertyName==="value"&&av(Kp)){var e=[];K3(e,Kp,t,kS(t)),N3(xB,e)}}function AB(t,e,n){t==="focusin"?(jI(),fp=e,Kp=n,fp.attachEvent("onpropertychange",Q3)):t==="focusout"&&jI()}function IB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return av(Kp)}function TB(t,e){if(t==="click")return av(e)}function NB(t,e){if(t==="input"||t==="change")return av(e)}function PB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qi=typeof Object.is=="function"?Object.is:PB;function Yp(t,e){if(qi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!lE.call(e,s)||!qi(t[s],e[s]))return!1}return!0}function UI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function LI(t,e){var n=UI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=UI(n)}}function J3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?J3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Z3(){for(var t=window,e=Hw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hw(t.document)}return e}function BS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kB(t){var e=Z3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&J3(n.ownerDocument.documentElement,n)){if(r!==null&&BS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=LI(n,i);var o=LI(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OB=ha&&"documentMode"in document&&11>=document.documentMode,Ad=null,TE=null,pp=null,NE=!1;function MI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;NE||Ad==null||Ad!==Hw(r)||(r=Ad,"selectionStart"in r&&BS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pp&&Yp(pp,r)||(pp=r,r=Zw(TE,"onSelect"),0<r.length&&(e=new US("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ad)))}function ly(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Id={animationend:ly("Animation","AnimationEnd"),animationiteration:ly("Animation","AnimationIteration"),animationstart:ly("Animation","AnimationStart"),transitionend:ly("Transition","TransitionEnd")},Jb={},X3={};ha&&(X3=document.createElement("div").style,"AnimationEvent"in window||(delete Id.animationend.animation,delete Id.animationiteration.animation,delete Id.animationstart.animation),"TransitionEvent"in window||delete Id.transitionend.transition);function cv(t){if(Jb[t])return Jb[t];if(!Id[t])return t;var e=Id[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in X3)return Jb[t]=e[n];return t}var e$=cv("animationend"),t$=cv("animationiteration"),n$=cv("animationstart"),r$=cv("transitionend"),s$=new Map,BI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nl(t,e){s$.set(t,e),Au(e,[t])}for(var Zb=0;Zb<BI.length;Zb++){var Xb=BI[Zb],RB=Xb.toLowerCase(),$B=Xb[0].toUpperCase()+Xb.slice(1);nl(RB,"on"+$B)}nl(e$,"onAnimationEnd");nl(t$,"onAnimationIteration");nl(n$,"onAnimationStart");nl("dblclick","onDoubleClick");nl("focusin","onFocus");nl("focusout","onBlur");nl(r$,"onTransitionEnd");uh("onMouseEnter",["mouseout","mouseover"]);uh("onMouseLeave",["mouseout","mouseover"]);uh("onPointerEnter",["pointerout","pointerover"]);uh("onPointerLeave",["pointerout","pointerover"]);Au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Au("onBeforeInput",["compositionend","keypress","textInput","paste"]);Au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qf));function FI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RM(r,e,void 0,t),t.currentTarget=null}function i$(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;FI(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;FI(s,a,l),i=c}}}if(Gw)throw t=xE,Gw=!1,xE=null,t}function Jt(t,e){var n=e[$E];n===void 0&&(n=e[$E]=new Set);var r=t+"__bubble";n.has(r)||(o$(e,t,2,!1),n.add(r))}function e1(t,e,n){var r=0;e&&(r|=4),o$(n,t,r,e)}var uy="_reactListening"+Math.random().toString(36).slice(2);function Qp(t){if(!t[uy]){t[uy]=!0,f3.forEach(function(n){n!=="selectionchange"&&(DB.has(n)||e1(n,!1,t),e1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uy]||(e[uy]=!0,e1("selectionchange",!1,e))}}function o$(t,e,n,r){switch(W3(e)){case 1:var s=YM;break;case 4:s=QM;break;default:s=DS}n=s.bind(null,e,n,t),s=void 0,!CE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function t1(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Tl(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}N3(function(){var l=i,u=kS(n),d=[];e:{var h=s$.get(t);if(h!==void 0){var f=US,p=t;switch(t){case"keypress":if(yw(n)===0)break e;case"keydown":case"keyup":f=dB;break;case"focusin":p="focus",f=Kb;break;case"focusout":p="blur",f=Kb;break;case"beforeblur":case"afterblur":f=Kb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=NI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=XM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=pB;break;case e$:case t$:case n$:f=nB;break;case r$:f=mB;break;case"scroll":f=JM;break;case"wheel":f=wB;break;case"copy":case"cut":case"paste":f=sB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=kI}var m=(e&4)!==0,w=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var b=l,v;b!==null;){v=b;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,y!==null&&(E=qp(b,y),E!=null&&m.push(Jp(b,E,v)))),w)break;b=b.return}0<m.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==_E&&(p=n.relatedTarget||n.fromElement)&&(Tl(p)||p[fa]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?Tl(p):null,p!==null&&(w=Iu(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(m=NI,E="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(m=kI,E="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:Td(f),v=p==null?h:Td(p),h=new m(E,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,E=null,Tl(u)===l&&(m=new m(y,b+"enter",p,n,u),m.target=v,m.relatedTarget=w,E=m),w=E,f&&p)t:{for(m=f,y=p,b=0,v=m;v;v=zu(v))b++;for(v=0,E=y;E;E=zu(E))v++;for(;0<b-v;)m=zu(m),b--;for(;0<v-b;)y=zu(y),v--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=zu(m),y=zu(y)}m=null}else m=null;f!==null&&zI(d,h,f,m,!1),p!==null&&w!==null&&zI(d,w,p,m,!0)}}e:{if(h=l?Td(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=SB;else if($I(h))if(Y3)_=NB;else{_=IB;var S=AB}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=TB);if(_&&(_=_(t,l))){K3(d,_,n,u);break e}S&&S(t,h,l),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&mE(h,"number",h.value)}switch(S=l?Td(l):window,t){case"focusin":($I(S)||S.contentEditable==="true")&&(Ad=S,TE=l,pp=null);break;case"focusout":pp=TE=Ad=null;break;case"mousedown":NE=!0;break;case"contextmenu":case"mouseup":case"dragend":NE=!1,MI(d,n,u);break;case"selectionchange":if(OB)break;case"keydown":case"keyup":MI(d,n,u)}var x;if(MS)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Sd?V3(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(H3&&n.locale!=="ko"&&(Sd||A!=="onCompositionStart"?A==="onCompositionEnd"&&Sd&&(x=q3()):(vc=u,jS="value"in vc?vc.value:vc.textContent,Sd=!0)),S=Zw(l,A),0<S.length&&(A=new PI(A,t,null,n,u),d.push({event:A,listeners:S}),x?A.data=x:(x=G3(n),x!==null&&(A.data=x)))),(x=bB?_B(t,n):EB(t,n))&&(l=Zw(l,"onBeforeInput"),0<l.length&&(u=new PI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}i$(d,e)})}function Jp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zw(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=qp(t,n),i!=null&&r.unshift(Jp(t,i,s)),i=qp(t,e),i!=null&&r.push(Jp(t,i,s))),t=t.return}return r}function zu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zI(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=qp(n,i),c!=null&&o.unshift(Jp(n,c,a))):s||(c=qp(n,i),c!=null&&o.push(Jp(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jB=/\r\n?/g,UB=/\u0000|\uFFFD/g;function WI(t){return(typeof t=="string"?t:""+t).replace(jB,`
`).replace(UB,"")}function dy(t,e,n){if(e=WI(e),WI(t)!==e&&n)throw Error(de(425))}function Xw(){}var PE=null,kE=null;function OE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var RE=typeof setTimeout=="function"?setTimeout:void 0,LB=typeof clearTimeout=="function"?clearTimeout:void 0,qI=typeof Promise=="function"?Promise:void 0,MB=typeof queueMicrotask=="function"?queueMicrotask:typeof qI<"u"?function(t){return qI.resolve(null).then(t).catch(BB)}:RE;function BB(t){setTimeout(function(){throw t})}function n1(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Gp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Gp(e)}function Pc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function HI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $h=Math.random().toString(36).slice(2),mo="__reactFiber$"+$h,Zp="__reactProps$"+$h,fa="__reactContainer$"+$h,$E="__reactEvents$"+$h,FB="__reactListeners$"+$h,zB="__reactHandles$"+$h;function Tl(t){var e=t[mo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fa]||n[mo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=HI(t);t!==null;){if(n=t[mo])return n;t=HI(t)}return e}t=n,n=t.parentNode}return null}function gm(t){return t=t[mo]||t[fa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Td(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function lv(t){return t[Zp]||null}var DE=[],Nd=-1;function rl(t){return{current:t}}function en(t){0>Nd||(t.current=DE[Nd],DE[Nd]=null,Nd--)}function Kt(t,e){Nd++,DE[Nd]=t.current,t.current=e}var Vc={},Tr=rl(Vc),ps=rl(!1),nu=Vc;function dh(t,e){var n=t.type.contextTypes;if(!n)return Vc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gs(t){return t=t.childContextTypes,t!=null}function e0(){en(ps),en(Tr)}function VI(t,e,n){if(Tr.current!==Vc)throw Error(de(168));Kt(Tr,e),Kt(ps,n)}function a$(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(de(108,AM(t)||"Unknown",s));return dn({},n,r)}function t0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vc,nu=Tr.current,Kt(Tr,t),Kt(ps,ps.current),!0}function GI(t,e,n){var r=t.stateNode;if(!r)throw Error(de(169));n?(t=a$(t,e,nu),r.__reactInternalMemoizedMergedChildContext=t,en(ps),en(Tr),Kt(Tr,t)):en(ps),Kt(ps,n)}var Qo=null,uv=!1,r1=!1;function c$(t){Qo===null?Qo=[t]:Qo.push(t)}function WB(t){uv=!0,c$(t)}function sl(){if(!r1&&Qo!==null){r1=!0;var t=0,e=jt;try{var n=Qo;for(jt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qo=null,uv=!1}catch(s){throw Qo!==null&&(Qo=Qo.slice(t+1)),R3(OS,sl),s}finally{jt=e,r1=!1}}return null}var Pd=[],kd=0,n0=null,r0=0,ri=[],si=0,ru=null,ra=1,sa="";function wl(t,e){Pd[kd++]=r0,Pd[kd++]=n0,n0=t,r0=e}function l$(t,e,n){ri[si++]=ra,ri[si++]=sa,ri[si++]=ru,ru=t;var r=ra;t=sa;var s=32-Mi(r)-1;r&=~(1<<s),n+=1;var i=32-Mi(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ra=1<<32-Mi(e)+s|n<<s|r,sa=i+t}else ra=1<<i|n<<s|r,sa=t}function FS(t){t.return!==null&&(wl(t,1),l$(t,1,0))}function zS(t){for(;t===n0;)n0=Pd[--kd],Pd[kd]=null,r0=Pd[--kd],Pd[kd]=null;for(;t===ru;)ru=ri[--si],ri[si]=null,sa=ri[--si],ri[si]=null,ra=ri[--si],ri[si]=null}var Ds=null,Os=null,rn=!1,Oi=null;function u$(t,e){var n=ii(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function KI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ds=t,Os=Pc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ds=t,Os=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ru!==null?{id:ra,overflow:sa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ii(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ds=t,Os=null,!0):!1;default:return!1}}function jE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function UE(t){if(rn){var e=Os;if(e){var n=e;if(!KI(t,e)){if(jE(t))throw Error(de(418));e=Pc(n.nextSibling);var r=Ds;e&&KI(t,e)?u$(r,n):(t.flags=t.flags&-4097|2,rn=!1,Ds=t)}}else{if(jE(t))throw Error(de(418));t.flags=t.flags&-4097|2,rn=!1,Ds=t}}}function YI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ds=t}function hy(t){if(t!==Ds)return!1;if(!rn)return YI(t),rn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!OE(t.type,t.memoizedProps)),e&&(e=Os)){if(jE(t))throw d$(),Error(de(418));for(;e;)u$(t,e),e=Pc(e.nextSibling)}if(YI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Os=Pc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Os=null}}else Os=Ds?Pc(t.stateNode.nextSibling):null;return!0}function d$(){for(var t=Os;t;)t=Pc(t.nextSibling)}function hh(){Os=Ds=null,rn=!1}function WS(t){Oi===null?Oi=[t]:Oi.push(t)}var qB=Ea.ReactCurrentBatchConfig;function yf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(de(309));var r=n.stateNode}if(!r)throw Error(de(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(de(284));if(!n._owner)throw Error(de(290,t))}return t}function fy(t,e){throw t=Object.prototype.toString.call(e),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function QI(t){var e=t._init;return e(t._payload)}function h$(t){function e(y,b){if(t){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=$c(y,b),y.index=0,y.sibling=null,y}function i(y,b,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,E){return b===null||b.tag!==6?(b=u1(v,y.mode,E),b.return=y,b):(b=s(b,v),b.return=y,b)}function c(y,b,v,E){var _=v.type;return _===xd?u(y,b,v.props.children,E,v.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ka&&QI(_)===b.type)?(E=s(b,v.props),E.ref=yf(y,b,v),E.return=y,E):(E=xw(v.type,v.key,v.props,null,y.mode,E),E.ref=yf(y,b,v),E.return=y,E)}function l(y,b,v,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=d1(v,y.mode,E),b.return=y,b):(b=s(b,v.children||[]),b.return=y,b)}function u(y,b,v,E,_){return b===null||b.tag!==7?(b=Ql(v,y.mode,E,_),b.return=y,b):(b=s(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=u1(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ny:return v=xw(b.type,b.key,b.props,null,y.mode,v),v.ref=yf(y,null,b),v.return=y,v;case Cd:return b=d1(b,y.mode,v),b.return=y,b;case Ka:var E=b._init;return d(y,E(b._payload),v)}if(Kf(b)||hf(b))return b=Ql(b,y.mode,v,null),b.return=y,b;fy(y,b)}return null}function h(y,b,v,E){var _=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(y,b,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ny:return v.key===_?c(y,b,v,E):null;case Cd:return v.key===_?l(y,b,v,E):null;case Ka:return _=v._init,h(y,b,_(v._payload),E)}if(Kf(v)||hf(v))return _!==null?null:u(y,b,v,E,null);fy(y,v)}return null}function f(y,b,v,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(v)||null,a(b,y,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ny:return y=y.get(E.key===null?v:E.key)||null,c(b,y,E,_);case Cd:return y=y.get(E.key===null?v:E.key)||null,l(b,y,E,_);case Ka:var S=E._init;return f(y,b,v,S(E._payload),_)}if(Kf(E)||hf(E))return y=y.get(v)||null,u(b,y,E,_,null);fy(b,E)}return null}function p(y,b,v,E){for(var _=null,S=null,x=b,A=b=0,C=null;x!==null&&A<v.length;A++){x.index>A?(C=x,x=null):C=x.sibling;var k=h(y,x,v[A],E);if(k===null){x===null&&(x=C);break}t&&x&&k.alternate===null&&e(y,x),b=i(k,b,A),S===null?_=k:S.sibling=k,S=k,x=C}if(A===v.length)return n(y,x),rn&&wl(y,A),_;if(x===null){for(;A<v.length;A++)x=d(y,v[A],E),x!==null&&(b=i(x,b,A),S===null?_=x:S.sibling=x,S=x);return rn&&wl(y,A),_}for(x=r(y,x);A<v.length;A++)C=f(x,y,A,v[A],E),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?A:C.key),b=i(C,b,A),S===null?_=C:S.sibling=C,S=C);return t&&x.forEach(function(O){return e(y,O)}),rn&&wl(y,A),_}function m(y,b,v,E){var _=hf(v);if(typeof _!="function")throw Error(de(150));if(v=_.call(v),v==null)throw Error(de(151));for(var S=_=null,x=b,A=b=0,C=null,k=v.next();x!==null&&!k.done;A++,k=v.next()){x.index>A?(C=x,x=null):C=x.sibling;var O=h(y,x,k.value,E);if(O===null){x===null&&(x=C);break}t&&x&&O.alternate===null&&e(y,x),b=i(O,b,A),S===null?_=O:S.sibling=O,S=O,x=C}if(k.done)return n(y,x),rn&&wl(y,A),_;if(x===null){for(;!k.done;A++,k=v.next())k=d(y,k.value,E),k!==null&&(b=i(k,b,A),S===null?_=k:S.sibling=k,S=k);return rn&&wl(y,A),_}for(x=r(y,x);!k.done;A++,k=v.next())k=f(x,y,A,k.value,E),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?A:k.key),b=i(k,b,A),S===null?_=k:S.sibling=k,S=k);return t&&x.forEach(function(M){return e(y,M)}),rn&&wl(y,A),_}function w(y,b,v,E){if(typeof v=="object"&&v!==null&&v.type===xd&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ny:e:{for(var _=v.key,S=b;S!==null;){if(S.key===_){if(_=v.type,_===xd){if(S.tag===7){n(y,S.sibling),b=s(S,v.props.children),b.return=y,y=b;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ka&&QI(_)===S.type){n(y,S.sibling),b=s(S,v.props),b.ref=yf(y,S,v),b.return=y,y=b;break e}n(y,S);break}else e(y,S);S=S.sibling}v.type===xd?(b=Ql(v.props.children,y.mode,E,v.key),b.return=y,y=b):(E=xw(v.type,v.key,v.props,null,y.mode,E),E.ref=yf(y,b,v),E.return=y,y=E)}return o(y);case Cd:e:{for(S=v.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=s(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=d1(v,y.mode,E),b.return=y,y=b}return o(y);case Ka:return S=v._init,w(y,b,S(v._payload),E)}if(Kf(v))return p(y,b,v,E);if(hf(v))return m(y,b,v,E);fy(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,v),b.return=y,y=b):(n(y,b),b=u1(v,y.mode,E),b.return=y,y=b),o(y)):n(y,b)}return w}var fh=h$(!0),f$=h$(!1),s0=rl(null),i0=null,Od=null,qS=null;function HS(){qS=Od=i0=null}function VS(t){var e=s0.current;en(s0),t._currentValue=e}function LE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zd(t,e){i0=t,qS=Od=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hs=!0),t.firstContext=null)}function ci(t){var e=t._currentValue;if(qS!==t)if(t={context:t,memoizedValue:e,next:null},Od===null){if(i0===null)throw Error(de(308));Od=t,i0.dependencies={lanes:0,firstContext:t}}else Od=Od.next=t;return e}var Nl=null;function GS(t){Nl===null?Nl=[t]:Nl.push(t)}function p$(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,GS(e)):(n.next=s.next,s.next=n),e.interleaved=n,pa(t,r)}function pa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ya=!1;function KS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g$(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,pa(t,n)}return s=r.interleaved,s===null?(e.next=e,GS(r)):(e.next=s.next,s.next=e),r.interleaved=e,pa(t,n)}function ww(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,RS(t,n)}}function JI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function o0(t,e,n,r){var s=t.updateQueue;Ya=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=dn({},d,h);break e;case 2:Ya=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);iu|=o,t.lanes=o,t.memoizedState=d}}function ZI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(de(191,s));s.call(r)}}}var mm={},bo=rl(mm),Xp=rl(mm),eg=rl(mm);function Pl(t){if(t===mm)throw Error(de(174));return t}function YS(t,e){switch(Kt(eg,e),Kt(Xp,t),Kt(bo,mm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wE(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wE(e,t)}en(bo),Kt(bo,e)}function ph(){en(bo),en(Xp),en(eg)}function m$(t){Pl(eg.current);var e=Pl(bo.current),n=wE(e,t.type);e!==n&&(Kt(Xp,t),Kt(bo,n))}function QS(t){Xp.current===t&&(en(bo),en(Xp))}var cn=rl(0);function a0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var s1=[];function JS(){for(var t=0;t<s1.length;t++)s1[t]._workInProgressVersionPrimary=null;s1.length=0}var vw=Ea.ReactCurrentDispatcher,i1=Ea.ReactCurrentBatchConfig,su=0,un=null,$n=null,Wn=null,c0=!1,gp=!1,tg=0,HB=0;function mr(){throw Error(de(321))}function ZS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qi(t[n],e[n]))return!1;return!0}function XS(t,e,n,r,s,i){if(su=i,un=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vw.current=t===null||t.memoizedState===null?YB:QB,t=n(r,s),gp){i=0;do{if(gp=!1,tg=0,25<=i)throw Error(de(301));i+=1,Wn=$n=null,e.updateQueue=null,vw.current=JB,t=n(r,s)}while(gp)}if(vw.current=l0,e=$n!==null&&$n.next!==null,su=0,Wn=$n=un=null,c0=!1,e)throw Error(de(300));return t}function eA(){var t=tg!==0;return tg=0,t}function oo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?un.memoizedState=Wn=t:Wn=Wn.next=t,Wn}function li(){if($n===null){var t=un.alternate;t=t!==null?t.memoizedState:null}else t=$n.next;var e=Wn===null?un.memoizedState:Wn.next;if(e!==null)Wn=e,$n=t;else{if(t===null)throw Error(de(310));$n=t,t={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},Wn===null?un.memoizedState=Wn=t:Wn=Wn.next=t}return Wn}function ng(t,e){return typeof e=="function"?e(t):e}function o1(t){var e=li(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=$n,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((su&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,un.lanes|=u,iu|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,qi(r,e.memoizedState)||(hs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,un.lanes|=i,iu|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function a1(t){var e=li(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);qi(i,e.memoizedState)||(hs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function y$(){}function w$(t,e){var n=un,r=li(),s=e(),i=!qi(r.memoizedState,s);if(i&&(r.memoizedState=s,hs=!0),r=r.queue,tA(_$.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Wn!==null&&Wn.memoizedState.tag&1){if(n.flags|=2048,rg(9,b$.bind(null,n,r,s,e),void 0,null),Gn===null)throw Error(de(349));su&30||v$(n,e,s)}return s}function v$(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=un.updateQueue,e===null?(e={lastEffect:null,stores:null},un.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function b$(t,e,n,r){e.value=n,e.getSnapshot=r,E$(e)&&C$(t)}function _$(t,e,n){return n(function(){E$(e)&&C$(t)})}function E$(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qi(t,n)}catch{return!0}}function C$(t){var e=pa(t,1);e!==null&&Bi(e,t,1,-1)}function XI(t){var e=oo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ng,lastRenderedState:t},e.queue=t,t=t.dispatch=KB.bind(null,un,t),[e.memoizedState,t]}function rg(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=un.updateQueue,e===null?(e={lastEffect:null,stores:null},un.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function x$(){return li().memoizedState}function bw(t,e,n,r){var s=oo();un.flags|=t,s.memoizedState=rg(1|e,n,void 0,r===void 0?null:r)}function dv(t,e,n,r){var s=li();r=r===void 0?null:r;var i=void 0;if($n!==null){var o=$n.memoizedState;if(i=o.destroy,r!==null&&ZS(r,o.deps)){s.memoizedState=rg(e,n,i,r);return}}un.flags|=t,s.memoizedState=rg(1|e,n,i,r)}function eT(t,e){return bw(8390656,8,t,e)}function tA(t,e){return dv(2048,8,t,e)}function S$(t,e){return dv(4,2,t,e)}function A$(t,e){return dv(4,4,t,e)}function I$(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function T$(t,e,n){return n=n!=null?n.concat([t]):null,dv(4,4,I$.bind(null,e,t),n)}function nA(){}function N$(t,e){var n=li();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ZS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function P$(t,e){var n=li();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ZS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function k$(t,e,n){return su&21?(qi(n,e)||(n=j3(),un.lanes|=n,iu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hs=!0),t.memoizedState=n)}function VB(t,e){var n=jt;jt=n!==0&&4>n?n:4,t(!0);var r=i1.transition;i1.transition={};try{t(!1),e()}finally{jt=n,i1.transition=r}}function O$(){return li().memoizedState}function GB(t,e,n){var r=Rc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},R$(t))$$(e,n);else if(n=p$(t,e,n,r),n!==null){var s=Lr();Bi(n,t,r,s),D$(n,e,r)}}function KB(t,e,n){var r=Rc(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(R$(t))$$(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,qi(a,o)){var c=e.interleaved;c===null?(s.next=s,GS(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=p$(t,e,s,r),n!==null&&(s=Lr(),Bi(n,t,r,s),D$(n,e,r))}}function R$(t){var e=t.alternate;return t===un||e!==null&&e===un}function $$(t,e){gp=c0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function D$(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,RS(t,n)}}var l0={readContext:ci,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},YB={readContext:ci,useCallback:function(t,e){return oo().memoizedState=[t,e===void 0?null:e],t},useContext:ci,useEffect:eT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bw(4194308,4,I$.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bw(4194308,4,t,e)},useInsertionEffect:function(t,e){return bw(4,2,t,e)},useMemo:function(t,e){var n=oo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=oo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=GB.bind(null,un,t),[r.memoizedState,t]},useRef:function(t){var e=oo();return t={current:t},e.memoizedState=t},useState:XI,useDebugValue:nA,useDeferredValue:function(t){return oo().memoizedState=t},useTransition:function(){var t=XI(!1),e=t[0];return t=VB.bind(null,t[1]),oo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=un,s=oo();if(rn){if(n===void 0)throw Error(de(407));n=n()}else{if(n=e(),Gn===null)throw Error(de(349));su&30||v$(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,eT(_$.bind(null,r,i,t),[t]),r.flags|=2048,rg(9,b$.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=oo(),e=Gn.identifierPrefix;if(rn){var n=sa,r=ra;n=(r&~(1<<32-Mi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=tg++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=HB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QB={readContext:ci,useCallback:N$,useContext:ci,useEffect:tA,useImperativeHandle:T$,useInsertionEffect:S$,useLayoutEffect:A$,useMemo:P$,useReducer:o1,useRef:x$,useState:function(){return o1(ng)},useDebugValue:nA,useDeferredValue:function(t){var e=li();return k$(e,$n.memoizedState,t)},useTransition:function(){var t=o1(ng)[0],e=li().memoizedState;return[t,e]},useMutableSource:y$,useSyncExternalStore:w$,useId:O$,unstable_isNewReconciler:!1},JB={readContext:ci,useCallback:N$,useContext:ci,useEffect:tA,useImperativeHandle:T$,useInsertionEffect:S$,useLayoutEffect:A$,useMemo:P$,useReducer:a1,useRef:x$,useState:function(){return a1(ng)},useDebugValue:nA,useDeferredValue:function(t){var e=li();return $n===null?e.memoizedState=t:k$(e,$n.memoizedState,t)},useTransition:function(){var t=a1(ng)[0],e=li().memoizedState;return[t,e]},useMutableSource:y$,useSyncExternalStore:w$,useId:O$,unstable_isNewReconciler:!1};function Ii(t,e){if(t&&t.defaultProps){e=dn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ME(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hv={isMounted:function(t){return(t=t._reactInternals)?Iu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Lr(),s=Rc(t),i=oa(r,s);i.payload=e,n!=null&&(i.callback=n),e=kc(t,i,s),e!==null&&(Bi(e,t,s,r),ww(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Lr(),s=Rc(t),i=oa(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=kc(t,i,s),e!==null&&(Bi(e,t,s,r),ww(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Lr(),r=Rc(t),s=oa(n,r);s.tag=2,e!=null&&(s.callback=e),e=kc(t,s,r),e!==null&&(Bi(e,t,r,n),ww(e,t,r))}};function tT(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Yp(n,r)||!Yp(s,i):!0}function j$(t,e,n){var r=!1,s=Vc,i=e.contextType;return typeof i=="object"&&i!==null?i=ci(i):(s=gs(e)?nu:Tr.current,r=e.contextTypes,i=(r=r!=null)?dh(t,s):Vc),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function nT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hv.enqueueReplaceState(e,e.state,null)}function BE(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},KS(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ci(i):(i=gs(e)?nu:Tr.current,s.context=dh(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ME(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hv.enqueueReplaceState(s,s.state,null),o0(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function gh(t,e){try{var n="",r=e;do n+=SM(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function c1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function FE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ZB=typeof WeakMap=="function"?WeakMap:Map;function U$(t,e,n){n=oa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){d0||(d0=!0,JE=r),FE(t,e)},n}function L$(t,e,n){n=oa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){FE(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){FE(t,e),typeof r!="function"&&(Oc===null?Oc=new Set([this]):Oc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function rT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ZB;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=hF.bind(null,t,e,n),e.then(t,t))}function sT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iT(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=oa(-1,1),e.tag=2,kc(n,e,1))),n.lanes|=1),t)}var XB=Ea.ReactCurrentOwner,hs=!1;function Dr(t,e,n,r){e.child=t===null?f$(e,null,n,r):fh(e,t.child,n,r)}function oT(t,e,n,r,s){n=n.render;var i=e.ref;return zd(e,s),r=XS(t,e,n,r,i,s),n=eA(),t!==null&&!hs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ga(t,e,s)):(rn&&n&&FS(e),e.flags|=1,Dr(t,e,r,s),e.child)}function aT(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!uA(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,M$(t,e,i,r,s)):(t=xw(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Yp,n(o,r)&&t.ref===e.ref)return ga(t,e,s)}return e.flags|=1,t=$c(i,r),t.ref=e.ref,t.return=e,e.child=t}function M$(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Yp(i,r)&&t.ref===e.ref)if(hs=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(hs=!0);else return e.lanes=t.lanes,ga(t,e,s)}return zE(t,e,n,r,s)}function B$(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt($d,Ts),Ts|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Kt($d,Ts),Ts|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Kt($d,Ts),Ts|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Kt($d,Ts),Ts|=r;return Dr(t,e,s,n),e.child}function F$(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zE(t,e,n,r,s){var i=gs(n)?nu:Tr.current;return i=dh(e,i),zd(e,s),n=XS(t,e,n,r,i,s),r=eA(),t!==null&&!hs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ga(t,e,s)):(rn&&r&&FS(e),e.flags|=1,Dr(t,e,n,s),e.child)}function cT(t,e,n,r,s){if(gs(n)){var i=!0;t0(e)}else i=!1;if(zd(e,s),e.stateNode===null)_w(t,e),j$(e,n,r),BE(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=ci(l):(l=gs(n)?nu:Tr.current,l=dh(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&nT(e,o,r,l),Ya=!1;var h=e.memoizedState;o.state=h,o0(e,r,o,s),c=e.memoizedState,a!==r||h!==c||ps.current||Ya?(typeof u=="function"&&(ME(e,n,u,r),c=e.memoizedState),(a=Ya||tT(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,g$(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Ii(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ci(c):(c=gs(n)?nu:Tr.current,c=dh(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&nT(e,o,r,c),Ya=!1,h=e.memoizedState,o.state=h,o0(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||ps.current||Ya?(typeof f=="function"&&(ME(e,n,f,r),p=e.memoizedState),(l=Ya||tT(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return WE(t,e,n,r,i,s)}function WE(t,e,n,r,s,i){F$(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&GI(e,n,!1),ga(t,e,i);r=e.stateNode,XB.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fh(e,t.child,null,i),e.child=fh(e,null,a,i)):Dr(t,e,a,i),e.memoizedState=r.state,s&&GI(e,n,!0),e.child}function z$(t){var e=t.stateNode;e.pendingContext?VI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&VI(t,e.context,!1),YS(t,e.containerInfo)}function lT(t,e,n,r,s){return hh(),WS(s),e.flags|=256,Dr(t,e,n,r),e.child}var qE={dehydrated:null,treeContext:null,retryLane:0};function HE(t){return{baseLanes:t,cachePool:null,transitions:null}}function W$(t,e,n){var r=e.pendingProps,s=cn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Kt(cn,s&1),t===null)return UE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=gv(o,r,0,null),t=Ql(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=HE(n),e.memoizedState=qE,t):rA(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return eF(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=$c(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=$c(a,i):(i=Ql(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?HE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=qE,r}return i=t.child,t=i.sibling,r=$c(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rA(t,e){return e=gv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function py(t,e,n,r){return r!==null&&WS(r),fh(e,t.child,null,n),t=rA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eF(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=c1(Error(de(422))),py(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=gv({mode:"visible",children:r.children},s,0,null),i=Ql(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&fh(e,t.child,null,o),e.child.memoizedState=HE(o),e.memoizedState=qE,i);if(!(e.mode&1))return py(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(de(419)),r=c1(i,r,void 0),py(t,e,o,r)}if(a=(o&t.childLanes)!==0,hs||a){if(r=Gn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,pa(t,s),Bi(r,t,s,-1))}return lA(),r=c1(Error(de(421))),py(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fF.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Os=Pc(s.nextSibling),Ds=e,rn=!0,Oi=null,t!==null&&(ri[si++]=ra,ri[si++]=sa,ri[si++]=ru,ra=t.id,sa=t.overflow,ru=e),e=rA(e,r.children),e.flags|=4096,e)}function uT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),LE(t.return,e,n)}function l1(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function q$(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Dr(t,e,r.children,n),r=cn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uT(t,n,e);else if(t.tag===19)uT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Kt(cn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&a0(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),l1(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&a0(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}l1(e,!0,n,null,i);break;case"together":l1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _w(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ga(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),iu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(de(153));if(e.child!==null){for(t=e.child,n=$c(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$c(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tF(t,e,n){switch(e.tag){case 3:z$(e),hh();break;case 5:m$(e);break;case 1:gs(e.type)&&t0(e);break;case 4:YS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Kt(s0,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Kt(cn,cn.current&1),e.flags|=128,null):n&e.child.childLanes?W$(t,e,n):(Kt(cn,cn.current&1),t=ga(t,e,n),t!==null?t.sibling:null);Kt(cn,cn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return q$(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Kt(cn,cn.current),r)break;return null;case 22:case 23:return e.lanes=0,B$(t,e,n)}return ga(t,e,n)}var H$,VE,V$,G$;H$=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};VE=function(){};V$=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Pl(bo.current);var i=null;switch(n){case"input":s=pE(t,s),r=pE(t,r),i=[];break;case"select":s=dn({},s,{value:void 0}),r=dn({},r,{value:void 0}),i=[];break;case"textarea":s=yE(t,s),r=yE(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xw)}vE(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(zp.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(zp.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Jt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};G$=function(t,e,n,r){n!==r&&(e.flags|=4)};function wf(t,e){if(!rn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nF(t,e,n){var r=e.pendingProps;switch(zS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(e),null;case 1:return gs(e.type)&&e0(),yr(e),null;case 3:return r=e.stateNode,ph(),en(ps),en(Tr),JS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hy(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Oi!==null&&(eC(Oi),Oi=null))),VE(t,e),yr(e),null;case 5:QS(e);var s=Pl(eg.current);if(n=e.type,t!==null&&e.stateNode!=null)V$(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(de(166));return yr(e),null}if(t=Pl(bo.current),hy(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[mo]=e,r[Zp]=i,t=(e.mode&1)!==0,n){case"dialog":Jt("cancel",r),Jt("close",r);break;case"iframe":case"object":case"embed":Jt("load",r);break;case"video":case"audio":for(s=0;s<Qf.length;s++)Jt(Qf[s],r);break;case"source":Jt("error",r);break;case"img":case"image":case"link":Jt("error",r),Jt("load",r);break;case"details":Jt("toggle",r);break;case"input":vI(r,i),Jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Jt("invalid",r);break;case"textarea":_I(r,i),Jt("invalid",r)}vE(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&dy(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&dy(r.textContent,a,t),s=["children",""+a]):zp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Jt("scroll",r)}switch(n){case"input":ry(r),bI(r,i,!0);break;case"textarea":ry(r),EI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Xw)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_3(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mo]=e,t[Zp]=r,H$(t,e,!1,!1),e.stateNode=t;e:{switch(o=bE(n,r),n){case"dialog":Jt("cancel",t),Jt("close",t),s=r;break;case"iframe":case"object":case"embed":Jt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Qf.length;s++)Jt(Qf[s],t);s=r;break;case"source":Jt("error",t),s=r;break;case"img":case"image":case"link":Jt("error",t),Jt("load",t),s=r;break;case"details":Jt("toggle",t),s=r;break;case"input":vI(t,r),s=pE(t,r),Jt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=dn({},r,{value:void 0}),Jt("invalid",t);break;case"textarea":_I(t,r),s=yE(t,r),Jt("invalid",t);break;default:s=r}vE(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?x3(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&E3(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Wp(t,c):typeof c=="number"&&Wp(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Jt("scroll",t):c!=null&&IS(t,i,c,o))}switch(n){case"input":ry(t),bI(t,r,!1);break;case"textarea":ry(t),EI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hc(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ld(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ld(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Xw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yr(e),null;case 6:if(t&&e.stateNode!=null)G$(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(de(166));if(n=Pl(eg.current),Pl(bo.current),hy(e)){if(r=e.stateNode,n=e.memoizedProps,r[mo]=e,(i=r.nodeValue!==n)&&(t=Ds,t!==null))switch(t.tag){case 3:dy(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dy(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mo]=e,e.stateNode=r}return yr(e),null;case 13:if(en(cn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rn&&Os!==null&&e.mode&1&&!(e.flags&128))d$(),hh(),e.flags|=98560,i=!1;else if(i=hy(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(de(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(de(317));i[mo]=e}else hh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yr(e),i=!1}else Oi!==null&&(eC(Oi),Oi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||cn.current&1?Un===0&&(Un=3):lA())),e.updateQueue!==null&&(e.flags|=4),yr(e),null);case 4:return ph(),VE(t,e),t===null&&Qp(e.stateNode.containerInfo),yr(e),null;case 10:return VS(e.type._context),yr(e),null;case 17:return gs(e.type)&&e0(),yr(e),null;case 19:if(en(cn),i=e.memoizedState,i===null)return yr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)wf(i,!1);else{if(Un!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=a0(t),o!==null){for(e.flags|=128,wf(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Kt(cn,cn.current&1|2),e.child}t=t.sibling}i.tail!==null&&vn()>mh&&(e.flags|=128,r=!0,wf(i,!1),e.lanes=4194304)}else{if(!r)if(t=a0(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rn)return yr(e),null}else 2*vn()-i.renderingStartTime>mh&&n!==1073741824&&(e.flags|=128,r=!0,wf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=vn(),e.sibling=null,n=cn.current,Kt(cn,r?n&1|2:n&1),e):(yr(e),null);case 22:case 23:return cA(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ts&1073741824&&(yr(e),e.subtreeFlags&6&&(e.flags|=8192)):yr(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function rF(t,e){switch(zS(e),e.tag){case 1:return gs(e.type)&&e0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ph(),en(ps),en(Tr),JS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return QS(e),null;case 13:if(en(cn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(de(340));hh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return en(cn),null;case 4:return ph(),null;case 10:return VS(e.type._context),null;case 22:case 23:return cA(),null;case 24:return null;default:return null}}var gy=!1,Ir=!1,sF=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Rd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pn(t,e,r)}else n.current=null}function GE(t,e,n){try{n()}catch(r){pn(t,e,r)}}var dT=!1;function iF(t,e){if(PE=Qw,t=Z3(),BS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(kE={focusedElem:t,selectionRange:n},Qw=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){e=$e;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ii(e.type,m),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(E){pn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}return p=dT,dT=!1,p}function mp(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&GE(e,n,i)}s=s.next}while(s!==r)}}function fv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function KE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function K$(t){var e=t.alternate;e!==null&&(t.alternate=null,K$(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mo],delete e[Zp],delete e[$E],delete e[FB],delete e[zB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Y$(t){return t.tag===5||t.tag===3||t.tag===4}function hT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Y$(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function YE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xw));else if(r!==4&&(t=t.child,t!==null))for(YE(t,e,n),t=t.sibling;t!==null;)YE(t,e,n),t=t.sibling}function QE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(QE(t,e,n),t=t.sibling;t!==null;)QE(t,e,n),t=t.sibling}var sr=null,Pi=!1;function Sa(t,e,n){for(n=n.child;n!==null;)Q$(t,e,n),n=n.sibling}function Q$(t,e,n){if(vo&&typeof vo.onCommitFiberUnmount=="function")try{vo.onCommitFiberUnmount(iv,n)}catch{}switch(n.tag){case 5:Ir||Rd(n,e);case 6:var r=sr,s=Pi;sr=null,Sa(t,e,n),sr=r,Pi=s,sr!==null&&(Pi?(t=sr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):sr.removeChild(n.stateNode));break;case 18:sr!==null&&(Pi?(t=sr,n=n.stateNode,t.nodeType===8?n1(t.parentNode,n):t.nodeType===1&&n1(t,n),Gp(t)):n1(sr,n.stateNode));break;case 4:r=sr,s=Pi,sr=n.stateNode.containerInfo,Pi=!0,Sa(t,e,n),sr=r,Pi=s;break;case 0:case 11:case 14:case 15:if(!Ir&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&GE(n,e,o),s=s.next}while(s!==r)}Sa(t,e,n);break;case 1:if(!Ir&&(Rd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pn(n,e,a)}Sa(t,e,n);break;case 21:Sa(t,e,n);break;case 22:n.mode&1?(Ir=(r=Ir)||n.memoizedState!==null,Sa(t,e,n),Ir=r):Sa(t,e,n);break;default:Sa(t,e,n)}}function fT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sF),e.forEach(function(r){var s=pF.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function yi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:sr=a.stateNode,Pi=!1;break e;case 3:sr=a.stateNode.containerInfo,Pi=!0;break e;case 4:sr=a.stateNode.containerInfo,Pi=!0;break e}a=a.return}if(sr===null)throw Error(de(160));Q$(i,o,s),sr=null,Pi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){pn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)J$(e,t),e=e.sibling}function J$(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yi(e,t),Xi(t),r&4){try{mp(3,t,t.return),fv(3,t)}catch(m){pn(t,t.return,m)}try{mp(5,t,t.return)}catch(m){pn(t,t.return,m)}}break;case 1:yi(e,t),Xi(t),r&512&&n!==null&&Rd(n,n.return);break;case 5:if(yi(e,t),Xi(t),r&512&&n!==null&&Rd(n,n.return),t.flags&32){var s=t.stateNode;try{Wp(s,"")}catch(m){pn(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&v3(s,i),bE(a,o);var l=bE(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?x3(s,d):u==="dangerouslySetInnerHTML"?E3(s,d):u==="children"?Wp(s,d):IS(s,u,d,l)}switch(a){case"input":gE(s,i);break;case"textarea":b3(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Ld(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ld(s,!!i.multiple,i.defaultValue,!0):Ld(s,!!i.multiple,i.multiple?[]:"",!1))}s[Zp]=i}catch(m){pn(t,t.return,m)}}break;case 6:if(yi(e,t),Xi(t),r&4){if(t.stateNode===null)throw Error(de(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){pn(t,t.return,m)}}break;case 3:if(yi(e,t),Xi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gp(e.containerInfo)}catch(m){pn(t,t.return,m)}break;case 4:yi(e,t),Xi(t);break;case 13:yi(e,t),Xi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(oA=vn())),r&4&&fT(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ir=(l=Ir)||u,yi(e,t),Ir=l):yi(e,t),Xi(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for($e=t,u=t.child;u!==null;){for(d=$e=u;$e!==null;){switch(h=$e,f=h.child,h.tag){case 0:case 11:case 14:case 15:mp(4,h,h.return);break;case 1:Rd(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){pn(r,n,m)}}break;case 5:Rd(h,h.return);break;case 22:if(h.memoizedState!==null){gT(d);continue}}f!==null?(f.return=h,$e=f):gT(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=C3("display",o))}catch(m){pn(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){pn(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yi(e,t),Xi(t),r&4&&fT(t);break;case 21:break;default:yi(e,t),Xi(t)}}function Xi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Y$(n)){var r=n;break e}n=n.return}throw Error(de(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Wp(s,""),r.flags&=-33);var i=hT(t);QE(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=hT(t);YE(t,a,o);break;default:throw Error(de(161))}}catch(c){pn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oF(t,e,n){$e=t,Z$(t)}function Z$(t,e,n){for(var r=(t.mode&1)!==0;$e!==null;){var s=$e,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||gy;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Ir;a=gy;var l=Ir;if(gy=o,(Ir=c)&&!l)for($e=s;$e!==null;)o=$e,c=o.child,o.tag===22&&o.memoizedState!==null?mT(s):c!==null?(c.return=o,$e=c):mT(s);for(;i!==null;)$e=i,Z$(i),i=i.sibling;$e=s,gy=a,Ir=l}pT(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$e=i):pT(t)}}function pT(t){for(;$e!==null;){var e=$e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ir||fv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ir)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ii(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ZI(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ZI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Gp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}Ir||e.flags&512&&KE(e)}catch(h){pn(e,e.return,h)}}if(e===t){$e=null;break}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}}function gT(t){for(;$e!==null;){var e=$e;if(e===t){$e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$e=n;break}$e=e.return}}function mT(t){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fv(4,e)}catch(c){pn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){pn(e,s,c)}}var i=e.return;try{KE(e)}catch(c){pn(e,i,c)}break;case 5:var o=e.return;try{KE(e)}catch(c){pn(e,o,c)}}}catch(c){pn(e,e.return,c)}if(e===t){$e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$e=a;break}$e=e.return}}var aF=Math.ceil,u0=Ea.ReactCurrentDispatcher,sA=Ea.ReactCurrentOwner,ai=Ea.ReactCurrentBatchConfig,vt=0,Gn=null,In=null,or=0,Ts=0,$d=rl(0),Un=0,sg=null,iu=0,pv=0,iA=0,yp=null,us=null,oA=0,mh=1/0,Ko=null,d0=!1,JE=null,Oc=null,my=!1,bc=null,h0=0,wp=0,ZE=null,Ew=-1,Cw=0;function Lr(){return vt&6?vn():Ew!==-1?Ew:Ew=vn()}function Rc(t){return t.mode&1?vt&2&&or!==0?or&-or:qB.transition!==null?(Cw===0&&(Cw=j3()),Cw):(t=jt,t!==0||(t=window.event,t=t===void 0?16:W3(t.type)),t):1}function Bi(t,e,n,r){if(50<wp)throw wp=0,ZE=null,Error(de(185));fm(t,n,r),(!(vt&2)||t!==Gn)&&(t===Gn&&(!(vt&2)&&(pv|=n),Un===4&&sc(t,or)),ms(t,r),n===1&&vt===0&&!(e.mode&1)&&(mh=vn()+500,uv&&sl()))}function ms(t,e){var n=t.callbackNode;qM(t,e);var r=Yw(t,t===Gn?or:0);if(r===0)n!==null&&SI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&SI(n),e===1)t.tag===0?WB(yT.bind(null,t)):c$(yT.bind(null,t)),MB(function(){!(vt&6)&&sl()}),n=null;else{switch(U3(r)){case 1:n=OS;break;case 4:n=$3;break;case 16:n=Kw;break;case 536870912:n=D3;break;default:n=Kw}n=oD(n,X$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function X$(t,e){if(Ew=-1,Cw=0,vt&6)throw Error(de(327));var n=t.callbackNode;if(Wd()&&t.callbackNode!==n)return null;var r=Yw(t,t===Gn?or:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=f0(t,r);else{e=r;var s=vt;vt|=2;var i=tD();(Gn!==t||or!==e)&&(Ko=null,mh=vn()+500,Yl(t,e));do try{uF();break}catch(a){eD(t,a)}while(!0);HS(),u0.current=i,vt=s,In!==null?e=0:(Gn=null,or=0,e=Un)}if(e!==0){if(e===2&&(s=SE(t),s!==0&&(r=s,e=XE(t,s))),e===1)throw n=sg,Yl(t,0),sc(t,r),ms(t,vn()),n;if(e===6)sc(t,r);else{if(s=t.current.alternate,!(r&30)&&!cF(s)&&(e=f0(t,r),e===2&&(i=SE(t),i!==0&&(r=i,e=XE(t,i))),e===1))throw n=sg,Yl(t,0),sc(t,r),ms(t,vn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(de(345));case 2:vl(t,us,Ko);break;case 3:if(sc(t,r),(r&130023424)===r&&(e=oA+500-vn(),10<e)){if(Yw(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Lr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=RE(vl.bind(null,t,us,Ko),e);break}vl(t,us,Ko);break;case 4:if(sc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Mi(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=vn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aF(r/1960))-r,10<r){t.timeoutHandle=RE(vl.bind(null,t,us,Ko),r);break}vl(t,us,Ko);break;case 5:vl(t,us,Ko);break;default:throw Error(de(329))}}}return ms(t,vn()),t.callbackNode===n?X$.bind(null,t):null}function XE(t,e){var n=yp;return t.current.memoizedState.isDehydrated&&(Yl(t,e).flags|=256),t=f0(t,e),t!==2&&(e=us,us=n,e!==null&&eC(e)),t}function eC(t){us===null?us=t:us.push.apply(us,t)}function cF(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!qi(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sc(t,e){for(e&=~iA,e&=~pv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mi(e),r=1<<n;t[n]=-1,e&=~r}}function yT(t){if(vt&6)throw Error(de(327));Wd();var e=Yw(t,0);if(!(e&1))return ms(t,vn()),null;var n=f0(t,e);if(t.tag!==0&&n===2){var r=SE(t);r!==0&&(e=r,n=XE(t,r))}if(n===1)throw n=sg,Yl(t,0),sc(t,e),ms(t,vn()),n;if(n===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vl(t,us,Ko),ms(t,vn()),null}function aA(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(mh=vn()+500,uv&&sl())}}function ou(t){bc!==null&&bc.tag===0&&!(vt&6)&&Wd();var e=vt;vt|=1;var n=ai.transition,r=jt;try{if(ai.transition=null,jt=1,t)return t()}finally{jt=r,ai.transition=n,vt=e,!(vt&6)&&sl()}}function cA(){Ts=$d.current,en($d)}function Yl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LB(n)),In!==null)for(n=In.return;n!==null;){var r=n;switch(zS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&e0();break;case 3:ph(),en(ps),en(Tr),JS();break;case 5:QS(r);break;case 4:ph();break;case 13:en(cn);break;case 19:en(cn);break;case 10:VS(r.type._context);break;case 22:case 23:cA()}n=n.return}if(Gn=t,In=t=$c(t.current,null),or=Ts=e,Un=0,sg=null,iA=pv=iu=0,us=yp=null,Nl!==null){for(e=0;e<Nl.length;e++)if(n=Nl[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Nl=null}return t}function eD(t,e){do{var n=In;try{if(HS(),vw.current=l0,c0){for(var r=un.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}c0=!1}if(su=0,Wn=$n=un=null,gp=!1,tg=0,sA.current=null,n===null||n.return===null){Un=1,sg=e,In=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=or,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=sT(o);if(f!==null){f.flags&=-257,iT(f,o,a,i,e),f.mode&1&&rT(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var m=new Set;m.add(c),e.updateQueue=m}else p.add(c);break e}else{if(!(e&1)){rT(i,l,e),lA();break e}c=Error(de(426))}}else if(rn&&a.mode&1){var w=sT(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),iT(w,o,a,i,e),WS(gh(c,a));break e}}i=c=gh(c,a),Un!==4&&(Un=2),yp===null?yp=[i]:yp.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=U$(i,c,e);JI(i,y);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Oc===null||!Oc.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=L$(i,a,e);JI(i,E);break e}}i=i.return}while(i!==null)}rD(n)}catch(_){e=_,In===n&&n!==null&&(In=n=n.return);continue}break}while(!0)}function tD(){var t=u0.current;return u0.current=l0,t===null?l0:t}function lA(){(Un===0||Un===3||Un===2)&&(Un=4),Gn===null||!(iu&268435455)&&!(pv&268435455)||sc(Gn,or)}function f0(t,e){var n=vt;vt|=2;var r=tD();(Gn!==t||or!==e)&&(Ko=null,Yl(t,e));do try{lF();break}catch(s){eD(t,s)}while(!0);if(HS(),vt=n,u0.current=r,In!==null)throw Error(de(261));return Gn=null,or=0,Un}function lF(){for(;In!==null;)nD(In)}function uF(){for(;In!==null&&!DM();)nD(In)}function nD(t){var e=iD(t.alternate,t,Ts);t.memoizedProps=t.pendingProps,e===null?rD(t):In=e,sA.current=null}function rD(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rF(n,e),n!==null){n.flags&=32767,In=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Un=6,In=null;return}}else if(n=nF(n,e,Ts),n!==null){In=n;return}if(e=e.sibling,e!==null){In=e;return}In=e=t}while(e!==null);Un===0&&(Un=5)}function vl(t,e,n){var r=jt,s=ai.transition;try{ai.transition=null,jt=1,dF(t,e,n,r)}finally{ai.transition=s,jt=r}return null}function dF(t,e,n,r){do Wd();while(bc!==null);if(vt&6)throw Error(de(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(HM(t,i),t===Gn&&(In=Gn=null,or=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||my||(my=!0,oD(Kw,function(){return Wd(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ai.transition,ai.transition=null;var o=jt;jt=1;var a=vt;vt|=4,sA.current=null,iF(t,n),J$(n,t),kB(kE),Qw=!!PE,kE=PE=null,t.current=n,oF(n),jM(),vt=a,jt=o,ai.transition=i}else t.current=n;if(my&&(my=!1,bc=t,h0=s),i=t.pendingLanes,i===0&&(Oc=null),MM(n.stateNode),ms(t,vn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(d0)throw d0=!1,t=JE,JE=null,t;return h0&1&&t.tag!==0&&Wd(),i=t.pendingLanes,i&1?t===ZE?wp++:(wp=0,ZE=t):wp=0,sl(),null}function Wd(){if(bc!==null){var t=U3(h0),e=ai.transition,n=jt;try{if(ai.transition=null,jt=16>t?16:t,bc===null)var r=!1;else{if(t=bc,bc=null,h0=0,vt&6)throw Error(de(331));var s=vt;for(vt|=4,$e=t.current;$e!==null;){var i=$e,o=i.child;if($e.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for($e=l;$e!==null;){var u=$e;switch(u.tag){case 0:case 11:case 15:mp(8,u,i)}var d=u.child;if(d!==null)d.return=u,$e=d;else for(;$e!==null;){u=$e;var h=u.sibling,f=u.return;if(K$(u),u===l){$e=null;break}if(h!==null){h.return=f,$e=h;break}$e=f}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}$e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$e=o;else e:for(;$e!==null;){if(i=$e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:mp(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,$e=y;break e}$e=i.return}}var b=t.current;for($e=b;$e!==null;){o=$e;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,$e=v;else e:for(o=b;$e!==null;){if(a=$e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fv(9,a)}}catch(_){pn(a,a.return,_)}if(a===o){$e=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,$e=E;break e}$e=a.return}}if(vt=s,sl(),vo&&typeof vo.onPostCommitFiberRoot=="function")try{vo.onPostCommitFiberRoot(iv,t)}catch{}r=!0}return r}finally{jt=n,ai.transition=e}}return!1}function wT(t,e,n){e=gh(n,e),e=U$(t,e,1),t=kc(t,e,1),e=Lr(),t!==null&&(fm(t,1,e),ms(t,e))}function pn(t,e,n){if(t.tag===3)wT(t,t,n);else for(;e!==null;){if(e.tag===3){wT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Oc===null||!Oc.has(r))){t=gh(n,t),t=L$(e,t,1),e=kc(e,t,1),t=Lr(),e!==null&&(fm(e,1,t),ms(e,t));break}}e=e.return}}function hF(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Lr(),t.pingedLanes|=t.suspendedLanes&n,Gn===t&&(or&n)===n&&(Un===4||Un===3&&(or&130023424)===or&&500>vn()-oA?Yl(t,0):iA|=n),ms(t,e)}function sD(t,e){e===0&&(t.mode&1?(e=oy,oy<<=1,!(oy&130023424)&&(oy=4194304)):e=1);var n=Lr();t=pa(t,e),t!==null&&(fm(t,e,n),ms(t,n))}function fF(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sD(t,n)}function pF(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(de(314))}r!==null&&r.delete(e),sD(t,n)}var iD;iD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ps.current)hs=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return hs=!1,tF(t,e,n);hs=!!(t.flags&131072)}else hs=!1,rn&&e.flags&1048576&&l$(e,r0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_w(t,e),t=e.pendingProps;var s=dh(e,Tr.current);zd(e,n),s=XS(null,e,r,t,s,n);var i=eA();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gs(r)?(i=!0,t0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,KS(e),s.updater=hv,e.stateNode=s,s._reactInternals=e,BE(e,r,t,n),e=WE(null,e,r,!0,i,n)):(e.tag=0,rn&&i&&FS(e),Dr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_w(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=mF(r),t=Ii(r,t),s){case 0:e=zE(null,e,r,t,n);break e;case 1:e=cT(null,e,r,t,n);break e;case 11:e=oT(null,e,r,t,n);break e;case 14:e=aT(null,e,r,Ii(r.type,t),n);break e}throw Error(de(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ii(r,s),zE(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ii(r,s),cT(t,e,r,s,n);case 3:e:{if(z$(e),t===null)throw Error(de(387));r=e.pendingProps,i=e.memoizedState,s=i.element,g$(t,e),o0(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=gh(Error(de(423)),e),e=lT(t,e,r,n,s);break e}else if(r!==s){s=gh(Error(de(424)),e),e=lT(t,e,r,n,s);break e}else for(Os=Pc(e.stateNode.containerInfo.firstChild),Ds=e,rn=!0,Oi=null,n=f$(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hh(),r===s){e=ga(t,e,n);break e}Dr(t,e,r,n)}e=e.child}return e;case 5:return m$(e),t===null&&UE(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,OE(r,s)?o=null:i!==null&&OE(r,i)&&(e.flags|=32),F$(t,e),Dr(t,e,o,n),e.child;case 6:return t===null&&UE(e),null;case 13:return W$(t,e,n);case 4:return YS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fh(e,null,r,n):Dr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ii(r,s),oT(t,e,r,s,n);case 7:return Dr(t,e,e.pendingProps,n),e.child;case 8:return Dr(t,e,e.pendingProps.children,n),e.child;case 12:return Dr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Kt(s0,r._currentValue),r._currentValue=o,i!==null)if(qi(i.value,o)){if(i.children===s.children&&!ps.current){e=ga(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=oa(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),LE(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(de(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),LE(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Dr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,zd(e,n),s=ci(s),r=r(s),e.flags|=1,Dr(t,e,r,n),e.child;case 14:return r=e.type,s=Ii(r,e.pendingProps),s=Ii(r.type,s),aT(t,e,r,s,n);case 15:return M$(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ii(r,s),_w(t,e),e.tag=1,gs(r)?(t=!0,t0(e)):t=!1,zd(e,n),j$(e,r,s),BE(e,r,s,n),WE(null,e,r,!0,t,n);case 19:return q$(t,e,n);case 22:return B$(t,e,n)}throw Error(de(156,e.tag))};function oD(t,e){return R3(t,e)}function gF(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(t,e,n,r){return new gF(t,e,n,r)}function uA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mF(t){if(typeof t=="function")return uA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===NS)return 11;if(t===PS)return 14}return 2}function $c(t,e){var n=t.alternate;return n===null?(n=ii(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xw(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")uA(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xd:return Ql(n.children,s,i,e);case TS:o=8,s|=8;break;case uE:return t=ii(12,n,e,s|2),t.elementType=uE,t.lanes=i,t;case dE:return t=ii(13,n,e,s),t.elementType=dE,t.lanes=i,t;case hE:return t=ii(19,n,e,s),t.elementType=hE,t.lanes=i,t;case m3:return gv(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case p3:o=10;break e;case g3:o=9;break e;case NS:o=11;break e;case PS:o=14;break e;case Ka:o=16,r=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return e=ii(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ql(t,e,n,r){return t=ii(7,t,r,e),t.lanes=n,t}function gv(t,e,n,r){return t=ii(22,t,r,e),t.elementType=m3,t.lanes=n,t.stateNode={isHidden:!1},t}function u1(t,e,n){return t=ii(6,t,null,e),t.lanes=n,t}function d1(t,e,n){return e=ii(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yF(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hb(0),this.expirationTimes=Hb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hb(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dA(t,e,n,r,s,i,o,a,c){return t=new yF(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ii(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},KS(i),t}function wF(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function aD(t){if(!t)return Vc;t=t._reactInternals;e:{if(Iu(t)!==t||t.tag!==1)throw Error(de(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(t.tag===1){var n=t.type;if(gs(n))return a$(t,n,e)}return e}function cD(t,e,n,r,s,i,o,a,c){return t=dA(n,r,!0,t,s,i,o,a,c),t.context=aD(null),n=t.current,r=Lr(),s=Rc(n),i=oa(r,s),i.callback=e??null,kc(n,i,s),t.current.lanes=s,fm(t,s,r),ms(t,r),t}function mv(t,e,n,r){var s=e.current,i=Lr(),o=Rc(s);return n=aD(n),e.context===null?e.context=n:e.pendingContext=n,e=oa(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=kc(s,e,o),t!==null&&(Bi(t,s,o,i),ww(t,s,o)),o}function p0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hA(t,e){vT(t,e),(t=t.alternate)&&vT(t,e)}function vF(){return null}var lD=typeof reportError=="function"?reportError:function(t){console.error(t)};function fA(t){this._internalRoot=t}yv.prototype.render=fA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(de(409));mv(t,e,null,null)};yv.prototype.unmount=fA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ou(function(){mv(null,t,null,null)}),e[fa]=null}};function yv(t){this._internalRoot=t}yv.prototype.unstable_scheduleHydration=function(t){if(t){var e=B3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rc.length&&e!==0&&e<rc[n].priority;n++);rc.splice(n,0,t),n===0&&z3(t)}};function pA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bT(){}function bF(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=p0(o);i.call(l)}}var o=cD(e,r,t,0,null,!1,!1,"",bT);return t._reactRootContainer=o,t[fa]=o.current,Qp(t.nodeType===8?t.parentNode:t),ou(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=p0(c);a.call(l)}}var c=dA(t,0,!1,null,null,!1,!1,"",bT);return t._reactRootContainer=c,t[fa]=c.current,Qp(t.nodeType===8?t.parentNode:t),ou(function(){mv(e,c,n,r)}),c}function vv(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=p0(o);a.call(c)}}mv(e,o,t,s)}else o=bF(n,e,t,s,r);return p0(o)}L3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yf(e.pendingLanes);n!==0&&(RS(e,n|1),ms(e,vn()),!(vt&6)&&(mh=vn()+500,sl()))}break;case 13:ou(function(){var r=pa(t,1);if(r!==null){var s=Lr();Bi(r,t,1,s)}}),hA(t,1)}};$S=function(t){if(t.tag===13){var e=pa(t,134217728);if(e!==null){var n=Lr();Bi(e,t,134217728,n)}hA(t,134217728)}};M3=function(t){if(t.tag===13){var e=Rc(t),n=pa(t,e);if(n!==null){var r=Lr();Bi(n,t,e,r)}hA(t,e)}};B3=function(){return jt};F3=function(t,e){var n=jt;try{return jt=t,e()}finally{jt=n}};EE=function(t,e,n){switch(e){case"input":if(gE(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=lv(r);if(!s)throw Error(de(90));w3(r),gE(r,s)}}}break;case"textarea":b3(t,n);break;case"select":e=n.value,e!=null&&Ld(t,!!n.multiple,e,!1)}};I3=aA;T3=ou;var _F={usingClientEntryPoint:!1,Events:[gm,Td,lv,S3,A3,aA]},vf={findFiberByHostInstance:Tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EF={bundleType:vf.bundleType,version:vf.version,rendererPackageName:vf.rendererPackageName,rendererConfig:vf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ea.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=k3(t),t===null?null:t.stateNode},findFiberByHostInstance:vf.findFiberByHostInstance||vF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yy.isDisabled&&yy.supportsFiber)try{iv=yy.inject(EF),vo=yy}catch{}}Bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_F;Bs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pA(e))throw Error(de(200));return wF(t,e,null,n)};Bs.createRoot=function(t,e){if(!pA(t))throw Error(de(299));var n=!1,r="",s=lD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dA(t,1,!1,null,null,n,!1,r,s),t[fa]=e.current,Qp(t.nodeType===8?t.parentNode:t),new fA(e)};Bs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=k3(e),t=t===null?null:t.stateNode,t};Bs.flushSync=function(t){return ou(t)};Bs.hydrate=function(t,e,n){if(!wv(e))throw Error(de(200));return vv(null,t,e,!0,n)};Bs.hydrateRoot=function(t,e,n){if(!pA(t))throw Error(de(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=lD;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cD(e,null,t,1,n??null,s,!1,i,o),t[fa]=e.current,Qp(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new yv(e)};Bs.render=function(t,e,n){if(!wv(e))throw Error(de(200));return vv(null,t,e,!1,n)};Bs.unmountComponentAtNode=function(t){if(!wv(t))throw Error(de(40));return t._reactRootContainer?(ou(function(){vv(null,null,t,!1,function(){t._reactRootContainer=null,t[fa]=null})}),!0):!1};Bs.unstable_batchedUpdates=aA;Bs.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wv(n))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return vv(t,e,n,!1,r)};Bs.version="18.3.1-next-f1338f8080-20240426";function uD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uD)}catch(t){console.error(t)}}uD(),u3.exports=Bs;var gA=u3.exports,_T=gA;cE.createRoot=_T.createRoot,cE.hydrateRoot=_T.hydrateRoot;const dD="2.31.4";let bf={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${dD}`},ae=class tC extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof tC?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof tC&&n.cause.docsPath||n.docsPath,i=(a=bf.getDocsUrl)==null?void 0:a.call(bf,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...bf.version?[`Version: ${bf.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=dD}walk(e){return hD(this,e)}};function hD(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?hD(t.cause,e):e?null:t}let fD=class extends ae{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class CF extends ae{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let xF=class extends ae{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};class pD extends ae{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let gD=class extends ae{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class ET extends ae{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Dh(t,{dir:e,size:n=32}={}){return typeof t=="string"?Dc(t,{dir:e,size:n}):SF(t,{dir:e,size:n})}function Dc(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new gD({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function SF(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new gD({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function ma(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function _n(t){return ma(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function jh(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const AF=new TextEncoder;function bv(t,e={}){return typeof t=="number"||typeof t=="bigint"?TF(t,e):typeof t=="boolean"?IF(t,e):ma(t)?So(t,e):qd(t,e)}function IF(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Gi(n,{size:e.size}),Dh(n,{size:e.size})):n}const $o={zero:48,nine:57,A:65,F:70,a:97,f:102};function CT(t){if(t>=$o.zero&&t<=$o.nine)return t-$o.zero;if(t>=$o.A&&t<=$o.F)return t-($o.A-10);if(t>=$o.a&&t<=$o.f)return t-($o.a-10)}function So(t,e={}){let n=t;e.size&&(Gi(n,{size:e.size}),n=Dh(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=CT(r.charCodeAt(a++)),l=CT(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ae(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function TF(t,e){const n=Ye(t,e);return So(n)}function qd(t,e={}){const n=AF.encode(t);return typeof e.size=="number"?(Gi(n,{size:e.size}),Dh(n,{dir:"right",size:e.size})):n}function Gi(t,{size:e}){if(_n(t)>e)throw new xF({givenSize:_n(t),maxSize:e})}function ya(t,e={}){const{signed:n}=e;e.size&&Gi(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function wa(t,e={}){return Number(ya(t,e))}function mD(t,e={}){let n=So(t);return e.size&&(Gi(n,{size:e.size}),n=jh(n,{dir:"right"})),new TextDecoder().decode(n)}const NF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function au(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ye(t,e):typeof t=="string"?_v(t,e):typeof t=="boolean"?yD(t,e):zr(t,e)}function yD(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Gi(n,{size:e.size}),Dh(n,{size:e.size})):n}function zr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=NF[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Gi(r,{size:e.size}),Dh(r,{dir:"right",size:e.size})):r}function Ye(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new fD({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Dh(a,{size:r}):a}const PF=new TextEncoder;function _v(t,e={}){const n=PF.encode(t);return zr(n,e)}async function kF(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Ye(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Gc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new qF(t.type);return`${t.name}(${Ev(t.inputs,{includeName:e})})`}function Ev(t,{includeName:e=!1}={}){return t?t.map(n=>OF(n,{includeName:e})).join(e?", ":","):""}function OF(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Ev(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class RF extends ae{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class xT extends ae{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class wD extends ae{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Ev(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class Cv extends ae{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class $F extends ae{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class DF extends ae{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${_n(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class jF extends ae{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class KCe extends ae{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class YCe extends ae{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class vD extends ae{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class UF extends ae{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class bD extends ae{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class g0 extends ae{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class LF extends ae{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class QCe extends ae{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class MF extends ae{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Gc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Gc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class BF extends ae{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class nC extends ae{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Ev(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class _D extends ae{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Gc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class FF extends ae{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class zF extends ae{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class WF extends ae{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class qF extends ae{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Kc(t){return typeof t[0]=="string"?xv(t):HF(t)}function HF(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function xv(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class Yc extends ae{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let Sv=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const wy=BigInt(2**32-1),ST=BigInt(32);function VF(t,e=!1){return e?{h:Number(t&wy),l:Number(t>>ST&wy)}:{h:Number(t>>ST&wy)|0,l:Number(t&wy)|0}}function GF(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=VF(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const KF=(t,e,n)=>t<<n|e>>>32-n,YF=(t,e,n)=>e<<n|t>>>32-n,QF=(t,e,n)=>e<<n-32|t>>>64-n,JF=(t,e,n)=>t<<n-32|e>>>64-n,Wu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ZF(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function m0(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function cu(t,...e){if(!ZF(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ZCe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");m0(t.outputLen),m0(t.blockLen)}function y0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ED(t,e){cu(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function XF(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ig(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function h1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function eo(t,e){return t<<32-e|t>>>e}const e9=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function t9(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function n9(t){for(let e=0;e<t.length;e++)t[e]=t9(t[e]);return t}const AT=e9?t=>t:n9,CD=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",r9=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function XCe(t){if(cu(t),CD)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=r9[t[n]];return e}const Do={_0:48,_9:57,A:65,F:70,a:97,f:102};function IT(t){if(t>=Do._0&&t<=Do._9)return t-Do._0;if(t>=Do.A&&t<=Do.F)return t-(Do.A-10);if(t>=Do.a&&t<=Do.f)return t-(Do.a-10)}function exe(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(CD)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=IT(t.charCodeAt(i)),a=IT(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function s9(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Av(t){return typeof t=="string"&&(t=s9(t)),cu(t),t}function txe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];cu(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class xD{}function SD(t){const e=r=>t().update(Av(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function i9(t){const e=(r,s)=>t(s).update(Av(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function nxe(t=32){if(Wu&&typeof Wu.getRandomValues=="function")return Wu.getRandomValues(new Uint8Array(t));if(Wu&&typeof Wu.randomBytes=="function")return Uint8Array.from(Wu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const o9=BigInt(0),_f=BigInt(1),a9=BigInt(2),c9=BigInt(7),l9=BigInt(256),u9=BigInt(113),AD=[],ID=[],TD=[];for(let t=0,e=_f,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],AD.push(2*(5*r+n)),ID.push((t+1)*(t+2)/2%64);let s=o9;for(let i=0;i<7;i++)e=(e<<_f^(e>>c9)*u9)%l9,e&a9&&(s^=_f<<(_f<<BigInt(i))-_f);TD.push(s)}const ND=GF(TD,!0),d9=ND[0],h9=ND[1],TT=(t,e,n)=>n>32?QF(t,e,n):KF(t,e,n),NT=(t,e,n)=>n>32?JF(t,e,n):YF(t,e,n);function PD(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=TT(l,u,1)^n[a],h=NT(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=ID[o],c=TT(s,i,a),l=NT(s,i,a),u=AD[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=d9[r],t[1]^=h9[r]}ig(n)}class ym extends xD{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,m0(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=XF(this.state)}clone(){return this._cloneInto()}keccak(){AT(this.state32),PD(this.state32,this.rounds),AT(this.state32),this.posOut=0,this.pos=0}update(e){y0(this),e=Av(e),cu(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){y0(this,!1),cu(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return m0(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ED(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ig(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new ym(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const il=(t,e,n)=>SD(()=>new ym(e,t,n)),f9=il(6,144,224/8),p9=il(6,136,256/8),g9=il(6,104,384/8),m9=il(6,72,512/8),y9=il(1,144,224/8),mA=il(1,136,256/8),w9=il(1,104,384/8),v9=il(1,72,512/8),kD=(t,e,n)=>i9((r={})=>new ym(e,t,r.dkLen===void 0?n:r.dkLen,!0)),b9=kD(31,168,128/8),_9=kD(31,136,256/8),rxe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:ym,keccakP:PD,keccak_224:y9,keccak_256:mA,keccak_384:w9,keccak_512:v9,sha3_224:f9,sha3_256:p9,sha3_384:g9,sha3_512:m9,shake128:b9,shake256:_9},Symbol.toStringTag,{value:"Module"}));function Uh(t,e){const n=e||"hex",r=mA(ma(t,{strict:!1})?bv(t):t);return n==="bytes"?r:au(r)}const f1=new Sv(8192);function wm(t,e){if(f1.has(`${t}.${e}`))return f1.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Uh(qd(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return f1.set(`${t}.${e}`,i),i}function _c(t,e){if(!Hi(t,{strict:!1}))throw new Yc({address:t});return wm(t,e)}const E9=/^0x[a-fA-F0-9]{40}$/,p1=new Sv(8192);function Hi(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(p1.has(r))return p1.get(r);const s=E9.test(t)?t.toLowerCase()===t?!0:n?wm(t)===t:!0:!1;return p1.set(r,s),s}function w0(t,e,n,{strict:r}={}){return ma(t,{strict:!1})?rC(t,e,n,{strict:r}):$D(t,e,n,{strict:r})}function OD(t,e){if(typeof e=="number"&&e>0&&e>_n(t)-1)throw new pD({offset:e,position:"start",size:_n(t)})}function RD(t,e,n){if(typeof e=="number"&&typeof n=="number"&&_n(t)!==n-e)throw new pD({offset:n,position:"end",size:_n(t)})}function $D(t,e,n,{strict:r}={}){OD(t,e);const s=t.slice(e,n);return r&&RD(s,e,n),s}function rC(t,e,n,{strict:r}={}){OD(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&RD(s,e,n),s}const C9=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,DD=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function jD(t,e){if(t.length!==e.length)throw new jF({expectedLength:t.length,givenLength:e.length});const n=x9({params:t,values:e}),r=wA(n);return r.length===0?"0x":r}function x9({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(yA({param:t[r],value:e[r]}));return n}function yA({param:t,value:e}){const n=vA(t.type);if(n){const[r,s]=n;return A9(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return k9(e,{param:t});if(t.type==="address")return S9(e);if(t.type==="bool")return T9(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=DD.exec(t.type)??[];return N9(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return I9(e,{param:t});if(t.type==="string")return P9(e);throw new FF(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function wA(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=_n(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ye(e+s,{size:32})),r.push(a),s+=_n(a)):n.push(a)}return Kc([...n,...r])}function S9(t){if(!Hi(t))throw new Yc({address:t});return{dynamic:!1,encoded:Dc(t.toLowerCase())}}function A9(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new WF(t);if(!r&&t.length!==e)throw new $F({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=yA({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=wA(i);if(r){const a=Ye(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Kc([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Kc(i.map(({encoded:o})=>o))}}function I9(t,{param:e}){const[,n]=e.type.split("bytes"),r=_n(t);if(!n){let s=t;return r%32!==0&&(s=Dc(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Kc([Dc(Ye(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new DF({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Dc(t,{dir:"right"})}}function T9(t){if(typeof t!="boolean")throw new ae(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Dc(yD(t))}}function N9(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new fD({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ye(t,{size:32,signed:e})}}function P9(t){const e=_v(t),n=Math.ceil(_n(e)/32),r=[];for(let s=0;s<n;s++)r.push(Dc(w0(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Kc([Dc(Ye(_n(e),{size:32})),...r])}}function k9(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=yA({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?wA(r):Kc(r.map(({encoded:s})=>s))}}function vA(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const g1="/docs/contract/encodeDeployData";function bA(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new RF({docsPath:g1});if(!("inputs"in s))throw new xT({docsPath:g1});if(!s.inputs||s.inputs.length===0)throw new xT({docsPath:g1});const i=jD(s.inputs,n);return xv([r,i])}function cr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Tu extends ae{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Sw extends ae{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function O9(t){const e=Uh(`0x${t.substring(4)}`).substring(26);return wm(`0x${e}`)}const R9="modulepreload",$9=function(t){return"/"+t},PT={},wn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=$9(c),c in PT)return;PT[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":R9,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function D9({hash:t,signature:e}){const n=ma(t)?t:au(t),{secp256k1:r}=await wn(async()=>{const{secp256k1:o}=await import("./secp256k1-bXUULimP.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=kT(f);return new r.Signature(ya(l),ya(u)).addRecoveryBit(p)}const o=ma(e)?e:au(e);if(_n(o)!==65)throw new Error("invalid signature length");const a=wa(`0x${o.slice(130)}`),c=kT(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function kT(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function j9({hash:t,signature:e}){return O9(await D9({hash:t,signature:e}))}class OT extends ae{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class UD extends ae{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class U9 extends ae{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const L9={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new U9({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new UD({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new OT({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new OT({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function _A(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(L9);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function M9(t,e="hex"){const n=LD(t),r=_A(new Uint8Array(n.length));return n.encode(r),e==="hex"?zr(r.bytes):r.bytes}function LD(t){return Array.isArray(t)?B9(t.map(e=>LD(e))):F9(t)}function B9(t){const e=t.reduce((s,i)=>s+i.length,0),n=MD(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function F9(t){const e=typeof t=="string"?So(t):t,n=MD(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function MD(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ae("Length is too large.")}function z9(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Uh(xv(["0x05",M9([e?Ye(e):"0x",s,n?Ye(n):"0x"])]));return r==="bytes"?So(i):i}async function BD(t){const{authorization:e,signature:n}=t;return j9({hash:z9(e),signature:n??e})}class sC extends ae{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class W9 extends ae{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class q9 extends ae{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class FD extends ae{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function zD({chain:t,currentChainId:e}){if(!t)throw new q9;if(e!==t.id)throw new W9({chain:t,currentChainId:e})}const H9={gwei:9,wei:18},V9={ether:-9,wei:9},G9={ether:-18,gwei:-9};function Lh(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function ys(t,e="wei"){return Lh(t,V9[e])}class kl extends ae{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(kl,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(kl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class v0 extends ae{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ys(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(v0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class iC extends ae{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ys(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(iC,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class oC extends ae{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(oC,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class aC extends ae{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(aC,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class cC extends ae{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(cC,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class lC extends ae{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(lC,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class uC extends ae{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(uC,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class dC extends ae{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(dC,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class hC extends ae{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(hC,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class b0 extends ae{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ys(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ys(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(b0,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Iv extends ae{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function EA(t,e="wei"){return Lh(t,H9[e])}function vm(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class K9 extends ae{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class Y9 extends ae{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",vm(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Q9 extends ae{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=vm({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${EA(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ys(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ys(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ys(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class WD extends ae{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class qD extends ae{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class J9 extends ae{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Mr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),Z9=t=>t,CA=t=>t;class vp extends ae{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${CA(o)}`,e&&`Request body: ${Mr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class xA extends ae{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${CA(r)}`,`Request body: ${Mr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class RT extends ae{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${CA(n)}`,`Request body: ${Mr(e)}`],name:"TimeoutError"})}}const X9=-1;class vs extends ae{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof xA?e.code:n??X9}}class zs extends vs{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class og extends vs{constructor(e){super(e,{code:og.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(og,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class ag extends vs{constructor(e){super(e,{code:ag.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(ag,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class cg extends vs{constructor(e,{method:n}={}){super(e,{code:cg.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(cg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class lg extends vs{constructor(e){super(e,{code:lg.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(lg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class lu extends vs{constructor(e){super(e,{code:lu.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(lu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class ug extends vs{constructor(e){super(e,{code:ug.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ug,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class dg extends vs{constructor(e){super(e,{code:dg.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(dg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class jc extends vs{constructor(e){super(e,{code:jc.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class yh extends vs{constructor(e){super(e,{code:yh.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(yh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ol extends vs{constructor(e,{method:n}={}){super(e,{code:Ol.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Ol,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class wh extends vs{constructor(e){super(e,{code:wh.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(wh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class hg extends vs{constructor(e){super(e,{code:hg.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(hg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Rn extends zs{constructor(e){super(e,{code:Rn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Rn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class fg extends zs{constructor(e){super(e,{code:fg.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(fg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class pg extends zs{constructor(e,{method:n}={}){super(e,{code:pg.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(pg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class gg extends zs{constructor(e){super(e,{code:gg.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(gg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class mg extends zs{constructor(e){super(e,{code:mg.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(mg,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ao extends zs{constructor(e){super(e,{code:Ao.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ao,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class vh extends zs{constructor(e){super(e,{code:vh.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(vh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class yg extends zs{constructor(e){super(e,{code:yg.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(yg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class wg extends zs{constructor(e){super(e,{code:wg.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(wg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class vg extends zs{constructor(e){super(e,{code:vg.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(vg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class bg extends zs{constructor(e){super(e,{code:bg.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(bg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class _g extends zs{constructor(e){super(e,{code:_g.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(_g,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class bh extends zs{constructor(e){super(e,{code:bh.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(bh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class e7 extends vs{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function SA(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ae?t.walk(s=>(s==null?void 0:s.code)===kl.code):t;return r instanceof ae?new kl({cause:t,message:r.details}):kl.nodeMessage.test(n)?new kl({cause:t,message:t.details}):v0.nodeMessage.test(n)?new v0({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):iC.nodeMessage.test(n)?new iC({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):oC.nodeMessage.test(n)?new oC({cause:t,nonce:e==null?void 0:e.nonce}):aC.nodeMessage.test(n)?new aC({cause:t,nonce:e==null?void 0:e.nonce}):cC.nodeMessage.test(n)?new cC({cause:t,nonce:e==null?void 0:e.nonce}):lC.nodeMessage.test(n)?new lC({cause:t}):uC.nodeMessage.test(n)?new uC({cause:t,gas:e==null?void 0:e.gas}):dC.nodeMessage.test(n)?new dC({cause:t,gas:e==null?void 0:e.gas}):hC.nodeMessage.test(n)?new hC({cause:t}):b0.nodeMessage.test(n)?new b0({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Iv({cause:t})}function HD(t,{docsPath:e,...n}){const r=(()=>{const s=SA(t,n);return s instanceof Iv?t:s})();return new Q9(r,{docsPath:e,...n})}function AA(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const t7={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Tv(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=n7(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>zr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Ye(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Ye(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ye(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Ye(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ye(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Ye(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=t7[t.type]),typeof t.value<"u"&&(e.value=Ye(t.value)),e}function n7(t){return t.map(e=>({address:e.address,r:e.r?Ye(BigInt(e.r)):e.r,s:e.s?Ye(BigInt(e.s)):e.s,chainId:Ye(e.chainId),nonce:Ye(e.nonce),...typeof e.yParity<"u"?{yParity:Ye(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ye(e.v)}:{}}))}function Ft(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const r7=2n**256n-1n;function bm(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?cr(e):void 0;if(o&&!Hi(o.address))throw new Yc({address:o.address});if(i&&!Hi(i))throw new Yc({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new K9;if(r&&r>r7)throw new v0({maxFeePerGas:r});if(s&&r&&s>r)throw new b0({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function _m(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return wa(e)}class s7 extends ae{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class IA extends ae{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class i7 extends ae{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ys(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class VD extends ae{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const GD={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function KD(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?wa(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?wa(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?GD[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=o7(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function o7(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function a7(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:KD(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Eg(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?Ye(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new VD({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||a7)(c)}async function YD(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function c7(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await Ft(t,Eg,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return ya(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):Ft(t,Eg,"getBlock")({}),Ft(t,YD,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new IA;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function $T(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,m;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((m=r==null?void 0:r.fees)==null?void 0:m.baseFeeMultiplier)??1.2})();if(o<1)throw new s7;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await Ft(t,Eg,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new IA;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await c7(t,{block:u,chain:r,request:s}),m=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??m+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await Ft(t,YD,"getGasPrice")({}))}}class l7 extends ae{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=vm({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${EA(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ys(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ys(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ys(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function u7(t,{docsPath:e,...n}){const r=(()=>{const s=SA(t,n);return s instanceof Iv?t:s})();return new l7(r,{docsPath:e,...n})}class d7 extends ae{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class h7 extends ae{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function DT(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function f7(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=DT(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=DT(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function jT(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new ET({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new ET({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function p7(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Ye(e)),n!==void 0&&(o.nonce=Ye(n)),r!==void 0&&(o.state=jT(r)),s!==void 0){if(o.state)throw new h7;o.stateDiff=jT(s)}return o}function QD(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Hi(n,{strict:!1}))throw new Yc({address:n});if(e[n])throw new d7({address:n});e[n]=p7(r)}return e}async function JD(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?Ye(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function ZD(t,e){var s,i,o;const{account:n=t.account}=e,r=n?cr(n):void 0;try{let V=function(T){const{block:L,request:D,rpcStateOverride:$}=T;return t.request({method:"eth_estimateGas",params:$?[D,L??"latest",$]:L?[D,L]:[D]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,value:E,stateOverride:_,...S}=await Nv(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),A=(typeof d=="bigint"?Ye(d):void 0)||h,C=QD(_),k=await(async()=>{if(S.to)return S.to;if(c&&c.length>0)return await BD({authorization:c[0]}).catch(()=>{throw new ae("`to` is required. Could not infer from `authorizationList`")})})();bm(e);const O=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,F=(O||Tv)({...AA(S,{format:O}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:k,value:E});let N=BigInt(await V({block:A,request:F,rpcStateOverride:C}));if(c){const T=await JD(t,{address:F.from}),L=await Promise.all(c.map(async D=>{const{address:$}=D,U=await V({block:A,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:$,value:Ye(T)},rpcStateOverride:C}).catch(()=>100000n);return 2n*BigInt(U)}));N+=L.reduce((D,$)=>D+$,0n)}return N}catch(a){throw u7(a,{...e,account:r,chain:t.chain})}}async function XD(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Ye(r):n]},{dedupe:!!r});return wa(s)}function e5(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>So(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>zr(i))}function t5(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>So(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>So(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>zr(o))}function g7(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function m7(t,e,n){return t&e^~t&n}function y7(t,e,n){return t&e^t&n^e&n}class w7 extends xD{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=h1(this.buffer)}update(e){y0(this),e=Av(e),cu(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=h1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){y0(this),ED(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,ig(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;g7(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=h1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Aa=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),v7=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ia=new Uint32Array(64);class b7 extends w7{constructor(e=32){super(64,e,8,!1),this.A=Aa[0]|0,this.B=Aa[1]|0,this.C=Aa[2]|0,this.D=Aa[3]|0,this.E=Aa[4]|0,this.F=Aa[5]|0,this.G=Aa[6]|0,this.H=Aa[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ia[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ia[d-15],f=Ia[d-2],p=eo(h,7)^eo(h,18)^h>>>3,m=eo(f,17)^eo(f,19)^f>>>10;Ia[d]=m+Ia[d-7]+p+Ia[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=eo(a,6)^eo(a,11)^eo(a,25),f=u+h+m7(a,c,l)+v7[d]+Ia[d]|0,m=(eo(r,2)^eo(r,13)^eo(r,22))+y7(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){ig(Ia)}destroy(){this.set(0,0,0,0,0,0,0,0),ig(this.buffer)}}const _7=SD(()=>new b7),E7=_7;function C7(t,e){return E7(ma(t,{strict:!1})?bv(t):t)}function x7(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=C7(e);return s.set([n],0),r==="bytes"?s:zr(s)}function S7(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(x7({commitment:i,to:r,version:n}));return s}const UT=6,n5=32,TA=4096,r5=n5*TA,LT=r5*UT-1-1*TA*UT;class A7 extends ae{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class I7 extends ae{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function T7(t){const e=typeof t.data=="string"?So(t.data):t.data,n=_n(e);if(!n)throw new I7;if(n>LT)throw new A7({maxSize:LT,size:n});const r=[];let s=!0,i=0;for(;s;){const o=_A(new Uint8Array(r5));let a=0;for(;a<TA;){const c=e.slice(i,i+(n5-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>zr(o.bytes))}function N7(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??T7({data:e}),i=t.commitments??e5({blobs:s,kzg:n,to:r}),o=t.proofs??t5({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function P7(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new Y9({transaction:t})}const s5=["blobVersionedHashes","chainId","fees","gas","nonce","type"],MT=new Map;async function Nv(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=s5,type:u}=e,d=n&&cr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await Ft(t,Eg,"getBlock")({blockTag:"latest"}),f)}let m;async function w(){return m||(s?s.id:typeof e.chainId<"u"?e.chainId:(m=await Ft(t,_m,"getChainId")({}),m))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await Ft(t,XD,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=e5({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=S7({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=t5({blobs:r,commitments:y,kzg:o}),v=N7({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=P7(h)}catch{let y=MT.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",MT.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await $T(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new i7({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new IA;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await $T(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await Ft(t,ZD,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),bm(h),delete h.parameters,h}async function i5(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const m1=new Sv(128);async function Em(t,e){var b,v,E,_;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:m,...w}=e;if(typeof n>"u")throw new Tu({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?cr(n):null;try{bm(e);const S=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await BD({authorization:i[0]}).catch(()=>{throw new ae("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let x;r!==null&&(x=await Ft(t,_m,"getChainId")({}),zD({currentChainId:x,chain:r}));const A=(E=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:E.format,k=(A||Tv)({...AA(w,{format:A}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:S,type:p,value:m}),O=m1.get(t.uid),M=O?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:M,params:[k]},{retryCount:0})}catch(F){if(O===!1)throw F;const V=F;if(V.name==="InvalidInputRpcError"||V.name==="InvalidParamsRpcError"||V.name==="MethodNotFoundRpcError"||V.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(N=>(m1.set(t.uid,!0),N)).catch(N=>{const T=N;throw T.name==="MethodNotFoundRpcError"||T.name==="MethodNotSupportedRpcError"?(m1.set(t.uid,!1),V):T});throw V}}if((y==null?void 0:y.type)==="local"){const x=await Ft(t,Nv,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...s5,"sidecars"],type:p,value:m,...w,to:S}),A=(_=r==null?void 0:r.serializers)==null?void 0:_.transaction,C=await y.signTransaction(x,{serializer:A});return await Ft(t,i5,"sendRawTransaction")({serializedTransaction:C})}throw(y==null?void 0:y.type)==="smart"?new Sw({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Sw({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(S){throw S instanceof Sw?S:HD(S,{...e,account:y,chain:e.chain||void 0})}}function k7(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=bA({abi:n,args:r,bytecode:s});return Em(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const fC=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],sxe=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],O7=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],R7=[...O7,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}];function $7(t,e={}){typeof e.size<"u"&&Gi(t,{size:e.size});const n=zr(t,e);return ya(n,e)}function D7(t,e={}){let n=t;if(typeof e.size<"u"&&(Gi(n,{size:e.size}),n=jh(n)),n.length>1||n[0]>1)throw new CF(n);return!!n[0]}function aa(t,e={}){typeof e.size<"u"&&Gi(t,{size:e.size});const n=zr(t,e);return wa(n,e)}function j7(t,e={}){let n=t;return typeof e.size<"u"&&(Gi(n,{size:e.size}),n=jh(n,{dir:"right"})),new TextDecoder().decode(n)}function Pv(t,e){const n=typeof e=="string"?So(e):e,r=_A(n);if(_n(n)===0&&t.length>0)throw new Cv;if(_n(e)&&_n(e)<32)throw new wD({data:typeof e=="string"?e:zr(e),params:t,size:_n(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Hd(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Hd(t,e,{staticPosition:n}){const r=vA(e.type);if(r){const[s,i]=r;return L7(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return z7(t,e,{staticPosition:n});if(e.type==="address")return U7(t);if(e.type==="bool")return M7(t);if(e.type.startsWith("bytes"))return B7(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return F7(t,e);if(e.type==="string")return W7(t,{staticPosition:n});throw new zF(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const BT=32,pC=32;function U7(t){const e=t.readBytes(32);return[wm(zr($D(e,-20))),32]}function L7(t,e,{length:n,staticPosition:r}){if(!n){const o=aa(t.readBytes(pC)),a=r+o,c=a+BT;t.setPosition(a);const l=aa(t.readBytes(BT)),u=Cg(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,m]=Hd(t,e,{staticPosition:c});d+=m,h.push(p)}return t.setPosition(r+32),[h,32]}if(Cg(e)){const o=aa(t.readBytes(pC)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Hd(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Hd(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function M7(t){return[D7(t.readBytes(32),{size:32}),32]}function B7(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=aa(t.readBytes(32));t.setPosition(n+o);const a=aa(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[zr(c),32]}return[zr(t.readBytes(Number.parseInt(s),32)),32]}function F7(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?$7(s,{signed:n}):aa(s,{signed:n}),32]}function z7(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(Cg(e)){const o=aa(t.readBytes(pC)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Hd(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Hd(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function W7(t,{staticPosition:e}){const n=aa(t.readBytes(32)),r=e+n;t.setPosition(r);const s=aa(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=j7(jh(i));return t.setPosition(e+32),[o,32]}function Cg(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Cg);const n=vA(t.type);return!!(n&&Cg({...t,type:n[1]}))}const q7=t=>Uh(bv(t));function H7(t){return q7(t)}const V7="1.0.8";let hi=class gC extends Error{constructor(e,n={}){var o;const r=n.cause instanceof gC?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof gC&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${V7}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Ca(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const o5=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,a5=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,c5=/^\(.+?\).*?$/,FT=/^tuple(?<array>(\[(\d*)\])*)$/;function mC(t){let e=t.type;if(FT.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=mC(i),s<n-1&&(e+=", ")}const r=Ca(FT,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,mC({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Ef(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=mC(s),r!==n-1&&(e+=", ")}return e}function G7(t){var e;return t.type==="function"?`function ${t.name}(${Ef(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Ef(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Ef(t.inputs)})`:t.type==="error"?`error ${t.name}(${Ef(t.inputs)})`:t.type==="constructor"?`constructor(${Ef(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const l5=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function K7(t){return l5.test(t)}function Y7(t){return Ca(l5,t)}const u5=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Q7(t){return u5.test(t)}function J7(t){return Ca(u5,t)}const d5=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Z7(t){return d5.test(t)}function X7(t){return Ca(d5,t)}const h5=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function f5(t){return h5.test(t)}function ez(t){return Ca(h5,t)}const p5=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function tz(t){return p5.test(t)}function nz(t){return Ca(p5,t)}const g5=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function rz(t){return g5.test(t)}function sz(t){return Ca(g5,t)}const iz=/^receive\(\) external payable$/;function oz(t){return iz.test(t)}const az=new Set(["indexed"]),yC=new Set(["calldata","memory","storage"]);class cz extends hi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class lz extends hi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class uz extends hi{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class dz extends hi{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class hz extends hi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class fz extends hi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class pz extends hi{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Mh extends hi{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class gz extends hi{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class mz extends hi{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class yz extends hi{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class wz extends hi{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function vz(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const y1=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function bz(t,e={}){if(Z7(t))return _z(t,e);if(Q7(t))return Ez(t,e);if(K7(t))return Cz(t,e);if(tz(t))return xz(t,e);if(rz(t))return Sz(t);if(oz(t))return{type:"receive",stateMutability:"payable"};throw new gz({signature:t})}function _z(t,e={}){const n=X7(t);if(!n)throw new Mh({signature:t,type:"function"});const r=Di(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(uu(r[a],{modifiers:yC,structs:e,type:"function"}));const o=[];if(n.returns){const a=Di(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(uu(a[l],{modifiers:yC,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function Ez(t,e={}){const n=J7(t);if(!n)throw new Mh({signature:t,type:"event"});const r=Di(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(uu(r[o],{modifiers:az,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Cz(t,e={}){const n=Y7(t);if(!n)throw new Mh({signature:t,type:"error"});const r=Di(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(uu(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function xz(t,e={}){const n=nz(t);if(!n)throw new Mh({signature:t,type:"constructor"});const r=Di(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(uu(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Sz(t){const e=sz(t);if(!e)throw new Mh({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Az=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Iz=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Tz=/^u?int$/;function uu(t,e){var d,h;const n=vz(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(y1.has(n))return y1.get(n);const r=c5.test(t),s=Ca(r?Iz:Az,t);if(!s)throw new uz({param:t});if(s.name&&Pz(s.name))throw new dz({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Di(s.type),p=[],m=f.length;for(let w=0;w<m;w++)p.push(uu(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Tz.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!m5(c))throw new lz({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new hz({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(yC.has(s.modifier)&&!kz(c,!!s.array))throw new fz({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return y1.set(n,u),u}function Di(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Di(a,[...e,n.trim()]):Di(a,e,`${n}${o}`,r);case"(":return Di(a,e,`${n}${o}`,r+1);case")":return Di(a,e,`${n}${o}`,r-1);default:return Di(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new wz({current:n,depth:r});return e.push(n.trim()),e}function m5(t){return t==="address"||t==="bool"||t==="function"||t==="string"||o5.test(t)||a5.test(t)}const Nz=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Pz(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||o5.test(t)||a5.test(t)||Nz.test(t)}function kz(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function Oz(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!f5(a))continue;const c=ez(a);if(!c)throw new Mh({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const m=uu(p,{type:"struct"});u.push(m)}if(!u.length)throw new mz({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=y5(c,e)}return r}const Rz=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function y5(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(c5.test(o.type))r.push(o);else{const c=Ca(Rz,o.type);if(!(c!=null&&c.type))throw new pz({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new yz({type:u});r.push({...o,type:`tuple${l??""}`,components:y5(e[u]??[],e,new Set([...n,u]))})}else if(m5(u))r.push(o);else throw new cz({type:u})}}return r}function w5(t){const e=Oz(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];f5(i)||n.push(bz(i,e))}return n}function $z(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ae("Unable to normalize signature.");return s}const Dz=t=>{const e=typeof t=="string"?t:G7(t);return $z(e)};function v5(t){return H7(Dz(t))}const NA=v5,PA=t=>w0(v5(t),0,4);function kA(t){const{abi:e,args:n=[],name:r}=t,s=ma(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?PA(a)===r:a.type==="event"?NA(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?wC(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=b5(a.inputs,o.inputs,n);if(l)throw new MF({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function wC(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Hi(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>wC(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>wC(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function b5(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return b5(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Hi(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Hi(n[r],{strict:!1}):!1)return o}}const w1="/docs/contract/decodeFunctionResult";function OA(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=kA({abi:e,args:n,name:r});if(!a)throw new g0(r,{docsPath:w1});i=a}if(i.type!=="function")throw new g0(void 0,{docsPath:w1});if(!i.outputs)throw new LF(i.name,{docsPath:w1});const o=Pv(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const zT="/docs/contract/encodeFunctionData";function jz(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=kA({abi:e,args:n,name:r});if(!i)throw new g0(r,{docsPath:zT});s=i}if(s.type!=="function")throw new g0(void 0,{docsPath:zT});return{abi:[s],functionName:PA(Gc(s))}}function Cm(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:jz(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?jD(s.inputs,e??[]):void 0;return xv([i,o??"0x"])}function RA({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new sC({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new sC({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const _5={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Uz={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Lz={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Mz(t){const{abi:e,data:n}=t,r=w0(n,0,4);if(r==="0x")throw new Cv;const i=[...e||[],Uz,Lz].find(o=>o.type==="error"&&r===PA(Gc(o)));if(!i)throw new vD(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Pv(i.inputs,w0(n,4)):void 0,errorName:i.name}}function E5({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Mr(e[i]):e[i]}`).join(", ")})`}class Bz extends ae{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?cr(n):void 0;let m=vm({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${EA(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ys(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ys(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ys(l)} gwei`,nonce:u});f&&(m+=`
${f7(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class C5 extends ae{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=kA({abi:n,args:r,name:o}),l=c?E5({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Gc(c,{includeName:!0}):void 0,d=vm({address:s&&Z9(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class vC extends ae{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Mz({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=_5[f]}else{const f=u?Gc(u,{includeName:!0}):void 0,p=u&&h?E5({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof vD&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class Fz extends ae{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class zz extends ae{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class $A extends ae{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function Wz(t,e){var r,s,i,o,a,c;if(!(t instanceof ae))return!1;const n=t.walk(l=>l instanceof vC);return n instanceof vC?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||n.reason===_5[50]):!1}function qz(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return ma(e)?e:null}function Hz(t){return`[${t.slice(2)}]`}function Vz(t){const e=new Uint8Array(32).fill(0);return t?qz(t)||Uh(qd(t)):zr(e)}function Gz(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(qd(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=qd(s[i]);o.byteLength>255&&(o=qd(Hz(Vz(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Kz=3;function _0(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof $A?t:t instanceof ae?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof Cv?new Fz({functionName:i}):[Kz,lu.code].includes(c)&&(l||u||d||h)?new vC({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof xA?u:h??d}):t;return new C5(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const Yz="0.1.1";function Qz(){return Yz}let x5=class bC extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof bC){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof bC&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Qz()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return S5(this,e)}};function S5(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?S5(t.cause,e):e?null:t}function Jz(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new eW({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function Jo(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new Xz({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Zz(c,r):c}function Zz(t,e){return Jz(t,{dir:"left",size:e})}let Xz=class extends x5{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},eW=class extends x5{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function tW(t){return{address:t.address,amount:Jo(t.amount),index:Jo(t.index),validatorIndex:Jo(t.validatorIndex)}}function nW(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Jo(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Jo(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Jo(t.gasLimit)},...typeof t.number=="bigint"&&{number:Jo(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Jo(t.prevRandao)},...typeof t.time=="bigint"&&{time:Jo(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(tW)}}}const rW="0x82ad56cb",sW="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",iW="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function oW(t,{docsPath:e,...n}){const r=(()=>{const s=SA(t,n);return s instanceof Iv?t:s})();return new Bz(r,{docsPath:e,...n})}function DA(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const v1=new Map;function A5({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>v1.delete(e),a=()=>c().map(({args:u})=>u),c=()=>v1.get(e)||[],l=u=>v1.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=DA();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function I5(t,e){var F,V,N,T;const{account:n=t.account,authorizationList:r,batch:s=!!((F=t.batch)!=null&&F.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:E,value:_,stateOverride:S,...x}=e,A=n?cr(n):void 0;if(u&&(h||f))throw new ae("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&E)throw new ae("Cannot provide both `code` & `to` as parameters.");const C=u&&d,k=h&&f&&E&&d,O=C||k,M=C?lW({code:u,data:d}):k?uW({data:d,factory:h,factoryData:f,to:E}):d;try{bm(e);const D=(typeof i=="bigint"?Ye(i):void 0)||o,$=l?nW(l):void 0,U=QD(S),W=(T=(N=(V=t.chain)==null?void 0:V.formatters)==null?void 0:N.transactionRequest)==null?void 0:T.format,ie=(W||Tv)({...AA(x,{format:W}),from:A==null?void 0:A.address,accessList:a,authorizationList:r,blobs:c,data:M,gas:p,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:O?void 0:E,value:_});if(s&&aW({request:ie})&&!U&&!$)try{return await cW(t,{...ie,blockNumber:i,blockTag:o})}catch(we){if(!(we instanceof FD)&&!(we instanceof sC))throw we}const ne=(()=>{const we=[ie,D];return U&&$?[...we,U,$]:U?[...we,U]:$?[...we,{},$]:we})(),se=await t.request({method:"eth_call",params:ne});return se==="0x"?{data:void 0}:{data:se}}catch(L){const D=dW(L),{offchainLookup:$,offchainLookupSignature:U}=await wn(async()=>{const{offchainLookup:W,offchainLookupSignature:J}=await import("./ccip-BkWUA2WW.js");return{offchainLookup:W,offchainLookupSignature:J}},[]);if(t.ccipRead!==!1&&(D==null?void 0:D.slice(0,10))===U&&E)return{data:await $(t,{data:D,to:E})};throw O&&(D==null?void 0:D.slice(0,10))==="0x101bb98d"?new zz({factory:h}):oW(L,{...e,account:A,chain:t.chain})}}function aW({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(rW)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function cW(t,e){var m;const{batchSize:n=1024,wait:r=0}=typeof((m=t.batch)==null?void 0:m.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new FD;l=RA({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?Ye(s):void 0)||i,{schedule:h}=A5({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const y=w.map(E=>({allowFailure:!0,callData:E.data,target:E.to})),b=Cm({abi:fC,args:[y],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return OA({abi:fC,args:[y],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new $A({data:f});return f==="0x"?{data:void 0}:{data:f}}function lW(t){const{code:e,data:n}=t;return bA({abi:w5(["constructor(bytes, bytes)"]),bytecode:sW,args:[e,n]})}function uW(t){const{data:e,factory:n,factoryData:r,to:s}=t;return bA({abi:w5(["constructor(address, bytes, address, bytes)"]),bytecode:iW,args:[s,e,n,r]})}function dW(t){var n;if(!(t instanceof ae))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function jA(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Cm({abi:n,args:s,functionName:i});try{const{data:c}=await Ft(t,I5,"call")({...o,data:a,to:r});return OA({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw _0(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function hW(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=RA({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:R7,functionName:"reverse",args:[au(Gz(c))],blockNumber:n,blockTag:r},u=Ft(t,jA,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(Wz(l))return null;throw l}}function fW(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function pW(t){const e=fW(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const gW=new Map,mW=new Map;function yW(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,gW),r=e(t,mW);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function wW(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=yW(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const vW=t=>`blockNumber.${t}`;async function bW(t,{cacheTime:e=t.cacheTime}={}){const n=await wW(()=>t.request({method:"eth_blockNumber"}),{cacheKey:vW(t.uid),cacheTime:e});return BigInt(n)}function T5(t,e){if(!Hi(t,{strict:!1}))throw new Yc({address:t});if(!Hi(e,{strict:!1}))throw new Yc({address:e});return t.toLowerCase()===e.toLowerCase()}const WT="/docs/contract/decodeEventLog";function _W(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new UF({docsPath:WT});const c=e.find(m=>m.type==="event"&&o===NA(Gc(m)));if(!(c&&"name"in c)||c.type!=="event")throw new bD(o,{docsPath:WT});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(m=>!("name"in m&&m.name)),h=d?[]:{},f=u.map((m,w)=>[m,w]).filter(([m])=>"indexed"in m&&m.indexed);for(let m=0;m<f.length;m++){const[w,y]=f[m],b=a[m];if(!b)throw new _D({abiItem:c,param:w});h[d?y:w.name||y]=EW({param:w,value:b})}const p=u.filter(m=>!("indexed"in m&&m.indexed));if(p.length>0){if(n&&n!=="0x")try{const m=Pv(p,n);if(m)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??m.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=m[w]}catch(m){if(i)throw m instanceof wD||m instanceof UD?new nC({abiItem:c,data:n,params:p,size:_n(n)}):m}else if(i)throw new nC({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function EW({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(Pv([t],e)||[])[0]}function CW(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===NA(u));if(!c)return null;const l=_W({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!xW({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof bD)return null;if(c instanceof nC||c instanceof _D){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function xW(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?T5(o,a):i.type==="string"||i.type==="bytes"?Uh(bv(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function N5(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function SW(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>N5(i));return!("abi"in e)||!e.abi?s:CW({abi:e.abi,logs:s,strict:n})}async function P5(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?Ye(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ye(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Ye(i)]},{dedupe:!!a}),!c)throw new WD({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||KD)(c)}const k5={"0x0":"reverted","0x1":"success"};function AW(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>N5(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?wa(t.transactionIndex):null,status:t.status?k5[t.status]:null,type:t.type?GD[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function qT(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new qD({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||AW)(n)}async function IW(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=RA({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:E,args:_,functionName:S}=l[b];try{const x=Cm({abi:v,args:_,functionName:S});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:E}]}catch(x){const A=_0(x,{abi:v,address:E,args:_,docsPath:"/docs/contract/multicall",functionName:S,sender:n});if(!r)throw A;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:E}]}}const m=await Promise.allSettled(h.map(b=>Ft(t,jA,"readContract")({abi:fC,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<m.length;b++){const v=m[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let _=0;_<h[b].length;_++)w.push({status:"failure",error:v.reason,result:void 0});continue}const E=v.value;for(let _=0;_<E.length;_++){const{returnData:S,success:x}=E[_],{callData:A}=h[b][_],{abi:C,address:k,functionName:O,args:M}=l[w.length];try{if(A==="0x")throw new Cv;if(!x)throw new $A({data:S});const F=OA({abi:C,args:M,data:S,functionName:O});w.push(r?{result:F,status:"success"}:F)}catch(F){const V=_0(F,{abi:C,address:k,args:M,docsPath:"/docs/contract/multicall",functionName:O});if(!r)throw V;w.push({error:V,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new ae("multicall results mismatch");return w}const vy=new Sv(8192);function TW(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(vy.get(n))return vy.get(n);const r=t().finally(()=>vy.delete(n));return vy.set(n,r),r}async function E0(t){return new Promise(e=>setTimeout(e,t))}function C0(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await E0(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function NW(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Ol(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Ol(new Error("method not supported"),{method:l});const u=s?_v(`${c}.${Mr(n)}`):void 0;return TW(()=>C0(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case og.code:throw new og(f);case ag.code:throw new ag(f);case cg.code:throw new cg(f,{method:n.method});case lg.code:throw new lg(f);case lu.code:throw new lu(f);case ug.code:throw new ug(f);case dg.code:throw new dg(f);case jc.code:throw new jc(f);case yh.code:throw new yh(f);case Ol.code:throw new Ol(f,{method:n.method});case wh.code:throw new wh(f);case hg.code:throw new hg(f);case Rn.code:throw new Rn(f);case fg.code:throw new fg(f);case pg.code:throw new pg(f);case gg.code:throw new gg(f);case mg.code:throw new mg(f);case Ao.code:throw new Ao(f);case vh.code:throw new vh(f);case yg.code:throw new yg(f);case wg.code:throw new wg(f);case vg.code:throw new vg(f);case bg.code:throw new bg(f);case _g.code:throw new _g(f);case bh.code:throw new bh(f);case 5e3:throw new Rn(f);default:throw h instanceof ae?h:new e7(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof vp){const m=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(m!=null&&m.match(/\d/))return Number.parseInt(m)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>PW(h)}),{enabled:s,id:u})}}function PW(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===wh.code||t.code===lu.code:t instanceof vp&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function kW(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function O5(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function OW(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const HT=OW();function RW(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await O5(async({signal:p})=>{const m={...a,body:Array.isArray(r)?Mr(r.map(v=>({jsonrpc:"2.0",id:v.id??HT.take(),...v}))):Mr({jsonrpc:"2.0",id:r.id??HT.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,m),y=await(s==null?void 0:s(w,m))??{...m,url:t};return await fetch(y.url??t,y)},{errorInstance:new RT({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new vp({body:r,details:Mr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof vp||h instanceof RT?h:new vp({body:r,cause:h,url:t})}}}}class $W extends ae{constructor({domain:e}){super(`Invalid domain "${Mr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class DW extends ae{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class jW extends ae{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function UW(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Mr({domain:o,message:a,primaryType:r,types:s})}function LW(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(DD);if(h&&(typeof d=="number"||typeof d=="bigint")){const[m,w,y]=h;Ye(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!Hi(d))throw new Yc({address:d});const f=u.match(C9);if(f){const[m,w]=f;if(w&&_n(d)!==Number.parseInt(w))throw new BF({expectedSize:Number.parseInt(w),givenSize:_n(d)})}const p=s[u];p&&(BW(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new $W({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new DW({primaryType:r,types:s})}function MW({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function BW(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new jW({type:t})}class FW extends ae{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function zW(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new FW({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const b1=new Map,VT=new Map;let WW=0;function xg(t,e,n){const r=++WW,s=()=>b1.get(t)||[],i=()=>{const u=s();b1.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=VT.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(b1.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const m of h)(p=(f=m.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&VT.set(t,l),o}function UA(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await E0(c);const l=async()=>{s&&(await t({unpoll:i}),await E0(r),l())};l()})(),i}function qW(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Mr(["watchBlockNumber",t.uid,e,n,o]);return xg(d,{onBlockNumber:r,onError:s},h=>UA(async()=>{var f;try{const p=await Ft(t,bW,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let m=c+1n;m<p;m++)h.onBlockNumber(m,c),c=m}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Mr(["watchBlockNumber",t.uid,e,n]);return xg(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const m=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await m.subscribe({params:["newHeads"],onData(y){var v;if(!f)return;const b=ya((v=y.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(m){s==null||s(m)}})(),()=>p()})})()}async function HW(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function VW(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Mr(["watchPendingTransactions",t.uid,e,i]);return xg(l,{onTransactions:r,onError:n},u=>{let d;const h=UA(async()=>{var f;try{if(!d)try{d=await Ft(t,pW,"createPendingTransactionFilter")({});return}catch(m){throw h(),m}const p=await Ft(t,SW,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const m of p)u.onTransactions([m])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await Ft(t,HW,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function GW(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>wm(r))}async function KW(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function YW(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?cr(n):void 0,i=r?[s==null?void 0:s.address,[Ye(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const R5="0x5792579257925792579257925792579257925792579257925792579257925792",$5=Ye(0,{size:32});async function QW(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?cr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Cm({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Kc([p,f.dataSuffix]):p,to:f.to,value:f.value?Ye(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:Ye(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new vh(new ae(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new bh(new ae(y,{details:y}))}const p=[];for(const y of d){const b=Em(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?ya(y.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const m=await Promise.allSettled(p);if(m.every(y=>y.status==="rejected"))throw m[0].reason;const w=m.map(y=>y.status==="fulfilled"?y.value:$5);return{id:Kc([...w,Ye(s.id,{size:32}),R5])}}throw HD(h,{...e,account:u,chain:e.chain})}}async function D5(t,e){async function n(u){if(u.endsWith(R5.slice(2))){const h=jh(rC(u,-64,-32)),f=rC(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>$5.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),m=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:wa(h),receipts:p.filter(Boolean),status:m,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?wa(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:ya(u.blockNumber),gasUsed:ya(u.gasUsed),status:k5[u.status]})))??[],statusCode:l,status:c,version:o}}async function JW(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function ZW(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Mr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=DA();let u;const d=xg(o,{resolve:c,reject:l},h=>{const f=UA(async()=>{const p=m=>{clearTimeout(u),f(),m(),d()};try{const m=await D5(t,{id:n});if(!s(m))return;p(()=>h.resolve(m))}catch(m){p(()=>h.reject(m))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new XW({id:n}))},i):void 0,await a}class XW extends ae{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function eq(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Mr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:m,resolve:w,reject:y}=DA(),b=a?setTimeout(()=>{p(),f(),y(new J9({hash:n}))},a):void 0;return f=xg(c,{onReplaced:r,resolve:w,reject:y},v=>{p=Ft(t,qW,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(E){const _=x=>{clearTimeout(b),p(),x(),f()};let S=E;if(!h)try{if(d){if(e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;_(()=>v.resolve(d));return}if(l||(h=!0,await C0(async()=>{l=await Ft(t,P5,"getTransaction")({hash:n}),l.blockNumber&&(S=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await Ft(t,qT,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;_(()=>v.resolve(d))}catch(x){if(x instanceof WD||x instanceof qD){if(!l){h=!1;return}try{u=l,h=!0;const A=await C0(()=>Ft(t,Eg,"getBlock")({blockNumber:S,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:O})=>O instanceof VD});h=!1;const C=A.transactions.find(({from:O,nonce:M})=>O===u.from&&M===u.nonce);if(!C||(d=await Ft(t,qT,"getTransactionReceipt")({hash:C.hash}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e)))return;let k="replaced";C.to===u.to&&C.value===u.value&&C.input===u.input?k="repriced":C.from===C.to&&C.value===0n&&(k="cancelled"),_(()=>{var O;(O=v.onReplaced)==null||O.call(v,{reason:k,replacedTransaction:u,transaction:C,transactionReceipt:d}),v.resolve(d)})}catch(A){_(()=>v.reject(A))}}else _(()=>v.reject(x))}}})}),m}async function tq(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>_c(n))}async function nq(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function j5(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Tu({docsPath:"/docs/eip7702/prepareAuthorization"});const i=cr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:cr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await Ft(t,_m,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await Ft(t,XD,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&T5(o.address,i.address))&&(a.nonce+=1)),a}async function rq(t,e){const{account:n=t.account}=e;if(!n)throw new Tu({docsPath:"/docs/eip7702/signAuthorization"});const r=cr(n);if(!r.signAuthorization)throw new Sw({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await j5(t,e);return r.signAuthorization(s)}async function sq(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Tu({docsPath:"/docs/actions/wallet/signTransaction"});const i=cr(n);bm({account:i,...e});const o=await Ft(t,_m,"getChainId")({});r!==null&&zD({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||Tv;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:Ye(o),from:i.address}]},{retryCount:0})}async function U5(t,{account:e=t.account,message:n}){if(!e)throw new Tu({docsPath:"/docs/actions/wallet/signMessage"});const r=cr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?_v(n):n.raw instanceof Uint8Array?au(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function iq(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Tu({docsPath:"/docs/actions/wallet/signTypedData"});const o=cr(n),a={EIP712Domain:MW({domain:r}),...e.types};if(LW({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=UW({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function oq(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Ye(e)}]},{retryCount:0})}async function aq(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function L5(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Tu({docsPath:"/docs/contract/writeContract"});const l=r?cr(r):null,u=Cm({abi:n,args:i,functionName:a});try{return await Ft(t,Em,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw _0(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function js(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const Aw="2.17.3",cq=()=>`@wagmi/core@${Aw}`;var M5=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},x0,B5;let xa=class _C extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return cq()}constructor(e,n={}){var i;super(),x0.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof _C?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof _C&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return M5(this,x0,"m",B5).call(this,this,e)}};x0=new WeakSet,B5=function t(e,n){return n!=null&&n(e)?e:e.cause?M5(this,x0,"m",t).call(this,e.cause,n):e};class Sg extends xa{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class lq extends xa{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class uq extends xa{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class dq extends xa{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class hq extends xa{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class fq extends xa{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Iw(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new lq;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const EC=256;let by=EC,_y;function F5(t=11){if(!_y||by+t>EC*2){_y="",by=0;for(let e=0;e<EC;e++)_y+=(256+Math.random()*256|0).toString(16).substring(1)}return _y.substring(by,by+++t)}function z5(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?cr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),m={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:m,type:o,uid:F5()};function y(b){return v=>{const E=v(b);for(const S in w)delete E[S];const _={...b,...E};return Object.assign(_,{extend:y(_)})}}return Object.assign(w,{extend:y(w)})}function LA({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=F5();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:NW(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function pq(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>LA({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function GT(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=gq,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=LA({key:n,name:r,async request({method:m,params:w}){let y;const b=async(v=0)=>{const E=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const _=await E.request({method:m,params:w});return f({method:m,params:w,response:_,transport:E,status:"success"}),_}catch(_){if(f({error:_,method:m,params:w,transport:E,status:"error"}),i(_)||v===h.length-1||(y??(y=h.slice(v+1).some(S=>{const{include:x,exclude:A}=S({chain:c}).config.methods||{};return x?x.includes(m):A?!A.includes(m):!0})),!y))throw _;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:m=>f=m,transports:h.map(m=>m({chain:c,retryCount:0}))});if(s){const m=typeof s=="object"?s:{};mq({chain:c,interval:m.interval??l,onTransports:w=>h=w,ping:m.ping,sampleCount:m.sampleCount,timeout:m.timeout,transports:h,weights:m.weights})}return p}}function gq(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===yh.code||t.code===Rn.code||kl.nodeMessage.test(t.message)||t.code===5e3))}function mq({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async m=>{const w=m({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-y,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(m=>Math.max(...m.map(({latency:w})=>w)))),p=o.map((m,w)=>{const y=u.map(S=>S[w].latency),v=1-y.reduce((S,x)=>S+x,0)/y.length/f,E=u.map(S=>S[w].success),_=E.reduce((S,x)=>S+x,0)/E.length;return _===0?[0,w]:[l*v+c*_,w]}).sort((m,w)=>w[0]-m[0]);n(p.map(([,m])=>o[m])),await E0(e),d()};d()}class yq extends ae{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Ey(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:m=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new yq;const v=RW(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return LA({key:s,methods:i,name:o,async request({method:E,params:_}){const S={method:E,params:_},{schedule:x}=A5({id:b,wait:m,shouldSplitBatch(O){return O.length>p},fn:O=>v.request({body:O}),sort:(O,M)=>O.id-M.id}),A=async O=>n?x(O):[await v.request({body:O})],[{error:C,result:k}]=await A(S);if(u)return{error:C,result:k};if(C)throw new xA({body:S,error:C,url:b});return k},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function wq(t){return{addChain:e=>kF(t,e),deployContract:e=>k7(t,e),getAddresses:()=>GW(t),getCallsStatus:e=>D5(t,e),getCapabilities:e=>YW(t,e),getChainId:()=>_m(t),getPermissions:()=>KW(t),prepareAuthorization:e=>j5(t,e),prepareTransactionRequest:e=>Nv(t,e),requestAddresses:()=>tq(t),requestPermissions:e=>nq(t,e),sendCalls:e=>QW(t,e),sendRawTransaction:e=>i5(t,e),sendTransaction:e=>Em(t,e),showCallsStatus:e=>JW(t,e),signAuthorization:e=>rq(t,e),signMessage:e=>U5(t,e),signTransaction:e=>sq(t,e),signTypedData:e=>iq(t,e),switchChain:e=>oq(t,e),waitForCallsStatus:e=>ZW(t,e),watchAsset:e=>aq(t,e),writeContract:e=>L5(t,e)}}async function xm(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new fq({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new uq;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new hq({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=cr(e.account??n.accounts[0]);if(o&&(o.address=_c(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new dq({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return z5({account:o,chain:a,name:"Connector Client",transport:l=>pq(c)({...l,retryCount:0})})}async function W5(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function vq(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await xm(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return js(o,ZD,"estimateGas")({...s,account:i})}function q5(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(G9[t])}function Vd(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function bq(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return js(o,IW,"multicall")({allowFailure:n,contracts:s,...i})}function _q(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return js(s,jA,"readContract")(r)}async function Eq(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>bq(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof C5)throw c;const l=()=>o.map(u=>_q(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Cq(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await KT(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await KT(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=mD(jh(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await js(c,JD,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Lh(u,q5(a)),symbol:d.nativeCurrency.symbol,value:u}}async function KT(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await Eq(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Lh(c??"0",q5(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function YT(t){return t.state.chainId}function du(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!du(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!du(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Cy=[];function lo(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||du(Cy,e)?Cy:(Cy=e,e)}let _1=[];function QT(t){const e=t.connectors;return du(_1,e)?_1:(_1=e,e)}function xq(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return js(s,hW,"getEnsName")(r)}async function Sq(t,e={}){return(await xm(t,e)).extend(wq)}async function Aq(t,e){const{account:n,chainId:r,...s}=e,i=n??Vd(t).address,o=t.getClient({chainId:r});return js(o,Nv,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let E1=!1;async function CC(t,e={}){var l,u;if(E1)return[];E1=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(m=>m===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(m=>{const w=new Map(o?m.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...m,current:o?m.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),E1=!1,a}async function Iq(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await xm(t,{account:n??void 0,chainId:r,connector:s}),await js(o,Em,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function Tq(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await xm(t,{account:n,connector:r}),js(i,U5,"signMessage")({...s,...n?{account:n}:{}})}class Qa extends xa{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class Nq extends xa{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function JT(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new Nq({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new Sg;return t.setState(a=>({...a,chainId:r})),i}function H5(t,e){const{onChange:n}=e;return t.subscribe(()=>Vd(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return du(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Pq(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function kq(t,e){const{onChange:n}=e;return t.subscribe(()=>lo(t),n,{equalityFn:du})}function V5(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function Oq(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=js(l,VW,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function G5(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await js(i,eq,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await js(i,P5,"getTransaction")({hash:a.transactionHash}),d=await js(i,I5,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?mD(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function K5(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await xm(t,{account:n??void 0,chainId:r,connector:s}),await js(o,L5,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function axe(t){return t}kv.type="injected";function kv(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...Rq[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:kv.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,m,w,y,b;const d=await this.getProvider();if(!d)throw new Qa;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(m=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:m.value)==null?void 0:w.map(E=>_c(E)),h.length>0&&(h=await this.getAccounts())}catch(v){const E=v;if(E.code===Rn.code)throw new Rn(E);if(E.code===jc.code)throw E}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(_=>_c(_))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const E=await this.switchChain({chainId:l}).catch(_=>{if(_.code===Rn.code)throw _;return{id:v}});v=(E==null?void 0:E.id)??v}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const E=v;throw E.code===Rn.code?new Rn(E):E.code===jc.code?new jc(E):E}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Qa;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await O5(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Qa;return(await l.request({method:"eth_accounts"})).map(d=>_c(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Qa;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=Tw(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),m=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),m))]))return!0}throw new Qa}return!!(await C0(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,m,w,y;const d=await this.getProvider();if(!d)throw new Qa;const h=c.chains.find(b=>b.id===u);if(!h)throw new Ao(new Sg);const f=new Promise(b=>{const v=E=>{"chainId"in E&&E.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Ye(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((m=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:m.code)===4902)try{const{default:E,..._}=h.blockExplorers??{};let S;l!=null&&l.blockExplorerUrls?S=l.blockExplorerUrls:E&&(S=[E.url,...Object.values(_).map(C=>C.url)]);let x;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?x=l.rpcUrls:x=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const A={blockExplorerUrls:S,chainId:Ye(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[A]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Rn(new Error("User rejected switch after adding network."))}),f]),h}catch(E){throw new Rn(E)}throw v.code===Rn.code?new Rn(v):new Ao(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>_c(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const Rq={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:Tw(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Tw(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:Tw(t,"isPhantom")}}};function Tw(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function $q(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Dq(){const t=new Set;let e=[];const n=()=>$q(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const jq=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Uq=jq;function Lq(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const xC=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return xC(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return xC(r)(n)}}}},Mq=(t,e)=>(n,r,s)=>{let i={storage:Lq(()=>localStorage),partialize:m=>m,version:0,merge:(m,w)=>({...w,...m}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...m)},r,s);const u=()=>{const m=i.partialize({...r()});return l.setItem(i.name,{state:m,version:i.version})},d=s.setState;s.setState=(m,w)=>{d(m,w),u()};const h=t((...m)=>{n(...m),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var m,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(m=r())!=null?m:h))||void 0;return xC(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[E,_]=b;if(f=i.merge(_,(v=r())!=null?v:h),n(f,!0),E)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:m=>{i={...i,...m},m.storage&&(l=m.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},i.skipHydration||p(),f||h},Bq=Mq,ZT=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},C1=t=>t?ZT(t):ZT;var Y5={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var m=n?n+l:l;if(!this._events[m])return!1;var w=this._events[m],y=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(y-1);v<y;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var E=w.length,_;for(v=0;v<E;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),y){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var m=0,w=[],y=p.length;m<y;m++)(p[m].fn!==u||h&&!p[m].once||d&&p[m].context!==d)&&w.push(p[m]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Y5);var Fq=Y5.exports;const zq=Su(Fq);class Wq{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new zq})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function qq(t){return new Wq(t)}function Hq(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function XT(t,e){return t.slice(0,e).join(".")||"."}function eN(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Vq(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=eN(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=eN(s,c);if(u!==0)return r?e.call(this,a,c,XT(i,u)):`[ref=${XT(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Gq(t,e,n,r){return JSON.stringify(t,Vq((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Kq(t){const{deserialize:e=Hq,key:n="wagmi",serialize:r=Gq,storage:s=Q5}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const Q5={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Yq(){const t=typeof window<"u"&&window.localStorage?window.localStorage:Q5;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const SC=256;let xy=SC,Sy;function Qq(t=11){if(!Sy||xy+t>SC*2){Sy="",xy=0;for(let e=0;e<SC;e++)Sy+=(256+Math.random()*256|0).toString(16).substring(1)}return Sy.substring(xy,xy+++t)}function Jq(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Kq({storage:Yq()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Dq():void 0,a=C1(()=>i.chains),c=C1(()=>{const _=[],S=new Set;for(const x of i.connectors??[]){const A=l(x);if(_.push(A),!s&&A.rdns){const C=typeof A.rdns=="string"?[A.rdns]:A.rdns;for(const k of C)S.add(k)}}if(!s&&o){const x=o.getProviders();for(const A of x)S.has(A.info.rdns)||_.push(l(u(A)))}return _});function l(_){var A;const S=qq(Qq()),x={..._({emitter:S,chains:a.getState(),storage:n,transports:i.transports}),emitter:S,uid:S.uid};return S.on("connect",v),(A=x.setup)==null||A.call(x),x}function u(_){const{info:S}=_,x=_.provider;return kv({target:{...S,id:S.rdns,provider:x}})}const d=new Map;function h(_={}){const S=_.chainId??w.getState().chainId,x=a.getState().find(C=>C.id===S);if(_.chainId&&!x)throw new Sg;{const C=d.get(w.getState().chainId);if(C&&!x)return C;if(!x)throw new Sg}{const C=d.get(S);if(C)return C}let A;if(i.client)A=i.client({chain:x});else{const C=x.id,k=a.getState().map(F=>F.id),O={},M=Object.entries(i);for(const[F,V]of M)if(!(F==="chains"||F==="client"||F==="connectors"||F==="transports"))if(typeof V=="object")if(C in V)O[F]=V[C];else{if(k.some(T=>T in V))continue;O[F]=V}else O[F]=V;A=z5({...O,chain:x,batch:O.batch??{multicall:!0},transport:F=>i.transports[C]({...F,connectors:c})})}return d.set(S,A),A}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const m="0.0.0-canary-";Aw.startsWith(m)?p=Number.parseInt(Aw.replace(m,"")):p=Number.parseInt(Aw.split(".")[0]??"0");const w=C1(Uq(n?Bq(f,{migrate(_,S){if(S===p)return _;const x=f(),A=y(_,x.chainId);return{...x,chainId:A}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([S,x])=>{const{id:A,name:C,type:k,uid:O}=x.connector;return[S,{...x,connector:{id:A,name:C,type:k,uid:O}}]})},chainId:_.chainId,current:_.current}},merge(_,S){typeof _=="object"&&_&&"status"in _&&delete _.status;const x=y(_,S.chainId);return{...S,..._,chainId:x}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(_,S){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(x=>x.id===_.chainId)?_.chainId:S}r&&w.subscribe(({connections:_,current:S})=>{var x;return S?(x=_.get(S))==null?void 0:x.chainId:void 0},_=>{if(a.getState().some(x=>x.id===_))return w.setState(x=>({...x,chainId:_??x.chainId}))}),o==null||o.subscribe(_=>{const S=new Set,x=new Set;for(const C of c.getState())if(S.add(C.id),C.rdns){const k=typeof C.rdns=="string"?[C.rdns]:C.rdns;for(const O of k)x.add(O)}const A=[];for(const C of _){if(x.has(C.info.rdns))continue;const k=l(u(C));S.has(k.id)||A.push(k)}n&&!w.persist.hasHydrated()||c.setState(C=>[...C,...A],!0)});function b(_){w.setState(S=>{const x=S.connections.get(_.uid);return x?{...S,connections:new Map(S.connections).set(_.uid,{accounts:_.accounts??x.accounts,chainId:_.chainId??x.chainId,connector:x.connector})}:S})}function v(_){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(S=>{const x=c.getState().find(A=>A.uid===_.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",b),x.emitter.listenerCount("change")||x.emitter.on("change",b),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",E),{...S,connections:new Map(S.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:x}),current:_.uid,status:"connected"}):S})}function E(_){w.setState(S=>{const x=S.connections.get(_.uid);if(x){const C=x.connector;C.emitter.listenerCount("change")&&x.connector.emitter.off("change",b),C.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",E),C.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(S.connections.delete(_.uid),S.connections.size===0)return{...S,connections:new Map,current:null,status:"disconnected"};const A=S.connections.values().next().value;return{...S,connections:new Map(S.connections),current:A.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(_){let S;typeof _=="function"?S=_(w.getState()):S=_;const x=f();typeof S!="object"&&(S=x),Object.keys(x).some(C=>!(C in S))&&(S=x),w.setState(S,!0)},subscribe(_,S,x){return w.subscribe(_,S,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(_){const S=typeof _=="function"?_(a.getState()):_;if(S.length!==0)return a.setState(S,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:l,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:b,connect:v,disconnect:E}}}}function Zq(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?CC(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Xq(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=Zq(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=P.useRef(!0);return P.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const J5=P.createContext(void 0);function eH(t){const{children:e,config:n}=t,r={value:n};return P.createElement(Xq,t,P.createElement(J5.Provider,r,e))}const tH="2.15.6",nH=()=>`wagmi@${tH}`;let rH=class extends xa{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return nH()}};class sH extends rH{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Po(t={}){const e=t.config??P.useContext(J5);if(!e)throw new sH;return e}var Z5={exports:{}},X5={},e8={exports:{}},t8={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _h=P;function iH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var oH=typeof Object.is=="function"?Object.is:iH,aH=_h.useState,cH=_h.useEffect,lH=_h.useLayoutEffect,uH=_h.useDebugValue;function dH(t,e){var n=e(),r=aH({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return lH(function(){s.value=n,s.getSnapshot=e,x1(s)&&i({inst:s})},[t,n,e]),cH(function(){return x1(s)&&i({inst:s}),t(function(){x1(s)&&i({inst:s})})},[t]),uH(n),n}function x1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!oH(t,n)}catch{return!0}}function hH(t,e){return e()}var fH=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hH:dH;t8.useSyncExternalStore=_h.useSyncExternalStore!==void 0?_h.useSyncExternalStore:fH;e8.exports=t8;var pH=e8.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov=P,gH=pH;function mH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yH=typeof Object.is=="function"?Object.is:mH,wH=gH.useSyncExternalStore,vH=Ov.useRef,bH=Ov.useEffect,_H=Ov.useMemo,EH=Ov.useDebugValue;X5.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=vH(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=_H(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,yH(u,f))return p;var m=r(f);return s!==void 0&&s(p,m)?(u=f,p):(u=f,d=m)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=wH(t,i[0],i[1]);return bH(function(){o.hasValue=!0,o.value=a},[a]),EH(a),a};Z5.exports=X5;var CH=Z5.exports;const S1=t=>typeof t=="object"&&!Array.isArray(t);function xH(t,e,n=e,r=du){const s=P.useRef([]),i=CH.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(S1(o)&&S1(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return P.useMemo(()=>{if(S1(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function Sm(t={}){const e=Po(t);return xH(n=>H5(e,{onChange:n}),()=>Vd(e))}var Bh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hu=typeof window>"u"||"Deno"in globalThis;function jr(){}function SH(t,e){return typeof t=="function"?t(e):t}function AC(t){return typeof t=="number"&&t>=0&&t!==1/0}function n8(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Uc(t,e){return typeof t=="function"?t(e):t}function Ri(t,e){return typeof t=="function"?t(e):t}function tN(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==MA(o,e.options))return!1}else if(!Ag(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function nN(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(fu(e.options.mutationKey)!==fu(i))return!1}else if(!Ag(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function MA(t,e){return((e==null?void 0:e.queryKeyHashFn)||fu)(t)}function fu(t){return JSON.stringify(t,(e,n)=>IC(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ag(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ag(t[n],e[n])):!1}function r8(t,e){if(t===e)return t;const n=rN(t)&&rN(e);if(n||IC(t)&&IC(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=r8(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function S0(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function rN(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function IC(t){if(!sN(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!sN(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function sN(t){return Object.prototype.toString.call(t)==="[object Object]"}function AH(t){return new Promise(e=>{setTimeout(e,t)})}function TC(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?r8(t,e):e}function IH(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function TH(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var BA=Symbol();function s8(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===BA?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function i8(t,e){return typeof t=="function"?t(...e):!!t}var Bl,lc,Zd,zR,NH=(zR=class extends Bh{constructor(){super();Be(this,Bl);Be(this,lc);Be(this,Zd);Ae(this,Zd,e=>{if(!hu&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){B(this,lc)||this.setEventListener(B(this,Zd))}onUnsubscribe(){var e;this.hasListeners()||((e=B(this,lc))==null||e.call(this),Ae(this,lc,void 0))}setEventListener(e){var n;Ae(this,Zd,e),(n=B(this,lc))==null||n.call(this),Ae(this,lc,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){B(this,Bl)!==e&&(Ae(this,Bl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof B(this,Bl)=="boolean"?B(this,Bl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Bl=new WeakMap,lc=new WeakMap,Zd=new WeakMap,zR),FA=new NH,Xd,uc,eh,WR,PH=(WR=class extends Bh{constructor(){super();Be(this,Xd,!0);Be(this,uc);Be(this,eh);Ae(this,eh,e=>{if(!hu&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){B(this,uc)||this.setEventListener(B(this,eh))}onUnsubscribe(){var e;this.hasListeners()||((e=B(this,uc))==null||e.call(this),Ae(this,uc,void 0))}setEventListener(e){var n;Ae(this,eh,e),(n=B(this,uc))==null||n.call(this),Ae(this,uc,e(this.setOnline.bind(this)))}setOnline(e){B(this,Xd)!==e&&(Ae(this,Xd,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return B(this,Xd)}},Xd=new WeakMap,uc=new WeakMap,eh=new WeakMap,WR),A0=new PH;function NC(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function kH(t){return Math.min(1e3*2**t,3e4)}function o8(t){return(t??"online")==="online"?A0.isOnline():!0}var a8=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function A1(t){return t instanceof a8}function c8(t){let e=!1,n=0,r=!1,s;const i=NC(),o=m=>{var w;r||(h(new a8(m)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>FA.isFocused()&&(t.networkMode==="always"||A0.isOnline())&&t.canRun(),u=()=>o8(t.networkMode)&&t.canRun(),d=m=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,m),s==null||s(),i.resolve(m))},h=m=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,m),s==null||s(),i.reject(m))},f=()=>new Promise(m=>{var w;s=y=>{(r||l())&&m(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var m;s=void 0,r||(m=t.onContinue)==null||m.call(t)}),p=()=>{if(r)return;let m;const w=n===0?t.initialPromise:void 0;try{m=w??t.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(d).catch(y=>{var S;if(r)return;const b=t.retry??(hu?0:3),v=t.retryDelay??kH,E=typeof v=="function"?v(n,y):v,_=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!_){h(y);return}n++,(S=t.onFail)==null||S.call(t,n,y),AH(E).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var OH=t=>setTimeout(t,0);function RH(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=OH;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var jn=RH(),Fl,qR,l8=(qR=class{constructor(){Be(this,Fl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),AC(this.gcTime)&&Ae(this,Fl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(hu?1/0:5*60*1e3))}clearGcTimeout(){B(this,Fl)&&(clearTimeout(B(this,Fl)),Ae(this,Fl,void 0))}},Fl=new WeakMap,qR),th,zl,ei,Wl,Ar,cm,ql,Ti,qo,HR,$H=(HR=class extends l8{constructor(e){super();Be(this,Ti);Be(this,th);Be(this,zl);Be(this,ei);Be(this,Wl);Be(this,Ar);Be(this,cm);Be(this,ql);Ae(this,ql,!1),Ae(this,cm,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ae(this,Wl,e.client),Ae(this,ei,B(this,Wl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ae(this,th,DH(this.options)),this.state=e.state??B(this,th),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=B(this,Ar))==null?void 0:e.promise}setOptions(e){this.options={...B(this,cm),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,ei).remove(this)}setData(e,n){const r=TC(this.state.data,e,this.options);return st(this,Ti,qo).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){st(this,Ti,qo).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=B(this,Ar))==null?void 0:r.promise;return(s=B(this,Ar))==null||s.cancel(e),n?n.then(jr).catch(jr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,th))}isActive(){return this.observers.some(e=>Ri(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===BA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Uc(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!n8(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=B(this,Ar))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=B(this,Ar))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),B(this,ei).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(B(this,Ar)&&(B(this,ql)?B(this,Ar).cancel({revert:!0}):B(this,Ar).cancelRetry()),this.scheduleGc()),B(this,ei).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||st(this,Ti,qo).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(B(this,Ar))return B(this,Ar).continueRetry(),B(this,Ar).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Ae(this,ql,!0),r.signal)})},i=()=>{const h=s8(this.options,n),p=(()=>{const m={client:B(this,Wl),queryKey:this.queryKey,meta:this.meta};return s(m),m})();return Ae(this,ql,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:B(this,Wl),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),Ae(this,zl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&st(this,Ti,qo).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,m,w;A1(h)&&h.silent||st(this,Ti,qo).call(this,{type:"error",error:h}),A1(h)||((p=(f=B(this,ei).config).onError)==null||p.call(f,h,this),(w=(m=B(this,ei).config).onSettled)==null||w.call(m,this.state.data,h,this)),this.scheduleGc()};return Ae(this,Ar,c8({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,m,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=B(this,ei).config).onSuccess)==null||p.call(f,h,this),(w=(m=B(this,ei).config).onSettled)==null||w.call(m,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{st(this,Ti,qo).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{st(this,Ti,qo).call(this,{type:"pause"})},onContinue:()=>{st(this,Ti,qo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),B(this,Ar).start()}},th=new WeakMap,zl=new WeakMap,ei=new WeakMap,Wl=new WeakMap,Ar=new WeakMap,cm=new WeakMap,ql=new WeakMap,Ti=new WeakSet,qo=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...u8(r.data,this.options),fetchMeta:e.meta??null};case"success":return Ae(this,zl,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return A1(s)&&s.revert&&B(this,zl)?{...B(this,zl),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),jn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),B(this,ei).notify({query:this,type:"updated",action:e})})},HR);function u8(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:o8(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function DH(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var uo,VR,jH=(VR=class extends Bh{constructor(e={}){super();Be(this,uo);this.config=e,Ae(this,uo,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??MA(s,n);let o=this.get(i);return o||(o=new $H({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){B(this,uo).has(e.queryHash)||(B(this,uo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=B(this,uo).get(e.queryHash);n&&(e.destroy(),n===e&&B(this,uo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){jn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return B(this,uo).get(e)}getAll(){return[...B(this,uo).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>tN(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>tN(e,r)):n}notify(e){jn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){jn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){jn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},uo=new WeakMap,VR),ho,Rr,Hl,fo,qa,GR,UH=(GR=class extends l8{constructor(e){super();Be(this,fo);Be(this,ho);Be(this,Rr);Be(this,Hl);this.mutationId=e.mutationId,Ae(this,Rr,e.mutationCache),Ae(this,ho,[]),this.state=e.state||d8(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){B(this,ho).includes(e)||(B(this,ho).push(e),this.clearGcTimeout(),B(this,Rr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ae(this,ho,B(this,ho).filter(n=>n!==e)),this.scheduleGc(),B(this,Rr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){B(this,ho).length||(this.state.status==="pending"?this.scheduleGc():B(this,Rr).remove(this))}continue(){var e;return((e=B(this,Hl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,m,w,y,b,v,E,_,S,x,A;const n=()=>{st(this,fo,qa).call(this,{type:"continue"})};Ae(this,Hl,c8({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,k)=>{st(this,fo,qa).call(this,{type:"failed",failureCount:C,error:k})},onPause:()=>{st(this,fo,qa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,Rr).canRun(this)}));const r=this.state.status==="pending",s=!B(this,Hl).canStart();try{if(r)n();else{st(this,fo,qa).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=B(this,Rr).config).onMutate)==null?void 0:o.call(i,e,this));const k=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));k!==this.state.context&&st(this,fo,qa).call(this,{type:"pending",context:k,variables:e,isPaused:s})}const C=await B(this,Hl).start();return await((u=(l=B(this,Rr).config).onSuccess)==null?void 0:u.call(l,C,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,C,e,this.state.context)),await((p=(f=B(this,Rr).config).onSettled)==null?void 0:p.call(f,C,null,this.state.variables,this.state.context,this)),await((w=(m=this.options).onSettled)==null?void 0:w.call(m,C,null,e,this.state.context)),st(this,fo,qa).call(this,{type:"success",data:C}),C}catch(C){try{throw await((b=(y=B(this,Rr).config).onError)==null?void 0:b.call(y,C,e,this.state.context,this)),await((E=(v=this.options).onError)==null?void 0:E.call(v,C,e,this.state.context)),await((S=(_=B(this,Rr).config).onSettled)==null?void 0:S.call(_,void 0,C,this.state.variables,this.state.context,this)),await((A=(x=this.options).onSettled)==null?void 0:A.call(x,void 0,C,e,this.state.context)),C}finally{st(this,fo,qa).call(this,{type:"error",error:C})}}finally{B(this,Rr).runNext(this)}}},ho=new WeakMap,Rr=new WeakMap,Hl=new WeakMap,fo=new WeakSet,qa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),jn.batch(()=>{B(this,ho).forEach(r=>{r.onMutationUpdate(e)}),B(this,Rr).notify({mutation:this,type:"updated",action:e})})},GR);function d8(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xo,Ni,lm,KR,LH=(KR=class extends Bh{constructor(e={}){super();Be(this,Xo);Be(this,Ni);Be(this,lm);this.config=e,Ae(this,Xo,new Set),Ae(this,Ni,new Map),Ae(this,lm,0)}build(e,n,r){const s=new UH({mutationCache:this,mutationId:++ey(this,lm)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){B(this,Xo).add(e);const n=Ay(e);if(typeof n=="string"){const r=B(this,Ni).get(n);r?r.push(e):B(this,Ni).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(B(this,Xo).delete(e)){const n=Ay(e);if(typeof n=="string"){const r=B(this,Ni).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&B(this,Ni).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Ay(e);if(typeof n=="string"){const r=B(this,Ni).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Ay(e);if(typeof n=="string"){const s=(r=B(this,Ni).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){jn.batch(()=>{B(this,Xo).forEach(e=>{this.notify({type:"removed",mutation:e})}),B(this,Xo).clear(),B(this,Ni).clear()})}getAll(){return Array.from(B(this,Xo))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>nN(n,r))}findAll(e={}){return this.getAll().filter(n=>nN(e,n))}notify(e){jn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return jn.batch(()=>Promise.all(e.map(n=>n.continue().catch(jr))))}},Xo=new WeakMap,Ni=new WeakMap,lm=new WeakMap,KR);function Ay(t){var e;return(e=t.options.scope)==null?void 0:e.id}function iN(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let m=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},y=s8(e.options,e.fetchOptions),b=async(v,E,_)=>{if(m)return Promise.reject();if(E==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:E,direction:_?"backward":"forward",meta:e.options.meta};return w(O),O})(),A=await y(x),{maxPages:C}=e.options,k=_?TH:IH;return{pages:k(v.pages,A,C),pageParams:k(v.pageParams,E,C)}};if(s&&i.length){const v=s==="backward",E=v?MH:oN,_={pages:i,pageParams:o},S=E(r,_);a=await b(_,S,v)}else{const v=t??i.length;do{const E=c===0?o[0]??r.initialPageParam:oN(r,a);if(c>0&&E==null)break;a=await b(a,E),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var m,w;return(w=(m=e.options).persister)==null?void 0:w.call(m,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function oN(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function MH(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var fn,dc,hc,nh,rh,fc,sh,ih,YR,BH=(YR=class{constructor(t={}){Be(this,fn);Be(this,dc);Be(this,hc);Be(this,nh);Be(this,rh);Be(this,fc);Be(this,sh);Be(this,ih);Ae(this,fn,t.queryCache||new jH),Ae(this,dc,t.mutationCache||new LH),Ae(this,hc,t.defaultOptions||{}),Ae(this,nh,new Map),Ae(this,rh,new Map),Ae(this,fc,0)}mount(){ey(this,fc)._++,B(this,fc)===1&&(Ae(this,sh,FA.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,fn).onFocus())})),Ae(this,ih,A0.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,fn).onOnline())})))}unmount(){var t,e;ey(this,fc)._--,B(this,fc)===0&&((t=B(this,sh))==null||t.call(this),Ae(this,sh,void 0),(e=B(this,ih))==null||e.call(this),Ae(this,ih,void 0))}isFetching(t){return B(this,fn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return B(this,dc).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=B(this,fn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=B(this,fn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Uc(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return B(this,fn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=B(this,fn).get(r.queryHash),i=s==null?void 0:s.state.data,o=SH(e,i);if(o!==void 0)return B(this,fn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return jn.batch(()=>B(this,fn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=B(this,fn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=B(this,fn);jn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=B(this,fn);return jn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=jn.batch(()=>B(this,fn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(jr).catch(jr)}invalidateQueries(t,e={}){return jn.batch(()=>(B(this,fn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=jn.batch(()=>B(this,fn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(jr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(jr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=B(this,fn).build(this,e);return n.isStaleByTime(Uc(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(jr).catch(jr)}fetchInfiniteQuery(t){return t.behavior=iN(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(jr).catch(jr)}ensureInfiniteQueryData(t){return t.behavior=iN(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return A0.isOnline()?B(this,dc).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,fn)}getMutationCache(){return B(this,dc)}getDefaultOptions(){return B(this,hc)}setDefaultOptions(t){Ae(this,hc,t)}setQueryDefaults(t,e){B(this,nh).set(fu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...B(this,nh).values()],n={};return e.forEach(r=>{Ag(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){B(this,rh).set(fu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...B(this,rh).values()],n={};return e.forEach(r=>{Ag(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...B(this,hc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=MA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===BA&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...B(this,hc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){B(this,fn).clear(),B(this,dc).clear()}},fn=new WeakMap,dc=new WeakMap,hc=new WeakMap,nh=new WeakMap,rh=new WeakMap,fc=new WeakMap,sh=new WeakMap,ih=new WeakMap,YR),ss,ht,um,$r,Vl,oh,pc,gc,dm,ah,ch,Gl,Kl,mc,lh,kt,Jf,PC,kC,OC,RC,$C,DC,jC,h8,QR,FH=(QR=class extends Bh{constructor(e,n){super();Be(this,kt);Be(this,ss);Be(this,ht);Be(this,um);Be(this,$r);Be(this,Vl);Be(this,oh);Be(this,pc);Be(this,gc);Be(this,dm);Be(this,ah);Be(this,ch);Be(this,Gl);Be(this,Kl);Be(this,mc);Be(this,lh,new Set);this.options=n,Ae(this,ss,e),Ae(this,gc,null),Ae(this,pc,NC()),this.options.experimental_prefetchInRender||B(this,pc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,ht).addObserver(this),aN(B(this,ht),this.options)?st(this,kt,Jf).call(this):this.updateResult(),st(this,kt,RC).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return UC(B(this,ht),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return UC(B(this,ht),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,st(this,kt,$C).call(this),st(this,kt,DC).call(this),B(this,ht).removeObserver(this)}setOptions(e){const n=this.options,r=B(this,ht);if(this.options=B(this,ss).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ri(this.options.enabled,B(this,ht))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");st(this,kt,jC).call(this),B(this,ht).setOptions(this.options),n._defaulted&&!S0(this.options,n)&&B(this,ss).getQueryCache().notify({type:"observerOptionsUpdated",query:B(this,ht),observer:this});const s=this.hasListeners();s&&cN(B(this,ht),r,this.options,n)&&st(this,kt,Jf).call(this),this.updateResult(),s&&(B(this,ht)!==r||Ri(this.options.enabled,B(this,ht))!==Ri(n.enabled,B(this,ht))||Uc(this.options.staleTime,B(this,ht))!==Uc(n.staleTime,B(this,ht)))&&st(this,kt,PC).call(this);const i=st(this,kt,kC).call(this);s&&(B(this,ht)!==r||Ri(this.options.enabled,B(this,ht))!==Ri(n.enabled,B(this,ht))||i!==B(this,mc))&&st(this,kt,OC).call(this,i)}getOptimisticResult(e){const n=B(this,ss).getQueryCache().build(B(this,ss),e),r=this.createResult(n,e);return WH(this,r)&&(Ae(this,$r,r),Ae(this,oh,this.options),Ae(this,Vl,B(this,ht).state)),r}getCurrentResult(){return B(this,$r)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){B(this,lh).add(e)}getCurrentQuery(){return B(this,ht)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=B(this,ss).defaultQueryOptions(e),r=B(this,ss).getQueryCache().build(B(this,ss),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return st(this,kt,Jf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,$r)))}createResult(e,n){var C;const r=B(this,ht),s=this.options,i=B(this,$r),o=B(this,Vl),a=B(this,oh),l=e!==r?e.state:B(this,um),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const k=this.hasListeners(),O=!k&&aN(e,n),M=k&&cN(e,r,n,s);(O||M)&&(d={...d,...u8(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(k=i.data,y=!0):k=typeof n.placeholderData=="function"?n.placeholderData((C=B(this,ch))==null?void 0:C.state.data,B(this,ch)):n.placeholderData,k!==void 0&&(w="success",f=TC(i==null?void 0:i.data,k,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===B(this,dm))f=B(this,ah);else try{Ae(this,dm,n.select),f=n.select(f),f=TC(i==null?void 0:i.data,f,n),Ae(this,ah,f),Ae(this,gc,null)}catch(k){Ae(this,gc,k)}B(this,gc)&&(p=B(this,gc),f=B(this,ah),m=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",E=w==="error",_=v&&b,S=f!==void 0,A={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:E,isInitialLoading:_,isLoading:_,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:E&&!S,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:E&&S,isStale:zA(e,n),refetch:this.refetch,promise:B(this,pc)};if(this.options.experimental_prefetchInRender){const k=F=>{A.status==="error"?F.reject(A.error):A.data!==void 0&&F.resolve(A.data)},O=()=>{const F=Ae(this,pc,A.promise=NC());k(F)},M=B(this,pc);switch(M.status){case"pending":e.queryHash===r.queryHash&&k(M);break;case"fulfilled":(A.status==="error"||A.data!==M.value)&&O();break;case"rejected":(A.status!=="error"||A.error!==M.reason)&&O();break}}return A}updateResult(){const e=B(this,$r),n=this.createResult(B(this,ht),this.options);if(Ae(this,Vl,B(this,ht).state),Ae(this,oh,this.options),B(this,Vl).data!==void 0&&Ae(this,ch,B(this,ht)),S0(n,e))return;Ae(this,$r,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!B(this,lh).size)return!0;const o=new Set(i??B(this,lh));return this.options.throwOnError&&o.add("error"),Object.keys(B(this,$r)).some(a=>{const c=a;return B(this,$r)[c]!==e[c]&&o.has(c)})};st(this,kt,h8).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&st(this,kt,RC).call(this)}},ss=new WeakMap,ht=new WeakMap,um=new WeakMap,$r=new WeakMap,Vl=new WeakMap,oh=new WeakMap,pc=new WeakMap,gc=new WeakMap,dm=new WeakMap,ah=new WeakMap,ch=new WeakMap,Gl=new WeakMap,Kl=new WeakMap,mc=new WeakMap,lh=new WeakMap,kt=new WeakSet,Jf=function(e){st(this,kt,jC).call(this);let n=B(this,ht).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(jr)),n},PC=function(){st(this,kt,$C).call(this);const e=Uc(this.options.staleTime,B(this,ht));if(hu||B(this,$r).isStale||!AC(e))return;const r=n8(B(this,$r).dataUpdatedAt,e)+1;Ae(this,Gl,setTimeout(()=>{B(this,$r).isStale||this.updateResult()},r))},kC=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(B(this,ht)):this.options.refetchInterval)??!1},OC=function(e){st(this,kt,DC).call(this),Ae(this,mc,e),!(hu||Ri(this.options.enabled,B(this,ht))===!1||!AC(B(this,mc))||B(this,mc)===0)&&Ae(this,Kl,setInterval(()=>{(this.options.refetchIntervalInBackground||FA.isFocused())&&st(this,kt,Jf).call(this)},B(this,mc)))},RC=function(){st(this,kt,PC).call(this),st(this,kt,OC).call(this,st(this,kt,kC).call(this))},$C=function(){B(this,Gl)&&(clearTimeout(B(this,Gl)),Ae(this,Gl,void 0))},DC=function(){B(this,Kl)&&(clearInterval(B(this,Kl)),Ae(this,Kl,void 0))},jC=function(){const e=B(this,ss).getQueryCache().build(B(this,ss),this.options);if(e===B(this,ht))return;const n=B(this,ht);Ae(this,ht,e),Ae(this,um,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},h8=function(e){jn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(B(this,$r))}),B(this,ss).getQueryCache().notify({query:B(this,ht),type:"observerResultsUpdated"})})},QR);function zH(t,e){return Ri(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function aN(t,e){return zH(t,e)||t.state.data!==void 0&&UC(t,e,e.refetchOnMount)}function UC(t,e,n){if(Ri(e.enabled,t)!==!1&&Uc(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&zA(t,e)}return!1}function cN(t,e,n,r){return(t!==e||Ri(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&zA(t,n)}function zA(t,e){return Ri(e.enabled,t)!==!1&&t.isStaleByTime(Uc(e.staleTime,t))}function WH(t,e){return!S0(t.getCurrentResult(),e)}var yc,wc,is,ea,da,Nw,LC,JR,qH=(JR=class extends Bh{constructor(n,r){super();Be(this,da);Be(this,yc);Be(this,wc);Be(this,is);Be(this,ea);Ae(this,yc,n),this.setOptions(r),this.bindMethods(),st(this,da,Nw).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=B(this,yc).defaultMutationOptions(n),S0(this.options,r)||B(this,yc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:B(this,is),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&fu(r.mutationKey)!==fu(this.options.mutationKey)?this.reset():((s=B(this,is))==null?void 0:s.state.status)==="pending"&&B(this,is).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=B(this,is))==null||n.removeObserver(this)}onMutationUpdate(n){st(this,da,Nw).call(this),st(this,da,LC).call(this,n)}getCurrentResult(){return B(this,wc)}reset(){var n;(n=B(this,is))==null||n.removeObserver(this),Ae(this,is,void 0),st(this,da,Nw).call(this),st(this,da,LC).call(this)}mutate(n,r){var s;return Ae(this,ea,r),(s=B(this,is))==null||s.removeObserver(this),Ae(this,is,B(this,yc).getMutationCache().build(B(this,yc),this.options)),B(this,is).addObserver(this),B(this,is).execute(n)}},yc=new WeakMap,wc=new WeakMap,is=new WeakMap,ea=new WeakMap,da=new WeakSet,Nw=function(){var r;const n=((r=B(this,is))==null?void 0:r.state)??d8();Ae(this,wc,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},LC=function(n){jn.batch(()=>{var r,s,i,o,a,c,l,u;if(B(this,ea)&&this.hasListeners()){const d=B(this,wc).variables,h=B(this,wc).context;(n==null?void 0:n.type)==="success"?((s=(r=B(this,ea)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=B(this,ea)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=B(this,ea)).onError)==null||c.call(a,n.error,d,h),(u=(l=B(this,ea)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(B(this,wc))})})},JR);function HH(t){return JSON.stringify(t,(e,n)=>VH(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function VH(t){if(!lN(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!lN(n)||!n.hasOwnProperty("isPrototypeOf"))}function lN(t){return Object.prototype.toString.call(t)==="[object Object]"}function WA(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:m,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:v,enabled:E,notifyOnChangeProps:_,placeholderData:S,refetchInterval:x,refetchIntervalInBackground:A,refetchOnMount:C,refetchOnReconnect:k,refetchOnWindowFocus:O,retryOnMount:M,select:F,staleTime:V,suspense:N,throwOnError:T,config:L,connector:D,query:$,...U}=t;return U}function GH(t){return{mutationFn(e){return Iw(t,e)},mutationKey:["connect"]}}function KH(t){return{mutationFn(e){return W5(t,e)},mutationKey:["disconnect"]}}function YH(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return xq(t,{...i,address:r})},queryKey:QH(e)}}function QH(t={}){return["ensName",WA(t)]}function JH(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Sq(t,{...o,connector:r})},queryKey:ZH(e)}}function ZH(t={}){const{connector:e,...n}=t;return["walletClient",{...WA(n),connectorUid:e==null?void 0:e.uid}]}function XH(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return G5(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:eV(e)}}function eV(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",WA(n)]}function tV(t){return{mutationFn(e){return K5(t,e)},mutationKey:["writeContract"]}}var f8=P.createContext(void 0),qA=t=>{const e=P.useContext(f8);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},nV=({client:t,children:e})=>(P.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),g.jsx(f8.Provider,{value:t,children:e})),p8=P.createContext(!1),rV=()=>P.useContext(p8);p8.Provider;function sV(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var iV=P.createContext(sV()),oV=()=>P.useContext(iV),aV=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},cV=t=>{P.useEffect(()=>{t.clearReset()},[t])},lV=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||i8(n,[t.error,r])),uV=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},dV=(t,e)=>t.isLoading&&t.isFetching&&!e,hV=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,uN=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function fV(t,e,n){var d,h,f,p,m;const r=rV(),s=oV(),i=qA(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",uV(o),aV(o,s),cV(s);const a=!i.getQueryCache().get(o.queryHash),[c]=P.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(P.useSyncExternalStore(P.useCallback(w=>{const y=u?c.subscribe(jn.batchCalls(w)):jr;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),P.useEffect(()=>{c.setOptions(o)},[o,c]),hV(o,l))throw uN(o,c,s);if(lV({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!hu&&dV(l,r)){const w=a?uN(o,c,s):(m=i.getQueryCache().get(o.queryHash))==null?void 0:m.promise;w==null||w.catch(jr).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function pV(t,e){return fV(t,FH)}function HA(t,e){const n=qA(),[r]=P.useState(()=>new qH(n,t));P.useEffect(()=>{r.setOptions(t)},[r,t]);const s=P.useSyncExternalStore(P.useCallback(o=>r.subscribe(jn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=P.useCallback((o,a)=>{r.mutate(o,a).catch(jr)},[r]);if(s.error&&i8(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function VA(t){const e=pV({...t,queryKeyHashFn:HH});return e.queryKey=t.queryKey,e}function GA(t={}){const e=Po(t);return P.useSyncExternalStore(n=>Pq(e,{onChange:n}),()=>YT(e),()=>YT(e))}function gV(t={}){const e=Po(t);return P.useSyncExternalStore(n=>V5(e,{onChange:n}),()=>QT(e),()=>QT(e))}function g8(t={}){const{mutation:e}=t,n=Po(t),r=GH(n),{mutate:s,mutateAsync:i,...o}=HA({...e,...r});return P.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:gV({config:n})}}function mV(t={}){const e=Po(t);return P.useSyncExternalStore(n=>kq(e,{onChange:n}),()=>lo(e),()=>lo(e))}function m8(t={}){const{mutation:e}=t,n=Po(t),r=KH(n),{mutate:s,mutateAsync:i,...o}=HA({...e,...r});return{...o,connectors:mV({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function y8(t={}){const{address:e,query:n={}}=t,r=Po(t),s=GA({config:r}),i=YH(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return VA({...n,...i,enabled:o})}function w8(t={}){const{query:e={},...n}=t,r=Po(n),s=qA(),{address:i,connector:o,status:a}=Sm({config:r}),c=GA({config:r}),l=t.connector??o,{queryKey:u,...d}=JH(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=P.useRef(i);return P.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),VA({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function yV(t={}){const{hash:e,query:n={}}=t,r=Po(t),s=GA({config:r}),i=XH(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return VA({...n,...i,enabled:o})}function wV(t={}){const{mutation:e}=t,n=Po(t),r=tV(n),{mutate:s,mutateAsync:i,...o}=HA({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const vV="_verified_lvyh0_1",KA={verified:vV},bV=()=>g.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:KA.verified,children:g.jsx("g",{children:g.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),_V=()=>g.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:KA.verified,children:g.jsxs("g",{children:[g.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[g.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),g.jsx("stop",{offset:".539",stopColor:"#cd8105"}),g.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),g.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),g.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),g.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[g.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),g.jsx("stop",{offset:".406",stopColor:"#e2b719"}),g.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),g.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[g.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),g.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),g.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),EV=()=>g.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:KA.verified,children:g.jsx("g",{children:g.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function v8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=v8(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Lc(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=v8(t))&&(r&&(r+=" "),r+=e);return r}const CV="_root_98iqw_1",xV="_article_98iqw_21",dN={root:CV,article:xV},YA=({className:t,children:e})=>g.jsx("div",{className:Lc("react-tweet-theme",dN.root,t),children:g.jsx("article",{className:dN.article,children:e})}),b8=t=>g.jsx("img",{...t}),SV="_header_nqq4j_1",AV="_avatar_nqq4j_11",IV="_avatarOverflow_nqq4j_16",TV="_avatarSquare_nqq4j_23",NV="_avatarShadow_nqq4j_26",PV="_author_nqq4j_37",kV="_authorLink_nqq4j_44",OV="_authorVerified_nqq4j_53",RV="_authorLinkText_nqq4j_56",$V="_authorMeta_nqq4j_63",DV="_authorFollow_nqq4j_66",jV="_username_nqq4j_69",UV="_follow_nqq4j_74",LV="_separator_nqq4j_82",MV="_brand_nqq4j_86",BV="_twitterIcon_nqq4j_90",Jn={header:SV,avatar:AV,avatarOverflow:IV,avatarSquare:TV,avatarShadow:NV,author:PV,authorLink:kV,authorVerified:OV,authorLinkText:RV,authorMeta:$V,authorFollow:DV,username:jV,follow:UV,separator:LV,brand:MV,twitterIcon:BV},FV="_verifiedOld_lcna5_1",zV="_verifiedBlue_lcna5_4",WV="_verifiedGovernment_lcna5_7",I1={verifiedOld:FV,verifiedBlue:zV,verifiedGovernment:WV},_8=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=g.jsx(bV,{}),s=I1.verifiedBlue;if(n)switch(t.is_blue_verified||(s=I1.verifiedOld),t.verified_type){case"Government":r=g.jsx(EV,{}),s=I1.verifiedGovernment;break;case"Business":r=g.jsx(_V,{}),s=null;break}return n?g.jsx("div",{className:Lc(e,s),children:r}):null},qV=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:b8,{user:s}=t;return g.jsxs("div",{className:Jn.header,children:[g.jsxs("a",{href:t.url,className:Jn.avatar,target:"_blank",rel:"noopener noreferrer",children:[g.jsx("div",{className:Lc(Jn.avatarOverflow,s.profile_image_shape==="Square"&&Jn.avatarSquare),children:g.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),g.jsx("div",{className:Jn.avatarOverflow,children:g.jsx("div",{className:Jn.avatarShadow})})]}),g.jsxs("div",{className:Jn.author,children:[g.jsxs("a",{href:t.url,className:Jn.authorLink,target:"_blank",rel:"noopener noreferrer",children:[g.jsx("div",{className:Jn.authorLinkText,children:g.jsx("span",{title:s.name,children:s.name})}),g.jsx(_8,{user:s,className:Jn.authorVerified})]}),g.jsxs("div",{className:Jn.authorMeta,children:[g.jsx("a",{href:t.url,className:Jn.username,target:"_blank",rel:"noopener noreferrer",children:g.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),g.jsxs("div",{className:Jn.authorFollow,children:[g.jsx("span",{className:Jn.separator,children:"·"}),g.jsx("a",{href:s.follow_url,className:Jn.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),g.jsx("a",{href:t.url,className:Jn.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:g.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Jn.twitterIcon,children:g.jsx("g",{children:g.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},HV="_root_1ec15_1",VV={root:HV},GV=({tweet:t})=>g.jsxs("a",{href:t.in_reply_to_url,className:VV.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),KV="_root_eihfa_1",YV={root:KV},QV=({href:t,children:e})=>g.jsx("a",{href:t,className:YV.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),JV="_root_1xq52_1",ZV={root:JV},XV=({tweet:t})=>g.jsx("p",{className:ZV.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return g.jsx(QV,{href:e.href,children:e.text},n);case"media":return;default:return g.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),hN=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,E8=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,eG=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,tG=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,nG=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,rG=t=>`https://x.com/hashtag/${t.text}`,sG=t=>`https://x.com/search?q=%24${t.text}`,iG=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,C8=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},oG=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},aG=t=>{const e=oG(t);return e.length>1?e[1]:e[0]},MC=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function fN(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Cf(n,"hashtag",t.entities.hashtags),Cf(n,"mention",t.entities.user_mentions),Cf(n,"url",t.entities.urls),Cf(n,"symbol",t.entities.symbols),t.entities.media&&Cf(n,"media",t.entities.media),cG(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:rG(r),text:s});case"mention":return Object.assign(r,{href:E8(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:sG(r),text:s});default:return Object.assign(r,{text:s})}})}function Cf(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function cG(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const lG=t=>({...t,url:hN(t),user:{...t.user,url:E8(t),follow_url:nG(t)},like_url:eG(t),reply_url:tG(t),in_reply_to_url:t.in_reply_to_screen_name?iG(t):void 0,entities:fN(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:hN(t.quoted_tweet),entities:fN(t.quoted_tweet)}:void 0}),uG="_root_g9tkv_1",dG="_rounded_g9tkv_6",hG="_mediaWrapper_g9tkv_10",fG="_grid2Columns_g9tkv_17",pG="_grid3_g9tkv_20",gG="_grid2x2_g9tkv_23",mG="_mediaContainer_g9tkv_26",yG="_mediaLink_g9tkv_34",wG="_skeleton_g9tkv_38",vG="_image_g9tkv_43",Ss={root:uG,rounded:dG,mediaWrapper:hG,grid2Columns:fG,grid3:pG,grid2x2:gG,mediaContainer:mG,mediaLink:yG,skeleton:wG,image:vG},bG="_anchor_fp31d_1",_G="_videoButton_fp31d_17",EG="_videoButtonIcon_fp31d_35",CG="_watchOnTwitter_fp31d_44",xG="_viewReplies_fp31d_60",qu={anchor:bG,videoButton:_G,videoButtonIcon:EG,watchOnTwitter:CG,viewReplies:xG},SG=({tweet:t,media:e})=>{const[n,r]=P.useState(!0),[s,i]=P.useState(!1),[o,a]=P.useState(!1),c=aG(e);let l=0;return g.jsxs(g.Fragment,{children:[g.jsx("video",{className:Ss.image,poster:C8(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:g.jsx("source",{src:c.url,type:c.content_type})}),n&&g.jsx("button",{type:"button",className:qu.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:g.jsx("svg",{viewBox:"0 0 24 24",className:qu.videoButtonIcon,"aria-hidden":"true",children:g.jsx("g",{children:g.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&g.jsx("div",{className:qu.watchOnTwitter,children:g.jsx("a",{href:t.url,className:qu.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&g.jsx("a",{href:t.url,className:Lc(qu.anchor,qu.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},AG=t=>g.jsx("img",{...t}),pN=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},x8=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:AG;return g.jsx("div",{className:Lc(Ss.root,!n&&Ss.rounded),children:g.jsx("div",{className:Lc(Ss.mediaWrapper,o>1&&Ss.grid2Columns,o===3&&Ss.grid3,o>4&&Ss.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>g.jsx(P.Fragment,{children:l.type==="photo"?g.jsxs("a",{href:t.url,className:Lc(Ss.mediaContainer,Ss.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[g.jsx("div",{className:Ss.skeleton,style:pN(l,o)}),g.jsx(c,{src:C8(l,"small"),alt:l.ext_alt_text||"Image",className:Ss.image,draggable:!0})]},l.media_url_https):g.jsxs("div",{className:Ss.mediaContainer,children:[g.jsx("div",{className:Ss.skeleton,style:pN(l,o)}),g.jsx(SG,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},IG={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},TG=new Intl.DateTimeFormat("en-US",IG),NG=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},PG=t=>{const e=NG(TG.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},kG="_root_i24yn_1",OG={root:kG},RG=({tweet:t})=>{const e=new Date(t.created_at),n=PG(e);return g.jsx("a",{className:OG.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:g.jsx("time",{dateTime:e.toISOString(),children:n})})},$G="_info_19qcj_1",DG="_infoLink_19qcj_10",jG="_infoIcon_19qcj_30",T1={info:$G,infoLink:DG,infoIcon:jG},UG=({tweet:t})=>g.jsxs("div",{className:T1.info,children:[g.jsx(RG,{tweet:t}),g.jsx("a",{className:T1.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:g.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:T1.infoIcon,children:g.jsx("g",{children:g.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),LG="_actions_n2anf_1",MG="_like_n2anf_13",BG="_reply_n2anf_14",FG="_copy_n2anf_15",zG="_likeIconWrapper_n2anf_27",WG="_likeCount_n2anf_30",qG="_replyIconWrapper_n2anf_35",HG="_copyIconWrapper_n2anf_36",VG="_likeIcon_n2anf_27",GG="_replyIcon_n2anf_35",KG="_copyIcon_n2anf_36",YG="_replyText_n2anf_56",QG="_copyText_n2anf_57",os={actions:LG,like:MG,reply:BG,copy:FG,likeIconWrapper:zG,likeCount:WG,replyIconWrapper:qG,copyIconWrapper:HG,likeIcon:VG,replyIcon:GG,copyIcon:KG,replyText:YG,copyText:QG},JG=({tweet:t})=>{const[e,n]=P.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return P.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),g.jsxs("button",{type:"button",className:os.copy,"aria-label":"Copy link",onClick:r,children:[g.jsx("div",{className:os.copyIconWrapper,children:e?g.jsx("svg",{viewBox:"0 0 24 24",className:os.copyIcon,"aria-hidden":"true",children:g.jsx("g",{children:g.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):g.jsx("svg",{viewBox:"0 0 24 24",className:os.copyIcon,"aria-hidden":"true",children:g.jsx("g",{children:g.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),g.jsx("span",{className:os.copyText,children:e?"Copied!":"Copy link"})]})},ZG=({tweet:t})=>{const e=MC(t.favorite_count);return g.jsxs("div",{className:os.actions,children:[g.jsxs("a",{className:os.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[g.jsx("div",{className:os.likeIconWrapper,children:g.jsx("svg",{viewBox:"0 0 24 24",className:os.likeIcon,"aria-hidden":"true",children:g.jsx("g",{children:g.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),g.jsx("span",{className:os.likeCount,children:e})]}),g.jsxs("a",{className:os.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[g.jsx("div",{className:os.replyIconWrapper,children:g.jsx("svg",{viewBox:"0 0 24 24",className:os.replyIcon,"aria-hidden":"true",children:g.jsx("g",{children:g.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),g.jsx("span",{className:os.replyText,children:"Reply"})]}),g.jsx(JG,{tweet:t})]})},XG="_replies_1cutb_1",eK="_link_1cutb_4",tK="_text_1cutb_23",N1={replies:XG,link:eK,text:tK},nK=({tweet:t})=>g.jsx("div",{className:N1.replies,children:g.jsx("a",{className:N1.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:g.jsx("span",{className:N1.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${MC(t.conversation_count)} reply`:`Read ${MC(t.conversation_count)} replies`})})}),rK="_root_q5799_1",sK="_article_q5799_16",gN={root:rK,article:sK},iK=({tweet:t,children:e})=>g.jsx("div",{className:gN.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:g.jsx("article",{className:gN.article,children:e})}),oK="_header_r31i5_1",aK="_avatar_r31i5_11",cK="_avatarSquare_r31i5_17",lK="_author_r31i5_21",uK="_authorText_r31i5_26",dK="_username_r31i5_33",ul={header:oK,avatar:aK,avatarSquare:cK,author:lK,authorText:uK,username:dK},hK=({tweet:t})=>{const{user:e}=t;return g.jsxs("div",{className:ul.header,children:[g.jsx("a",{href:t.url,className:ul.avatar,target:"_blank",rel:"noopener noreferrer",children:g.jsx("div",{className:Lc(ul.avatarOverflow,e.profile_image_shape==="Square"&&ul.avatarSquare),children:g.jsx(b8,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),g.jsxs("div",{className:ul.author,children:[g.jsx("div",{className:ul.authorText,children:g.jsx("span",{title:e.name,children:e.name})}),g.jsx(_8,{user:e}),g.jsx("div",{className:ul.username,children:g.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},fK="_root_175ot_1",pK={root:fK},gK=({tweet:t})=>g.jsx("p",{className:pK.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>g.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),mK=({tweet:t})=>{var e;return g.jsxs(iK,{tweet:t,children:[g.jsx(hK,{tweet:t}),g.jsx(gK,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?g.jsx(x8,{quoted:!0,tweet:t}):null]})},yK=({tweet:t,components:e})=>{var n;const r=P.useMemo(()=>lG(t),[t]);return g.jsxs(YA,{children:[g.jsx(qV,{tweet:r,components:e}),r.in_reply_to_status_id_str&&g.jsx(GV,{tweet:r}),g.jsx(XV,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?g.jsx(x8,{tweet:r,components:e}):null,r.quoted_tweet&&g.jsx(mK,{tweet:r.quoted_tweet}),g.jsx(UG,{tweet:r}),g.jsx(ZG,{tweet:r}),g.jsx(nK,{tweet:r})]})},wK="_root_16yxa_1",vK={root:wK},bK=t=>g.jsx(YA,{children:g.jsxs("div",{className:vK.root,children:[g.jsx("h3",{children:"Tweet not found"}),g.jsx("p",{children:"The embedded tweet could not be found…"})]})}),_K="_skeleton_oi7hr_1",EK={skeleton:_K},Iy=({style:t})=>g.jsx("span",{className:EK.skeleton,style:t}),CK="_root_17qqv_1",xK={root:CK},SK=()=>g.jsxs(YA,{className:xK.root,children:[g.jsx(Iy,{style:{height:"3rem",marginBottom:"0.75rem"}}),g.jsx(Iy,{style:{height:"6rem",margin:"0.5rem 0"}}),g.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),g.jsx(Iy,{style:{height:"2rem"}}),g.jsx(Iy,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var S8={exports:{}},A8={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eh=P;function AK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var IK=typeof Object.is=="function"?Object.is:AK,TK=Eh.useState,NK=Eh.useEffect,PK=Eh.useLayoutEffect,kK=Eh.useDebugValue;function OK(t,e){var n=e(),r=TK({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return PK(function(){s.value=n,s.getSnapshot=e,P1(s)&&i({inst:s})},[t,n,e]),NK(function(){return P1(s)&&i({inst:s}),t(function(){P1(s)&&i({inst:s})})},[t]),kK(n),n}function P1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!IK(t,n)}catch{return!0}}function RK(t,e){return e()}var $K=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?RK:OK;A8.useSyncExternalStore=Eh.useSyncExternalStore!==void 0?Eh.useSyncExternalStore:$K;S8.exports=A8;var DK=S8.exports;const I8=0,T8=1,N8=2,mN=3;var yN=Object.prototype.hasOwnProperty;function BC(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&BC(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(yN.call(t,n)&&++r&&!yN.call(e,n)||!(n in e)||!BC(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const ta=new WeakMap,Ec=()=>{},Ur=Ec(),FC=Object,wt=t=>t===Ur,yo=t=>typeof t=="function",Qc=(t,e)=>({...t,...e}),P8=t=>yo(t.then),k1={},Ty={},QA="undefined",Am=typeof window!=QA,zC=typeof document!=QA,jK=Am&&"Deno"in window,UK=()=>Am&&typeof window.requestAnimationFrame!=QA,k8=(t,e)=>{const n=ta.get(t);return[()=>!wt(e)&&t.get(e)||k1,r=>{if(!wt(e)){const s=t.get(e);e in Ty||(Ty[e]=s),n[5](e,Qc(s,r),s||k1)}},n[6],()=>!wt(e)&&e in Ty?Ty[e]:!wt(e)&&t.get(e)||k1]};let WC=!0;const LK=()=>WC,[qC,HC]=Am&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Ec,Ec],MK=()=>{const t=zC&&document.visibilityState;return wt(t)||t!=="hidden"},BK=t=>(zC&&document.addEventListener("visibilitychange",t),qC("focus",t),()=>{zC&&document.removeEventListener("visibilitychange",t),HC("focus",t)}),FK=t=>{const e=()=>{WC=!0,t()},n=()=>{WC=!1};return qC("online",e),qC("offline",n),()=>{HC("online",e),HC("offline",n)}},zK={isOnline:LK,isVisible:MK},WK={initFocus:BK,initReconnect:FK},wN=!$s.useId,Ig=!Am||jK,qK=t=>UK()?window.requestAnimationFrame(t):setTimeout(t,1),O1=Ig?P.useEffect:P.useLayoutEffect,R1=typeof navigator<"u"&&navigator.connection,vN=!Ig&&R1&&(["slow-2g","2g"].includes(R1.effectiveType)||R1.saveData),Ny=new WeakMap,$1=(t,e)=>FC.prototype.toString.call(t)===`[object ${e}]`;let HK=0;const VC=t=>{const e=typeof t,n=$1(t,"Date"),r=$1(t,"RegExp"),s=$1(t,"Object");let i,o;if(FC(t)===t&&!n&&!r){if(i=Ny.get(t),i)return i;if(i=++HK+"~",Ny.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=VC(t[o])+",";Ny.set(t,i)}if(s){i="#";const a=FC.keys(t).sort();for(;!wt(o=a.pop());)wt(t[o])||(i+=o+":"+VC(t[o])+",");Ny.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},JA=t=>{if(yo(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?VC(t):"",[t,e]};let VK=0;const GC=()=>++VK;async function O8(...t){const[e,n,r,s]=t,i=Qc({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(yo(n)){const h=n,f=[],p=e.keys();for(const m of p)!/^\$(inf|sub)\$/.test(m)&&h(e.get(m)._k)&&f.push(m);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=JA(h);if(!f)return;const[p,m]=k8(e,f),[w,y,b,v]=ta.get(e),E=()=>{const F=w[f];return(yo(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],F&&F[0])?F[0](N8).then(()=>p().data):p().data};if(t.length<3)return E();let _=r,S;const x=GC();y[f]=[x,0];const A=!wt(c),C=p(),k=C.data,O=C._c,M=wt(O)?k:O;if(A&&(c=yo(c)?c(M,k):c,m({data:c,_c:M})),yo(_))try{_=_(M)}catch(F){S=F}if(_&&P8(_))if(_=await _.catch(F=>{S=F}),x!==y[f][0]){if(S)throw S;return _}else S&&A&&l(S)&&(o=!0,m({data:M,_c:Ur}));if(o&&!S)if(yo(o)){const F=o(_,M);m({data:F,error:Ur,_c:Ur})}else m({data:_,error:Ur,_c:Ur});if(y[f][1]=GC(),Promise.resolve(E()).then(()=>{m({_c:Ur})}),S){if(u)throw S;return}return _}}const bN=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},GK=(t,e)=>{if(!ta.has(t)){const n=Qc(WK,e),r=Object.create(null),s=O8.bind(Ur,t);let i=Ec;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!ta.has(t)&&(ta.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!Ig)){const u=n.initFocus(setTimeout.bind(Ur,bN.bind(Ur,r,I8))),d=n.initReconnect(setTimeout.bind(Ur,bN.bind(Ur,r,T8)));i=()=>{u&&u(),d&&d(),ta.delete(t)}}};return l(),[t,s,l,i]}return[t,ta.get(t)[4]]},KK=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!wt(i)&&o>i||setTimeout(r,a,s)},YK=BC,[R8,QK]=GK(new Map),JK=Qc({onLoadingSlow:Ec,onSuccess:Ec,onError:Ec,onErrorRetry:KK,onDiscarded:Ec,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:vN?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:vN?5e3:3e3,compare:YK,isPaused:()=>!1,cache:R8,mutate:QK,fallback:{}},zK),ZK=(t,e)=>{const n=Qc(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Qc(s,o))}return n},XK=P.createContext({}),eY="$inf$",$8=Am&&window.__SWR_DEVTOOLS_USE__,tY=$8?window.__SWR_DEVTOOLS_USE__:[],nY=()=>{$8&&(window.__SWR_DEVTOOLS_REACT__=$s)},rY=t=>yo(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],sY=()=>Qc(JK,P.useContext(XK)),iY=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=JA(e),[,,,a]=ta.get(R8);if(o.startsWith(eY))return n(...i);const c=a[o];return wt(c)?n(...i):(delete a[o],c)}),r),oY=tY.concat(iY),aY=t=>function(...n){const r=sY(),[s,i,o]=rY(n),a=ZK(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(oY);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},cY=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};nY();const D1=$s.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),j1={dedupe:!0},lY=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,m,w]=ta.get(r),[y,b]=JA(t),v=P.useRef(!1),E=P.useRef(!1),_=P.useRef(y),S=P.useRef(e),x=P.useRef(n),A=()=>x.current,C=()=>A().isVisible()&&A().isOnline(),[k,O,M,F]=k8(r,y),V=P.useRef({}).current,N=wt(o)?wt(n.fallback)?Ur:n.fallback[y]:o,T=(Te,Ce)=>{for(const Ue in V){const Je=Ue;if(Je==="data"){if(!s(Te[Je],Ce[Je])&&(!wt(Te[Je])||!s(se,Ce[Je])))return!1}else if(Ce[Je]!==Te[Je])return!1}return!0},L=P.useMemo(()=>{const Te=!y||!e?!1:wt(a)?A().isPaused()||i?!1:c!==!1:a,Ce=lt=>{const sn=Qc(lt);return delete sn._k,Te?{isValidating:!0,isLoading:!0,...sn}:sn},Ue=k(),Je=F(),ft=Ce(Ue),yn=Ue===Je?ft:Ce(Je);let bt=ft;return[()=>{const lt=Ce(k());return T(lt,bt)?(bt.data=lt.data,bt.isLoading=lt.isLoading,bt.isValidating=lt.isValidating,bt.error=lt.error,bt):(bt=lt,lt)},()=>yn]},[r,y]),D=DK.useSyncExternalStore(P.useCallback(Te=>M(y,(Ce,Ue)=>{T(Ue,Ce)||Te()}),[r,y]),L[0],L[1]),$=!v.current,U=f[y]&&f[y].length>0,W=D.data,J=wt(W)?N&&P8(N)?D1(N):N:W,ie=D.error,ne=P.useRef(J),se=h?wt(W)?wt(ne.current)?J:ne.current:W:J,we=U&&!wt(ie)?!1:$&&!wt(a)?a:A().isPaused()?!1:i?wt(J)?!1:c:wt(J)||c,Y=!!(y&&e&&$&&we),X=wt(D.isValidating)?Y:D.isValidating,oe=wt(D.isLoading)?Y:D.isLoading,te=P.useCallback(async Te=>{const Ce=S.current;if(!y||!Ce||E.current||A().isPaused())return!1;let Ue,Je,ft=!0;const yn=Te||{},bt=!m[y]||!yn.dedupe,lt=()=>wN?!E.current&&y===_.current&&v.current:y===_.current,sn={isValidating:!1,isLoading:!1},Qn=()=>{O(sn)},pr=()=>{const Tn=m[y];Tn&&Tn[1]===Je&&delete m[y]},Hs={isValidating:!0};wt(k().data)&&(Hs.isLoading=!0);try{if(bt&&(O(Hs),n.loadingTimeout&&wt(k().data)&&setTimeout(()=>{ft&&lt()&&A().onLoadingSlow(y,n)},n.loadingTimeout),m[y]=[Ce(b),GC()]),[Ue,Je]=m[y],Ue=await Ue,bt&&setTimeout(pr,n.dedupingInterval),!m[y]||m[y][1]!==Je)return bt&&lt()&&A().onDiscarded(y),!1;sn.error=Ur;const Tn=p[y];if(!wt(Tn)&&(Je<=Tn[0]||Je<=Tn[1]||Tn[1]===0))return Qn(),bt&&lt()&&A().onDiscarded(y),!1;const gr=k().data;sn.data=s(gr,Ue)?gr:Ue,bt&&lt()&&A().onSuccess(Ue,y,n)}catch(Tn){pr();const gr=A(),{shouldRetryOnError:Vs}=gr;gr.isPaused()||(sn.error=Tn,bt&&lt()&&(gr.onError(Tn,y,gr),(Vs===!0||yo(Vs)&&Vs(Tn))&&(!A().revalidateOnFocus||!A().revalidateOnReconnect||C())&&gr.onErrorRetry(Tn,y,gr,Qi=>{const Nn=f[y];Nn&&Nn[0]&&Nn[0](mN,Qi)},{retryCount:(yn.retryCount||0)+1,dedupe:!0})))}return ft=!1,Qn(),!0},[y,r]),he=P.useCallback((...Te)=>O8(r,_.current,...Te),[]);if(O1(()=>{S.current=e,x.current=n,wt(W)||(ne.current=W)}),O1(()=>{if(!y)return;const Te=te.bind(Ur,j1);let Ce=0;A().revalidateOnFocus&&(Ce=Date.now()+A().focusThrottleInterval);const Je=cY(y,f,(ft,yn={})=>{if(ft==I8){const bt=Date.now();A().revalidateOnFocus&&bt>Ce&&C()&&(Ce=bt+A().focusThrottleInterval,Te())}else if(ft==T8)A().revalidateOnReconnect&&C()&&Te();else{if(ft==N8)return te();if(ft==mN)return te(yn)}});return E.current=!1,_.current=y,v.current=!0,O({_k:b}),we&&(wt(J)||Ig?Te():qK(Te)),()=>{E.current=!0,Je()}},[y]),O1(()=>{let Te;function Ce(){const Je=yo(l)?l(k().data):l;Je&&Te!==-1&&(Te=setTimeout(Ue,Je))}function Ue(){!k().error&&(u||A().isVisible())&&(d||A().isOnline())?te(j1).then(Ce):Ce()}return Ce(),()=>{Te&&(clearTimeout(Te),Te=-1)}},[l,u,d,y]),P.useDebugValue(se),i&&wt(J)&&y){if(!wN&&Ig)throw new Error("Fallback data is required when using Suspense in SSR.");S.current=e,x.current=n,E.current=!1;const Te=w[y];if(!wt(Te)){const Ce=he(Te);D1(Ce)}if(wt(ie)){const Ce=te(j1);wt(se)||(Ce.status="fulfilled",Ce.value=!0),D1(Ce)}else throw ie}return{mutate:he,get data(){return V.data=!0,se},get error(){return V.error=!0,ie},get isValidating(){return V.isValidating=!0,X},get isLoading(){return V.isLoading=!0,oe}}},_N=aY(lY);class uY extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const dY=_N.default||_N,hY="https://react-tweet.vercel.app";async function fY([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new uY({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const pY=(t,e,n)=>{const{isLoading:r,data:s,error:i}=dY(()=>e||t?[e||t&&`${hY}/api/tweet/${t}`,n]:null,fY,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},gY=({id:t,apiUrl:e,fallback:n=g.jsx(SK,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=pY(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||bK;return g.jsx(l,{error:i?i(a):a})}return g.jsx(yK,{tweet:o,components:r})};var Rv={exports:{}},D8={},j8={exports:{}},mY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yY=mY,wY=yY;function U8(){}function L8(){}L8.resetWarningCache=U8;var vY=function(){function t(r,s,i,o,a,c){if(c!==wY){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:L8,resetWarningCache:U8};return n.PropTypes=n,n};j8.exports=vY();var M8=j8.exports;function B8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=B8(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function EN(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=B8(t))&&(r&&(r+=" "),r+=e);return r}const bY=Object.freeze(Object.defineProperty({__proto__:null,clsx:EN,default:EN},Symbol.toStringTag,{value:"Module"})),_Y=rv(bY);var mn={},ko={};Object.defineProperty(ko,"__esModule",{value:!0});ko.dontSetMe=AY;ko.findInArray=EY;ko.int=SY;ko.isFunction=CY;ko.isNum=xY;function EY(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function CY(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function xY(t){return typeof t=="number"&&!isNaN(t)}function SY(t){return parseInt(t,10)}function AY(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.browserPrefixToKey=z8;Nu.browserPrefixToStyle=IY;Nu.default=void 0;Nu.getPrefix=F8;const U1=["Moz","Webkit","O","ms"];function F8(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<U1.length;r++)if(z8(e,U1[r])in n)return U1[r];return""}function z8(t,e){return e?"".concat(e).concat(TY(t)):t}function IY(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function TY(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Nu.default=F8();Object.defineProperty(mn,"__esModule",{value:!0});mn.addClassName=H8;mn.addEvent=kY;mn.addUserSelectStyles=zY;mn.createCSSTransform=LY;mn.createSVGTransform=MY;mn.getTouch=BY;mn.getTouchIdentifier=FY;mn.getTranslation=ZA;mn.innerHeight=DY;mn.innerWidth=jY;mn.matchesSelector=q8;mn.matchesSelectorAndParentsTo=PY;mn.offsetXYFromParent=UY;mn.outerHeight=RY;mn.outerWidth=$Y;mn.removeClassName=V8;mn.removeEvent=OY;mn.removeUserSelectStyles=WY;var Us=ko,CN=NY(Nu);function W8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(W8=function(r){return r?n:e})(t)}function NY(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=W8(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}let Py="";function q8(t,e){return Py||(Py=(0,Us.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Us.isFunction)(t[n])})),(0,Us.isFunction)(t[Py])?t[Py](e):!1}function PY(t,e,n){let r=t;do{if(q8(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function kY(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function OY(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function RY(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Us.int)(n.borderTopWidth),e+=(0,Us.int)(n.borderBottomWidth),e}function $Y(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Us.int)(n.borderLeftWidth),e+=(0,Us.int)(n.borderRightWidth),e}function DY(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Us.int)(n.paddingTop),e-=(0,Us.int)(n.paddingBottom),e}function jY(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Us.int)(n.paddingLeft),e-=(0,Us.int)(n.paddingRight),e}function UY(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function LY(t,e){const n=ZA(t,e,"px");return{[(0,CN.browserPrefixToKey)("transform",CN.default)]:n}}function MY(t,e){return ZA(t,e,"")}function ZA(t,e,n){let{x:r,y:s}=t,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function BY(t,e){return t.targetTouches&&(0,Us.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Us.findInArray)(t.changedTouches,n=>e===n.identifier)}function FY(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function zY(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&H8(t.body,"react-draggable-transparent-selection")}function WY(t){if(t)try{if(t.body&&V8(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function H8(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function V8(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.canDragX=VY;Oo.canDragY=GY;Oo.createCoreData=YY;Oo.createDraggableData=QY;Oo.getBoundPosition=qY;Oo.getControlPosition=KY;Oo.snapToGrid=HY;var As=ko,Dd=mn;function qY(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:JY(r);const s=XA(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,As.int)(u.paddingLeft)+(0,As.int)(l.marginLeft),top:-s.offsetTop+(0,As.int)(u.paddingTop)+(0,As.int)(l.marginTop),right:(0,Dd.innerWidth)(c)-(0,Dd.outerWidth)(s)-s.offsetLeft+(0,As.int)(u.paddingRight)-(0,As.int)(l.marginRight),bottom:(0,Dd.innerHeight)(c)-(0,Dd.outerHeight)(s)-s.offsetTop+(0,As.int)(u.paddingBottom)-(0,As.int)(l.marginBottom)}}return(0,As.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,As.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,As.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,As.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function HY(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function VY(t){return t.props.axis==="both"||t.props.axis==="x"}function GY(t){return t.props.axis==="both"||t.props.axis==="y"}function KY(t,e,n){const r=typeof e=="number"?(0,Dd.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=XA(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Dd.offsetXYFromParent)(r||t,i,n.props.scale)}function YY(t,e,n){const r=!(0,As.isNum)(t.lastX),s=XA(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function QY(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function JY(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function XA(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var $v={},Dv={};Object.defineProperty(Dv,"__esModule",{value:!0});Dv.default=ZY;function ZY(){}Object.defineProperty($v,"__esModule",{value:!0});$v.default=void 0;var L1=eQ(P),Vr=e2(M8),XY=e2(gA),wr=mn,Ta=Oo,M1=ko,xf=e2(Dv);function e2(t){return t&&t.__esModule?t:{default:t}}function G8(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(G8=function(r){return r?n:e})(t)}function eQ(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=G8(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function Or(t,e,n){return e=tQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tQ(t){var e=nQ(t,"string");return typeof e=="symbol"?e:String(e)}function nQ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Ei={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Na=Ei.mouse,jv=class extends L1.Component{constructor(){super(...arguments),Or(this,"dragging",!1),Or(this,"lastX",NaN),Or(this,"lastY",NaN),Or(this,"touchIdentifier",null),Or(this,"mounted",!1),Or(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,wr.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,wr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const s=(0,wr.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,Ta.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,Ta.createCoreData)(this,o,a);(0,xf.default)("DraggableCore: handleDragStart: %j",c),(0,xf.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,wr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,wr.addEvent)(r,Na.move,this.handleDrag),(0,wr.addEvent)(r,Na.stop,this.handleDragStop))}),Or(this,"handleDrag",e=>{const n=(0,Ta.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,Ta.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,Ta.createCoreData)(this,r,s);if((0,xf.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),Or(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Ta.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,Ta.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,Ta.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,wr.removeUserSelectStyles)(a.ownerDocument),(0,xf.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,xf.default)("DraggableCore: Removing handlers"),(0,wr.removeEvent)(a.ownerDocument,Na.move,this.handleDrag),(0,wr.removeEvent)(a.ownerDocument,Na.stop,this.handleDragStop))}),Or(this,"onMouseDown",e=>(Na=Ei.mouse,this.handleDragStart(e))),Or(this,"onMouseUp",e=>(Na=Ei.mouse,this.handleDragStop(e))),Or(this,"onTouchStart",e=>(Na=Ei.touch,this.handleDragStart(e))),Or(this,"onTouchEnd",e=>(Na=Ei.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,wr.addEvent)(e,Ei.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,wr.removeEvent)(n,Ei.mouse.move,this.handleDrag),(0,wr.removeEvent)(n,Ei.touch.move,this.handleDrag),(0,wr.removeEvent)(n,Ei.mouse.stop,this.handleDragStop),(0,wr.removeEvent)(n,Ei.touch.stop,this.handleDragStop),(0,wr.removeEvent)(e,Ei.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,wr.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:XY.default.findDOMNode(this)}render(){return L1.cloneElement(L1.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};$v.default=jv;Or(jv,"displayName","DraggableCore");Or(jv,"propTypes",{allowAnyClick:Vr.default.bool,children:Vr.default.node.isRequired,disabled:Vr.default.bool,enableUserSelectHack:Vr.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Vr.default.arrayOf(Vr.default.number),handle:Vr.default.string,cancel:Vr.default.string,nodeRef:Vr.default.object,onStart:Vr.default.func,onDrag:Vr.default.func,onStop:Vr.default.func,onMouseDown:Vr.default.func,scale:Vr.default.number,className:M1.dontSetMe,style:M1.dontSetMe,transform:M1.dontSetMe});Or(jv,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=h(P),n=u(M8),r=u(gA),s=u(_Y),i=mn,o=Oo,a=ko,c=u($v),l=u(Dv);function u(b){return b&&b.__esModule?b:{default:b}}function d(b){if(typeof WeakMap!="function")return null;var v=new WeakMap,E=new WeakMap;return(d=function(_){return _?E:v})(b)}function h(b,v){if(b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var E=d(v);if(E&&E.has(b))return E.get(b);var _={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in b)if(x!=="default"&&Object.prototype.hasOwnProperty.call(b,x)){var A=S?Object.getOwnPropertyDescriptor(b,x):null;A&&(A.get||A.set)?Object.defineProperty(_,x,A):_[x]=b[x]}return _.default=b,E&&E.set(b,_),_}function f(){return f=Object.assign?Object.assign.bind():function(b){for(var v=1;v<arguments.length;v++){var E=arguments[v];for(var _ in E)Object.prototype.hasOwnProperty.call(E,_)&&(b[_]=E[_])}return b},f.apply(this,arguments)}function p(b,v,E){return v=m(v),v in b?Object.defineProperty(b,v,{value:E,enumerable:!0,configurable:!0,writable:!0}):b[v]=E,b}function m(b){var v=w(b,"string");return typeof v=="symbol"?v:String(v)}function w(b,v){if(typeof b!="object"||b===null)return b;var E=b[Symbol.toPrimitive];if(E!==void 0){var _=E.call(b,v);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(b)}class y extends e.Component{static getDerivedStateFromProps(v,E){let{position:_}=v,{prevPropsPosition:S}=E;return _&&(!S||_.x!==S.x||_.y!==S.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:S}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(v){super(v),p(this,"onDragStart",(E,_)=>{if((0,l.default)("Draggable: onDragStart: %j",_),this.props.onStart(E,(0,o.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(E,_)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",_);const S=(0,o.createDraggableData)(this,_),x={x:S.x,y:S.y,slackX:0,slackY:0};if(this.props.bounds){const{x:C,y:k}=x;x.x+=this.state.slackX,x.y+=this.state.slackY;const[O,M]=(0,o.getBoundPosition)(this,x.x,x.y);x.x=O,x.y=M,x.slackX=this.state.slackX+(C-x.x),x.slackY=this.state.slackY+(k-x.y),S.x=x.x,S.y=x.y,S.deltaX=x.x-this.state.x,S.deltaY=x.y-this.state.y}if(this.props.onDrag(E,S)===!1)return!1;this.setState(x)}),p(this,"onDragStop",(E,_)=>{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,_))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",_);const x={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:C,y:k}=this.props.position;x.x=C,x.y=k}this.setState(x)}),this.state={dragging:!1,dragged:!1,x:v.position?v.position.x:v.defaultPosition.x,y:v.position?v.position.y:v.defaultPosition.y,prevPropsPosition:{...v.position},slackX:0,slackY:0,isElementSVG:!1},v.position&&!(v.onDrag||v.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var v,E;return(v=(E=this.props)===null||E===void 0||(E=E.nodeRef)===null||E===void 0?void 0:E.current)!==null&&v!==void 0?v:r.default.findDOMNode(this)}render(){const{axis:v,bounds:E,children:_,defaultPosition:S,defaultClassName:x,defaultClassNameDragging:A,defaultClassNameDragged:C,position:k,positionOffset:O,scale:M,...F}=this.props;let V={},N=null;const L=!!!k||this.state.dragging,D=k||S,$={x:(0,o.canDragX)(this)&&L?this.state.x:D.x,y:(0,o.canDragY)(this)&&L?this.state.y:D.y};this.state.isElementSVG?N=(0,i.createSVGTransform)($,O):V=(0,i.createCSSTransform)($,O);const U=(0,s.default)(_.props.className||"",x,{[A]:this.state.dragging,[C]:this.state.dragged});return e.createElement(c.default,f({},F,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:U,style:{..._.props.style,...V},transform:N}))}}t.default=y,p(y,"displayName","Draggable"),p(y,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(D8);const{default:K8,DraggableCore:rQ}=D8;Rv.exports=K8;Rv.exports.default=K8;Rv.exports.DraggableCore=rQ;var sQ=Rv.exports;const Im=Su(sQ);function ln(){return ln=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ln.apply(null,arguments)}function Y8(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Q8={exports:{}},Lt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yn=typeof Symbol=="function"&&Symbol.for,t2=Yn?Symbol.for("react.element"):60103,n2=Yn?Symbol.for("react.portal"):60106,Uv=Yn?Symbol.for("react.fragment"):60107,Lv=Yn?Symbol.for("react.strict_mode"):60108,Mv=Yn?Symbol.for("react.profiler"):60114,Bv=Yn?Symbol.for("react.provider"):60109,Fv=Yn?Symbol.for("react.context"):60110,r2=Yn?Symbol.for("react.async_mode"):60111,zv=Yn?Symbol.for("react.concurrent_mode"):60111,Wv=Yn?Symbol.for("react.forward_ref"):60112,qv=Yn?Symbol.for("react.suspense"):60113,iQ=Yn?Symbol.for("react.suspense_list"):60120,Hv=Yn?Symbol.for("react.memo"):60115,Vv=Yn?Symbol.for("react.lazy"):60116,oQ=Yn?Symbol.for("react.block"):60121,aQ=Yn?Symbol.for("react.fundamental"):60117,cQ=Yn?Symbol.for("react.responder"):60118,lQ=Yn?Symbol.for("react.scope"):60119;function Ws(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case t2:switch(t=t.type,t){case r2:case zv:case Uv:case Mv:case Lv:case qv:return t;default:switch(t=t&&t.$$typeof,t){case Fv:case Wv:case Vv:case Hv:case Bv:return t;default:return e}}case n2:return e}}}function J8(t){return Ws(t)===zv}Lt.AsyncMode=r2;Lt.ConcurrentMode=zv;Lt.ContextConsumer=Fv;Lt.ContextProvider=Bv;Lt.Element=t2;Lt.ForwardRef=Wv;Lt.Fragment=Uv;Lt.Lazy=Vv;Lt.Memo=Hv;Lt.Portal=n2;Lt.Profiler=Mv;Lt.StrictMode=Lv;Lt.Suspense=qv;Lt.isAsyncMode=function(t){return J8(t)||Ws(t)===r2};Lt.isConcurrentMode=J8;Lt.isContextConsumer=function(t){return Ws(t)===Fv};Lt.isContextProvider=function(t){return Ws(t)===Bv};Lt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===t2};Lt.isForwardRef=function(t){return Ws(t)===Wv};Lt.isFragment=function(t){return Ws(t)===Uv};Lt.isLazy=function(t){return Ws(t)===Vv};Lt.isMemo=function(t){return Ws(t)===Hv};Lt.isPortal=function(t){return Ws(t)===n2};Lt.isProfiler=function(t){return Ws(t)===Mv};Lt.isStrictMode=function(t){return Ws(t)===Lv};Lt.isSuspense=function(t){return Ws(t)===qv};Lt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Uv||t===zv||t===Mv||t===Lv||t===qv||t===iQ||typeof t=="object"&&t!==null&&(t.$$typeof===Vv||t.$$typeof===Hv||t.$$typeof===Bv||t.$$typeof===Fv||t.$$typeof===Wv||t.$$typeof===aQ||t.$$typeof===cQ||t.$$typeof===lQ||t.$$typeof===oQ)};Lt.typeOf=Ws;Q8.exports=Lt;var uQ=Q8.exports,s2=uQ,dQ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},hQ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},fQ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Z8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i2={};i2[s2.ForwardRef]=fQ;i2[s2.Memo]=Z8;function xN(t){return s2.isMemo(t)?Z8:i2[t.$$typeof]||dQ}var pQ=Object.defineProperty,gQ=Object.getOwnPropertyNames,SN=Object.getOwnPropertySymbols,mQ=Object.getOwnPropertyDescriptor,yQ=Object.getPrototypeOf,AN=Object.prototype;function X8(t,e,n){if(typeof e!="string"){if(AN){var r=yQ(e);r&&r!==AN&&X8(t,r,n)}var s=gQ(e);SN&&(s=s.concat(SN(e)));for(var i=xN(t),o=xN(e),a=0;a<s.length;++a){var c=s[a];if(!hQ[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=mQ(e,c);try{pQ(t,c,l)}catch{}}}}return t}var wQ=X8;const vQ=Su(wQ);var ej={};Object.defineProperty(ej,"__esModule",{value:!0});ej.default=bQ;function bQ(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function ky(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I0(){return I0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I0.apply(this,arguments)}function _Q(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Pa(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EQ(t){var e=function(n){_Q(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,ky(Pa(Pa(i)),"cachedTheme",void 0),ky(Pa(Pa(i)),"lastOuterTheme",void 0),ky(Pa(Pa(i)),"lastTheme",void 0),ky(Pa(Pa(i)),"renderProvider",function(l){var u=i.props.children;return $s.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?I0({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?$s.createElement(t.Consumer,null,this.renderProvider):null},r}($s.Component);return e}function CQ(t){return function(n){var r=$s.forwardRef(function(s,i){return $s.createElement(t.Consumer,null,function(o){return $s.createElement(n,I0({theme:o,ref:i},s))})});return vQ(r,n),r}}function xQ(t){var e=function(){var r=$s.useContext(t);return r};return e}function SQ(t){return{context:t,withTheme:CQ(t),useTheme:xQ(t),ThemeProvider:EQ(t)}}var tj=P.createContext();SQ(tj);var IN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fh=(typeof window>"u"?"undefined":IN(window))==="object"&&(typeof document>"u"?"undefined":IN(document))==="object"&&document.nodeType===9;function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function AQ(t,e){if(Tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function IQ(t){var e=AQ(t,"string");return Tg(e)=="symbol"?e:e+""}function TQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IQ(r.key),r)}}function o2(t,e,n){return e&&TQ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function KC(t,e){return KC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},KC(t,e)}function nj(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,KC(t,e)}function TN(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var NQ={}.constructor;function YC(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(YC);if(t.constructor!==NQ)return t;var e={};for(var n in t)e[n]=YC(t[n]);return e}function Gv(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=YC(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var NN=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},Jl=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=NN(e[r]," ");else n=NN(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function zh(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Sf(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function Ng(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=zh(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=Sf(f+":"+u+Jl(p)+";",o))}}else for(var m in a){var w=a[m];w!=null&&(r&&(r+=l),r+=Sf(m+":"+u+Jl(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=Sf(y+":"+u+Jl(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),Sf(""+t+u+"{"+r,o)+Sf("}",o))}var PQ=/([[\].#*$><+~=|^:(),"'`\s])/g,PN=typeof CSS<"u"&&CSS.escape,a2=function(t){return PN?PN(t):t.replace(PQ,"\\$1")},rj=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),QC=function(t){nj(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(TN(TN(o)),l),o.selectorText="."+a2(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=Jl(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?ln({},s,{allowEmpty:!0}):s;return Ng(this.selectorText,this.style,a)},o2(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(rj),kQ={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new QC(e,n,r)}},B1={indent:1,children:!0},OQ=/@([\w-]+)/,RQ=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(OQ);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new Kv(ln({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=B1);var s=zh(r),i=s.linebreak;if(r.indent==null&&(r.indent=B1.indent),r.children==null&&(r.children=B1.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),$Q=/@container|@media|@supports\s+/,DQ={onCreateRule:function(e,n,r){return $Q.test(e)?new RQ(e,n,r):null}},F1={indent:1,children:!0},jQ=/@keyframes\s+([\w-]+)/,JC=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(jQ);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:a2(c(this,a)),this.rules=new Kv(ln({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],ln({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=F1);var s=zh(r),i=s.linebreak;if(r.indent==null&&(r.indent=F1.indent),r.children==null&&(r.children=F1.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),UQ=/@keyframes\s+/,LQ=/\$([\w-]+)/g,ZC=function(e,n){return typeof e=="string"?e.replace(LQ,function(r,s){return s in n?n[s]:r}):e},kN=function(e,n,r){var s=e[n],i=ZC(s,r);i!==s&&(e[n]=i)},MQ={onCreateRule:function(e,n,r){return typeof e=="string"&&UQ.test(e)?new JC(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&kN(e,"animation-name",r.keyframes),"animation"in e&&kN(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return ZC(e,s.keyframes);case"animation-name":return ZC(e,s.keyframes);default:return e}}},BQ=function(t){nj(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?ln({},s,{allowEmpty:!0}):s;return Ng(this.key,this.style,a)},e}(rj),FQ={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new BQ(e,n,r):null}},zQ=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=zh(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=Ng(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return Ng(this.at,this.style,r)},t}(),WQ=/@font-face/,qQ={onCreateRule:function(e,n,r){return WQ.test(e)?new zQ(e,n,r):null}},HQ=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return Ng(this.key,this.style,r)},t}(),VQ={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new HQ(e,n,r):null}},GQ=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),KQ={"@charset":!0,"@import":!0,"@namespace":!0},YQ={onCreateRule:function(e,n,r){return e in KQ?new GQ(e,n,r):null}},ON=[kQ,DQ,MQ,FQ,qQ,VQ,YQ],QQ={process:!0},RN={force:!0,process:!0},Kv=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=ln({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+a2(this.classes[p]));var m=Gv(p,s,f);if(!m)return null;this.register(m);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,m),m},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=ln({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof QC?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof JC&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof QC?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof JC&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=QQ);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,RN)}for(var f in l){var p=r.style[f],m=l[f];p==null&&p!==m&&r.prop(f,null,RN)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=zh(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),sj=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=ln({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new Kv(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),JQ=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),ZQ=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=Y8(s,["attached"]),a=zh(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},o2(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),bp=new ZQ,XC=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),ex="2f1acc6c3a606b082e5eef5e54414ffb";XC[ex]==null&&(XC[ex]=0);var $N=XC[ex]++,DN=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+$N+a+n:c+i.key+"-"+$N+(a?"-"+a:"")+"-"+n};return r},ij=function(e){var n;return function(){return n||(n=e()),n}},XQ=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},eJ=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=Jl(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},tJ=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},nJ=function(e,n){return e.selectorText=n,e.selectorText===n},oj=ij(function(){return document.querySelector("head")});function rJ(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function sJ(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function iJ(t){for(var e=oj(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function oJ(t){var e=bp.registry;if(e.length>0){var n=rJ(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=sJ(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=iJ(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function aJ(t,e){var n=e.insertionPoint,r=oJ(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}oj().appendChild(t)}var cJ=ij(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),jN=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},UN=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},lJ=function(){var e=document.createElement("style");return e.textContent=`
`,e},uJ=function(){function t(n){this.getPropertyValue=XQ,this.setProperty=eJ,this.removeProperty=tJ,this.setSelector=nJ,this.hasInsertedRules=!1,this.cssRules=[],n&&bp.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||lJ(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=cJ();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){aJ(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=UN(i,s);if(a=jN(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=UN(i,s),d=jN(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof sj&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),dJ=0,hJ=function(){function t(n){this.id=dJ++,this.version="10.10.0",this.plugins=new JQ,this.options={id:{minify:!1},createGenerateId:DN,Renderer:Fh?uJ:null,plugins:[]},this.generateId=DN({minify:!1});for(var r=0;r<ON.length;r++)this.plugins.use(ON[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=ln({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=bp.index===0?0:bp.index+1);var a=new sj(r,ln({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),bp.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=ln({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=Gv(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),aj=function(e){return new hJ(e)},LN=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},o2(t,[{key:"size",get:function(){return this.length}}]),t}(),c2=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function cj(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=cj(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */aj();var lj=Date.now(),z1="fnValues"+lj,W1="fnStyle"+ ++lj,fJ=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=Gv(n,{},s);return i[W1]=r,i},onProcessStyle:function(n,r){if(z1 in r||W1 in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[z1]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[W1];a&&(o.style=a(n)||{});var c=o[z1];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function pJ(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var yd;typeof self<"u"?yd=self:typeof window<"u"?yd=window:typeof global<"u"?yd=global:typeof module<"u"?yd=module:yd=Function("return this")();var MN=pJ(yd),BN=function(e){return e&&e[MN]&&e===e[MN]()},gJ=function(e){return{onCreateRule:function(r,s,i){if(!BN(s))return null;var o=s,a=Gv(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!BN(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},mJ=/;\n/,yJ=function(e){for(var n={},r=e.split(mJ),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},wJ=function(e){typeof e.style=="string"&&(e.style=yJ(e.style))};function vJ(){return{onProcessRule:wJ}}var Mc="@global",tx="@global ",bJ=function(){function t(n,r,s){this.type="global",this.at=Mc,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new Kv(ln({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),_J=function(){function t(n,r,s){this.type="global",this.at=Mc,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(tx.length);this.rule=s.jss.createRule(i,r,ln({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),EJ=/\s*,\s*/g;function uj(t,e){for(var n=t.split(EJ),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function CJ(t,e){var n=t.options,r=t.style,s=r?r[Mc]:null;if(s){for(var i in s)e.addRule(i,s[i],ln({},n,{selector:uj(i,t.selector)}));delete r[Mc]}}function xJ(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Mc.length)!==Mc)){var i=uj(s.substr(Mc.length),t.selector);e.addRule(i,r[s],ln({},n,{selector:i})),delete r[s]}}function SJ(){function t(n,r,s){if(!n)return null;if(n===Mc)return new bJ(n,r,s);if(n[0]==="@"&&n.substr(0,tx.length)===tx)return new _J(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(CJ(n,r),xJ(n,r))}return{onCreateRule:t,onProcessRule:e}}var Pw=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},q1="extendCurrValue"+Date.now();function AJ(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Rl(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?ln({},t,{extend:l}):t.extend[c];Rl(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Rl(t.extend.extend,e,n,r);continue}if(Pw(t.extend[d])){d in r||(r[d]={}),Rl(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function IJ(t,e,n,r){for(var s in t)if(s!=="extend"){if(Pw(r[s])&&Pw(t[s])){Rl(t[s],e,n,r[s]);continue}if(Pw(t[s])){r[s]=Rl(t[s],e,n);continue}r[s]=t[s]}}function Rl(t,e,n,r){return r===void 0&&(r={}),AJ(t,e,n,r),IJ(t,e,n,r),r}function TJ(){function t(n,r,s){return"extend"in n?Rl(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[q1])s.prop(i,null);return s[q1]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[q1]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var FN=/\s*,\s*/g,NJ=/&/g,PJ=/\$([\w-]+)/g;function kJ(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(FN),a=s.split(FN),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(NJ,u):u+" "+h}return c}function n(s,i,o){if(o)return ln({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=ln({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(PJ,u);var m=a.key+"-"+d;"replaceRule"in c?c.replaceRule(m,s[d],ln({},l,{selector:p})):c.addRule(m,s[d],ln({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function nx(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=nx(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return nx(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function OJ(){function t(e,n){return"composes"in e&&(nx(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var RJ=/[A-Z]/g,$J=/^ms-/,H1={};function DJ(t){return"-"+t.toLowerCase()}function dj(t){if(H1.hasOwnProperty(t))return H1[t];var e=t.replace(RJ,DJ);return H1[t]=$J.test(e)?"-"+e:e}function T0(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:dj(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(T0):e.fallbacks=T0(t.fallbacks)),e}function jJ(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=T0(n[r]);return n}return T0(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=dj(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var Z=c2&&CSS?CSS.px:"px",Oy=c2&&CSS?CSS.ms:"ms",Hu=c2&&CSS?CSS.percent:"%",UJ={"animation-delay":Oy,"animation-duration":Oy,"background-position":Z,"background-position-x":Z,"background-position-y":Z,"background-size":Z,border:Z,"border-bottom":Z,"border-bottom-left-radius":Z,"border-bottom-right-radius":Z,"border-bottom-width":Z,"border-left":Z,"border-left-width":Z,"border-radius":Z,"border-right":Z,"border-right-width":Z,"border-top":Z,"border-top-left-radius":Z,"border-top-right-radius":Z,"border-top-width":Z,"border-width":Z,"border-block":Z,"border-block-end":Z,"border-block-end-width":Z,"border-block-start":Z,"border-block-start-width":Z,"border-block-width":Z,"border-inline":Z,"border-inline-end":Z,"border-inline-end-width":Z,"border-inline-start":Z,"border-inline-start-width":Z,"border-inline-width":Z,"border-start-start-radius":Z,"border-start-end-radius":Z,"border-end-start-radius":Z,"border-end-end-radius":Z,margin:Z,"margin-bottom":Z,"margin-left":Z,"margin-right":Z,"margin-top":Z,"margin-block":Z,"margin-block-end":Z,"margin-block-start":Z,"margin-inline":Z,"margin-inline-end":Z,"margin-inline-start":Z,padding:Z,"padding-bottom":Z,"padding-left":Z,"padding-right":Z,"padding-top":Z,"padding-block":Z,"padding-block-end":Z,"padding-block-start":Z,"padding-inline":Z,"padding-inline-end":Z,"padding-inline-start":Z,"mask-position-x":Z,"mask-position-y":Z,"mask-size":Z,height:Z,width:Z,"min-height":Z,"max-height":Z,"min-width":Z,"max-width":Z,bottom:Z,left:Z,top:Z,right:Z,inset:Z,"inset-block":Z,"inset-block-end":Z,"inset-block-start":Z,"inset-inline":Z,"inset-inline-end":Z,"inset-inline-start":Z,"box-shadow":Z,"text-shadow":Z,"column-gap":Z,"column-rule":Z,"column-rule-width":Z,"column-width":Z,"font-size":Z,"font-size-delta":Z,"letter-spacing":Z,"text-decoration-thickness":Z,"text-indent":Z,"text-stroke":Z,"text-stroke-width":Z,"word-spacing":Z,motion:Z,"motion-offset":Z,outline:Z,"outline-offset":Z,"outline-width":Z,perspective:Z,"perspective-origin-x":Hu,"perspective-origin-y":Hu,"transform-origin":Hu,"transform-origin-x":Hu,"transform-origin-y":Hu,"transform-origin-z":Hu,"transition-delay":Oy,"transition-duration":Oy,"vertical-align":Z,"flex-basis":Z,"shape-margin":Z,size:Z,gap:Z,grid:Z,"grid-gap":Z,"row-gap":Z,"grid-row-gap":Z,"grid-column-gap":Z,"grid-template-rows":Z,"grid-template-columns":Z,"grid-auto-rows":Z,"grid-auto-columns":Z,"box-shadow-x":Z,"box-shadow-y":Z,"box-shadow-blur":Z,"box-shadow-spread":Z,"font-line-height":Z,"text-shadow-x":Z,"text-shadow-y":Z,"text-shadow-blur":Z};function hj(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var LJ=hj(UJ);function _p(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=_p(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=_p(s,e[s],n);else for(var i in e)e[i]=_p(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||LJ[t];return o&&!(e===0&&o===Z)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function MJ(t){t===void 0&&(t={});var e=hj(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=_p(o,s[o],e);return s}function r(s,i){return _p(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var BJ={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},FJ={position:!0,size:!0},Ry={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},V1={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function zJ(t,e,n){return t.map(function(r){return pj(r,e,n,!1,!0)})}function fj(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?fj(t[0],e,n,r):typeof t[0]=="object"?zJ(t,e,r):[t]}function pj(t,e,n,r,s){if(!(Ry[e]||V1[e]))return[];var i=[];if(V1[e]&&(t=WJ(t,n,V1[e],r)),Object.keys(t).length)for(var o in Ry[e]){if(t[o]){Array.isArray(t[o])?i.push(FJ[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}Ry[e][o]!=null&&i.push(Ry[e][o])}return!i.length||s?i:[i]}function WJ(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=Pg((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function Pg(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=Pg(t.fallbacks[i],e,!0);continue}t[r]=fj(s,r,BJ,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=Pg(t.fallbacks,e,!0);continue}t[r]=pj(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function qJ(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=Pg(e[r],n);return e}return Pg(e,n)}return{onProcessStyle:t}}function rx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function HJ(t){if(Array.isArray(t))return rx(t)}function VJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GJ(t,e){if(t){if(typeof t=="string")return rx(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rx(t,e):void 0}}function KJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YJ(t){return HJ(t)||VJ(t)||GJ(t)||KJ()}var Zf="",sx="",gj="",mj="",QJ=Fh&&"ontouchstart"in document.documentElement;if(Fh){var G1={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},JJ=document.createElement("p"),K1=JJ.style,ZJ="Transform";for(var Y1 in G1)if(Y1+ZJ in K1){Zf=Y1,sx=G1[Y1];break}Zf==="Webkit"&&"msHyphens"in K1&&(Zf="ms",sx=G1.ms,mj="edge"),Zf==="Webkit"&&"-apple-trailing-word"in K1&&(gj="apple")}var nt={js:Zf,css:sx,vendor:gj,browser:mj,isTouch:QJ};function XJ(t){return t[1]==="-"||nt.js==="ms"?t:"@"+nt.css+"keyframes"+t.substr(10)}var eZ={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:nt.js==="ms"?"-webkit-"+e:nt.css+e}},tZ={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:nt.js==="Webkit"?nt.css+"print-"+e:e}},nZ=/[-\s]+(.)?/g;function rZ(t,e){return e?e.toUpperCase():""}function l2(t){return t.replace(nZ,rZ)}function Jc(t){return l2("-"+t)}var sZ={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(nt.js==="Webkit"){var r="mask-image";if(l2(r)in n)return e;if(nt.js+Jc(r)in n)return nt.css+e}return e}},iZ={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:nt.vendor==="apple"&&!nt.isTouch?nt.css+e:e}},oZ={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:nt.css+e}},aZ={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:nt.css+e}},cZ={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:nt.js==="Webkit"||nt.js==="ms"&&nt.browser!=="edge"?nt.css+e:e}},lZ={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:nt.js==="Moz"||nt.js==="ms"||nt.vendor==="apple"?nt.css+e:e}},uZ={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(nt.js==="Webkit"){var r="WebkitColumn"+Jc(e);return r in n?nt.css+"column-"+e:!1}if(nt.js==="Moz"){var s="page"+Jc(e);return s in n?"page-"+e:!1}return!1}},dZ={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(nt.js==="Moz")return e;var r=e.replace("-inline","");return nt.js+Jc(r)in n?nt.css+r:!1}},hZ={supportedProperty:function(e,n){return l2(e)in n?e:!1}},fZ={supportedProperty:function(e,n){var r=Jc(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:nt.js+r in n?nt.css+e:nt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},pZ={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:nt.js==="ms"?""+nt.css+e:e}},gZ={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:nt.js==="ms"?nt.css+"scroll-chaining":e}},mZ={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},yZ={supportedProperty:function(e,n){var r=mZ[e];return r&&nt.js+Jc(r)in n?nt.css+r:!1}},yj={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},wZ=Object.keys(yj),vZ=function(e){return nt.css+e},bZ={supportedProperty:function(e,n,r){var s=r.multiple;if(wZ.indexOf(e)>-1){var i=yj[e];if(!Array.isArray(i))return nt.js+Jc(i)in n?nt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(nt.js+Jc(i[0])in n))return!1;return i.map(vZ)}return!1}},wj=[eZ,tZ,sZ,iZ,oZ,aZ,cZ,lZ,uZ,dZ,hZ,fZ,pZ,gZ,yZ,bZ],zN=wj.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),_Z=wj.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,YJ(e.noPrefill)),t},[]),Xf,Cl={};if(Fh){Xf=document.createElement("p");var Q1=window.getComputedStyle(document.documentElement,"");for(var J1 in Q1)isNaN(J1)||(Cl[Q1[J1]]=Q1[J1]);_Z.forEach(function(t){return delete Cl[t]})}function ix(t,e){if(e===void 0&&(e={}),!Xf)return t;if(Cl[t]!=null)return Cl[t];(t==="transition"||t==="transform")&&(e[t]=t in Xf.style);for(var n=0;n<zN.length&&(Cl[t]=zN[n](t,Xf.style,e),!Cl[t]);n++);try{Xf.style[t]=""}catch{return!1}return Cl[t]}var Vu={},EZ={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},CZ=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Ha;function xZ(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?ix(e):", "+ix(n);return r||e||n}Fh&&(Ha=document.createElement("p"));function WN(t,e){var n=e;if(!Ha||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Vu[r]!=null)return Vu[r];try{Ha.style[t]=n}catch{return Vu[r]=!1,!1}if(EZ[t])n=n.replace(CZ,xZ);else if(Ha.style[t]===""&&(n=nt.css+n,n==="-ms-flex"&&(Ha.style[t]="-ms-flexbox"),Ha.style[t]=n,Ha.style[t]===""))return Vu[r]=!1,!1;return Ha.style[t]="",Vu[r]=n,Vu[r]}function SZ(){function t(s){if(s.type==="keyframes"){var i=s;i.at=XJ(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=ix(i);c&&c!==i&&(a=!0);var l=!1,u=WN(c,Jl(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return WN(i,Jl(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function AZ(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var IZ=function(e){return e===void 0&&(e={}),{plugins:[fJ(),gJ(e.observable),vJ(),SJ(),TJ(),kJ(),OJ(),jJ(),MJ(e.defaultUnit),qJ(),SZ(),AZ()]}},TZ=Number.MIN_SAFE_INTEGER||-1e9,NZ=function(){return TZ++},PZ=P.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Fh}),qN=new Map,u2=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new LN),r[n];var s=qN.get(n);return s||(s=new LN,qN.set(n,s)),s},HN=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=u2(r,s);o.manage(i),r.registry&&r.registry.add(n)}},kZ=function(e){if(e.sheet){var n=u2(e.context,e.index);n.unmanage(e.theme)}},OZ=aj(IZ()),vj=new WeakMap,bj=function(e){return vj.get(e)},RZ=function(e,n){vj.set(e,n)},$Z=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function DZ(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",ln({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var jZ=function(e){if(!e.context.disableStylesGeneration){var n=u2(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||OZ,i=$Z(e),o=cj(i),a=s.createStyleSheet(i,DZ(e,o!==null));return RZ(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},UZ=function(e,n){for(var r in n)e.deleteRule(n[r])},LZ=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},MZ=function(e,n){var r=bj(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},BZ=function(e,n){if(!n)return e.classes;var r=bj(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function VN(t){return t?P.useEffect:$s.useInsertionEffect||P.useLayoutEffect}var Z1={},Ki=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?NZ():s,o=r.theming,a=r.name,c=Y8(r,["index","theming","name"]),l=o&&o.context||tj,u=function(f){return typeof e=="function"&&(f||P.useContext(l))||Z1},d={};return function(f){var p=P.useRef(!0),m=P.useContext(PZ),w=u(f&&f.theme),y=P.useMemo(function(){var _=jZ({context:m,styles:e,name:a,theme:w,index:i,sheetOptions:c});return _&&m.isSSR&&HN({index:i,context:m,sheet:_,theme:w}),[_,_?MZ(_,f):null]},[m,w]),b=y[0],v=y[1];VN(m.isSSR)(function(){b&&v&&!p.current&&LZ(f,b,v)},[f]),VN(m.isSSR)(function(){return b&&HN({index:i,context:m,sheet:b,theme:w}),function(){b&&(kZ({index:i,context:m,sheet:b,theme:w}),v&&UZ(b,v))}},[b]);var E=P.useMemo(function(){return b&&v?BZ(b,v):d},[b,v]);return P.useDebugValue(E),P.useDebugValue(w===Z1?"No theme":w),P.useEffect(function(){p.current=!1}),E}};const FZ=Ki({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function X1({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=FZ(),d=P.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=g.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[g.jsx("img",{src:t,alt:e,className:u.iconImage}),g.jsx("span",{className:u.iconLabel,children:e})]});return o?f:g.jsx(Im,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const zZ=Ki({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function Zs({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=zZ({isOpen:e}),u=P.useRef(null),d=()=>{r&&r(t)};return g.jsx(Im,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:g.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[g.jsxs("div",{className:l.header,children:[g.jsx("span",{children:i||t.replace("-popup","")}),g.jsxs("div",{className:l.titleBarButtons,children:[g.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),g.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),g.jsx("div",{className:l.content,children:s})]})})}const e_=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],WZ=80,qZ=80,HZ=10,VZ=10,GZ=10,KZ=10,YZ=({onIconClick:t})=>{const e=e_.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:GZ+d*(WZ+HZ),y:KZ+u*(qZ+VZ)},u++,u>=4&&(u=0,d++)}),l},[r,s]=P.useState(n()),[i,o]=P.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return g.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:g.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>g.jsx(X1,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&g.jsx(Zs,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:e_.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>g.jsx(X1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&g.jsx(Zs,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:e_.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>g.jsx(X1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},QZ=Ki({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),JZ=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=P.useState(!1),[o,a]=P.useState(new Date),c=QZ({isOpen:s});P.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return g.jsxs("div",{className:c.taskbar,children:[g.jsxs("div",{className:c.leftSection,children:[g.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),g.jsx("div",{className:c.windows,children:t.map(h=>g.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),g.jsxs("div",{className:c.rightSection,children:[g.jsxs("div",{className:c.statusSection,children:[g.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:g.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),g.jsx("div",{className:c.clock,children:l(o)})]}),s&&g.jsxs("div",{className:c.menu,children:[g.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),g.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),g.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),g.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),g.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),g.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),g.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),g.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function _j(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function d2(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function Ej(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function h2(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function Cj(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function xj(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function ZZ(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const XZ=Ki({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),eX=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=XZ({isOpen:t}),i=P.useRef(null),[o,a]=P.useState([]),[c,l]=P.useState(!1),[u,d]=P.useState(!1),[h,f]=P.useState({}),[p,m]=P.useState(null),{data:w}=w8();P.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{l(!0),m(null);try{const S=await _j(r);a(S);const x={};S.forEach(A=>{x[A.id]=0}),f(x)}catch(S){m(S.message)}finally{l(!1)}},b=(S,x)=>{f(A=>({...A,[S]:Math.max(0,x)}))},v=async()=>{const S=Object.entries(h).filter(([,x])=>x>0).map(([x,A])=>({id:x,quantity:A}));if(S.length===0){m("Please select at least one item to mint");return}if(!w){m("Wallet not connected");return}d(!0),m(null);try{console.log("Starting mint process for address:",r);const x=await Ej(r,S);if(console.log("Mint API result:",x),x.success&&x.mintTransaction){console.log("Got mint transaction:",x.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const A=await w.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});console.log("Transaction sent successfully:",A),alert(`NFT Minted Successfully: Transaction Hash - ${A}`),e()}catch(A){console.error("Transaction sending failed:",A),m("Transaction failed: "+A.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){console.error("Minting failed:",x),m("Minting failed: "+x.message)}finally{d(!1)}},E=(S,x)=>`${parseFloat(S)} ${x}`,_=()=>{n&&n()};return t?g.jsx(Im,{nodeRef:i,handle:`.${s.header}`,children:g.jsxs("div",{ref:i,className:s.popup,children:[g.jsxs("div",{className:s.header,children:[g.jsx("span",{children:"Mint Pixelawbster"}),g.jsxs("div",{className:s.titleBarButtons,children:[g.jsx("button",{className:s.titleBarButton,onClick:_,title:"Minimize",children:"_"}),g.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),g.jsxs("div",{className:s.content,children:[p&&g.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?g.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?g.jsx("div",{children:"No eligible invite lists found for your wallet."}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("h3",{children:"Available Lists:"}),o.map(S=>g.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[g.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:S.name}),g.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",E(S.token_price,S.currency_symbol)]}),g.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",S.wallet_limit===4294967295?"Unlimited":S.wallet_limit," per wallet"]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[g.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),g.jsx("input",{type:"number",min:"0",max:S.wallet_limit===4294967295?999:S.wallet_limit,value:h[S.id]||0,onChange:x=>b(S.id,parseInt(x.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},S.id))]}),g.jsx("button",{onClick:()=>void v(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},tX=Ki({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),nX=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},rX=({nft:t,onClose:e})=>{const n=tX(),r=P.useRef(null),s=nX(t.attributes);return g.jsx(Im,{nodeRef:r,handle:`.${n.header}`,children:g.jsxs("div",{className:n.popup,ref:r,children:[g.jsxs("div",{className:n.header,children:[g.jsxs("span",{children:[t.name," - Details"]}),g.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),g.jsxs("div",{className:n.content,children:[g.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),g.jsx("h3",{children:"Traits"}),g.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>g.jsxs("li",{children:[g.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):g.jsx("li",{children:"No traits found."})})]})]})})},sX=Symbol(),GN=Object.getPrototypeOf,ox=new WeakMap,iX=t=>t&&(ox.has(t)?ox.get(t):GN(t)===Object.prototype||GN(t)===Array.prototype),oX=t=>iX(t)&&t[sX]||null,KN=(t,e=!0)=>{ox.set(t,e)},N0={},t_=t=>typeof t=="object"&&t!==null,Ja=new WeakMap,ep=new WeakSet,aX=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>t_(l)&&!ep.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return KN(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const m=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:m,enumerable:w,configurable:!0};if(ep.has(m))KN(m,!1);else if(m instanceof Promise)delete y.value,y.get=()=>d(m);else if(Ja.has(m)){const[b,v]=Ja.get(m);y.value=i(b,v(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!t_(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(C,k=++a[0])=>{d!==k&&(d=k,h.forEach(O=>O(C,k)))};let p=a[1];const m=(C=++a[1])=>(p!==C&&!h.size&&(p=C,y.forEach(([k])=>{const O=k[1](C);O>d&&(d=O)})),d),w=C=>(k,O)=>{const M=[...k];M[1]=[C,...M[1]],f(M,O)},y=new Map,b=(C,k)=>{if((N0?"production":void 0)!=="production"&&y.has(C))throw new Error("prop listener already exists");if(h.size){const O=k[3](w(C));y.set(C,[k,O])}else y.set(C,[k])},v=C=>{var k;const O=y.get(C);O&&(y.delete(C),(k=O[1])==null||k.call(O))},E=C=>(h.add(C),h.size===1&&y.forEach(([O,M],F)=>{if((N0?"production":void 0)!=="production"&&M)throw new Error("remove already exists");const V=O[3](w(F));y.set(F,[O,V])}),()=>{h.delete(C),h.size===0&&y.forEach(([O,M],F)=>{M&&(M(),y.set(F,[O]))})}),_=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(_,{deleteProperty(C,k){const O=Reflect.get(C,k);v(k);const M=Reflect.deleteProperty(C,k);return M&&f(["delete",[k],O]),M},set(C,k,O,M){const F=Reflect.has(C,k),V=Reflect.get(C,k,M);if(F&&(t(V,O)||o.has(O)&&t(V,o.get(O))))return!0;v(k),t_(O)&&(O=oX(O)||O);let N=O;if(O instanceof Promise)O.then(T=>{O.status="fulfilled",O.value=T,f(["resolve",[k],T])}).catch(T=>{O.status="rejected",O.reason=T,f(["reject",[k],T])});else{!Ja.has(O)&&n(O)&&(N=c(O));const T=!ep.has(N)&&Ja.get(N);T&&b(k,T)}return Reflect.set(C,k,N,M),f(["set",[k],O,V]),!0}});o.set(l,x);const A=[_,m,i,E];return Ja.set(x,A),Reflect.ownKeys(l).forEach(C=>{const k=Object.getOwnPropertyDescriptor(l,C);"value"in k&&(x[C]=l[C],delete k.value,delete k.writable),Object.defineProperty(_,C,k)}),x})=>[c,Ja,ep,t,e,n,r,s,i,o,a],[cX]=aX();function Yt(t={}){return cX(t)}function lr(t,e,n){const r=Ja.get(t);(N0?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function kg(t,e){const n=Ja.get(t);(N0?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function pu(t){return ep.add(t),t}function ur(t,e,n,r){let s=t[e];return lr(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function lX(t){const e=Yt({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var YN={};const ee={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof YN<"u"?YN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},Og={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ee.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var uX=20,dX=1,gu=1e6,QN=1e6,hX=-7,fX=21,pX=!1,Tm="[big.js] ",Pu=Tm+"Invalid ",Yv=Pu+"decimal places",gX=Pu+"rounding mode",Sj=Tm+"Division by zero",Ut={},_o=void 0,mX=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Aj(){function t(e){var n=this;if(!(n instanceof t))return e===_o?Aj():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Pu+"value");e=e===0&&1/e<0?"-0":String(e)}yX(n,e)}n.constructor=t}return t.prototype=Ut,t.DP=uX,t.RM=dX,t.NE=hX,t.PE=fX,t.strict=pX,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function yX(t,e){var n,r,s;if(!mX.test(e))throw Error(Pu+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function ku(t,e,n,r){var s=t.c;if(n===_o&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(gX);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==_o))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==_o||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Ou(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Ut.abs=function(){var t=new this.constructor(this);return t.s=1,t};Ut.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Ut.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>gu)throw Error(Yv);if(!s[0])throw Error(Sj);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,m=r.slice(0,a),w=m.length,y=t,b=y.c=[],v=0,E=o+(y.e=e.e-t.e)+1;for(y.s=i,i=E<0?0:E,h.unshift(0);w++<a;)m.push(0);do{for(l=0;l<10;l++){if(a!=(w=m.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=m[d]){u=s[d]>m[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(m[--w]<c[w]){for(d=w;d&&!m[--d];)m[d]=9;--m[d],m[w]+=10}m[w]-=c[w]}for(;!m[0];)m.shift()}else break}b[v++]=u?l:++l,m[0]&&u?m[w]=r[f]||0:m=[r[f]]}while((f++<p||m[0]!==_o)&&i--);return!b[0]&&v!=1&&(b.shift(),y.e--,E--),v>E&&ku(y,E,n.RM,m[0]!==_o),y};Ut.eq=function(t){return this.cmp(t)===0};Ut.gt=function(t){return this.cmp(t)>0};Ut.gte=function(t){return this.cmp(t)>-1};Ut.lt=function(t){return this.cmp(t)<0};Ut.lte=function(t){return this.cmp(t)<1};Ut.minus=Ut.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Ut.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(Sj);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Ut.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Ut.plus=Ut.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Ut.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-QN||t>QN)throw Error(Pu+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Ut.prec=function(t,e){if(t!==~~t||t<1||t>gu)throw Error(Pu+"precision");return ku(new this.constructor(this),t,e)};Ut.round=function(t,e){if(t===_o)t=0;else if(t!==~~t||t<-gu||t>gu)throw Error(Yv);return ku(new this.constructor(this),t+this.e+1,e)};Ut.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(Tm+"No square root");i=Math.sqrt(+Ou(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return ku(t,(s.DP-=4)+t.e+1,s.RM)};Ut.times=Ut.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Ut.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==_o){if(t!==~~t||t<0||t>gu)throw Error(Yv);for(n=ku(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Ou(n,!0,!!r)};Ut.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==_o){if(t!==~~t||t<0||t>gu)throw Error(Yv);for(n=ku(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Ou(n,!1,!!r)};Ut[Symbol.for("nodejs.util.inspect.custom")]=Ut.toJSON=Ut.toString=function(){var t=this,e=t.constructor;return Ou(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Ut.toNumber=function(){var t=+Ou(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Tm+"Imprecise conversion");return t};Ut.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==_o){if(t!==~~t||t<1||t>gu)throw Error(Pu+"precision");for(n=ku(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Ou(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Ut.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Tm+"valueOf disallowed");return Ou(t,t.e<=e.NE||t.e>=e.PE,!0)};var Af=Aj();const wX={bigNumber(t){return t?new Af(t):new Af(0)},multiply(t,e){if(t===void 0||e===void 0)return new Af(0);const n=new Af(t),r=new Af(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},vX=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],bX=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],_X=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],EX={getERC20Abi:t=>ee.USDT_CONTRACT_ADDRESSES.includes(t)?_X:vX,getSwapAbi:()=>bX},Ns={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Qe={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function n_(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Ge={setItem(t,e){tp()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(tp())return localStorage.getItem(t)||void 0},removeItem(t){tp()&&localStorage.removeItem(t)},clear(){tp()&&localStorage.clear()}};function tp(){return typeof window<"u"&&typeof localStorage<"u"}function ia(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var JN={};const r_=(typeof process<"u"&&typeof JN<"u"?JN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Ij=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],CX="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",$t={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:r_,SECURE_SITE_DASHBOARD:`${r_}/dashboard`,SECURE_SITE_FAVICON:`${r_}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},ve={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=ve.getActiveNamespace(),e=ve.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Ge.setItem(Qe.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Ge.getItem(Qe.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Ge.removeItem(Qe.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Ge.setItem(Qe.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Ge.setItem(Qe.ACTIVE_CAIP_NETWORK_ID,t),ve.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Ge.getItem(Qe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Ge.removeItem(Qe.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=n_(t);Ge.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=ve.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Ge.setItem(Qe.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Ge.getItem(Qe.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=n_(t);Ge.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Ge.getItem(Qe.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=n_(t);return Ge.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Ge.setItem(Qe.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Ge.getItem(Qe.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Ge.removeItem(Qe.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Ge.getItem(Qe.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Ge.getItem(Qe.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Ge.setItem(Qe.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Ge.getItem(Qe.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Ge.getItem(Qe.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Ge.setItem(Qe.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=ve.getConnectedNamespaces();e.includes(t)||(e.push(t),ve.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=ve.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),ve.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Ge.getItem(Qe.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Ge.setItem(Qe.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Ge.removeItem(Qe.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Ge.getItem(Qe.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=ve.getBalanceCache();Ge.setItem(Qe.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=ve.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;ve.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=ve.getBalanceCache();e[t.caipAddress]=t,Ge.setItem(Qe.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Ge.getItem(Qe.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=ve.getBalanceCache();Ge.setItem(Qe.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=ve.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),ve.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=ve.getNativeBalanceCache();e[t.caipAddress]=t,Ge.setItem(Qe.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Ge.getItem(Qe.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=ve.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;ve.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=ve.getEnsCache();e[t.address]=t,Ge.setItem(Qe.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=ve.getEnsCache();Ge.setItem(Qe.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Ge.getItem(Qe.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=ve.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;ve.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=ve.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Ge.setItem(Qe.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=ve.getIdentityCache();Ge.setItem(Qe.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Ge.removeItem(Qe.PORTFOLIO_CACHE),Ge.removeItem(Qe.NATIVE_BALANCE_CACHE),Ge.removeItem(Qe.ENS_CACHE),Ge.removeItem(Qe.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Ge.setItem(Qe.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Ge.getItem(Qe.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=ve.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ee.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Ge.setItem(Qe.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Ge.getItem(Qe.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=ve.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Ge.setItem(Qe.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Ge.getItem(Qe.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=ve.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Ge.setItem(Qe.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=ve.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Ge.setItem(Qe.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(ve.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},De={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return De.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=$t.TEN_SEC_MS:!0},isAllowedRetry(t,e=$t.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(De.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+$t.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(De.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!De.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?ve.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,De.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ee.W3M_API_URL},getBlockchainApiUrl(){return ee.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ee.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?$t.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ee.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function If(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Nm{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await If(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await If(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await If(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await If(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await If(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const xX={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?$t.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(De.isTelegram()){if(De.isIos())return t.filter(e=>e!=="google");if(De.isMac())return t.filter(e=>e!=="x");if(De.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},We=Yt({features:$t.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:$t.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ue={state:We,subscribeKey(t,e){return ur(We,t,e)},setOptions(t){Object.assign(We,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...We.remoteFeatures,...t};We.remoteFeatures=e,(n=We.remoteFeatures)!=null&&n.socials&&(We.remoteFeatures.socials=xX.filterSocialsByPlatform(We.remoteFeatures.socials))},setFeatures(t){if(!t)return;We.features||(We.features=$t.DEFAULT_FEATURES);const e={...We.features,...t};We.features=e},setProjectId(t){We.projectId=t},setCustomRpcUrls(t){We.customRpcUrls=t},setAllWallets(t){We.allWallets=t},setIncludeWalletIds(t){We.includeWalletIds=t},setExcludeWalletIds(t){We.excludeWalletIds=t},setFeaturedWalletIds(t){We.featuredWalletIds=t},setTokens(t){We.tokens=t},setTermsConditionsUrl(t){We.termsConditionsUrl=t},setPrivacyPolicyUrl(t){We.privacyPolicyUrl=t},setCustomWallets(t){We.customWallets=t},setIsSiweEnabled(t){We.isSiweEnabled=t},setIsUniversalProvider(t){We.isUniversalProvider=t},setSdkVersion(t){We.sdkVersion=t},setMetadata(t){We.metadata=t},setDisableAppend(t){We.disableAppend=t},setEIP6963Enabled(t){We.enableEIP6963=t},setDebug(t){We.debug=t},setEnableWalletConnect(t){We.enableWalletConnect=t},setEnableWalletGuide(t){We.enableWalletGuide=t},setEnableAuthLogger(t){We.enableAuthLogger=t},setEnableWallets(t){We.enableWallets=t},setPreferUniversalLinks(t){We.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){We.hasMultipleAddresses=t},setSIWX(t){We.siwx=t},setConnectMethodsOrder(t){We.features={...We.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){We.features={...We.features,walletFeaturesOrder:t}},setSocialsOrder(t){We.remoteFeatures={...We.remoteFeatures,socials:t}},setCollapseWallets(t){We.features={...We.features,collapseWallets:t}},setEnableEmbedded(t){We.enableEmbedded=t},setAllowUnsupportedChain(t){We.allowUnsupportedChain=t},setManualWCControl(t){We.manualWCControl=t},setEnableNetworkSwitch(t){We.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(We.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){We.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return We.universalProviderConfigOverride},getSnapshot(){return kg(We)}},SX=Object.freeze({enabled:!0,events:[]}),AX=new Nm({baseUrl:De.getAnalyticsUrl(),clientId:null}),IX=5,TX=60*1e3,ka=Yt({...SX}),NX={state:ka,subscribeKey(t,e){return ur(ka,t,e)},async sendError(t,e){if(!ka.enabled)return;const n=Date.now();if(ka.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<TX}).length>=IX)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};ka.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ue.state;await AX.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:De.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){ka.enabled=!0},disable(){ka.enabled=!1},clearEvents(){ka.events=[]}};class Ch extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Ch.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Ch):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function ZN(t,e){const n=t instanceof Ch?t:new Ch(t instanceof Error?t.message:String(t),e,t);throw NX.sendError(n,n.category),n}function qs(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return ZN(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return ZN(a,e)}},n[r]=i}else n[r]=s}),n}const po={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},PX={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===po.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${po.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===po.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${po.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ee.CHAIN.SOLANA&&t===po.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${po.COINBASE.url}/dapp?cb_url=${r}`)}},Es=Yt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),kX={state:Es,subscribeNetworkImages(t){return lr(Es.networkImages,()=>t(Es.networkImages))},subscribeKey(t,e){return ur(Es,t,e)},subscribe(t){return lr(Es,()=>t(Es))},setWalletImage(t,e){Es.walletImages[t]=e},setNetworkImage(t,e){Es.networkImages[t]=e},setChainImage(t,e){Es.chainImages[t]=e},setConnectorImage(t,e){Es.connectorImages={...Es.connectorImages,[t]:e}},setTokenImage(t,e){Es.tokenImages[t]=e},setCurrencyImage(t,e){Es.currencyImages[t]=e}},$i=qs(kX),OX={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},s_=Yt({networkImagePromises:{}}),Tj={async fetchWalletImage(t){if(t)return await Me._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(s_.networkImagePromises[t]||(s_.networkImagePromises[t]=Me._fetchNetworkImage(t)),await s_.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return $i.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return $i.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return $i.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return $i.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return $i.state.connectorImages[t.imageId]},getChainImage(t){return $i.state.networkImages[OX[t]]}},Oa=Yt({message:"",variant:"info",open:!1}),RX={state:Oa,subscribeKey(t,e){return ur(Oa,t,e)},open(t,e){const{debug:n}=ue.state,{shortMessage:r,longMessage:s}=t;n&&(Oa.message=r,Oa.variant=e,Oa.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Oa.open=!1,Oa.message="",Oa.variant="info"}},Sn=qs(RX),$X=De.getAnalyticsUrl(),DX=new Nm({baseUrl:$X,clientId:null}),jX=["MODAL_CREATED"],jo=Yt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Dt={state:jo,subscribe(t){return lr(jo,()=>t(jo))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ue.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=ye.state.address;if(jX.includes(t.data.event)||typeof window>"u")return;await DX.post({path:"/e",params:Dt.getSdkProperties(),body:{eventId:De.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),jo.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ee.HTTP_STATUS_CODES.FORBIDDEN&&!jo.reportedErrors.FORBIDDEN&&(Sn.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${tp()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),jo.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;jo.timestamp=Date.now(),jo.data=t,(e=ue.state.features)!=null&&e.analytics&&Dt._sendAnalyticsEvent(jo)}},UX=De.getApiUrl(),Gr=new Nm({baseUrl:UX,clientId:null}),LX=40,XN=4,MX=20,Xe=Yt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Me={state:Xe,subscribeKey(t,e){return ur(Xe,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ue.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ue.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Gr.baseUrl}/getWalletImage/${t}`,n=await Gr.getBlob({path:e,params:Me._getSdkProperties()});$i.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Gr.baseUrl}/public/getAssetImage/${t}`,n=await Gr.getBlob({path:e,params:Me._getSdkProperties()});$i.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Gr.baseUrl}/public/getAssetImage/${t}`,n=await Gr.getBlob({path:e,params:Me._getSdkProperties()});$i.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Gr.baseUrl}/public/getCurrencyImage/${t}`,n=await Gr.getBlob({path:e,params:Me._getSdkProperties()});$i.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Gr.baseUrl}/public/getTokenImage/${t}`,n=await Gr.getBlob({path:e,params:Me._getSdkProperties()});$i.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return De.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===po.COINBASE.id?!0:R.state.activeChain==="solana"&&(n.id===po.SOLFLARE.id||n.id===po.PHANTOM.id)):t},async fetchProjectConfig(){return(await Gr.get({path:"/appkit/v1/config",params:Me._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Gr.get({path:"/projects/v1/origins",params:Me._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ee.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ee.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=R.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!Tj.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Me._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=_e.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Me._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Me._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Me._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Me._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(po).map(o=>o.id));const r=await Gr.get({path:"/getWallets",params:{...Me._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Me._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ue.state;if(t!=null&&t.length){const e={...Me._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??XN,include:t},{data:n}=await Me.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Me._fetchWalletImage(i))),Xe.featured=r,Xe.allFeatured=r}},async fetchRecommendedWallets(){try{Xe.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ue.state,r=[...e??[],...n??[]].filter(Boolean),s=R.getRequestedCaipNetworkIds().join(","),i={page:1,entries:XN,include:t,exclude:r,chains:s},{data:o,count:a}=await Me.fetchWallets(i),c=ve.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Me._fetchWalletImage(d))),Xe.recommended=o,Xe.allRecommended=o,Xe.count=a??0}catch{}finally{Xe.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ue.state,s=R.getRequestedCaipNetworkIds().join(","),i=[...Xe.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:LX,include:e,exclude:i,chains:s},{data:a,count:c}=await Me.fetchWallets(o),l=a.slice(0,MX).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Me._fetchWalletImage(u))),Xe.wallets=De.uniqueBy([...Xe.wallets,...Me._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Xe.count=c>Xe.count?c:Xe.count,Xe.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Me.fetchWallets(e);n&&n.forEach(r=>{Xe.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ue.state,s=R.getRequestedCaipNetworkIds().join(",");Xe.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Me.fetchWallets(i);Dt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Me._fetchWalletImage(c)),De.wait(300)]),Xe.search=Me._filterOutExtensions(o)},initPromise(t,e){const n=Xe.promises[t];return n||(Xe.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Me.initPromise("connectorImages",Me.fetchConnectorImages),e&&Me.initPromise("featuredWallets",Me.fetchFeaturedWallets),n&&Me.initPromise("recommendedWallets",Me.fetchRecommendedWallets),r&&Me.initPromise("networkImages",Me.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ue.state.features)!=null&&t.analytics&&Me.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Gr.get({path:"/getAnalyticsConfig",params:Me._getSdkProperties()});ue.setFeatures({analytics:t})}catch{ue.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Xe.featured=Xe.allFeatured,Xe.recommended=Xe.allRecommended;return}const e=R.getRequestedCaipNetworkIds().join(",");Xe.featured=Xe.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Xe.recommended=Xe.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Xe.filteredWallets=Xe.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Xe.filteredWallets=[]},setFilterByNamespace(t){if(!t){Xe.featured=Xe.allFeatured,Xe.recommended=Xe.allRecommended;return}const e=R.getRequestedCaipNetworkIds().join(",");Xe.featured=Xe.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Xe.recommended=Xe.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Xe.filteredWallets=Xe.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Mt=Yt({view:"Connect",history:["Connect"],transactionStack:[]}),BX={state:Mt,subscribeKey(t,e){return ur(Mt,t,e)},pushTransactionStack(t){Mt.transactionStack.push(t)},popTransactionStack(t){const e=Mt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Ve.goBack();break;case"cancel":s==null||s(),Ve.goBack();break}},push(t,e){t!==Mt.view&&(Mt.view=t,Mt.history.push(t),Mt.data=e)},reset(t,e){Mt.view=t,Mt.history=[t],Mt.data=e},replace(t,e){Mt.history.at(-1)===t||(Mt.view=t,Mt.history[Mt.history.length-1]=t,Mt.data=e)},goBack(){var r;const t=R.state.activeCaipAddress,e=Ve.state.view==="ConnectingFarcaster",n=!t&&e;if(Mt.history.length>1){Mt.history.pop();const[s]=Mt.history.slice(-1);s&&(t&&s==="Connect"?Mt.view="Account":Mt.view=s)}else Pt.close();(r=Mt.data)!=null&&r.wallet&&(Mt.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){ye.setFarcasterUrl(void 0,R.state.activeChain);const a=_e.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=kg(ue.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Mt.history.length>1){Mt.history=Mt.history.slice(0,t+1);const[e]=Mt.history.slice(-1);e&&(Mt.view=e)}},goBackOrCloseModal(){Ve.state.history.length>1?Ve.goBack():Pt.close()}},Ve=qs(BX),Uo=Yt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),ax={state:Uo,subscribe(t){return lr(Uo,()=>t(Uo))},setThemeMode(t){Uo.themeMode=t;try{const e=_e.getAuthConnector();if(e){const n=ax.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:ia(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Uo.themeVariables={...Uo.themeVariables,...t};try{const e=_e.getAuthConnector();if(e){const n=ax.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:ia(Uo.themeVariables,Uo.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return kg(Uo)}},as=qs(ax),Nj={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},_t=Yt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...Nj},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),FX={state:_t,subscribe(t){return lr(_t,()=>{t(_t)})},subscribeKey(t,e){return ur(_t,t,e)},initialize(t){t.forEach(e=>{const n=ve.getConnectedConnectorId(e);n&&_e.setConnectorId(n,e)})},setActiveConnector(t){t&&(_t.activeConnector=pu(t))},setConnectors(t){t.filter(s=>!_t.allConnectors.some(i=>i.id===s.id&&_e.getConnectorName(i.name)===_e.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&_t.allConnectors.push(pu(s))});const n=_e.getEnabledNamespaces(),r=_e.getEnabledConnectors(n);_t.connectors=_e.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(_t.filterByNamespaceMap).forEach(e=>{_t.filterByNamespaceMap[e]=!1}),t.forEach(e=>{_t.filterByNamespaceMap[e]=!0}),_e.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){_t.filterByNamespaceMap[t]=e,_e.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=_e.getEnabledNamespaces(),e=_e.getEnabledConnectors(t),n=_e.areAllNamespacesEnabled();_t.connectors=_e.mergeMultiChainConnectors(e),n?Me.clearFilterByNamespaces():Me.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(_t.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return _t.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(_t.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=_e.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ee.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=_e.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ee.CONNECTOR_ID.AUTH){const s=t,i=kg(ue.state),o=as.getSnapshot().themeMode,a=as.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:ia(a,o)}),_e.setConnectors([t])}else _e.setConnectors([t])},getAuthConnector(t){var r;const e=t||R.state.activeChain,n=_t.connectors.find(s=>s.id===ee.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return _t.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return _t.allConnectors.find(e=>e.id===t)},getConnector(t,e){return _t.allConnectors.filter(r=>r.chain===R.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=kg(ue.state),r=as.getSnapshot().themeMode,s=as.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:ia(s,r)})},getConnectorsByNamespace(t){const e=_t.allConnectors.filter(n=>n.chain===t);return _e.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=_e.getConnector(t.id,t.rdns),n=R.state.activeChain;PX.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Ve.push("ConnectingExternal",{connector:e}):Ve.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?_e.getConnectorsByNamespace(t):_e.mergeMultiChainConnectors(_t.allConnectors)},setFilterByNamespace(t){_t.filterByNamespace=t,_t.connectors=_e.getConnectors(t),Me.setFilterByNamespace(t)},setConnectorId(t,e){t&&(_t.activeConnectorIds={..._t.activeConnectorIds,[e]:t},ve.setConnectedConnectorId(e,t))},removeConnectorId(t){_t.activeConnectorIds={..._t.activeConnectorIds,[t]:void 0},ve.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return _t.activeConnectorIds[t]},isConnected(t){return t?!!_t.activeConnectorIds[t]:Object.values(_t.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){_t.activeConnectorIds={...Nj}}},_e=qs(FX),Rg={getConnectionStatus(t,e){const n=_e.state.activeConnectorIds[e],r=ke.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===ee.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=ke.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=_e.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>_e.getConnectorById(a.connectorId)),o=Rg.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var xh={};const zX="https://secure.walletconnect.org/sdk",WX=(typeof process<"u"&&typeof xh<"u"?xh.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||zX,qX=(typeof process<"u"&&typeof xh<"u"?xh.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",HX=(typeof process<"u"&&typeof xh<"u"?xh.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Re={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Kn={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},VX=1e3,na={checkNamespaceConnectorId(t,e){return _e.getConnectorId(t)===e},isSocialProvider(t){return $t.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&_e.setActiveConnector(e),s==null||s(De.isMobile()&&t),r){const l=Pt.subscribeKey("open",u=>{u||(Ve.state.view!==r&&Ve.replace(r),l(),a(new Error("Modal closed")))})}const c=R.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Pt.close(),c(),o(Ns.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=R.subscribeKey("activeCaipAddress",s=>{s&&(Pt.close(),r(),e(Ns.parseCaipAddress(s)))});ke.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=ye.state.socialWindow,i=ye.state.socialProvider,o=!1,a=null;const c=R.subscribeKey("activeCaipAddress",l=>{l&&(e&&Pt.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===ee.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const m=_e.getAuthConnector();if(m&&!o){s&&(s.close(),ye.setSocialWindow(void 0,R.state.activeChain),s=ye.state.socialWindow),o=!0;const w=f.data.resultUri;if(i&&Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await m.provider.connectSocial(w),i){ve.setConnectedSocialProvider(i),await ke.connectExternal({id:m.id,type:m.type,socialUri:w},m.chain);const y=R.state.activeCaipAddress;if(!y){u(new Error("Failed to connect"));return}l(Ns.parseCaipAddress(y)),Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(ye.setSocialProvider(t,R.state.activeChain),i=ye.state.socialProvider,Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Pt.subscribeKey("open",m=>{!m&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=_e.getAuthConnector();if(p&&!ye.state.farcasterUrl)try{const{url:m}=await p.provider.getFarcasterUri();ye.setFarcasterUrl(m,R.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=_e.getAuthConnector();a=De.returnOpenHref(`${ee.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){ye.setSocialWindow(a,R.state.activeChain),s=ye.state.socialWindow,a.location.href=p;const m=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(m))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Pt.subscribeKey("open",c=>{c||(Ve.state.view!==e&&Ve.replace(e),a(),i(new Error("Modal closed")))})}const o=R.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Pt.close(),o(),s(Ns.parseCaipAddress(a)))})})},async updateEmail(){const t=ve.getConnectedConnectorId(R.state.activeChain),e=_e.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ee.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Ve.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Pt.close(),clearInterval(i),o(),r({email:a}))},VX),o=Pt.subscribeKey("open",a=>{a||(Ve.state.view!=="Connect"&&Ve.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return R.checkIfSmartAccountEnabled()&&((n=ye.state.preferredAccountTypes)==null?void 0:n[t])===Kn.ACCOUNT_TYPES.EOA}},bl=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Pn=Yt({...bl}),GX={state:Pn,subscribeKey(t,e){return ur(Pn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=De.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Pn.message=bl.message,Pn.variant=bl.variant,Pn.svg=bl.svg,Pn.open=bl.open,Pn.autoClose=bl.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=bl.autoClose}){Pn.open?(Pn.open=!1,setTimeout(()=>{Pn.message=t,Pn.variant=n,Pn.svg=e,Pn.open=!0,Pn.autoClose=r},150)):(Pn.message=t,Pn.variant=n,Pn.svg=e,Pn.open=!0,Pn.autoClose=r)}},ji=GX,qt=Yt({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),KX={state:qt,subscribe(t){return lr(qt,()=>t(qt))},setLastNetworkInView(t){qt.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");qt.loading=!0;try{const s=await qe.fetchTransactions({account:t,cursor:qt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=np.filterSpamTransactions(s.data),o=np.filterByConnectedChain(i),a=[...qt.transactions,...o];qt.loading=!1,e==="coinbase"?qt.coinbaseTransactions=np.groupTransactionsByYearAndMonth(qt.coinbaseTransactions,s.data):(qt.transactions=a,qt.transactionsByYear=np.groupTransactionsByYearAndMonth(qt.transactionsByYear,o)),qt.empty=a.length===0,qt.next=s.next?s.next:void 0}catch{const i=R.state.activeChain;Dt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ue.state.projectId,cursor:qt.next,isSmartAccount:((r=ye.state.preferredAccountTypes)==null?void 0:r[i])===Kn.ACCOUNT_TYPES.SMART_ACCOUNT}}),ji.showError("Failed to fetch transactions"),qt.loading=!1,qt.empty=!0,qt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=R.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){qt.next=void 0},resetTransactions(){qt.transactions=[],qt.transactionsByYear={},qt.lastNetworkInView=void 0,qt.loading=!1,qt.empty=!1,qt.next=void 0}},np=qs(KX,"API_ERROR"),mt=Yt({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let dl;const YX={state:mt,subscribe(t){return lr(mt,()=>t(mt))},subscribeKey(t,e){return ur(mt,t,e)},_getClient(){return mt._client},setClient(t){mt._client=pu(t)},initialize(t){const e=ve.getConnections();for(const n of t){const r=n.namespace;if(r){const s=mt.connections.get(r)??[],i=e[r]??[],o=[...s,...i];mt.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(De.isTelegram()||De.isSafari()&&De.isIos()){if(dl){await dl,dl=void 0;return}if(!De.isPairingExpired(mt==null?void 0:mt.wcPairingExpiry)){const s=mt.wcUri;mt.wcUri=s;return}dl=(e=(t=ke._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ke.state.status="connecting",await dl,dl=void 0,mt.wcPairingExpiry=void 0,ke.state.status="connected"}else await((r=(n=ke._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=ke._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&R.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=ke._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||R.state.activeChain;e&&_e.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Pt.setLoading(!0,R.state.activeChain);const n=_e.getAuthConnector();n&&(ye.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),ve.setPreferredAccountTypes(ye.state.preferredAccountTypes??{[e]:t}),await ke.reconnectExternal(n),Pt.setLoading(!1,R.state.activeChain),Dt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=R.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ke._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ke._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ke._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ke._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ke._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ke._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ke._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ke._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ke._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ke._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ke._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ke._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){mt.wcUri=void 0,mt.wcPairingExpiry=void 0,mt.wcLinking=void 0,mt.recentWallet=void 0,mt.status="disconnected",np.resetTransactions(),ve.deleteWalletConnectDeepLink()},resetUri(){mt.wcUri=void 0,mt.wcPairingExpiry=void 0,dl=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=ke.state;t&&ve.setWalletConnectDeepLink(t),e&&ve.setAppKitRecent(e),Dt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Ve.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){mt.wcBasic=t},setUri(t){mt.wcUri=t,mt.wcPairingExpiry=De.getPairingExpiry()},setWcLinking(t){mt.wcLinking=t},setWcError(t){mt.wcError=t,mt.buffering=!1},setRecentWallet(t){mt.recentWallet=t},setBuffering(t){mt.buffering=t},setStatus(t){mt.status=t},setIsSwitchingConnection(t){mt.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=ke._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new Ch("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){mt.connections=new Map(mt.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&na.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await ke.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=_e.getConnectorById(t.connectorId),s=t.connectorId===ee.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await ke.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await ke.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=_e.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===ee.CONNECTOR_ID.AUTH,a=t.connectorId===ee.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&na.isSocialProvider(i)){const{address:d}=await na.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Pt.open({view:"ConnectingFarcaster"})},onConnect(){Ve.replace("ProfileWallets")}});c=d}else{const{address:d}=await na.connectEmail({closeModalOnConnect:r,onOpen(){Pt.open({view:"EmailLogin"})},onConnect(){Ve.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await na.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Pt.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Ve.replace("ProfileWallets")}});c=d}else{const d=await ke.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await ke.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){Rg.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=ye.getCaipAddress(n);if(o){const{address:c}=Ns.parseCaipAddress(o);i=c}const a=Rg.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await ke.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ke.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},ke=qs(YX),Gu=Yt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Eo={state:Gu,subscribe(t){return lr(Gu,()=>t(Gu))},subscribeOpen(t){return ur(Gu,"open",t)},set(t){Object.assign(Gu,{...Gu,...t})}};function QX(t){const e=Array.from(R.state.chains.keys());let n=[];return t?(n.push([t,R.state.chains.get(t)]),na.checkNamespaceConnectorId(t,ee.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&na.checkNamespaceConnectorId(r,ee.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,R.state.chains.get(r)])}):na.checkNamespaceConnectorId(t,ee.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&na.checkNamespaceConnectorId(r,ee.CONNECTOR_ID.AUTH)&&n.push([r,R.state.chains.get(r)])})):n=Array.from(R.state.chains.entries()),n}function Pj(){var r,s;const t=((r=R.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=R.state.activeCaipNetwork)==null?void 0:s.id)||1,n=$t.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const JX={async getTokenList(){var r;const t=R.state.activeCaipNetwork,e=await qe.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=R.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(ke==null?void 0:ke.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await qe.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await qe.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=ke.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await f2.getMyTokensWithBalance(t);return ye.setTokenBalance(e,R.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Pj(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Rt=Yt({tokenBalances:[],loading:!1}),ZX={state:Rt,subscribe(t){return lr(Rt,()=>t(Rt))},subscribeKey(t,e){return ur(Rt,t,e)},setToken(t){t&&(Rt.token=pu(t))},setTokenAmount(t){Rt.sendTokenAmount=t},setReceiverAddress(t){Rt.receiverAddress=t},setReceiverProfileImageUrl(t){Rt.receiverProfileImageUrl=t},setReceiverProfileName(t){Rt.receiverProfileName=t},setNetworkBalanceInUsd(t){Rt.networkBalanceInUSD=t},setLoading(t){Rt.loading=t},async sendToken(){var t;try{switch(It.setLoading(!0),(t=R.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await It.sendEvmToken();return;case"solana":await It.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{It.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=R.state.activeChain,e=(n=ye.state.preferredAccountTypes)==null?void 0:n[t];if(!It.state.sendTokenAmount||!It.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!It.state.token)throw new Error("A token is required");(r=It.state.token)!=null&&r.address?(Dt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Kn.ACCOUNT_TYPES.SMART_ACCOUNT,token:It.state.token.address,amount:It.state.sendTokenAmount,network:((s=R.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await It.sendERC20Token({receiverAddress:It.state.receiverAddress,tokenAddress:It.state.token.address,sendTokenAmount:It.state.sendTokenAmount,decimals:It.state.token.quantity.decimals})):(Dt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Kn.ACCOUNT_TYPES.SMART_ACCOUNT,token:It.state.token.symbol||"",amount:It.state.sendTokenAmount,network:((i=R.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await It.sendNativeToken({receiverAddress:It.state.receiverAddress,sendTokenAmount:It.state.sendTokenAmount,decimals:It.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Rt.loading=!0;const e=(i=R.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=R.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=R.state.activeCaipAddress,s=r?De.getPlainAddress(r):void 0;if(Rt.lastRetry&&!De.isAllowedRetry(Rt.lastRetry,30*$t.ONE_SEC_MS))return Rt.loading=!1,[];try{if(s&&e&&n){const a=await f2.getMyTokensWithBalance();return Rt.tokenBalances=a,Rt.lastRetry=void 0,a}}catch(a){Rt.lastRetry=Date.now(),t==null||t(a),ji.showError("Token Balance Unavailable")}finally{Rt.loading=!1}return[]},fetchNetworkBalance(){if(Rt.tokenBalances.length===0)return;const t=JX.mapBalancesToSwapTokens(Rt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Pj());e&&(Rt.networkBalanceInUSD=e?wX.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Ve.pushTransactionStack({});const e=t.receiverAddress,n=ye.state.address,r=ke.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ke.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),Dt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=ye.state.preferredAccountTypes)==null?void 0:i.eip155)===Kn.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=It.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=R.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=ke._getClient())==null||c.updateBalance("eip155"),It.resetSend()},async sendERC20Token(t){Ve.pushTransactionStack({onSuccess(){Ve.replace("Account")}});const e=ke.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(ye.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=De.getPlainAddress(t.tokenAddress);await ke.writeContract({fromAddress:ye.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:EX.getERC20Abi(n),chainNamespace:"eip155"}),It.resetSend()}},async sendSolanaToken(){var t;if(!It.state.sendTokenAmount||!It.state.receiverAddress)throw new Error("An amount and receiver address are required");Ve.pushTransactionStack({onSuccess(){Ve.replace("Account")}}),await ke.sendTransaction({chainNamespace:"solana",to:It.state.receiverAddress,value:It.state.sendTokenAmount}),(t=ke._getClient())==null||t.updateBalance("solana"),It.resetSend()},resetSend(){Rt.token=void 0,Rt.sendTokenAmount=void 0,Rt.receiverAddress=void 0,Rt.receiverProfileImageUrl=void 0,Rt.receiverProfileName=void 0,Rt.loading=!1,Rt.tokenBalances=[]}},It=qs(ZX),i_={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},$y={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},xe=Yt({chains:lX(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),XX={state:xe,subscribe(t){return lr(xe,()=>{t(xe)})},subscribeKey(t,e){return ur(xe,t,e)},subscribeChainProp(t,e,n){let r;return lr(xe.chains,()=>{var i;const s=n||xe.activeChain;if(s){const o=(i=xe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=ve.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ue.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(xe.noAdapters=!0),xe.noAdapters||(xe.activeChain=a==null?void 0:a.namespace,xe.activeCaipNetwork=i,R.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),xe.activeChain&&Eo.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);R.state.chains.set(u,{namespace:u,networkState:Yt({...$y,caipNetwork:d==null?void 0:d[0]}),accountState:Yt(i_),caipNetworks:d??[],...n}),R.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(xe.activeChain===t){const r=Array.from(xe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&R.setActiveCaipNetwork(s)}}xe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){xe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...$y,caipNetwork:r[0]},accountState:i_,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),R.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=xe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),xe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),R.setRequestedCaipNetworks(r,t.chainNamespace),_e.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=xe.chains.get(t);if(n){const o=((r=xe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&R.setActiveCaipNetwork(n.caipNetworks[0]),xe.chains.set(t,{...n,caipNetworks:a}),R.setRequestedCaipNetworks(a||[],t),a.length===0&&_e.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=xe.chains.get(t);n&&(n.networkState={...n.networkState||$y,...e},xe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=xe.chains.get(t);if(r){const s={...r.accountState||i_,...e};xe.chains.set(t,{...r,accountState:s}),(xe.chains.size===1||xe.activeChain===t)&&(e.caipAddress&&(xe.activeCaipAddress=e.caipAddress),ye.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=xe.chains.get(t);if(n){const r={...n.networkState||$y,...e};xe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){R.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&_e.removeConnectorId(n)},setActiveNamespace(t){var r,s;xe.activeChain=t;const e=t?xe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(xe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,xe.activeCaipNetwork=n,R.setChainNetworkData(t,{caipNetwork:n}),ve.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Eo.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;xe.activeChain!==t.chainNamespace&&R.setIsSwitchingNamespace(!0);const e=xe.chains.get(t.chainNamespace);xe.activeChain=t.chainNamespace,xe.activeCaipNetwork=t,R.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?xe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:xe.activeCaipAddress=void 0,R.setAccountProp("caipAddress",xe.activeCaipAddress,t.chainNamespace),e&&ye.replaceState(e.accountState),It.resetSend(),Eo.set({activeChain:xe.activeChain,selectedNetworkId:(i=xe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),ve.setActiveCaipNetworkId(t.caipNetworkId),!R.checkIfSupportedNetwork(t.chainNamespace)&&ue.state.enableNetworkSwitch&&!ue.state.allowUnsupportedChain&&!ke.state.wcBasic&&R.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=xe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==R.state.activeChain,n=(s=R.getNetworkData(t))==null?void 0:s.caipNetwork,r=R.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await R.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=R.state.chains.get(R.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=xe.activeCaipNetwork)==null?void 0:o.id)})),r=R.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Pt.close()}catch{Ve.goBack()}Dt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||xe.activeChain,n=xe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||xe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=xe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=xe.activeChain;if(e&&(n=e),!n)return;const r=(s=xe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=xe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=xe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return De.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return xe.chains.forEach(e=>{const n=R.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){R.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=R.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));_e.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return xe.chains.forEach(e=>{const n=R.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return xe.activeCaipNetwork},getActiveCaipAddress(){return xe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=xe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=R.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());R.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||xe.activeCaipNetwork,r=R.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!xe.activeChain)return!0;const e=R.getRequestedCaipNetworks(xe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){R.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=Og.caipNetworkIdToNumber((r=xe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=xe.activeChain;if(!e||!t)return!1;const n=R.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Pt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=xe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&$t.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){R.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");xe.activeCaipAddress=void 0,R.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),_e.removeConnectorId(e)},setIsSwitchingNamespace(t){xe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(xe.chains.forEach(s=>{ee.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=xe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=R.state.chains.get(t))==null?void 0:e.accountState:ye.state},getNetworkData(t){var n;const e=t||xe.activeChain;if(e)return(n=R.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=R.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=_e.state.filterByNamespace;return(t?[xe.chains.get(t)]:Array.from(xe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?R.getRequestedCaipNetworks(t):R.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){xe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return xe.lastConnectedSIWECaipNetwork}},R=qs(XX),eee={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},kj=De.getBlockchainApiUrl(),Kr=Yt({clientId:null,api:new Nm({baseUrl:kj,clientId:null}),supportedChains:{http:[],ws:[]}}),qe={state:Kr,async get(t){const{st:e,sv:n}=qe.getSdkProperties(),r=ue.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Kr.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ue.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Kr.supportedChains.http.length||await qe.getSupportedNetworks()}catch{return!1}return Kr.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await qe.get({path:"v1/supported-chains"});return Kr.supportedChains=t,t}catch{return Kr.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await qe.isNetworkSupported(e))return{avatar:"",name:""};const r=ve.getIdentityFromCacheForAddress(t);if(r)return r;const s=await qe.get({path:`/v1/identity/${t}`,params:{sender:R.state.activeCaipAddress?De.getPlainAddress(R.state.activeCaipAddress):void 0}});return ve.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await qe.isNetworkSupported((a=R.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?qe.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await qe.isNetworkSupported((o=R.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?qe.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await qe.isNetworkSupported((n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await qe.isNetworkSupported((n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Kr.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ue.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await qe.isNetworkSupported((r=R.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?qe.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=qe.getSdkProperties();if(!await qe.isNetworkSupported((s=R.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return qe.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await qe.isNetworkSupported((o=R.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Kr.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:$t.CONVERT_SLIPPAGE_TOLERANCE},projectId:ue.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=qe.getSdkProperties();if(!await qe.isNetworkSupported((o=R.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return qe.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=qe.getSdkProperties();if(!await qe.isNetworkSupported((l=R.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return ji.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=ve.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await qe.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return ve.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await qe.isNetworkSupported((n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await qe.isNetworkSupported((n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/profile/reverse/${t}`,params:{sender:ye.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await qe.isNetworkSupported((n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await qe.isNetworkSupported((i=R.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Kr.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await qe.isNetworkSupported((a=R.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Kr.api.post({path:"/v1/generators/onrampurl",params:{projectId:ue.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await qe.isNetworkSupported((e=R.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await qe.get({path:"/v1/onramp/options"})}catch{return eee}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await qe.isNetworkSupported((s=R.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Kr.api.post({path:"/v1/onramp/quote",params:{projectId:ue.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await qe.isNetworkSupported((n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qe.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await qe.isNetworkSupported((s=R.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Kr.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ue.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Kr.clientId=t,Kr.api=new Nm({baseUrl:kj,clientId:t})}},o_={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Lh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},f2={async getMyTokensWithBalance(t){const e=ye.state.address,n=R.state.activeCaipNetwork,r=_e.getConnectorId("eip155")===ee.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=ve.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await qe.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=o_.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ke.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ke.walletGetAssets({account:t,chainFilter:[s]});if(!o_.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>o_.createBalance(l,e.caipNetworkId));return ve.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Gs=Yt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),tee={state:Gs,replaceState(t){t&&Object.assign(Gs,pu(t))},subscribe(t){return R.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return R.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){R.setAccountProp("status",t,e)},getCaipAddress(t){return R.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?De.getPlainAddress(t):void 0;e===R.state.activeChain&&(R.state.activeCaipAddress=t),R.setAccountProp("caipAddress",t,e),R.setAccountProp("address",n,e)},setBalance(t,e,n){R.setAccountProp("balance",t,n),R.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){R.setAccountProp("profileName",t,e)},setProfileImage(t,e){R.setAccountProp("profileImage",t,e)},setUser(t,e){R.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){R.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){R.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){R.setAccountProp("currentTab",t,R.state.activeChain)},setTokenBalance(t,e){t&&R.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){R.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){R.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=R.getAccountProp("addressLabels",n)||new Map;r.set(t,e),R.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=R.getAccountProp("addressLabels",e)||new Map;n.delete(t),R.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){R.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){R.setAccountProp("preferredAccountTypes",{...Gs.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Gs.preferredAccountTypes=t},setSocialProvider(t,e){t&&R.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){R.setAccountProp("socialWindow",t?pu(t):void 0,e)},setFarcasterUrl(t,e){R.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Gs.balanceLoading=!0;const e=(i=R.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=R.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=R.state.activeCaipAddress,s=r?De.getPlainAddress(r):void 0;if(Gs.lastRetry&&!De.isAllowedRetry(Gs.lastRetry,30*$t.ONE_SEC_MS))return Gs.balanceLoading=!1,[];try{if(s&&e&&n){const a=await f2.getMyTokensWithBalance();return ye.setTokenBalance(a,n),Gs.lastRetry=void 0,Gs.balanceLoading=!1,a}}catch(a){Gs.lastRetry=Date.now(),t==null||t(a),ji.showError("Token Balance Unavailable")}finally{Gs.balanceLoading=!1}return[]},resetAccount(t){R.resetAccount(t)}},ye=qs(tee),nee={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=R.state.activeCaipNetwork,r=Ve.state.data;if(t.id===(n==null?void 0:n.id))return;const i=ye.getCaipAddress(R.state.activeChain),o=t.chainNamespace!==R.state.activeChain,a=ye.getCaipAddress(t.chainNamespace),l=_e.getConnectorId(R.state.activeChain)===ee.CONNECTOR_ID.AUTH,u=ee.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Ve.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Ve.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ve.push("SwitchNetwork",{...r,network:t})}},Yr=Yt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),ree={state:Yr,subscribe(t){return lr(Yr,()=>t(Yr))},subscribeKey(t,e){return ur(Yr,t,e)},async open(t){var o,a;const e=ye.state.status==="connected",n=t==null?void 0:t.namespace,r=R.state.activeChain,s=n&&n!==r,i=(o=R.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(ke.state.wcBasic?Me.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Me.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),_e.setFilterByNamespace(t==null?void 0:t.namespace),Pt.setLoading(!0,n),n&&s){const c=((a=R.getNetworkData(n))==null?void 0:a.caipNetwork)||R.getRequestedCaipNetworks(n)[0];c&&nee.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=R.state.noAdapters;ue.state.manualWCControl||c&&!i?De.isMobile()?Ve.reset("AllWallets"):Ve.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Ve.reset(t.view,t.data):i?Ve.reset("Account"):Ve.reset("Connect")}Yr.open=!0,Eo.set({open:!0}),Dt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ue.state.enableEmbedded,e=!!R.state.activeCaipAddress;Yr.open&&Dt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Yr.open=!1,Ve.reset("Connect"),Pt.clearLoading(),t?e?Ve.replace("Account"):Ve.push("Connect"):Eo.set({open:!1}),ke.resetUri()},setLoading(t,e){e&&Yr.loadingNamespaceMap.set(e,t),Yr.loading=t,Eo.set({loading:t})},clearLoading(){Yr.loadingNamespaceMap.clear(),Yr.loading=!1},shake(){Yr.shake||(Yr.shake=!0,setTimeout(()=>{Yr.shake=!1},500))}},Pt=qs(ree),Ep={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},cx={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},see={providers:Ij,selectedProvider:null,error:null,purchaseCurrency:Ep,paymentCurrency:cx,purchaseCurrencies:[Ep],paymentCurrencies:[],quotesLoading:!1},yt=Yt(see),iee={state:yt,subscribe(t){return lr(yt,()=>t(yt))},subscribeKey(t,e){return ur(yt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=R.state.activeChain===ee.CHAIN.SOLANA?"SOL":"USDC",n=ye.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",CX),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ue.state.projectId),yt.selectedProvider={...t,url:r.toString()}}else yt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=Ij.filter(r=>e.includes(r.name));yt.providers=n}else yt.providers=[]},setPurchaseCurrency(t){yt.purchaseCurrency=t},setPaymentCurrency(t){yt.paymentCurrency=t},setPurchaseAmount(t){lx.state.purchaseAmount=t},setPaymentAmount(t){lx.state.paymentAmount=t},async getAvailableCurrencies(){const t=await qe.getOnrampOptions();yt.purchaseCurrencies=t.purchaseCurrencies,yt.paymentCurrencies=t.paymentCurrencies,yt.paymentCurrency=t.paymentCurrencies[0]||cx,yt.purchaseCurrency=t.purchaseCurrencies[0]||Ep,await Me.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Me.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;yt.quotesLoading=!0;try{const n=await qe.getOnrampQuote({purchaseCurrency:yt.purchaseCurrency,paymentCurrency:yt.paymentCurrency,amount:((t=yt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=yt.purchaseCurrency)==null?void 0:e.symbol});return yt.quotesLoading=!1,yt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return yt.error=n.message,yt.quotesLoading=!1,null}finally{yt.quotesLoading=!1}},resetState(){yt.selectedProvider=null,yt.error=null,yt.purchaseCurrency=Ep,yt.paymentCurrency=cx,yt.purchaseCurrencies=[Ep],yt.paymentCurrencies=[],yt.paymentAmount=void 0,yt.purchaseAmount=void 0,yt.quotesLoading=!1}},lx=qs(iee),eP=2147483648,oee={convertEVMChainIdToCoinType(t){if(t>=eP)throw new Error("Invalid chainId");return(eP|t)>>>0}},Ks=Yt({suggestions:[],loading:!1}),aee={state:Ks,subscribe(t){return lr(Ks,()=>t(Ks))},subscribeKey(t,e){return ur(Ks,t,e)},async resolveName(t){var e,n;try{return await qe.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await qe.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ks.loading=!0,Ks.suggestions=[];const e=await qe.getEnsNameSuggestions(t);return Ks.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Ks.suggestions}catch(e){const n=Cp.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Ks.loading=!1}},async getNamesForAddress(t){try{if(!R.state.activeCaipNetwork)return[];const n=ve.getEnsFromCacheForAddress(t);if(n)return n;const r=await qe.reverseLookupEnsName({address:t});return ve.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=Cp.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=R.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=ye.state.address,r=_e.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Ks.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ve.pushTransactionStack({onCancel(){Ve.replace("RegisterAccountName")}});const i=await ke.signMessage(s);Ks.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=oee.convertEVMChainIdToCoinType(Number(o));await qe.registerEnsName({coinType:a,address:n,signature:i,message:s}),ye.setProfileName(t,e.chainNamespace),Ve.replace("RegisterAccountNameSuccess")}catch(s){const i=Cp.parseEnsApiError(s,`Error registering name ${t}`);throw Ve.replace("RegisterAccountName"),new Error(i)}finally{Ks.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},Cp=qs(aee);var p2={exports:{}},Gd=typeof Reflect=="object"?Reflect:null,tP=Gd&&typeof Gd.apply=="function"?Gd.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},kw;Gd&&typeof Gd.ownKeys=="function"?kw=Gd.ownKeys:Object.getOwnPropertySymbols?kw=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:kw=function(e){return Object.getOwnPropertyNames(e)};function cee(t){console&&console.warn&&console.warn(t)}var Oj=Number.isNaN||function(e){return e!==e};function zt(){zt.init.call(this)}p2.exports=zt;p2.exports.once=hee;zt.EventEmitter=zt;zt.prototype._events=void 0;zt.prototype._eventsCount=0;zt.prototype._maxListeners=void 0;var nP=10;function Qv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(zt,"defaultMaxListeners",{enumerable:!0,get:function(){return nP},set:function(t){if(typeof t!="number"||t<0||Oj(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");nP=t}});zt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};zt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Oj(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Rj(t){return t._maxListeners===void 0?zt.defaultMaxListeners:t._maxListeners}zt.prototype.getMaxListeners=function(){return Rj(this)};zt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")tP(c,this,n);else for(var l=c.length,u=Lj(c,l),r=0;r<l;++r)tP(u[r],this,n);return!0};function $j(t,e,n,r){var s,i,o;if(Qv(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=Rj(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,cee(a)}return t}zt.prototype.addListener=function(e,n){return $j(this,e,n,!1)};zt.prototype.on=zt.prototype.addListener;zt.prototype.prependListener=function(e,n){return $j(this,e,n,!0)};function lee(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Dj(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=lee.bind(r);return s.listener=n,r.wrapFn=s,s}zt.prototype.once=function(e,n){return Qv(n),this.on(e,Dj(this,e,n)),this};zt.prototype.prependOnceListener=function(e,n){return Qv(n),this.prependListener(e,Dj(this,e,n)),this};zt.prototype.removeListener=function(e,n){var r,s,i,o,a;if(Qv(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():uee(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};zt.prototype.off=zt.prototype.removeListener;zt.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function jj(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?dee(s):Lj(s,s.length)}zt.prototype.listeners=function(e){return jj(this,e,!0)};zt.prototype.rawListeners=function(e){return jj(this,e,!1)};zt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Uj.call(t,e)};zt.prototype.listenerCount=Uj;function Uj(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}zt.prototype.eventNames=function(){return this._eventsCount>0?kw(this._events):[]};function Lj(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function uee(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function dee(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function hee(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}Mj(t,e,i,{once:!0}),e!=="error"&&fee(t,s,{once:!0})})}function fee(t,e,n){typeof t.on=="function"&&Mj(t,"error",e,n)}function Mj(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var fi=p2.exports;const g2=Su(fi);var ge={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ux=function(t,e){return ux=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},ux(t,e)};function pee(t,e){ux(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var dx=function(){return dx=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},dx.apply(this,arguments)};function gee(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function mee(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function yee(t,e){return function(n,r){e(n,r,t)}}function wee(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function vee(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function bee(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function _ee(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Eee(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function hx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bj(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Cee(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Bj(arguments[e]));return t}function xee(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function $g(t){return this instanceof $g?(this.v=t,this):new $g(t)}function See(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,m){i.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof $g?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Aee(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:$g(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Iee(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof hx=="function"?hx(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Tee(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Nee(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Pee(t){return t&&t.__esModule?t:{default:t}}function kee(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Oee(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Ree=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return dx},__asyncDelegator:Aee,__asyncGenerator:See,__asyncValues:Iee,__await:$g,__awaiter:vee,__classPrivateFieldGet:kee,__classPrivateFieldSet:Oee,__createBinding:_ee,__decorate:mee,__exportStar:Eee,__extends:pee,__generator:bee,__importDefault:Pee,__importStar:Nee,__makeTemplateObject:Tee,__metadata:wee,__param:yee,__read:Bj,__rest:gee,__spread:Cee,__spreadArrays:xee,__values:hx},Symbol.toStringTag,{value:"Module"})),Jv=rv(Ree);var a_={},Tf={},rP;function $ee(){if(rP)return Tf;rP=1,Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Tf.delay=t,Tf}var hl={},c_={},fl={},sP;function Dee(){return sP||(sP=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.ONE_THOUSAND=fl.ONE_HUNDRED=void 0,fl.ONE_HUNDRED=100,fl.ONE_THOUSAND=1e3),fl}var l_={},iP;function jee(){return iP||(iP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(l_)),l_}var oP;function Fj(){return oP||(oP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Jv;e.__exportStar(Dee(),t),e.__exportStar(jee(),t)}(c_)),c_}var aP;function Uee(){if(aP)return hl;aP=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.fromMiliseconds=hl.toMiliseconds=void 0;const t=Fj();function e(r){return r*t.ONE_THOUSAND}hl.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return hl.fromMiliseconds=n,hl}var cP;function Lee(){return cP||(cP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Jv;e.__exportStar($ee(),t),e.__exportStar(Uee(),t)}(a_)),a_}var Ku={},lP;function Mee(){if(lP)return Ku;lP=1,Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Ku.Watch=t,Ku.default=t,Ku}var u_={},Nf={},uP;function Bee(){if(uP)return Nf;uP=1,Object.defineProperty(Nf,"__esModule",{value:!0}),Nf.IWatch=void 0;class t{}return Nf.IWatch=t,Nf}var dP;function Fee(){return dP||(dP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Jv.__exportStar(Bee(),t)}(u_)),u_}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Jv;e.__exportStar(Lee(),t),e.__exportStar(Mee(),t),e.__exportStar(Fee(),t),e.__exportStar(Fj(),t)})(ge);class Ru{}let zee=class extends Ru{constructor(e){super()}};const hP=ge.FIVE_SECONDS,$u={pulse:"heartbeat_pulse"};let Wee=class zj extends zee{constructor(e){super(e),this.events=new fi.EventEmitter,this.interval=hP,this.interval=(e==null?void 0:e.interval)||hP}static async init(e){const n=new zj(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ge.toMiliseconds(this.interval))}pulse(){this.events.emit($u.pulse)}};const qee=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Hee=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Vee=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Gee(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Kee(t);return}return e}function Kee(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Dy(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Vee.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(qee.test(t)||Hee.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Gee)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Yee(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Fn(t,...e){try{return Yee(t(...e))}catch(n){return Promise.reject(n)}}function Qee(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Jee(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Ow(t){if(Qee(t))return String(t);if(Jee(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Ow(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const fx="base64:";function Zee(t){return typeof t=="string"?t:fx+tte(t)}function Xee(t){return typeof t!="string"||!t.startsWith(fx)?t:ete(t.slice(fx.length))}function ete(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function tte(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ns(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function nte(...t){return ns(t.join(":"))}function jy(t){return t=ns(t),t?t+":":""}function rte(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function ste(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const ite="memory",ote=()=>{const t=new Map;return{name:ite,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function ate(t={}){const e={mounts:{"":t.driver||ote()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=ns(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await fP(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let m=h.get(p.base);return m||(m={driver:p.driver,base:p.base,items:[]},h.set(p.base,m)),m};for(const p of l){const m=typeof p=="string",w=ns(m?p:p.key),y=m?void 0:p.value,b=m||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:y,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=ns(l);const{relativeKey:d,driver:h}=n(l);return Fn(h.hasItem,d,u)},getItem(l,u={}){l=ns(l);const{relativeKey:d,driver:h}=n(l);return Fn(h.getItem,d,u).then(f=>Dy(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Fn(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:nte(d.base,f.key),value:Dy(f.value)}))):Promise.all(d.items.map(h=>Fn(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:Dy(f)})))))},getItemRaw(l,u={}){l=ns(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Fn(h.getItemRaw,d,u):Fn(h.getItem,d,u).then(f=>Xee(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=ns(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Fn(f.setItem,h,Ow(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Fn(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Ow(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Fn(d.driver.setItem,h.relativeKey,Ow(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=ns(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Fn(f.setItemRaw,h,u,d);else if(f.setItem)await Fn(f.setItem,h,Zee(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=ns(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Fn(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Fn(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=ns(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Fn(h.getMeta,d,u)),!u.nativeOnly){const p=await Fn(h.getItem,d+"$",u).then(m=>Dy(m));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=jy(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await Fn(y.driver.getKeys,y.relativeBase,u);for(const v of b){const E=y.mountpoint+ns(v);h.some(_=>E.startsWith(_))||f.push(E)}h=[y.mountpoint,...h.filter(v=>!v.startsWith(y.mountpoint))]}const m=u.maxDepth!==void 0&&!p;return f.filter(y=>(!m||rte(y,u.maxDepth))&&ste(y,l))},async clear(l,u={}){l=jy(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Fn(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>pP(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=jy(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(fP(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=jy(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await pP(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=ns(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=ns(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function fP(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function pP(t){typeof t.dispose=="function"&&await Fn(t.dispose)}function Du(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Wj(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Du(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let d_;function Pm(){return d_||(d_=Wj("keyval-store","keyval")),d_}function gP(t,e=Pm()){return e("readonly",n=>Du(n.get(t)))}function cte(t,e,n=Pm()){return n("readwrite",r=>(r.put(e,t),Du(r.transaction)))}function lte(t,e=Pm()){return e("readwrite",n=>(n.delete(t),Du(n.transaction)))}function ute(t=Pm()){return t("readwrite",e=>(e.clear(),Du(e.transaction)))}function dte(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Du(t.transaction)}function hte(t=Pm()){return t("readonly",e=>{if(e.getAllKeys)return Du(e.getAllKeys());const n=[];return dte(e,r=>n.push(r.key)).then(()=>n)})}const fte=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),pte=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function mu(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return pte(t)}catch{return t}}function va(t){return typeof t=="string"?t:fte(t)||""}const gte="idb-keyval";var mte=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=Wj(t.dbName,t.storeName)),{name:gte,options:t,async hasItem(s){return!(typeof await gP(n(s),r)>"u")},async getItem(s){return await gP(n(s),r)??null},setItem(s,i){return cte(n(s),i,r)},removeItem(s){return lte(n(s),r)},getKeys(){return hte(r)},clear(){return ute(r)}}};const yte="WALLET_CONNECT_V2_INDEXED_DB",wte="keyvaluestorage";let vte=class{constructor(){this.indexedDb=ate({driver:mte({dbName:yte,storeName:wte})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,va(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var h_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rw={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof h_<"u"&&h_.localStorage?Rw.exports=h_.localStorage:typeof window<"u"&&window.localStorage?Rw.exports=window.localStorage:Rw.exports=new e})();function bte(t){var e;return[t[0],mu((e=t[1])!=null?e:"")]}let _te=class{constructor(){this.localStorage=Rw.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(bte)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return mu(n)}async setItem(e,n){this.localStorage.setItem(e,va(n))}async removeItem(e){this.localStorage.removeItem(e)}};const Ete="wc_storage_version",mP=1,Cte=async(t,e,n)=>{const r=Ete,s=await e.getItem(r);if(s&&s>=mP){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,mP),n(e),xte(t,o)},xte=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let Ste=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new _te;this.storage=e;try{const n=new vte;Cte(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function Ate(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var Ite=Tte;function Tte(t,e,n){var r=n&&n.stringify||Ate,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const yP=Ite;var wd=Co;const Dg=Lte().console||{},Nte={mapHttpRequest:Uy,mapHttpResponse:Uy,wrapRequestSerializer:f_,wrapResponseSerializer:f_,wrapErrorSerializer:f_,req:Uy,res:Uy,err:$te};function Pte(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Co(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||Dg;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Pte(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=jg),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:Dte(t)};c.levels=Co.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=jg,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=px());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Yu(l,c,"error","log"),Yu(l,c,"fatal","error"),Yu(l,c,"warn","error"),Yu(l,c,"info","log"),Yu(l,c,"debug","log"),Yu(l,c,"trace","log")}function f(p,m){if(!p)throw new Error("missing bindings for child Pino");m=m||{},s&&p.serializers&&(m.serializers=p.serializers);const w=m.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,Zv([p],b,y,this._stdErrSerialize)}function v(E){this._childLevel=(E._childLevel|0)+1,this.error=Qu(E,p,"error"),this.fatal=Qu(E,p,"fatal"),this.warn=Qu(E,p,"warn"),this.info=Qu(E,p,"info"),this.debug=Qu(E,p,"debug"),this.trace=Qu(E,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=px([].concat(E._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Co.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Co.stdSerializers=Nte;Co.stdTimeFunctions=Object.assign({},{nullTime:qj,epochTime:Hj,unixTime:jte,isoTime:Ute});function Yu(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?jg:s[n]?s[n]:Dg[n]||Dg[r]||jg,kte(t,e,n)}function kte(t,e,n){!t.transmit&&e[n]===jg||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Dg?Dg:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Zv(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,Ote(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Co.levels.values[l],d=Co.levels.values[n];if(d<u)return;Rte(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Co.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function Ote(t,e,n,r){t._serialize&&Zv(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Co.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?yP(s.shift(),s):void 0}else typeof i=="string"&&(i=yP(s.shift(),s));return i!==void 0&&(o.msg=i),o}function Zv(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Co.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Qu(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function Rte(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Zv(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=px(c)}function px(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function $te(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function Dte(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?qj:Hj}function Uy(){return{}}function f_(t){return t}function jg(){}function qj(){return!1}function Hj(){return Date.now()}function jte(){return Math.round(Date.now()/1e3)}function Ute(){return new Date(Date.now()).toISOString()}function Lte(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const km=Su(wd),Mte={level:"info"},Om="custom_context",m2=1e3*1024;let Bte=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},wP=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Bte(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},Vj=class{constructor(e,n=m2){this.level=e??"error",this.levelValue=wd.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new wP(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===wd.levels.values.error?console.error(e):n===wd.levels.values.warn?console.warn(e):n===wd.levels.values.debug?console.debug(e):n===wd.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(va({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new wP(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(va({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Fte=class{constructor(e,n=m2){this.baseChunkLogger=new Vj(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},zte=class{constructor(e,n=m2){this.baseChunkLogger=new Vj(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Wte=Object.defineProperty,qte=Object.defineProperties,Hte=Object.getOwnPropertyDescriptors,vP=Object.getOwnPropertySymbols,Vte=Object.prototype.hasOwnProperty,Gte=Object.prototype.propertyIsEnumerable,bP=(t,e,n)=>e in t?Wte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P0=(t,e)=>{for(var n in e||(e={}))Vte.call(e,n)&&bP(t,n,e[n]);if(vP)for(var n of vP(e))Gte.call(e,n)&&bP(t,n,e[n]);return t},k0=(t,e)=>qte(t,Hte(e));function Wh(t){return k0(P0({},t),{level:(t==null?void 0:t.level)||Mte.level})}function Kte(t,e=Om){return t[e]||""}function Yte(t,e,n=Om){return t[n]=e,t}function bs(t,e=Om){let n="";return typeof t.bindings>"u"?n=Kte(t,e):n=t.bindings().context||"",n}function Qte(t,e,n=Om){const r=bs(t,n);return r.trim()?`${r}/${e}`:e}function Pr(t,e,n=Om){const r=Qte(t,e,n),s=t.child({context:r});return Yte(s,r,n)}function Jte(t){var e,n;const r=new Fte((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:km(k0(P0({},t.opts),{level:"trace",browser:k0(P0({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Zte(t){var e;const n=new zte((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:km(k0(P0({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function y2(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Jte(t):Zte(t)}var Xte=Object.defineProperty,ene=(t,e,n)=>e in t?Xte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_P=(t,e,n)=>ene(t,typeof e!="symbol"?e+"":e,n);let tne=class extends Ru{constructor(e){super(),this.opts=e,_P(this,"protocol","wc"),_P(this,"version",2)}};var nne=Object.defineProperty,rne=(t,e,n)=>e in t?nne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sne=(t,e,n)=>rne(t,e+"",n);let ine=class extends Ru{constructor(e,n){super(),this.core=e,this.logger=n,sne(this,"records",new Map)}},one=class{constructor(e,n){this.logger=e,this.core=n}},ane=class extends Ru{constructor(e,n){super(),this.relayer=e,this.logger=n}},cne=class extends Ru{constructor(e){super()}},lne=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},une=class extends Ru{constructor(e,n){super(),this.relayer=e,this.logger=n}},dne=class extends Ru{constructor(e,n){super(),this.core=e,this.logger=n}},hne=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},fne=class{constructor(e,n){this.projectId=e,this.logger=n}},pne=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var gne=Object.defineProperty,mne=(t,e,n)=>e in t?gne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,EP=(t,e,n)=>mne(t,typeof e!="symbol"?e+"":e,n);let yne=class{constructor(e){this.opts=e,EP(this,"protocol","wc"),EP(this,"version",2)}},wne=class{constructor(e){this.client=e}};function vne(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Gj(t,...e){if(!vne(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function CP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function bne(t,e){Gj(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Ju=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const p_=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function _ne(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Kj(t){return typeof t=="string"&&(t=_ne(t)),Gj(t),t}let Ene=class{clone(){return this._cloneInto()}};function Cne(t){const e=r=>t().update(Kj(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Yj(t=32){if(Ju&&typeof Ju.getRandomValues=="function")return Ju.getRandomValues(new Uint8Array(t));if(Ju&&typeof Ju.randomBytes=="function")return Ju.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function xne(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Sne=class extends Ene{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=p_(this.buffer)}update(e){CP(this);const{view:n,buffer:r,blockLen:s}=this;e=Kj(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=p_(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){CP(this),bne(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;xne(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=p_(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Ly=BigInt(2**32-1),gx=BigInt(32);function Qj(t,e=!1){return e?{h:Number(t&Ly),l:Number(t>>gx&Ly)}:{h:Number(t>>gx&Ly)|0,l:Number(t&Ly)|0}}function Ane(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Qj(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Ine=(t,e)=>BigInt(t>>>0)<<gx|BigInt(e>>>0),Tne=(t,e,n)=>t>>>n,Nne=(t,e,n)=>t<<32-n|e>>>n,Pne=(t,e,n)=>t>>>n|e<<32-n,kne=(t,e,n)=>t<<32-n|e>>>n,One=(t,e,n)=>t<<64-n|e>>>n-32,Rne=(t,e,n)=>t>>>n-32|e<<64-n,$ne=(t,e)=>e,Dne=(t,e)=>t,jne=(t,e,n)=>t<<n|e>>>32-n,Une=(t,e,n)=>e<<n|t>>>32-n,Lne=(t,e,n)=>e<<n-32|t>>>64-n,Mne=(t,e,n)=>t<<n-32|e>>>64-n;function Bne(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Fne=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),zne=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Wne=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),qne=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Hne=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Vne=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,it={fromBig:Qj,split:Ane,toBig:Ine,shrSH:Tne,shrSL:Nne,rotrSH:Pne,rotrSL:kne,rotrBH:One,rotrBL:Rne,rotr32H:$ne,rotr32L:Dne,rotlSH:jne,rotlSL:Une,rotlBH:Lne,rotlBL:Mne,add:Bne,add3L:Fne,add3H:zne,add4L:Wne,add4H:qne,add5H:Vne,add5L:Hne},[Gne,Kne]=it.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ra=new Uint32Array(80),$a=new Uint32Array(80);let Yne=class extends Sne{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Ra[v]=e.getUint32(n),$a[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const E=Ra[v-15]|0,_=$a[v-15]|0,S=it.rotrSH(E,_,1)^it.rotrSH(E,_,8)^it.shrSH(E,_,7),x=it.rotrSL(E,_,1)^it.rotrSL(E,_,8)^it.shrSL(E,_,7),A=Ra[v-2]|0,C=$a[v-2]|0,k=it.rotrSH(A,C,19)^it.rotrBH(A,C,61)^it.shrSH(A,C,6),O=it.rotrSL(A,C,19)^it.rotrBL(A,C,61)^it.shrSL(A,C,6),M=it.add4L(x,O,$a[v-7],$a[v-16]),F=it.add4H(M,S,k,Ra[v-7],Ra[v-16]);Ra[v]=F|0,$a[v]=M|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const E=it.rotrSH(d,h,14)^it.rotrSH(d,h,18)^it.rotrBH(d,h,41),_=it.rotrSL(d,h,14)^it.rotrSL(d,h,18)^it.rotrBL(d,h,41),S=d&f^~d&m,x=h&p^~h&w,A=it.add5L(b,_,x,Kne[v],$a[v]),C=it.add5H(A,y,E,S,Gne[v],Ra[v]),k=A|0,O=it.rotrSH(r,s,28)^it.rotrBH(r,s,34)^it.rotrBH(r,s,39),M=it.rotrSL(r,s,28)^it.rotrBL(r,s,34)^it.rotrBL(r,s,39),F=r&i^r&a^i&a,V=s&o^s&c^o&c;y=m|0,b=w|0,m=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=it.add(l|0,u|0,C|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const N=it.add3L(k,M,V);r=it.add3H(N,C,O,F),s=N|0}({h:r,l:s}=it.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=it.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=it.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=it.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=it.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=it.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:w}=it.add(this.Gh|0,this.Gl|0,m|0,w|0),{h:y,l:b}=it.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,m,w,y,b)}roundClean(){Ra.fill(0),$a.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Qne=Cne(()=>new Yne);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const w2=BigInt(0),Jj=BigInt(1),Jne=BigInt(2);function v2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function b2(t){if(!v2(t))throw new Error("Uint8Array expected")}function g_(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Zne=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _2(t){b2(t);let e="";for(let n=0;n<t.length;n++)e+=Zne[t[n]];return e}function Zj(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?w2:BigInt("0x"+t)}const Lo={_0:48,_9:57,A:65,F:70,a:97,f:102};function xP(t){if(t>=Lo._0&&t<=Lo._9)return t-Lo._0;if(t>=Lo.A&&t<=Lo.F)return t-(Lo.A-10);if(t>=Lo.a&&t<=Lo.f)return t-(Lo.a-10)}function Xj(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=xP(t.charCodeAt(i)),a=xP(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Xne(t){return Zj(_2(t))}function $w(t){return b2(t),Zj(_2(Uint8Array.from(t).reverse()))}function e6(t,e){return Xj(t.toString(16).padStart(e*2,"0"))}function mx(t,e){return e6(t,e).reverse()}function Mo(t,e,n){let r;if(typeof e=="string")try{r=Xj(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(v2(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function SP(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];b2(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const m_=t=>typeof t=="bigint"&&w2<=t;function ere(t,e,n){return m_(t)&&m_(e)&&m_(n)&&e<=t&&t<n}function Pf(t,e,n,r){if(!ere(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function tre(t){let e;for(e=0;t>w2;t>>=Jj,e+=1);return e}const nre=t=>(Jne<<BigInt(t-1))-Jj,rre={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||v2(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function E2(t,e,n={}){const r=(s,i,o)=>{const a=rre[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function AP(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Vn=BigInt(0),bn=BigInt(1),xl=BigInt(2),sre=BigInt(3),yx=BigInt(4),IP=BigInt(5),TP=BigInt(8);function Dn(t,e){const n=t%e;return n>=Vn?n:e+n}function ire(t,e,n){if(e<Vn)throw new Error("invalid exponent, negatives unsupported");if(n<=Vn)throw new Error("invalid modulus");if(n===bn)return Vn;let r=bn;for(;e>Vn;)e&bn&&(r=r*t%n),t=t*t%n,e>>=bn;return r}function to(t,e,n){let r=t;for(;e-- >Vn;)r*=r,r%=n;return r}function NP(t,e){if(t===Vn)throw new Error("invert: expected non-zero number");if(e<=Vn)throw new Error("invert: expected positive modulus, got "+e);let n=Dn(t,e),r=e,s=Vn,i=bn;for(;n!==Vn;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==bn)throw new Error("invert: does not exist");return Dn(s,e)}function ore(t){const e=(t-bn)/xl;let n,r,s;for(n=t-bn,r=0;n%xl===Vn;n/=xl,r++);for(s=xl;s<t&&ire(s,e,t)!==t-bn;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+bn)/yx;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+bn)/xl;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,bn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function are(t){if(t%yx===sre){const e=(t+bn)/yx;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%TP===IP){const e=(t-IP)/TP;return function(n,r){const s=n.mul(r,xl),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,xl),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return ore(t)}const cre=(t,e)=>(Dn(t,e)&bn)===bn,lre=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ure(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=lre.reduce((r,s)=>(r[s]="function",r),e);return E2(t,n)}function dre(t,e,n){if(n<Vn)throw new Error("invalid exponent, negatives unsupported");if(n===Vn)return t.ONE;if(n===bn)return e;let r=t.ONE,s=e;for(;n>Vn;)n&bn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=bn;return r}function hre(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function t6(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function n6(t,e,n=!1,r={}){if(t<=Vn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=t6(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:nre(s),ZERO:Vn,ONE:bn,create:c=>Dn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Vn<=c&&c<t},is0:c=>c===Vn,isOdd:c=>(c&bn)===bn,neg:c=>Dn(-c,t),eql:(c,l)=>c===l,sqr:c=>Dn(c*c,t),add:(c,l)=>Dn(c+l,t),sub:(c,l)=>Dn(c-l,t),mul:(c,l)=>Dn(c*l,t),pow:(c,l)=>dre(a,c,l),div:(c,l)=>Dn(c*NP(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>NP(c,t),sqrt:r.sqrt||(c=>(o||(o=are(t)),o(a,c))),invertBatch:c=>hre(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?mx(c,i):e6(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?$w(c):Xne(c)}});return Object.freeze(a)}const PP=BigInt(0),My=BigInt(1);function y_(t,e){const n=e.negate();return t?n:e}function r6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function w_(t,e){r6(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function fre(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function pre(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const v_=new WeakMap,s6=new WeakMap;function b_(t){return s6.get(t)||1}function gre(t,e){return{constTimeNegate:y_,hasPrecomputes(n){return b_(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>PP;)r&My&&(s=s.add(i)),i=i.double(),r>>=My;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=w_(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=w_(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=My);const m=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(y_(y,r[m])):a=a.add(y_(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=w_(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===PP)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=My),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=v_.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&v_.set(r,s(i))),i},wNAFCached(n,r,s){const i=b_(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=b_(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){r6(r,e),s6.set(n,r),v_.delete(n)}}}function mre(t,e,n,r){if(fre(n,t),pre(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=tre(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],m=Number(p>>BigInt(d)&BigInt(a));c[m]=c[m].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function yre(t){return ure(t.Fp),E2(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...t6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const wi=BigInt(0),Qr=BigInt(1),By=BigInt(2),wre=BigInt(8),vre={zip215:!0};function bre(t){const e=yre(t);return E2(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function _re(t){const e=bre(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=By<<BigInt(a*8)-Qr,u=n.create,d=n6(e.n,e.nBitLength),h=e.uvRatio||((N,T)=>{try{return{isValid:!0,value:n.sqrt(N*n.inv(T))}}catch{return{isValid:!1,value:wi}}}),f=e.adjustScalarBytes||(N=>N),p=e.domain||((N,T,L)=>{if(g_("phflag",L),T.length||L)throw new Error("Contexts/pre-hash are not supported");return N});function m(N,T){Pf("coordinate "+N,T,wi,l)}function w(N){if(!(N instanceof v))throw new Error("ExtendedPoint expected")}const y=AP((N,T)=>{const{ex:L,ey:D,ez:$}=N,U=N.is0();T==null&&(T=U?wre:n.inv($));const W=u(L*T),J=u(D*T),ie=u($*T);if(U)return{x:wi,y:Qr};if(ie!==Qr)throw new Error("invZ was invalid");return{x:W,y:J}}),b=AP(N=>{const{a:T,d:L}=e;if(N.is0())throw new Error("bad point: ZERO");const{ex:D,ey:$,ez:U,et:W}=N,J=u(D*D),ie=u($*$),ne=u(U*U),se=u(ne*ne),we=u(J*T),Y=u(ne*u(we+ie)),X=u(se+u(L*u(J*ie)));if(Y!==X)throw new Error("bad point: equation left != right (1)");const oe=u(D*$),te=u(U*W);if(oe!==te)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(T,L,D,$){this.ex=T,this.ey=L,this.ez=D,this.et=$,m("x",T),m("y",L),m("z",D),m("t",$),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(T){if(T instanceof v)throw new Error("extended point not allowed");const{x:L,y:D}=T||{};return m("x",L),m("y",D),new v(L,D,Qr,u(L*D))}static normalizeZ(T){const L=n.invertBatch(T.map(D=>D.ez));return T.map((D,$)=>D.toAffine(L[$])).map(v.fromAffine)}static msm(T,L){return mre(v,d,T,L)}_setWindowSize(T){S.setWindowSize(this,T)}assertValidity(){b(this)}equals(T){w(T);const{ex:L,ey:D,ez:$}=this,{ex:U,ey:W,ez:J}=T,ie=u(L*J),ne=u(U*$),se=u(D*J),we=u(W*$);return ie===ne&&se===we}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:T}=e,{ex:L,ey:D,ez:$}=this,U=u(L*L),W=u(D*D),J=u(By*u($*$)),ie=u(T*U),ne=L+D,se=u(u(ne*ne)-U-W),we=ie+W,Y=we-J,X=ie-W,oe=u(se*Y),te=u(we*X),he=u(se*X),ze=u(Y*we);return new v(oe,te,ze,he)}add(T){w(T);const{a:L,d:D}=e,{ex:$,ey:U,ez:W,et:J}=this,{ex:ie,ey:ne,ez:se,et:we}=T;if(L===BigInt(-1)){const bt=u((U-$)*(ne+ie)),lt=u((U+$)*(ne-ie)),sn=u(lt-bt);if(sn===wi)return this.double();const Qn=u(W*By*we),pr=u(J*By*se),Hs=pr+Qn,Tn=lt+bt,gr=pr-Qn,Vs=u(Hs*sn),Qi=u(Tn*gr),Nn=u(Hs*gr),Ro=u(sn*Tn);return new v(Vs,Qi,Ro,Nn)}const Y=u($*ie),X=u(U*ne),oe=u(J*D*we),te=u(W*se),he=u(($+U)*(ie+ne)-Y-X),ze=te-oe,Te=te+oe,Ce=u(X-L*Y),Ue=u(he*ze),Je=u(Te*Ce),ft=u(he*Ce),yn=u(ze*Te);return new v(Ue,Je,yn,ft)}subtract(T){return this.add(T.negate())}wNAF(T){return S.wNAFCached(this,T,v.normalizeZ)}multiply(T){const L=T;Pf("scalar",L,Qr,r);const{p:D,f:$}=this.wNAF(L);return v.normalizeZ([D,$])[0]}multiplyUnsafe(T,L=v.ZERO){const D=T;return Pf("scalar",D,wi,r),D===wi?_:this.is0()||D===Qr?this:S.wNAFCachedUnsafe(this,D,v.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(T){return y(this,T)}clearCofactor(){const{h:T}=e;return T===Qr?this:this.multiplyUnsafe(T)}static fromHex(T,L=!1){const{d:D,a:$}=e,U=n.BYTES;T=Mo("pointHex",T,U),g_("zip215",L);const W=T.slice(),J=T[U-1];W[U-1]=J&-129;const ie=$w(W),ne=L?l:n.ORDER;Pf("pointHex.y",ie,wi,ne);const se=u(ie*ie),we=u(se-Qr),Y=u(D*se-$);let{isValid:X,value:oe}=h(we,Y);if(!X)throw new Error("Point.fromHex: invalid y coordinate");const te=(oe&Qr)===Qr,he=(J&128)!==0;if(!L&&oe===wi&&he)throw new Error("Point.fromHex: x=0 and x_0=1");return he!==te&&(oe=u(-oe)),v.fromAffine({x:oe,y:ie})}static fromPrivateKey(T){return C(T).point}toRawBytes(){const{x:T,y:L}=this.toAffine(),D=mx(L,n.BYTES);return D[D.length-1]|=T&Qr?128:0,D}toHex(){return _2(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Qr,u(e.Gx*e.Gy)),v.ZERO=new v(wi,Qr,Qr,wi);const{BASE:E,ZERO:_}=v,S=gre(v,a*8);function x(N){return Dn(N,r)}function A(N){return x($w(N))}function C(N){const T=n.BYTES;N=Mo("private key",N,T);const L=Mo("hashed private key",i(N),2*T),D=f(L.slice(0,T)),$=L.slice(T,2*T),U=A(D),W=E.multiply(U),J=W.toRawBytes();return{head:D,prefix:$,scalar:U,point:W,pointBytes:J}}function k(N){return C(N).pointBytes}function O(N=new Uint8Array,...T){const L=SP(...T);return A(i(p(L,Mo("context",N),!!s)))}function M(N,T,L={}){N=Mo("message",N),s&&(N=s(N));const{prefix:D,scalar:$,pointBytes:U}=C(T),W=O(L.context,D,N),J=E.multiply(W).toRawBytes(),ie=O(L.context,J,U,N),ne=x(W+ie*$);Pf("signature.s",ne,wi,r);const se=SP(J,mx(ne,n.BYTES));return Mo("result",se,n.BYTES*2)}const F=vre;function V(N,T,L,D=F){const{context:$,zip215:U}=D,W=n.BYTES;N=Mo("signature",N,2*W),T=Mo("message",T),L=Mo("publicKey",L,W),U!==void 0&&g_("zip215",U),s&&(T=s(T));const J=$w(N.slice(W,2*W));let ie,ne,se;try{ie=v.fromHex(L,U),ne=v.fromHex(N.slice(0,W),U),se=E.multiplyUnsafe(J)}catch{return!1}if(!U&&ie.isSmallOrder())return!1;const we=O($,ne.toRawBytes(),ie.toRawBytes(),T);return ne.add(ie.multiplyUnsafe(we)).subtract(se).clearCofactor().equals(v.ZERO)}return E._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:M,verify:V,ExtendedPoint:v,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(n.BYTES),precompute(N=8,T=v.BASE){return T._setWindowSize(N),T.multiply(BigInt(3)),T}}}}BigInt(0),BigInt(1);const C2=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),kP=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Ere=BigInt(1),OP=BigInt(2);BigInt(3);const Cre=BigInt(5),xre=BigInt(8);function Sre(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=C2,o=t*t%i*t%i,a=to(o,OP,i)*o%i,c=to(a,Ere,i)*t%i,l=to(c,Cre,i)*c%i,u=to(l,e,i)*l%i,d=to(u,n,i)*u%i,h=to(d,r,i)*d%i,f=to(h,s,i)*h%i,p=to(f,s,i)*h%i,m=to(p,e,i)*l%i;return{pow_p_5_8:to(m,OP,i)*t%i,b2:o}}function Are(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Ire(t,e){const n=C2,r=Dn(e*e*e,n),s=Dn(r*r*e,n),i=Sre(t*s).pow_p_5_8;let o=Dn(t*r*i,n);const a=Dn(e*o*o,n),c=o,l=Dn(o*kP,n),u=a===t,d=a===Dn(-t,n),h=a===Dn(-t*kP,n);return u&&(o=c),(d||h)&&(o=l),cre(o,n)&&(o=Dn(-o,n)),{isValid:u||d,value:o}}const Tre=n6(C2,void 0,!0),Nre={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Tre,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:xre,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Qne,randomBytes:Yj,adjustScalarBytes:Are,uvRatio:Ire},i6=_re(Nre),Pre="EdDSA",kre="JWT",O0=".",Xv="base64url",o6="utf8",a6="utf8",Ore=":",Rre="did",$re="key",RP="base58btc",Dre="z",jre="K36",Ure=32;function x2(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function c6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?x2(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function l6(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=c6(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return x2(n)}function Lre(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,m++;for(var v=(b-y)*u+1>>>0,E=new Uint8Array(v);y!==b;){for(var _=p[y],S=0,x=v-1;(_!==0||S<w)&&x!==-1;x--,S++)_+=256*E[x]>>>0,E[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=S,y++}for(var A=v-w;A!==v&&E[A]===0;)A++;for(var C=c.repeat(m);A<v;++A)C+=t.charAt(E[A]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var w=0,y=0;p[m]===c;)w++,m++;for(var b=(p.length-m)*l+1>>>0,v=new Uint8Array(b);p[m];){var E=n[p.charCodeAt(m)];if(E===255)return;for(var _=0,S=b-1;(E!==0||_<y)&&S!==-1;S--,_++)E+=a*v[S]>>>0,v[S]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=_,m++}if(p[m]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var A=new Uint8Array(w+(b-x)),C=w;x!==b;)A[C++]=v[x++];return A}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Mre=Lre,Bre=Mre;const u6=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Fre=t=>new TextEncoder().encode(t),zre=t=>new TextDecoder().decode(t);let Wre=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},qre=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return d6(this,e)}},Hre=class{constructor(e){this.decoders=e}or(e){return d6(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const d6=(t,e)=>new Hre({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Vre=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Wre(e,n,r),this.decoder=new qre(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const eb=({name:t,prefix:e,encode:n,decode:r})=>new Vre(t,e,n,r),Rm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Bre(n,e);return eb({prefix:t,name:e,encode:r,decode:i=>u6(s(i))})},Gre=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Kre=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},dr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>eb({prefix:e,name:t,encode(s){return Kre(s,r,n)},decode(s){return Gre(s,r,n,t)}}),Yre=eb({prefix:"\0",name:"identity",encode:t=>zre(t),decode:t=>Fre(t)});var Qre=Object.freeze({__proto__:null,identity:Yre});const Jre=dr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Zre=Object.freeze({__proto__:null,base2:Jre});const Xre=dr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ese=Object.freeze({__proto__:null,base8:Xre});const tse=Rm({prefix:"9",name:"base10",alphabet:"0123456789"});var nse=Object.freeze({__proto__:null,base10:tse});const rse=dr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sse=dr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ise=Object.freeze({__proto__:null,base16:rse,base16upper:sse});const ose=dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ase=dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cse=dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lse=dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),use=dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dse=dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hse=dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fse=dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pse=dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gse=Object.freeze({__proto__:null,base32:ose,base32upper:ase,base32pad:cse,base32padupper:lse,base32hex:use,base32hexupper:dse,base32hexpad:hse,base32hexpadupper:fse,base32z:pse});const mse=Rm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yse=Rm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var wse=Object.freeze({__proto__:null,base36:mse,base36upper:yse});const vse=Rm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bse=Rm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var _se=Object.freeze({__proto__:null,base58btc:vse,base58flickr:bse});const Ese=dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Cse=dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xse=dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Sse=dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ase=Object.freeze({__proto__:null,base64:Ese,base64pad:Cse,base64url:xse,base64urlpad:Sse});const h6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ise=h6.reduce((t,e,n)=>(t[n]=e,t),[]),Tse=h6.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Nse(t){return t.reduce((e,n)=>(e+=Ise[n],e),"")}function Pse(t){const e=[];for(const n of t){const r=Tse[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const kse=eb({prefix:"🚀",name:"base256emoji",encode:Nse,decode:Pse});var Ose=Object.freeze({__proto__:null,base256emoji:kse}),Rse=f6,$P=128,$se=-128,Dse=Math.pow(2,31);function f6(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Dse;)e[n++]=t&255|$P,t/=128;for(;t&$se;)e[n++]=t&255|$P,t>>>=7;return e[n]=t|0,f6.bytes=n-r+1,e}var jse=wx,Use=128,DP=127;function wx(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw wx.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&DP)<<s:(o&DP)*Math.pow(2,s),s+=7}while(o>=Use);return wx.bytes=i-r,n}var Lse=Math.pow(2,7),Mse=Math.pow(2,14),Bse=Math.pow(2,21),Fse=Math.pow(2,28),zse=Math.pow(2,35),Wse=Math.pow(2,42),qse=Math.pow(2,49),Hse=Math.pow(2,56),Vse=Math.pow(2,63),Gse=function(t){return t<Lse?1:t<Mse?2:t<Bse?3:t<Fse?4:t<zse?5:t<Wse?6:t<qse?7:t<Hse?8:t<Vse?9:10},Kse={encode:Rse,decode:jse,encodingLength:Gse},p6=Kse;const jP=(t,e,n=0)=>(p6.encode(t,e,n),e),UP=t=>p6.encodingLength(t),vx=(t,e)=>{const n=e.byteLength,r=UP(t),s=r+UP(n),i=new Uint8Array(s+n);return jP(t,i,0),jP(n,i,r),i.set(e,s),new Yse(t,n,e,i)};let Yse=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const g6=({name:t,code:e,encode:n})=>new Qse(t,e,n);let Qse=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?vx(this.code,n):n.then(r=>vx(this.code,r))}else throw Error("Unknown type, must be binary type")}};const m6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Jse=g6({name:"sha2-256",code:18,encode:m6("SHA-256")}),Zse=g6({name:"sha2-512",code:19,encode:m6("SHA-512")});var Xse=Object.freeze({__proto__:null,sha256:Jse,sha512:Zse});const y6=0,eie="identity",w6=u6,tie=t=>vx(y6,w6(t)),nie={code:y6,name:eie,encode:w6,digest:tie};var rie=Object.freeze({__proto__:null,identity:nie});new TextEncoder,new TextDecoder;const LP={...Qre,...Zre,...ese,...nse,...ise,...gse,...wse,..._se,...Ase,...Ose};({...Xse,...rie});function v6(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const MP=v6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),__=v6("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=c6(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),b6={utf8:MP,"utf-8":MP,hex:LP.base16,latin1:__,ascii:__,binary:__,...LP};function tb(t,e="utf8"){const n=b6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function qh(t,e="utf8"){const n=b6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?x2(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function BP(t){return mu(tb(qh(t,Xv),o6))}function R0(t){return tb(qh(va(t),o6),Xv)}function _6(t){const e=qh(jre,RP),n=Dre+tb(l6([e,t]),RP);return[Rre,$re,n].join(Ore)}function sie(t){return tb(t,Xv)}function iie(t){return qh(t,Xv)}function oie(t){return qh([R0(t.header),R0(t.payload)].join(O0),a6)}function aie(t){return[R0(t.header),R0(t.payload),sie(t.signature)].join(O0)}function bx(t){const e=t.split(O0),n=BP(e[0]),r=BP(e[1]),s=iie(e[2]),i=qh(e.slice(0,2).join(O0),a6);return{header:n,payload:r,signature:s,data:i}}function FP(t=Yj(Ure)){const e=i6.getPublicKey(t);return{secretKey:l6([t,e]),publicKey:e}}async function cie(t,e,n,r,s=ge.fromMiliseconds(Date.now())){const i={alg:Pre,typ:kre},o=_6(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=oie({header:i,payload:c}),u=i6.sign(l,r.secretKey.slice(0,32));return aie({header:i,payload:c,signature:u})}var zP=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},lie=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),uie=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),die=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),hie=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),fie=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),pie=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,gie=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,WP=3,mie=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",pie]],qP=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function yie(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new fie:typeof navigator<"u"?vie(navigator.userAgent):_ie()}function wie(t){return t!==""&&mie.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function vie(t){var e=wie(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new hie;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<WP&&(s=zP(zP([],s,!0),Eie(WP-s.length),!0)):s=[];var i=s.join("."),o=bie(t),a=gie.exec(t);return a&&a[1]?new die(n,i,o,a[1]):new lie(n,i,o)}function bie(t){for(var e=0,n=qP.length;e<n;e++){var r=qP[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function _ie(){var t=typeof process<"u"&&process.version;return t?new uie(process.version.slice(1)):null}function Eie(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.getLocalStorage=Gt.getLocalStorageOrThrow=Gt.getCrypto=Gt.getCryptoOrThrow=E6=Gt.getLocation=Gt.getLocationOrThrow=S2=Gt.getNavigator=Gt.getNavigatorOrThrow=yu=Gt.getDocument=Gt.getDocumentOrThrow=Gt.getFromWindowOrThrow=Gt.getFromWindow=void 0;function ju(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Gt.getFromWindow=ju;function Hh(t){const e=ju(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Gt.getFromWindowOrThrow=Hh;function Cie(){return Hh("document")}Gt.getDocumentOrThrow=Cie;function xie(){return ju("document")}var yu=Gt.getDocument=xie;function Sie(){return Hh("navigator")}Gt.getNavigatorOrThrow=Sie;function Aie(){return ju("navigator")}var S2=Gt.getNavigator=Aie;function Iie(){return Hh("location")}Gt.getLocationOrThrow=Iie;function Tie(){return ju("location")}var E6=Gt.getLocation=Tie;function Nie(){return Hh("crypto")}Gt.getCryptoOrThrow=Nie;function Pie(){return ju("crypto")}Gt.getCrypto=Pie;function kie(){return Hh("localStorage")}Gt.getLocalStorageOrThrow=kie;function Oie(){return ju("localStorage")}Gt.getLocalStorage=Oie;var A2={};Object.defineProperty(A2,"__esModule",{value:!0});var C6=A2.getWindowMetadata=void 0;const HP=Gt;function Rie(){let t,e;try{t=HP.getDocumentOrThrow(),e=HP.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],m=p.getAttribute("rel");if(m&&m.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");y+=v+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],m=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(m.length&&m){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}C6=A2.getWindowMetadata=Rie;function Ug(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function _x(t){return Ug(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const x6="2.31.0";let kf={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${x6}`};class wu extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof wu?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof wu&&n.cause.docsPath||n.docsPath,i=(a=kf.getDocsUrl)==null?void 0:a.call(kf,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...kf.version?[`Version: ${kf.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=x6}walk(e){return S6(this,e)}}function S6(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?S6(t.cause,e):e?null:t}class A6 extends wu{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Vh(t,{dir:e,size:n=32}={}){return typeof t=="string"?$ie(t,{dir:e,size:n}):Die(t,{dir:e,size:n})}function $ie(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new A6({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Die(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new A6({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class jie extends wu{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Uie extends wu{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Gh(t,{size:e}){if(_x(t)>e)throw new Uie({givenSize:_x(t),maxSize:e})}function Ex(t,e={}){const{signed:n}=e;e.size&&Gh(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Lie(t,e={}){return Number(Ex(t,e))}const Mie=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Cx(t,e={}){return typeof t=="number"||typeof t=="bigint"?T6(t,e):typeof t=="string"?zie(t,e):typeof t=="boolean"?Bie(t,e):I6(t,e)}function Bie(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Gh(n,{size:e.size}),Vh(n,{size:e.size})):n}function I6(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Mie[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Gh(r,{size:e.size}),Vh(r,{dir:"right",size:e.size})):r}function T6(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new jie({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Vh(a,{size:r}):a}const Fie=new TextEncoder;function zie(t,e={}){const n=Fie.encode(t);return I6(n,e)}const Wie=new TextEncoder;function qie(t,e={}){return typeof t=="number"||typeof t=="bigint"?Vie(t,e):typeof t=="boolean"?Hie(t,e):Ug(t)?N6(t,e):P6(t,e)}function Hie(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Gh(n,{size:e.size}),Vh(n,{size:e.size})):n}const Bo={zero:48,nine:57,A:65,F:70,a:97,f:102};function VP(t){if(t>=Bo.zero&&t<=Bo.nine)return t-Bo.zero;if(t>=Bo.A&&t<=Bo.F)return t-(Bo.A-10);if(t>=Bo.a&&t<=Bo.f)return t-(Bo.a-10)}function N6(t,e={}){let n=t;e.size&&(Gh(n,{size:e.size}),n=Vh(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=VP(r.charCodeAt(a++)),l=VP(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new wu(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Vie(t,e){const n=T6(t,e);return N6(n)}function P6(t,e={}){const n=Wie.encode(t);return typeof e.size=="number"?(Gh(n,{size:e.size}),Vh(n,{dir:"right",size:e.size})):n}function k6(t,e){const n=e||"hex",r=mA(Ug(t,{strict:!1})?qie(t):t);return n==="bytes"?r:Cx(r)}class Gie extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const E_=new Gie(8192);function Kie(t,e){if(E_.has(`${t}.${e}`))return E_.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=k6(P6(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return E_.set(`${t}.${e}`,i),i}function Yie(t){const e=k6(`0x${t.substring(4)}`).substring(26);return Kie(`0x${e}`)}async function Qie({hash:t,signature:e}){const n=Ug(t)?t:Cx(t),{secp256k1:r}=await wn(async()=>{const{secp256k1:o}=await import("./secp256k1-CCewJa4z.js");return{secp256k1:o}},__vite__mapDeps([2,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=GP(f);return new r.Signature(Ex(l),Ex(u)).addRecoveryBit(p)}const o=Ug(e)?e:Cx(e);if(_x(o)!==65)throw new Error("invalid signature length");const a=Lie(`0x${o.slice(130)}`),c=GP(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function GP(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Jie({hash:t,signature:e}){return Yie(await Qie({hash:t,signature:e}))}function Zie(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,m=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let E=p-1;(b!==0||v<d)&&E!==-1;E--,v++)b+=256*m[E]>>>0,m[E]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&m[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(m[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let E=0;for(let _=f-1;(v!==0||E<h)&&_!==-1;_--,E++)v+=n*p[_]>>>0,p[_]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=E,u++}let m=f-h;for(;m!==f&&p[m]===0;)m++;const w=new Uint8Array(d+(f-m));let y=d;for(;m!==f;)w[y++]=p[m++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Xie="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Kh=Zie(Xie);function eoe(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function toe(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const noe=new TextEncoder,roe=50;function soe(t,e,n){noe.encodeInto(t,e.subarray(n))}function ioe(t,e,n){t.length>roe?soe(t,e,n):toe(t,e,n)}const ooe=4096;function O6(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=ooe&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const aoe=new TextDecoder,coe=200;function loe(t,e,n){const r=t.subarray(e,e+n);return aoe.decode(r)}function uoe(t,e,n){return n>coe?loe(t,e,n):O6(t,e,n)}class Fy{constructor(e,n){this.type=e,this.data=n}}class Ps extends Error{constructor(e){super(e);const n=Object.create(Ps.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ps.name})}}const Of=4294967295;function doe(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function R6(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function $6(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function hoe(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const foe=-1,poe=4294967296-1,goe=17179869184-1;function moe({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=goe)if(e===0&&t<=poe){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),R6(r,4,t),n}}function yoe(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function woe(t){if(t instanceof Date){const e=yoe(t);return moe(e)}else return null}function voe(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=$6(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new Ps(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function boe(t){const e=voe(t);return new Date(e.sec*1e3+e.nsec/1e6)}const _oe={type:foe,encode:woe,decode:boe};class $0{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(_oe)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new Fy(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new Fy(o,i)}}}return e instanceof Fy?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new Fy(n,e)}}$0.defaultCodec=new $0;function Eoe(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function xx(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Eoe(t)?new Uint8Array(t):Uint8Array.from(t)}const Coe=100,xoe=2048;let Soe=class D6{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??$0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??Coe,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??xoe,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new D6({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=eoe(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),ioe(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=xx(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),doe(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),R6(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function Aoe(t,e){return new Soe(e).encodeSharedRef(t)}function C_(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const Ioe=16,Toe=16;class Noe{constructor(e=Ioe,n=Toe){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=O6(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const Sx="array",xp="map_key",j6="map_value",Poe=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Ps("The type of key must be string or number but "+typeof t)};class koe{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=Sx,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=xp,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Sx){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===xp||e.type===j6){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Rf=-1,I2=new DataView(new ArrayBuffer(0)),Ooe=new Uint8Array(I2.buffer);try{I2.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const KP=new RangeError("Insufficient data"),Roe=new Noe;let $oe=class U6{constructor(e){this.totalPos=0,this.pos=0,this.view=I2,this.bytes=Ooe,this.headByte=Rf,this.stack=new koe,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??$0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??Of,this.maxBinLength=(e==null?void 0:e.maxBinLength)??Of,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??Of,this.maxMapLength=(e==null?void 0:e.maxMapLength)??Of,this.maxExtLength=(e==null?void 0:e.maxExtLength)??Of,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:Roe,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??Poe}clone(){return new U6({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Rf,this.stack.reset()}setBuffer(e){const n=xx(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Rf&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=xx(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${C_(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new Ps(`Unrecognized type byte: ${C_(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===Sx)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===xp){if(n==="__proto__")throw new Ps("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=j6;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=xp;continue e}}return n}}readHeadByte(){return this.headByte===Rf&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Rf}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Ps(`Unrecognized array type byte: ${C_(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Ps(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Ps(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new Ps(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw KP;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=uoe(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===xp:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Ps(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw KP;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new Ps(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=hoe(this.view,this.pos);return this.pos+=8,e}readI64(){const e=$6(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function Doe(t,e){return new $oe(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function joe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function L6(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function D0(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function T2(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Ax(t){if(!Array.isArray(t))throw new Error("array expected")}function j0(t,e){if(!L6(!0,e))throw new Error(`${t}: array of strings expected`)}function Uoe(t,e){if(!L6(!1,e))throw new Error(`${t}: array of numbers expected`)}function Loe(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function Moe(t){const e=typeof t=="string"?t.split(""):t,n=e.length;j0("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(Ax(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(Ax(s),s.map(i=>{D0("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function Boe(t=""){return D0("join",t),{encode:e=>(j0("join.decode",e),e.join(t)),decode:e=>(D0("join.decode",e),e.split(t))}}function Foe(t,e="="){return T2(t),D0("padding",e),{encode(n){for(j0("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){j0("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const M6=(t,e)=>e===0?t:M6(e,t%e),U0=(t,e)=>t+(e-M6(t,e)),x_=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function YP(t,e,n,r){if(Ax(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(U0(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${U0(e,n)}`);let s=0,i=0;const o=x_[e],a=x_[n]-1,c=[];for(const l of t){if(T2(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=x_[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function zoe(t,e=!1){if(T2(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(U0(8,t)>32||U0(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!joe(n))throw new Error("radix2.encode input should be Uint8Array");return YP(Array.from(n),8,t,!e)},decode:n=>(Uoe("radix2.decode",n),Uint8Array.from(YP(n,t,8,e)))}}const Woe=Loe(zoe(5),Moe("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Foe(5),Boe(""));function N2(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function B6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?N2(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Sp(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=B6(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return N2(n)}function qoe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,m++;for(var v=(b-y)*u+1>>>0,E=new Uint8Array(v);y!==b;){for(var _=p[y],S=0,x=v-1;(_!==0||S<w)&&x!==-1;x--,S++)_+=256*E[x]>>>0,E[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=S,y++}for(var A=v-w;A!==v&&E[A]===0;)A++;for(var C=c.repeat(m);A<v;++A)C+=t.charAt(E[A]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var w=0,y=0;p[m]===c;)w++,m++;for(var b=(p.length-m)*l+1>>>0,v=new Uint8Array(b);p[m];){var E=n[p.charCodeAt(m)];if(E===255)return;for(var _=0,S=b-1;(E!==0||_<y)&&S!==-1;S--,_++)E+=a*v[S]>>>0,v[S]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=_,m++}if(p[m]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var A=new Uint8Array(w+(b-x)),C=w;x!==b;)A[C++]=v[x++];return A}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Hoe=qoe,Voe=Hoe;const Goe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Koe=t=>new TextEncoder().encode(t),Yoe=t=>new TextDecoder().decode(t);class Qoe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Joe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return F6(this,e)}}class Zoe{constructor(e){this.decoders=e}or(e){return F6(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const F6=(t,e)=>new Zoe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Xoe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Qoe(e,n,r),this.decoder=new Joe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const nb=({name:t,prefix:e,encode:n,decode:r})=>new Xoe(t,e,n,r),$m=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Voe(n,e);return nb({prefix:t,name:e,encode:r,decode:i=>Goe(s(i))})},eae=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},tae=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},hr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>nb({prefix:e,name:t,encode(s){return tae(s,r,n)},decode(s){return eae(s,r,n,t)}}),nae=nb({prefix:"\0",name:"identity",encode:t=>Yoe(t),decode:t=>Koe(t)}),rae=Object.freeze(Object.defineProperty({__proto__:null,identity:nae},Symbol.toStringTag,{value:"Module"})),sae=hr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),iae=Object.freeze(Object.defineProperty({__proto__:null,base2:sae},Symbol.toStringTag,{value:"Module"})),oae=hr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),aae=Object.freeze(Object.defineProperty({__proto__:null,base8:oae},Symbol.toStringTag,{value:"Module"})),cae=$m({prefix:"9",name:"base10",alphabet:"0123456789"}),lae=Object.freeze(Object.defineProperty({__proto__:null,base10:cae},Symbol.toStringTag,{value:"Module"})),uae=hr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dae=hr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),hae=Object.freeze(Object.defineProperty({__proto__:null,base16:uae,base16upper:dae},Symbol.toStringTag,{value:"Module"})),fae=hr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),pae=hr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gae=hr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mae=hr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yae=hr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wae=hr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vae=hr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),bae=hr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),_ae=hr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Eae=Object.freeze(Object.defineProperty({__proto__:null,base32:fae,base32hex:yae,base32hexpad:vae,base32hexpadupper:bae,base32hexupper:wae,base32pad:gae,base32padupper:mae,base32upper:pae,base32z:_ae},Symbol.toStringTag,{value:"Module"})),Cae=$m({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),xae=$m({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Sae=Object.freeze(Object.defineProperty({__proto__:null,base36:Cae,base36upper:xae},Symbol.toStringTag,{value:"Module"})),Aae=$m({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Iae=$m({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Tae=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Aae,base58flickr:Iae},Symbol.toStringTag,{value:"Module"})),Nae=hr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Pae=hr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),kae=hr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Oae=hr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Rae=Object.freeze(Object.defineProperty({__proto__:null,base64:Nae,base64pad:Pae,base64url:kae,base64urlpad:Oae},Symbol.toStringTag,{value:"Module"})),z6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),$ae=z6.reduce((t,e,n)=>(t[n]=e,t),[]),Dae=z6.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function jae(t){return t.reduce((e,n)=>(e+=$ae[n],e),"")}function Uae(t){const e=[];for(const n of t){const r=Dae[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Lae=nb({prefix:"🚀",name:"base256emoji",encode:jae,decode:Uae}),Mae=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Lae},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const QP={...rae,...iae,...aae,...lae,...hae,...Eae,...Sae,...Tae,...Rae,...Mae};function W6(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const JP=W6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),S_=W6("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=B6(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),q6={utf8:JP,"utf-8":JP,hex:QP.base16,latin1:S_,ascii:S_,binary:S_,...QP};function oi(t,e="utf8"){const n=q6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?N2(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ws(t,e="utf8"){const n=q6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const Bae={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},Fae="Input must be an string, Buffer or Uint8Array";function zae(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(Fae);return e}function Wae(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function zy(t){return(4294967296+t).toString(16).substring(1)}function qae(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=zy(e[s]).toUpperCase(),r+=" ",r+=zy(e[s+1]).toUpperCase();else if(n===64)r+=zy(e[s+1]).toUpperCase(),r+=zy(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function Hae(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var H6={normalizeInput:zae,toHex:Wae,debugPrint:qae,testSpeed:Hae};const Dw=H6;function Wy(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function ZP(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function V6(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Da(t,e,n,r,s,i){const o=rp[s],a=rp[s+1],c=rp[i],l=rp[i+1];Wy(et,t,e),ZP(et,t,o,a);let u=et[r]^et[t],d=et[r+1]^et[t+1];et[r]=d,et[r+1]=u,Wy(et,n,r),u=et[e]^et[n],d=et[e+1]^et[n+1],et[e]=u>>>24^d<<8,et[e+1]=d>>>24^u<<8,Wy(et,t,e),ZP(et,t,c,l),u=et[r]^et[t],d=et[r+1]^et[t+1],et[r]=u>>>16^d<<16,et[r+1]=d>>>16^u<<16,Wy(et,n,r),u=et[e]^et[n],d=et[e+1]^et[n+1],et[e]=d>>>31^u<<1,et[e+1]=u>>>31^d<<1}const G6=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Vae=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],vr=new Uint8Array(Vae.map(function(t){return t*2})),et=new Uint32Array(32),rp=new Uint32Array(32);function K6(t,e){let n=0;for(n=0;n<16;n++)et[n]=t.h[n],et[n+16]=G6[n];for(et[24]=et[24]^t.t,et[25]=et[25]^t.t/4294967296,e&&(et[28]=~et[28],et[29]=~et[29]),n=0;n<32;n++)rp[n]=V6(t.b,4*n);for(n=0;n<12;n++)Da(0,8,16,24,vr[n*16+0],vr[n*16+1]),Da(2,10,18,26,vr[n*16+2],vr[n*16+3]),Da(4,12,20,28,vr[n*16+4],vr[n*16+5]),Da(6,14,22,30,vr[n*16+6],vr[n*16+7]),Da(0,10,20,30,vr[n*16+8],vr[n*16+9]),Da(2,12,22,24,vr[n*16+10],vr[n*16+11]),Da(4,14,16,26,vr[n*16+12],vr[n*16+13]),Da(6,8,18,28,vr[n*16+14],vr[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^et[n]^et[n+16]}const ja=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Y6(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};ja.fill(0),ja[0]=t,e&&(ja[1]=e.length),ja[2]=1,ja[3]=1,n&&ja.set(n,32),r&&ja.set(r,48);for(let i=0;i<16;i++)s.h[i]=G6[i]^V6(ja,i*4);return e&&(P2(s,e),s.c=128),s}function P2(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,K6(t,!1),t.c=0),t.b[t.c++]=e[n]}function Q6(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;K6(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function J6(t,e,n,r,s){n=n||64,t=Dw.normalizeInput(t),r&&(r=Dw.normalizeInput(r)),s&&(s=Dw.normalizeInput(s));const i=Y6(n,e,r,s);return P2(i,t),Q6(i)}function Gae(t,e,n,r,s){const i=J6(t,e,n,r,s);return Dw.toHex(i)}var Kae={blake2b:J6,blake2bHex:Gae,blake2bInit:Y6,blake2bUpdate:P2,blake2bFinal:Q6};const Z6=H6;function Yae(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ua(t,e,n,r,s,i){xt[t]=xt[t]+xt[e]+s,xt[r]=qy(xt[r]^xt[t],16),xt[n]=xt[n]+xt[r],xt[e]=qy(xt[e]^xt[n],12),xt[t]=xt[t]+xt[e]+i,xt[r]=qy(xt[r]^xt[t],8),xt[n]=xt[n]+xt[r],xt[e]=qy(xt[e]^xt[n],7)}function qy(t,e){return t>>>e^t<<32-e}const X6=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),br=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),xt=new Uint32Array(16),Zn=new Uint32Array(16);function e4(t,e){let n=0;for(n=0;n<8;n++)xt[n]=t.h[n],xt[n+8]=X6[n];for(xt[12]^=t.t,xt[13]^=t.t/4294967296,e&&(xt[14]=~xt[14]),n=0;n<16;n++)Zn[n]=Yae(t.b,4*n);for(n=0;n<10;n++)Ua(0,4,8,12,Zn[br[n*16+0]],Zn[br[n*16+1]]),Ua(1,5,9,13,Zn[br[n*16+2]],Zn[br[n*16+3]]),Ua(2,6,10,14,Zn[br[n*16+4]],Zn[br[n*16+5]]),Ua(3,7,11,15,Zn[br[n*16+6]],Zn[br[n*16+7]]),Ua(0,5,10,15,Zn[br[n*16+8]],Zn[br[n*16+9]]),Ua(1,6,11,12,Zn[br[n*16+10]],Zn[br[n*16+11]]),Ua(2,7,8,13,Zn[br[n*16+12]],Zn[br[n*16+13]]),Ua(3,4,9,14,Zn[br[n*16+14]],Zn[br[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=xt[n]^xt[n+8]}function t4(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(X6),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(k2(r,e),r.c=64),r}function k2(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,e4(t,!1),t.c=0),t.b[t.c++]=e[n]}function n4(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;e4(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function r4(t,e,n){n=n||32,t=Z6.normalizeInput(t);const r=t4(n,e);return k2(r,t),n4(r)}function Qae(t,e,n){const r=r4(t,e,n);return Z6.toHex(r)}var Jae={blake2s:r4,blake2sHex:Qae,blake2sInit:t4,blake2sUpdate:k2,blake2sFinal:n4};const $f=Kae,Df=Jae;var Zae={blake2b:$f.blake2b,blake2bHex:$f.blake2bHex,blake2bInit:$f.blake2bInit,blake2bUpdate:$f.blake2bUpdate,blake2bFinal:$f.blake2bFinal,blake2s:Df.blake2s,blake2sHex:Df.blake2sHex,blake2sInit:Df.blake2sInit,blake2sUpdate:Df.blake2sUpdate,blake2sFinal:Df.blake2sFinal},Xae={};const ece=":";function Kd(t){const[e,n]=t.split(ece);return{namespace:e,reference:n}}function s4(t,e){return t.includes(":")?[t]:e.chains||[]}var tce=Object.defineProperty,nce=Object.defineProperties,rce=Object.getOwnPropertyDescriptors,XP=Object.getOwnPropertySymbols,sce=Object.prototype.hasOwnProperty,ice=Object.prototype.propertyIsEnumerable,ek=(t,e,n)=>e in t?tce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tk=(t,e)=>{for(var n in e||(e={}))sce.call(e,n)&&ek(t,n,e[n]);if(XP)for(var n of XP(e))ice.call(e,n)&&ek(t,n,e[n]);return t},oce=(t,e)=>nce(t,rce(e));const ace="ReactNative",Rs={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},cce="js";function L0(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ol(){return!yu()&&!!S2()&&navigator.product===ace}function lce(){return ol()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function uce(){return ol()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Yh(){return!L0()&&!!S2()&&!!yu()}function Dm(){return ol()?Rs.reactNative:L0()?Rs.node:Yh()?Rs.browser:Rs.unknown}function nk(){var t;try{return ol()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function dce(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function hce(t){var e,n;const r=i4();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),oce(tk(tk({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function i4(){return C6()||{name:"",description:"",url:"",icons:[""]}}function fce(){if(Dm()===Rs.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=yie();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function pce(){var t;const e=Dm();return e===Rs.browser?[e,((t=E6())==null?void 0:t.host)||"unknown"].join(":"):e}function o4(t,e,n){const r=fce(),s=pce();return[[t,e].join("-"),[cce,n].join("-"),r,s].join("/")}function gce({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=o4(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=dce(l[1]||"",d);return l[0]+"?"+h}function $l(t,e){return t.filter(n=>e.includes(n)).length===t.length}function Ix(t){return Object.fromEntries(t.entries())}function Tx(t){return new Map(Object.entries(t))}function _l(t=ge.FIVE_MINUTES,e){const n=ge.toMiliseconds(t||ge.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Cc(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function a4(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function mce(t){return a4("topic",t)}function yce(t){return a4("id",t)}function c4(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function On(t,e){return ge.fromMiliseconds(Date.now()+ge.toMiliseconds(t))}function Za(t){return Date.now()>=ge.toMiliseconds(t)}function Nt(t,e){return`${t}${e?`:${e}`:""}`}function xo(t=[],e=[]){return[...new Set([...t,...e])]}async function wce({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=vce(i,t,e),a=Dm();if(a===Rs.browser){if(!((r=yu())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}bce(o)}else a===Rs.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function vce(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${xce(r,!0)}`}else s=`${s}/wc?${r}`;return s}function bce(t){let e="_self";Cce()?e="_top":(Ece()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function _ce(t,e){let n="";try{if(Yh()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function rk(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function sk(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function O2(){return typeof process<"u"&&Xae.IS_VITEST==="true"}function Ece(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Cce(){try{return window.self!==window.top}catch{return!1}}function xce(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function l4(t){return Buffer.from(t,"base64").toString("utf-8")}function Sce(t){return new Promise(e=>setTimeout(e,t))}const Hy=BigInt(2**32-1),ik=BigInt(32);function u4(t,e=!1){return e?{h:Number(t&Hy),l:Number(t>>ik&Hy)}:{h:Number(t>>ik&Hy)|0,l:Number(t&Hy)|0}}function d4(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=u4(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const ok=(t,e,n)=>t>>>n,ak=(t,e,n)=>t<<32-n|e>>>n,Xa=(t,e,n)=>t>>>n|e<<32-n,ec=(t,e,n)=>t<<32-n|e>>>n,sp=(t,e,n)=>t<<64-n|e>>>n-32,ip=(t,e,n)=>t>>>n-32|e<<64-n,Ace=(t,e)=>e,Ice=(t,e)=>t,Tce=(t,e,n)=>t<<n|e>>>32-n,Nce=(t,e,n)=>e<<n|t>>>32-n,Pce=(t,e,n)=>e<<n-32|t>>>64-n,kce=(t,e,n)=>t<<n-32|e>>>64-n;function Ai(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const R2=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),$2=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Oce=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Rce=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,$ce=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Dce=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Zu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function D2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ba(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ui(t,...e){if(!D2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function j2(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ba(t.outputLen),ba(t.blockLen)}function Zc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function U2(t,e){ui(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Lg(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function di(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function A_(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function no(t,e){return t<<32-e|t>>>e}const h4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function f4(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Ho=h4?t=>t:t=>f4(t);function jce(t){for(let e=0;e<t.length;e++)t[e]=f4(t[e]);return t}const tc=h4?t=>t:jce,p4=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Uce=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Mg(t){if(ui(t),p4)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Uce[t[n]];return e}const Fo={_0:48,_9:57,A:65,F:70,a:97,f:102};function ck(t){if(t>=Fo._0&&t<=Fo._9)return t-Fo._0;if(t>=Fo.A&&t<=Fo.F)return t-(Fo.A-10);if(t>=Fo.a&&t<=Fo.f)return t-(Fo.a-10)}function L2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(p4)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=ck(t.charCodeAt(i)),a=ck(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Lce(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Fi(t){return typeof t=="string"&&(t=Lce(t)),ui(t),t}function Dl(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];ui(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let rb=class{};function jm(t){const e=r=>t().update(Fi(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Mce(t){const e=(r,s)=>t(s).update(Fi(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Qh(t=32){if(Zu&&typeof Zu.getRandomValues=="function")return Zu.getRandomValues(new Uint8Array(t));if(Zu&&typeof Zu.randomBytes=="function")return Uint8Array.from(Zu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Bce=BigInt(0),jf=BigInt(1),Fce=BigInt(2),zce=BigInt(7),Wce=BigInt(256),qce=BigInt(113),g4=[],m4=[],y4=[];for(let t=0,e=jf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],g4.push(2*(5*r+n)),m4.push((t+1)*(t+2)/2%64);let s=Bce;for(let i=0;i<7;i++)e=(e<<jf^(e>>zce)*qce)%Wce,e&Fce&&(s^=jf<<(jf<<BigInt(i))-jf);y4.push(s)}const w4=d4(y4,!0),Hce=w4[0],Vce=w4[1],lk=(t,e,n)=>n>32?Pce(t,e,n):Tce(t,e,n),uk=(t,e,n)=>n>32?kce(t,e,n):Nce(t,e,n);function Gce(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=lk(l,u,1)^n[a],h=uk(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=m4[o],c=lk(s,i,a),l=uk(s,i,a),u=g4[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Hce[r],t[1]^=Vce[r]}di(n)}let Kce=class v4 extends rb{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,ba(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Lg(this.state)}clone(){return this._cloneInto()}keccak(){tc(this.state32),Gce(this.state32,this.rounds),tc(this.state32),this.posOut=0,this.pos=0}update(e){Zc(this),e=Fi(e),ui(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Zc(this,!1),ui(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ba(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(U2(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,di(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new v4(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Yce=(t,e,n)=>jm(()=>new Kce(e,t,n)),Qce=Yce(1,136,256/8);function Jce(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Zce(t,e,n){return t&e^~t&n}function Xce(t,e,n){return t&e^t&n^e&n}let b4=class extends rb{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=A_(this.buffer)}update(e){Zc(this),e=Fi(e),ui(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=A_(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Zc(this),U2(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,di(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Jce(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=A_(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const La=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_r=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Er=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ele=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ma=new Uint32Array(64);let tle=class extends b4{constructor(e=32){super(64,e,8,!1),this.A=La[0]|0,this.B=La[1]|0,this.C=La[2]|0,this.D=La[3]|0,this.E=La[4]|0,this.F=La[5]|0,this.G=La[6]|0,this.H=La[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ma[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ma[d-15],f=Ma[d-2],p=no(h,7)^no(h,18)^h>>>3,m=no(f,17)^no(f,19)^f>>>10;Ma[d]=m+Ma[d-7]+p+Ma[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=no(a,6)^no(a,11)^no(a,25),f=u+h+Zce(a,c,l)+ele[d]+Ma[d]|0,p=(no(r,2)^no(r,13)^no(r,22))+Xce(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){di(Ma)}destroy(){this.set(0,0,0,0,0,0,0,0),di(this.buffer)}};const _4=d4(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),nle=_4[0],rle=_4[1],Ba=new Uint32Array(80),Fa=new Uint32Array(80);let M2=class extends b4{constructor(e=64){super(128,e,16,!1),this.Ah=Er[0]|0,this.Al=Er[1]|0,this.Bh=Er[2]|0,this.Bl=Er[3]|0,this.Ch=Er[4]|0,this.Cl=Er[5]|0,this.Dh=Er[6]|0,this.Dl=Er[7]|0,this.Eh=Er[8]|0,this.El=Er[9]|0,this.Fh=Er[10]|0,this.Fl=Er[11]|0,this.Gh=Er[12]|0,this.Gl=Er[13]|0,this.Hh=Er[14]|0,this.Hl=Er[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Ba[v]=e.getUint32(n),Fa[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const E=Ba[v-15]|0,_=Fa[v-15]|0,S=Xa(E,_,1)^Xa(E,_,8)^ok(E,_,7),x=ec(E,_,1)^ec(E,_,8)^ak(E,_,7),A=Ba[v-2]|0,C=Fa[v-2]|0,k=Xa(A,C,19)^sp(A,C,61)^ok(A,C,6),O=ec(A,C,19)^ip(A,C,61)^ak(A,C,6),M=Oce(x,O,Fa[v-7],Fa[v-16]),F=Rce(M,S,k,Ba[v-7],Ba[v-16]);Ba[v]=F|0,Fa[v]=M|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const E=Xa(d,h,14)^Xa(d,h,18)^sp(d,h,41),_=ec(d,h,14)^ec(d,h,18)^ip(d,h,41),S=d&f^~d&m,x=h&p^~h&w,A=$ce(b,_,x,rle[v],Fa[v]),C=Dce(A,y,E,S,nle[v],Ba[v]),k=A|0,O=Xa(r,s,28)^sp(r,s,34)^sp(r,s,39),M=ec(r,s,28)^ip(r,s,34)^ip(r,s,39),F=r&i^r&a^i&a,V=s&o^s&c^o&c;y=m|0,b=w|0,m=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ai(l|0,u|0,C|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const N=R2(k,M,V);r=$2(N,C,O,F),s=N|0}({h:r,l:s}=Ai(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ai(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ai(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ai(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ai(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ai(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:w}=Ai(this.Gh|0,this.Gl|0,m|0,w|0),{h:y,l:b}=Ai(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,m,w,y,b)}roundClean(){di(Ba,Fa)}destroy(){di(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},sle=class extends M2{constructor(){super(48),this.Ah=_r[0]|0,this.Al=_r[1]|0,this.Bh=_r[2]|0,this.Bl=_r[3]|0,this.Ch=_r[4]|0,this.Cl=_r[5]|0,this.Dh=_r[6]|0,this.Dl=_r[7]|0,this.Eh=_r[8]|0,this.El=_r[9]|0,this.Fh=_r[10]|0,this.Fl=_r[11]|0,this.Gh=_r[12]|0,this.Gl=_r[13]|0,this.Hh=_r[14]|0,this.Hl=_r[15]|0}};const Cr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let ile=class extends M2{constructor(){super(32),this.Ah=Cr[0]|0,this.Al=Cr[1]|0,this.Bh=Cr[2]|0,this.Bl=Cr[3]|0,this.Ch=Cr[4]|0,this.Cl=Cr[5]|0,this.Dh=Cr[6]|0,this.Dl=Cr[7]|0,this.Eh=Cr[8]|0,this.El=Cr[9]|0,this.Fh=Cr[10]|0,this.Fl=Cr[11]|0,this.Gh=Cr[12]|0,this.Gl=Cr[13]|0,this.Hh=Cr[14]|0,this.Hl=Cr[15]|0}};const sb=jm(()=>new tle),ole=jm(()=>new M2),ale=jm(()=>new sle),cle=jm(()=>new ile),lle=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),kn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Se=new Uint32Array(32);function za(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Se[2*t],l=Se[2*t+1],u=Se[2*e],d=Se[2*e+1],h=Se[2*n],f=Se[2*n+1],p=Se[2*r],m=Se[2*r+1],w=R2(c,u,o);l=$2(w,l,d,a),c=w|0,{Dh:m,Dl:p}={Dh:m^l,Dl:p^c},{Dh:m,Dl:p}={Dh:Ace(m,p),Dl:Ice(m)},{h:f,l:h}=Ai(f,h,m,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Xa(d,u,24),Bl:ec(d,u,24)},Se[2*t]=c,Se[2*t+1]=l,Se[2*e]=u,Se[2*e+1]=d,Se[2*n]=h,Se[2*n+1]=f,Se[2*r]=p,Se[2*r+1]=m}function Wa(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Se[2*t],l=Se[2*t+1],u=Se[2*e],d=Se[2*e+1],h=Se[2*n],f=Se[2*n+1],p=Se[2*r],m=Se[2*r+1],w=R2(c,u,o);l=$2(w,l,d,a),c=w|0,{Dh:m,Dl:p}={Dh:m^l,Dl:p^c},{Dh:m,Dl:p}={Dh:Xa(m,p,16),Dl:ec(m,p,16)},{h:f,l:h}=Ai(f,h,m,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:sp(d,u,63),Bl:ip(d,u,63)},Se[2*t]=c,Se[2*t+1]=l,Se[2*e]=u,Se[2*e+1]=d,Se[2*n]=h,Se[2*n+1]=f,Se[2*r]=p,Se[2*r+1]=m}function ule(t,e={},n,r,s){if(ba(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class dle extends rb{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,ba(e),ba(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Lg(this.buffer)}update(e){Zc(this),e=Fi(e),ui(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(tc(s),this.compress(s,0,!1),tc(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));tc(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);tc(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Zc(this),U2(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,di(this.buffer.subarray(n)),tc(r),this.compress(r,0,!0),tc(r);const s=Lg(e);this.get().forEach((i,o)=>s[o]=Ho(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class hle extends dle{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=kn[0]|0,this.v0h=kn[1]|0,this.v1l=kn[2]|0,this.v1h=kn[3]|0,this.v2l=kn[4]|0,this.v2h=kn[5]|0,this.v3l=kn[6]|0,this.v3h=kn[7]|0,this.v4l=kn[8]|0,this.v4h=kn[9]|0,this.v5l=kn[10]|0,this.v5h=kn[11]|0,this.v6l=kn[12]|0,this.v6h=kn[13]|0,this.v7l=kn[14]|0,this.v7h=kn[15]|0,ule(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Fi(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Fi(i);const a=Lg(i);this.v4l^=Ho(a[0]),this.v4h^=Ho(a[1]),this.v5l^=Ho(a[2]),this.v5h^=Ho(a[3])}if(s!==void 0){s=Fi(s);const a=Lg(s);this.v6l^=Ho(a[0]),this.v6h^=Ho(a[1]),this.v7l^=Ho(a[2]),this.v7h^=Ho(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:m,v7h:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,w){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=m|0,this.v7h=w|0}compress(e,n,r){this.get().forEach((c,l)=>Se[l]=c),Se.set(kn,16);let{h:s,l:i}=u4(BigInt(this.length));Se[24]=kn[8]^i,Se[25]=kn[9]^s,r&&(Se[28]=~Se[28],Se[29]=~Se[29]);let o=0;const a=lle;for(let c=0;c<12;c++)za(0,4,8,12,e,n+2*a[o++]),Wa(0,4,8,12,e,n+2*a[o++]),za(1,5,9,13,e,n+2*a[o++]),Wa(1,5,9,13,e,n+2*a[o++]),za(2,6,10,14,e,n+2*a[o++]),Wa(2,6,10,14,e,n+2*a[o++]),za(3,7,11,15,e,n+2*a[o++]),Wa(3,7,11,15,e,n+2*a[o++]),za(0,5,10,15,e,n+2*a[o++]),Wa(0,5,10,15,e,n+2*a[o++]),za(1,6,11,12,e,n+2*a[o++]),Wa(1,6,11,12,e,n+2*a[o++]),za(2,7,8,13,e,n+2*a[o++]),Wa(2,7,8,13,e,n+2*a[o++]),za(3,4,9,14,e,n+2*a[o++]),Wa(3,4,9,14,e,n+2*a[o++]);this.v0l^=Se[0]^Se[16],this.v0h^=Se[1]^Se[17],this.v1l^=Se[2]^Se[18],this.v1h^=Se[3]^Se[19],this.v2l^=Se[4]^Se[20],this.v2h^=Se[5]^Se[21],this.v3l^=Se[6]^Se[22],this.v3h^=Se[7]^Se[23],this.v4l^=Se[8]^Se[24],this.v4h^=Se[9]^Se[25],this.v5l^=Se[10]^Se[26],this.v5h^=Se[11]^Se[27],this.v6l^=Se[12]^Se[28],this.v6h^=Se[13]^Se[29],this.v7l^=Se[14]^Se[30],this.v7h^=Se[15]^Se[31],di(Se)}destroy(){this.destroyed=!0,di(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const fle=Mce(t=>new hle(t)),ple="https://rpc.walletconnect.org/v1";function E4(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Qce(n)).toString("hex")}async function gle(t,e,n,r,s,i){switch(n.t){case"eip191":return await mle(t,e,n.s);case"eip1271":return await yle(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function mle(t,e,n){return(await Jie({hash:E4(e),signature:n})).toLowerCase()===t.toLowerCase()}async function yle(t,e,n,r,s,i){const o=Kd(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:E4(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||ple}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:wle(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function wle(){return Date.now()+Math.floor(Math.random()*1e3)}function vle(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Kh.encode(i)}function ble(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=fle(r,{dkLen:32});return Kh.encode(s)}function dk(t){const e=new Uint8Array(sb(_le(t)));return Kh.encode(e)}function _le(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function hk(t){const e=Buffer.from(t,"base64"),n=Doe(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Aoe(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=cle(i);return Woe.encode(o).replace(/=+$/,"")}function I_(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function Ele(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(I_(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(I_(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(I_(r.length)),s.push(r);const i=Buffer.concat(s),o=sb(i);return Buffer.from(o).toString("hex").toUpperCase()}var Cle=Object.defineProperty,xle=Object.defineProperties,Sle=Object.getOwnPropertyDescriptors,fk=Object.getOwnPropertySymbols,Ale=Object.prototype.hasOwnProperty,Ile=Object.prototype.propertyIsEnumerable,pk=(t,e,n)=>e in t?Cle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tle=(t,e)=>{for(var n in e||(e={}))Ale.call(e,n)&&pk(t,n,e[n]);if(fk)for(var n of fk(e))Ile.call(e,n)&&pk(t,n,e[n]);return t},Nle=(t,e)=>xle(t,Sle(e));const Ple="did:pkh:",B2=t=>t==null?void 0:t.split(":"),kle=t=>{const e=t&&B2(t);if(e)return t.includes(Ple)?e[3]:e[1]},Nx=t=>{const e=t&&B2(t);if(e)return e[2]+":"+e[3]},M0=t=>{const e=t&&B2(t);if(e)return e.pop()};async function gk(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=C4(s,s.iss),o=M0(s.iss);return await gle(o,i,r,Nx(s.iss),n)}const C4=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=M0(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${kle(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(m=>`
- ${m}`).join("")}`:void 0,p=jw(t.resources);if(p){const m=Bg(p);s=Ble(s,m)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(m=>m!=null).join(`
`)};function Ole(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Rle(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function vu(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function $le(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Dle(e,n,r)}}}function Dle(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function x4(t){return vu(t),`urn:recap:${Ole(t).replace(/=/g,"")}`}function Bg(t){const e=Rle(t.replace("urn:recap:",""));return vu(e),e}function jle(t,e,n){const r=$le(t,e,n);return x4(r)}function Ule(t){return t&&t.includes("urn:recap:")}function Lle(t,e){const n=Bg(t),r=Bg(e),s=Mle(n,r);return x4(s)}function Mle(t,e){vu(t),vu(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=Nle(Tle({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Ble(t="",e){vu(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function mk(t){var e;const n=Bg(t);vu(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function yk(t){const e=Bg(t);vu(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function jw(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Ule(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function S4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Px(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function T_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ls(t,...e){if(!S4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function wk(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Fle(t,e){ls(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Bc(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Sh(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function zle(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Wle=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function qle(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function kx(t){if(typeof t=="string")t=qle(t);else if(S4(t))t=Ox(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Hle(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Vle(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Gle=(t,e)=>{function n(r,...s){if(ls(r),!Wle)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?ls(l):ls(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&ls(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");ls(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ls(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(ls(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function vk(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Yle(e))throw new Error("invalid output, must be aligned");return e}function bk(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Kle(t,e,n){Px(n);const r=new Uint8Array(16),s=zle(r);return bk(s,0,BigInt(e),n),bk(s,8,BigInt(t),n),r}function Yle(t){return t.byteOffset%4===0}function Ox(t){return Uint8Array.from(t)}const A4=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Qle=A4("expand 16-byte k"),Jle=A4("expand 32-byte k"),Zle=Bc(Qle),Xle=Bc(Jle);function Et(t,e){return t<<e|t>>>32-e}function Rx(t){return t.byteOffset%4===0}const Vy=64,eue=16,I4=2**32-1,_k=new Uint32Array;function tue(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(Vy),u=Bc(l),d=Rx(s)&&Rx(i),h=d?Bc(s):_k,f=d?Bc(i):_k;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=I4)throw new Error("arx: counter overflow");const m=Math.min(Vy,c-p);if(d&&m===Vy){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<eue;y++)b=w+y,f[b]=h[b]^u[y];p+=Vy;continue}for(let w=0,y;w<m;w++)y=p+w,i[y]=s[y]^l[w];p+=m}}function nue(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Hle({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return T_(s),T_(o),Px(i),Px(n),(a,c,l,u,d=0)=>{ls(a),ls(c),ls(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),ls(u),T_(d),d<0||d>=I4)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,m,w;if(p===32)f.push(m=Ox(a)),w=Xle;else if(p===16&&n)m=new Uint8Array(32),m.set(a),m.set(a,16),w=Zle,f.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);Rx(c)||f.push(c=Ox(c));const y=Bc(m);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,Bc(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const E=new Uint8Array(12);E.set(c,i?0:12-c.length),c=E,f.push(c)}const v=Bc(c);return tue(t,w,y,v,l,u,d,o),Sh(...f),u}}const Xn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class rue{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=kx(e),ls(e,32);const n=Xn(e,0),r=Xn(e,2),s=Xn(e,4),i=Xn(e,6),o=Xn(e,8),a=Xn(e,10),c=Xn(e,12),l=Xn(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Xn(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],m=o[8],w=o[9],y=Xn(e,n+0),b=Xn(e,n+2),v=Xn(e,n+4),E=Xn(e,n+6),_=Xn(e,n+8),S=Xn(e,n+10),x=Xn(e,n+12),A=Xn(e,n+14);let C=i[0]+(y&8191),k=i[1]+((y>>>13|b<<3)&8191),O=i[2]+((b>>>10|v<<6)&8191),M=i[3]+((v>>>7|E<<9)&8191),F=i[4]+((E>>>4|_<<12)&8191),V=i[5]+(_>>>1&8191),N=i[6]+((_>>>14|S<<2)&8191),T=i[7]+((S>>>11|x<<5)&8191),L=i[8]+((x>>>8|A<<8)&8191),D=i[9]+(A>>>5|s),$=0,U=$+C*a+k*(5*w)+O*(5*m)+M*(5*p)+F*(5*f);$=U>>>13,U&=8191,U+=V*(5*h)+N*(5*d)+T*(5*u)+L*(5*l)+D*(5*c),$+=U>>>13,U&=8191;let W=$+C*c+k*a+O*(5*w)+M*(5*m)+F*(5*p);$=W>>>13,W&=8191,W+=V*(5*f)+N*(5*h)+T*(5*d)+L*(5*u)+D*(5*l),$+=W>>>13,W&=8191;let J=$+C*l+k*c+O*a+M*(5*w)+F*(5*m);$=J>>>13,J&=8191,J+=V*(5*p)+N*(5*f)+T*(5*h)+L*(5*d)+D*(5*u),$+=J>>>13,J&=8191;let ie=$+C*u+k*l+O*c+M*a+F*(5*w);$=ie>>>13,ie&=8191,ie+=V*(5*m)+N*(5*p)+T*(5*f)+L*(5*h)+D*(5*d),$+=ie>>>13,ie&=8191;let ne=$+C*d+k*u+O*l+M*c+F*a;$=ne>>>13,ne&=8191,ne+=V*(5*w)+N*(5*m)+T*(5*p)+L*(5*f)+D*(5*h),$+=ne>>>13,ne&=8191;let se=$+C*h+k*d+O*u+M*l+F*c;$=se>>>13,se&=8191,se+=V*a+N*(5*w)+T*(5*m)+L*(5*p)+D*(5*f),$+=se>>>13,se&=8191;let we=$+C*f+k*h+O*d+M*u+F*l;$=we>>>13,we&=8191,we+=V*c+N*a+T*(5*w)+L*(5*m)+D*(5*p),$+=we>>>13,we&=8191;let Y=$+C*p+k*f+O*h+M*d+F*u;$=Y>>>13,Y&=8191,Y+=V*l+N*c+T*a+L*(5*w)+D*(5*m),$+=Y>>>13,Y&=8191;let X=$+C*m+k*p+O*f+M*h+F*d;$=X>>>13,X&=8191,X+=V*u+N*l+T*c+L*a+D*(5*w),$+=X>>>13,X&=8191;let oe=$+C*w+k*m+O*p+M*f+F*h;$=oe>>>13,oe&=8191,oe+=V*d+N*u+T*l+L*c+D*a,$+=oe>>>13,oe&=8191,$=($<<2)+$|0,$=$+U|0,U=$&8191,$=$>>>13,W+=$,i[0]=U,i[1]=W,i[2]=J,i[3]=ie,i[4]=ne,i[5]=se,i[6]=we,i[7]=Y,i[8]=X,i[9]=oe}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Sh(r)}update(e){wk(this),e=kx(e),ls(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Sh(this.h,this.r,this.buffer,this.pad)}digestInto(e){wk(this),Fle(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function sue(t){const e=(r,s)=>t(s).update(kx(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const iue=sue(t=>new rue(t));function oue(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],m=e[5],w=e[6],y=e[7],b=s,v=n[0],E=n[1],_=n[2],S=o,x=a,A=c,C=l,k=u,O=d,M=h,F=f,V=p,N=m,T=w,L=y,D=b,$=v,U=E,W=_;for(let ie=0;ie<i;ie+=2)S=S+k|0,D=Et(D^S,16),V=V+D|0,k=Et(k^V,12),S=S+k|0,D=Et(D^S,8),V=V+D|0,k=Et(k^V,7),x=x+O|0,$=Et($^x,16),N=N+$|0,O=Et(O^N,12),x=x+O|0,$=Et($^x,8),N=N+$|0,O=Et(O^N,7),A=A+M|0,U=Et(U^A,16),T=T+U|0,M=Et(M^T,12),A=A+M|0,U=Et(U^A,8),T=T+U|0,M=Et(M^T,7),C=C+F|0,W=Et(W^C,16),L=L+W|0,F=Et(F^L,12),C=C+F|0,W=Et(W^C,8),L=L+W|0,F=Et(F^L,7),S=S+O|0,W=Et(W^S,16),T=T+W|0,O=Et(O^T,12),S=S+O|0,W=Et(W^S,8),T=T+W|0,O=Et(O^T,7),x=x+M|0,D=Et(D^x,16),L=L+D|0,M=Et(M^L,12),x=x+M|0,D=Et(D^x,8),L=L+D|0,M=Et(M^L,7),A=A+F|0,$=Et($^A,16),V=V+$|0,F=Et(F^V,12),A=A+F|0,$=Et($^A,8),V=V+$|0,F=Et(F^V,7),C=C+k|0,U=Et(U^C,16),N=N+U|0,k=Et(k^N,12),C=C+k|0,U=Et(U^C,8),N=N+U|0,k=Et(k^N,7);let J=0;r[J++]=o+S|0,r[J++]=a+x|0,r[J++]=c+A|0,r[J++]=l+C|0,r[J++]=u+k|0,r[J++]=d+O|0,r[J++]=h+M|0,r[J++]=f+F|0,r[J++]=p+V|0,r[J++]=m+N|0,r[J++]=w+T|0,r[J++]=y+L|0,r[J++]=b+D|0,r[J++]=v+$|0,r[J++]=E+U|0,r[J++]=_+W|0}const aue=nue(oue,{counterRight:!1,counterLength:4,allowShortKeys:!1}),cue=new Uint8Array(16),Ek=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(cue.subarray(n))},lue=new Uint8Array(32);function Ck(t,e,n,r,s){const i=t(e,n,lue),o=iue.create(i);s&&Ek(o,s),Ek(o,r);const a=Kle(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Sh(i,a),c}const uue=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=vk(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Ck(t,e,n,a,r);return i.set(c,o),Sh(c),i},decrypt(s,i){i=vk(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Ck(t,e,n,o,r);if(!Vle(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Sh(c),i}}),T4=Gle({blockSize:64,nonceLength:12,tagLength:16},uue(aue));let N4=class extends rb{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,j2(e);const r=Fi(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),di(i)}update(e){return Zc(this),this.iHash.update(e),this}digestInto(e){Zc(this),ui(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const ib=(t,e,n)=>new N4(t,e).update(n).digest();ib.create=(t,e)=>new N4(t,e);function due(t,e,n){return j2(t),n===void 0&&(n=new Uint8Array(t.outputLen)),ib(t,Fi(n),Fi(e))}const N_=Uint8Array.from([0]),xk=Uint8Array.of();function hue(t,e,n,r=32){j2(t),ba(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=xk);const o=new Uint8Array(i*s),a=ib.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)N_[0]=u+1,c.update(u===0?xk:l).update(n).update(N_).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),di(l,N_),o.slice(0,r)}const fue=(t,e,n,r,s)=>hue(t,due(t,e,n),r,s),ob=sb,F2=BigInt(0),$x=BigInt(1);function B0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Gy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function P4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?F2:BigInt("0x"+t)}function ab(t){return P4(Mg(t))}function F0(t){return ui(t),P4(Mg(Uint8Array.from(t).reverse()))}function z2(t,e){return L2(t.toString(16).padStart(e*2,"0"))}function W2(t,e){return z2(t,e).reverse()}function cs(t,e,n){let r;if(typeof e=="string")try{r=L2(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(D2(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const P_=t=>typeof t=="bigint"&&F2<=t;function pue(t,e,n){return P_(t)&&P_(e)&&P_(n)&&e<=t&&t<n}function Dx(t,e,n,r){if(!pue(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function gue(t){let e;for(e=0;t>F2;t>>=$x,e+=1);return e}const cb=t=>($x<<BigInt(t))-$x;function mue(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return Dl(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function lb(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function Sk(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const fs=BigInt(0),Br=BigInt(1),jl=BigInt(2),yue=BigInt(3),k4=BigInt(4),O4=BigInt(5),R4=BigInt(8);function ni(t,e){const n=t%e;return n>=fs?n:e+n}function Ci(t,e,n){let r=t;for(;e-- >fs;)r*=r,r%=n;return r}function Ak(t,e){if(t===fs)throw new Error("invert: expected non-zero number");if(e<=fs)throw new Error("invert: expected positive modulus, got "+e);let n=ni(t,e),r=e,s=fs,i=Br;for(;n!==fs;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Br)throw new Error("invert: does not exist");return ni(s,e)}function $4(t,e){const n=(t.ORDER+Br)/k4,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function wue(t,e){const n=(t.ORDER-O4)/R4,r=t.mul(e,jl),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,jl),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function vue(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Br,n=0;for(;e%jl===fs;)e/=jl,n++;let r=jl;const s=Jh(t);for(;Ik(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return $4;let i=s.pow(r,e);const o=(e+Br)/jl;return function(a,c){if(a.is0(c))return c;if(Ik(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const m=Br<<BigInt(l-f-1),w=a.pow(u,m);l=f,u=a.sqr(w),d=a.mul(d,u),h=a.mul(h,w)}return h}}function bue(t){return t%k4===yue?$4:t%R4===O4?wue:vue(t)}const _ue=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Eue(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=_ue.reduce((r,s)=>(r[s]="function",r),e);return lb(t,n),t}function Cue(t,e,n){if(n<fs)throw new Error("invalid exponent, negatives unsupported");if(n===fs)return t.ONE;if(n===Br)return e;let r=t.ONE,s=e;for(;n>fs;)n&Br&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Br;return r}function D4(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function Ik(t,e){const n=(t.ORDER-Br)/jl,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function xue(t,e){e!==void 0&&ba(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Jh(t,e,n=!1,r={}){if(t<=fs)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=xue(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:cb(o),ZERO:fs,ONE:Br,create:u=>ni(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return fs<=u&&u<t},is0:u=>u===fs,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Br)===Br,neg:u=>ni(-u,t),eql:(u,d)=>u===d,sqr:u=>ni(u*u,t),add:(u,d)=>ni(u+d,t),sub:(u,d)=>ni(u-d,t),mul:(u,d)=>ni(u*d,t),pow:(u,d)=>Cue(l,u,d),div:(u,d)=>ni(u*Ak(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>Ak(u,t),sqrt:i||(u=>(c||(c=bue(t)),c(l,u))),toBytes:u=>n?W2(u,a):z2(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?F0(u):ab(u)},invertBatch:u=>D4(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function j4(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function U4(t){const e=j4(t);return e+Math.ceil(e/2)}function Sue(t,e,n=!1){const r=t.length,s=j4(e),i=U4(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?F0(t):ab(t),a=ni(o,e-Br)+Br;return n?W2(a,s):z2(a,s)}const Ah=BigInt(0),Ul=BigInt(1);function Ap(t,e){const n=e.negate();return t?n:e}function Aue(t,e,n){const r=i=>i.pz,s=D4(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function L4(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function k_(t,e){L4(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=cb(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Tk(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Ul);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Iue(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Tue(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const O_=new WeakMap,M4=new WeakMap;function R_(t){return M4.get(t)||1}function Nk(t){if(t!==Ah)throw new Error("invalid wNAF")}function Nue(t,e){return{constTimeNegate:Ap,hasPrecomputes(n){return R_(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Ah;)r&Ul&&(s=s.add(i)),i=i.double(),r>>=Ul;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=k_(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=k_(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=Tk(s,c,a);s=l,d?o=o.add(Ap(f,r[p])):i=i.add(Ap(h,r[u]))}return Nk(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=k_(n,e);for(let a=0;a<o.windows&&s!==Ah;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=Tk(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return Nk(s),i},getPrecomputes(n,r,s){let i=O_.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),O_.set(r,i))),i},wNAFCached(n,r,s){const i=R_(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=R_(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){L4(r,e),M4.set(n,r),O_.delete(n)}}}function Pue(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Ah||r>Ah;)n&Ul&&(i=i.add(s)),r&Ul&&(o=o.add(s)),s=s.double(),n>>=Ul,r>>=Ul;return{p1:i,p2:o}}function kue(t,e,n,r){Iue(n,t),Tue(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=gue(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=cb(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let m=0;m<i;m++){const w=r[m],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[m])}let p=o;for(let m=u.length-1,w=o;m>0;m--)w=w.add(u[m]),p=p.add(w);if(h=h.add(p),f!==0)for(let m=0;m<c;m++)h=h.double()}return h}function Pk(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Eue(e),e}else return Jh(t)}function Oue(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>Ah))throw new Error(`CURVE.${o} must be positive bigint`)}const r=Pk(e.p,n.Fp),s=Pk(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Uf=BigInt(0),Xu=BigInt(1),Ky=BigInt(2);function Rue(t){return lb(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function $ue(t){const e=Rue(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Qh,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?Ky**BigInt(254):Ky**BigInt(447),p=a?BigInt(8)*Ky**BigInt(251)-Xu:BigInt(4)*Ky**BigInt(445)-Xu,m=f+p+Xu,w=C=>ni(C,n),y=b(d);function b(C){return W2(w(C),u)}function v(C){const k=cs("u coordinate",C,u);return a&&(k[31]&=127),w(F0(k))}function E(C){return F0(s(cs("scalar",C,u)))}function _(C,k){const O=A(v(k),E(C));if(O===Uf)throw new Error("invalid private or public key received");return b(O)}function S(C){return _(C,y)}function x(C,k,O){const M=w(C*(k-O));return k=w(k-M),O=w(O+M),{x_2:k,x_3:O}}function A(C,k){Dx("u",C,Uf,n),Dx("scalar",k,f,m);const O=k,M=C;let F=Xu,V=Uf,N=C,T=Xu,L=Uf;for(let $=BigInt(l-1);$>=Uf;$--){const U=O>>$&Xu;L^=U,{x_2:F,x_3:N}=x(L,F,N),{x_2:V,x_3:T}=x(L,V,T),L=U;const W=F+V,J=w(W*W),ie=F-V,ne=w(ie*ie),se=J-ne,we=N+T,Y=N-T,X=w(Y*W),oe=w(we*ie),te=X+oe,he=X-oe;N=w(te*te),T=w(M*w(he*he)),F=w(J*ne),V=w(se*(J+w(h*se)))}({x_2:F,x_3:N}=x(L,F,N)),{x_2:V,x_3:T}=x(L,V,T);const D=i(V);return w(F*D)}return{scalarMult:_,scalarMultBase:S,getSharedSecret:(C,k)=>_(C,k),getPublicKey:C=>S(C),utils:{randomPrivateKey:()=>c(u)},GuBytes:y.slice()}}BigInt(0);const Due=BigInt(1),kk=BigInt(2),jue=BigInt(3),Uue=BigInt(5);BigInt(8);const B4={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Lue(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=B4.p,o=t*t%i*t%i,a=Ci(o,kk,i)*o%i,c=Ci(a,Due,i)*t%i,l=Ci(c,Uue,i)*c%i,u=Ci(l,e,i)*l%i,d=Ci(u,n,i)*u%i,h=Ci(d,r,i)*d%i,f=Ci(h,s,i)*h%i,p=Ci(f,s,i)*h%i,m=Ci(p,e,i)*l%i;return{pow_p_5_8:Ci(m,kk,i)*t%i,b2:o}}function Mue(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const jx=(()=>{const t=B4.p;return $ue({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=Lue(e);return ni(Ci(n,jue,t)*r,t)},adjustScalarBytes:Mue})})();function Ok(t){t.lowS!==void 0&&B0("lowS",t.lowS),t.prehash!==void 0&&B0("prehash",t.prehash)}class Bue extends Error{constructor(e=""){super(e)}}const Zo={Err:Bue,_tlv:{encode:(t,e)=>{const{Err:n}=Zo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Gy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Gy(s.length/2|128):"";return Gy(t)+i+s+e},decode(t,e){const{Err:n}=Zo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Zo;if(t<Ip)throw new e("integer: negative integers are not allowed");let n=Gy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Zo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ab(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Zo,s=cs("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Zo,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Ip=BigInt(0),Tp=BigInt(1),Fue=BigInt(2),Yy=BigInt(3),zue=BigInt(4);function Wue(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function F4(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=cs("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function que(t,e={}){const{Fp:n,Fn:r}=Oue("weierstrass",t,e),{h:s,n:i}=t;lb(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(A,C,k){const{x:O,y:M}=C.toAffine(),F=n.toBytes(O);if(B0("isCompressed",k),k){a();const V=!n.isOdd(M);return Dl(z4(V),F)}else return Dl(Uint8Array.of(4),F,n.toBytes(M))}function l(A){ui(A);const C=n.BYTES,k=C+1,O=2*C+1,M=A.length,F=A[0],V=A.subarray(1);if(M===k&&(F===2||F===3)){const N=n.fromBytes(V);if(!n.isValid(N))throw new Error("bad point: is not on curve, wrong x");const T=h(N);let L;try{L=n.sqrt(T)}catch($){const U=$ instanceof Error?": "+$.message:"";throw new Error("bad point: is not on curve, sqrt error"+U)}a();const D=n.isOdd(L);return(F&1)===1!==D&&(L=n.neg(L)),{x:N,y:L}}else if(M===O&&F===4){const N=n.fromBytes(V.subarray(C*0,C*1)),T=n.fromBytes(V.subarray(C*1,C*2));if(!f(N,T))throw new Error("bad point: is not on curve");return{x:N,y:T}}else throw new Error(`bad point: got length ${M}, expected compressed=${k} or uncompressed=${O}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Wue(n,t.a,t.b);function f(A,C){const k=n.sqr(C),O=h(A);return n.eql(k,O)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,Yy),zue),m=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,m)))throw new Error("bad curve params: a or b");function w(A,C,k=!1){if(!n.isValid(C)||k&&n.is0(C))throw new Error(`bad point coordinate ${A}`);return C}function y(A){if(!(A instanceof _))throw new Error("ProjectivePoint expected")}const b=Sk((A,C)=>{const{px:k,py:O,pz:M}=A;if(n.eql(M,n.ONE))return{x:k,y:O};const F=A.is0();C==null&&(C=F?n.ONE:n.inv(M));const V=n.mul(k,C),N=n.mul(O,C),T=n.mul(M,C);if(F)return{x:n.ZERO,y:n.ZERO};if(!n.eql(T,n.ONE))throw new Error("invZ was invalid");return{x:V,y:N}}),v=Sk(A=>{if(A.is0()){if(e.allowInfinityPoint&&!n.is0(A.py))return;throw new Error("bad point: ZERO")}const{x:C,y:k}=A.toAffine();if(!n.isValid(C)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!f(C,k))throw new Error("bad point: equation left != right");if(!A.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function E(A,C,k,O,M){return k=new _(n.mul(k.px,A),k.py,k.pz),C=Ap(O,C),k=Ap(M,k),C.add(k)}class _{constructor(C,k,O){this.px=w("x",C),this.py=w("y",k,!0),this.pz=w("z",O),Object.freeze(this)}static fromAffine(C){const{x:k,y:O}=C||{};if(!C||!n.isValid(k)||!n.isValid(O))throw new Error("invalid affine point");if(C instanceof _)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(O)?_.ZERO:new _(k,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){return Aue(_,"pz",C)}static fromBytes(C){return ui(C),_.fromHex(C)}static fromHex(C){const k=_.fromAffine(d(cs("pointHex",C)));return k.assertValidity(),k}static fromPrivateKey(C){const k=F4(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(k(C))}static msm(C,k){return kue(_,r,C,k)}precompute(C=8,k=!0){return x.setWindowSize(this,C),k||this.multiply(Yy),this}_setWindowSize(C){this.precompute(C)}assertValidity(){v(this)}hasEvenY(){const{y:C}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(C)}equals(C){y(C);const{px:k,py:O,pz:M}=this,{px:F,py:V,pz:N}=C,T=n.eql(n.mul(k,N),n.mul(F,M)),L=n.eql(n.mul(O,N),n.mul(V,M));return T&&L}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:C,b:k}=t,O=n.mul(k,Yy),{px:M,py:F,pz:V}=this;let N=n.ZERO,T=n.ZERO,L=n.ZERO,D=n.mul(M,M),$=n.mul(F,F),U=n.mul(V,V),W=n.mul(M,F);return W=n.add(W,W),L=n.mul(M,V),L=n.add(L,L),N=n.mul(C,L),T=n.mul(O,U),T=n.add(N,T),N=n.sub($,T),T=n.add($,T),T=n.mul(N,T),N=n.mul(W,N),L=n.mul(O,L),U=n.mul(C,U),W=n.sub(D,U),W=n.mul(C,W),W=n.add(W,L),L=n.add(D,D),D=n.add(L,D),D=n.add(D,U),D=n.mul(D,W),T=n.add(T,D),U=n.mul(F,V),U=n.add(U,U),D=n.mul(U,W),N=n.sub(N,D),L=n.mul(U,$),L=n.add(L,L),L=n.add(L,L),new _(N,T,L)}add(C){y(C);const{px:k,py:O,pz:M}=this,{px:F,py:V,pz:N}=C;let T=n.ZERO,L=n.ZERO,D=n.ZERO;const $=t.a,U=n.mul(t.b,Yy);let W=n.mul(k,F),J=n.mul(O,V),ie=n.mul(M,N),ne=n.add(k,O),se=n.add(F,V);ne=n.mul(ne,se),se=n.add(W,J),ne=n.sub(ne,se),se=n.add(k,M);let we=n.add(F,N);return se=n.mul(se,we),we=n.add(W,ie),se=n.sub(se,we),we=n.add(O,M),T=n.add(V,N),we=n.mul(we,T),T=n.add(J,ie),we=n.sub(we,T),D=n.mul($,se),T=n.mul(U,ie),D=n.add(T,D),T=n.sub(J,D),D=n.add(J,D),L=n.mul(T,D),J=n.add(W,W),J=n.add(J,W),ie=n.mul($,ie),se=n.mul(U,se),J=n.add(J,ie),ie=n.sub(W,ie),ie=n.mul($,ie),se=n.add(se,ie),W=n.mul(J,se),L=n.add(L,W),W=n.mul(we,se),T=n.mul(ne,T),T=n.sub(T,W),W=n.mul(ne,J),D=n.mul(we,D),D=n.add(D,W),new _(T,L,D)}subtract(C){return this.add(C.negate())}is0(){return this.equals(_.ZERO)}multiply(C){const{endo:k}=e;if(!r.isValidNot0(C))throw new Error("invalid scalar: out of range");let O,M;const F=V=>x.wNAFCached(this,V,_.normalizeZ);if(k){const{k1neg:V,k1:N,k2neg:T,k2:L}=k.splitScalar(C),{p:D,f:$}=F(N),{p:U,f:W}=F(L);M=$.add(W),O=E(k.beta,D,U,V,T)}else{const{p:V,f:N}=F(C);O=V,M=N}return _.normalizeZ([O,M])[0]}multiplyUnsafe(C){const{endo:k}=e,O=this;if(!r.isValid(C))throw new Error("invalid scalar: out of range");if(C===Ip||O.is0())return _.ZERO;if(C===Tp)return O;if(x.hasPrecomputes(this))return this.multiply(C);if(k){const{k1neg:M,k1:F,k2neg:V,k2:N}=k.splitScalar(C),{p1:T,p2:L}=Pue(_,O,F,N);return E(k.beta,T,L,M,V)}else return x.wNAFCachedUnsafe(O,C)}multiplyAndAddUnsafe(C,k,O){const M=this.multiplyUnsafe(k).add(C.multiplyUnsafe(O));return M.is0()?void 0:M}toAffine(C){return b(this,C)}isTorsionFree(){const{isTorsionFree:C}=e;return s===Tp?!0:C?C(_,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:C}=e;return s===Tp?this:C?C(_,this):this.multiplyUnsafe(s)}toBytes(C=!0){return B0("isCompressed",C),this.assertValidity(),u(_,this,C)}toRawBytes(C=!0){return this.toBytes(C)}toHex(C=!0){return Mg(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const S=r.BITS,x=Nue(_,e.endo?Math.ceil(S/2):S);return _}function z4(t){return Uint8Array.of(t?2:3)}function Hue(t,e,n={}){lb(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Qh,s=e.hmac||((O,...M)=>ib(e.hash,O,Dl(...M))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(O){const M=a>>Tp;return O>M}function u(O){return l(O)?o.neg(O):O}function d(O,M){if(!o.isValidNot0(M))throw new Error(`invalid signature ${O}: out of range 1..CURVE.n`)}class h{constructor(M,F,V){d("r",M),d("s",F),this.r=M,this.s=F,V!=null&&(this.recovery=V),Object.freeze(this)}static fromCompact(M){const F=o.BYTES,V=cs("compactSignature",M,F*2);return new h(o.fromBytes(V.subarray(0,F)),o.fromBytes(V.subarray(F,F*2)))}static fromDER(M){const{r:F,s:V}=Zo.toSig(cs("DER",M));return new h(F,V)}assertValidity(){}addRecoveryBit(M){return new h(this.r,this.s,M)}recoverPublicKey(M){const F=i.ORDER,{r:V,s:N,recovery:T}=this;if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");if(a*Fue<F&&T>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=T===2||T===3?V+a:V;if(!i.isValid(L))throw new Error("recovery id 2 or 3 invalid");const D=i.toBytes(L),$=t.fromHex(Dl(z4((T&1)===0),D)),U=o.inv(L),W=v(cs("msgHash",M)),J=o.create(-W*U),ie=o.create(N*U),ne=t.BASE.multiplyUnsafe(J).add($.multiplyUnsafe(ie));if(ne.is0())throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(M){if(M==="compact")return Dl(o.toBytes(this.r),o.toBytes(this.s));if(M==="der")return L2(Zo.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Mg(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Mg(this.toBytes("compact"))}}const f=F4(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(O){try{return f(O),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const O=a;return Sue(r(U4(O)),O)},precompute(O=8,M=t.BASE){return M.precompute(O,!1)}};function m(O,M=!0){return t.fromPrivateKey(O).toBytes(M)}function w(O){if(typeof O=="bigint")return!1;if(O instanceof t)return!0;const M=cs("key",O).length,F=i.BYTES,V=F+1,N=2*F+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===V))return M===V||M===N}function y(O,M,F=!0){if(w(O)===!0)throw new Error("first arg must be private key");if(w(M)===!1)throw new Error("second arg must be public key");return t.fromHex(M).multiply(f(O)).toBytes(F)}const b=e.bits2int||function(O){if(O.length>8192)throw new Error("input is too large");const M=ab(O),F=O.length*8-c;return F>0?M>>BigInt(F):M},v=e.bits2int_modN||function(O){return o.create(b(O))},E=cb(c);function _(O){return Dx("num < 2^"+c,O,Ip,E),o.toBytes(O)}function S(O,M,F=x){if(["recovered","canonical"].some(ne=>ne in F))throw new Error("sign() legacy options not supported");const{hash:V}=e;let{lowS:N,prehash:T,extraEntropy:L}=F;N==null&&(N=!0),O=cs("msgHash",O),Ok(F),T&&(O=cs("prehashed msgHash",V(O)));const D=v(O),$=f(M),U=[_($),_(D)];if(L!=null&&L!==!1){const ne=L===!0?r(i.BYTES):L;U.push(cs("extraEntropy",ne))}const W=Dl(...U),J=D;function ie(ne){const se=b(ne);if(!o.isValidNot0(se))return;const we=o.inv(se),Y=t.BASE.multiply(se).toAffine(),X=o.create(Y.x);if(X===Ip)return;const oe=o.create(we*o.create(J+X*$));if(oe===Ip)return;let te=(Y.x===X?0:2)|Number(Y.y&Tp),he=oe;return N&&l(oe)&&(he=u(oe),te^=1),new h(X,he,te)}return{seed:W,k2sig:ie}}const x={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};function C(O,M,F=x){const{seed:V,k2sig:N}=S(O,M,F);return mue(e.hash.outputLen,o.BYTES,s)(V,N)}t.BASE.precompute(8);function k(O,M,F,V=A){const N=O;M=cs("msgHash",M),F=cs("publicKey",F),Ok(V);const{lowS:T,prehash:L,format:D}=V;if("strict"in V)throw new Error("options.strict was renamed to lowS");if(D!==void 0&&!["compact","der","js"].includes(D))throw new Error('format must be "compact", "der" or "js"');const $=typeof N=="string"||D2(N),U=!$&&!D&&typeof N=="object"&&N!==null&&typeof N.r=="bigint"&&typeof N.s=="bigint";if(!$&&!U)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let W,J;try{if(U)if(D===void 0||D==="js")W=new h(N.r,N.s);else throw new Error("invalid format");if($){try{D!=="compact"&&(W=h.fromDER(N))}catch(te){if(!(te instanceof Zo.Err))throw te}!W&&D!=="der"&&(W=h.fromCompact(N))}J=t.fromHex(F)}catch{return!1}if(!W||T&&W.hasHighS())return!1;L&&(M=e.hash(M));const{r:ie,s:ne}=W,se=v(M),we=o.inv(ne),Y=o.create(se*we),X=o.create(ie*we),oe=t.BASE.multiplyUnsafe(Y).add(J.multiplyUnsafe(X));return oe.is0()?!1:o.create(oe.x)===ie}return Object.freeze({getPublicKey:m,getSharedSecret:y,sign:C,verify:k,utils:p,Point:t,Signature:h})}function Vue(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Jh(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Gue(t){const{CURVE:e,curveOpts:n}=Vue(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Kue(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Yue(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Gue(t),s=que(e,n),i=Hue(s,r,n);return Kue(t,i)}function Ux(t,e){const n=r=>Yue({...t,hash:r});return{...n(e),create:n}}const W4={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},q4={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},H4={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Que=Jh(W4.p),Jue=Jh(q4.p),Zue=Jh(H4.p),Xue=Ux({...W4,Fp:Que,lowS:!1},sb);Ux({...q4,Fp:Jue,lowS:!1},ale),Ux({...H4,Fp:Zue,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},ole);const ede=Xue,V4="base10",Fr="base16",Ui="base64pad",ic="base64url",Um="utf8",G4=0,ca=1,Lm=2,tde=0,Rk=1,Np=12,q2=32;function nde(){const t=jx.utils.randomPrivateKey(),e=jx.getPublicKey(t);return{privateKey:ws(t,Fr),publicKey:ws(e,Fr)}}function Lx(){const t=Qh(q2);return ws(t,Fr)}function rde(t,e){const n=jx.getSharedSecret(oi(t,Fr),oi(e,Fr)),r=fue(ob,n,void 0,void 0,q2);return ws(r,Fr)}function Uw(t){const e=ob(oi(t,Fr));return ws(e,Fr)}function go(t){const e=ob(oi(t,Um));return ws(e,Fr)}function K4(t){return oi(`${t}`,V4)}function bu(t){return Number(ws(t,V4))}function Y4(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Q4(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function sde(t){const e=K4(typeof t.type<"u"?t.type:G4);if(bu(e)===ca&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?oi(t.senderPublicKey,Fr):void 0,r=typeof t.iv<"u"?oi(t.iv,Fr):Qh(Np),s=oi(t.symKey,Fr),i=T4(s,r).encrypt(oi(t.message,Um)),o=J4({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===ic?Y4(o):o}function ide(t){const e=oi(t.symKey,Fr),{sealed:n,iv:r}=Fg({encoded:t.encoded,encoding:t.encoding}),s=T4(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ws(s,Um)}function ode(t,e){const n=K4(Lm),r=Qh(Np),s=oi(t,Um),i=J4({type:n,sealed:s,iv:r});return e===ic?Y4(i):i}function ade(t,e){const{sealed:n}=Fg({encoded:t,encoding:e});return ws(n,Um)}function J4(t){if(bu(t.type)===Lm)return ws(Sp([t.type,t.sealed]),Ui);if(bu(t.type)===ca){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ws(Sp([t.type,t.senderPublicKey,t.iv,t.sealed]),Ui)}return ws(Sp([t.type,t.iv,t.sealed]),Ui)}function Fg(t){const e=(t.encoding||Ui)===ic?Q4(t.encoded):t.encoded,n=oi(e,Ui),r=n.slice(tde,Rk),s=Rk;if(bu(r)===ca){const c=s+q2,l=c+Np,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(bu(r)===Lm){const c=n.slice(s),l=Qh(Np);return{type:r,sealed:c,iv:l}}const i=s+Np,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function cde(t,e){const n=Fg({encoded:t,encoding:e==null?void 0:e.encoding});return Z4({type:bu(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ws(n.senderPublicKey,Fr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Z4(t){const e=(t==null?void 0:t.type)||G4;if(e===ca){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function $k(t){return t.type===ca&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Dk(t){return t.type===Lm}function lde(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Sp([new Uint8Array([4]),e,n])}function ude(t,e){const[n,r,s]=t.split("."),i=Buffer.from(Q4(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=ob(c),u=lde(e);if(!ede.verify(Sp([o,a]),l,u))throw new Error("Invalid signature");return bx(t).payload}const dde="irn";function z0(t){return(t==null?void 0:t.relay)||{protocol:dde}}function op(t){const e=Bae[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function hde(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function jk(t){if(!t.includes("wc:")){const l=l4(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:fde(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:hde(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function fde(t){return t.startsWith("//")?t.substring(2):t}function pde(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function Uk(t){const e=new URLSearchParams,n=pde(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Qy(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var gde=Object.defineProperty,mde=Object.defineProperties,yde=Object.getOwnPropertyDescriptors,Lk=Object.getOwnPropertySymbols,wde=Object.prototype.hasOwnProperty,vde=Object.prototype.propertyIsEnumerable,Mk=(t,e,n)=>e in t?gde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bde=(t,e)=>{for(var n in e||(e={}))wde.call(e,n)&&Mk(t,n,e[n]);if(Lk)for(var n of Lk(e))vde.call(e,n)&&Mk(t,n,e[n]);return t},_de=(t,e)=>mde(t,yde(e));function Zh(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function Ede(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Zh(n.accounts))}),e}function Cde(t,e){const n=[];return Object.values(t).forEach(r=>{Zh(r.accounts).includes(e)&&n.push(...r.methods)}),n}function xde(t,e){const n=[];return Object.values(t).forEach(r=>{Zh(r.accounts).includes(e)&&n.push(...r.events)}),n}function ub(t){return t.includes(":")}function jd(t){return ub(t)?t.split(":")[0]:t}function Bk(t){var e,n,r;const s={};if(!Fc(t))return s;for(const[i,o]of Object.entries(t)){const a=ub(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=jd(i);s[u]=_de(bde({},s[u]),{chains:xo(a,(e=s[u])==null?void 0:e.chains),methods:xo(c,(n=s[u])==null?void 0:n.methods),events:xo(l,(r=s[u])==null?void 0:r.events)})}return s}function Sde(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function Fk(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=Sde(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=xo(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function Ade(t,e){var n,r,s,i,o,a;const c=Bk(t),l=Bk(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:xo((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:xo((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:xo((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const Ide={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Tde={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function me(t,e){const{message:n,code:r}=Tde[t];return{message:e?`${n} ${e}`:n,code:r}}function nn(t,e){const{message:n,code:r}=Ide[t];return{message:e?`${n} ${e}`:n,code:r}}function la(t,e){return!!Array.isArray(t)}function Fc(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ir(t){return typeof t>"u"}function An(t,e){return e&&ir(t)?!0:typeof t=="string"&&!!t.trim().length}function H2(t,e){return e&&ir(t)?!0:typeof t=="number"&&!isNaN(t)}function Nde(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return $l(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Zh(a),d=n[o];(!$l(s4(o,d),u)||!$l(d.methods,c)||!$l(d.events,l))&&(i=!1)}),i):!1}function W0(t){return An(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Pde(t){if(An(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&W0(n)}}return!1}function kde(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(An(t,!1)){if(e(t))return!0;const n=l4(t);return e(n)}}catch{}return!1}function Ode(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Rde(t){return t==null?void 0:t.topic}function $de(t,e){let n=null;return An(t==null?void 0:t.publicKey,!1)||(n=me("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function zk(t){let e=!0;return la(t)?t.length&&(e=t.every(n=>An(n,!1))):e=!1,e}function Dde(t,e,n){let r=null;return la(e)&&e.length?e.forEach(s=>{r||W0(s)||(r=nn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):W0(t)||(r=nn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function jde(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=Dde(s,s4(s,i),`${e} ${n}`);o&&(r=o)}),r}function Ude(t,e){let n=null;return la(t)?t.forEach(r=>{n||Pde(r)||(n=nn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=nn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Lde(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=Ude(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function Mde(t,e){let n=null;return zk(t==null?void 0:t.methods)?zk(t==null?void 0:t.events)||(n=nn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=nn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function X4(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=Mde(r,`${e}, namespace`);s&&(n=s)}),n}function Bde(t,e,n){let r=null;if(t&&Fc(t)){const s=X4(t,e);s&&(r=s);const i=jde(t,e,n);i&&(r=i)}else r=me("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function $_(t,e){let n=null;if(t&&Fc(t)){const r=X4(t,e);r&&(n=r);const s=Lde(t,e);s&&(n=s)}else n=me("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function eU(t){return An(t.protocol,!0)}function Fde(t,e){let n=!1;return t?t&&la(t)&&t.length&&t.forEach(r=>{n=eU(r)}):n=!0,n}function zde(t){return typeof t=="number"}function rs(t){return typeof t<"u"&&typeof t!==null}function Wde(t){return!(!t||typeof t!="object"||!t.code||!H2(t.code,!1)||!t.message||!An(t.message,!1))}function qde(t){return!(ir(t)||!An(t.method,!1))}function Hde(t){return!(ir(t)||ir(t.result)&&ir(t.error)||!H2(t.id,!1)||!An(t.jsonrpc,!1))}function Vde(t){return!(ir(t)||!An(t.name,!1))}function Wk(t,e){return!(!W0(e)||!Ede(t).includes(e))}function Gde(t,e,n){return An(n,!1)?Cde(t,e).includes(n):!1}function Kde(t,e,n){return An(n,!1)?xde(t,e).includes(n):!1}function qk(t,e,n){let r=null;const s=Yde(t),i=Qde(e),o=Object.keys(s),a=Object.keys(i),c=Hk(Object.keys(t)),l=Hk(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=me("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),$l(o,a)||(r=me("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Zh(e[d].accounts);h.includes(d)||(r=me("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||($l(s[d].methods,i[d].methods)?$l(s[d].events,i[d].events)||(r=me("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=me("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function Yde(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function Hk(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Qde(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Zh(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function Jde(t,e){return H2(t,!1)&&t<=e.max&&t>=e.min}function Vk(){const t=Dm();return new Promise(e=>{switch(t){case Rs.browser:e(Zde());break;case Rs.reactNative:e(Xde());break;case Rs.node:e(ehe());break;default:e(!0)}})}function Zde(){return Yh()&&(navigator==null?void 0:navigator.onLine)}async function Xde(){if(ol()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function ehe(){return!0}function the(t){switch(Dm()){case Rs.browser:nhe(t);break;case Rs.reactNative:rhe(t);break}}function nhe(t){!ol()&&Yh()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function rhe(t){ol()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function she(){var t;return Yh()&&yu()?((t=yu())==null?void 0:t.visibilityState)==="visible":!0}const D_={};class Lf{static get(e){return D_[e]}static set(e,n){D_[e]=n}static delete(e){delete D_[e]}}function ihe(t){const e=Kh.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function ohe({publicKey:t,signature:e,payload:n}){var r;const s=Mx(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=lhe(n.address),a=n.era==="00"?new Uint8Array([0]):Mx(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${che(n.tip)}`),d=dhe(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=uhe(h.length+1);return new Uint8Array([...f,i,...h])}function ahe(t){const e=Mx(t),n=Zae.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Mx(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function che(t){return t.startsWith("0x")?t.slice(2):t}function lhe(t){const e=Kh.decode(t)[0];return e===42?0:e===60?2:1}function uhe(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function dhe(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function hhe(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=ihe(t.transaction.address),r=ohe({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return ahe(s)}const fhe="PARSE_ERROR",phe="INVALID_REQUEST",ghe="METHOD_NOT_FOUND",mhe="INVALID_PARAMS",tU="INTERNAL_ERROR",V2="SERVER_ERROR",yhe=[-32700,-32600,-32601,-32602,-32603],Pp={[fhe]:{code:-32700,message:"Parse error"},[phe]:{code:-32600,message:"Invalid Request"},[ghe]:{code:-32601,message:"Method not found"},[mhe]:{code:-32602,message:"Invalid params"},[tU]:{code:-32603,message:"Internal error"},[V2]:{code:-32e3,message:"Server error"}},nU=V2;function whe(t){return yhe.includes(t)}function Gk(t){return Object.keys(Pp).includes(t)?Pp[t]:Pp[nU]}function vhe(t){const e=Object.values(Pp).find(n=>n.code===t);return e||Pp[nU]}function rU(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var sU={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Bx=function(t,e){return Bx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Bx(t,e)};function bhe(t,e){Bx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Fx=function(){return Fx=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fx.apply(this,arguments)};function _he(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Ehe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Che(t,e){return function(n,r){e(n,r,t)}}function xhe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function She(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Ahe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ihe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function The(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function zx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function iU(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Nhe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(iU(arguments[e]));return t}function Phe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function zg(t){return this instanceof zg?(this.v=t,this):new zg(t)}function khe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,m){i.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof zg?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Ohe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:zg(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Rhe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zx=="function"?zx(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function $he(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Dhe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function jhe(t){return t&&t.__esModule?t:{default:t}}function Uhe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Lhe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Mhe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Fx},__asyncDelegator:Ohe,__asyncGenerator:khe,__asyncValues:Rhe,__await:zg,__awaiter:She,__classPrivateFieldGet:Uhe,__classPrivateFieldSet:Lhe,__createBinding:Ihe,__decorate:Ehe,__exportStar:The,__extends:bhe,__generator:Ahe,__importDefault:jhe,__importStar:Dhe,__makeTemplateObject:$he,__metadata:xhe,__param:Che,__read:iU,__rest:_he,__spread:Nhe,__spreadArrays:Phe,__values:zx},Symbol.toStringTag,{value:"Module"})),Bhe=rv(Mhe);var zo={},Kk;function Fhe(){if(Kk)return zo;Kk=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.isBrowserCryptoAvailable=zo.getSubtleCrypto=zo.getBrowerCrypto=void 0;function t(){return(gn==null?void 0:gn.crypto)||(gn==null?void 0:gn.msCrypto)||{}}zo.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}zo.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return zo.isBrowserCryptoAvailable=n,zo}var Wo={},Yk;function zhe(){if(Yk)return Wo;Yk=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.isBrowser=Wo.isNode=Wo.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Wo.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Wo.isNode=e;function n(){return!t()&&!e()}return Wo.isBrowser=n,Wo}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Bhe;e.__exportStar(Fhe(),t),e.__exportStar(zhe(),t)})(sU);function ao(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Ll(t=6){return BigInt(ao(t))}function xc(t,e,n){return{id:n||ao(),jsonrpc:"2.0",method:t,params:e}}function db(t,e){return{id:t,jsonrpc:"2.0",result:e}}function hb(t,e,n){return{id:t,jsonrpc:"2.0",error:Whe(e)}}function Whe(t,e){return typeof t>"u"?Gk(tU):(typeof t=="string"&&(t=Object.assign(Object.assign({},Gk(V2)),{message:t})),whe(t.code)&&(t=vhe(t.code)),t)}let qhe=class{},Hhe=class extends qhe{constructor(){super()}},Vhe=class extends Hhe{constructor(e){super()}};const Ghe="^https?:",Khe="^wss?:";function Yhe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function oU(t,e){const n=Yhe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function Qk(t){return oU(t,Ghe)}function Jk(t){return oU(t,Khe)}function Qhe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function aU(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function G2(t){return aU(t)&&"method"in t}function fb(t){return aU(t)&&(co(t)||ti(t))}function co(t){return"result"in t}function ti(t){return"error"in t}let pi=class extends Vhe{constructor(e){super(e),this.events=new fi.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(xc(e.method,e.params||[],e.id||Ll().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{ti(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),fb(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Jhe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Zhe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Zk=t=>t.split("?")[0],Xk=10,Xhe=Jhe();let efe=class{constructor(e){if(this.url=e,this.events=new fi.EventEmitter,this.registering=!1,!Jk(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(va(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Jk(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=sU.isReactNative()?void 0:{rejectUnauthorized:!Qhe(e)},i=new Xhe(e,[],s);Zhe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?mu(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=hb(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return rU(e,Zk(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Xk&&this.events.setMaxListeners(Xk)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Zk(this.url)}`));return this.events.emit("register_error",n),n}};var tfe={};const cU="wc",lU=2,Wx="core",Io=`${cU}@2:${Wx}:`,nfe={logger:"error"},rfe={database:":memory:"},sfe="crypto",eO="client_ed25519_seed",ife=ge.ONE_DAY,ofe="keychain",afe="0.3",cfe="messages",lfe="0.3",tO=ge.SIX_HOURS,ufe="publisher",uU="irn",dfe="error",dU="wss://relay.walletconnect.org",hfe="relayer",qn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ffe="_subscription",Ys={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},pfe=.1,qx="2.21.3",Zt={link_mode:"link_mode",relay:"relay"},Lw={inbound:"inbound",outbound:"outbound"},gfe="0.3",mfe="WALLETCONNECT_CLIENT_ID",nO="WALLETCONNECT_LINK_MODE_APPS",Is={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},yfe="subscription",wfe="0.3",vfe="pairing",bfe="0.3",Mf={wc_pairingDelete:{req:{ttl:ge.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ge.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ge.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ge.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ge.ONE_DAY,prompt:!1,tag:0},res:{ttl:ge.ONE_DAY,prompt:!1,tag:0}}},Sl={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},vi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},_fe="history",Efe="0.3",Cfe="expirer",Xs={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},xfe="0.3",Sfe="verify-api",Afe="https://verify.walletconnect.com",hU="https://verify.walletconnect.org",kp=hU,Ife=`${kp}/v3`,Tfe=[Afe,hU],Nfe="echo",Pfe="https://echo.walletconnect.com",io={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Vo={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},bi={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},pl={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},gl={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Bf={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},kfe=.1,Ofe="event-client",Rfe=86400,$fe="https://pulse.walletconnect.org/batch";function Dfe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,m++;for(var v=(b-y)*u+1>>>0,E=new Uint8Array(v);y!==b;){for(var _=p[y],S=0,x=v-1;(_!==0||S<w)&&x!==-1;x--,S++)_+=256*E[x]>>>0,E[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=S,y++}for(var A=v-w;A!==v&&E[A]===0;)A++;for(var C=c.repeat(m);A<v;++A)C+=t.charAt(E[A]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var w=0,y=0;p[m]===c;)w++,m++;for(var b=(p.length-m)*l+1>>>0,v=new Uint8Array(b);p[m];){var E=n[p.charCodeAt(m)];if(E===255)return;for(var _=0,S=b-1;(E!==0||_<y)&&S!==-1;S--,_++)E+=a*v[S]>>>0,v[S]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=_,m++}if(p[m]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var A=new Uint8Array(w+(b-x)),C=w;x!==b;)A[C++]=v[x++];return A}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var jfe=Dfe,Ufe=jfe;const fU=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Lfe=t=>new TextEncoder().encode(t),Mfe=t=>new TextDecoder().decode(t);class Bfe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ffe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return pU(this,e)}}class zfe{constructor(e){this.decoders=e}or(e){return pU(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const pU=(t,e)=>new zfe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Wfe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Bfe(e,n,r),this.decoder=new Ffe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const pb=({name:t,prefix:e,encode:n,decode:r})=>new Wfe(t,e,n,r),Mm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Ufe(n,e);return pb({prefix:t,name:e,encode:r,decode:i=>fU(s(i))})},qfe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Hfe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},fr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>pb({prefix:e,name:t,encode(s){return Hfe(s,r,n)},decode(s){return qfe(s,r,n,t)}}),Vfe=pb({prefix:"\0",name:"identity",encode:t=>Mfe(t),decode:t=>Lfe(t)});var Gfe=Object.freeze({__proto__:null,identity:Vfe});const Kfe=fr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Yfe=Object.freeze({__proto__:null,base2:Kfe});const Qfe=fr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Jfe=Object.freeze({__proto__:null,base8:Qfe});const Zfe=Mm({prefix:"9",name:"base10",alphabet:"0123456789"});var Xfe=Object.freeze({__proto__:null,base10:Zfe});const epe=fr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tpe=fr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var npe=Object.freeze({__proto__:null,base16:epe,base16upper:tpe});const rpe=fr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),spe=fr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ipe=fr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ope=fr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ape=fr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cpe=fr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lpe=fr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),upe=fr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),dpe=fr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var hpe=Object.freeze({__proto__:null,base32:rpe,base32upper:spe,base32pad:ipe,base32padupper:ope,base32hex:ape,base32hexupper:cpe,base32hexpad:lpe,base32hexpadupper:upe,base32z:dpe});const fpe=Mm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ppe=Mm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var gpe=Object.freeze({__proto__:null,base36:fpe,base36upper:ppe});const mpe=Mm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ype=Mm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var wpe=Object.freeze({__proto__:null,base58btc:mpe,base58flickr:ype});const vpe=fr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bpe=fr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_pe=fr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Epe=fr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Cpe=Object.freeze({__proto__:null,base64:vpe,base64pad:bpe,base64url:_pe,base64urlpad:Epe});const gU=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),xpe=gU.reduce((t,e,n)=>(t[n]=e,t),[]),Spe=gU.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Ape(t){return t.reduce((e,n)=>(e+=xpe[n],e),"")}function Ipe(t){const e=[];for(const n of t){const r=Spe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Tpe=pb({prefix:"🚀",name:"base256emoji",encode:Ape,decode:Ipe});var Npe=Object.freeze({__proto__:null,base256emoji:Tpe}),Ppe=mU,rO=128,kpe=-128,Ope=Math.pow(2,31);function mU(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Ope;)e[n++]=t&255|rO,t/=128;for(;t&kpe;)e[n++]=t&255|rO,t>>>=7;return e[n]=t|0,mU.bytes=n-r+1,e}var Rpe=Hx,$pe=128,sO=127;function Hx(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw Hx.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&sO)<<s:(o&sO)*Math.pow(2,s),s+=7}while(o>=$pe);return Hx.bytes=i-r,n}var Dpe=Math.pow(2,7),jpe=Math.pow(2,14),Upe=Math.pow(2,21),Lpe=Math.pow(2,28),Mpe=Math.pow(2,35),Bpe=Math.pow(2,42),Fpe=Math.pow(2,49),zpe=Math.pow(2,56),Wpe=Math.pow(2,63),qpe=function(t){return t<Dpe?1:t<jpe?2:t<Upe?3:t<Lpe?4:t<Mpe?5:t<Bpe?6:t<Fpe?7:t<zpe?8:t<Wpe?9:10},Hpe={encode:Ppe,decode:Rpe,encodingLength:qpe},yU=Hpe;const iO=(t,e,n=0)=>(yU.encode(t,e,n),e),oO=t=>yU.encodingLength(t),Vx=(t,e)=>{const n=e.byteLength,r=oO(t),s=r+oO(n),i=new Uint8Array(s+n);return iO(t,i,0),iO(n,i,r),i.set(e,s),new Vpe(t,n,e,i)};class Vpe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const wU=({name:t,code:e,encode:n})=>new Gpe(t,e,n);class Gpe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Vx(this.code,n):n.then(r=>Vx(this.code,r))}else throw Error("Unknown type, must be binary type")}}const vU=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Kpe=wU({name:"sha2-256",code:18,encode:vU("SHA-256")}),Ype=wU({name:"sha2-512",code:19,encode:vU("SHA-512")});var Qpe=Object.freeze({__proto__:null,sha256:Kpe,sha512:Ype});const bU=0,Jpe="identity",_U=fU,Zpe=t=>Vx(bU,_U(t)),Xpe={code:bU,name:Jpe,encode:_U,digest:Zpe};var ege=Object.freeze({__proto__:null,identity:Xpe});new TextEncoder,new TextDecoder;const aO={...Gfe,...Yfe,...Jfe,...Xfe,...npe,...hpe,...gpe,...wpe,...Cpe,...Npe};({...Qpe,...ege});function EU(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function tge(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?EU(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function CU(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const cO=CU("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),j_=CU("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=tge(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),nge={utf8:cO,"utf-8":cO,hex:aO.base16,latin1:j_,ascii:j_,binary:j_,...aO};function rge(t,e="utf8"){const n=nge[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?EU(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var sge=Object.defineProperty,ige=(t,e,n)=>e in t?sge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ro=(t,e,n)=>ige(t,typeof e!="symbol"?e+"":e,n);class oge{constructor(e,n){this.core=e,this.logger=n,ro(this,"keychain",new Map),ro(this,"name",ofe),ro(this,"version",afe),ro(this,"initialized",!1),ro(this,"storagePrefix",Io),ro(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ro(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ro(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),ro(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=me("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),ro(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Pr(n,this.name)}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Ix(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Tx(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}}var age=Object.defineProperty,cge=(t,e,n)=>e in t?age(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,er=(t,e,n)=>cge(t,typeof e!="symbol"?e+"":e,n);class lge{constructor(e,n,r){this.core=e,this.logger=n,er(this,"name",sfe),er(this,"keychain"),er(this,"randomSessionIdentifier",Lx()),er(this,"initialized",!1),er(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),er(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),er(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=FP(s);return _6(i.publicKey)}),er(this,"generateKeyPair",()=>{this.isInitialized();const s=nde();return this.setPrivateKey(s.publicKey,s.privateKey)}),er(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=FP(i),a=this.randomSessionIdentifier;return await cie(a,s,ife,o)}),er(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=rde(a,i);return this.setSymKey(c,o)}),er(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Uw(s);return await this.keychain.set(o,s),o}),er(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),er(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),er(this,"encode",async(s,i,o)=>{this.isInitialized();const a=Z4(o),c=va(i);if(Dk(a))return ode(c,o==null?void 0:o.encoding);if($k(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return sde({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),er(this,"decode",async(s,i,o)=>{this.isInitialized();const a=cde(i,o);if(Dk(a)){const c=ade(i,o==null?void 0:o.encoding);return mu(c)}if($k(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=ide({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return mu(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),er(this,"getPayloadType",(s,i=Ui)=>{const o=Fg({encoded:s,encoding:i});return bu(o.type)}),er(this,"getPayloadSenderPublicKey",(s,i=Ui)=>{const o=Fg({encoded:s,encoding:i});return o.senderPublicKey?ws(o.senderPublicKey,Fr):void 0}),this.core=e,this.logger=Pr(n,this.name),this.keychain=r||new oge(this.core,this.logger)}get context(){return bs(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(eO)}catch{e=Lx(),await this.keychain.set(eO,e)}return rge(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}}var uge=Object.defineProperty,dge=Object.defineProperties,hge=Object.getOwnPropertyDescriptors,lO=Object.getOwnPropertySymbols,fge=Object.prototype.hasOwnProperty,pge=Object.prototype.propertyIsEnumerable,Gx=(t,e,n)=>e in t?uge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gge=(t,e)=>{for(var n in e||(e={}))fge.call(e,n)&&Gx(t,n,e[n]);if(lO)for(var n of lO(e))pge.call(e,n)&&Gx(t,n,e[n]);return t},mge=(t,e)=>dge(t,hge(e)),Cs=(t,e,n)=>Gx(t,typeof e!="symbol"?e+"":e,n);class yge extends one{constructor(e,n){super(e,n),this.logger=e,this.core=n,Cs(this,"messages",new Map),Cs(this,"messagesWithoutClientAck",new Map),Cs(this,"name",cfe),Cs(this,"version",lfe),Cs(this,"initialized",!1),Cs(this,"storagePrefix",Io),Cs(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Cs(this,"set",async(r,s,i)=>{this.isInitialized();const o=go(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===Lw.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,mge(gge({},c),{[o]:s}))}return await this.persist(),o}),Cs(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Cs(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Cs(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=go(s);return typeof i[o]<"u"}),Cs(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=go(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Cs(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Pr(e,this.name),this.core=n}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Ix(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Ix(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Tx(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Tx(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}}var wge=Object.defineProperty,vge=Object.defineProperties,bge=Object.getOwnPropertyDescriptors,uO=Object.getOwnPropertySymbols,_ge=Object.prototype.hasOwnProperty,Ege=Object.prototype.propertyIsEnumerable,Kx=(t,e,n)=>e in t?wge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jy=(t,e)=>{for(var n in e||(e={}))_ge.call(e,n)&&Kx(t,n,e[n]);if(uO)for(var n of uO(e))Ege.call(e,n)&&Kx(t,n,e[n]);return t},U_=(t,e)=>vge(t,bge(e)),_i=(t,e,n)=>Kx(t,typeof e!="symbol"?e+"":e,n);class Cge extends ane{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,_i(this,"events",new fi.EventEmitter),_i(this,"name",ufe),_i(this,"queue",new Map),_i(this,"publishTimeout",ge.toMiliseconds(ge.ONE_MINUTE)),_i(this,"initialPublishTimeout",ge.toMiliseconds(ge.ONE_SECOND*15)),_i(this,"needsTransportRestart",!1),_i(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||tO,c=z0(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Ll().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async m=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(qn.publish,w),m(h))};this.relayer.events.on(qn.publish,w);const y=Cc(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(E=>{this.logger.warn(E,E==null?void 0:E.message),v(E)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(qn.publish,w)}catch(b){this.queue.set(d,U_(Jy({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Cc(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),_i(this,"on",(r,s)=>{this.events.on(r,s)}),_i(this,"once",(r,s)=>{this.events.once(r,s)}),_i(this,"off",(r,s)=>{this.events.off(r,s)}),_i(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Pr(n,this.name),this.registerEventListeners()}get context(){return bs(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=tO,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:op(z0().protocol).publish,params:Jy({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};ir((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),ir((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const m=await this.relayer.request(p);return this.relayer.events.emit(qn.publish,e),this.logger.debug("Successfully Published Payload"),m}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,U_(Jy({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(U_(Jy({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on($u.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(qn.connection_stalled);return}this.checkQueue()}),this.relayer.on(qn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var xge=Object.defineProperty,Sge=(t,e,n)=>e in t?xge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ed=(t,e,n)=>Sge(t,typeof e!="symbol"?e+"":e,n);class Age{constructor(){ed(this,"map",new Map),ed(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),ed(this,"get",e=>this.map.get(e)||[]),ed(this,"exists",(e,n)=>this.get(e).includes(n)),ed(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),ed(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Ige=Object.defineProperty,Tge=Object.defineProperties,Nge=Object.getOwnPropertyDescriptors,dO=Object.getOwnPropertySymbols,Pge=Object.prototype.hasOwnProperty,kge=Object.prototype.propertyIsEnumerable,Yx=(t,e,n)=>e in t?Ige(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ff=(t,e)=>{for(var n in e||(e={}))Pge.call(e,n)&&Yx(t,n,e[n]);if(dO)for(var n of dO(e))kge.call(e,n)&&Yx(t,n,e[n]);return t},L_=(t,e)=>Tge(t,Nge(e)),Wt=(t,e,n)=>Yx(t,typeof e!="symbol"?e+"":e,n);class Oge extends une{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Wt(this,"subscriptions",new Map),Wt(this,"topicMap",new Age),Wt(this,"events",new fi.EventEmitter),Wt(this,"name",yfe),Wt(this,"version",wfe),Wt(this,"pending",new Map),Wt(this,"cached",[]),Wt(this,"initialized",!1),Wt(this,"storagePrefix",Io),Wt(this,"subscribeTimeout",ge.toMiliseconds(ge.ONE_MINUTE)),Wt(this,"initialSubscribeTimeout",ge.toMiliseconds(ge.ONE_SECOND*15)),Wt(this,"clientId"),Wt(this,"batchSubscribeTopicsLimit",500),Wt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Wt(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=z0(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Wt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Wt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Wt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Wt(this,"on",(r,s)=>{this.events.on(r,s)}),Wt(this,"once",(r,s)=>{this.events.once(r,s)}),Wt(this,"off",(r,s)=>{this.events.off(r,s)}),Wt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Wt(this,"start",async()=>{await this.onConnect()}),Wt(this,"stop",async()=>{await this.onDisconnect()}),Wt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Wt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Wt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on($u.pulse,async()=>{await this.checkPending()}),this.events.on(Is.created,async r=>{const s=Is.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Is.deleted,async r=>{const s=Is.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Pr(n,this.name),this.clientId=""}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=z0(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=nn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Zt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:op(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Zt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},ge.toMiliseconds(ge.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Is.created,d),u(h.id))};this.events.on(Is.created,d);try{const h=await Cc(new Promise((f,p)=>{this.relayer.request(i).catch(m=>{this.logger.warn(m,m==null?void 0:m.message),p(m)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Is.created,d),u(h)}catch{}}),l=await Cc(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(qn.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:op(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Cc(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(qn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:op(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Cc(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(qn.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:op(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,L_(Ff({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Ff({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Ff({},n)),this.topicMap.set(n.topic,e),this.events.emit(Is.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Is.deleted,L_(Ff({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Is.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Is.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>L_(Ff({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await Sce(ge.toMiliseconds(ge.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return go(e+await this.getClientId())}}var Rge=Object.defineProperty,hO=Object.getOwnPropertySymbols,$ge=Object.prototype.hasOwnProperty,Dge=Object.prototype.propertyIsEnumerable,Qx=(t,e,n)=>e in t?Rge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fO=(t,e)=>{for(var n in e||(e={}))$ge.call(e,n)&&Qx(t,n,e[n]);if(hO)for(var n of hO(e))Dge.call(e,n)&&Qx(t,n,e[n]);return t},Ct=(t,e,n)=>Qx(t,typeof e!="symbol"?e+"":e,n);class jge extends cne{constructor(e){super(e),Ct(this,"protocol","wc"),Ct(this,"version",2),Ct(this,"core"),Ct(this,"logger"),Ct(this,"events",new fi.EventEmitter),Ct(this,"provider"),Ct(this,"messages"),Ct(this,"subscriber"),Ct(this,"publisher"),Ct(this,"name",hfe),Ct(this,"transportExplicitlyClosed",!1),Ct(this,"initialized",!1),Ct(this,"connectionAttemptInProgress",!1),Ct(this,"relayUrl"),Ct(this,"projectId"),Ct(this,"packageName"),Ct(this,"bundleId"),Ct(this,"hasExperiencedNetworkDisruption",!1),Ct(this,"pingTimeout"),Ct(this,"heartBeatTimeout",ge.toMiliseconds(ge.THIRTY_SECONDS+ge.FIVE_SECONDS)),Ct(this,"reconnectTimeout"),Ct(this,"connectPromise"),Ct(this,"reconnectInProgress",!1),Ct(this,"requestsInFlight",[]),Ct(this,"connectTimeout",ge.toMiliseconds(ge.ONE_SECOND*15)),Ct(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Ll().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Ct(this,"resetPingTimeout",()=>{L0()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Ct(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ct(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(qn.connect)}),Ct(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),Ct(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(qn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ct(this,"registerProviderListeners",()=>{this.provider.on(Ys.payload,this.onPayloadHandler),this.provider.on(Ys.connect,this.onConnectHandler),this.provider.on(Ys.disconnect,this.onDisconnectHandler),this.provider.on(Ys.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Pr(e.logger,this.name):km(Wh({level:e.logger||dfe})),this.messages=new yge(this.logger,e.core),this.subscriber=new Oge(this,this.logger),this.publisher=new Cge(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||dU,this.projectId=e.projectId,lce()?this.packageName=nk():uce()&&(this.bundleId=nk()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return bs(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Zt.relay},Lw.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Is.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Is.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,fO({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Cc(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Vk())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=On(ge.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(qn.message,e),await this.recordMessageEvent(e,Lw.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Ys.disconnect,i),await Cc(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Ys.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ys.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ys.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,ge.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(L0())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new pi(new efe(gce({sdkVersion:qx,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),G2(e)){if(!e.method.endsWith(ffe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Zt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(fO({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else fb(e)&&this.events.emit(qn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Lw.inbound),this.events.emit(qn.message,e))}async acknowledgePayload(e){const n=db(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ys.payload,this.onPayloadHandler),this.provider.off(Ys.connect,this.onConnectHandler),this.provider.off(Ys.disconnect,this.onDisconnectHandler),this.provider.off(Ys.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Vk();the(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on($u.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&she())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(qn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ge.toMiliseconds(pfe)))))}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function Uge(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function pO(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function gO(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Lge="[object RegExp]",Mge="[object String]",Bge="[object Number]",Fge="[object Boolean]",mO="[object Arguments]",zge="[object Symbol]",Wge="[object Date]",qge="[object Map]",Hge="[object Set]",Vge="[object Array]",Gge="[object Function]",Kge="[object ArrayBuffer]",M_="[object Object]",Yge="[object Error]",Qge="[object DataView]",Jge="[object Uint8Array]",Zge="[object Uint8ClampedArray]",Xge="[object Uint16Array]",eme="[object Uint32Array]",tme="[object BigUint64Array]",nme="[object Int8Array]",rme="[object Int16Array]",sme="[object Int32Array]",ime="[object BigInt64Array]",ome="[object Float32Array]",ame="[object Float64Array]";function cme(){}function yO(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function lme(t,e,n){return ap(t,e,void 0,void 0,void 0,void 0,n)}function ap(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Op(t,e,i,o)}return Op(t,e,i,o)}function Op(t,e,n,r){if(Object.is(t,e))return!0;let s=gO(t),i=gO(e);if(s===mO&&(s=M_),i===mO&&(i=M_),s!==i)return!1;switch(s){case Mge:return t.toString()===e.toString();case Bge:{const c=t.valueOf(),l=e.valueOf();return Uge(c,l)}case Fge:case Wge:case zge:return Object.is(t.valueOf(),e.valueOf());case Lge:return t.source===e.source&&t.flags===e.flags;case Gge:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case qge:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!ap(l,e.get(c),c,t,e,n,r))return!1;return!0}case Hge:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>ap(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case Vge:case Jge:case Zge:case Xge:case eme:case tme:case nme:case rme:case sme:case ime:case ome:case ame:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!ap(t[c],e[c],c,t,e,n,r))return!1;return!0}case Kge:return t.byteLength!==e.byteLength?!1:Op(new Uint8Array(t),new Uint8Array(e),n,r);case Qge:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Op(new Uint8Array(t),new Uint8Array(e),n,r);case Yge:return t.name===e.name&&t.message===e.message;case M_:{if(!(Op(t.constructor,e.constructor,n,r)||yO(t)&&yO(e)))return!1;const c=[...Object.keys(t),...pO(t)],l=[...Object.keys(e),...pO(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!ap(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function ume(t,e){return lme(t,e,cme)}var dme=Object.defineProperty,wO=Object.getOwnPropertySymbols,hme=Object.prototype.hasOwnProperty,fme=Object.prototype.propertyIsEnumerable,Jx=(t,e,n)=>e in t?dme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vO=(t,e)=>{for(var n in e||(e={}))hme.call(e,n)&&Jx(t,n,e[n]);if(wO)for(var n of wO(e))fme.call(e,n)&&Jx(t,n,e[n]);return t},Jr=(t,e,n)=>Jx(t,typeof e!="symbol"?e+"":e,n);class Uu extends lne{constructor(e,n,r,s=Io,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Jr(this,"map",new Map),Jr(this,"version",gfe),Jr(this,"cached",[]),Jr(this,"initialized",!1),Jr(this,"getKey"),Jr(this,"storagePrefix",Io),Jr(this,"recentlyDeleted",[]),Jr(this,"recentlyDeletedLimit",200),Jr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!ir(o)?this.map.set(this.getKey(o),o):Ode(o)?this.map.set(o.id,o):Rde(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Jr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Jr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Jr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>ume(a[c],o[c]))):this.values)),Jr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=vO(vO({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Jr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Pr(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=me("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}}var pme=Object.defineProperty,gme=(t,e,n)=>e in t?pme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ut=(t,e,n)=>gme(t,typeof e!="symbol"?e+"":e,n);class mme{constructor(e,n){this.core=e,this.logger=n,ut(this,"name",vfe),ut(this,"version",bfe),ut(this,"events",new g2),ut(this,"pairings"),ut(this,"initialized",!1),ut(this,"storagePrefix",Io),ut(this,"ignoredPayloadTypes",[ca]),ut(this,"registeredMethods",[]),ut(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ut(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),ut(this,"create",async r=>{this.isInitialized();const s=Lx(),i=await this.core.crypto.setSymKey(s),o=On(ge.FIVE_MINUTES),a={protocol:uU},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=Uk({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Sl.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),ut(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[io.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=jk(r.uri);s.props.properties.topic=i,s.addTrace(io.pairing_uri_validation_success),s.addTrace(io.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(io.existing_pairing),u.active)throw s.setError(Vo.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(io.pairing_not_expired)}const d=c||On(ge.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(io.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Sl.create,h),s.addTrace(io.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(io.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Vo.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Vo.subscribe_pairing_topic_failure),f}return s.addTrace(io.subscribe_pairing_topic_success),h}),ut(this,"activate",async({topic:r})=>{this.isInitialized();const s=On(ge.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),ut(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=_l();this.events.once(Nt("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),ut(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),ut(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),ut(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ut(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",nn("USER_DISCONNECTED")),await this.deletePairing(s))}),ut(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return Uk({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),ut(this,"sendRequest",async(r,s,i)=>{const o=xc(s,i),a=await this.core.crypto.encode(r,o),c=Mf[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),ut(this,"sendResult",async(r,s,i)=>{const o=db(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Mf[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),ut(this,"sendError",async(r,s,i)=>{const o=hb(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Mf[c]?Mf[c].res:Mf.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),ut(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,nn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),ut(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Za(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),ut(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),ut(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),ut(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Sl.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),ut(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{co(s)?this.events.emit(Nt("pairing_ping",i),{}):ti(s)&&this.events.emit(Nt("pairing_ping",i),{error:s.error})},500)}),ut(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Sl.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),ut(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=nn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),ut(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(nn("WC_METHOD_UNSUPPORTED",r))}),ut(this,"isValidPair",(r,s)=>{var i;if(!rs(r)){const{message:a}=me("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Vo.malformed_pairing_uri),new Error(a)}if(!kde(r.uri)){const{message:a}=me("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Vo.malformed_pairing_uri),new Error(a)}const o=jk(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=me("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Vo.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=me("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Vo.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&ge.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Vo.pairing_expired);const{message:a}=me("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),ut(this,"isValidPing",async r=>{if(!rs(r)){const{message:i}=me("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),ut(this,"isValidDisconnect",async r=>{if(!rs(r)){const{message:i}=me("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),ut(this,"isValidPairingTopic",async r=>{if(!An(r,!1)){const{message:s}=me("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=me("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Za(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=me("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Pr(n,this.name),this.pairings=new Uu(this.core,this.logger,this.name,this.storagePrefix)}get context(){return bs(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(qn.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Zt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);G2(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):fb(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Xs.expired,async e=>{const{topic:n}=c4(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Sl.expire,{topic:n}))})}}var yme=Object.defineProperty,wme=(t,e,n)=>e in t?yme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tr=(t,e,n)=>wme(t,typeof e!="symbol"?e+"":e,n);class vme extends ine{constructor(e,n){super(e,n),this.core=e,this.logger=n,tr(this,"records",new Map),tr(this,"events",new fi.EventEmitter),tr(this,"name",_fe),tr(this,"version",Efe),tr(this,"cached",[]),tr(this,"initialized",!1),tr(this,"storagePrefix",Io),tr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),tr(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:On(ge.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(vi.created,o)}),tr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=ti(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(vi.updated,s))}),tr(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),tr(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(vi.deleted,i)}}),this.persist()}),tr(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),tr(this,"on",(r,s)=>{this.events.on(r,s)}),tr(this,"once",(r,s)=>{this.events.once(r,s)}),tr(this,"off",(r,s)=>{this.events.off(r,s)}),tr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Pr(n,this.name)}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:xc(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(vi.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(vi.created,e=>{const n=vi.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(vi.updated,e=>{const n=vi.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(vi.deleted,e=>{const n=vi.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on($u.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{ge.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(vi.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}}var bme=Object.defineProperty,_me=(t,e,n)=>e in t?bme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xr=(t,e,n)=>_me(t,typeof e!="symbol"?e+"":e,n);class Eme extends dne{constructor(e,n){super(e,n),this.core=e,this.logger=n,xr(this,"expirations",new Map),xr(this,"events",new fi.EventEmitter),xr(this,"name",Cfe),xr(this,"version",xfe),xr(this,"cached",[]),xr(this,"initialized",!1),xr(this,"storagePrefix",Io),xr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),xr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),xr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Xs.created,{target:i,expiration:o})}),xr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),xr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Xs.deleted,{target:s,expiration:i})}}),xr(this,"on",(r,s)=>{this.events.on(r,s)}),xr(this,"once",(r,s)=>{this.events.once(r,s)}),xr(this,"off",(r,s)=>{this.events.off(r,s)}),xr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Pr(n,this.name)}get context(){return bs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return mce(e);if(typeof e=="number")return yce(e);const{message:n}=me("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Xs.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=me("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;ge.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Xs.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on($u.pulse,()=>this.checkExpirations()),this.events.on(Xs.created,e=>{const n=Xs.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Xs.expired,e=>{const n=Xs.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Xs.deleted,e=>{const n=Xs.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Cme=Object.defineProperty,xme=(t,e,n)=>e in t?Cme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cn=(t,e,n)=>xme(t,typeof e!="symbol"?e+"":e,n);class Sme extends hne{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Cn(this,"name",Sfe),Cn(this,"abortController"),Cn(this,"isDevEnv"),Cn(this,"verifyUrlV3",Ife),Cn(this,"storagePrefix",Io),Cn(this,"version",lU),Cn(this,"publicKey"),Cn(this,"fetchPromise"),Cn(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ge.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Cn(this,"register",async s=>{if(!Yh()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=yu(),u=this.startAbortTimer(ge.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(m),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const m=l.createElement("iframe");m.src=c,m.style.display="none",m.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(bx(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(m),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(m),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Cn(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(bx(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Cn(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(ge.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Cn(this,"getVerifyUrl",s=>{let i=s||kp;return Tfe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${kp}`),i=kp),i}),Cn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(ge.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Cn(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Cn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Cn(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Cn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Cn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Cn(this,"validateAttestation",(s,i)=>{const o=ude(s,i.publicKey),a={hasExpired:ge.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Pr(n,this.name),this.abortController=new AbortController,this.isDevEnv=O2(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return bs(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ge.toMiliseconds(e))}}var Ame=Object.defineProperty,Ime=(t,e,n)=>e in t?Ame(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bO=(t,e,n)=>Ime(t,typeof e!="symbol"?e+"":e,n);class Tme extends fne{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,bO(this,"context",Nfe),bO(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${Pfe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Pr(n,this.context)}}var Nme=Object.defineProperty,_O=Object.getOwnPropertySymbols,Pme=Object.prototype.hasOwnProperty,kme=Object.prototype.propertyIsEnumerable,Zx=(t,e,n)=>e in t?Nme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zf=(t,e)=>{for(var n in e||(e={}))Pme.call(e,n)&&Zx(t,n,e[n]);if(_O)for(var n of _O(e))kme.call(e,n)&&Zx(t,n,e[n]);return t},Mn=(t,e,n)=>Zx(t,typeof e!="symbol"?e+"":e,n);class Ome extends pne{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Mn(this,"context",Ofe),Mn(this,"storagePrefix",Io),Mn(this,"storageVersion",kfe),Mn(this,"events",new Map),Mn(this,"shouldPersist",!1),Mn(this,"init",async()=>{if(!O2())try{const s={eventId:sk(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:o4(this.core.relayer.protocol,this.core.relayer.version,qx)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Mn(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=sk(),u=this.core.projectId||"",d=Date.now(),h=zf({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Mn(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return zf(zf({},a),this.setMethods(a.eventId))}),Mn(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Mn(this,"setEventListeners",()=>{this.core.heartbeat.on($u.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{ge.fromMiliseconds(Date.now())-ge.fromMiliseconds(s.timestamp)>Rfe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Mn(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Mn(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Mn(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Mn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Mn(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,zf(zf({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Mn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Mn(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${$fe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${qx}${i}`,{method:"POST",body:JSON.stringify(s)})}),Mn(this,"getAppDomain",()=>i4().url),this.logger=Pr(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Rme=Object.defineProperty,EO=Object.getOwnPropertySymbols,$me=Object.prototype.hasOwnProperty,Dme=Object.prototype.propertyIsEnumerable,Xx=(t,e,n)=>e in t?Rme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,CO=(t,e)=>{for(var n in e||(e={}))$me.call(e,n)&&Xx(t,n,e[n]);if(EO)for(var n of EO(e))Dme.call(e,n)&&Xx(t,n,e[n]);return t},Ht=(t,e,n)=>Xx(t,typeof e!="symbol"?e+"":e,n);let jme=class xU extends tne{constructor(e){var n;super(e),Ht(this,"protocol",cU),Ht(this,"version",lU),Ht(this,"name",Wx),Ht(this,"relayUrl"),Ht(this,"projectId"),Ht(this,"customStoragePrefix"),Ht(this,"events",new fi.EventEmitter),Ht(this,"logger"),Ht(this,"heartbeat"),Ht(this,"relayer"),Ht(this,"crypto"),Ht(this,"storage"),Ht(this,"history"),Ht(this,"expirer"),Ht(this,"pairing"),Ht(this,"verify"),Ht(this,"echoClient"),Ht(this,"linkModeSupportedApps"),Ht(this,"eventClient"),Ht(this,"initialized",!1),Ht(this,"logChunkController"),Ht(this,"on",(a,c)=>this.events.on(a,c)),Ht(this,"once",(a,c)=>this.events.once(a,c)),Ht(this,"off",(a,c)=>this.events.off(a,c)),Ht(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Ht(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Zt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||dU,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Wh({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:nfe.logger,name:Wx}),{logger:i,chunkLoggerController:o}=y2({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Pr(i,this.name),this.heartbeat=new Wee,this.crypto=new lge(this,this.logger,e==null?void 0:e.keychain),this.history=new vme(this,this.logger),this.expirer=new Eme(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Ste(CO(CO({},rfe),e==null?void 0:e.storageOptions)),this.relayer=new jge({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new mme(this,this.logger),this.verify=new Sme(this,this.logger,this.storage),this.echoClient=new Tme(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Ome(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new xU(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(mfe,r),n}get context(){return bs(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(nO,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(nO)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&tfe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const Ume=jme,SU="wc",AU=2,IU="client",K2=`${SU}@${AU}:${IU}:`,B_={name:IU,logger:"error"},xO="WALLETCONNECT_DEEPLINK_CHOICE",Lme="proposal",SO="Proposal expired",Mme="session",td=ge.SEVEN_DAYS,Bme="engine",Bn={wc_sessionPropose:{req:{ttl:ge.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ge.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ge.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ge.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ge.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ge.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ge.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ge.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ge.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ge.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ge.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ge.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ge.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ge.FIVE_MINUTES,prompt:!1,tag:1119}}},F_={min:ge.FIVE_MINUTES,max:ge.SEVEN_DAYS},so={idle:"IDLE",active:"ACTIVE"},Fme={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},zme="request",Wme=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],qme="wc",Hme="auth",Vme="authKeys",Gme="pairingTopics",Kme="requests",gb=`${qme}@${1.5}:${Hme}:`,Mw=`${gb}:PUB_KEY`;var Yme=Object.defineProperty,Qme=Object.defineProperties,Jme=Object.getOwnPropertyDescriptors,AO=Object.getOwnPropertySymbols,Zme=Object.prototype.hasOwnProperty,Xme=Object.prototype.propertyIsEnumerable,eS=(t,e,n)=>e in t?Yme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qt=(t,e)=>{for(var n in e||(e={}))Zme.call(e,n)&&eS(t,n,e[n]);if(AO)for(var n of AO(e))Xme.call(e,n)&&eS(t,n,e[n]);return t},Zr=(t,e)=>Qme(t,Jme(e)),le=(t,e,n)=>eS(t,typeof e!="symbol"?e+"":e,n);class eye extends wne{constructor(e){super(e),le(this,"name",Bme),le(this,"events",new g2),le(this,"initialized",!1),le(this,"requestQueue",{state:so.idle,queue:[]}),le(this,"sessionRequestQueue",{state:so.idle,queue:[]}),le(this,"requestQueueDelay",ge.ONE_SECOND),le(this,"expectedPairingMethodMap",new Map),le(this,"recentlyDeletedMap",new Map),le(this,"recentlyDeletedLimit",200),le(this,"relayMessageCache",[]),le(this,"pendingSessions",new Map),le(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Bn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ge.toMiliseconds(this.requestQueueDelay)))}),le(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Zr(Qt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Ade(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const S=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=S.active}}catch(S){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),S}if(!u||!h){const{topic:S,uri:x}=await this.client.core.pairing.create();u=S,d=x}if(!u){const{message:S}=me("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(S)}const f=await this.client.core.crypto.generateKeyPair(),p=Bn.wc_sessionPropose.req.ttl||ge.FIVE_MINUTES,m=On(p),w=Zr(Qt(Qt({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:uU}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:ao()}),y=Nt("session_connect",w.id),{reject:b,resolve:v,done:E}=_l(p,SO),_=({id:S})=>{S===w.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:SO,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(y,({error:S,session:x})=>{this.client.events.off("proposal_expire",_),S?b(S):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:E}}),le(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),le(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[bi.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(C){throw o.setError(pl.no_internet_connection),C}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(C){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(pl.proposal_not_found),C}try{await this.isValidApprove(n)}catch(C){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(pl.session_approve_namespace_validation_failure),C}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:m,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:bi.session_approve_started,properties:{topic:p,trace:[bi.session_approve_started,bi.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),E=m.publicKey,_=await this.client.core.crypto.generateSharedKey(v,E),S=Qt(Qt(Qt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:On(td)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=Zt.relay;b.addTrace(bi.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:x})}catch(C){throw b.setError(pl.subscribe_session_topic_failure),C}b.addTrace(bi.subscribe_session_topic_success);const A=Zr(Qt({},S),{topic:_,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:S.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:v,transportType:Zt.relay});await this.client.session.set(_,A),b.addTrace(bi.store_session);try{b.addTrace(bi.publishing_session_settle),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(pl.session_settle_publish_failure),C}),b.addTrace(bi.session_settle_publish_success),b.addTrace(bi.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(pl.session_approve_publish_failure),C}),b.addTrace(bi.session_approve_publish_success)}catch(C){throw this.client.logger.error(C),this.client.session.delete(_,nn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),C}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:m.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(_,On(td)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),le(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Bn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),le(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=_l(),c=ao(),l=Ll().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Nt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),le(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=ao(),{done:i,resolve:o,reject:a}=_l();return this.events.once(Nt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,On(td)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),le(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(w){throw this.client.logger.error("request() -> isValidRequest() failed"),w}const{chainId:r,request:s,topic:i,expiry:o=Bn.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Zt.relay&&await this.confirmOnlineStateOrThrow();const c=ao(),l=Ll().toString(),{done:u,resolve:d,reject:h}=_l(o,"Request expired. Please try again.");this.events.once(Nt("session_request",c),({error:w,result:y})=>{w?h(w):d(y)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Zr(Qt({},s),{expiryTimestamp:On(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const m={request:Zr(Qt({},s),{expiryTimestamp:On(o)}),chainId:r};return await Promise.all([new Promise(async w=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:m,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,m)}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),w()}),new Promise(async w=>{var y;if(!((y=a.sessionConfig)!=null&&y.disableDeepLink)){const b=await _ce(this.client.core.storage,xO);await wce({id:c,topic:i,wcDeepLink:b})}w()}),u()]).then(w=>w[2])}),le(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Zt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);co(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):ti(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),le(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=ao(),i=Ll().toString(),{done:o,resolve:a,reject:c}=_l();this.events.once(Nt("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),le(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Ll().toString(),a=ao();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),le(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:nn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=me("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),le(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>Nde(r,n)))),le(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),le(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Zt.link_mode:Zt.relay;o===Zt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:m=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const E=await this.client.core.crypto.generateKeyPair(),_=Uw(E);if(await Promise.all([this.client.auth.authKeys.set(Mw,{responseTopic:_,publicKey:E}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:b})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),m.length>0){const{namespace:$}=Kd(a[0]);let U=jle($,"request",m);jw(y)&&(U=Lle(U,y.pop())),y.push(U)}const S=w&&w>Bn.wc_sessionAuthenticate.req.ttl?w:Bn.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:On(S)},A={eip155:{chains:a,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},C={requiredNamespaces:{},optionalNamespaces:A,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:On(Bn.wc_sessionPropose.req.ttl),id:ao()},{done:k,resolve:O,reject:M}=_l(S,"Request expired"),F=ao(),V=Nt("session_connect",C.id),N=Nt("session_request",F),T=async({error:$,session:U})=>{this.events.off(N,L),$?M($):U&&O({session:U})},L=async $=>{var U,W,J;if(await this.deletePendingAuthRequest(F,{message:"fulfilled",code:0}),$.error){const oe=nn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return $.error.code===oe.code?void 0:(this.events.off(V,T),M($.error.message))}await this.deleteProposal(C.id),this.events.off(V,T);const{cacaos:ie,responder:ne}=$.result,se=[],we=[];for(const oe of ie){await gk({cacao:oe,projectId:this.client.core.projectId})||(this.client.logger.error(oe,"Signature verification failed"),M(nn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:te}=oe,he=jw(te.resources),ze=[Nx(te.iss)],Te=M0(te.iss);if(he){const Ce=mk(he),Ue=yk(he);se.push(...Ce),ze.push(...Ue)}for(const Ce of ze)we.push(`${Ce}:${Te}`)}const Y=await this.client.core.crypto.generateSharedKey(E,ne.publicKey);let X;se.length>0&&(X={topic:Y,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:ne,controller:ne.publicKey,expiry:On(td),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:Fk([...new Set(se)],[...new Set(we)]),transportType:o},await this.client.core.relayer.subscribe(Y,{transportType:o}),await this.client.session.set(Y,X),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:ne.metadata}),X=this.client.session.get(Y)),(U=this.client.metadata.redirect)!=null&&U.linkMode&&(W=ne.metadata.redirect)!=null&&W.linkMode&&(J=ne.metadata.redirect)!=null&&J.universal&&r&&(this.client.core.addLinkModeSupportedApp(ne.metadata.redirect.universal),this.client.session.update(Y,{transportType:Zt.link_mode})),O({auths:ie,session:X})};this.events.once(V,T),this.events.once(N,L);let D;try{if(i){const $=xc("wc_sessionAuthenticate",x,F);this.client.core.history.set(b,$);const U=await this.client.core.crypto.encode("",$,{type:Lm,encoding:ic});D=Qy(r,b,U)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:F}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:C,expiry:Bn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:C.id})])}catch($){throw this.events.off(V,T),this.events.off(N,L),$}return await this.setProposal(C.id,C),await this.setAuthRequest(F,{request:Zr(Qt({},x),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:D??v,response:k}}),le(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[gl.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(Bf.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Bf.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Zt.relay;a===Zt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Uw(c),d={type:ca,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await gk({cacao:w,projectId:this.client.core.projectId})){i.setError(Bf.invalid_cacao);const _=nn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(gl.cacaos_verified);const{p:y}=w,b=jw(y.resources),v=[Nx(y.iss)],E=M0(y.iss);if(b){const _=mk(b),S=yk(b);h.push(..._),v.push(...S)}for(const _ of v)f.push(`${_}:${E}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(gl.create_authenticated_session_topic);let m;if((h==null?void 0:h.length)>0){m={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:On(td),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Fk([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(gl.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(Bf.subscribe_authenticated_session_topic_failure),w}i.addTrace(gl.subscribe_authenticated_session_topic_success),await this.client.session.set(p,m),i.addTrace(gl.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(gl.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(Bf.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:m}}),le(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Zt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Uw(o),l={type:ca,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Bn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),le(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return C4(r,s)}),le(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),le(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),le(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,nn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(xO).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,nn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=so.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),le(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(pl.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,nn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),le(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=so.idle,this.client.events.emit("session_request_expire",{id:n}))}),le(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),le(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),le(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,On(Bn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),le(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Zt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),le(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||On(Bn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),le(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=xc(s,i,c);let f;const p=!!u;try{const y=p?ic:Ui;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let m;if(Wme.includes(s)){const y=go(JSON.stringify(h)),b=go(f);m=await this.client.core.verify.register({id:b,decryptedId:y})}const w=Bn[s].req;if(w.attestation=m,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=Qy(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=Bn[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=Zr(Qt({},d),{correlationId:h.id}),l?(y.internal=Zr(Qt({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),le(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=db(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?ic:Ui;u=await this.client.core.crypto.encode(s,l,Zr(Qt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(m){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${m==null?void 0:m.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=Qy(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,m=Bn[p].res;m.tvf=Zr(Qt({},f),{correlationId:r}),o?(m.internal=Zr(Qt({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,m)):this.client.core.relayer.publish(s,u,m).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),le(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=hb(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?ic:Ui;u=await this.client.core.crypto.encode(s,l,Zr(Qt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=Qy(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Bn[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),le(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Za(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Za(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),le(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),le(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),le(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===so.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=so.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=so.idle}),le(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),le(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),le(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=me("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),le(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),le(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Vo.proposal_listener_not_found)),this.isValidConnect(Qt({},s.params));const u=a.expiryTimestamp||On(Bn.wc_sessionPropose.req.ttl),d=Qt({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:go(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(io.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Bn.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),le(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(co(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(ti(r)){await this.deleteProposal(i);const o=Nt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),le(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),m=Zr(Qt(Qt(Qt({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Zt.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit("session_connect",{session:m}),this.events.emit(Nt("session_connect",f.proposalId),{session:m}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),le(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;co(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Nt("session_approve",s),{})):ti(r)&&(await this.client.session.delete(n,nn("USER_DISCONNECTED")),this.events.emit(Nt("session_approve",s),{error:r.error}))}),le(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Lf.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:nn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Qt({topic:n},s));try{Lf.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw Lf.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),le(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),le(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Nt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);co(r)?this.events.emit(Nt("session_update",s),{}):ti(r)&&this.events.emit(Nt("session_update",s),{error:r.error})}),le(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,On(td)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),le(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Nt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);co(r)?this.events.emit(Nt("session_extend",s),{}):ti(r)&&this.events.emit(Nt("session_extend",s),{error:r.error})}),le(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),le(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Nt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);co(r)?this.events.emit(Nt("session_ping",s),{}):ti(r)&&this.events.emit(Nt("session_ping",s),{error:r.error})},500)}),le(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(qn.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:nn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),le(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Qt({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:go(JSON.stringify(xc("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),m={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(m),u===Zt.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(m):(this.addSessionRequestToSessionRequestQueue(m),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),le(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Nt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);co(r)?this.events.emit(Nt("session_request",s),{result:r.result}):ti(r)&&this.events.emit(Nt("session_request",s),{error:r.error})}),le(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Lf.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Qt({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Lf.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),le(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),co(r)?this.events.emit(Nt("session_request",s),{result:r.result}):ti(r)&&this.events.emit(Nt("session_request",s),{error:r.error})}),le(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:go(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Zt.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:ca,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Bn.wc_sessionAuthenticate.autoReject,appLink:h})}}),le(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),le(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=so.idle,this.processSessionRequestQueue()},ge.toMiliseconds(this.requestQueueDelay))}),le(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Nt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Nt("session_request",i.request.id),{error:r})})}),le(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===so.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=so.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),le(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),le(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:xc("wc_sessionPropose",Zr(Qt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),le(this,"isValidConnect",async n=>{if(!rs(n)){const{message:l}=me("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(ir(r)||await this.isValidPairingTopic(r),!Fde(c)){const{message:l}=me("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!ir(s)&&Fc(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!ir(i)&&Fc(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),ir(o)||this.validateSessionProps(o,"sessionProperties"),!ir(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),le(this,"validateNamespaces",(n,r)=>{const s=Bde(n,"connect()",r);if(s)throw new Error(s.message)}),le(this,"isValidApprove",async n=>{if(!rs(n))throw new Error(me("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=$_(s,"approve()");if(l)throw new Error(l.message);const u=qk(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!An(i,!0)){const{message:d}=me("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(ir(o)||this.validateSessionProps(o,"sessionProperties"),!ir(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),le(this,"isValidReject",async n=>{if(!rs(n)){const{message:i}=me("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!Wde(s)){const{message:i}=me("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),le(this,"isValidSessionSettleRequest",n=>{if(!rs(n)){const{message:l}=me("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!eU(r)){const{message:l}=me("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=$de(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=$_(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Za(o)){const{message:l}=me("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),le(this,"isValidUpdate",async n=>{if(!rs(n)){const{message:c}=me("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=$_(s,"update()");if(o)throw new Error(o.message);const a=qk(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),le(this,"isValidExtend",async n=>{if(!rs(n)){const{message:s}=me("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),le(this,"isValidRequest",async n=>{if(!rs(n)){const{message:c}=me("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!Wk(a,i)){const{message:c}=me("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!qde(s)){const{message:c}=me("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!Gde(a,i,s.method)){const{message:c}=me("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!Jde(o,F_)){const{message:c}=me("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${F_.min} and ${F_.max}`);throw new Error(c)}}),le(this,"isValidRespond",async n=>{var r;if(!rs(n)){const{message:o}=me("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!Hde(i)){const{message:o}=me("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),le(this,"isValidPing",async n=>{if(!rs(n)){const{message:s}=me("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),le(this,"isValidEmit",async n=>{if(!rs(n)){const{message:a}=me("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!Wk(o,i)){const{message:a}=me("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!Vde(s)){const{message:a}=me("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Kde(o,i,s.name)){const{message:a}=me("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),le(this,"isValidDisconnect",async n=>{if(!rs(n)){const{message:s}=me("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),le(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!An(s,!1))throw new Error("uri is required parameter");if(!An(i,!1))throw new Error("domain is required parameter");if(!An(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Kd(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Kd(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),le(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||kp,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Zt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),le(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=me("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),le(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),le(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),le(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=me("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),le(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Zt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),le(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),le(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=rk(n,"topic")||"",s=decodeURIComponent(rk(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Zt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),le(this,"registerLinkModeListeners",async()=>{var n;if(O2()||ol()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),le(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),le(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),le(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=Fme[i];if(i==="sui_signTransaction")return[ble(r.transactionBytes)];if(i==="near_signTransaction")return[dk(r)];if(i==="near_signTransactions")return r.map(c=>dk(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[hhe({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return la(r)?r.map(c=>hk(c)):[hk(r)];if(i==="cosmos_signDirect")return[Ele(r)];if(typeof r=="string")return[r];const a=r[o.key];if(la(a))return i==="solana_signAllTransactions"?a.map(c=>vle(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=me("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(qn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Mw)?this.client.auth.authKeys.get(Mw):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Zt.link_mode?ic:Ui});G2(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:go(r)})):fb(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Xs.expired,async e=>{const{topic:n,id:r}=c4(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,me("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,me("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Sl.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Sl.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!An(e,!1)){const{message:n}=me("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=me("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Za(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=me("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!An(e,!1)){const{message:n}=me("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=me("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Za(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=me("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=me("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(An(e,!1)){const{message:n}=me("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=me("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!zde(e)){const{message:n}=me("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=me("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Za(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=me("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class tye extends Uu{constructor(e,n){super(e,n,Lme,K2),this.core=e,this.logger=n}}let nye=class extends Uu{constructor(e,n){super(e,n,Mme,K2),this.core=e,this.logger=n}};class rye extends Uu{constructor(e,n){super(e,n,zme,K2,r=>r.id),this.core=e,this.logger=n}}class sye extends Uu{constructor(e,n){super(e,n,Vme,gb,()=>Mw),this.core=e,this.logger=n}}class iye extends Uu{constructor(e,n){super(e,n,Gme,gb),this.core=e,this.logger=n}}class oye extends Uu{constructor(e,n){super(e,n,Kme,gb,r=>r.id),this.core=e,this.logger=n}}var aye=Object.defineProperty,cye=(t,e,n)=>e in t?aye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,z_=(t,e,n)=>cye(t,typeof e!="symbol"?e+"":e,n);class lye{constructor(e,n){this.core=e,this.logger=n,z_(this,"authKeys"),z_(this,"pairingTopics"),z_(this,"requests"),this.authKeys=new sye(this.core,this.logger),this.pairingTopics=new iye(this.core,this.logger),this.requests=new oye(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var uye=Object.defineProperty,dye=(t,e,n)=>e in t?uye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dt=(t,e,n)=>dye(t,typeof e!="symbol"?e+"":e,n);let hye=class TU extends yne{constructor(e){super(e),dt(this,"protocol",SU),dt(this,"version",AU),dt(this,"name",B_.name),dt(this,"metadata"),dt(this,"core"),dt(this,"logger"),dt(this,"events",new fi.EventEmitter),dt(this,"engine"),dt(this,"session"),dt(this,"proposal"),dt(this,"pendingRequest"),dt(this,"auth"),dt(this,"signConfig"),dt(this,"on",(r,s)=>this.events.on(r,s)),dt(this,"once",(r,s)=>this.events.once(r,s)),dt(this,"off",(r,s)=>this.events.off(r,s)),dt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),dt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),dt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),dt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),dt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||B_.name,this.metadata=hce(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:km(Wh({level:(e==null?void 0:e.logger)||B_.logger}));this.core=(e==null?void 0:e.core)||new Ume(e),this.logger=Pr(n,this.name),this.session=new nye(this.core,this.logger),this.proposal=new tye(this.core,this.logger),this.pendingRequest=new rye(this.core,this.logger),this.engine=new eye(this),this.auth=new lye(this.core,this.logger)}static async init(e){const n=new TU(e);return await n.initialize(),n}get context(){return bs(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},ge.toMiliseconds(ge.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var tS={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof gn<"u"&&gn,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof gn<"u"&&gn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(N){return N&&DataView.prototype.isPrototypeOf(N)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(N){return N&&u.indexOf(Object.prototype.toString.call(N))>-1};function h(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(N)||N==="")throw new TypeError('Invalid character in header field name: "'+N+'"');return N.toLowerCase()}function f(N){return typeof N!="string"&&(N=String(N)),N}function p(N){var T={next:function(){var L=N.shift();return{done:L===void 0,value:L}}};return c.iterable&&(T[Symbol.iterator]=function(){return T}),T}function m(N){this.map={},N instanceof m?N.forEach(function(T,L){this.append(L,T)},this):Array.isArray(N)?N.forEach(function(T){if(T.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+T.length);this.append(T[0],T[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(T){this.append(T,N[T])},this)}m.prototype.append=function(N,T){N=h(N),T=f(T);var L=this.map[N];this.map[N]=L?L+", "+T:T},m.prototype.delete=function(N){delete this.map[h(N)]},m.prototype.get=function(N){return N=h(N),this.has(N)?this.map[N]:null},m.prototype.has=function(N){return this.map.hasOwnProperty(h(N))},m.prototype.set=function(N,T){this.map[h(N)]=f(T)},m.prototype.forEach=function(N,T){for(var L in this.map)this.map.hasOwnProperty(L)&&N.call(T,this.map[L],L,this)},m.prototype.keys=function(){var N=[];return this.forEach(function(T,L){N.push(L)}),p(N)},m.prototype.values=function(){var N=[];return this.forEach(function(T){N.push(T)}),p(N)},m.prototype.entries=function(){var N=[];return this.forEach(function(T,L){N.push([L,T])}),p(N)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function w(N){if(!N._noBody){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}}function y(N){return new Promise(function(T,L){N.onload=function(){T(N.result)},N.onerror=function(){L(N.error)}})}function b(N){var T=new FileReader,L=y(T);return T.readAsArrayBuffer(N),L}function v(N){var T=new FileReader,L=y(T),D=/charset=([A-Za-z0-9_-]+)/.exec(N.type),$=D?D[1]:"utf-8";return T.readAsText(N,$),L}function E(N){for(var T=new Uint8Array(N),L=new Array(T.length),D=0;D<T.length;D++)L[D]=String.fromCharCode(T[D]);return L.join("")}function _(N){if(N.slice)return N.slice(0);var T=new Uint8Array(N.byteLength);return T.set(new Uint8Array(N)),T.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(N){this.bodyUsed=this.bodyUsed,this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:c.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:c.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():c.arrayBuffer&&c.blob&&l(N)?(this._bodyArrayBuffer=_(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||d(N))?this._bodyArrayBuffer=_(N):this._bodyText=N=Object.prototype.toString.call(N):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var N=w(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var N=w(this);return N||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var N=w(this);if(N)return N;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function A(N){var T=N.toUpperCase();return x.indexOf(T)>-1?T:N}function C(N,T){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');T=T||{};var L=T.body;if(N instanceof C){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,T.headers||(this.headers=new m(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!L&&N._bodyInit!=null&&(L=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new m(T.headers)),this.method=A(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal||function(){if("AbortController"in a){var U=new AbortController;return U.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),(this.method==="GET"||this.method==="HEAD")&&(T.cache==="no-store"||T.cache==="no-cache")){var D=/([?&])_=[^&]*/;if(D.test(this.url))this.url=this.url.replace(D,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function k(N){var T=new FormData;return N.trim().split("&").forEach(function(L){if(L){var D=L.split("="),$=D.shift().replace(/\+/g," "),U=D.join("=").replace(/\+/g," ");T.append(decodeURIComponent($),decodeURIComponent(U))}}),T}function O(N){var T=new m,L=N.replace(/\r?\n[\t ]+/g," ");return L.split("\r").map(function(D){return D.indexOf(`
`)===0?D.substr(1,D.length):D}).forEach(function(D){var $=D.split(":"),U=$.shift().trim();if(U){var W=$.join(":").trim();try{T.append(U,W)}catch(J){console.warn("Response "+J.message)}}}),T}S.call(C.prototype);function M(N,T){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=T.statusText===void 0?"":""+T.statusText,this.headers=new m(T.headers),this.url=T.url||"",this._initBody(N)}S.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},M.error=function(){var N=new M(null,{status:200,statusText:""});return N.ok=!1,N.status=0,N.type="error",N};var F=[301,302,303,307,308];M.redirect=function(N,T){if(F.indexOf(T)===-1)throw new RangeError("Invalid status code");return new M(null,{status:T,headers:{location:N}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(T,L){this.message=T,this.name=L;var D=Error(T);this.stack=D.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function V(N,T){return new Promise(function(L,D){var $=new C(N,T);if($.signal&&$.signal.aborted)return D(new o.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function W(){U.abort()}U.onload=function(){var ne={statusText:U.statusText,headers:O(U.getAllResponseHeaders()||"")};$.url.indexOf("file://")===0&&(U.status<200||U.status>599)?ne.status=200:ne.status=U.status,ne.url="responseURL"in U?U.responseURL:ne.headers.get("X-Request-URL");var se="response"in U?U.response:U.responseText;setTimeout(function(){L(new M(se,ne))},0)},U.onerror=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){D(new TypeError("Network request timed out"))},0)},U.onabort=function(){setTimeout(function(){D(new o.DOMException("Aborted","AbortError"))},0)};function J(ne){try{return ne===""&&a.location.href?a.location.href:ne}catch{return ne}}if(U.open($.method,J($.url),!0),$.credentials==="include"?U.withCredentials=!0:$.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(c.blob?U.responseType="blob":c.arrayBuffer&&(U.responseType="arraybuffer")),T&&typeof T.headers=="object"&&!(T.headers instanceof m||a.Headers&&T.headers instanceof a.Headers)){var ie=[];Object.getOwnPropertyNames(T.headers).forEach(function(ne){ie.push(h(ne)),U.setRequestHeader(ne,f(T.headers[ne]))}),$.headers.forEach(function(ne,se){ie.indexOf(se)===-1&&U.setRequestHeader(se,ne)})}else $.headers.forEach(function(ne,se){U.setRequestHeader(se,ne)});$.signal&&($.signal.addEventListener("abort",W),U.onreadystatechange=function(){U.readyState===4&&$.signal.removeEventListener("abort",W)}),U.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return V.polyfill=!0,a.fetch||(a.fetch=V,a.Headers=m,a.Request=C,a.Response=M),o.Headers=m,o.Request=C,o.Response=M,o.fetch=V,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(tS,tS.exports);var fye=tS.exports;const IO=Su(fye);var pye=Object.defineProperty,gye=Object.defineProperties,mye=Object.getOwnPropertyDescriptors,TO=Object.getOwnPropertySymbols,yye=Object.prototype.hasOwnProperty,wye=Object.prototype.propertyIsEnumerable,NO=(t,e,n)=>e in t?pye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PO=(t,e)=>{for(var n in e||(e={}))yye.call(e,n)&&NO(t,n,e[n]);if(TO)for(var n of TO(e))wye.call(e,n)&&NO(t,n,e[n]);return t},kO=(t,e)=>gye(t,mye(e));const vye={Accept:"application/json","Content-Type":"application/json"},bye="POST",OO={headers:vye,method:bye},RO=10;let Yi=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new fi.EventEmitter,this.isAvailable=!1,this.registering=!1,!Qk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=va(e),r=await(await IO(this.url,kO(PO({},OO),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Qk(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=va({id:1,jsonrpc:"2.0",method:"test",params:[]});await IO(e,kO(PO({},OO),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?mu(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=hb(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return rU(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>RO&&this.events.setMaxListeners(RO)}};const $O="error",_ye="wss://relay.walletconnect.org",Eye="wc",Cye="universal_provider",Zy=`${Eye}@2:${Cye}:`,NU="https://rpc.walletconnect.org/v1/",vd="generic",xye=`${NU}bundler`,gi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Y2(t){return t==null||typeof t!="object"&&typeof t!="function"}function PU(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function kU(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Sye="[object RegExp]",OU="[object String]",RU="[object Number]",$U="[object Boolean]",DU="[object Arguments]",Aye="[object Symbol]",Iye="[object Date]",Tye="[object Map]",Nye="[object Set]",Pye="[object Array]",kye="[object ArrayBuffer]",Oye="[object Object]",Rye="[object DataView]",$ye="[object Uint8Array]",Dye="[object Uint8ClampedArray]",jye="[object Uint16Array]",Uye="[object Uint32Array]",Lye="[object Int8Array]",Mye="[object Int16Array]",Bye="[object Int32Array]",Fye="[object Float32Array]",zye="[object Float64Array]";function Q2(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Wye(t,e){return Ud(t,void 0,t,new Map,e)}function Ud(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(Y2(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ud(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Ud(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Ud(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(Q2(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ud(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Al(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Al(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Al(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Al(o,t,n,r,s),o}if(typeof t=="object"&&qye(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Al(o,t,n,r,s),o}return t}function Al(t,e,n=t,r,s){const i=[...Object.keys(e),...PU(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Ud(e[a],a,n,r,s))}}function qye(t){switch(kU(t)){case DU:case Pye:case kye:case Rye:case $U:case Iye:case Fye:case zye:case Lye:case Mye:case Bye:case Tye:case RU:case Oye:case Sye:case Nye:case OU:case Aye:case $ye:case Dye:case jye:case Uye:return!0;default:return!1}}function Hye(t,e){return Wye(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case RU:case OU:case $U:{const o=new t.constructor(t==null?void 0:t.valueOf());return Al(o,t),o}case DU:{const o={};return Al(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function DO(t){return Hye(t)}function jO(t){return t!==null&&typeof t=="object"&&kU(t)==="[object Arguments]"}function UO(t){return typeof t=="object"&&t!==null}function Vye(){}function Gye(t){return Q2(t)}function Kye(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Yye(t){if(Y2(t))return t;if(Array.isArray(t)||Q2(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Qye(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=nS(s,o,r,new Map)}return s}function nS(t,e,n,r){if(Y2(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return Yye(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...PU(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(jO(a)&&(a={...a}),jO(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=DO(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||UO(c)&&UO(a)?t[o]=nS(c,a,n,r):c==null&&Kye(a)?t[o]=nS({},a,n,r):c==null&&Gye(a)?t[o]=DO(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function Jye(t,...e){return Qye(t,...e,Vye)}var Zye=Object.defineProperty,Xye=Object.defineProperties,ewe=Object.getOwnPropertyDescriptors,LO=Object.getOwnPropertySymbols,twe=Object.prototype.hasOwnProperty,nwe=Object.prototype.propertyIsEnumerable,MO=(t,e,n)=>e in t?Zye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xy=(t,e)=>{for(var n in e||(e={}))twe.call(e,n)&&MO(t,n,e[n]);if(LO)for(var n of LO(e))nwe.call(e,n)&&MO(t,n,e[n]);return t},rwe=(t,e)=>Xye(t,ewe(e));function Ms(t,e,n){var r;const s=Kd(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${NU}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Lu(t){return t.includes(":")?t.split(":")[1]:t}function jU(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function swe(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function ew(t={},e={}){const n=BO(t),r=BO(e);return Jye(n,r)}function BO(t){var e,n,r,s,i;const o={};if(!Fc(t))return o;for(const[a,c]of Object.entries(t)){const l=ub(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=jd(a);o[f]=rwe(Xy(Xy({},o[f]),c),{chains:xo(l,(e=o[f])==null?void 0:e.chains),methods:xo(u,(n=o[f])==null?void 0:n.methods),events:xo(d,(r=o[f])==null?void 0:r.events)}),(Fc(h)||Fc(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Xy(Xy({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function FO(t){return t.includes(":")?t.split(":")[2]:t}function zO(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=ub(n)?[n]:r.chains?r.chains:jU(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function W_(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const UU={},At=t=>UU[t],q_=(t,e)=>{UU[t]=e};var iwe=Object.defineProperty,owe=(t,e,n)=>e in t?iwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nd=(t,e,n)=>owe(t,typeof e!="symbol"?e+"":e,n);class awe{constructor(e){nd(this,"name","polkadot"),nd(this,"client"),nd(this,"httpProviders"),nd(this,"events"),nd(this,"namespace"),nd(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(gi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Lu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new Yi(r,At("disableProviderPing")))}}var cwe=Object.defineProperty,lwe=Object.defineProperties,uwe=Object.getOwnPropertyDescriptors,WO=Object.getOwnPropertySymbols,dwe=Object.prototype.hasOwnProperty,hwe=Object.prototype.propertyIsEnumerable,rS=(t,e,n)=>e in t?cwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qO=(t,e)=>{for(var n in e||(e={}))dwe.call(e,n)&&rS(t,n,e[n]);if(WO)for(var n of WO(e))hwe.call(e,n)&&rS(t,n,e[n]);return t},HO=(t,e)=>lwe(t,uwe(e)),rd=(t,e,n)=>rS(t,typeof e!="symbol"?e+"":e,n);class fwe{constructor(e){rd(this,"name","eip155"),rd(this,"client"),rd(this,"chainId"),rd(this,"namespace"),rd(this,"httpProviders"),rd(this,"events"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(gi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Ms(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new Yi(r,At("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Lu(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:HO(qO({},u.sessionProperties||{}),{capabilities:HO(qO({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xc("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${xye}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var pwe=Object.defineProperty,gwe=(t,e,n)=>e in t?pwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sd=(t,e,n)=>gwe(t,typeof e!="symbol"?e+"":e,n);class mwe{constructor(e){sd(this,"name","solana"),sd(this,"client"),sd(this,"httpProviders"),sd(this,"events"),sd(this,"namespace"),sd(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(gi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Lu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new Yi(r,At("disableProviderPing")))}}var ywe=Object.defineProperty,wwe=(t,e,n)=>e in t?ywe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,id=(t,e,n)=>wwe(t,typeof e!="symbol"?e+"":e,n);class vwe{constructor(e){id(this,"name","cosmos"),id(this,"client"),id(this,"httpProviders"),id(this,"events"),id(this,"namespace"),id(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(gi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Lu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new Yi(r,At("disableProviderPing")))}}var bwe=Object.defineProperty,_we=(t,e,n)=>e in t?bwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,od=(t,e,n)=>_we(t,typeof e!="symbol"?e+"":e,n);class Ewe{constructor(e){od(this,"name","algorand"),od(this,"client"),od(this,"httpProviders"),od(this,"events"),od(this,"namespace"),od(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Ms(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(gi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ms(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new pi(new Yi(r,At("disableProviderPing")))}}var Cwe=Object.defineProperty,xwe=(t,e,n)=>e in t?Cwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ad=(t,e,n)=>xwe(t,typeof e!="symbol"?e+"":e,n);class Swe{constructor(e){ad(this,"name","cip34"),ad(this,"client"),ad(this,"httpProviders"),ad(this,"events"),ad(this,"namespace"),ad(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(gi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Lu(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new Yi(r,At("disableProviderPing")))}}var Awe=Object.defineProperty,Iwe=(t,e,n)=>e in t?Awe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cd=(t,e,n)=>Iwe(t,typeof e!="symbol"?e+"":e,n);class Twe{constructor(e){cd(this,"name","elrond"),cd(this,"client"),cd(this,"httpProviders"),cd(this,"events"),cd(this,"namespace"),cd(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(gi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Lu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new Yi(r,At("disableProviderPing")))}}var Nwe=Object.defineProperty,Pwe=(t,e,n)=>e in t?Nwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ld=(t,e,n)=>Pwe(t,typeof e!="symbol"?e+"":e,n);class kwe{constructor(e){ld(this,"name","multiversx"),ld(this,"client"),ld(this,"httpProviders"),ld(this,"events"),ld(this,"namespace"),ld(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(gi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Lu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new Yi(r,At("disableProviderPing")))}}var Owe=Object.defineProperty,Rwe=(t,e,n)=>e in t?Owe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ud=(t,e,n)=>Rwe(t,typeof e!="symbol"?e+"":e,n);class $we{constructor(e){ud(this,"name","near"),ud(this,"client"),ud(this,"httpProviders"),ud(this,"events"),ud(this,"namespace"),ud(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ms(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(gi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ms(e,this.namespace);return typeof r>"u"?void 0:new pi(new Yi(r,At("disableProviderPing")))}}var Dwe=Object.defineProperty,jwe=(t,e,n)=>e in t?Dwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dd=(t,e,n)=>jwe(t,typeof e!="symbol"?e+"":e,n);class Uwe{constructor(e){dd(this,"name","tezos"),dd(this,"client"),dd(this,"httpProviders"),dd(this,"events"),dd(this,"namespace"),dd(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ms(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(gi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ms(e,this.namespace);return typeof r>"u"?void 0:new pi(new Yi(r))}}var Lwe=Object.defineProperty,Mwe=(t,e,n)=>e in t?Lwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hd=(t,e,n)=>Mwe(t,typeof e!="symbol"?e+"":e,n);class Bwe{constructor(e){hd(this,"name",vd),hd(this,"client"),hd(this,"httpProviders"),hd(this,"events"),hd(this,"namespace"),hd(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(gi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Kd(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ms(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new Yi(r,At("disableProviderPing")))}}var Fwe=Object.defineProperty,zwe=Object.defineProperties,Wwe=Object.getOwnPropertyDescriptors,VO=Object.getOwnPropertySymbols,qwe=Object.prototype.hasOwnProperty,Hwe=Object.prototype.propertyIsEnumerable,sS=(t,e,n)=>e in t?Fwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tw=(t,e)=>{for(var n in e||(e={}))qwe.call(e,n)&&sS(t,n,e[n]);if(VO)for(var n of VO(e))Hwe.call(e,n)&&sS(t,n,e[n]);return t},H_=(t,e)=>zwe(t,Wwe(e)),Qs=(t,e,n)=>sS(t,typeof e!="symbol"?e+"":e,n);let Vwe=class LU{constructor(e){Qs(this,"client"),Qs(this,"namespaces"),Qs(this,"optionalNamespaces"),Qs(this,"sessionProperties"),Qs(this,"scopedProperties"),Qs(this,"events",new g2),Qs(this,"rpcProviders",{}),Qs(this,"session"),Qs(this,"providerOpts"),Qs(this,"logger"),Qs(this,"uri"),Qs(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:km(Wh({level:(e==null?void 0:e.logger)||$O})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new LU(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:tw({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,db(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:nn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=zO(this.session.namespaces);this.namespaces=ew(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=zO(s.namespaces);return this.namespaces=ew(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===vd?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(la(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await hye.init({core:this.providerOpts.core,logger:this.providerOpts.logger||$O,relayUrl:this.providerOpts.relayUrl||_ye,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>jd(n)))];q_("client",this.client),q_("events",this.events),q_("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=swe(n,this.session),s=jU(r),i=ew(this.namespaces,this.optionalNamespaces),o=H_(tw({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new fwe({namespace:o});break;case"algorand":this.rpcProviders[n]=new Ewe({namespace:o});break;case"solana":this.rpcProviders[n]=new mwe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new vwe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new awe({namespace:o});break;case"cip34":this.rpcProviders[n]=new Swe({namespace:o});break;case"elrond":this.rpcProviders[n]=new Twe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new kwe({namespace:o});break;case"near":this.rpcProviders[n]=new $we({namespace:o});break;case"tezos":this.rpcProviders[n]=new Uwe({namespace:o});break;default:this.rpcProviders[vd]?this.rpcProviders[vd].updateNamespace(o):this.rpcProviders[vd]=new Bwe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&la(o)&&this.events.emit("accountsChanged",o.map(FO))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=jd(o),l=W_(o)!==W_(a)?`${c}:${W_(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=H_(tw({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",H_(tw({},nn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(gi.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[vd]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=ew(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>jd(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=jd(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(FO);if(!la(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Zy}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Zy}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Zy}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Zy)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const Rp={getSIWX(){return ue.state.siwx},async initializeIfEnabled(){var i;const t=ue.state.siwx,e=R.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(R.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Pt.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Dt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=ke._getClient())==null?void 0:i.disconnect().catch(console.error)),Ve.reset("Connect"),ji.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ue.state.siwx,e=De.getPlainAddress(R.getActiveCaipAddress()),n=R.getActiveCaipNetwork(),r=ke._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();_e.getConnectorId(n.chainNamespace)===ee.CONNECTOR_ID.AUTH&&Ve.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),R.setLastConnectedSIWECaipNetwork(n),Pt.close(),Dt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Pt.state.open||Ve.state.view==="ApproveTransaction")&&await Pt.open({view:"SIWXSignMessage"}),i.isSmartAccount?ji.showError("This application might not support Smart Accounts"):ji.showError("Signature declined"),Dt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=R.getLastConnectedSIWECaipNetwork();r?R.switchActiveNetwork(r):await ke.disconnect()}else Pt.close();Ve.reset("Connect"),Dt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=R.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,De.getPlainAddress(R.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=ue.state.siwx,e=De.getPlainAddress(R.getActiveCaipAddress()),n=R.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Ve.state.view==="ApproveTransaction",r=Ve.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Rp.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=R.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(ji.showLoading("Authenticating...",{autoClose:!1}),ye.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Dt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Rp.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Dt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Rp.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{ji.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=R.state.activeChain;return{network:((e=R.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=ye.state.preferredAccountTypes)==null?void 0:n[t])===Kn.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Xt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Sc={ConnectorExplorerIds:{[ee.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ee.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ee.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ee.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ee.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Xt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Xt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Xt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Xt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Xt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Xt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Xt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Xt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Xt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Xt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Xt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ee.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ee.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ee.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ee.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ee.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ee.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ee.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ee.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ee.CONNECTOR_ID.COINBASE]:"Coinbase",[ee.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ee.CONNECTOR_ID.LEDGER]:"Ledger",[ee.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ee.CONNECTOR_ID.INJECTED]:"INJECTED",[ee.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ee.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ee.CONNECTOR_ID.AUTH]:"AUTH"}},Wg={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Xt.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=R.state.activeChain;return ee.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>_e.getConnectorId(e)===ee.CONNECTOR_ID.AUTH&&e===t)}},Gwe=new AbortController,on={EmbeddedWalletAbortController:Gwe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${Kwe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function Kwe(){return typeof window<"u"}const Ywe={createLogger(t,e="error"){const n=Wh({level:e}),{logger:r}=y2({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},Qwe="rpc.walletconnect.org";function GO(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const V_=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],wo={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Qwe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ee.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ee.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return V_.includes(e)?GO(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,m,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((m=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:m[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Sc.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>wo.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ey(a.url,a.config))}),V_.includes(t.caipNetworkId)&&r.push(Ey(GO(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ey(a))}),GT(r)},extendWagmiTransports(t,e,n){if(V_.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return GT([n,Ey(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ee.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=ve.getActiveCaipNetworkId(),n=R.getAllRequestedCaipNetworks(),r=Array.from(((c=R.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},q0={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Xr=Yt({providers:{...q0},providerIds:{...q0}}),Bt={state:Xr,subscribeKey(t,e){return ur(Xr,t,e)},subscribe(t){return lr(Xr,()=>{t(Xr)})},subscribeProviders(t){return lr(Xr.providers,()=>t(Xr.providers))},setProvider(t,e){e&&(Xr.providers[t]=pu(e))},getProvider(t){return Xr.providers[t]},setProviderId(t,e){e&&(Xr.providerIds[t]=e)},getProviderId(t){if(t)return Xr.providerIds[t]},reset(){Xr.providers={...q0},Xr.providerIds={...q0}},resetChain(t){Xr.providers[t]=void 0,Xr.providerIds[t]=void 0}},KO={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},rr={set(t,e){ks.isClient&&localStorage.setItem(`${Re.STORAGE_KEY}${t}`,e)},get(t){return ks.isClient?localStorage.getItem(`${Re.STORAGE_KEY}${t}`):null},delete(t,e){ks.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Re.STORAGE_KEY}${t}`))}},nw=30*1e3,ks={checkIfAllowedToTriggerEmail(){const t=rr.get(Re.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<nw){const n=Math.ceil((nw-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=rr.get(Re.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<nw)return Math.ceil((nw-e)/1e3)}return 0},checkIfRequestExists(t){return Kn.NOT_SAFE_RPC_METHODS.includes(t.method)||Kn.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(KO.transactionHash))||(t==null?void 0:t.match(KO.signedMessage)))?Re.RPC_RESPONSE_TYPE_TX:Re.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Kn.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var St;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(St||(St={}));var iS;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(iS||(iS={}));const Ie=St.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),oc=t=>{switch(typeof t){case"undefined":return Ie.undefined;case"string":return Ie.string;case"number":return isNaN(t)?Ie.nan:Ie.number;case"boolean":return Ie.boolean;case"function":return Ie.function;case"bigint":return Ie.bigint;case"symbol":return Ie.symbol;case"object":return Array.isArray(t)?Ie.array:t===null?Ie.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ie.promise:typeof Map<"u"&&t instanceof Map?Ie.map:typeof Set<"u"&&t instanceof Set?Ie.set:typeof Date<"u"&&t instanceof Date?Ie.date:Ie.object;default:return Ie.unknown}},fe=St.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Jwe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class zi extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,St.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}zi.create=t=>new zi(t);const qg=(t,e)=>{let n;switch(t.code){case fe.invalid_type:t.received===Ie.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case fe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,St.jsonStringifyReplacer)}`;break;case fe.unrecognized_keys:n=`Unrecognized key(s) in object: ${St.joinValues(t.keys,", ")}`;break;case fe.invalid_union:n="Invalid input";break;case fe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${St.joinValues(t.options)}`;break;case fe.invalid_enum_value:n=`Invalid enum value. Expected ${St.joinValues(t.options)}, received '${t.received}'`;break;case fe.invalid_arguments:n="Invalid function arguments";break;case fe.invalid_return_type:n="Invalid function return type";break;case fe.invalid_date:n="Invalid date";break;case fe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:St.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case fe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case fe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case fe.custom:n="Invalid input";break;case fe.invalid_intersection_types:n="Intersection results could not be merged";break;case fe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case fe.not_finite:n="Number must be finite";break;default:n=e.defaultError,St.assertNever(t)}return{message:n}};let MU=qg;function Zwe(t){MU=t}function H0(){return MU}const V0=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},Xwe=[];function Oe(t,e){const n=V0({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,H0(),qg].filter(r=>!!r)});t.common.issues.push(n)}class Nr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ze;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Nr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Ze;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ze=Object.freeze({status:"aborted"}),BU=t=>({status:"dirty",value:t}),Wr=t=>({status:"valid",value:t}),oS=t=>t.status==="aborted",aS=t=>t.status==="dirty",Hg=t=>t.status==="valid",G0=t=>typeof Promise<"u"&&t instanceof Promise;var Fe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Fe||(Fe={}));class To{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const YO=(t,e)=>{if(Hg(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new zi(t.common.issues);return this._error=n,this._error}}};function rt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class ot{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return oc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:oc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Nr,ctx:{common:e.parent.common,data:e.data,parsedType:oc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(G0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oc(e)},i=this._parseSync({data:e,path:s.path,parent:s});return YO(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oc(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(G0(s)?s:Promise.resolve(s));return YO(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:fe.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Vi({schema:this,typeName:Ke.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ua.create(this,this._def)}nullable(){return Cu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wi.create(this,this._def)}promise(){return Th.create(this,this._def)}or(e){return Yg.create([this,e],this._def)}and(e){return Qg.create(this,e,this._def)}transform(e){return new Vi({...rt(this._def),schema:this,typeName:Ke.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new tm({...rt(this._def),innerType:this,defaultValue:n,typeName:Ke.ZodDefault})}brand(){return new zU({typeName:Ke.ZodBranded,type:this,...rt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new J0({...rt(this._def),innerType:this,catchValue:n,typeName:Ke.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Bm.create(this,e)}readonly(){return X0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const e0e=/^c[^\s-]{8,}$/i,t0e=/^[a-z][a-z0-9]*$/,n0e=/^[0-9A-HJKMNP-TV-Z]{26}$/,r0e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,s0e=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,i0e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let G_;const o0e=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,a0e=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,c0e=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function l0e(t,e){return!!((e==="v4"||!e)&&o0e.test(t)||(e==="v6"||!e)&&a0e.test(t))}class Li extends ot{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ie.string){const i=this._getOrReturnCtx(e);return Oe(i,{code:fe.invalid_type,expected:Ie.string,received:i.parsedType}),Ze}const r=new Nr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Oe(s,{code:fe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Oe(s,{code:fe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Oe(s,{code:fe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Oe(s,{code:fe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")s0e.test(e.data)||(s=this._getOrReturnCtx(e,s),Oe(s,{validation:"email",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")G_||(G_=new RegExp(i0e,"u")),G_.test(e.data)||(s=this._getOrReturnCtx(e,s),Oe(s,{validation:"emoji",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")r0e.test(e.data)||(s=this._getOrReturnCtx(e,s),Oe(s,{validation:"uuid",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")e0e.test(e.data)||(s=this._getOrReturnCtx(e,s),Oe(s,{validation:"cuid",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")t0e.test(e.data)||(s=this._getOrReturnCtx(e,s),Oe(s,{validation:"cuid2",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")n0e.test(e.data)||(s=this._getOrReturnCtx(e,s),Oe(s,{validation:"ulid",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Oe(s,{validation:"url",code:fe.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Oe(s,{validation:"regex",code:fe.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Oe(s,{code:fe.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Oe(s,{code:fe.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Oe(s,{code:fe.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?c0e(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Oe(s,{code:fe.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?l0e(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Oe(s,{validation:"ip",code:fe.invalid_string,message:i.message}),r.dirty()):St.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:fe.invalid_string,...Fe.errToObj(r)})}_addCheck(e){return new Li({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Fe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Fe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Fe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Fe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Fe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Fe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Fe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Fe.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Fe.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Fe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Fe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Fe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Fe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Fe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Fe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Fe.errToObj(n)})}nonempty(e){return this.min(1,Fe.errToObj(e))}trim(){return new Li({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Li({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Li({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Li.create=t=>{var e;return new Li({checks:[],typeName:Ke.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...rt(t)})};function u0e(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Xc extends ot{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ie.number){const i=this._getOrReturnCtx(e);return Oe(i,{code:fe.invalid_type,expected:Ie.number,received:i.parsedType}),Ze}let r;const s=new Nr;for(const i of this._def.checks)i.kind==="int"?St.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Oe(r,{code:fe.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:fe.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:fe.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?u0e(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:fe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Oe(r,{code:fe.not_finite,message:i.message}),s.dirty()):St.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Fe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Fe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Fe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Fe.toString(n))}setLimit(e,n,r,s){return new Xc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Fe.toString(s)}]})}_addCheck(e){return new Xc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Fe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Fe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Fe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Fe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Fe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Fe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&St.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Xc.create=t=>new Xc({checks:[],typeName:Ke.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...rt(t)});class el extends ot{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ie.bigint){const i=this._getOrReturnCtx(e);return Oe(i,{code:fe.invalid_type,expected:Ie.bigint,received:i.parsedType}),Ze}let r;const s=new Nr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:fe.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:fe.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Oe(r,{code:fe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):St.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Fe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Fe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Fe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Fe.toString(n))}setLimit(e,n,r,s){return new el({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Fe.toString(s)}]})}_addCheck(e){return new el({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Fe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Fe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}el.create=t=>{var e;return new el({checks:[],typeName:Ke.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...rt(t)})};class Vg extends ot{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ie.boolean){const r=this._getOrReturnCtx(e);return Oe(r,{code:fe.invalid_type,expected:Ie.boolean,received:r.parsedType}),Ze}return Wr(e.data)}}Vg.create=t=>new Vg({typeName:Ke.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...rt(t)});class _u extends ot{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ie.date){const i=this._getOrReturnCtx(e);return Oe(i,{code:fe.invalid_type,expected:Ie.date,received:i.parsedType}),Ze}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Oe(i,{code:fe.invalid_date}),Ze}const r=new Nr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Oe(s,{code:fe.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Oe(s,{code:fe.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):St.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new _u({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Fe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Fe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}_u.create=t=>new _u({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ke.ZodDate,...rt(t)});class K0 extends ot{_parse(e){if(this._getType(e)!==Ie.symbol){const r=this._getOrReturnCtx(e);return Oe(r,{code:fe.invalid_type,expected:Ie.symbol,received:r.parsedType}),Ze}return Wr(e.data)}}K0.create=t=>new K0({typeName:Ke.ZodSymbol,...rt(t)});class Gg extends ot{_parse(e){if(this._getType(e)!==Ie.undefined){const r=this._getOrReturnCtx(e);return Oe(r,{code:fe.invalid_type,expected:Ie.undefined,received:r.parsedType}),Ze}return Wr(e.data)}}Gg.create=t=>new Gg({typeName:Ke.ZodUndefined,...rt(t)});class Kg extends ot{_parse(e){if(this._getType(e)!==Ie.null){const r=this._getOrReturnCtx(e);return Oe(r,{code:fe.invalid_type,expected:Ie.null,received:r.parsedType}),Ze}return Wr(e.data)}}Kg.create=t=>new Kg({typeName:Ke.ZodNull,...rt(t)});class Ih extends ot{constructor(){super(...arguments),this._any=!0}_parse(e){return Wr(e.data)}}Ih.create=t=>new Ih({typeName:Ke.ZodAny,...rt(t)});class Zl extends ot{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wr(e.data)}}Zl.create=t=>new Zl({typeName:Ke.ZodUnknown,...rt(t)});class _a extends ot{_parse(e){const n=this._getOrReturnCtx(e);return Oe(n,{code:fe.invalid_type,expected:Ie.never,received:n.parsedType}),Ze}}_a.create=t=>new _a({typeName:Ke.ZodNever,...rt(t)});class Y0 extends ot{_parse(e){if(this._getType(e)!==Ie.undefined){const r=this._getOrReturnCtx(e);return Oe(r,{code:fe.invalid_type,expected:Ie.void,received:r.parsedType}),Ze}return Wr(e.data)}}Y0.create=t=>new Y0({typeName:Ke.ZodVoid,...rt(t)});class Wi extends ot{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ie.array)return Oe(n,{code:fe.invalid_type,expected:Ie.array,received:n.parsedType}),Ze;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Oe(n,{code:o?fe.too_big:fe.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Oe(n,{code:fe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Oe(n,{code:fe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new To(n,o,n.path,a)))).then(o=>Nr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new To(n,o,n.path,a)));return Nr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Wi({...this._def,minLength:{value:e,message:Fe.toString(n)}})}max(e,n){return new Wi({...this._def,maxLength:{value:e,message:Fe.toString(n)}})}length(e,n){return new Wi({...this._def,exactLength:{value:e,message:Fe.toString(n)}})}nonempty(e){return this.min(1,e)}}Wi.create=(t,e)=>new Wi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ke.ZodArray,...rt(e)});function bd(t){if(t instanceof an){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ua.create(bd(r))}return new an({...t._def,shape:()=>e})}else return t instanceof Wi?new Wi({...t._def,type:bd(t.element)}):t instanceof ua?ua.create(bd(t.unwrap())):t instanceof Cu?Cu.create(bd(t.unwrap())):t instanceof No?No.create(t.items.map(e=>bd(e))):t}class an extends ot{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=St.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ie.object){const l=this._getOrReturnCtx(e);return Oe(l,{code:fe.invalid_type,expected:Ie.object,received:l.parsedType}),Ze}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof _a&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new To(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof _a){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Oe(s,{code:fe.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new To(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>Nr.mergeObjectSync(r,l)):Nr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Fe.errToObj,new an({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Fe.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new an({...this._def,unknownKeys:"strip"})}passthrough(){return new an({...this._def,unknownKeys:"passthrough"})}extend(e){return new an({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new an({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ke.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new an({...this._def,catchall:e})}pick(e){const n={};return St.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new an({...this._def,shape:()=>n})}omit(e){const n={};return St.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new an({...this._def,shape:()=>n})}deepPartial(){return bd(this)}partial(e){const n={};return St.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new an({...this._def,shape:()=>n})}required(e){const n={};return St.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ua;)i=i._def.innerType;n[r]=i}}),new an({...this._def,shape:()=>n})}keyof(){return FU(St.objectKeys(this.shape))}}an.create=(t,e)=>new an({shape:()=>t,unknownKeys:"strip",catchall:_a.create(),typeName:Ke.ZodObject,...rt(e)});an.strictCreate=(t,e)=>new an({shape:()=>t,unknownKeys:"strict",catchall:_a.create(),typeName:Ke.ZodObject,...rt(e)});an.lazycreate=(t,e)=>new an({shape:t,unknownKeys:"strip",catchall:_a.create(),typeName:Ke.ZodObject,...rt(e)});class Yg extends ot{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new zi(a.ctx.common.issues));return Oe(n,{code:fe.invalid_union,unionErrors:o}),Ze}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new zi(c));return Oe(n,{code:fe.invalid_union,unionErrors:a}),Ze}}get options(){return this._def.options}}Yg.create=(t,e)=>new Yg({options:t,typeName:Ke.ZodUnion,...rt(e)});const Bw=t=>t instanceof Zg?Bw(t.schema):t instanceof Vi?Bw(t.innerType()):t instanceof Xg?[t.value]:t instanceof tl?t.options:t instanceof em?Object.keys(t.enum):t instanceof tm?Bw(t._def.innerType):t instanceof Gg?[void 0]:t instanceof Kg?[null]:null;class mb extends ot{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ie.object)return Oe(n,{code:fe.invalid_type,expected:Ie.object,received:n.parsedType}),Ze;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Oe(n,{code:fe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ze)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Bw(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new mb({typeName:Ke.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...rt(r)})}}function cS(t,e){const n=oc(t),r=oc(e);if(t===e)return{valid:!0,data:t};if(n===Ie.object&&r===Ie.object){const s=St.objectKeys(e),i=St.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=cS(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Ie.array&&r===Ie.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=cS(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Ie.date&&r===Ie.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Qg extends ot{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(oS(i)||oS(o))return Ze;const a=cS(i.value,o.value);return a.valid?((aS(i)||aS(o))&&n.dirty(),{status:n.value,value:a.data}):(Oe(r,{code:fe.invalid_intersection_types}),Ze)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Qg.create=(t,e,n)=>new Qg({left:t,right:e,typeName:Ke.ZodIntersection,...rt(n)});class No extends ot{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ie.array)return Oe(r,{code:fe.invalid_type,expected:Ie.array,received:r.parsedType}),Ze;if(r.data.length<this._def.items.length)return Oe(r,{code:fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ze;!this._def.rest&&r.data.length>this._def.items.length&&(Oe(r,{code:fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new To(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Nr.mergeArray(n,o)):Nr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new No({...this._def,rest:e})}}No.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new No({items:t,typeName:Ke.ZodTuple,rest:null,...rt(e)})};class Jg extends ot{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ie.object)return Oe(r,{code:fe.invalid_type,expected:Ie.object,received:r.parsedType}),Ze;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new To(r,a,r.path,a)),value:o._parse(new To(r,r.data[a],r.path,a))});return r.common.async?Nr.mergeObjectAsync(n,s):Nr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ot?new Jg({keyType:e,valueType:n,typeName:Ke.ZodRecord,...rt(r)}):new Jg({keyType:Li.create(),valueType:e,typeName:Ke.ZodRecord,...rt(n)})}}class Q0 extends ot{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ie.map)return Oe(r,{code:fe.invalid_type,expected:Ie.map,received:r.parsedType}),Ze;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new To(r,a,r.path,[l,"key"])),value:i._parse(new To(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Ze;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Ze;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}Q0.create=(t,e,n)=>new Q0({valueType:e,keyType:t,typeName:Ke.ZodMap,...rt(n)});class Eu extends ot{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ie.set)return Oe(r,{code:fe.invalid_type,expected:Ie.set,received:r.parsedType}),Ze;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Oe(r,{code:fe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Oe(r,{code:fe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Ze;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new To(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Eu({...this._def,minSize:{value:e,message:Fe.toString(n)}})}max(e,n){return new Eu({...this._def,maxSize:{value:e,message:Fe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Eu.create=(t,e)=>new Eu({valueType:t,minSize:null,maxSize:null,typeName:Ke.ZodSet,...rt(e)});class Yd extends ot{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ie.function)return Oe(n,{code:fe.invalid_type,expected:Ie.function,received:n.parsedType}),Ze;function r(a,c){return V0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,H0(),qg].filter(l=>!!l),issueData:{code:fe.invalid_arguments,argumentsError:c}})}function s(a,c){return V0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,H0(),qg].filter(l=>!!l),issueData:{code:fe.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Th){const a=this;return Wr(async function(...c){const l=new zi([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Wr(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new zi([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new zi([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Yd({...this._def,args:No.create(e).rest(Zl.create())})}returns(e){return new Yd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Yd({args:e||No.create([]).rest(Zl.create()),returns:n||Zl.create(),typeName:Ke.ZodFunction,...rt(r)})}}class Zg extends ot{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Zg.create=(t,e)=>new Zg({getter:t,typeName:Ke.ZodLazy,...rt(e)});class Xg extends ot{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Oe(n,{received:n.data,code:fe.invalid_literal,expected:this._def.value}),Ze}return{status:"valid",value:e.data}}get value(){return this._def.value}}Xg.create=(t,e)=>new Xg({value:t,typeName:Ke.ZodLiteral,...rt(e)});function FU(t,e){return new tl({values:t,typeName:Ke.ZodEnum,...rt(e)})}class tl extends ot{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Oe(n,{expected:St.joinValues(r),received:n.parsedType,code:fe.invalid_type}),Ze}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Oe(n,{received:n.data,code:fe.invalid_enum_value,options:r}),Ze}return Wr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return tl.create(e)}exclude(e){return tl.create(this.options.filter(n=>!e.includes(n)))}}tl.create=FU;class em extends ot{_parse(e){const n=St.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ie.string&&r.parsedType!==Ie.number){const s=St.objectValues(n);return Oe(r,{expected:St.joinValues(s),received:r.parsedType,code:fe.invalid_type}),Ze}if(n.indexOf(e.data)===-1){const s=St.objectValues(n);return Oe(r,{received:r.data,code:fe.invalid_enum_value,options:s}),Ze}return Wr(e.data)}get enum(){return this._def.values}}em.create=(t,e)=>new em({values:t,typeName:Ke.ZodNativeEnum,...rt(e)});class Th extends ot{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ie.promise&&n.common.async===!1)return Oe(n,{code:fe.invalid_type,expected:Ie.promise,received:n.parsedType}),Ze;const r=n.parsedType===Ie.promise?n.data:Promise.resolve(n.data);return Wr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Th.create=(t,e)=>new Th({type:t,typeName:Ke.ZodPromise,...rt(e)});class Vi extends ot{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ke.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Oe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ze:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ze:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Hg(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Hg(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);St.assertNever(s)}}Vi.create=(t,e,n)=>new Vi({schema:t,typeName:Ke.ZodEffects,effect:e,...rt(n)});Vi.createWithPreprocess=(t,e,n)=>new Vi({schema:e,effect:{type:"preprocess",transform:t},typeName:Ke.ZodEffects,...rt(n)});class ua extends ot{_parse(e){return this._getType(e)===Ie.undefined?Wr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ua.create=(t,e)=>new ua({innerType:t,typeName:Ke.ZodOptional,...rt(e)});class Cu extends ot{_parse(e){return this._getType(e)===Ie.null?Wr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cu.create=(t,e)=>new Cu({innerType:t,typeName:Ke.ZodNullable,...rt(e)});class tm extends ot{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ie.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}tm.create=(t,e)=>new tm({innerType:t,typeName:Ke.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...rt(e)});class J0 extends ot{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return G0(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new zi(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new zi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}J0.create=(t,e)=>new J0({innerType:t,typeName:Ke.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...rt(e)});class Z0 extends ot{_parse(e){if(this._getType(e)!==Ie.nan){const r=this._getOrReturnCtx(e);return Oe(r,{code:fe.invalid_type,expected:Ie.nan,received:r.parsedType}),Ze}return{status:"valid",value:e.data}}}Z0.create=t=>new Z0({typeName:Ke.ZodNaN,...rt(t)});const d0e=Symbol("zod_brand");class zU extends ot{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Bm extends ot{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ze:i.status==="dirty"?(n.dirty(),BU(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ze:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Bm({in:e,out:n,typeName:Ke.ZodPipeline})}}class X0 extends ot{_parse(e){const n=this._def.innerType._parse(e);return Hg(n)&&(n.value=Object.freeze(n.value)),n}}X0.create=(t,e)=>new X0({innerType:t,typeName:Ke.ZodReadonly,...rt(e)});const WU=(t,e={},n)=>t?Ih.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Ih.create(),h0e={object:an.lazycreate};var Ke;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ke||(Ke={}));const f0e=(t,e={message:`Input not instance of ${t.name}`})=>WU(n=>n instanceof t,e),qU=Li.create,HU=Xc.create,p0e=Z0.create,g0e=el.create,VU=Vg.create,m0e=_u.create,y0e=K0.create,w0e=Gg.create,v0e=Kg.create,b0e=Ih.create,_0e=Zl.create,E0e=_a.create,C0e=Y0.create,x0e=Wi.create,S0e=an.create,A0e=an.strictCreate,I0e=Yg.create,T0e=mb.create,N0e=Qg.create,P0e=No.create,k0e=Jg.create,O0e=Q0.create,R0e=Eu.create,$0e=Yd.create,D0e=Zg.create,j0e=Xg.create,U0e=tl.create,L0e=em.create,M0e=Th.create,QO=Vi.create,B0e=ua.create,F0e=Cu.create,z0e=Vi.createWithPreprocess,W0e=Bm.create,q0e=()=>qU().optional(),H0e=()=>HU().optional(),V0e=()=>VU().optional(),G0e={string:t=>Li.create({...t,coerce:!0}),number:t=>Xc.create({...t,coerce:!0}),boolean:t=>Vg.create({...t,coerce:!0}),bigint:t=>el.create({...t,coerce:!0}),date:t=>_u.create({...t,coerce:!0})},K0e=Ze;var I=Object.freeze({__proto__:null,defaultErrorMap:qg,setErrorMap:Zwe,getErrorMap:H0,makeIssue:V0,EMPTY_PATH:Xwe,addIssueToContext:Oe,ParseStatus:Nr,INVALID:Ze,DIRTY:BU,OK:Wr,isAborted:oS,isDirty:aS,isValid:Hg,isAsync:G0,get util(){return St},get objectUtil(){return iS},ZodParsedType:Ie,getParsedType:oc,ZodType:ot,ZodString:Li,ZodNumber:Xc,ZodBigInt:el,ZodBoolean:Vg,ZodDate:_u,ZodSymbol:K0,ZodUndefined:Gg,ZodNull:Kg,ZodAny:Ih,ZodUnknown:Zl,ZodNever:_a,ZodVoid:Y0,ZodArray:Wi,ZodObject:an,ZodUnion:Yg,ZodDiscriminatedUnion:mb,ZodIntersection:Qg,ZodTuple:No,ZodRecord:Jg,ZodMap:Q0,ZodSet:Eu,ZodFunction:Yd,ZodLazy:Zg,ZodLiteral:Xg,ZodEnum:tl,ZodNativeEnum:em,ZodPromise:Th,ZodEffects:Vi,ZodTransformer:Vi,ZodOptional:ua,ZodNullable:Cu,ZodDefault:tm,ZodCatch:J0,ZodNaN:Z0,BRAND:d0e,ZodBranded:zU,ZodPipeline:Bm,ZodReadonly:X0,custom:WU,Schema:ot,ZodSchema:ot,late:h0e,get ZodFirstPartyTypeKind(){return Ke},coerce:G0e,any:b0e,array:x0e,bigint:g0e,boolean:VU,date:m0e,discriminatedUnion:T0e,effect:QO,enum:U0e,function:$0e,instanceof:f0e,intersection:N0e,lazy:D0e,literal:j0e,map:O0e,nan:p0e,nativeEnum:L0e,never:E0e,null:v0e,nullable:F0e,number:HU,object:S0e,oboolean:V0e,onumber:H0e,optional:B0e,ostring:q0e,pipeline:W0e,preprocess:z0e,promise:M0e,record:k0e,set:R0e,strictObject:A0e,string:qU,symbol:y0e,transformer:QO,tuple:P0e,undefined:w0e,union:I0e,unknown:_0e,void:C0e,NEVER:K0e,ZodIssueCode:fe,quotelessJson:Jwe,ZodError:zi});const hn=I.object({message:I.string()});function Ne(t){return I.literal(Re[t])}I.object({accessList:I.array(I.string()),blockHash:I.string().nullable(),blockNumber:I.string().nullable(),chainId:I.string().or(I.number()),from:I.string(),gas:I.string(),hash:I.string(),input:I.string().nullable(),maxFeePerGas:I.string(),maxPriorityFeePerGas:I.string(),nonce:I.string(),r:I.string(),s:I.string(),to:I.string(),transactionIndex:I.string().nullable(),type:I.string(),v:I.string(),value:I.string()});const Y0e=I.object({chainId:I.string().or(I.number())}),Q0e=I.object({email:I.string().email()}),J0e=I.object({otp:I.string()}),Z0e=I.object({uri:I.string(),preferredAccountType:I.optional(I.string()),chainId:I.optional(I.string().or(I.number()))}),X0e=I.object({chainId:I.optional(I.string().or(I.number())),preferredAccountType:I.optional(I.string()),socialUri:I.optional(I.string())}),eve=I.object({provider:I.enum(["google","github","apple","facebook","x","discord"])}),tve=I.object({email:I.string().email()}),nve=I.object({otp:I.string()}),rve=I.object({otp:I.string()}),sve=I.object({themeMode:I.optional(I.enum(["light","dark"])),themeVariables:I.optional(I.record(I.string(),I.string().or(I.number()))),w3mThemeVariables:I.optional(I.record(I.string(),I.string()))}),ive=I.object({metadata:I.object({name:I.string(),description:I.string(),url:I.string(),icons:I.array(I.string())}).optional(),sdkVersion:I.string().optional(),sdkType:I.string().optional(),projectId:I.string()}),ove=I.object({type:I.string()}),ave=I.object({action:I.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),cve=I.object({url:I.string()}),lve=I.object({userName:I.string()}),uve=I.object({email:I.string().optional().nullable(),address:I.string(),chainId:I.string().or(I.number()),accounts:I.array(I.object({address:I.string(),type:I.enum([Kn.ACCOUNT_TYPES.EOA,Kn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:I.string().optional().nullable(),preferredAccountType:I.optional(I.string())}),dve=I.object({action:I.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),hve=I.object({email:I.string().email().optional().nullable(),address:I.string(),chainId:I.string().or(I.number()),smartAccountDeployed:I.optional(I.boolean()),accounts:I.array(I.object({address:I.string(),type:I.enum([Kn.ACCOUNT_TYPES.EOA,Kn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:I.optional(I.string())}),fve=I.object({uri:I.string()}),pve=I.object({isConnected:I.boolean()}),gve=I.object({chainId:I.string().or(I.number())}),mve=I.object({chainId:I.string().or(I.number())}),yve=I.object({newEmail:I.string().email()}),wve=I.object({smartAccountEnabledNetworks:I.array(I.number())});I.object({address:I.string(),isDeployed:I.boolean()});const vve=I.object({version:I.string().optional()}),bve=I.object({type:I.string(),address:I.string()}),_ve=I.any(),Eve=I.object({method:I.literal("eth_accounts")}),Cve=I.object({method:I.literal("eth_blockNumber")}),xve=I.object({method:I.literal("eth_call"),params:I.array(I.any())}),Sve=I.object({method:I.literal("eth_chainId")}),Ave=I.object({method:I.literal("eth_estimateGas"),params:I.array(I.any())}),Ive=I.object({method:I.literal("eth_feeHistory"),params:I.array(I.any())}),Tve=I.object({method:I.literal("eth_gasPrice")}),Nve=I.object({method:I.literal("eth_getAccount"),params:I.array(I.any())}),Pve=I.object({method:I.literal("eth_getBalance"),params:I.array(I.any())}),kve=I.object({method:I.literal("eth_getBlockByHash"),params:I.array(I.any())}),Ove=I.object({method:I.literal("eth_getBlockByNumber"),params:I.array(I.any())}),Rve=I.object({method:I.literal("eth_getBlockReceipts"),params:I.array(I.any())}),$ve=I.object({method:I.literal("eth_getBlockTransactionCountByHash"),params:I.array(I.any())}),Dve=I.object({method:I.literal("eth_getBlockTransactionCountByNumber"),params:I.array(I.any())}),jve=I.object({method:I.literal("eth_getCode"),params:I.array(I.any())}),Uve=I.object({method:I.literal("eth_getFilterChanges"),params:I.array(I.any())}),Lve=I.object({method:I.literal("eth_getFilterLogs"),params:I.array(I.any())}),Mve=I.object({method:I.literal("eth_getLogs"),params:I.array(I.any())}),Bve=I.object({method:I.literal("eth_getProof"),params:I.array(I.any())}),Fve=I.object({method:I.literal("eth_getStorageAt"),params:I.array(I.any())}),zve=I.object({method:I.literal("eth_getTransactionByBlockHashAndIndex"),params:I.array(I.any())}),Wve=I.object({method:I.literal("eth_getTransactionByBlockNumberAndIndex"),params:I.array(I.any())}),qve=I.object({method:I.literal("eth_getTransactionByHash"),params:I.array(I.any())}),Hve=I.object({method:I.literal("eth_getTransactionCount"),params:I.array(I.any())}),Vve=I.object({method:I.literal("eth_getTransactionReceipt"),params:I.array(I.any())}),Gve=I.object({method:I.literal("eth_getUncleCountByBlockHash"),params:I.array(I.any())}),Kve=I.object({method:I.literal("eth_getUncleCountByBlockNumber"),params:I.array(I.any())}),Yve=I.object({method:I.literal("eth_maxPriorityFeePerGas")}),Qve=I.object({method:I.literal("eth_newBlockFilter")}),Jve=I.object({method:I.literal("eth_newFilter"),params:I.array(I.any())}),Zve=I.object({method:I.literal("eth_newPendingTransactionFilter")}),Xve=I.object({method:I.literal("eth_sendRawTransaction"),params:I.array(I.any())}),ebe=I.object({method:I.literal("eth_syncing"),params:I.array(I.any())}),tbe=I.object({method:I.literal("eth_uninstallFilter"),params:I.array(I.any())}),JO=I.object({method:I.literal("personal_sign"),params:I.array(I.any())}),nbe=I.object({method:I.literal("eth_signTypedData_v4"),params:I.array(I.any())}),rbe=I.object({method:I.literal("eth_sendTransaction"),params:I.array(I.any())}),sbe=I.object({method:I.literal("solana_signMessage"),params:I.object({message:I.string(),pubkey:I.string()})}),ibe=I.object({method:I.literal("solana_signTransaction"),params:I.object({transaction:I.string()})}),obe=I.object({method:I.literal("solana_signAllTransactions"),params:I.object({transactions:I.array(I.string())})}),abe=I.object({method:I.literal("solana_signAndSendTransaction"),params:I.object({transaction:I.string(),options:I.object({skipPreflight:I.boolean().optional(),preflightCommitment:I.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:I.number().optional(),minContextSlot:I.number().optional()}).optional()})}),cbe=I.object({method:I.literal("wallet_sendCalls"),params:I.array(I.object({chainId:I.string().or(I.number()).optional(),from:I.string().optional(),version:I.string().optional(),capabilities:I.any().optional(),calls:I.array(I.object({to:I.string().startsWith("0x"),data:I.string().startsWith("0x").optional(),value:I.string().optional()}))}))}),lbe=I.object({method:I.literal("wallet_getCallsStatus"),params:I.array(I.string())}),ube=I.object({method:I.literal("wallet_getCapabilities")}),dbe=I.object({method:I.literal("wallet_grantPermissions"),params:I.array(I.any())}),hbe=I.object({method:I.literal("wallet_revokePermissions"),params:I.any()}),fbe=I.object({method:I.literal("wallet_getAssets"),params:I.any()}),ZO=I.object({token:I.string()}),Pe=I.object({id:I.string().optional()}),Wf={appEvent:Pe.extend({type:Ne("APP_SWITCH_NETWORK"),payload:Y0e}).or(Pe.extend({type:Ne("APP_CONNECT_EMAIL"),payload:Q0e})).or(Pe.extend({type:Ne("APP_CONNECT_DEVICE")})).or(Pe.extend({type:Ne("APP_CONNECT_OTP"),payload:J0e})).or(Pe.extend({type:Ne("APP_CONNECT_SOCIAL"),payload:Z0e})).or(Pe.extend({type:Ne("APP_GET_FARCASTER_URI")})).or(Pe.extend({type:Ne("APP_CONNECT_FARCASTER")})).or(Pe.extend({type:Ne("APP_GET_USER"),payload:I.optional(X0e)})).or(Pe.extend({type:Ne("APP_GET_SOCIAL_REDIRECT_URI"),payload:eve})).or(Pe.extend({type:Ne("APP_SIGN_OUT")})).or(Pe.extend({type:Ne("APP_IS_CONNECTED"),payload:I.optional(ZO)})).or(Pe.extend({type:Ne("APP_GET_CHAIN_ID")})).or(Pe.extend({type:Ne("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Pe.extend({type:Ne("APP_INIT_SMART_ACCOUNT")})).or(Pe.extend({type:Ne("APP_SET_PREFERRED_ACCOUNT"),payload:ove})).or(Pe.extend({type:Ne("APP_RPC_REQUEST"),payload:JO.or(fbe).or(Eve).or(Cve).or(xve).or(Sve).or(Ave).or(Ive).or(Tve).or(Nve).or(Pve).or(kve).or(Ove).or(Rve).or($ve).or(Dve).or(jve).or(Uve).or(Lve).or(Mve).or(Bve).or(Fve).or(zve).or(Wve).or(qve).or(Hve).or(Vve).or(Gve).or(Kve).or(Yve).or(Qve).or(Jve).or(Zve).or(Xve).or(ebe).or(tbe).or(JO).or(nbe).or(rbe).or(sbe).or(ibe).or(obe).or(abe).or(lbe).or(cbe).or(ube).or(dbe).or(hbe)})).or(Pe.extend({type:Ne("APP_UPDATE_EMAIL"),payload:tve})).or(Pe.extend({type:Ne("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:nve})).or(Pe.extend({type:Ne("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:rve})).or(Pe.extend({type:Ne("APP_SYNC_THEME"),payload:sve})).or(Pe.extend({type:Ne("APP_SYNC_DAPP_DATA"),payload:ive})).or(Pe.extend({type:Ne("APP_RELOAD")})),frameEvent:Pe.extend({type:Ne("FRAME_SWITCH_NETWORK_ERROR"),payload:hn}).or(Pe.extend({type:Ne("FRAME_SWITCH_NETWORK_SUCCESS"),payload:mve})).or(Pe.extend({type:Ne("FRAME_CONNECT_EMAIL_SUCCESS"),payload:ave})).or(Pe.extend({type:Ne("FRAME_CONNECT_EMAIL_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:cve})).or(Pe.extend({type:Ne("FRAME_GET_FARCASTER_URI_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:lve})).or(Pe.extend({type:Ne("FRAME_CONNECT_FARCASTER_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_CONNECT_OTP_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_CONNECT_OTP_SUCCESS")})).or(Pe.extend({type:Ne("FRAME_CONNECT_DEVICE_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Pe.extend({type:Ne("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:uve})).or(Pe.extend({type:Ne("FRAME_CONNECT_SOCIAL_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_GET_USER_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_GET_USER_SUCCESS"),payload:hve})).or(Pe.extend({type:Ne("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:fve})).or(Pe.extend({type:Ne("FRAME_SIGN_OUT_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_SIGN_OUT_SUCCESS")})).or(Pe.extend({type:Ne("FRAME_IS_CONNECTED_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_IS_CONNECTED_SUCCESS"),payload:pve})).or(Pe.extend({type:Ne("FRAME_GET_CHAIN_ID_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_GET_CHAIN_ID_SUCCESS"),payload:gve})).or(Pe.extend({type:Ne("FRAME_RPC_REQUEST_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_RPC_REQUEST_SUCCESS"),payload:_ve})).or(Pe.extend({type:Ne("FRAME_SESSION_UPDATE"),payload:ZO})).or(Pe.extend({type:Ne("FRAME_UPDATE_EMAIL_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_UPDATE_EMAIL_SUCCESS"),payload:dve})).or(Pe.extend({type:Ne("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Pe.extend({type:Ne("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:yve})).or(Pe.extend({type:Ne("FRAME_SYNC_THEME_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_SYNC_THEME_SUCCESS")})).or(Pe.extend({type:Ne("FRAME_SYNC_DAPP_DATA_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Pe.extend({type:Ne("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:wve})).or(Pe.extend({type:Ne("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:bve})).or(Pe.extend({type:Ne("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_READY"),payload:vve})).or(Pe.extend({type:Ne("FRAME_RELOAD_ERROR"),payload:hn})).or(Pe.extend({type:Ne("FRAME_RELOAD_SUCCESS")}))};function K_(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class pbe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ee.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!K_(Re.FRAME_EVENT_KEY,l))return;const u=Wf.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}ks.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{ks.isClient&&window.addEventListener("message",({data:o})=>{if(!K_(Re.FRAME_EVENT_KEY,o))return;const a=Wf.frameEvent.parse(o);i(a)})},onAppEvent:i=>{ks.isClient&&window.addEventListener("message",({data:o})=>{if(!K_(Re.APP_EVENT_KEY,o))return;const a=Wf.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(ks.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Wf.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(ks.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Wf.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),ks.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${WX}?projectId=${e}&chainId=${r}&version=${HX}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class gbe{constructor(e){var i;const n=Wh({level:qX}),{logger:r,chunkLoggerController:s}=y2({opts:n});this.logger=Pr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class mbe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new gbe(e)),this.abortController=i,this.w3mFrame=new pbe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Re.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!rr.get(Re.EMAIL_LOGIN_USED_KEY)}getEmail(){return rr.get(Re.EMAIL)}getUsername(){return rr.get(Re.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Re.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{ks.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Re.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Re.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Re.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Re.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Re.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Re.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Re.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Re.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Re.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Re.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Re.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Re.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Re.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Re.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Re.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Re.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Re.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Re.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Re.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Re.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Kn.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Re.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Re.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Re.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Re.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Re.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Re.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Re.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Re.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Kn.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Re.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Re.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Kn.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Re.APP_SYNC_DAPP_DATA,Re.APP_SYNC_THEME,Re.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Re.APP_CONNECT_EMAIL,Re.APP_CONNECT_DEVICE,Re.APP_CONNECT_OTP,Re.APP_CONNECT_SOCIAL,Re.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,m;const u=Math.random().toString(36).substring(7);(m=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||m.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,E;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((E=w.payload)==null?void 0:E.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){rr.set(Re.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){rr.set(Re.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&rr.set(Re.EMAIL,e),rr.set(Re.EMAIL_LOGIN_USED_KEY,"true"),rr.delete(Re.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){rr.delete(Re.EMAIL_LOGIN_USED_KEY),rr.delete(Re.EMAIL),rr.delete(Re.LAST_USED_CHAIN_KEY),rr.delete(Re.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&rr.set(Re.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=rr.get(Re.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){rr.set(Re.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class Xl{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return Xl.instance||(Xl.instance=new mbe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),Xl.instance}}var XO={};const ybe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof XO<"u"?XO.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},lS={filterOutDuplicatesByRDNS(t){const e=ue.state.enableEIP6963?_e.state.connectors:[],n=ve.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&De.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=_e.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=ve.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=_e.state,{featuredWalletIds:n}=ue.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ue.state.features)==null?void 0:c.connectMethodsOrder),r=e||_e.state.connectors;if(n)return n;const{injected:s,announced:i}=Fw.getConnectorsByType(r,Me.state.recommended,Me.state.featured),o=s.filter(Fw.showConnector),a=i.filter(Fw.showConnector);return o.length||a.length?["wallet","email","social"]:ybe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Me.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Me.state.excludedWallets.some(r=>Wg.isLowerCaseMatch(r.name,t.name));return e||n}},Fw={getConnectorsByType(t,e,n){const{customWallets:r}=ue.state,s=ve.getRecentWallets(),i=lS.filterOutDuplicateWallets(e),o=lS.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Me.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Me.state.excludedWallets.some(i=>Wg.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!De.isMobile()||De.isMobile()&&!e&&!ke.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(R.state.chains.values()).some(n=>_e.getConnectorId(n.namespace)===ee.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ue.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=Fw.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ue.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),m=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!m.some(({type:v})=>v===y));return Array.from(new Set([...m,...w].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!De.isMobile())return{accounts:[],chainId:void 0};if(t.id===ee.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zw=globalThis,J2=zw.ShadowRoot&&(zw.ShadyCSS===void 0||zw.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Z2=Symbol(),eR=new WeakMap;let GU=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==Z2)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(J2&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=eR.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&eR.set(n,e))}return e}toString(){return this.cssText}};const Js=t=>new GU(typeof t=="string"?t:t+"",void 0,Z2),Qd=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new GU(n,t,Z2)},wbe=(t,e)=>{if(J2)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=zw.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},tR=J2?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Js(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:vbe,defineProperty:bbe,getOwnPropertyDescriptor:_be,getOwnPropertyNames:Ebe,getOwnPropertySymbols:Cbe,getPrototypeOf:xbe}=Object,zc=globalThis,nR=zc.trustedTypes,Sbe=nR?nR.emptyScript:"",Y_=zc.reactiveElementPolyfillSupport,$p=(t,e)=>t,uS={toAttribute(t,e){switch(e){case Boolean:t=t?Sbe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},KU=(t,e)=>!vbe(t,e),rR={attribute:!0,type:String,converter:uS,reflect:!1,useDefault:!1,hasChanged:KU};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),zc.litPropertyMetadata??(zc.litPropertyMetadata=new WeakMap);let _d=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=rR){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&bbe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=_be(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??rR}static _$Ei(){if(this.hasOwnProperty($p("elementProperties")))return;const e=xbe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty($p("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty($p("properties"))){const n=this.properties,r=[...Ebe(n),...Cbe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(tR(s))}else e!==void 0&&n.push(tR(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return wbe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:uS).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:uS;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??KU)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};_d.elementStyles=[],_d.shadowRootOptions={mode:"open"},_d[$p("elementProperties")]=new Map,_d[$p("finalized")]=new Map,Y_==null||Y_({ReactiveElement:_d}),(zc.reactiveElementVersions??(zc.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Dp=globalThis,ev=Dp.trustedTypes,sR=ev?ev.createPolicy("lit-html",{createHTML:t=>t}):void 0,YU="$lit$",ac=`lit$${Math.random().toFixed(9).slice(2)}$`,QU="?"+ac,Abe=`<${QU}>`,xu=document,nm=()=>xu.createComment(""),rm=t=>t===null||typeof t!="object"&&typeof t!="function",X2=Array.isArray,Ibe=t=>X2(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Q_=`[ 	
\f\r]`,qf=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,iR=/-->/g,oR=/>/g,ml=RegExp(`>|${Q_}(?:([^\\s"'>=/]+)(${Q_}*=${Q_}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),aR=/'/g,cR=/"/g,JU=/^(?:script|style|textarea|title)$/i,ZU=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),sSe=ZU(1),iSe=ZU(2),Nh=Symbol.for("lit-noChange"),Hn=Symbol.for("lit-nothing"),lR=new WeakMap,Ml=xu.createTreeWalker(xu,129);function XU(t,e){if(!X2(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return sR!==void 0?sR.createHTML(e):e}const Tbe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=qf;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===qf?u[1]==="!--"?o=iR:u[1]!==void 0?o=oR:u[2]!==void 0?(JU.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=ml):u[3]!==void 0&&(o=ml):o===ml?u[0]===">"?(o=s??qf,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?ml:u[3]==='"'?cR:aR):o===cR||o===aR?o=ml:o===iR||o===oR?o=qf:(o=ml,s=void 0);const f=o===ml&&t[a+1].startsWith("/>")?" ":"";i+=o===qf?c+Abe:d>=0?(r.push(l),c.slice(0,d)+YU+c.slice(d)+ac+f):c+ac+(d===-2?a:f)}return[XU(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class sm{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=Tbe(e,n);if(this.el=sm.createElement(l,r),Ml.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Ml.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(YU)){const h=u[o++],f=s.getAttribute(d).split(ac),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?Pbe:p[1]==="?"?kbe:p[1]==="@"?Obe:yb}),s.removeAttribute(d)}else d.startsWith(ac)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(JU.test(s.tagName)){const d=s.textContent.split(ac),h=d.length-1;if(h>0){s.textContent=ev?ev.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],nm()),Ml.nextNode(),c.push({type:2,index:++i});s.append(d[h],nm())}}}else if(s.nodeType===8)if(s.data===QU)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(ac,d+1))!==-1;)c.push({type:7,index:i}),d+=ac.length-1}i++}}static createElement(e,n){const r=xu.createElement("template");return r.innerHTML=e,r}}function Ph(t,e,n=t,r){var o,a;if(e===Nh)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=rm(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Ph(t,s._$AS(t,e.values),s,r)),e}class Nbe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??xu).importNode(n,!0);Ml.currentNode=s;let i=Ml.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Fm(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new Rbe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Ml.nextNode(),o++)}return Ml.currentNode=xu,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Fm{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Hn,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Ph(this,e,n),rm(e)?e===Hn||e==null||e===""?(this._$AH!==Hn&&this._$AR(),this._$AH=Hn):e!==this._$AH&&e!==Nh&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Ibe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Hn&&rm(this._$AH)?this._$AA.nextSibling.data=e:this.T(xu.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=sm.createElement(XU(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new Nbe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=lR.get(e.strings);return n===void 0&&lR.set(e.strings,n=new sm(e)),n}k(e){X2(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Fm(this.O(nm()),this.O(nm()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class yb{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Hn,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Hn}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Ph(this,e,n,0),o=!rm(e)||e!==this._$AH&&e!==Nh,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Ph(this,a[r+c],n,c),l===Nh&&(l=this._$AH[c]),o||(o=!rm(l)||l!==this._$AH[c]),l===Hn?e=Hn:e!==Hn&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Hn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Pbe extends yb{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Hn?void 0:e}}class kbe extends yb{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Hn)}}class Obe extends yb{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Ph(this,e,n,0)??Hn)===Nh)return;const r=this._$AH,s=e===Hn&&r!==Hn||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Hn&&(r===Hn||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class Rbe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Ph(this,e)}}const J_=Dp.litHtmlPolyfillSupport;J_==null||J_(sm,Fm),(Dp.litHtmlVersions??(Dp.litHtmlVersions=[])).push("3.3.0");const $be=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Fm(e.insertBefore(nm(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const eu=globalThis;let Ww=class extends _d{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=$be(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Nh}};var ZR;Ww._$litElement$=!0,Ww.finalized=!0,(ZR=eu.litElementHydrateSupport)==null||ZR.call(eu,{LitElement:Ww});const Z_=eu.litElementPolyfillSupport;Z_==null||Z_({LitElement:Ww});(eu.litElementVersions??(eu.litElementVersions=[])).push("4.2.0");let jp,Wc,qc;function aSe(t,e){jp=document.createElement("style"),Wc=document.createElement("style"),qc=document.createElement("style"),jp.textContent=Jd(t).core.cssText,Wc.textContent=Jd(t).dark.cssText,qc.textContent=Jd(t).light.cssText,document.head.appendChild(jp),document.head.appendChild(Wc),document.head.appendChild(qc),eL(e)}function eL(t){Wc&&qc&&(t==="light"?(Wc.removeAttribute("media"),qc.media="enabled"):(qc.removeAttribute("media"),Wc.media="enabled"))}function Dbe(t){jp&&Wc&&qc&&(jp.textContent=Jd(t).core.cssText,Wc.textContent=Jd(t).dark.cssText,qc.textContent=Jd(t).light.cssText)}function Jd(t){return{core:Qd`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Js(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Js((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Js((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Js((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Js((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Qd`
      :root {
        --w3m-color-mix: ${Js((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Js(ia(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Js(ia(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Qd`
      :root {
        --w3m-color-mix: ${Js((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Js(ia(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Js(ia(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const cSe=Qd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,lSe=Qd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,uSe=Qd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,cp={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},tL=kW({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function zm(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const uR=zm({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),dR=zm({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});zm({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});zm({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});zm({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const jbe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Up={getMethodsByChainNamespace(t){return jbe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case uR.caipNetworkId:u.chains.push(uR.deprecatedCaipNetworkId);break;case dR.caipNetworkId:u.chains.push(dR.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await Cp.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class eI{constructor({provider:e,namespace:n}){this.id=ee.CONNECTOR_ID.WALLET_CONNECT,this.name=Sc.ConnectorNamesMap[ee.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Sc.ConnectorImageIds[ee.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=R.getCaipNetworks.bind(R),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ue.state.universalProviderConfigOverride,s=Up.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Rp.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Ube})}}const Ube=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class nL{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>R.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ee.CONNECTOR_ID.AUTH,type:"AUTH",name:ee.CONNECTOR_NAMES.AUTH,provider:e,imageId:Sc.ConnectorImageIds[ee.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){ye.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=ye.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof eI);if(!e)throw new Error("WalletConnectConnector not found");return e}}class Lbe extends nL{setUniversalProvider(e){this.addConnector(new eI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>De.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&$t.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(ye.state.balanceLoading&&e.chainId===((c=R.state.activeCaipNetwork)==null?void 0:c.id))return{balance:ye.state.balance||"0.00",symbol:ye.state.balanceSymbol||""};const s=(await ye.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=R.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ee.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Kh.encode(new TextEncoder().encode(r)),pubkey:s}},(a=R.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=R.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ee.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:au(n.id)}]}))}catch(u){if(u.code===cp.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===cp.ERROR_INVALID_CHAIN_ID||u.code===cp.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===cp.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:au(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const Mbe=["email","socials","swaps","onramp","activity","reownBranding"],rw={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?$t.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?$t.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?$t.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?$t.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?$t.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?$t.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?$t.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?$t.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?$t.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},Bbe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=rw[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=rw[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return rw[t].processApi(e)},processFallbackFeature(t,e){return rw[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Me.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?$t.DEFAULT_REMOTE_FEATURES:$t.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of Mbe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),$t.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Sn.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class Fbe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=R.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=R.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=R.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return R.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>R.getCaipNetworks(n),this.getActiveChainNamespace=()=>R.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{R.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>R.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>R.state.activeChain===n||!n?R.state.activeCaipAddress:R.getAccountProp("caipAddress",n),this.setClientId=n=>{qe.setClientId(n)},this.getProvider=n=>Bt.getProvider(n),this.getProviderType=n=>Bt.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=ye.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{ye.setCaipAddress(n,r),n&&ue.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{ye.setBalance(n,r,s)},this.setProfileName=(n,r)=>{ye.setProfileName(n,r)},this.setProfileImage=(n,r)=>{ye.setProfileImage(n,r)},this.setUser=(n,r)=>{ye.setUser(n,r)},this.resetAccount=n=>{ye.resetAccount(n)},this.setCaipNetwork=n=>{R.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{R.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{ye.setAllAccounts(n,r),ue.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{ye.setStatus(n,r),_e.isConnected()?ve.setConnectionStatus("connected"):ve.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>R.getAccountProp("address",n),this.setConnectors=n=>{const r=[..._e.state.allConnectors,...n];_e.setConnectors(r)},this.setConnections=(n,r)=>{ke.setConnections(n,r)},this.fetchIdentity=n=>qe.fetchIdentity(n),this.getReownName=n=>Cp.getNamesForAddress(n),this.getConnectors=()=>_e.getConnectors(),this.getConnectorImage=n=>Tj.getConnectorImage(n),this.getConnections=n=>Rg.getConnectionsData(n).connections,this.getRecentConnections=n=>Rg.getConnectionsData(n).recentConnections,this.switchConnection=n=>ke.switchConnection(n),this.deleteConnection=n=>ve.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=Bt.getProviderId(r),i=n?{...n,type:s}:void 0;ye.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!R.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{ye.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{ye.removeAddressLabel(n,r)},this.getAddress=n=>R.state.activeChain===n||!n?ye.state.address:R.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>R.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{R.resetNetwork(n)},this.addConnector=n=>{_e.addConnector(n)},this.resetWcConnection=()=>{ke.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{ye.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{ye.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{R.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{ye.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ue.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await Bbe.fetchRemoteFeatures(e),ue.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&lx.setOnrampProviders(this.remoteFeatures.onramp),((n=ue.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ue.state.remoteFeatures)==null?void 0:r.socials)&&((s=ue.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Me.fetchAllowedOrigins();if(!e||!De.isClient()){Sn.open(on.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;Up.isOriginAllowed(n,e,cp.DEFAULT_ALLOWED_ANCESTORS)||Sn.open(on.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){Sn.open(on.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Sn.open(on.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;Sn.open({shortMessage:on.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:on.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:Sn.open(on.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Dt.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&as.setThemeMode(e.themeMode),e.themeVariables&&as.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");R.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&R.setActiveCaipNetwork(n)}initializeConnectionController(e){ke.initialize(e.adapters??[]),ke.setWcBasic(e.basic??!1)}initializeConnectorController(){_e.initialize(this.chainNamespaces)}initializeProjectSettings(e){ue.setProjectId(e.projectId),ue.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ue.setDebug(e.debug!==!1),ue.setEnableWalletConnect(e.enableWalletConnect!==!1),ue.setEnableWalletGuide(e.enableWalletGuide!==!1),ue.setEnableWallets(e.enableWallets!==!1),ue.setEIP6963Enabled(e.enableEIP6963!==!1),ue.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ue.setEnableAuthLogger(e.enableAuthLogger!==!1),ue.setCustomRpcUrls(e.customRpcUrls),ue.setEnableEmbedded(e.enableEmbedded),ue.setAllWallets(e.allWallets),ue.setIncludeWalletIds(e.includeWalletIds),ue.setExcludeWalletIds(e.excludeWalletIds),ue.setFeaturedWalletIds(e.featuredWalletIds),ue.setTokens(e.tokens),ue.setTermsConditionsUrl(e.termsConditionsUrl),ue.setPrivacyPolicyUrl(e.privacyPolicyUrl),ue.setCustomWallets(e.customWallets),ue.setFeatures(e.features),ue.setAllowUnsupportedChain(e.allowUnsupportedChain),ue.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ue.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ue.setDefaultAccountTypes(e.defaultAccountTypes);const n=ve.getPreferredAccountTypes()||{},r={...ue.state.defaultAccountTypes,...n};ye.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ue.setMetadata(e.metadata),ue.setDisableAppend(e.disableAppend),ue.setEnableEmbedded(e.enableEmbedded),ue.setSIWX(e.siwx),!e.projectId){Sn.open(on.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ee.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ue.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return De.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=wo.getUnsupportedNetwork(`${n}:${e}`);R.setActiveCaipNetwork(r)}}getDefaultNetwork(){return wo.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return wo.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return wo.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?wo.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Bt.getProvider(e),s=Bt.getProviderId(e),{caipAddress:i}=R.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),ve.removeConnectedNamespace(e),Bt.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),_e.removeConnectorId(e),R.resetAccount(e),R.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=R.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),ve.setConnectedNamespaces([...R.state.chains.keys()]),this.chainNamespaces.forEach(o=>{_e.setConnectorId(Xt.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var m,w,y,b,v,E;const c=R.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const _=this.getCaipNetworks().find(S=>S.chainNamespace===i);_&&this.setCaipNetwork(_)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(m=o==null?void 0:o.rpcUrls)==null?void 0:m.default)==null?void 0:w.http)==null?void 0:y[0])||((E=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:E[0])});if(!h)return;ve.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=ye.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=R.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),ve.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=QX(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));It.resetSend(),ke.resetWcConnection(),await Rp.clearSessions(),_e.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));ve.deleteConnectedSocialProvider(),Dt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(R.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:ye.state.address,provider:Bt.getProvider(R.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if($t.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(R.state.activeChain),s=Bt.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ee.CHAIN.EVM){const n=this.getAdapter(R.state.activeChain),r=Bt.getProvider(R.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:ye.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:R.state.activeChain}),ye.state.profileImage||!1},getEnsAddress:async e=>await Up.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(R.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Bt.getProvider(R.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(R.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(R.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(R.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(R.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(R.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(R.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!ye.state.address||this.updateNativeBalance(ye.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ke.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Bt.getProviderId(R.state.activeChain)===Xt.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Bt.getProvider(n),i=Bt.getProviderId(n);if(e.chainNamespace===R.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Xt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Ns.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new Lbe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=ve.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(ve.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=R.state.activeChain===e,c=R.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=ye.state.address,i=R.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=R.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=R.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=R.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ee.CHAIN.EVM&&De.isSafeApp()&&_e.setConnectorId(ee.CONNECTOR_ID.SAFE,e);const n=_e.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ee.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ee.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=_e.getConnectorId(e),s=this.getCaipNetwork(e),o=_e.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([De.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i),a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=R.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(m=>{const{chainId:w}=Ns.parseCaipAddress(m);return w===(c==null?void 0:c.toString())})||a[0];if(l){const m=Ns.validateCaipAddress(l),{chainId:w,address:y}=Ns.parseCaipAddress(m);if(Bt.setProviderId(i,Xt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&R.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==ee.CHAIN.EVM){const b=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:R.state.activeCaipNetwork});Bt.setProvider(i,b)}else Bt.setProvider(i,this.universalProvider);_e.setConnectorId(ee.CONNECTOR_ID.WALLET_CONNECT,i),ve.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:y,chainId:w,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await R.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Ns.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>De.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Bt.setProviderId(s,e),Bt.setProvider(s,n),_e.setConnectorId(r,s)}async syncAllAccounts(e){const n=_e.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===R.state.activeChain,r=R.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=ve.getActiveNetworkProps(),c=i||a,l=((d=R.state.activeCaipNetwork)==null?void 0:d.name)===ee.UNSUPPORTED_NETWORK_NAME,u=R.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(v=>{var E;return((E=Ns.parseCaipNetworkId(v))==null?void 0:E.chainId)===c.toString()}),b=w.find(v=>{var E;return((E=Ns.parseCaipNetworkId(v))==null?void 0:E.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===y),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const m=f||p;(m==null?void 0:m.chainNamespace)===R.state.activeChain?ue.state.enableNetworkSwitch&&!ue.state.allowUnsupportedChain&&((h=R.state.activeCaipNetwork)==null?void 0:h.name)===ee.UNSUPPORTED_NETWORK_NAME?R.showUnsupportedChainUI():this.setCaipNetwork(m):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Wg.isLowerCaseMatch(s,ye.state.address)||this.syncAccountInfo(s,m==null?void 0:m.id,o),n?await this.syncBalance({address:s,chainId:m==null?void 0:m.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=_e.getConnectorId(e),r=Bt.getProviderId(e);if(r===Xt.CONNECTOR_TYPE_ANNOUNCED||r===Xt.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Xt.CONNECTOR_TYPE_WALLET_CONNECT){const i=Bt.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ee.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ee.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!Og.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=R.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=Ywe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ue.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await Vwe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{ke.setUri(e)}),this.universalProvider.on("connect",ke.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),ke.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(Up.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&De.isCaipAddress(r[0])&&this.syncAccount(Ns.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&De.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Dt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(on.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=on.ALERT_ERRORS[o];a&&(Sn.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&ke.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Pt.open({...e,data:{swap:e.arguments}})}return Pt.open(e)}async close(){await this.injectModalUi(),Pt.close()}setLoading(e,n){Pt.setLoading(e,n)}async disconnect(e){await ke.disconnect({namespace:e})}getSIWX(){return ue.state.siwx}getError(){return""}getChainId(){var e;return(e=R.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Sn.open(on.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await R.switchActiveNetwork(n)}getWalletProvider(){return R.state.activeChain?Bt.state.providers[R.state.activeChain]:null}getWalletProviderType(){return Bt.getProviderId(R.state.activeChain)}subscribeProviders(e){return Bt.subscribeProviders(e)}getThemeMode(){return as.state.themeMode}getThemeVariables(){return as.state.themeVariables}setThemeMode(e){as.setThemeMode(e),eL(as.state.themeMode)}setTermsConditionsUrl(e){ue.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ue.setPrivacyPolicyUrl(e)}setThemeVariables(e){as.setThemeVariables(e),Dbe(as.state.themeVariables)}subscribeTheme(e){return as.subscribe(e)}subscribeConnections(e){return ke.subscribe(e)}getWalletInfo(e){return e?R.getAccountProp("connectedWalletInfo",e):ye.state.connectedWalletInfo}getAccount(e){var o;const n=_e.getAuthConnector(e),r=R.getAccountData(e),s=R.state.activeChain,i=ve.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:De.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ee.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:ve.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?R.subscribeChainProp("accountState",r,n):R.subscribe(r),_e.subscribe(r)}subscribeNetwork(e){return R.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?ye.subscribeKey("connectedWalletInfo",e,n):ye.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){ye.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){R.subscribeKey("activeCaipNetwork",e)}getState(){return Eo.state}subscribeState(e){return Eo.subscribe(e)}showErrorMessage(e){ji.showError(e)}showSuccessMessage(e){ji.showSuccess(e)}getEvent(){return{...Dt.state}}subscribeEvents(e){return Dt.subscribe(e)}replace(e){Ve.replace(e)}redirect(e){Ve.push(e)}popTransactionStack(e){Ve.popTransactionStack(e)}isOpen(){return Pt.state.open}isTransactionStackEmpty(){return Ve.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ue.setFeatures(e)}updateRemoteFeatures(e){ue.setRemoteFeatures(e)}updateOptions(e){const r={...ue.state||{},...e};ue.setOptions(r)}setConnectMethodsOrder(e){ue.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ue.setWalletFeaturesOrder(e)}setCollapseWallets(e){ue.setCollapseWallets(e)}setSocialsOrder(e){ue.setSocialsOrder(e)}getConnectMethodsOrder(){return lS.getConnectOrderMethod(ue.state.features,_e.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||R.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&R.removeNetwork(e,n)}}let hR=!1;class zbe extends Fbe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{ks.checkIfRequestExists(n)?ks.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Kn.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Kn.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=ks.checkIfRequestIsSafe(r),i=ye.state.address,o=R.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=R.state.activeChain;_e.getConnectorId(n)===ee.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=R.state.activeChain,s=r===ee.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ue.state.defaultAccountTypes[r],o=(l=ye.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;Wg.isLowerCaseMatch(n.address,ye.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...ye.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>De.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[De.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...ye.state.user||{},username:n},R.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,R.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,R.state.activeChain)})}async syncAuthConnector(e,n){var d,h,f,p;const r=ee.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===R.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=ye.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=as.getSnapshot(),u=ue.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:ia(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:ee.CONNECTOR_ID.AUTH,info:{name:ee.CONNECTOR_ID.AUTH},type:Xt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=R.state.activeCaipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n)):_e.getConnectorId(n)===ee.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),ve.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!De.isTelegram())return;const r=ve.getTelegramSocialProvider();if(!r||!De.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;ye.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=_e.getAuthConnector();r&&o&&(this.setLoading(!0,e),await ke.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),ve.setConnectedSocialProvider(r),ve.removeTelegramSocialProvider(),Dt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!ee.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Wg.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=Xl.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:on.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?Sn.open(on.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?Sn.open(on.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&Sn.open(on.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Eo.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===R.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Me.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=R.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Bt.getProvider(r),u=Bt.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Bt.getProviderId(n)===Xt.CONNECTOR_TYPE_AUTH,u=Bt.getProviderId(r),d=u===Xt.CONNECTOR_TYPE_AUTH,h=ee.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(R.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ee.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Xt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Xt.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Eo.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ee.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Bt.getProviderId(e);if(n===Xt.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=ve.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(De.isClient()&&!hR)try{const e={...$t.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),De.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ue.state.disableAppend&&!ue.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}hR=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!De.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(wn(()=>import("./embedded-wallet-Dnuh5cDw.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14]))),n.email&&r.push(wn(()=>import("./email-GLz6IISo.js"),__vite__mapDeps([15,4,14,8,13,7,12,16,9]))),n.socials&&r.push(wn(()=>import("./socials-q0-nBcsT.js"),__vite__mapDeps([17,4,18,7,19,20,13,21,12,8,14,22,6,23]))),n.swaps&&n.swaps.length>0&&r.push(wn(()=>import("./swaps-DAsJ_YcH.js"),__vite__mapDeps([24,4,12,8,25,26,27,6,13,23,9,7]))),e.send&&r.push(wn(()=>import("./send-D_gvK26P.js"),__vite__mapDeps([28,4,12,8,13,7,19,14,27,6,9,29,30]))),e.receive&&r.push(wn(()=>import("./receive-DPN7rvsN.js"),__vite__mapDeps([31,4,32,6,22]))),n.onramp&&n.onramp.length>0&&r.push(wn(()=>import("./onramp-raK3wOP0.js"),__vite__mapDeps([33,4,34,23,13,6,8,35,18,7,19,36,14,12,21,9]))),n.activity&&r.push(wn(()=>import("./transactions-BhWkdO_S.js"),__vite__mapDeps([37,4,38,34,23,13,14,6]))),e.pay&&r.push(wn(()=>import("./index-CBcjtt5d.js"),__vite__mapDeps([39,4,12,8,40,6,13,10,35,30,21]))),await Promise.all([...r,wn(()=>import("./index-CLS79m8e.js"),__vite__mapDeps([41,4,6,8,29,13,42,26,10,35,12,11,40,38,34,23,14,25,30,7,9,16,18,19,20,5,21,32,22,36])),wn(()=>import("./w3m-modal-BpqXXi0h.js"),__vite__mapDeps([43,4,10,6,13,11,8,26,42]))])}}let Va;function Wbe(t){t&&(Va=t)}function wb(){if(!Va)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Va==null?void 0:Va.open(n))}async function e(){await(Va==null?void 0:Va.close())}return{open:t,close:e}}const qbe="1.7.10";let sw;function Hbe(t){return sw||(sw=new zbe({...t,sdkVersion:De.generateSdkVersion(t.adapters??[],"react",qbe)}),Wbe(sw)),sw}const Vbe=Ki({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),fR=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Gbe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Vbe({isOpen:t}),{open:i}=wb(),o=P.useRef(null),[a,c]=P.useState([]),[l,u]=P.useState(!0),[d,h]=P.useState(null),[f,p]=P.useState("all"),[m,w]=P.useState(1),[y,b]=P.useState(1),[v,E]=P.useState(0),[_,S]=P.useState(null),[x,A]=P.useState(fR[0]),[C,k]=P.useState(!1),[O,M]=P.useState(null),F=P.useCallback(async()=>{var $,U;try{if(($=window.solana)!=null&&$.isPhantom){const W=await window.solana.connect();M(W.publicKey.toString());return}if((U=window.solflare)!=null&&U.isSolflare){const W=await window.solflare.connect();M(W.publicKey.toString());return}i()}catch(W){console.error("Failed to connect Solana wallet:",W),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}k(!1)},[i]);P.useEffect(()=>{var $,U;($=window.solana)!=null&&$.publicKey?M(window.solana.publicKey.toString()):(U=window.solflare)!=null&&U.publicKey&&M(window.solflare.publicKey.toString())},[]),P.useEffect(()=>{t&&(async()=>{var U;u(!0),h(null);try{let W,J=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!O){k(!0),u(!1);return}J=O||void 0,W=await xj(x.slug,50),console.log("Fetched Solana NFTs from collection:",W.data.length),f==="owned"&&O&&(console.log("Filtering for owner:",O),console.log("Sample NFT owner data:",(U=W.data[0])==null?void 0:U.owners),console.log("All NFTs owner data:",W.data.map(ne=>({name:ne.name,owners:ne.owners,owner_of:ne.owner_of}))),W.data.some(ne=>ne.owners&&ne.owners.length>0)?(W.data=W.data.filter(ne=>{const se=ne.owners.some(we=>we.owner_of&&we.owner_of.toLowerCase()===O.toLowerCase());return se&&console.log("Found owned NFT:",ne.name),se}),console.log("NFTs after filtering:",W.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?W=await h2(x.slug,50,J):W=await d2(x.slug,m,50,J);c(W.data),b(W.totalPages),E(W.totalCount)}catch(W){W instanceof Error?h(W.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,m,f,r,x,O]),P.useEffect(()=>{C&&F()},[C,F]);const V=$=>new Date($).toLocaleDateString(),N=$=>x.api==="opensea-solana"&&(!$.owners||$.owners.length===0)?"Owner data unavailable":$.owners.length>0?`${$.owners[0].owner_of.substring(0,6)}...`:"N/A",T=()=>{n&&n()},L=async $=>{if(x.api==="opensea"&&x.chain)try{const U=await Cj(x.chain,$.address,$.token_id.toString()),W={...$,attributes:JSON.stringify(U.traits||[])};S(W)}catch(U){console.error("Failed to fetch full NFT details",U),S($)}else S($)},D=$=>{A($),w(1)};return t?g.jsxs(g.Fragment,{children:[g.jsx(Im,{nodeRef:o,handle:`.${s.header}`,children:g.jsxs("div",{ref:o,className:s.popup,children:[g.jsxs("div",{className:s.header,children:[g.jsx("span",{children:"LAWB NFT GALLERY"}),g.jsxs("div",{className:s.titleBarButtons,children:[g.jsx("button",{className:s.titleBarButton,onClick:T,title:"Minimize",children:"_"}),g.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),g.jsx("div",{className:s.collectionSelector,children:fR.map($=>g.jsx("button",{className:`${s.collectionButton} ${x.slug===$.slug?"active":""}`,onClick:()=>D($),children:$.name},$.slug))}),g.jsxs("div",{className:s.content,children:[g.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[g.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),g.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),g.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!O,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||O?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||O?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&g.jsx("button",{onClick:()=>{F()},style:{background:O?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:O?"white":"black",marginLeft:"auto"},children:O?`Solana: ${O.slice(0,4)}...${O.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!O&&g.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&g.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?g.jsx("div",{children:"Loading NFTs..."}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?g.jsx("div",{children:"No NFTs found."}):g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map($=>g.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{L($)},children:[g.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${$.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),g.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:g.jsxs("strong",{children:["#",$.token_id]})}),g.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",N($)]}),g.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",V($.created_at)]})]},$.id))}),f!=="recent"&&y>1&&g.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[g.jsx("button",{onClick:()=>w($=>Math.max(1,$-1)),disabled:m===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:m===1?"not-allowed":"pointer"},children:"Previous"}),g.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",m," of ",y]}),g.jsx("button",{onClick:()=>w($=>Math.min(y,$+1)),disabled:m===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:m===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),_&&g.jsx(rX,{nft:_,onClose:()=>S(null)})]}):null};var iw,Kbe=new Uint8Array(16);function Ybe(){if(!iw&&(iw=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!iw))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return iw(Kbe)}const Qbe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Jbe(t){return typeof t=="string"&&Qbe.test(t)}var nr=[];for(var X_=0;X_<256;++X_)nr.push((X_+256).toString(16).substr(1));function Zbe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(nr[t[e+0]]+nr[t[e+1]]+nr[t[e+2]]+nr[t[e+3]]+"-"+nr[t[e+4]]+nr[t[e+5]]+"-"+nr[t[e+6]]+nr[t[e+7]]+"-"+nr[t[e+8]]+nr[t[e+9]]+"-"+nr[t[e+10]]+nr[t[e+11]]+nr[t[e+12]]+nr[t[e+13]]+nr[t[e+14]]+nr[t[e+15]]).toLowerCase();if(!Jbe(n))throw TypeError("Stringified UUID is invalid");return n}function Xbe(t,e,n){t=t||{};var r=t.random||(t.rng||Ybe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Zbe(r)}const e1e=Ki({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),t1e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],n1e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],xs=500;function rL(){const t=e1e(),e=P.useRef(null),[n,r]=P.useState(null),[s,i]=P.useState(""),[o,a]=P.useState(""),[c,l]=P.useState(36),[u,d]=P.useState(36),[h,f]=P.useState(!1),[p,m]=P.useState(!1),[w,y]=P.useState(!1),[b,v]=P.useState(!1),[E,_]=P.useState(!1),[S,x]=P.useState([]),[A,C]=P.useState(null),k=P.useRef(null),[O,M]=P.useState(null),F=async Y=>{const X=Y.getContext("2d");if(!X)return;X.clearRect(0,0,Y.width,Y.height),n?await new Promise(te=>{const he=new window.Image;he.crossOrigin="anonymous",he.onload=()=>{const ze=Math.min(Y.width/he.width,Y.height/he.height),Te=(Y.width-he.width*ze)/2,Ce=(Y.height-he.height*ze)/2;X.drawImage(he,Te,Ce,he.width*ze,he.height*ze),te()},he.onerror=()=>te(),he.src=n}):(X.fillStyle="#333",X.fillRect(0,0,Y.width,Y.height)),(te=>{te.textAlign="center",te.strokeStyle="black",te.lineWidth=3,te.fillStyle="white";const he=(ze,Te)=>{const Ce=ze.toUpperCase().split(" "),Ue=[];let Je=Ce[0];for(let ft=1;ft<Ce.length;ft++){const yn=Ce[ft];te.measureText(Je+" "+yn).width<Te?Je+=" "+yn:(Ue.push(Je),Je=yn)}return Ue.push(Je),Ue};s&&(te.font=`${c}px Impact`,he(s,xs-20).forEach((Te,Ce)=>{const Ue=c+Ce*c*1.2;te.strokeText(Te,xs/2,Ue),te.fillText(Te,xs/2,Ue)})),o&&(te.font=`${u}px Impact`,he(o,xs-20).reverse().forEach((Te,Ce)=>{const Ue=xs-u*1.2*(Ce+1);te.strokeText(Te,xs/2,Ue),te.fillText(Te,xs/2,Ue)}))})(X),await Promise.all(S.map(te=>new Promise(he=>{const ze=new window.Image;ze.src=te.src,ze.onload=()=>{X.save(),X.translate(te.x,te.y),X.rotate(te.rotation*Math.PI/180),X.scale(te.scale,te.scale),X.drawImage(ze,-40,-40,80,80),X.restore(),he()},ze.onerror=()=>he()})));try{h&&V(Y),p&&N(Y),w&&T(Y)}catch(te){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",te),f(!1),m(!1),y(!1)}},V=Y=>{const X=Y.getContext("2d");if(!X)return;const oe=X.getImageData(0,0,Y.width,Y.height),te=oe.data;for(let he=0;he<te.length;he+=4){const ze=te[he],Te=te[he+1],Ce=te[he+2],Ue=(ze+Te+Ce)/3,Je=1.8;te[he]=Math.min(255,Ue+(ze-Ue)*Je),te[he+1]=Math.min(255,Ue+(Te-Ue)*Je*.7),te[he+2]=Math.min(255,Ue+(Ce-Ue)*Je*.4);const ft=1.3;te[he]=Math.min(255,Math.max(0,te[he]*ft)),te[he+1]=Math.min(255,Math.max(0,te[he+1]*ft)),te[he+2]=Math.min(255,Math.max(0,te[he+2]*ft))}X.putImageData(oe,0,0)},N=Y=>{const X=Y.getContext("2d");if(!X)return;const oe=4,he=X.getImageData(0,0,Y.width,Y.height).data,ze=new Uint8ClampedArray(he);for(let Te=0;Te<Y.height;Te+=oe)for(let Ce=0;Ce<Y.width;Ce+=oe){const Ue=(Te*Y.width+Ce)*4,Je=he[Ue],ft=he[Ue+1],yn=he[Ue+2],bt=he[Ue+3];for(let lt=0;lt<oe&&Te+lt<Y.height;lt++)for(let sn=0;sn<oe&&Ce+sn<Y.width;sn++){const Qn=((Te+lt)*Y.width+(Ce+sn))*4;ze[Qn]=Je,ze[Qn+1]=ft,ze[Qn+2]=yn,ze[Qn+3]=bt}}X.putImageData(new ImageData(ze,Y.width,Y.height),0,0)},T=Y=>{const X=Y.getContext("2d");if(!X)return;const oe=X.getImageData(0,0,Y.width,Y.height),te=oe.data;for(let he=0;he<te.length;he+=4){const ze=(Math.random()-.5)*50;te[he]=Math.max(0,Math.min(255,te[he]+ze)),te[he+1]=Math.max(0,Math.min(255,te[he+1]+ze)),te[he+2]=Math.max(0,Math.min(255,te[he+2]+ze))}X.putImageData(oe,0,0)};P.useEffect(()=>{e.current&&F(e.current)},[F]);const L=Y=>{var oe;const X=(oe=Y.target.files)==null?void 0:oe[0];X&&r(URL.createObjectURL(X))},D=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),m(!1),y(!1)},$=async()=>{const Y=e.current;if(!Y)return;await F(Y);const X=document.createElement("a");X.download="meme.png",X.href=Y.toDataURL("image/png"),document.body.appendChild(X),X.click(),document.body.removeChild(X)},U=async Y=>{_(!0),v(!1);try{console.log("Fetching NFTs for collection:",Y);let X;if(Y.api==="opensea"){console.log("Using OpenSea API for:",Y.slug);const oe=await h2(Y.slug,50);X=oe.data,console.log("OpenSea response:",oe)}else if(Y.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",Y.slug);const oe=await xj(Y.slug,50);X=oe.data,console.log("OpenSea Solana response:",oe)}else{console.log("Using Scatter API for:",Y.slug);const oe=await d2(Y.slug,1,50);X=oe.data,console.log("Scatter response:",oe)}if(X&&X.length>0){const oe=X[Math.floor(Math.random()*X.length)],te=oe.image||oe.image_url||oe.image_url_shrunk;console.log("Selected NFT:",oe),console.log("Image URL:",te),r(te)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(X){console.error("Error fetching NFTs:",X),alert("Failed to fetch NFT images. Check console for details.")}finally{_(!1)}},W=Y=>{const X={id:Xbe(),src:Y,x:80,y:80,scale:1,rotation:0};x(oe=>oe.length>=2||oe.some(te=>te.src===Y&&!te.id.startsWith("upload-"))?oe:[...oe,X]),M(X.id)},J=Y=>{var oe;const X=(oe=Y.target.files)==null?void 0:oe[0];if(X){const te=URL.createObjectURL(X);W(te)}},ie=(Y,X,oe)=>{x(te=>te.map(he=>{if(he.id!==Y)return he;let ze=he.x+X/1.2,Te=he.y+oe/1.2;const Ce=40*he.scale,Ue=40*he.scale;return ze=Math.max(Ce,Math.min(xs-Ce,ze)),Te=Math.max(Ue,Math.min(xs-Ue,Te)),{...he,x:ze,y:Te}}))},ne=(Y,X,oe,te,he)=>{x(ze=>ze.map(Te=>{if(Te.id!==Y)return Te;const Ce=Te.x,Ue=Te.y,Je=Math.atan2(he-Ue,te-Ce)*180/Math.PI;return{...Te,rotation:oe+(Je-X)*.5}}))},se=Y=>{x(X=>X.filter(oe=>oe.id!==Y))},we=(Y,X)=>{x(oe=>oe.map(te=>te.id===Y?{...te,scale:Math.max(.2,te.scale*(1+(X-1)*.2))}:te))};return g.jsxs("div",{className:t.container,children:[g.jsxs("div",{className:t.header,children:[g.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),g.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",g.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),g.jsxs("div",{className:t.content,children:[g.jsxs("div",{className:t.section,children:[g.jsx("div",{className:t.sectionTitle,children:"Collections"}),g.jsxs("div",{className:t.row,children:[g.jsxs("div",{className:t.dropdown,children:[g.jsx("button",{className:t.button,onClick:()=>v(Y=>!Y),children:"Collections"}),b&&g.jsx("div",{className:t.dropdownContent,children:t1e.map(Y=>g.jsx("div",{className:t.dropdownItem,onClick:()=>{U(Y)},children:Y.name},Y.id))})]}),g.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",g.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:L})]}),E&&g.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),g.jsxs("div",{className:t.section,children:[g.jsx("div",{className:t.sectionTitle,children:"Text"}),g.jsxs("div",{className:t.row,children:[g.jsx("span",{className:t.label,children:"Top Text:"}),g.jsx("input",{className:t.input,type:"text",value:s,onChange:Y=>i(Y.target.value),placeholder:"Enter top text..."}),g.jsx("span",{className:t.label,children:"Size:"}),g.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:Y=>l(Number(Y.target.value)),style:{width:60,textAlign:"center"}})]}),g.jsxs("div",{className:t.row,children:[g.jsx("span",{className:t.label,children:"Bottom Text:"}),g.jsx("input",{className:t.input,type:"text",value:o,onChange:Y=>a(Y.target.value),placeholder:"Enter bottom text..."}),g.jsx("span",{className:t.label,children:"Size:"}),g.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:Y=>d(Number(Y.target.value)),style:{width:60,textAlign:"center"}})]})]}),g.jsxs("div",{className:t.section,children:[g.jsx("div",{className:t.sectionTitle,children:"Effects"}),g.jsxs("div",{className:t.row,children:[g.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(Y=>!Y),children:"Deep Fry"}),g.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>m(Y=>!Y),children:"Pixelate"}),g.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(Y=>!Y),children:"Grain"})]})]}),g.jsxs("div",{className:t.section,children:[g.jsx("div",{className:t.sectionTitle,children:"Stickers"}),g.jsxs("div",{className:t.row,children:[n1e.map((Y,X)=>g.jsx("img",{src:Y,alt:`sticker${X+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>W(Y)},Y)),g.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",g.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:k,onChange:J})]})]})]}),g.jsxs("div",{className:t.actions,children:[g.jsx("button",{className:t.button,onClick:$,children:"Save Image"}),g.jsx("button",{className:t.button,onClick:D,children:"Restart"})]})]}),g.jsx("div",{className:t.memeArea,children:g.jsx("canvas",{ref:e,width:xs,height:xs,className:t.canvas})}),g.jsx("div",{style:{position:"absolute",left:0,top:0,width:xs,height:xs,pointerEvents:"none"},children:S.map(Y=>O===Y.id?g.jsxs("div",{style:{position:"absolute",left:Y.x,top:Y.y,width:80*Y.scale,height:80*Y.scale,transform:`rotate(${Y.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:X=>{C(Y.id),X.stopPropagation()},onMouseUp:()=>C(null),onMouseMove:X=>{A===Y.id&&X.buttons===1&&ie(Y.id,X.movementX,X.movementY)},children:[g.jsx("img",{src:Y.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),g.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:X=>{var Je;X.stopPropagation();const oe=(Je=X.currentTarget.parentElement)==null?void 0:Je.getBoundingClientRect(),te=oe?oe.left+oe.width/2:0,he=oe?oe.top+oe.height/2:0,ze=Math.atan2(X.clientY-he,X.clientX-te)*180/Math.PI,Te=Y.rotation,Ce=ft=>{ne(Y.id,ze,Te,ft.clientX,ft.clientY)},Ue=()=>{window.removeEventListener("mousemove",Ce),window.removeEventListener("mouseup",Ue)};window.addEventListener("mousemove",Ce),window.addEventListener("mouseup",Ue)}}),g.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:X=>{X.stopPropagation();const oe=X.clientX,te=ze=>{const Te=(ze.clientX-oe)/80;we(Y.id,1+Te)},he=()=>{window.removeEventListener("mousemove",te),window.removeEventListener("mouseup",he)};window.addEventListener("mousemove",te),window.addEventListener("mouseup",he)}}),g.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>se(Y.id),children:"×"}),g.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>M(null),children:"Place"})]},Y.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function im(){return im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},im.apply(this,arguments)}var Ac;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ac||(Ac={}));const pR="popstate";function r1e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return dS("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:iL(s)}return i1e(e,n,null,t)}function Ln(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sL(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s1e(){return Math.random().toString(36).substr(2,8)}function gR(t,e){return{usr:t.state,key:t.key,idx:e}}function dS(t,e,n,r){return n===void 0&&(n=null),im({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xh(e):e,{state:n,key:e&&e.key||r||s1e()})}function iL(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function i1e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ac.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(im({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Ac.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:m.location,delta:y})}function h(w,y){a=Ac.Push;let b=dS(m.location,w,y);l=u()+1;let v=gR(b,l),E=m.createHref(b);try{o.pushState(v,"",E)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(E)}i&&c&&c({action:a,location:m.location,delta:1})}function f(w,y){a=Ac.Replace;let b=dS(m.location,w,y);l=u();let v=gR(b,l),E=m.createHref(b);o.replaceState(v,"",E),i&&c&&c({action:a,location:m.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:iL(w);return b=b.replace(/ $/,"%20"),Ln(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let m={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(pR,d),c=w,()=>{s.removeEventListener(pR,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return m}var mR;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mR||(mR={}));function o1e(t,e,n){return n===void 0&&(n="/"),a1e(t,e,n)}function a1e(t,e,n,r){let s=typeof e=="string"?Xh(e):e,i=cL(s.pathname||"/",n);if(i==null)return null;let o=oL(t);c1e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=b1e(i);a=y1e(o[c],l)}return a}function oL(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ln(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=tu([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Ln(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),oL(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:g1e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of aL(i.path))s(i,o,c)}),e}function aL(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=aL(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function c1e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:m1e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const l1e=/^:[\w-]+$/,u1e=3,d1e=2,h1e=1,f1e=10,p1e=-2,yR=t=>t==="*";function g1e(t,e){let n=t.split("/"),r=n.length;return n.some(yR)&&(r+=p1e),e&&(r+=d1e),n.filter(s=>!yR(s)).reduce((s,i)=>s+(l1e.test(i)?u1e:i===""?h1e:f1e),r)}function m1e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function y1e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=w1e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:tu([i,d.pathname]),pathnameBase:A1e(tu([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=tu([i,d.pathnameBase]))}return o}function w1e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=v1e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let m=a[d]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function v1e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),sL(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function b1e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sL(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function cL(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function _1e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Xh(t):t;return{pathname:n?n.startsWith("/")?n:E1e(n,e):e,search:I1e(r),hash:T1e(s)}}function E1e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function eE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function C1e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function x1e(t,e){let n=C1e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function S1e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Xh(t):(s=im({},t),Ln(!s.pathname||!s.pathname.includes("?"),eE("?","pathname","search",s)),Ln(!s.pathname||!s.pathname.includes("#"),eE("#","pathname","hash",s)),Ln(!s.search||!s.search.includes("#"),eE("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=_1e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const tu=t=>t.join("/").replace(/\/\/+/g,"/"),A1e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),I1e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,T1e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function N1e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lL=["post","put","patch","delete"];new Set(lL);const P1e=["get",...lL];new Set(P1e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function om(){return om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},om.apply(this,arguments)}const tI=P.createContext(null),k1e=P.createContext(null),vb=P.createContext(null),bb=P.createContext(null),ef=P.createContext({outlet:null,matches:[],isDataRoute:!1}),uL=P.createContext(null);function _b(){return P.useContext(bb)!=null}function dL(){return _b()||Ln(!1),P.useContext(bb).location}function hL(t){P.useContext(vb).static||P.useLayoutEffect(t)}function O1e(){let{isDataRoute:t}=P.useContext(ef);return t?H1e():R1e()}function R1e(){_b()||Ln(!1);let t=P.useContext(tI),{basename:e,future:n,navigator:r}=P.useContext(vb),{matches:s}=P.useContext(ef),{pathname:i}=dL(),o=JSON.stringify(x1e(s,n.v7_relativeSplatPath)),a=P.useRef(!1);return hL(()=>{a.current=!0}),P.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=S1e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:tu([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function $1e(t,e){return D1e(t,e)}function D1e(t,e,n,r){_b()||Ln(!1);let{navigator:s}=P.useContext(vb),{matches:i}=P.useContext(ef),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=dL(),u;if(e){var d;let w=typeof e=="string"?Xh(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||Ln(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=o1e(t,{pathname:f}),m=B1e(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:tu([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:tu([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&m?P.createElement(bb.Provider,{value:{location:om({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ac.Pop}},m):m}function j1e(){let t=q1e(),e=N1e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,null)}const U1e=P.createElement(j1e,null);class L1e extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(ef.Provider,{value:this.props.routeContext},P.createElement(uL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function M1e(t){let{routeContext:e,match:n,children:r}=t,s=P.useContext(tI);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(ef.Provider,{value:e},r)}function B1e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Ln(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,m=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||U1e,c&&(l<0&&h===0?(V1e("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=m:p?v=w:d.route.Component?v=P.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,P.createElement(M1e,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?P.createElement(L1e,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var fL=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(fL||{}),pL=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pL||{});function F1e(t){let e=P.useContext(tI);return e||Ln(!1),e}function z1e(t){let e=P.useContext(k1e);return e||Ln(!1),e}function W1e(t){let e=P.useContext(ef);return e||Ln(!1),e}function gL(t){let e=W1e(),n=e.matches[e.matches.length-1];return n.route.id||Ln(!1),n.route.id}function q1e(){var t;let e=P.useContext(uL),n=z1e(),r=gL();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function H1e(){let{router:t}=F1e(fL.UseNavigateStable),e=gL(pL.UseNavigateStable),n=P.useRef(!1);return hL(()=>{n.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,om({fromRouteId:e},i)))},[t,e])}const wR={};function V1e(t,e,n){wR[t]||(wR[t]=!0)}function G1e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function qw(t){Ln(!1)}function K1e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ac.Pop,navigator:i,static:o=!1,future:a}=t;_b()&&Ln(!1);let c=e.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:c,navigator:i,static:o,future:om({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Xh(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,m=P.useMemo(()=>{let w=cL(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return m==null?null:P.createElement(vb.Provider,{value:l},P.createElement(bb.Provider,{children:n,value:m}))}function Y1e(t){let{children:e,location:n}=t;return $1e(hS(e),n)}new Promise(()=>{});function hS(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,hS(r.props.children,i));return}r.type!==qw&&Ln(!1),!r.props.index||!r.props.children||Ln(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hS(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Q1e="6";try{window.__reactRouterVersion=Q1e}catch{}const J1e="startTransition",vR=hM[J1e];function Z1e(t){let{basename:e,children:n,future:r,window:s}=t,i=P.useRef();i.current==null&&(i.current=r1e({window:s,v5Compat:!0}));let o=i.current,[a,c]=P.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=P.useCallback(d=>{l&&vR?vR(()=>c(d)):c(d)},[c,l]);return P.useLayoutEffect(()=>o.listen(u),[o,u]),P.useEffect(()=>G1e(r),[r]),P.createElement(K1e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var bR;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(bR||(bR={}));var _R;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_R||(_R={}));const X1e=Ki({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function e_e(){const t=X1e(),{open:e}=wb(),{address:n,isConnected:r}=Sm(),{isPending:s}=g8(),{disconnect:i}=m8(),{data:o}=y8({address:n}),[a,c]=P.useState("pixelawbs-popup"),[l,u]=P.useState(new Set),[d,h]=P.useState(!1),[f,p]=P.useState(!1),[m,w]=P.useState(!1),[y,b]=P.useState(!1),v=O1e(),E=P.useRef(null);P.useEffect(()=>{if(a==="halloween-popup"&&E.current){const T=E.current.querySelector("script[data-tiktok-embed]");T&&T.remove();const L=document.createElement("script");L.src="https://www.tiktok.com/embed.js",L.async=!0,L.setAttribute("data-tiktok-embed","true"),E.current.appendChild(L)}},[a]);const _=(T,L,D)=>{if(T==="url"&&D)window.open(D,"_blank");else if(T==="popup"&&L)c(L),u($=>{const U=new Set($);return U.delete(L),U}),document.body.offsetWidth;else if(T==="wallet")r?i():e();else if(T==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else T==="nft-gallery"?p(!0):T==="meme-generator"?w(!0):T==="chess"&&(r?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):e().then(()=>{const $=()=>{window.ethereum&&window.ethereum.selectedAddress?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):setTimeout($,200)};$()}))},S=()=>c(null),x=T=>{u(L=>new Set(L).add(T)),c(null)},A=T=>{T==="mint-popup"?h(!0):T==="nft-gallery-popup"?p(!0):T==="meme-generator-popup"?w(!0):c(T),u(L=>{const D=new Set(L);return D.delete(T),D})},C=()=>h(!1),k=()=>p(!1),O=()=>w(!1),M=()=>{h(!1),u(T=>new Set(T).add("mint-popup"))},F=()=>{p(!1),u(T=>new Set(T).add("nft-gallery-popup"))},V=()=>{w(!1),u(T=>new Set(T).add("meme-generator-popup"))},N=g.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[g.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return g.jsxs("div",{className:t.body,children:[y&&g.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[g.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),g.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),g.jsx(YZ,{onIconClick:_}),g.jsx(JZ,{minimizedWindows:Array.from(l),onRestoreWindow:A,walletButton:N,connectionStatus:{connected:r,address:n,ens:o||void 0}}),g.jsxs(Zs,{id:"chat-popup",isOpen:a==="chat-popup",onClose:S,onMinimize:x,children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",g.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),g.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),g.jsxs(Zs,{id:"purity-popup",isOpen:a==="purity-popup",onClose:S,onMinimize:x,children:[g.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),g.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),g.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),g.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),g.jsxs(Zs,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:S,onMinimize:x,children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",g.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",g.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",g.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",g.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),g.jsx("p",{children:"Chain: Ethereum"}),g.jsxs("p",{children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),g.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[g.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",g.jsx("br",{}),g.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",g.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",g.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),g.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),g.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),g.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),g.jsxs(Zs,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:S,onMinimize:x,children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",g.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),g.jsx("p",{style:{marginBottom:"10px"},children:g.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),g.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),g.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),g.jsxs(Zs,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:S,onMinimize:x,children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",g.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),g.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),g.jsxs(Zs,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:S,onMinimize:x,children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",g.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),g.jsx("p",{children:"Chain: Ethereum"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",g.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),g.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:g.jsx(gY,{id:"1620879129850834944"})}),g.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),g.jsx(Zs,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:S,onMinimize:x,children:(()=>{const T=L=>{L.preventDefault(),c(null),h(!0)};return g.jsxs(g.Fragment,{children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",g.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:T,children:"COLLECT HERE"})," OR VISIT ",g.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),g.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",g.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),g.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),g.jsxs(Zs,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:S,onMinimize:x,children:[g.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),g.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),g.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),g.jsx("div",{ref:E,style:{maxWidth:"400px",margin:"0 auto"},children:g.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:g.jsxs("section",{children:[g.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",g.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),g.jsxs(Zs,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:S,onMinimize:x,children:[g.jsx("h1",{style:{marginBottom:"10px"},children:g.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),g.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",g.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),g.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",g.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),g.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",g.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),g.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),g.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:g.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),g.jsx(eX,{isOpen:d,onClose:C,onMinimize:M,walletAddress:n||""}),g.jsx(Gbe,{isOpen:f,onClose:k,onMinimize:F,walletAddress:n}),g.jsx(Zs,{id:"meme-generator-popup",isOpen:m,onClose:O,onMinimize:V,children:g.jsx(rL,{})})]})}const t_e=Ki({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),ER=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],n_e=({onBack:t,walletAddress:e})=>{const n=t_e(),{open:r}=wb(),[s,i]=P.useState([]),[o,a]=P.useState(!0),[c,l]=P.useState(null),[u,d]=P.useState(ER[0]),[h,f]=P.useState(!1),[p,m]=P.useState(null),[w,y]=P.useState("all"),[b,v]=P.useState(null),E=P.useCallback(async()=>{var A,C;try{if((A=window.solana)!=null&&A.isPhantom){const k=await window.solana.connect();m(k.publicKey.toString());return}if((C=window.solflare)!=null&&C.isSolflare){const k=await window.solflare.connect();m(k.publicKey.toString());return}r()}catch(k){console.error("Failed to connect Solana wallet:",k),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);P.useEffect(()=>{var A,C;(A=window.solana)!=null&&A.publicKey?m(window.solana.publicKey.toString()):(C=window.solflare)!=null&&C.publicKey&&m(window.solflare.publicKey.toString())},[]),P.useEffect(()=>{(async()=>{a(!0);try{let C,k=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}k=p,C=await ZZ(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",C.data.length)}else u.api==="opensea"?C=await h2(u.slug,100,k):C=await d2(u.slug,1,100,k);w==="owned"&&p&&(console.log("Filtering for owner:",p),C.data.some(M=>M.owners&&M.owners.length>0)?C.data=C.data.filter(M=>M.owners.some(V=>V.owner_of&&V.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(C.data)}catch(C){console.error(C)}finally{a(!1)}})()},[e,u,p,w]),P.useEffect(()=>{h&&E()},[h,E]);const _=async A=>{if(a(!0),u.api==="opensea"&&u.chain)try{const C=await Cj(u.chain,A.address,A.token_id.toString()),k={...A,attributes:JSON.stringify(C.traits||[])};l(k)}catch(C){console.error("Failed to fetch full NFT details",C),l(A)}else l(A);a(!1)},S=()=>{if(!c)return null;let A=[];try{A=JSON.parse(c.attributes||"[]")}catch(C){console.error("Failed to parse NFT attributes:",C)}return g.jsxs("div",{className:n.detailView,children:[g.jsx("img",{src:c.image,alt:c.name}),g.jsx("h2",{children:c.name}),g.jsx("h4",{children:"Traits:"}),g.jsx("ul",{children:A.map((C,k)=>g.jsxs("li",{children:[g.jsxs("strong",{children:[C.trait_type,":"]})," ",C.value]},k))})]})},x=()=>g.jsxs(g.Fragment,{children:[g.jsx("div",{className:n.collectionSelector,children:ER.map(A=>g.jsx("button",{className:`${n.collectionButton} ${u.slug===A.slug?"active":""}`,onClick:()=>d(A),children:A.name},A.slug))}),g.jsxs("div",{className:n.content,children:[g.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[g.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),g.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&g.jsx("button",{onClick:()=>{E()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&g.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&g.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?g.jsx("div",{className:n.loading,children:"Loading NFTs..."}):g.jsx("div",{className:n.grid,children:s.map(A=>{let C=A.image||A.image_url||A.image_url_shrunk||"/assets/pixelawb.png";return g.jsxs("div",{className:n.gridItem,onClick:()=>void _(A),children:[g.jsx("img",{src:C,alt:A.name,onError:k=>{k.currentTarget.src!==A.image_url&&A.image_url?k.currentTarget.src=A.image_url:k.currentTarget.src!==A.image_url_shrunk&&A.image_url_shrunk?k.currentTarget.src=A.image_url_shrunk:k.currentTarget.src="/assets/pixelawb.png"}}),g.jsx("span",{children:A.name})]},A.id)})})]})]});return g.jsxs("div",{className:n.galleryContainer,children:[g.jsxs("header",{className:n.header,children:[g.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),g.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),g.jsx("div",{className:n.content,children:o?g.jsx("p",{className:n.loading,children:"Loading..."}):c?S():x()})]})},r_e=Ki({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),xi=({isOpen:t,onClose:e,title:n,children:r})=>{const s=r_e();return t?g.jsx("div",{className:s.overlay,children:g.jsxs("div",{className:s.popup,children:[g.jsxs("div",{className:s.titleBar,children:[g.jsx("span",{children:n}),g.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),g.jsx("div",{className:s.content,children:r})]})}):null},s_e=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=P.useState([]),[i,o]=P.useState(!1),[a,c]=P.useState(!1),[l,u]=P.useState({}),[d,h]=P.useState(null),{data:f}=w8();P.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const E=await _j(n);s(E);const _={};E.forEach(S=>{_[S.id]=0}),u(_)}catch(E){h(E.message)}finally{o(!1)}},m=(E,_)=>{u(S=>({...S,[E]:Math.max(0,_)}))},w=async()=>{const E=Object.entries(l).filter(([,_])=>_>0).map(([_,S])=>({id:_,quantity:S}));if(E.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const _=await Ej(n,E);if(_.success&&_.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const S=await f.sendTransaction({to:_.mintTransaction.to,value:BigInt(_.mintTransaction.value),data:_.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${S}`),e()}catch(S){h("Transaction failed: "+S.message)}}else throw new Error(_.message||"Could not retrieve minting transaction.")}catch(_){h("Minting failed: "+_.message)}finally{c(!1)}},y=(E,_)=>`${parseFloat(E)} ${_}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return g.jsxs(xi,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&g.jsx("div",{style:v,children:d}),i?g.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?g.jsx("div",{children:"No eligible invite lists found for your wallet."}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(E=>g.jsxs("div",{style:b,children:[g.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:E.name}),g.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(E.token_price,E.currency_symbol)]}),g.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",E.wallet_limit===4294967295?"Unlimited":E.wallet_limit," per wallet"]}),g.jsx("input",{type:"number",min:0,max:E.wallet_limit===4294967295?void 0:E.wallet_limit,value:l[E.id]||"",onChange:_=>m(E.id,parseInt(_.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),g.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},E.id))]}),g.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},i_e=Ki({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),o_e=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],a_e=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],c_e=()=>{const t=i_e(),{open:e}=wb(),{address:n,isConnected:r}=Sm(),{isPending:s}=g8(),{disconnect:i}=m8(),{data:o}=y8({address:n}),[a,c]=P.useState("main"),[l,u]=P.useState(!1),[d,h]=P.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=P.useState(!1),[m,w]=P.useState(!1),[y,b]=P.useState(!1),[v,E]=P.useState(!1),[_,S]=P.useState(!1),[x,A]=P.useState(!1),[C,k]=P.useState(!1),[O,M]=P.useState(!1),[F,V]=P.useState(!1),[N,T]=P.useState(!1),[L,D]=P.useState(!1),[$,U]=P.useState(!1),W=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>E(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>S(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],J=se=>{se.disabled||se.action()};if(P.useEffect(()=>{const se=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(se)},[]),P.useEffect(()=>{u(!0)},[]),a==="gallery")return g.jsx(n_e,{onBack:()=>c("main"),walletAddress:n||void 0});function ie({open:se,onClose:we,title:Y,nfts:X}){const oe=te=>{switch(te){case"lawbsters":A(!0);break;case"lawbstarz":k(!0);break;case"pixelawbs":M(!0);break;case"halloween":V(!0);break;case"lawbstation":T(!0);break;case"nexus":D(!0);break}};return g.jsx(xi,{isOpen:se,onClose:we,title:Y,children:g.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:X.map(te=>g.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>oe(te.id),children:[g.jsx("img",{src:te.image,alt:te.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),g.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:te.name}),g.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:te.description})]},te.id))})})}function ne({open:se,onClose:we}){return se?g.jsxs(xi,{isOpen:se,onClose:we,title:"$LAWB",children:[g.jsx("h1",{style:{marginBottom:"10px"},children:g.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),g.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",g.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),g.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",g.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),g.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",g.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),g.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),g.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:g.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return g.jsxs("div",{className:t.mobileContainer,children:[g.jsx("header",{className:t.header,children:g.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),g.jsx("div",{className:t.iconGrid,children:W.map(se=>g.jsxs("div",{className:t.icon,onClick:()=>J(se),children:[g.jsx("img",{src:se.icon,alt:se.label}),g.jsx("span",{children:se.label})]},se.label))}),l&&g.jsxs(xi,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",g.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",g.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),g.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",g.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),g.jsx("p",{style:{marginBottom:"10px"},children:g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&g.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:g.jsxs("div",{className:t.menuModal,onClick:se=>se.stopPropagation(),children:[g.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),g.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),g.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),g.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),g.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),g.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),g.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),g.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),g.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),g.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),U(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),g.jsx(s_e,{isOpen:m,onClose:()=>w(!1),walletAddress:n||""}),g.jsx(ie,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:o_e}),g.jsx(ie,{open:v,onClose:()=>E(!1),title:"SOL NFTS FOLDER",nfts:a_e}),g.jsx(ne,{open:_,onClose:()=>S(!1)}),g.jsxs(xi,{isOpen:x,onClose:()=>A(!1),title:"Lawbsters",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",g.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),g.jsx("p",{children:"Chain: Ethereum"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",g.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),g.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),g.jsxs(xi,{isOpen:C,onClose:()=>k(!1),title:"Lawbstarz",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",g.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",g.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",g.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",g.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),g.jsx("p",{children:"Chain: Ethereum"}),g.jsxs("p",{children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),g.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),g.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),g.jsxs(xi,{isOpen:O,onClose:()=>M(!1),title:"Pixelawbs",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",g.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{M(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",g.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),g.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",g.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),g.jsxs(xi,{isOpen:F,onClose:()=>V(!1),title:"A Lawbster Halloween",children:[g.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),g.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),g.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),g.jsxs(xi,{isOpen:N,onClose:()=>T(!1),title:"Lawbstation",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",g.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),g.jsx("p",{style:{marginBottom:"10px"},children:g.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),g.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),g.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),g.jsxs(xi,{isOpen:L,onClose:()=>D(!1),title:"Nexus",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",g.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),g.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),g.jsx(xi,{isOpen:$,onClose:()=>U(!1),title:"Meme Generator",children:g.jsx(rL,{})}),g.jsxs("div",{className:t.taskbar,children:[g.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),g.jsxs("div",{className:t.walletStatus,children:[g.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),g.jsx("span",{className:t.clock,children:d})]})]})};function l_e(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=P.useState(e(t));function s(){r(e(t))}return P.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}function u_e(t){let e=[],n,r;function s(a){return Og.parseEvmChainId(a)||1}function i(){var a;return n||(n=Xl.getInstance({projectId:t.options.projectId,chainId:(a=R.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Sn.open(on.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Sn.open(on.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Sn.open(on.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:on.EmbeddedWalletAbortController})),n}async function o(a={}){var m,w;const c=i();let l=a.chainId;if(a.isReconnecting){const y=Og.parseEvmChainId(c.getLastUsedChainId()||""),b=(m=t.chains)==null?void 0:m[0].id;if(l=y||b,!l)throw new Error("ChainId not found in provider")}const u=(w=ye.state.preferredAccountTypes)==null?void 0:w.eip155,{address:d,chainId:h,accounts:f}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(f==null?void 0:f.map(y=>y.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:ee.CONNECTOR_ID.AUTH,name:ee.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:ee.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Xl.getInstance({projectId:t.options.projectId,chainId:(c=R.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:on.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Sn.open(on.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Sn.open(on.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Sn.open(on.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=R.state.activeChain===ee.CHAIN.EVM;if(ee.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>_e.getConnectorId(h)===ee.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(m=>m.id===c);if(!d)throw new Ao(new Error("chain not found on connector."));const h=await this.getProvider(),f=(l=ye.state.preferredAccountTypes)==null?void 0:l.eip155,p=await h.connect({chainId:c,preferredAccountType:f});return e=((u=p==null?void 0:p.accounts)==null?void 0:u.map(m=>m.address))||[p.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new Ao(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(_c)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}nI.type="walletConnect";function nI(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:nI.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const m=R.getCaipNetworks(),w=await this.getProvider();if(!w)throw new Qa;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=ue.state.universalProviderConfigOverride;if(!w.session||y){const C=Up.createNamespaces(m,b);await w.connect({optionalNamespaces:C,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(m.map(k=>Number(k.id)))}const v=await this.getAccounts(),E=await this.getChainId(),_=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,S=_==null?void 0:_.some(C=>Number(C.split(":")[1])===E);let x=1;S?x=E:_!=null&&_[0]&&(x=Number(_[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const A=b==null?void 0:b.defaultChain;return w.setDefaultChain(A??`eip155:${x}`),{accounts:v,chainId:x}}catch(m){throw/(user rejected|connection request reset)/i.test(m==null?void 0:m.message)?new Rn(m):m}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,m,w;const d=await this.getProvider();if(!((p=d==null?void 0:d.session)!=null&&p.namespaces))return[];const h=(w=(m=d==null?void 0:d.session)==null?void 0:m.namespaces[ee.CHAIN.EVM])==null?void 0:w.accounts;return(h==null?void 0:h.map(y=>y.split(":")[2]))??[]},async getProvider({chainId:d}={}){var p,m;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=ve.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=ve.getStoredActiveCaipNetworkId(),y=e.getCaipNetworks(h),b=y==null?void 0:y.find(v=>v.id===w);b&&b.chainNamespace===ee.CHAIN.EVM&&await((m=this.switchChain)==null?void 0:m.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var m,w,y,b;const d=(m=e.getCaipNetwork(ee.CHAIN.EVM))==null?void 0:m.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[ee.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=R.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var m,w,y,b;const f=await this.getProvider();if(!f)throw new Qa;const p=R.getCaipNetworks().find(v=>v.id===h);if(!p)throw new Ao(new Sg);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:Ye(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const E=v;if(/(?:user rejected)/iu.test(E.message))throw new Rn(E);try{let _;d!=null&&d.blockExplorerUrls?_=d.blockExplorerUrls:_=(m=p.blockExplorers)!=null&&m.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const S=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],x={blockExplorerUrls:_,chainId:Ye(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:S};await f.request({method:"wallet_addEthereumChain",params:[x]});const A=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...A,h]),{...p,id:p.id}}catch(_){throw new Rn(_)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>_c(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(R.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,m;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(m=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[ee.CHAIN.EVM])==null?void 0:m.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Hf=Yt({pendingTransactions:0}),CR={state:Hf,subscribeKey(t,e){return ur(Hf,t,e)},increase(t){Hf[t]+=1},decrease(t){Hf[t]-=1},reset(t){Hf[t]=0}};function d_e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function h_e(t){if(De.isSafeApp()){const{safe:e}=await wn(async()=>{const{safe:n}=await import("./index-BD-nF7OK.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function f_e(t){try{const{coinbaseWallet:e}=await wn(async()=>{const{coinbaseWallet:n}=await import("./index-BD-nF7OK.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const p_e={enable:!1,pollingInterval:3e4};class g_e extends nL{constructor(e){const n=wo.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=ee.CHAIN.EVM,this.adapterType=ee.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...p_e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===ee.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>De.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Vd(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>De.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Vd(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===ee.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=wo.getCaipNetworkId(s);i?n[s.id]=wo.extendWagmiTransports(s,e.projectId,i):n[s.id]=wo.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=Jq({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=Oq(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),CR.increase("pendingTransactions")}});const e=CR.subscribeKey("pendingTransactions",n=>{var r;n>=ee.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){H5(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await f_e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await h_e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(nI(e,n)),e.enableInjected!==!1&&r.push(kv({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(u_e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await Tq(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Vd(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Aq(this.wagmiConfig,s);const i=await Iq(this.wagmiConfig,s);return await G5(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(Og.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await K5(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await vq(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return zW(e.value,e.decimals)}formatUnits(e){return Lh(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===ee.CONNECTOR_ID.AUTH||e.id===ee.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Sc.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Sc.ConnectorNamesMap[e.id]??e.name,imageId:Sc.ConnectorImageIds[e.id],type:Sc.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===ee.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){V5(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=lo(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(De.isSafeApp()&&n===ee.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await Iw(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Iw(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await JT(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,f,p;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===ee.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const m=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(c.uid);if(m)return{address:m==null?void 0:m.accounts[0],chainId:m==null?void 0:m.chainId,provider:r,type:s,id:n}}const l=await Iw(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await CC(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=ve.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await Cq(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});ve.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=lo(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await W5(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await JT(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=lo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=d_e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=lo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=lo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=lo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=lo(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(R.state.activeChain==="eip155")return;CC(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new eI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const mL={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},yL="7c65f27254d6ddd24cf7eedf2685c4fb",m_e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},wL=new g_e({networks:[tL,mL],projectId:yL,ssr:!1});Hbe({adapters:[wL],networks:[tL,mL],projectId:yL,metadata:m_e,features:{analytics:!1}});const y_e=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wn(async()=>{const{default:r}=await Promise.resolve().then(()=>tf);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class rI extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class w_e extends rI{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class v_e extends rI{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class b_e extends rI{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var fS;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(fS||(fS={}));var __e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class E_e{constructor(e,{headers:n={},customFetch:r,region:s=fS.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=y_e(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return __e(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(p=>{throw new w_e(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new v_e(u);if(!u.ok)throw new b_e(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var ds={},sI={},Eb={},Wm={},Cb={},xb={},C_e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},kh=C_e();const x_e=kh.fetch,vL=kh.fetch.bind(kh),bL=kh.Headers,S_e=kh.Request,A_e=kh.Response,tf=Object.freeze(Object.defineProperty({__proto__:null,Headers:bL,Request:S_e,Response:A_e,default:vL,fetch:x_e},Symbol.toStringTag,{value:"Module"})),I_e=rv(tf);var Sb={};Object.defineProperty(Sb,"__esModule",{value:!0});let T_e=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Sb.default=T_e;var _L=gn&&gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xb,"__esModule",{value:!0});const N_e=_L(I_e),P_e=_L(Sb);let k_e=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=N_e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const m=await i.text();try{l=JSON.parse(m),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&m===""?(h=204,f="No Content"):l={message:m}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new P_e.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};xb.default=k_e;var O_e=gn&&gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cb,"__esModule",{value:!0});const R_e=O_e(xb);let $_e=class extends R_e.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Cb.default=$_e;var D_e=gn&&gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wm,"__esModule",{value:!0});const j_e=D_e(Cb);let U_e=class extends j_e.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Wm.default=U_e;var L_e=gn&&gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Eb,"__esModule",{value:!0});const Vf=L_e(Wm);let M_e=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Vf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Vf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Vf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Vf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Vf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Eb.default=M_e;var Ab={},Ib={};Object.defineProperty(Ib,"__esModule",{value:!0});Ib.version=void 0;Ib.version="0.0.0-automated";Object.defineProperty(Ab,"__esModule",{value:!0});Ab.DEFAULT_HEADERS=void 0;const B_e=Ib;Ab.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${B_e.version}`};var EL=gn&&gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sI,"__esModule",{value:!0});const F_e=EL(Eb),z_e=EL(Wm),W_e=Ab;let q_e=class CL{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},W_e.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new F_e.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new CL(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new z_e.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};sI.default=q_e;var nf=gn&&gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ds,"__esModule",{value:!0});ds.PostgrestError=ds.PostgrestBuilder=ds.PostgrestTransformBuilder=ds.PostgrestFilterBuilder=ds.PostgrestQueryBuilder=ds.PostgrestClient=void 0;const xL=nf(sI);ds.PostgrestClient=xL.default;const SL=nf(Eb);ds.PostgrestQueryBuilder=SL.default;const AL=nf(Wm);ds.PostgrestFilterBuilder=AL.default;const IL=nf(Cb);ds.PostgrestTransformBuilder=IL.default;const TL=nf(xb);ds.PostgrestBuilder=TL.default;const NL=nf(Sb);ds.PostgrestError=NL.default;var H_e=ds.default={PostgrestClient:xL.default,PostgrestQueryBuilder:SL.default,PostgrestFilterBuilder:AL.default,PostgrestTransformBuilder:IL.default,PostgrestBuilder:TL.default,PostgrestError:NL.default};const{PostgrestClient:V_e,PostgrestQueryBuilder:mSe,PostgrestFilterBuilder:ySe,PostgrestTransformBuilder:wSe,PostgrestBuilder:vSe,PostgrestError:bSe}=H_e;function G_e(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const K_e=G_e(),Y_e="2.11.13",Q_e={"X-Client-Info":`realtime-js/${Y_e}`},J_e="1.0.0",PL=1e4,Z_e=1e3;var Lp;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Lp||(Lp={}));var Sr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Sr||(Sr={}));var ki;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ki||(ki={}));var pS;(function(t){t.websocket="websocket"})(pS||(pS={}));var Il;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Il||(Il={}));class X_e{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class kL{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Vt||(Vt={}));const xR=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=eEe(o,t,e,s),i),{})},eEe=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?OL(i,o):gS(o)},OL=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return sEe(e,n)}switch(t){case Vt.bool:return tEe(e);case Vt.float4:case Vt.float8:case Vt.int2:case Vt.int4:case Vt.int8:case Vt.numeric:case Vt.oid:return nEe(e);case Vt.json:case Vt.jsonb:return rEe(e);case Vt.timestamp:return iEe(e);case Vt.abstime:case Vt.date:case Vt.daterange:case Vt.int4range:case Vt.int8range:case Vt.money:case Vt.reltime:case Vt.text:case Vt.time:case Vt.timestamptz:case Vt.timetz:case Vt.tsrange:case Vt.tstzrange:return gS(e);default:return gS(e)}},gS=t=>t,tEe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},nEe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},rEe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},sEe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>OL(e,a))}return t},iEe=t=>typeof t=="string"?t.replace(" ","T"):t,RL=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class tE{constructor(e,n,r={},s=PL){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var SR;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(SR||(SR={}));class Mp{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mp.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Mp.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Mp.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),p=u.filter(w=>f.indexOf(w.presence_ref)<0),m=d.filter(w=>h.indexOf(w.presence_ref)<0);p.length>0&&(a[l]=p),m.length>0&&(c[l]=m)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var AR;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(AR||(AR={}));var IR;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(IR||(IR={}));var Yo;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Yo||(Yo={}));class iI{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Sr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new tE(this,ki.join,this.params,this.timeout),this.rejoinTimer=new kL(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Sr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Sr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Sr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Sr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ki.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Mp(this),this.broadcastEndpointURL=RL(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Sr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Yo.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Yo.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Yo.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let m=0;m<f;m++){const w=h[m],{filter:{event:y,schema:b,table:v,filter:E}}=w,_=u&&u[m];if(_&&_.event===y&&_.schema===b&&_.table===v&&_.filter===E)p.push(Object.assign(Object.assign({},w),{id:_.id}));else{this.unsubscribe(),this.state=Sr.errored,e==null||e(Yo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Yo.SUBSCRIBED);return}}).receive("error",u=>{this.state=Sr.errored,e==null||e(Yo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Yo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Sr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ki.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new tE(this,ki.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new tE(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=ki;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,m,w;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(m=f.filter)===null||m===void 0?void 0:m.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,m,w,y,b,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const E=f.id,_=(p=f.filter)===null||p===void 0?void 0:p.event;return E&&((m=n.ids)===null||m===void 0?void 0:m.includes(E))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const E=(b=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return E==="*"||E===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:m,table:w,commit_timestamp:y,type:b,errors:v}=p;h=Object.assign(Object.assign({},{schema:m,table:w,commit_timestamp:y,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Sr.closed}_isJoined(){return this.state===Sr.joined}_isJoining(){return this.state===Sr.joining}_isLeaving(){return this.state===Sr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&iI.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ki.close,{},e)}_onError(e){this._on(ki.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Sr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=xR(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=xR(e.columns,e.old_record)),n}}const TR=()=>{},oEe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aEe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Q_e,this.params={},this.timeout=PL,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=TR,this.ref=0,this.logger=TR,this.conn=null,this.sendBuffer=[],this.serializer=new X_e,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>wn(async()=>{const{default:c}=await Promise.resolve().then(()=>tf);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${pS.websocket}`,this.httpEndpoint=RL(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new kL(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=K_e),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:J_e}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Lp.connecting:return Il.Connecting;case Lp.open:return Il.Open;case Lp.closing:return Il.Closing;default:return Il.Closed}}isConnected(){return this.connectionState()===Il.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new iI(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(ki.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Z_e,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ki.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([oEe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class oI extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function zn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class cEe extends oI{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class mS extends oI{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var lEe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const $L=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wn(async()=>{const{default:r}=await Promise.resolve().then(()=>tf);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},uEe=()=>lEe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wn(()=>Promise.resolve().then(()=>tf),void 0)).Response:Response}),yS=t=>{if(Array.isArray(t))return t.map(n=>yS(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=yS(r)}),e};var Mu=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const nE=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dEe=(t,e,n)=>Mu(void 0,void 0,void 0,function*(){const r=yield uEe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new cEe(nE(s),t.status||500))}).catch(s=>{e(new mS(nE(s),s))}):e(new mS(nE(t),t))}),hEe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function qm(t,e,n,r,s,i){return Mu(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,hEe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>dEe(c,a,r))})})}function tv(t,e,n,r){return Mu(this,void 0,void 0,function*(){return qm(t,"GET",e,n,r)})}function nc(t,e,n,r,s){return Mu(this,void 0,void 0,function*(){return qm(t,"POST",e,r,s,n)})}function fEe(t,e,n,r,s){return Mu(this,void 0,void 0,function*(){return qm(t,"PUT",e,r,s,n)})}function pEe(t,e,n,r){return Mu(this,void 0,void 0,function*(){return qm(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function DL(t,e,n,r,s){return Mu(this,void 0,void 0,function*(){return qm(t,"DELETE",e,r,s,n)})}var es=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const gEe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},NR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class mEe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=$L(s)}uploadOrUpdate(e,n,r,s){return es(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},NR),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(zn(i))return{data:null,error:i};throw i}})}upload(e,n,r){return es(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return es(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:NR.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(zn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return es(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield nc(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new oI("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(zn(r))return{data:null,error:r};throw r}})}update(e,n,r){return es(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return es(this,void 0,void 0,function*(){try{return{data:yield nc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(zn(s))return{data:null,error:s};throw s}})}copy(e,n,r){return es(this,void 0,void 0,function*(){try{return{data:{path:(yield nc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(zn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return es(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield nc(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(zn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return es(this,void 0,void 0,function*(){try{const s=yield nc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(zn(s))return{data:null,error:s};throw s}})}download(e,n){return es(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield tv(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(zn(a))return{data:null,error:a};throw a}})}info(e){return es(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield tv(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:yS(r),error:null}}catch(r){if(zn(r))return{data:null,error:r};throw r}})}exists(e){return es(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield pEe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(zn(r)&&r instanceof mS){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return es(this,void 0,void 0,function*(){try{return{data:yield DL(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(zn(n))return{data:null,error:n};throw n}})}list(e,n,r){return es(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},gEe),n),{prefix:e||""});return{data:yield nc(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(zn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const yEe="2.7.1",wEe={"X-Client-Info":`storage-js/${yEe}`};var fd=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class vEe{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},wEe),n),this.fetch=$L(r)}listBuckets(){return fd(this,void 0,void 0,function*(){try{return{data:yield tv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(zn(e))return{data:null,error:e};throw e}})}getBucket(e){return fd(this,void 0,void 0,function*(){try{return{data:yield tv(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(zn(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return fd(this,void 0,void 0,function*(){try{return{data:yield nc(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(zn(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return fd(this,void 0,void 0,function*(){try{return{data:yield fEe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(zn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return fd(this,void 0,void 0,function*(){try{return{data:yield nc(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(zn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return fd(this,void 0,void 0,function*(){try{return{data:yield DL(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(zn(n))return{data:null,error:n};throw n}})}}class bEe extends vEe{constructor(e,n={},r){super(e,n,r)}from(e){return new mEe(this.url,this.headers,e,this.fetch)}}const _Ee="2.50.1";let lp="";typeof Deno<"u"?lp="deno":typeof document<"u"?lp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?lp="react-native":lp="node";const EEe={"X-Client-Info":`supabase-js-${lp}/${_Ee}`},CEe={headers:EEe},xEe={schema:"public"},SEe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},AEe={};var IEe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const TEe=t=>{let e;return t?e=t:typeof fetch>"u"?e=vL:e=fetch,(...n)=>e(...n)},NEe=()=>typeof Headers>"u"?bL:Headers,PEe=(t,e,n)=>{const r=TEe(n),s=NEe();return(i,o)=>IEe(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var kEe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function OEe(t){return t.endsWith("/")?t:t+"/"}function REe(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>kEe(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const jL="2.70.0",Ed=30*1e3,wS=3,rE=wS*Ed,$Ee="http://localhost:9999",DEe="supabase.auth.token",jEe={"X-Client-Info":`gotrue-js/${jL}`},vS="X-Supabase-Api-Version",UL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},UEe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,LEe=6e5;class aI extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function tt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class MEe extends aI{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function BEe(t){return tt(t)&&t.name==="AuthApiError"}class LL extends aI{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class al extends aI{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ga extends al{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function FEe(t){return tt(t)&&t.name==="AuthSessionMissingError"}class ow extends al{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class aw extends al{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cw extends al{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function zEe(t){return tt(t)&&t.name==="AuthImplicitGrantRedirectError"}class PR extends al{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bS extends al{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function sE(t){return tt(t)&&t.name==="AuthRetryableFetchError"}class kR extends al{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Bp extends al{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const nv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),OR=` 	
\r=`.split(""),WEe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<OR.length;e+=1)t[OR[e].charCodeAt(0)]=-2;for(let e=0;e<nv.length;e+=1)t[nv[e].charCodeAt(0)]=e;return t})();function RR(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(nv[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(nv[r]),e.queuedBits-=6}}function ML(t,e,n){const r=WEe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function $R(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{VEe(o,r,n)};for(let o=0;o<t.length;o+=1)ML(t.charCodeAt(o),s,i);return e.join("")}function qEe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function HEe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}qEe(r,e)}}function VEe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function GEe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)ML(t.charCodeAt(s),n,r);return new Uint8Array(e)}function KEe(t){const e=[];return HEe(t,n=>e.push(n)),new Uint8Array(e)}function YEe(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>RR(s,n,r)),RR(null,n,r),e.join("")}function QEe(t){return Math.round(Date.now()/1e3)+t}function JEe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Si=()=>typeof window<"u"&&typeof document<"u",yl={tested:!1,writable:!1},Fp=()=>{if(!Si())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yl.tested)return yl.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),yl.tested=!0,yl.writable=!0}catch{yl.tested=!0,yl.writable=!1}return yl.writable};function ZEe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const BL=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>wn(async()=>{const{default:r}=await Promise.resolve().then(()=>tf);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},XEe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",FL=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},lw=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},uw=async(t,e)=>{await t.removeItem(e)};class Tb{constructor(){this.promise=new Tb.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Tb.promiseConstructor=Promise;function iE(t){const e=t.split(".");if(e.length!==3)throw new Bp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!UEe.test(e[r]))throw new Bp("JWT not in base64url format");return{header:JSON.parse($R(e[0])),payload:JSON.parse($R(e[1])),signature:GEe(e[2]),raw:{header:e[0],payload:e[1]}}}async function eCe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function tCe(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function nCe(t){return("0"+t.toString(16)).substr(-2)}function rCe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,nCe).join("")}async function sCe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function iCe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await sCe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pd(t,e,n=!1){const r=rCe();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await FL(t,`${e}-code-verifier`,s);const i=await iCe(r);return[i,r===i?"plain":"s256"]}const oCe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aCe(t){const e=t.headers.get(vS);if(!e||!e.match(oCe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function cCe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function lCe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uCe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gd(t){if(!uCe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var dCe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const El=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hCe=[502,503,504];async function DR(t){var e;if(!XEe(t))throw new bS(El(t),0);if(hCe.includes(t.status))throw new bS(El(t),t.status);let n;try{n=await t.json()}catch(i){throw new LL(El(i),i)}let r;const s=aCe(t);if(s&&s.getTime()>=UL["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new kR(El(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ga}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new kR(El(n),t.status,n.weak_password.reasons);throw new MEe(El(n),t.status||500,r)}const fCe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function at(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[vS]||(i[vS]=UL["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await pCe(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function pCe(t,e,n,r,s,i){const o=fCe(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new bS(El(c),0)}if(a.ok||await DR(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await DR(c)}}function Go(t){var e;let n=null;wCe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=QEe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function jR(t){const e=Go(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function cc(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gCe(t){return{data:t,error:null}}function mCe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=dCe(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function yCe(t){return t}function wCe(t){return t.access_token&&t.refresh_token&&t.expires_in}const oE=["global","local","others"];var vCe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class bCe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=BL(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=oE[0]){if(oE.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${oE.join(", ")}`);try{return await at(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await at(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:cc})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=vCe(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await at(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:mCe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(tt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await at(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:cc})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await at(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:yCe});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);l[`${w}Page`]=m}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(tt(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){gd(e);try{return await at(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:cc})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){gd(e);try{return await at(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:cc})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){gd(e);try{return await at(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:cc})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){gd(e.userId);try{const{data:n,error:r}=await at(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){gd(e.userId),gd(e.id);try{return{data:await at(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}}}const _Ce={getItem:t=>Fp()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Fp()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Fp()&&globalThis.localStorage.removeItem(t)}};function UR(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function ECe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const md={debug:!!(globalThis&&Fp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zL extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class CCe extends zL{}async function xCe(t,e,n){md.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),md.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){md.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{md.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw md.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new CCe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(md.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}ECe();const SCe={url:$Ee,storageKey:DEe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jEe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function LR(t,e,n){return await n()}class am{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=am.nextInstanceID,am.nextInstanceID+=1,this.instanceID>0&&Si()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},SCe),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new bCe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=BL(s.fetch),this.lock=s.lock||LR,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Si()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=xCe:this.lock=LR,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Fp()?this.storage=_Ce:(this.memoryStorage={},this.storage=UR(this.memoryStorage)):(this.memoryStorage={},this.storage=UR(this.memoryStorage)),Si()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${jL}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ZEe(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Si()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),zEe(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return tt(n)?{error:n}:{error:new LL("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Go}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(tt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await pd(this.storage,this.storageKey)),i=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:Go})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await at(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Go})}else throw new aw("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(tt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:jR})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await at(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:jR})}else throw new aw("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ow}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:w,wallet:y,statement:b,options:v}=e;let E;if(Si())if(typeof y=="object")E=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))E=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=y}const _=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const S=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),b?{statement:b}:null));let x;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")x=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)x=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)p=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),m=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const S=await E.signMessage(new TextEncoder().encode(p),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=S}}try{const{data:w,error:y}=await at(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:YEe(m)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Go});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new ow}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(tt(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const n=await lw(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await at(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Go});if(await uw(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ow}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(tt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await at(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Go}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ow}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await pd(this.storage,this.storageKey));const{error:d}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await at(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new aw("You must provide either an email or phone number.")}catch(a){if(tt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await at(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Go});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(tt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await pd(this.storage,this.storageKey)),await at(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:gCe})}catch(i){if(tt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ga;const{error:s}=await at(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(tt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await at(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await at(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new aw("You must provide either an email or phone number and a type")}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await lw(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<rE:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:cc}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ga}:await at(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:cc})})}catch(n){if(tt(n))return FEe(n)&&(await this._removeSession(),await uw(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ga;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await pd(this.storage,this.storageKey));const{data:l,error:u}=await at(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:cc});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ga;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=iE(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(tt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ga;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Si())throw new cw("No browser detected.");if(e.error||e.error_description||e.error_code)throw new cw(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new PR("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cw("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new PR("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new cw("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=Ed&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:m,error:w}=await this._getUser(i);if(w)throw w;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(tt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await lw(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(BEe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await uw(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=JEe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await pd(this.storage,this.storageKey,!0));try{return await at(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(tt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await at(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Si()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(tt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await at(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await tCe(async s=>(s>0&&await eCe(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await at(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Go})),(s,i)=>{const o=200*Math.pow(2,s);return i&&sE(i)&&Date.now()+o-r<Ed})}catch(r){if(this._debug(n,"error",r),tt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Si()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await lw(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<rE;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${rE}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),sE(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ga;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Tb;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ga;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),tt(i)){const o={session:null,error:i};return sE(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await FL(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await uw(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Si()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ed);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ed);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ed}ms, refresh threshold is ${wS} ticks`),s<=wS&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof zL)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Si()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await pd(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await at(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await at(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await at(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(tt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await at(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(tt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=iE(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+LEe>Date.now()))return r;const{data:s,error:i}=await at(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Bp("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Bp("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=iE(r);if(cCe(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=lCe(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,KEe(`${a}.${c}`)))throw new Bp("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}}am.nextInstanceID=0;const ACe=am;class ICe extends ACe{constructor(e){super(e)}}var TCe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class NCe{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=OEe(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:xEe,realtime:AEe,auth:Object.assign(Object.assign({},SEe),{storageKey:l}),global:CEe},d=REe(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=PEe(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new V_e(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new E_e(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new bEe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return TCe(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ICe({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new aEe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const PCe=(t,e,n)=>new NCe(t,e,n),kCe=void 0,OCe=void 0,xn=PCe(kCe,OCe,{realtime:{params:{eventsPerSecond:10}},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),RCe=[{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"}],$Ce="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",ts={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},aE={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},dw=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],DCe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],WL=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=Sm(),[i,o]=P.useState(""),[a,c]=P.useState(""),{writeContract:l,data:u}=wV(),{isLoading:d}=yV({hash:u}),h=async(H,K,re,ce)=>{try{console.log("[CONTRACT] Calling endGame with:",{inviteCode:H,winner:K,bluePlayer:re,redPlayer:ce});const pe=H.padEnd(6,"0").slice(0,6),Le=K==="blue"?re:ce;if(!Le){console.error("[CONTRACT] No winner address found");return}l({address:$Ce,abi:RCe,functionName:"endGame",args:[pe,Le]})}catch(pe){console.error("[CONTRACT] Error calling endGame:",pe)}},[f,p]=P.useState(dw),[m,w]=P.useState("blue"),[y,b]=P.useState(null),[v,E]=P.useState([]),[_,S]=P.useState([]),[x,A]=P.useState("Waiting for opponent..."),[C,k]=P.useState(ts.LOBBY),[O,M]=P.useState(""),[F,V]=P.useState(null),[N,T]=P.useState(null),[L,D]=P.useState(0),[$,U]=P.useState([]),[W,J]=P.useState(!1),[ie,ne]=P.useState(""),[se,we]=P.useState(0),[Y,X]=P.useState(!1),[oe,te]=P.useState(!1),[he,ze]=P.useState({show:!1,from:{row:0,col:0},to:{row:0,col:0}}),[Te,Ce]=P.useState(!1),[Ue,Je]=P.useState([]),[ft,yn]=P.useState(null),bt=P.useRef(null),lt=P.useRef(null),sn=()=>{X(!Y),Y?(document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")):(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"))},Qn=async()=>{try{const{data:H,error:K}=await xn.from("leaderboard").select("*").order("points",{ascending:!1}).limit(20);if(K){console.error("Error loading leaderboard:",K);return}H&&Je(H)}catch(H){console.error("Error loading leaderboard:",H)}},pr=async H=>{if(r)try{const K=Qi(r),{data:re}=await xn.from("leaderboard").select("*").eq("username",K).single(),ce=new Date().toISOString();if(re){const pe={wins:re.wins+(H==="win"?1:0),losses:re.losses+(H==="loss"?1:0),draws:re.draws+(H==="draw"?1:0),total_games:re.total_games+1,points:re.points+(H==="win"?3:H==="draw"?1:0),updated_at:ce},{error:Le}=await xn.from("leaderboard").update(pe).eq("username",K);Le&&console.error("Error updating score:",Le)}else{const pe={username:K,chain_type:"ethereum",wins:H==="win"?1:0,losses:H==="loss"?1:0,draws:H==="draw"?1:0,total_games:1,points:H==="win"?3:H==="draw"?1:0,updated_at:ce},{error:Le}=await xn.from("leaderboard").insert([pe]);Le&&console.error("Error creating new user score:",Le)}await Qn()}catch(K){console.error("Error updating score:",K)}},Hs=async()=>{try{const{data:H,error:K}=await xn.from("chess_games").select("*").eq("game_state","waiting").eq("is_public",!0).order("created_at",{ascending:!1});if(K){console.error("Error loading open games:",K);return}U(H||[])}catch(H){console.error("Error loading open games:",H)}},Tn=async()=>{if(!(!r||!ie||se<0)){J(!0);try{const H=`game_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,K={game_id:H,game_title:ie,bet_amount:se.toString(),blue_player:r,game_state:"waiting",board:JSON.stringify({positions:dw}),current_player:"blue",chain:"sanko",contract_address:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"},{data:re,error:ce}=await xn.from("chess_games").insert([K]).select().single();if(ce){console.error("Error creating game:",ce);return}M(H),V("blue"),D(se),k(ts.WAITING),A("Waiting for opponent to join..."),Vs(H)}catch(H){console.error("Error creating game:",H)}finally{J(!1)}}},gr=async H=>{if(r)try{const{data:K,error:re}=await xn.from("chess_games").update({red_player:r,game_state:"active"}).eq("game_id",H).select().single();if(re){console.error("Error joining game:",re);return}M(H),V("red"),D(parseFloat(K.bet_amount)),T(K.blue_player),k(ts.ACTIVE),A("Game started!"),Vs(H)}catch(K){console.error("Error joining game:",K)}},Vs=H=>{bt.current&&xn.removeChannel(bt.current);const K=xn.channel(`chess_game_${H}`).on("postgres_changes",{event:"*",schema:"public",table:"chess_games",filter:`game_id=eq.${H}`},re=>{if(console.log("Game update received:",re),re.new){const ce=JSON.parse(re.new.board),pe=Array.isArray(ce.positions)?ce.positions:dw;p(pe),w(re.new.current_player||"blue"),re.new.game_state==="active"?(k(ts.ACTIVE),A("Game in progress")):re.new.game_state==="finished"&&(k(ts.FINISHED),A("Game finished")),re.new.blue_player&&re.new.red_player&&T(F==="blue"?re.new.red_player:re.new.blue_player)}}).subscribe();bt.current=K},Qi=H=>`${H.slice(0,6)}...${H.slice(-4)}`,Nn=H=>H&&H===H.toUpperCase()?"red":"blue",Ro=(H,K)=>{const re=K==="red"?"K":"k";let ce=-1,pe=-1;for(let He=0;He<8;He++){for(let pt=0;pt<8;pt++)if(H[He][pt]===re){ce=He,pe=pt;break}if(ce!==-1)break}return ce===-1?!1:Hm(ce,pe,K==="red"?"blue":"red",H)},Hm=(H,K,re,ce)=>{for(let pe=0;pe<8;pe++)for(let Le=0;Le<8;Le++){const He=ce[pe][Le];if(He&&Nn(He)===re&&of(He,pe,Le,H,K,!1,re,ce,!0))return!0}return!1},cl=(H,K,re,ce,pe,Le=f)=>{const He=Le[H][K];if(!He)return!1;const pt=Le.map(kr=>[...kr]);return pt[re][ce]=He,pt[H][K]=null,Ro(pt,pe)},tn=(H,K,re,ce,pe,Le)=>{const He=H==="red"?-1:1,pt=H==="red"?6:1;return re===pe&&ce===K+He?Le[ce][pe]===null:re===pe&&K===pt&&ce===K+2*He?Le[K+He][re]===null&&Le[ce][pe]===null:Math.abs(re-pe)===1&&ce===K+He?Le[ce][pe]!==null&&Nn(Le[ce][pe])!==H:!1},rf=(H,K,re,ce,pe)=>H===re||K===ce,Vm=(H,K,re,ce)=>{const pe=Math.abs(H-re),Le=Math.abs(K-ce);return pe===2&&Le===1||pe===1&&Le===2},mi=(H,K,re,ce,pe)=>Math.abs(H-re)===Math.abs(K-ce),Nb=(H,K,re,ce,pe)=>rf(H,K,re,ce)||mi(H,K,re,ce),Pb=(H,K,re,ce,pe)=>{const Le=Math.abs(K-ce),He=Math.abs(re-pe);return Le<=1&&He<=1},sf=(H,K,re,ce,pe)=>{const Le=H===re?0:(re-H)/Math.abs(re-H),He=K===ce?0:(ce-K)/Math.abs(ce-K);let pt=H+Le,kr=K+He;for(;pt!==re||kr!==ce;){if(pe[pt][kr]!==null)return!1;pt+=Le,kr+=He}return!0},of=(H,K,re,ce,pe,Le=!0,He=Nn(H),pt=f,kr=!1)=>{if(!H)return!1;const _s=Nn(H),lf=pt[ce][pe];if(lf&&Nn(lf)===_s)return!1;let Zi=!1;switch(H.toUpperCase()){case"P":Zi=tn(_s,K,re,ce,pe,pt);break;case"R":Zi=rf(K,re,ce,pe)&&sf(K,re,ce,pe,pt);break;case"N":Zi=Vm(K,re,ce,pe);break;case"B":Zi=mi(K,re,ce,pe)&&sf(K,re,ce,pe,pt);break;case"Q":Zi=Nb(K,re,ce,pe)&&sf(K,re,ce,pe,pt);break;case"K":Zi=Pb(_s,K,re,ce,pe);break}return!(!Zi||Le&&cl(K,re,ce,pe,_s,pt))},af=(H,K=f,re=m)=>{const ce=K[H.row][H.col];if(!ce||Nn(ce)!==re)return[];const pe=[];for(let Le=0;Le<8;Le++)for(let He=0;He<8;He++)of(ce,H.row,H.col,Le,He,!0,re,K)&&pe.push({row:Le,col:He});return pe},cf=(H,K=f)=>{if(!Ro(K,H))return!1;for(let re=0;re<8;re++)for(let ce=0;ce<8;ce++){const pe=K[re][ce];if(pe&&Nn(pe)===H&&af({row:re,col:ce},K,H).length>0)return!1}return!0},Gm=(H,K=f)=>{if(Ro(K,H))return!1;for(let re=0;re<8;re++)for(let ce=0;ce<8;ce++){const pe=K[re][ce];if(pe&&Nn(pe)===H&&af({row:re,col:ce},K,H).length>0)return!1}return!0},kb=(H,K)=>{if(C!==ts.ACTIVE||!F)return;const re=f[H][K],ce=re?Nn(re):null;if(m===F){if(re&&ce===F){b({row:H,col:K});const pe=af({row:H,col:K});E(pe);return}if(y&&v.some(pe=>pe.row===H&&pe.col===K)){Km(y,{row:H,col:K}),b(null),E([]);return}b(null),E([])}},Km=async(H,K)=>{if(!F||m!==F)return;const re=f[H.row][H.col];if(re){if(re.toUpperCase()==="P"&&(F==="red"&&K.row===0||F==="blue"&&K.row===7)){ze({show:!0,from:H,to:K});return}await Ji(H,K)}},Ji=async(H,K,re="q")=>{if(!F||m!==F)return;const ce=f[H.row][H.col];if(!ce)return;const pe=f.map(_s=>[..._s]);let Le=ce;ce.toUpperCase()==="P"&&(F==="red"&&K.row===0||F==="blue"&&K.row===7)&&(Le=F==="red"?re.toUpperCase():re.toLowerCase()),pe[K.row][K.col]=Le,pe[H.row][H.col]=null;const He=m==="blue"?"red":"blue";let pt="active",kr=null;cf(He,pe)?(pt="finished",kr=m,A(`${m==="red"?"Red":"Blue"} wins by checkmate!`),ll(),await pr(m===F?"win":"loss")):Gm(He,pe)&&(pt="finished",A("Game ended in stalemate"),await pr("draw"));try{const{error:_s}=await xn.from("chess_games").update({board:JSON.stringify({positions:pe}),current_player:He,game_state:pt,winner:kr,last_move:JSON.stringify({from:H,to:K}),updated_at:new Date().toISOString()}).eq("game_id",O);_s&&console.error("Error updating game:",_s)}catch(_s){console.error("Error updating game:",_s)}yn({from:H,to:K}),ze({show:!1,from:{row:0,col:0},to:{row:0,col:0}})},ll=()=>{Ce(!0),lt.current&&clearTimeout(lt.current),lt.current=setTimeout(()=>{Ce(!1)},5e3)},Ym=async(H,K)=>{if(r)try{let re="finished",ce=null,pe="";switch(K){case"blue_win":ce="blue",pe="Blue wins (forced resolution)";break;case"red_win":ce="red",pe="Red wins (forced resolution)";break;case"draw":pe="Game ended in draw (forced resolution)";break;case"refund":re="refunded",pe="Game refunded (forced resolution)";break}const{error:Le}=await xn.from("chess_games").update({game_state:re,winner:ce,updated_at:new Date().toISOString()}).eq("game_id",H);if(Le){console.error("Error forcing game resolution:",Le);return}K!=="refund"&&(K==="blue_win"?await pr(r==="0xF8A323e916921b0a82Ebcb562a3441e46525822E"?"win":"loss"):K==="red_win"?await pr(r==="0x9CCa475416BC3448A539E30369792A090859De9d"?"win":"loss"):K==="draw"&&await pr("draw")),alert(`Game resolved: ${pe}`),Hs()}catch(re){console.error("Error forcing game resolution:",re)}},Ob=async H=>{try{const{data:K,error:re}=await xn.from("chess_games").select("*").eq("game_id",H).single();if(re){console.error("Error loading game:",re);return}if(!K){alert("Game not found");return}M(H),V(r===K.blue_player?"blue":"red"),D(parseFloat(K.bet_amount)),T(r===K.blue_player?K.red_player:K.blue_player),k(ts.ACTIVE),A("Game resumed"),console.log("[DEBUG] Resuming game with board data:",K.board,"Type:",typeof K.board);let ce;try{ce=typeof K.board=="string"?JSON.parse(K.board):K.board,console.log("[DEBUG] Parsed board object:",ce)}catch(He){console.log("[DEBUG] JSON parse failed, using data as-is:",He),ce=K.board}const pe=Array.isArray(ce==null?void 0:ce.positions)?ce.positions:Array.isArray(ce)?ce:dw;console.log("[DEBUG] Final board state:",pe),p(pe),w(K.current_player||"blue");const Le=K.current_player||"blue";if(console.log("[DEBUG] Checking game state for player:",Le),K.game_state==="active"){if(cf(Le,pe)){console.log("[DEBUG] Checkmate detected for",Le);const He=Le==="blue"?"red":"blue";A(`${He==="red"?"Red":"Blue"} wins by checkmate!`),k(ts.FINISHED);const{error:pt}=await xn.from("chess_games").update({game_state:"finished",winner:He,game_result:`${He}_win`}).match({game_id:H,game_state:"active"});if(pt){console.error("Error updating game state:",pt),console.log("[CONTRACT] Database update failed, but attempting contract payout for winner:",He);try{await h(H,He,K.blue_player,K.red_player),console.log("[CONTRACT] Contract call initiated successfully")}catch(kr){console.error("[CONTRACT] Error calling contract:",kr),confirm("Contract call failed. Would you like to manually resolve the game?")&&await Ym(H,He==="blue"?"blue_win":"red_win")}}else{console.log("[DEBUG] Game state updated successfully"),await pr(He===F?"win":"loss"),await Qn(),ll(),console.log("[CONTRACT] Triggering payout for winner:",He);try{await h(H,He,K.blue_player,K.red_player),console.log("[CONTRACT] Contract call initiated successfully")}catch(kr){console.error("[CONTRACT] Error calling contract:",kr),confirm("Contract call failed. Would you like to manually resolve the game?")&&await Ym(H,He==="blue"?"blue_win":"red_win")}}return}if(Gm(Le,pe)){console.log("[DEBUG] Stalemate detected"),A("Game ended in stalemate"),k(ts.FINISHED);const{error:He}=await xn.from("chess_games").update({game_state:"finished",game_result:"draw"}).match({game_id:H,game_state:"active"});He?console.error("Error updating game state:",He):(console.log("[DEBUG] Game state updated successfully"),await pr("draw"),await Qn());return}}else if(K.game_state==="finished"){console.log("[DEBUG] Game already finished, showing result"),k(ts.FINISHED),K.winner?A(`${K.winner==="red"?"Red":"Blue"} wins!`):K.game_result==="draw"&&A("Game ended in draw");return}Vs(H)}catch(K){console.error("Error resuming game:",K)}},Qm=async()=>{try{const{data:H,error:K}=await xn.from("chess_games").select("*").eq("game_state","active").or(`blue_player.eq.${r},red_player.eq.${r}`);if(K){console.error("Error checking stuck games:",K);return}if(H&&H.length>0){const re=H[0];(re.blue_player===r||re.red_player===r)&&confirm(`You have an active game (${re.game_id}). Would you like to resume it?`)&&Ob(re.game_id)}}catch(H){console.error("Error checking stuck games:",H)}},Bu=(H,K)=>{const re=f[H][K],ce=(y==null?void 0:y.row)===H&&(y==null?void 0:y.col)===K,pe=v.some(pt=>pt.row===H&&pt.col===K),Le=ft&&(ft.from.row===H&&ft.from.col===K||ft.to.row===H&&ft.to.col===K),He=re&&re.toUpperCase()==="K"&&Ro(f,Nn(re));return g.jsxs("div",{className:`square ${ce?"selected":""} ${pe?"legal-move":""} ${Le?"last-move":""} ${He?"square-in-check":""}`,onClick:()=>kb(H,K),children:[re&&g.jsx("div",{className:"piece",style:{backgroundImage:aE[re]?`url(${aE[re]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),pe&&g.jsx("div",{className:"legal-move-indicator"})]},`${H}-${K}`)},Jm=()=>{if(!he.show)return null;const H=F==="red"?["Q","R","B","N"]:["q","r","b","n"];return g.jsx("div",{className:"promotion-dialog",children:g.jsxs("div",{className:"promotion-content",children:[g.jsx("h3",{children:"Choose promotion piece"}),g.jsx("div",{className:"promotion-pieces",children:H.map(K=>g.jsx("div",{className:"promotion-piece",onClick:()=>Ji(he.from,he.to,K.toLowerCase()),children:g.jsx("img",{src:aE[K],alt:K})},K))})]})})},Zm=()=>g.jsxs("div",{className:"piece-gallery",children:[g.jsx("h3",{children:"Chess Pieces"}),g.jsx("div",{className:"piece-gallery-grid",children:DCe.map(H=>g.jsxs("div",{className:"piece-gallery-item",children:[g.jsx("img",{src:H.img,alt:H.name,className:"piece-gallery-img"}),g.jsx("div",{className:"piece-gallery-name",children:H.name}),g.jsx("div",{className:"piece-gallery-desc",children:H.desc})]},H.key))})]}),Xm=()=>g.jsxs("div",{className:"chess-multiplayer-lobby",children:[g.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"status-bar",children:["Connected: ",Qi(r)]}),g.jsxs("div",{className:"lobby-content",children:[g.jsxs("div",{className:"open-games",children:[g.jsx("h3",{children:"Open Games"}),g.jsxs("div",{className:"games-list",children:[$.map(H=>g.jsxs("div",{className:"game-item",children:[g.jsxs("div",{className:"game-info",children:[g.jsx("div",{className:"game-id",children:H.game_title||"Untitled Game"}),g.jsxs("div",{className:"wager",children:["Wager: ",parseFloat(H.bet_amount)," ETH"]}),g.jsxs("div",{className:"title",children:["Created by: ",Qi(H.blue_player)]})]}),g.jsx("button",{className:"join-btn",onClick:()=>gr(H.game_id),children:"Join Game"})]},H.game_id)),$.length===0&&g.jsx("div",{className:"no-games",children:"No open games available"})]})]}),g.jsxs("div",{className:"actions",children:[g.jsx("button",{className:"create-btn",onClick:()=>J(!0),disabled:W,children:"Create New Game"}),g.jsx("button",{className:"resume-btn",onClick:Qm,style:{marginTop:"10px",background:"rgba(0, 255, 0, 0.1)",border:"2px solid #00ff00",color:"#00ff00",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"Check for Active Games"})]}),W&&g.jsxs("div",{className:"create-form",children:[g.jsx("h3",{children:"Create New Game"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Game Title:"}),g.jsx("input",{type:"text",value:ie,onChange:H=>ne(H.target.value),placeholder:"Enter game title"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Wager (ETH):"}),g.jsx("input",{type:"number",value:se,onChange:H=>we(Number(H.target.value)),placeholder:"0.01",min:"0",step:"0.01"})]}),g.jsxs("div",{className:"form-actions",children:[g.jsx("button",{className:"create-confirm-btn",onClick:Tn,disabled:!ie||se<0,children:"Create Game"}),g.jsx("button",{className:"cancel-btn",onClick:()=>J(!1),children:"Cancel"})]})]})]})]}):g.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),Rb=()=>g.jsxs("div",{className:"chess-multiplayer-waiting",children:[g.jsx("h2",{children:"Waiting for Opponent"}),g.jsxs("div",{className:"game-code",children:["Game ID: ",g.jsx("strong",{children:O})]}),g.jsxs("div",{className:"game-info",children:[g.jsxs("p",{children:["Wager: ",L," ETH"]}),g.jsx("p",{children:"Share this game ID with your opponent"})]})]}),$b=()=>g.jsxs("div",{className:"chess-game",children:[g.jsxs("div",{className:"chess-header",children:[g.jsx("h2",{children:"Multiplayer Chess"}),g.jsxs("div",{className:"chess-controls",children:[g.jsx("button",{onClick:sn,children:"🌙"}),e&&g.jsx("button",{onClick:e,children:"_"}),g.jsx("button",{onClick:t,children:"×"})]})]}),g.jsxs("div",{className:"game-info",children:[g.jsx("span",{className:"status",children:x}),g.jsxs("span",{className:"current-player",children:["Current: ",m==="red"?"Red":"Blue"]}),g.jsxs("span",{className:"wager-display",children:["Wager: ",L," ETH"]}),N&&g.jsxs("span",{children:["Opponent: ",Qi(N)]})]}),g.jsxs("div",{className:"game-stable-layout",children:[g.jsx("div",{className:"left-sidebar",children:g.jsxs("div",{className:"move-history",children:[g.jsx("h4",{children:"Move History"}),g.jsx("div",{className:"moves",children:_.slice().reverse().map((H,K)=>g.jsx("div",{className:"move",children:H},_.length-1-K))})]})}),g.jsxs("div",{className:"center-area",children:[g.jsx("div",{className:"chessboard-container",children:g.jsx("div",{className:"chessboard",children:Array.from({length:8},(H,K)=>g.jsx("div",{className:"board-row",children:Array.from({length:8},(re,ce)=>Bu(K,ce))},K))})}),g.jsx("div",{className:"game-controls",children:g.jsxs("button",{onClick:()=>te(!oe),children:[oe?"Hide":"Show"," Piece Gallery"]})})]}),g.jsx("div",{className:"right-sidebar",children:g.jsxs("div",{className:"leaderboard",children:[g.jsx("h3",{children:"Leaderboard"}),g.jsx("div",{className:"leaderboard-table",children:g.jsxs("table",{children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"#"}),g.jsx("th",{children:"Player"}),g.jsx("th",{children:"W"}),g.jsx("th",{children:"L"}),g.jsx("th",{children:"D"}),g.jsx("th",{children:"Pts"})]})}),g.jsx("tbody",{children:Ue.map((H,K)=>g.jsxs("tr",{children:[g.jsx("td",{children:K+1}),g.jsx("td",{children:H.username}),g.jsx("td",{children:H.wins}),g.jsx("td",{children:H.losses}),g.jsx("td",{children:H.draws}),g.jsx("td",{children:H.points})]},H.username))})]})})]})})]}),oe&&g.jsx("div",{className:"piece-gallery-panel",children:Zm()}),Jm(),Te&&g.jsx("div",{className:"victory-celebration",children:g.jsxs("div",{className:"victory-content",children:[g.jsx("h2",{children:"🎉 Victory! 🎉"}),g.jsx("p",{children:"Congratulations on your win!"})]})})]});switch(P.useEffect(()=>{Qn(),Hs(),Qm();const H=setInterval(Hs,5e3);return()=>{clearInterval(H),bt.current&&xn.removeChannel(bt.current),lt.current&&clearTimeout(lt.current)}},[]),C){case ts.LOBBY:return Xm();case ts.WAITING:return Rb();case ts.ACTIVE:case ts.FINISHED:return $b();default:return Xm()}},jCe={AI:"ai"},hw={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},MR=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],UCe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],LCe=()=>{const[t,e]=P.useState(!1),n=P.useRef(null),r=P.useRef(!1);P.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=document.createElement("script");a.src="/stockfish.js",a.onload=()=>{if(console.log("[DEBUG] LawbBot script loaded, initializing..."),typeof window<"u"&&typeof window.Stockfish=="function"){const c=window.Stockfish;c?c().then(l=>{console.log("[DEBUG] LawbBot initialized successfully"),l instanceof Worker?(n.current=l,e(!0),r.current=!1,l.postMessage("setoption name Threads value 4"),l.postMessage("setoption name Hash value 128"),l.postMessage("setoption name MultiPV value 1")):(console.error("[DEBUG] LawbBot: Stockfish is not a Worker instance"),e(!1),r.current=!1)}).catch(l=>{console.error("[DEBUG] LawbBot initialization failed:",l),e(!1),r.current=!1}):(console.error("[DEBUG] LawbBot: Stockfish is not defined as a function"),e(!1),r.current=!1)}else console.error("[DEBUG] LawbBot not found in window object"),e(!1),r.current=!1},a.onerror=c=>{console.error("[DEBUG] Failed to load LawbBot script:",c),e(!1),r.current=!1},document.head.appendChild(a)}catch(a){console.error("[DEBUG] Failed to create LawbBot script:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=P.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(m){console.warn("[DEBUG] Error removing message listener:",m)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=P.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},MCe=()=>{const[t,e]=P.useState(null),[n,r]=P.useState(!1),s=P.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=P.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},BCe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=Sm(),[s,i]=P.useState(jCe.AI),[o,a]=P.useState(()=>JSON.parse(JSON.stringify(MR))),[c,l]=P.useState("blue"),[u,d]=P.useState(null),[h,f]=P.useState("active"),[p,m]=P.useState("hard"),[w,y]=P.useState("Connect wallet to play"),[b,v]=P.useState([]),[E,_]=P.useState([]),[S,x]=P.useState([]),[A,C]=P.useState(null),[k,O]=P.useState(!1),[M,F]=P.useState(!1),[V,N]=P.useState(null),[T,L]=P.useState(null),[D]=P.useState(""),[$]=P.useState(.1),[U,W]=P.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),J=P.useRef(null),ie=P.useRef(!1),ne=P.useRef(o),se=P.useRef(null),we=P.useRef(null),Y=P.useRef(!1),X=P.useRef(!1),[oe,te]=P.useState(!1),[he,ze]=P.useState(!1),[Te,Ce]=P.useState(!1),[Ue,Je]=P.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),ft=()=>{Je(j=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!j)),!j))},{stockfishReady:yn}=LCe(),{getOpeningData:bt}=MCe(),[lt,sn]=P.useState("loading"),[Qn,pr]=P.useState(!1),[Hs,Tn]=P.useState([]),[gr,Vs]=P.useState(!1),[Qi,Nn]=P.useState("/images/chessboard1.png"),Ro=()=>{const j=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],z=Math.floor(Math.random()*j.length),q=j[z];return console.log("[DEBUG] Random chessboard selected:",q,"(index:",z,")"),q};P.useEffect(()=>{if(yn)sn("ready");else{const j=window.setTimeout(()=>{yn||(sn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(j)}},[yn]),P.useEffect(()=>{ne.current=o},[o]),P.useEffect(()=>{r?y("Select game mode"):(y("Connect wallet to play"),O(!1))},[r]),P.useEffect(()=>(!J.current&&typeof Worker<"u"&&(J.current=new Worker("/aiWorker.js"),J.current.onmessage=j=>{console.log("[DEBUG] AI worker response received:",j.data);const{move:z,nodes:q}=j.data;z&&ie.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",z),console.log("[DEBUG] AI searched",q,"nodes"),ie.current=!1,we.current&&(window.clearTimeout(we.current),we.current=null),se.current&&se.current(z.from,z.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},J.current.onerror=j=>{console.error("[DEBUG] AI worker error:",j),y("AI worker error - using fallback mode"),ie.current=!1}),()=>{J.current&&(J.current.terminate(),J.current=null),we.current&&(window.clearTimeout(we.current),we.current=null)}),[]),P.useEffect(()=>{Hm()},[]);const Hm=async()=>{try{const j=new Promise((Q,G)=>window.setTimeout(()=>G(new Error("Database timeout")),1e4)),z=xn.from("leaderboard").select("*").order("points",{ascending:!1}),q=await Promise.race([z,j]);if(q.error)throw q.error;q.data&&_(q.data),console.log("Leaderboard data loaded:",q.data)}catch(j){y("Failed to load leaderboard"),console.error("Leaderboard error:",j)}},cl=async j=>{if(console.log("[DEBUG] updateScore called with:",j),!r){console.log("[DEBUG] No wallet address, returning");return}try{const z=r.toLowerCase(),{data:q}=await xn.from("leaderboard").select("*").eq("username",z).maybeSingle();console.log("[DEBUG] Existing record:",q);const Q=q!=null&&q.wins?Number(q.wins):0,G=q!=null&&q.losses?Number(q.losses):0,be=q!=null&&q.draws?Number(q.draws):0,Ee=q!=null&&q.total_games?Number(q.total_games):0,je=q!=null&&q.points?Number(q.points):0;console.log("[DEBUG] Score calculation:",{currentWins:Q,currentLosses:G,currentDraws:be,currentTotalGames:Ee,currentPoints:je,gameResult:j});const gt=Q+(j==="win"?1:0),Tt=G+(j==="loss"?1:0),En=be+(j==="draw"?1:0),Ot=Ee+1;let uf=0;if(j==="win")switch(p){case"easy":uf=10;break;default:uf=1}else j==="draw"&&(uf=1);const Lb=je+uf;if(console.log("[DEBUG] New values:",{newWins:gt,newLosses:Tt,newDraws:En,newTotalGames:Ot,newPoints:Lb,pointsToAdd:uf}),q){const{error:df}=await xn.from("leaderboard").update({wins:gt,losses:Tt,draws:En,total_games:Ot,points:Lb,updated_at:new Date().toISOString()}).eq("username",z);if(df){console.error("[DEBUG] Error updating leaderboard:",df);return}}else{const{error:df}=await xn.from("leaderboard").insert({username:z,chain_type:"ethereum",wins:gt,losses:Tt,draws:En,total_games:Ot,points:Lb,updated_at:new Date().toISOString()});if(df){console.error("[DEBUG] Error inserting leaderboard record:",df);return}}console.log("[DEBUG] Leaderboard updated successfully"),await Hm()}catch(z){console.error("[DEBUG] Error in updateScore:",z)}},tn=j=>j&&j===j.toUpperCase()?"red":"blue",rf=(j,z)=>j>=0&&j<8&&z>=0&&z<8,Vm=(j,z)=>`${String.fromCharCode(97+z)}${8-j}`,mi=(j,z)=>{const q=z==="blue"?"k":"K";let Q=null;for(let Ee=0;Ee<8;Ee++){for(let je=0;je<8;je++)if(j[Ee][je]===q){Q={row:Ee,col:je};break}if(Q)break}if(!Q)return console.log(`King not found for ${z}`),!1;const G=z==="blue"?"red":"blue",be=Nb(Q.row,Q.col,G,j);return console.log(`${z} king at ${Q.row},${Q.col} under attack: ${be}`),be},Nb=(j,z,q,Q)=>{for(let G=0;G<8;G++)for(let be=0;be<8;be++){const Ee=Q[G][be];if(Ee&&tn(Ee)===q&&Ji(Ee,G,be,j,z,!1,q,Q,!0))return!0}return!1},Pb=(j,z,q,Q,G,be=o)=>{const Ee=be.map(gt=>[...gt]),je=Ee[j][z];return Ee[q][Q]=je,Ee[j][z]=null,mi(Ee,G)},sf=(j,z,q,Q,G,be)=>{const Ee=j==="blue"?-1:1,je=j==="blue"?6:1;if(!rf(Q,G)||j==="blue"&&Q>=z||j==="red"&&Q<=z)return!1;const gt=Math.abs(Q-z),Tt=Math.abs(G-q);if((gt===1&&Tt===0||gt===2&&Tt===0&&z===je||gt===1&&Tt===1)&&gt<=2&&Tt<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:j,from:`${z},${q}`,to:`${Q},${G}`}),q===G&&Q===z+Ee)return be[Q][G]===null;if(q===G&&z===je&&Q===z+2*Ee)return be[z+Ee][q]===null&&be[Q][G]===null;if(Math.abs(q-G)===1&&Q===z+Ee){const Ot=be[Q][G];return Ot!==null&&tn(Ot)!==j}if(Math.abs(q-G)===1&&Q===z+Ee){const Ot=be[z][G];if(Ot&&tn(Ot)!==j&&Ot.toLowerCase()==="p"&&U.lastPawnDoubleMove&&U.lastPawnDoubleMove.row===z&&U.lastPawnDoubleMove.col===G)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},of=(j,z,q,Q,G)=>j!==q&&z!==Q?!1:Km(j,z,q,Q,G),af=(j,z,q,Q)=>{const G=Math.abs(j-q),be=Math.abs(z-Q);return G===2&&be===1||G===1&&be===2},cf=(j,z,q,Q,G)=>Math.abs(j-q)!==Math.abs(z-Q)?!1:Km(j,z,q,Q,G),Gm=(j,z,q,Q,G)=>of(j,z,q,Q,G)||cf(j,z,q,Q,G),kb=(j,z,q,Q,G)=>{const be=Math.abs(z-Q),Ee=Math.abs(q-G);if(be<=1&&Ee<=1)return!0;if(be===0&&Ee===2){if(j==="blue"&&!U.blueKingMoved){if(G===6&&!U.blueRooksMove.right||G===2&&!U.blueRooksMove.left)return!0}else if(j==="red"&&!U.redKingMoved&&(G===6&&!U.redRooksMove.right||G===2&&!U.redRooksMove.left))return!0}return!1},Km=(j,z,q,Q,G)=>{const be=j===q?0:(q-j)/Math.abs(q-j),Ee=z===Q?0:(Q-z)/Math.abs(Q-z);let je=j+be,gt=z+Ee;for(;je!==q||gt!==Q;){if(G[je][gt]!==null)return!1;je+=be,gt+=Ee}return!0},Ji=(j,z,q,Q,G,be=!0,Ee=tn(j),je=o,gt=!1)=>{if(!rf(Q,G))return gt||console.log("[ILLEGAL MOVE] Out of board:",{piece:j,startRow:z,startCol:q,endRow:Q,endCol:G}),!1;const Tt=je[Q][G];if(Tt&&tn(Tt)===Ee)return gt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:j,startRow:z,startCol:q,endRow:Q,endCol:G}),!1;const En=j.toLowerCase();let Ot=!1;switch(En){case"p":Ot=sf(Ee,z,q,Q,G,je);break;case"r":Ot=of(z,q,Q,G,je);break;case"n":Ot=af(z,q,Q,G);break;case"b":Ot=cf(z,q,Q,G,je);break;case"q":Ot=Gm(z,q,Q,G,je);break;case"k":Ot=kb(Ee,z,q,Q,G);break}return Ot?Ot&&be&&Pb(z,q,Q,G,Ee,je)?(gt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:j,startRow:z,startCol:q,endRow:Q,endCol:G}),!1):Ot:(gt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:j,startRow:z,startCol:q,endRow:Q,endCol:G,playerColor:Ee,pieceType:En,targetPiece:je[Q][G],targetPieceColor:je[Q][G]?tn(je[Q][G]):null}),!1)},ll=(j,z=o,q=c)=>{const Q=[],G=z[j.row][j.col];if(!G||tn(G)!==q)return Q;const be=G.toLowerCase();if(be==="p"){const Ee=q==="blue"?-1:1,je=q==="blue"?6:1,gt=j.row+Ee;if(gt>=0&&gt<8&&Ji(G,j.row,j.col,gt,j.col,!0,q,z,!0)&&Q.push({row:gt,col:j.col}),j.row===je){const Tt=j.row+2*Ee;Tt>=0&&Tt<8&&Ji(G,j.row,j.col,Tt,j.col,!0,q,z,!0)&&Q.push({row:Tt,col:j.col})}for(const Tt of[-1,1]){const En=j.col+Tt,Ot=j.row+Ee;En>=0&&En<8&&Ot>=0&&Ot<8&&Ji(G,j.row,j.col,Ot,En,!0,q,z,!0)&&Q.push({row:Ot,col:En})}}else if(be==="n"){const Ee=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[je,gt]of Ee){const Tt=j.row+je,En=j.col+gt;Tt>=0&&Tt<8&&En>=0&&En<8&&Ji(G,j.row,j.col,Tt,En,!0,q,z,!0)&&Q.push({row:Tt,col:En})}}else for(let Ee=0;Ee<8;Ee++)for(let je=0;je<8;je++)Ji(G,j.row,j.col,Ee,je,!0,q,z,!0)&&Q.push({row:Ee,col:je});return Q},Ym=(j,z=o)=>{if(!mi(z,j))return!1;for(let q=0;q<8;q++)for(let Q=0;Q<8;Q++){const G=z[q][Q];if(G&&tn(G)===j&&ll({row:q,col:Q},z,j).length>0)return!1}return!0},Ob=(j,z=o)=>{if(mi(z,j))return!1;for(let q=0;q<8;q++)for(let Q=0;Q<8;Q++){const G=z[q][Q];if(G&&tn(G)===j&&ll({row:q,col:Q},z,j).length>0)return!1}return!0},Qm=(j,z)=>{if(h!=="active"||ie.current)return;const q=o[j][z],Q=q?tn(q):null;if(u&&S.some(G=>G.row===j&&G.col===z)){Bu(u,{row:j,col:z});return}if(q&&Q===c){const G=ll({row:j,col:z});d({row:j,col:z}),x(G);return}d(null),x([])},Bu=(j,z,q=!1)=>{const Q=o[j.row][j.col];if(console.log("[MOVE ATTEMPT]",{from:j,to:z,piece:Q,isAIMove:q,board:JSON.parse(JSON.stringify(o)),moveHistory:b}),!!Q){if(Q.toLowerCase()==="p"&&(tn(Q)==="blue"&&z.row===0||tn(Q)==="red"&&z.row===7)){N({from:j,to:z}),F(!0);return}lf(j,z,"q",q)}};se.current=Bu;const Jm=P.useCallback((j,z,q=!1)=>{Vs(!0);const Q=o.map(Ee=>[...Ee]),G=Q[j.row][j.col];if(!G)return;Q[z.row][z.col]=G,Q[j.row][j.col]=null,pt(Q,j,z,G);const be=kr(j,z);if(v(Ee=>{const je=[...Ee,be];return console.log("[MOVE HISTORY UPDATED]",je),je}),C({from:j,to:z}),d(null),x([]),b.length<10&&!q){const Ee=BR(Q,c==="blue"?"red":"blue");bt(Ee).then(je=>{je&&je.moves&&je.moves.length>0&&(Tn(je.moves.slice(0,3)),pr(!0),setTimeout(()=>pr(!1),5e3))})}_s(j,z,G),l(Ee=>{const je=Ee==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",je),Zm(Q,je),je}),Zm(Q,c==="blue"?"red":"blue"),a(Q),ie.current=!1,Y.current=!1,X.current=!1,Vs(!1)},[o,c,b,bt]);P.useEffect(()=>{if(!ie.current&&s==="ai"&&c==="red"&&!Y.current&&!gr)if(ie.current=!0,p==="easy")setTimeout(()=>{const j=Xm(o);j?Bu(j.from,j.to,!0):ie.current=!1},600);else{y("AI is calculating...");const j=BR(o,c);if(X.current)return;X.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:j,difficulty:p,movetime:3e3})}).then(q=>{if(q.ok)return q.json();throw new Error("API call failed")}).then(q=>{const Q=q.bestmove||q.move;if(Q&&Q!=="(none)"&&Q.length===4){const G=Q.charCodeAt(0)-97,be=parseInt(Q[1]),Ee=Q.charCodeAt(2)-97,je=parseInt(Q[3]),gt=8-be,Tt=8-je;if(G>=0&&G<8&&gt>=0&&gt<8&&Ee>=0&&Ee<8&&Tt>=0&&Tt<8){const En={from:{row:gt,col:G},to:{row:Tt,col:Ee}},Ot=o[gt][G];Ot&&tn(Ot)==="red"&&Ji(Ot,gt,G,Tt,Ee,!0,"red",o)?Bu(En.from,En.to,!0):(ie.current=!1,X.current=!1)}else ie.current=!1,X.current=!1}else ie.current=!1,X.current=!1}).catch(()=>{y("AI error. Please try again."),ie.current=!1,X.current=!1})}},[c,s,p,o,U,yn]);const Zm=(j,z)=>{console.log("Checking game end for player:",z);const q=j.some(G=>G.some(be=>be==="k")),Q=j.some(G=>G.some(be=>be==="K"));if(!q)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),y("King captured! Red wins!"),cl("loss"),Ce(!0),setTimeout(()=>Ce(!1),3e3),"checkmate";if(!Q)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),y("King captured! You win!"),cl("win"),Ce(!0),setTimeout(()=>Ce(!1),3e3),"checkmate";if(console.log("Is king in check:",mi(j,z)),Ym(z,j)){console.log("[GAME END] CHECKMATE",{winner:z==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(j)),moveHistory:b}),f("checkmate");const G=z==="blue"?"red":"blue";return G==="blue"?(y("Checkmate! You win!"),Fu("checkmate"),lI(!0),HL(),cl("win"),Ce(!0),setTimeout(()=>Ce(!1),3e3)):(y(`Checkmate! ${G==="red"?"AI":"Opponent"} wins!`),Fu("checkmate"),uI(!0),cl("loss"),Ce(!0),setTimeout(()=>Ce(!1),3e3)),"checkmate"}return Ob(z,j)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(j)),moveHistory:b}),f("stalemate"),y("Stalemate! Game is a draw."),cl("draw"),Ce(!0),setTimeout(()=>Ce(!1),3e3),"stalemate"):(mi(j,z)?(console.log("CHECK detected!"),Fu("check"),y(`${z==="blue"?"Blue":"Red"} is in check!`)):y("Your turn"),null)},Xm=j=>{const z=[];for(let G=0;G<8;G++)for(let be=0;be<8;be++){const Ee=j[G][be];Ee&&tn(Ee)==="red"&&z.push({row:G,col:be})}for(let G=z.length-1;G>0;G--){const be=Math.floor(Math.random()*(G+1));[z[G],z[be]]=[z[be],z[G]]}const q=[],Q=[];for(const G of z){const be=ll(G,j,"red");for(const Ee of be){const je=j[Ee.row][Ee.col];if(je&&tn(je)==="blue"){const Tt={p:100,n:320,b:330,r:500,q:900,k:2e4}[je.toLowerCase()]||0;q.push({from:G,to:Ee,value:Tt})}else Q.push({from:G,to:Ee})}}if(q.length>0&&Math.random()<.3){q.sort((G,be)=>G.value-be.value);for(const G of q){const be=j.map(je=>[...je]),Ee=be[G.from.row][G.from.col];if(be[G.to.row][G.to.col]=Ee,be[G.from.row][G.from.col]=null,!mi(be,"red"))return{from:G.from,to:G.to}}}for(const G of Q){const be=j.map(je=>[...je]),Ee=be[G.from.row][G.from.col];if(be[G.to.row][G.to.col]=Ee,be[G.from.row][G.from.col]=null,!mi(be,"red"))return G}q.sort((G,be)=>G.value-be.value);for(const G of q){const be=j.map(je=>[...je]),Ee=be[G.from.row][G.from.col];if(be[G.to.row][G.to.col]=Ee,be[G.from.row][G.from.col]=null,!mi(be,"red"))return{from:G.from,to:G.to}}return null},Rb=()=>{a(JSON.parse(JSON.stringify(MR))),l("blue"),d(null),f("active"),v([]),x([]),C(null),O(!1),y("Select game mode"),W({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),Nn(Ro()),ie.current&&(ie.current=!1)},$b=()=>{if(KL(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){O(!1),te(!1);return}O(!0),te(!1),y("Game started! Your turn");const j=Ro();Nn(j),console.log("[DEBUG] Game started with chessboard:",j)},H=j=>`${j.slice(0,6)}...${j.slice(-4)}`,K=(j,z)=>{const q=o[j][z],Q=(u==null?void 0:u.row)===j&&(u==null?void 0:u.col)===z,G=S.some(Ee=>Ee.row===j&&Ee.col===z),be=A&&(A.from.row===j&&A.from.col===z||A.to.row===j&&A.to.col===z);return g.jsxs("div",{className:`square ${Q?"selected":""} ${G?"legal-move":""} ${be?"last-move":""}`,onClick:()=>Qm(j,z),children:[q&&g.jsx("div",{className:"piece",style:{backgroundImage:hw[q]?`url(${hw[q]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),G&&g.jsx("div",{className:"legal-move-indicator"})]},`${j}-${z}`)},re=()=>{if(!M||!V)return null;const j=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return g.jsx("div",{className:"promotion-dialog",children:g.jsxs("div",{className:"promotion-content",children:[g.jsx("h3",{children:"Choose promotion piece:"}),g.jsx("div",{className:"promotion-pieces",children:j.map(z=>g.jsx("div",{className:"promotion-piece",onClick:()=>{lf(V.from,V.to,z),F(!1),N(null)},style:{backgroundImage:hw[z]?`url(${hw[z]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},z))})]})})},[ce,pe]=P.useState(null),Le=(j=!1,z="Click a piece to learn more about it.")=>g.jsxs("div",{className:`piece-gallery${j?" piece-gallery-sm":""}`,children:[g.jsx("h3",{children:"Lawbstation Chess Pieces"}),g.jsx("div",{className:"piece-gallery-grid",children:UCe.map(q=>g.jsxs("div",{className:"piece-gallery-item",onClick:()=>pe(q.key),children:[g.jsx("img",{src:q.img,alt:q.name,className:"piece-gallery-img"}),g.jsx("div",{className:"piece-gallery-name",children:q.name}),ce===q.key&&g.jsx("div",{className:"piece-gallery-desc",children:q.desc})]},q.key))}),g.jsx("div",{className:"piece-gallery-tip",children:z})]}),He=()=>g.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:g.jsx("div",{className:"difficulty-controls-col",children:g.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[g.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),g.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",g.jsx("br",{}),"Good luck, have fun!"]}),g.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[g.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>m("easy"),children:"Easy"}),g.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>m("hard"),children:"Hard"})]}),g.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{$b()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[g.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),pt=(j,z,q,Q)=>{if(Q.toLowerCase()==="p"&&(tn(Q)==="blue"&&q.row===0||tn(Q)==="red"&&q.row===7)){const G=tn(Q)==="blue"?"q":"Q";j[q.row][q.col]=G}Q.toLowerCase()==="k"&&Math.abs(z.col-q.col)===2&&(q.col===6?(j[z.row][7]=null,j[z.row][5]=tn(Q)==="blue"?"r":"R"):q.col===2&&(j[z.row][0]=null,j[z.row][3]=tn(Q)==="blue"?"r":"R"))},kr=(j,z,q,Q)=>{const G=Vm(j.row,j.col),be=Vm(z.row,z.col);return`${G}-${be}`},_s=(j,z,q)=>{const Q={...U};q.toLowerCase()==="k"?tn(q)==="blue"?Q.blueKingMoved=!0:Q.redKingMoved=!0:q.toLowerCase()==="r"&&(tn(q)==="blue"?(j.col===0&&(Q.blueRooksMove.left=!0),j.col===7&&(Q.blueRooksMove.right=!0)):(j.col===0&&(Q.redRooksMove.left=!0),j.col===7&&(Q.redRooksMove.right=!0))),q.toLowerCase()==="p"&&Math.abs(j.row-z.row)===2?Q.lastPawnDoubleMove={row:z.row,col:z.col}:Q.lastPawnDoubleMove=null,W(Q)},lf=(j,z,q="q",Q=!1)=>{o[j.row][j.col];const be=o[z.row][z.col]!==null;if(Fu(be?"capture":"move"),be){L({row:z.row,col:z.col,show:!0}),setTimeout(()=>{Jm(j,z,Q),L(null)},500);return}Jm(j,z,Q)},[Zi,qL]=P.useState(!0),[Db,cI]=P.useState(!1),Fu=j=>{if(!Zi)return;let z="";switch(j){case"move":z="/images/move.mp3";break;case"capture":z="/images/capture.mp3";break;case"check":z="/images/play.mp3";break;case"checkmate":z="/images/victory.mp3";break;case"victory":z="/images/victory.mp3";break;default:z="/images/move.mp3"}new Audio(z).play().catch(()=>{})},HL=()=>{if(Db){Fu("victory");for(let j=0;j<50;j++)setTimeout(()=>{const z=document.createElement("div");z.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(z),setTimeout(()=>z.remove(),3e3)},j*100);setTimeout(()=>cI(!1),5e3)}},[VL,lI]=P.useState(!1),[GL,uI]=P.useState(!1),dI=()=>{lI(!1),uI(!1)},jb=()=>{dI(),Rb()},Ub=()=>{dI(),O(!1)},KL=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},YL=s==="online";return g.jsxs("div",{className:`chess-game${n?" fullscreen":""}${Ue?" chess-dark-mode":""}`,children:[!n&&g.jsxs("div",{className:"chess-header",children:[g.jsx("h2",{children:"Lawb Chess"}),g.jsxs("div",{className:"chess-controls",children:[e&&g.jsx("button",{onClick:e,children:"_"}),g.jsx("button",{onClick:t,children:"×"}),g.jsx("button",{className:"dark-mode-toggle",onClick:ft,title:Ue?"Switch to light mode":"Switch to dark mode","aria-label":Ue?"Switch to light mode":"Switch to dark mode",style:{marginLeft:12},children:Ue?"☀️":"🌙"})]})]}),g.jsxs("div",{className:"game-stable-layout",children:[g.jsxs("div",{className:"left-sidebar",children:[k&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"move-history-status",children:w}),g.jsxs("div",{className:"move-history",children:[g.jsx("div",{className:"move-history-title",children:"Move History"}),g.jsx("ul",{className:"move-history-list",children:b.slice().reverse().map((j,z)=>g.jsx("li",{children:j},b.length-1-z))})]})]}),!k&&g.jsxs("div",{className:"leaderboard",children:[g.jsx("h3",{children:"Leaderboard"}),g.jsx("div",{className:"leaderboard-table",children:g.jsxs("table",{children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Rank"}),g.jsx("th",{children:"Player"}),g.jsx("th",{children:"W"}),g.jsx("th",{children:"L"}),g.jsx("th",{children:"D"}),g.jsx("th",{children:"Points"})]})}),g.jsx("tbody",{children:Array.isArray(E)&&E.slice(0,10).map((j,z)=>{if(typeof j=="object"&&j!==null&&"username"in j&&"wins"in j&&"losses"in j&&"draws"in j&&"points"in j){const q=j;return g.jsxs("tr",{children:[g.jsx("td",{children:z+1}),g.jsx("td",{children:H(q.username)}),g.jsx("td",{children:q.wins}),g.jsx("td",{children:q.losses}),g.jsx("td",{children:q.draws}),g.jsx("td",{children:q.points})]},q.username)}return null})})]})})]})]}),g.jsxs("div",{className:"center-area",children:[g.jsx("div",{className:"game-info",children:g.jsxs("div",{className:"game-info-bar",children:[g.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:["Current: ",c==="blue"?"Blue":"Red"]}),g.jsx("span",{className:"wager-label",children:"Wager:"})," ",g.jsx("span",{children:s==="ai"?"NA":`${$} ETH`}),k&&!oe&&g.jsxs("span",{className:"mode-play",children:["Mode: ",p==="easy"?"Easy":"Hard"]}),p==="easy"&&g.jsxs("span",{className:`stockfish-status ${lt}`,children:["LawbBot: ",lt==="loading"?"Loading...":lt==="ready"?"Ready":"Failed"]}),p==="hard"&&g.jsxs("span",{className:`stockfish-status ${lt}`,children:["LawbBot: ",lt==="loading"?"Loading...":lt==="ready"?"Ready":"Failed"]}),Qn&&Hs.length>0&&g.jsxs("div",{className:"opening-suggestions",children:[g.jsx("span",{className:"opening-label",children:"Opening:"}),Hs.map((j,z)=>g.jsxs("span",{className:"opening-move",children:[j.san," (",Math.round(j.white+j.draws+j.black)," games)"]},z))]})]})}),k?g.jsxs("div",{className:"chess-main-area",children:[g.jsx("div",{className:"chessboard-container",children:g.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${Qi})`},children:[Array.from({length:8},(j,z)=>g.jsx("div",{className:"board-row",children:Array.from({length:8},(q,Q)=>K(z,Q))},z)),T&&T.show&&g.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${T.row*12.5}%`,left:`${T.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:g.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),g.jsxs("div",{className:"game-controls",children:[g.jsx("button",{onClick:()=>ze(!0),children:"Chess Piece Info"}),g.jsx("button",{onClick:jb,children:"New Game"}),g.jsx("button",{onClick:Ub,children:"Back to Menu"})]}),g.jsxs("div",{className:"epic-controls",children:[g.jsxs("div",{className:"epic-toggle",children:[g.jsx("input",{type:"checkbox",id:"sound-toggle",checked:Zi,onChange:j=>qL(j.target.checked)}),g.jsx("label",{htmlFor:"sound-toggle",children:"🎵 Sound Effects"})]}),g.jsxs("div",{className:"epic-toggle",children:[g.jsx("input",{type:"checkbox",id:"victory-toggle",checked:Db,onChange:j=>cI(j.target.checked)}),g.jsx("label",{htmlFor:"victory-toggle",children:"🎉 Victory Celebration"})]})]})]}):oe?He():s==="online"?g.jsx(WL,{onClose:t,onMinimize:e,fullscreen:n}):g.jsxs("div",{className:"game-mode-panel",children:[g.jsx("h3",{className:"game-mode-title",children:"Select Game Mode"}),g.jsx("button",{className:`mode-btn ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS THE HOUSE"}),g.jsxs("div",{className:"pvp-section",children:[g.jsx("button",{className:`mode-btn ${YL?"selected":""}`,onClick:()=>i("online"),children:"PvP"}),g.jsx("img",{src:"/images/chessboard4.png",alt:"Chessboard",style:{display:"block",margin:"16px auto 0 auto",width:"180px",maxWidth:"90%"}})]}),g.jsx("button",{className:"start-btn continue-btn",onClick:()=>te(!0),children:"Continue"}),g.jsxs("div",{className:"how-to-section",children:[g.jsx("h4",{children:"How to Play"}),g.jsxs("div",{className:"how-to-content",children:[g.jsxs("p",{children:[g.jsx("strong",{children:"Chess Basics:"})," Move pieces to capture your opponent's king. Each piece moves differently - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Wallet Connection:"})," Connect your wallet to track your progress and compete on the leaderboard. Your wallet address serves as your username."]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Points System:"})," Win points by defeating the AI. 1 win = 10pts. 1 draw = 1 point."]})]})]})]})]}),g.jsx("div",{className:"right-sidebar",children:k?g.jsxs("div",{className:"leaderboard",children:[g.jsx("h3",{children:"Leaderboard"}),g.jsx("div",{className:"leaderboard-table",children:g.jsxs("table",{children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Rank"}),g.jsx("th",{children:"Player"}),g.jsx("th",{children:"W"}),g.jsx("th",{children:"L"}),g.jsx("th",{children:"D"}),g.jsx("th",{children:"Points"})]})}),g.jsx("tbody",{children:Array.isArray(E)&&E.slice(0,10).map((j,z)=>{if(typeof j=="object"&&j!==null&&"username"in j&&"wins"in j&&"losses"in j&&"draws"in j&&"points"in j){const q=j;return g.jsxs("tr",{children:[g.jsx("td",{children:z+1}),g.jsx("td",{children:H(q.username)}),g.jsx("td",{children:q.wins}),g.jsx("td",{children:q.losses}),g.jsx("td",{children:q.draws}),g.jsx("td",{children:q.points})]},q.username)}return null})})]})})]}):g.jsx("div",{className:"piece-gallery-panel",children:Le(!1)})})]}),he&&g.jsx("div",{className:"gallery-modal-overlay",onClick:()=>ze(!1),children:g.jsxs("div",{className:"gallery-modal",onClick:j=>j.stopPropagation(),children:[g.jsx("button",{className:"close-modal-btn",onClick:()=>ze(!1),children:"×"}),Le(!1)]})}),re(),Te&&g.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),VL&&Db&&g.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[g.jsx("div",{className:"balloons-container"}),g.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),g.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[g.jsx("button",{onClick:jb,children:"New Game"}),g.jsx("button",{onClick:Ub,children:"Back to Menu"})]})]}),GL&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(j=>g.jsx("div",{className:"blood-drip",style:{left:`${10+j*14}%`,animationDelay:`${.5+j*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},j))}),g.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[g.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),g.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[g.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:jb,children:"New Game"}),g.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Ub,children:"Back to Menu"})]})]})]})]})};function BR(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const FR=()=>{const[t,e]=P.useState("singleplayer");return g.jsxs("div",{className:"chess-page",children:[g.jsxs("div",{className:"chess-header",children:[g.jsx("h1",{children:"♔ Chess"}),g.jsxs("div",{className:"mode-toggle",children:[g.jsx("button",{className:`mode-btn ${t==="singleplayer"?"active":""}`,onClick:()=>e("singleplayer"),children:"Single Player"}),g.jsx("button",{className:`mode-btn ${t==="multiplayer"?"active":""}`,onClick:()=>e("multiplayer"),children:"Multiplayer"})]})]}),g.jsx("div",{className:"chess-content",children:t==="singleplayer"?g.jsx(BCe,{onClose:()=>{}}):g.jsx(WL,{onClose:()=>{},onMinimize:()=>{},fullscreen:!1})})]})},FCe=new BH,zCe=typeof window<"u"&&window.location.hostname.startsWith("chess."),WCe=()=>l_e("(max-width: 768px)")?g.jsx(c_e,{}):g.jsx(e_e,{});cE.createRoot(document.getElementById("root")).render(g.jsx($s.StrictMode,{children:g.jsx(eH,{config:wL.wagmiConfig,children:g.jsx(nV,{client:FCe,children:g.jsx(Z1e,{children:g.jsx(Y1e,{children:zCe?g.jsx(qw,{path:"/*",element:g.jsx(FR,{})}):g.jsxs(g.Fragment,{children:[g.jsx(qw,{path:"/",element:g.jsx(WCe,{})}),g.jsx(qw,{path:"/chess",element:g.jsx(FR,{})})]})})})})})}));export{iSe as $,ye as A,qe as B,_e as C,ur as D,Cp as E,lr as F,Me as G,lx as H,np as I,$i as J,EX as K,Bt as L,Pt as M,wX as N,ue as O,Ns as P,Fw as Q,Ve as R,ji as S,as as T,Rg as U,Wg as V,Kn as W,uSe as X,lS as Y,nee as Z,Rp as _,Ww as a,Uh as a$,Hn as a0,Su as a1,gn as a2,aSe as a3,KU as a4,uS as a5,Nh as a6,wn as a7,axe as a8,_c as a9,T5 as aA,I5 as aB,Kc as aC,vp as aD,ma as aE,exe as aF,ZF as aG,cu as aH,XCe as aI,txe as aJ,m0 as aK,nxe as aL,_7 as aM,xD as aN,ZCe as aO,Av as aP,ig as aQ,y0 as aR,rv as aS,rxe as aT,E7 as aU,EN as aV,zq as aW,_Y as aX,fi as aY,MW as aZ,LW as a_,Ao as aa,Sg as ab,Ye as ac,Rn as ad,Qa as ae,O5 as af,kv as ag,w0 as ah,PA as ai,Gc as aj,QCe as ak,Pv as al,kA as am,YCe as an,KCe as ao,jD as ap,xv as aq,g0 as ar,LF as as,WF as at,sxe as au,Uz as av,ae as aw,CA as ax,Mr as ay,Mz as az,$t as b,au as b0,_v as b1,zr as b2,_n as b3,Cm as b4,ee as c,De as d,R as e,Dt as f,ia as g,lSe as h,Qd as i,ks as j,ke as k,Xt as l,mbe as m,Sn as n,ybe as o,ve as p,on as q,cSe as r,It as s,Tj as t,Yt as u,JX as v,qs as w,sSe as x,f2 as y,Pj as z};
