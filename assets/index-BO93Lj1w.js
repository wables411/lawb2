const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-BxAnD_Fe.js","assets/if-defined-BvDQp8Yv.js","assets/index-BDhy4M4i.js","assets/index-CQQcPYG3.js","assets/ref-CWjPBaVO.js","assets/index-CT5c5qe7.js","assets/index-OqPASfwp.js","assets/index-ZDZqCdmM.js","assets/index-DFM82gZv.js","assets/index-DYoSHv2f.js","assets/index-BlMQ0aET.js","assets/index-DZfS4QvL.js","assets/email-BFyHn_pD.js","assets/index-GgmPwYqq.js","assets/socials-r5XkxbuZ.js","assets/index-NwNFjCsx.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-LGBf0T8h.js","assets/index-D8fR-HEV.js","assets/index-CwiYK94-.js","assets/index-DhGfPfRz.js","assets/swaps-C5cWXvb7.js","assets/index-BeJf4mOn.js","assets/index-bkTnhp_C.js","assets/index-BzBM-6h8.js","assets/send-DxbWKVZc.js","assets/index-DATi-76X.js","assets/index-DgAw6ZCc.js","assets/receive-BbPL2o4t.js","assets/index-BmrZ5DNX.js","assets/onramp-CFPiXEql.js","assets/index-CkgmjD5M.js","assets/index-DumwcdLr.js","assets/index-DaE4aWFQ.js","assets/transactions-5YsOBQ-W.js","assets/index-CJc_IRp_.js","assets/index-eDBn7Te-.js","assets/index-AVXlPtmb.js","assets/index-r3CH25fz.js","assets/index-C5r7DXav.js","assets/w3m-modal-Cag9tbXq.js"])))=>i.map(i=>d[i]);
var Eue=Object.defineProperty;var GF=t=>{throw TypeError(t)};var Cue=(t,e,n)=>e in t?Eue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ue=(t,e,n)=>Cue(t,typeof e!="symbol"?e+"":e,n),_O=(t,e,n)=>e.has(t)||GF("Cannot "+n);var R=(t,e,n)=>(_O(t,e,"read from private field"),n?n.call(t):e.get(t)),re=(t,e,n)=>e.has(t)?GF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),q=(t,e,n,r)=>(_O(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ae=(t,e,n)=>(_O(t,e,"access private method"),n);var Zf=(t,e,n,r)=>({set _(s){q(t,e,s,n)},get _(){return R(t,e,r)}});function _ue(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ei=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function lI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var KK={exports:{}},t2={},YK={exports:{}},Gn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uI=Symbol.for("react.element"),Aue=Symbol.for("react.portal"),Sue=Symbol.for("react.fragment"),Iue=Symbol.for("react.strict_mode"),Nue=Symbol.for("react.profiler"),xue=Symbol.for("react.provider"),Tue=Symbol.for("react.context"),Rue=Symbol.for("react.forward_ref"),kue=Symbol.for("react.suspense"),Pue=Symbol.for("react.memo"),Oue=Symbol.for("react.lazy"),qF=Symbol.iterator;function Due(t){return t===null||typeof t!="object"?null:(t=qF&&t[qF]||t["@@iterator"],typeof t=="function"?t:null)}var QK={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JK=Object.assign,ZK={};function pC(t,e,n){this.props=t,this.context=e,this.refs=ZK,this.updater=n||QK}pC.prototype.isReactComponent={};pC.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pC.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XK(){}XK.prototype=pC.prototype;function R6(t,e,n){this.props=t,this.context=e,this.refs=ZK,this.updater=n||QK}var k6=R6.prototype=new XK;k6.constructor=R6;JK(k6,pC.prototype);k6.isPureReactComponent=!0;var VF=Array.isArray,eY=Object.prototype.hasOwnProperty,P6={current:null},tY={key:!0,ref:!0,__self:!0,__source:!0};function nY(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)eY.call(e,r)&&!tY.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:uI,type:t,key:i,ref:o,props:s,_owner:P6.current}}function Mue(t,e){return{$$typeof:uI,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function O6(t){return typeof t=="object"&&t!==null&&t.$$typeof===uI}function Bue(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var KF=/\/+/g;function AO(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bue(""+t.key):e.toString(36)}function Kx(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case uI:case Aue:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+AO(o,0):r,VF(s)?(n="",t!=null&&(n=t.replace(KF,"$&/")+"/"),Kx(s,e,n,"",function(l){return l})):s!=null&&(O6(s)&&(s=Mue(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(KF,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",VF(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+AO(i,a);o+=Kx(i,e,n,c,s)}else if(c=Due(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+AO(i,a++),o+=Kx(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bN(t,e,n){if(t==null)return t;var r=[],s=0;return Kx(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Uue(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ba={current:null},Yx={transition:null},Lue={ReactCurrentDispatcher:ba,ReactCurrentBatchConfig:Yx,ReactCurrentOwner:P6};function rY(){throw Error("act(...) is not supported in production builds of React.")}Gn.Children={map:bN,forEach:function(t,e,n){bN(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bN(t,function(){e++}),e},toArray:function(t){return bN(t,function(e){return e})||[]},only:function(t){if(!O6(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Gn.Component=pC;Gn.Fragment=Sue;Gn.Profiler=Nue;Gn.PureComponent=R6;Gn.StrictMode=Iue;Gn.Suspense=kue;Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lue;Gn.act=rY;Gn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=JK({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=P6.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)eY.call(e,c)&&!tY.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:uI,type:t.type,key:s,ref:i,props:r,_owner:o}};Gn.createContext=function(t){return t={$$typeof:Tue,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xue,_context:t},t.Consumer=t};Gn.createElement=nY;Gn.createFactory=function(t){var e=nY.bind(null,t);return e.type=t,e};Gn.createRef=function(){return{current:null}};Gn.forwardRef=function(t){return{$$typeof:Rue,render:t}};Gn.isValidElement=O6;Gn.lazy=function(t){return{$$typeof:Oue,_payload:{_status:-1,_result:t},_init:Uue}};Gn.memo=function(t,e){return{$$typeof:Pue,type:t,compare:e===void 0?null:e}};Gn.startTransition=function(t){var e=Yx.transition;Yx.transition={};try{t()}finally{Yx.transition=e}};Gn.unstable_act=rY;Gn.useCallback=function(t,e){return ba.current.useCallback(t,e)};Gn.useContext=function(t){return ba.current.useContext(t)};Gn.useDebugValue=function(){};Gn.useDeferredValue=function(t){return ba.current.useDeferredValue(t)};Gn.useEffect=function(t,e){return ba.current.useEffect(t,e)};Gn.useId=function(){return ba.current.useId()};Gn.useImperativeHandle=function(t,e,n){return ba.current.useImperativeHandle(t,e,n)};Gn.useInsertionEffect=function(t,e){return ba.current.useInsertionEffect(t,e)};Gn.useLayoutEffect=function(t,e){return ba.current.useLayoutEffect(t,e)};Gn.useMemo=function(t,e){return ba.current.useMemo(t,e)};Gn.useReducer=function(t,e,n){return ba.current.useReducer(t,e,n)};Gn.useRef=function(t){return ba.current.useRef(t)};Gn.useState=function(t){return ba.current.useState(t)};Gn.useSyncExternalStore=function(t,e,n){return ba.current.useSyncExternalStore(t,e,n)};Gn.useTransition=function(){return ba.current.useTransition()};Gn.version="18.3.1";YK.exports=Gn;var G=YK.exports;const Hc=rh(G),$ue=_ue({__proto__:null,default:Hc},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fue=G,jue=Symbol.for("react.element"),Wue=Symbol.for("react.fragment"),zue=Object.prototype.hasOwnProperty,Hue=Fue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gue={key:!0,ref:!0,__self:!0,__source:!0};function sY(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zue.call(e,r)&&!Gue.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:jue,type:t,key:i,ref:o,props:s,_owner:Hue.current}}t2.Fragment=Wue;t2.jsx=sY;t2.jsxs=sY;KK.exports=t2;var b=KK.exports,YF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iY={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We=function(t,e){if(!t)throw gC(e)},gC=function(t){return new Error("Firebase Database ("+iY.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oY=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},que=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},D6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oY(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):que(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Vue;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aY=function(t){const e=oY(t);return D6.encodeByteArray(e,!0)},KT=function(t){return aY(t).replace(/\./g,"")},VM=function(t){try{return D6.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kue(t){return cY(void 0,t)}function cY(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Yue(n)||(t[n]=cY(t[n],e[n]));return t}function Yue(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Que(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jue=()=>Que().__FIREBASE_DEFAULTS__,Zue=()=>{if(typeof process>"u"||typeof YF>"u")return;const t=YF.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Xue=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&VM(t[1]);return e&&JSON.parse(e)},lY=()=>{try{return Jue()||Zue()||Xue()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ede=t=>{var e,n;return(n=(e=lY())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tde=t=>{const e=ede(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uY=()=>{var t;return(t=lY())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nde(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[KT(JSON.stringify(n)),KT(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rde(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dY(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rde())}function sde(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ide(){return iY.NODE_ADMIN===!0}function ode(){try{return typeof indexedDB=="object"}catch{return!1}}function ade(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cde="FirebaseError";class dI extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cde,Object.setPrototypeOf(this,dI.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hY.prototype.create)}}class hY{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?lde(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new dI(s,a,r)}}function lde(t,e){return t.replace(ude,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ude=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){return JSON.parse(t)}function bi(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=eA(VM(i[0])||""),n=eA(VM(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},dde=function(t){const e=fY(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},hde=function(t){const e=fY(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vE(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function QF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function YT(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function KM(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(JF(i)&&JF(o)){if(!KM(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function JF(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fde(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pde{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function M6(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gde=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,We(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},r2=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(t){return t&&t._delegate?t._delegate:t}class tA{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mde{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new n2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wde(e))try{this.getOrInitializeService({instanceIdentifier:Gm})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Gm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gm){return this.instances.has(e)}getOptions(e=Gm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yde(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gm){return this.component?this.component.multipleInstances?e:Gm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yde(t){return t===Gm?void 0:t}function wde(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bde{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mde(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ss;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ss||(ss={}));const vde={debug:ss.DEBUG,verbose:ss.VERBOSE,info:ss.INFO,warn:ss.WARN,error:ss.ERROR,silent:ss.SILENT},Ede=ss.INFO,Cde={[ss.DEBUG]:"log",[ss.VERBOSE]:"log",[ss.INFO]:"info",[ss.WARN]:"warn",[ss.ERROR]:"error"},_de=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Cde[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pY{constructor(e){this.name=e,this._logLevel=Ede,this._logHandler=_de,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ss))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vde[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ss.DEBUG,...e),this._logHandler(this,ss.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ss.VERBOSE,...e),this._logHandler(this,ss.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ss.INFO,...e),this._logHandler(this,ss.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ss.WARN,...e),this._logHandler(this,ss.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ss.ERROR,...e),this._logHandler(this,ss.ERROR,...e)}}const Ade=(t,e)=>e.some(n=>t instanceof n);let ZF,XF;function Sde(){return ZF||(ZF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ide(){return XF||(XF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gY=new WeakMap,YM=new WeakMap,mY=new WeakMap,SO=new WeakMap,B6=new WeakMap;function Nde(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Tg(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gY.set(n,t)}).catch(()=>{}),B6.set(e,t),e}function xde(t){if(YM.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});YM.set(t,e)}let QM={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return YM.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mY.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tg(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Tde(t){QM=t(QM)}function Rde(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(IO(this),e,...n);return mY.set(r,e.sort?e.sort():[e]),Tg(r)}:Ide().includes(t)?function(...e){return t.apply(IO(this),e),Tg(gY.get(this))}:function(...e){return Tg(t.apply(IO(this),e))}}function kde(t){return typeof t=="function"?Rde(t):(t instanceof IDBTransaction&&xde(t),Ade(t,Sde())?new Proxy(t,QM):t)}function Tg(t){if(t instanceof IDBRequest)return Nde(t);if(SO.has(t))return SO.get(t);const e=kde(t);return e!==t&&(SO.set(t,e),B6.set(e,t)),e}const IO=t=>B6.get(t);function Pde(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Tg(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Tg(o.result),c.oldVersion,c.newVersion,Tg(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Ode=["get","getKey","getAll","getAllKeys","count"],Dde=["put","add","delete","clear"],NO=new Map;function ej(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(NO.get(e))return NO.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Dde.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ode.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return NO.set(e,i),i}Tde(t=>({...t,get:(e,n,r)=>ej(e,n)||t.get(e,n,r),has:(e,n)=>!!ej(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mde{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bde(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Bde(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const JM="@firebase/app",tj="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new pY("@firebase/app"),Ude="@firebase/app-compat",Lde="@firebase/analytics-compat",$de="@firebase/analytics",Fde="@firebase/app-check-compat",jde="@firebase/app-check",Wde="@firebase/auth",zde="@firebase/auth-compat",Hde="@firebase/database",Gde="@firebase/data-connect",qde="@firebase/database-compat",Vde="@firebase/functions",Kde="@firebase/functions-compat",Yde="@firebase/installations",Qde="@firebase/installations-compat",Jde="@firebase/messaging",Zde="@firebase/messaging-compat",Xde="@firebase/performance",ehe="@firebase/performance-compat",the="@firebase/remote-config",nhe="@firebase/remote-config-compat",rhe="@firebase/storage",she="@firebase/storage-compat",ihe="@firebase/firestore",ohe="@firebase/vertexai-preview",ahe="@firebase/firestore-compat",che="firebase",lhe="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="[DEFAULT]",uhe={[JM]:"fire-core",[Ude]:"fire-core-compat",[$de]:"fire-analytics",[Lde]:"fire-analytics-compat",[jde]:"fire-app-check",[Fde]:"fire-app-check-compat",[Wde]:"fire-auth",[zde]:"fire-auth-compat",[Hde]:"fire-rtdb",[Gde]:"fire-data-connect",[qde]:"fire-rtdb-compat",[Vde]:"fire-fn",[Kde]:"fire-fn-compat",[Yde]:"fire-iid",[Qde]:"fire-iid-compat",[Jde]:"fire-fcm",[Zde]:"fire-fcm-compat",[Xde]:"fire-perf",[ehe]:"fire-perf-compat",[the]:"fire-rc",[nhe]:"fire-rc-compat",[rhe]:"fire-gcs",[she]:"fire-gcs-compat",[ihe]:"fire-fst",[ahe]:"fire-fst-compat",[ohe]:"fire-vertex","fire-js":"fire-js",[che]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=new Map,dhe=new Map,XM=new Map;function nj(t,e){try{t.container.addComponent(e)}catch(n){Sf.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function QT(t){const e=t.name;if(XM.has(e))return Sf.debug(`There were multiple attempts to register component ${e}.`),!1;XM.set(e,t);for(const n of nA.values())nj(n,t);for(const n of dhe.values())nj(n,t);return!0}function hhe(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fhe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rg=new hY("app","Firebase",fhe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class phe{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ghe=lhe;function yY(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ZM,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Rg.create("bad-app-name",{appName:String(s)});if(n||(n=uY()),!n)throw Rg.create("no-options");const i=nA.get(s);if(i){if(KM(n,i.options)&&KM(r,i.config))return i;throw Rg.create("duplicate-app",{appName:s})}const o=new bde(s);for(const c of XM.values())o.addComponent(c);const a=new phe(n,r,o);return nA.set(s,a),a}function wY(t=ZM){const e=nA.get(t);if(!e&&t===ZM&&uY())return yY();if(!e)throw Rg.create("no-app",{appName:t});return e}function mhe(){return Array.from(nA.values())}function Zb(t,e,n){var r;let s=(r=uhe[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sf.warn(a.join(" "));return}QT(new tA(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yhe="firebase-heartbeat-database",whe=1,rA="firebase-heartbeat-store";let xO=null;function bY(){return xO||(xO=Pde(yhe,whe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rA)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rg.create("idb-open",{originalErrorMessage:t.message})})),xO}async function bhe(t){try{const n=(await bY()).transaction(rA),r=await n.objectStore(rA).get(vY(t));return await n.done,r}catch(e){if(e instanceof dI)Sf.warn(e.message);else{const n=Rg.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sf.warn(n.message)}}}async function rj(t,e){try{const r=(await bY()).transaction(rA,"readwrite");await r.objectStore(rA).put(e,vY(t)),await r.done}catch(n){if(n instanceof dI)Sf.warn(n.message);else{const r=Rg.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sf.warn(r.message)}}}function vY(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vhe=1024,Ehe=30*24*60*60*1e3;class Che{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ahe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=sj();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Ehe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Sf.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sj(),{heartbeatsToSend:r,unsentEntries:s}=_he(this._heartbeatsCache.heartbeats),i=KT(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Sf.warn(n),""}}}function sj(){return new Date().toISOString().substring(0,10)}function _he(t,e=vhe){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ij(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ij(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ahe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ode()?ade().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bhe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return rj(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return rj(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ij(t){return KT(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function She(t){QT(new tA("platform-logger",e=>new Mde(e),"PRIVATE")),QT(new tA("heartbeat",e=>new Che(e),"PRIVATE")),Zb(JM,tj,t),Zb(JM,tj,"esm2017"),Zb("fire-js","")}She("");var Ihe="firebase",Nhe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zb(Ihe,Nhe,"app");var oj={};const aj="@firebase/database",cj="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EY="";function xhe(t){EY=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class The{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),bi(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:eA(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rhe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return $f(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CY=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new The(e)}}catch{}return new Rhe},py=CY("localStorage"),khe=CY("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new pY("@firebase/database"),Phe=function(){let t=1;return function(){return t++}}(),_Y=function(t){const e=gde(t),n=new pde;n.update(e);const r=n.digest();return D6.encodeByteArray(r)},hI=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=hI.apply(null,r):typeof r=="object"?e+=bi(r):e+=r,e+=" "}return e};let y_=null,lj=!0;const Ohe=function(t,e){We(!0,"Can't turn on custom loggers persistently."),Xb.logLevel=ss.VERBOSE,y_=Xb.log.bind(Xb)},Uo=function(...t){if(lj===!0&&(lj=!1,y_===null&&khe.get("logging_enabled")===!0&&Ohe()),y_){const e=hI.apply(null,t);y_(e)}},fI=function(t){return function(...e){Uo(t,...e)}},eB=function(...t){const e="FIREBASE INTERNAL ERROR: "+hI(...t);Xb.error(e)},If=function(...t){const e=`FIREBASE FATAL ERROR: ${hI(...t)}`;throw Xb.error(e),new Error(e)},rc=function(...t){const e="FIREBASE WARNING: "+hI(...t);Xb.warn(e)},Dhe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&rc("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},AY=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Mhe=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},EE="[MIN_NAME]",b0="[MAX_NAME]",yC=function(t,e){if(t===e)return 0;if(t===EE||e===b0)return-1;if(e===EE||t===b0)return 1;{const n=uj(t),r=uj(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Bhe=function(t,e){return t===e?0:t<e?-1:1},e1=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+bi(e))},U6=function(t){if(typeof t!="object"||t===null)return bi(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=bi(e[r]),n+=":",n+=U6(t[e[r]]);return n+="}",n},SY=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function uc(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const IY=function(t){We(!AY(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Uhe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Lhe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function $he(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Fhe=new RegExp("^-?(0*)\\d{1,10}$"),jhe=-2147483648,Whe=2147483647,uj=function(t){if(Fhe.test(t)){const e=Number(t);if(e>=jhe&&e<=Whe)return e}return null},wC=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw rc("Exception was thrown by user callback.",n),e},Math.floor(0))}},zhe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},w_=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hhe{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){rc(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ghe{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Uo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rc(e)}}class Qx{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Qx.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6="5",NY="v",xY="s",TY="r",RY="f",kY=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PY="ls",OY="p",tB="ac",DY="websocket",MY="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BY{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=py.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&py.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function qhe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function UY(t,e,n){We(typeof e=="string","typeof type must == string"),We(typeof n=="object","typeof params must == object");let r;if(e===DY)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===MY)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);qhe(t)&&(n.ns=t.namespace);const s=[];return uc(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vhe{constructor(){this.counters_={}}incrementCounter(e,n=1){$f(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Kue(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO={},RO={};function $6(t){const e=t.toString();return TO[e]||(TO[e]=new Vhe),TO[e]}function Khe(t,e){const n=t.toString();return RO[n]||(RO[n]=e()),RO[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yhe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&wC(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj="start",Qhe="close",Jhe="pLPCommand",Zhe="pRTLPCB",LY="id",$Y="pw",FY="ser",Xhe="cb",efe="seg",tfe="ts",nfe="d",rfe="dframe",jY=1870,WY=30,sfe=jY-WY,ife=25e3,ofe=3e4;class Ib{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fI(e),this.stats_=$6(n),this.urlFn=c=>(this.appCheckToken&&(c[tB]=this.appCheckToken),UY(n,MY,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Yhe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ofe)),Mhe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new F6((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===dj)this.id=a,this.password=c;else if(o===Qhe)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[dj]="t",r[FY]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Xhe]=this.scriptTagHolder.uniqueCallbackIdentifier),r[NY]=L6,this.transportSessionId&&(r[xY]=this.transportSessionId),this.lastSessionId&&(r[PY]=this.lastSessionId),this.applicationId&&(r[OY]=this.applicationId),this.appCheckToken&&(r[tB]=this.appCheckToken),typeof location<"u"&&location.hostname&&kY.test(location.hostname)&&(r[TY]=RY);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ib.forceAllow_=!0}static forceDisallow(){Ib.forceDisallow_=!0}static isAvailable(){return Ib.forceAllow_?!0:!Ib.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Uhe()&&!Lhe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=bi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=aY(n),s=SY(r,sfe);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[rfe]="t",r[LY]=e,r[$Y]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=bi(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class F6{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Phe(),window[Jhe+this.uniqueCallbackIdentifier]=e,window[Zhe+this.uniqueCallbackIdentifier]=n,this.myIFrame=F6.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Uo("frame writing exception"),a.stack&&Uo(a.stack),Uo(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Uo("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[LY]=this.myID,e[$Y]=this.myPW,e[FY]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+WY+r.length<=jY;){const o=this.pendingSegs.shift();r=r+"&"+efe+s+"="+o.seg+"&"+tfe+s+"="+o.ts+"&"+nfe+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(ife)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Uo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const afe=16384,cfe=45e3;let JT=null;typeof MozWebSocket<"u"?JT=MozWebSocket:typeof WebSocket<"u"&&(JT=WebSocket);class _u{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fI(this.connId),this.stats_=$6(n),this.connURL=_u.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[NY]=L6,typeof location<"u"&&location.hostname&&kY.test(location.hostname)&&(o[TY]=RY),n&&(o[xY]=n),r&&(o[PY]=r),s&&(o[tB]=s),i&&(o[OY]=i),UY(e,DY,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,py.set("previous_websocket_failure",!0);try{let r;ide(),this.mySock=new JT(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){_u.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&JT!==null&&!_u.forceDisallow_}static previouslyFailed(){return py.isInMemoryStorage||py.get("previous_websocket_failure")===!0}markConnectionHealthy(){py.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=eA(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(We(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=bi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=SY(n,afe);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(cfe))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}_u.responsesRequiredToBeHealthy=2;_u.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ib,_u]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=_u&&_u.isAvailable();let r=n&&!_u.previouslyFailed();if(e.webSocketOnly&&(n||rc("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[_u];else{const s=this.transports_=[];for(const i of sA.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);sA.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}sA.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lfe=6e4,ufe=5e3,dfe=10*1024,hfe=100*1024,kO="t",hj="d",ffe="s",fj="r",pfe="e",pj="o",gj="a",mj="n",yj="p",gfe="h";let mfe=class{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fI("c:"+this.id+":"),this.transportManager_=new sA(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=w_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>hfe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>dfe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(kO in e){const n=e[kO];n===gj?this.upgradeIfSecondaryHealthy_():n===fj?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===pj&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=e1("t",e),r=e1("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:yj,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:gj,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:mj,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=e1("t",e),r=e1("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=e1(kO,e);if(hj in e){const r=e[hj];if(n===gfe){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===mj){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===ffe?this.onConnectionShutdown_(r):n===fj?this.onReset_(r):n===pfe?eB("Server Error: "+r):n===pj?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):eB("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),L6!==r&&rc("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),w_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(lfe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):w_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(ufe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:yj,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(py.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HY=class{constructor(e){this.allowedEvents_=e,this.listeners_={},We(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){We(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT extends HY{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!dY()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ZT}getInitialEvent(e){return We(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=32,bj=768;class Qr{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function pr(){return new Qr("")}function Bn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function tm(t){return t.pieces_.length-t.pieceNum_}function as(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Qr(t.pieces_,e)}function GY(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yfe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function qY(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function VY(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Qr(e,0)}function vi(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Qr)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Qr(n,0)}function zn(t){return t.pieceNum_>=t.pieces_.length}function aa(t,e){const n=Bn(t),r=Bn(e);if(n===null)return e;if(n===r)return aa(as(t),as(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function j6(t,e){if(tm(t)!==tm(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Nu(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(tm(t)>tm(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class wfe{constructor(e,n){this.errorPrefix_=n,this.parts_=qY(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=r2(this.parts_[r]);KY(this)}}function bfe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=r2(e),KY(t)}function vfe(t){const e=t.parts_.pop();t.byteLength_-=r2(e),t.parts_.length>0&&(t.byteLength_-=1)}function KY(t){if(t.byteLength_>bj)throw new Error(t.errorPrefix_+"has a key path longer than "+bj+" bytes ("+t.byteLength_+").");if(t.parts_.length>wj)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+wj+") or object contains a cycle "+qm(t))}function qm(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6 extends HY{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new W6}getInitialEvent(e){return We(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=1e3,Efe=60*5*1e3,vj=30*1e3,Cfe=1.3,_fe=3e4,Afe="server_kill",Ej=3;class gf extends zY{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=gf.nextPersistentConnectionId_++,this.log_=fI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=t1,this.maxReconnectDelay_=Efe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");W6.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ZT.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(bi(i)),We(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new n2,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),We(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),We(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;gf.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&$f(e,"w")){const r=vE(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();rc(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||hde(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vj)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=dde(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),We(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+bi(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):eB("Unrecognized action received from server: "+bi(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){We(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=t1,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=t1,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>_fe&&(this.reconnectDelay_=t1),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Cfe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+gf.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){We(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Uo("getToken() completed but was canceled"):(Uo("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new mfe(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{rc(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(Afe)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&rc(d),c())}}}interrupt(e){Uo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Uo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],QF(this.interruptReasons_)&&(this.reconnectDelay_=t1,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>U6(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Qr(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Uo("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ej&&(this.reconnectDelay_=vj,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Uo("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ej&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+EY.replace(/\./g,"-")]=1,dY()?e["framework.cordova"]=1:sde()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ZT.getInstance().currentlyOnline();return QF(this.interruptReasons_)&&e}}gf.nextPersistentConnectionId_=0;gf.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Un(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Un(EE,e),s=new Un(EE,n);return this.compare(r,s)!==0}minPost(){return Un.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vN;class YY extends s2{static get __EMPTY_NODE(){return vN}static set __EMPTY_NODE(e){vN=e}compare(e,n){return yC(e.name,n.name)}isDefinedOn(e){throw gC("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Un.MIN}maxPost(){return new Un(b0,vN)}makePost(e,n){return We(typeof e=="string","KeyIndex indexValue must always be a string."),new Un(e,vN)}toString(){return".key"}}const ev=new YY;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Di{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Di.RED,this.left=s??ec.EMPTY_NODE,this.right=i??ec.EMPTY_NODE}copy(e,n,r,s,i){return new Di(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ec.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ec.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Di.RED=!0;Di.BLACK=!1;class Sfe{copy(e,n,r,s,i){return this}insert(e,n,r){return new Di(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ec{constructor(e,n=ec.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ec(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Di.BLACK,null,null))}remove(e){return new ec(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Di.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new EN(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new EN(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new EN(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new EN(this.root_,null,this.comparator_,!0,e)}}ec.EMPTY_NODE=new Sfe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ife(t,e){return yC(t.name,e.name)}function z6(t,e){return yC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nB;function Nfe(t){nB=t}const QY=function(t){return typeof t=="number"?"number:"+IY(t):"string:"+t},JY=function(t){if(t.isLeafNode()){const e=t.val();We(typeof e=="string"||typeof e=="number"||typeof e=="object"&&$f(e,".sv"),"Priority must be a string or number.")}else We(t===nB||t.isEmpty(),"priority of unexpected type.");We(t===nB||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cj;class Oi{constructor(e,n=Oi.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,We(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),JY(this.priorityNode_)}static set __childrenNodeConstructor(e){Cj=e}static get __childrenNodeConstructor(){return Cj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Oi(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Oi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return zn(e)?this:Bn(e)===".priority"?this.priorityNode_:Oi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Oi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Bn(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(We(r!==".priority"||tm(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Oi.__childrenNodeConstructor.EMPTY_NODE.updateChild(as(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+QY(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=IY(this.value_):e+=this.value_,this.lazyHash_=_Y(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Oi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Oi.__childrenNodeConstructor?-1:(We(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Oi.VALUE_TYPE_ORDER.indexOf(n),i=Oi.VALUE_TYPE_ORDER.indexOf(r);return We(s>=0,"Unknown leaf type: "+n),We(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Oi.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZY,XY;function xfe(t){ZY=t}function Tfe(t){XY=t}class Rfe extends s2{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?yC(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Un.MIN}maxPost(){return new Un(b0,new Oi("[PRIORITY-POST]",XY))}makePost(e,n){const r=ZY(e);return new Un(n,new Oi("[PRIORITY-POST]",r))}toString(){return".priority"}}const Gs=new Rfe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kfe=Math.log(2);class Pfe{constructor(e){const n=i=>parseInt(Math.log(i)/kfe,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const XT=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Di(h,d.node,Di.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new Di(h,d.node,Di.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const m=d-p,y=d;d-=p;const w=s(m+1,y),C=t[m],N=n?n(C):C;f(new Di(N,C.node,g,null,w))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),m=Math.pow(2,c.count-(p+1));g?h(m,Di.BLACK):(h(m,Di.BLACK),h(m,Di.RED))}return u},o=new Pfe(t.length),a=i(o);return new ec(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PO;const Rw={};class cf{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return We(Rw&&Gs,"ChildrenNode.ts has not been loaded"),PO=PO||new cf({".priority":Rw},{".priority":Gs}),PO}get(e){const n=vE(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ec?n:null}hasIndex(e){return $f(this.indexSet_,e.toString())}addIndex(e,n){We(e!==ev,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Un.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=XT(r,e.getCompare()):a=Rw;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new cf(u,l)}addToIndexes(e,n){const r=YT(this.indexes_,(s,i)=>{const o=vE(this.indexSet_,i);if(We(o,"Missing index implementation for "+i),s===Rw)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Un.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),XT(a,o.getCompare())}else return Rw;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Un(e.name,a))),c.insert(e,e.node)}});return new cf(r,this.indexSet_)}removeFromIndexes(e,n){const r=YT(this.indexes_,s=>{if(s===Rw)return s;{const i=n.get(e.name);return i?s.remove(new Un(e.name,i)):s}});return new cf(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n1;class on{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&JY(this.priorityNode_),this.children_.isEmpty()&&We(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return n1||(n1=new on(new ec(z6),null,cf.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||n1}updatePriority(e){return this.children_.isEmpty()?this:new on(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?n1:n}}getChild(e){const n=Bn(e);return n===null?this:this.getImmediateChild(n).getChild(as(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(We(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Un(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?n1:this.priorityNode_;return new on(s,o,i)}}updateChild(e,n){const r=Bn(e);if(r===null)return n;{We(Bn(e)!==".priority"||tm(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(as(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Gs,(o,a)=>{n[o]=a.val(e),r++,i&&on.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+QY(this.getPriority().val())+":"),this.forEachChild(Gs,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":_Y(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Un(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Un(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Un(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Un.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Un.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===pI?-1:0}withIndex(e){if(e===ev||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new on(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ev||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Gs),s=n.getIterator(Gs);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ev?null:this.indexMap_.get(e.toString())}}on.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Ofe extends on{constructor(){super(new ec(z6),on.EMPTY_NODE,cf.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return on.EMPTY_NODE}isEmpty(){return!1}}const pI=new Ofe;Object.defineProperties(Un,{MIN:{value:new Un(EE,on.EMPTY_NODE)},MAX:{value:new Un(b0,pI)}});YY.__EMPTY_NODE=on.EMPTY_NODE;Oi.__childrenNodeConstructor=on;Nfe(pI);Tfe(pI);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dfe=!0;function Ui(t,e=null){if(t===null)return on.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),We(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Oi(n,Ui(e))}if(!(t instanceof Array)&&Dfe){const n=[];let r=!1;if(uc(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Ui(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Un(o,c)))}}),n.length===0)return on.EMPTY_NODE;const i=XT(n,Ife,o=>o.name,z6);if(r){const o=XT(n,Gs.getCompare());return new on(i,Ui(e),new cf({".priority":o},{".priority":Gs}))}else return new on(i,Ui(e),cf.Default)}else{let n=on.EMPTY_NODE;return uc(t,(r,s)=>{if($f(t,r)&&r.substring(0,1)!=="."){const i=Ui(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Ui(e))}}xfe(Ui);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mfe extends s2{constructor(e){super(),this.indexPath_=e,We(!zn(e)&&Bn(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?yC(e.name,n.name):i}makePost(e,n){const r=Ui(e),s=on.EMPTY_NODE.updateChild(this.indexPath_,r);return new Un(n,s)}maxPost(){const e=on.EMPTY_NODE.updateChild(this.indexPath_,pI);return new Un(b0,e)}toString(){return qY(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bfe extends s2{compare(e,n){const r=e.node.compareTo(n.node);return r===0?yC(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Un.MIN}maxPost(){return Un.MAX}makePost(e,n){const r=Ui(e);return new Un(n,r)}toString(){return".value"}}const Ufe=new Bfe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eQ(t){return{type:"value",snapshotNode:t}}function CE(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function iA(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function oA(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Lfe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){We(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(iA(n,a)):We(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(CE(n,r)):o.trackChildChange(oA(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Gs,(s,i)=>{n.hasChild(s)||r.trackChildChange(iA(s,i))}),n.isLeafNode()||n.forEachChild(Gs,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(oA(s,i,o))}else r.trackChildChange(CE(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?on.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.indexedFilter_=new H6(e.getIndex()),this.index_=e.getIndex(),this.startPost_=aA.getStartPost_(e),this.endPost_=aA.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Un(n,r))||(r=on.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=on.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(on.EMPTY_NODE);const i=this;return n.forEachChild(Gs,(o,a)=>{i.matches(new Un(o,a))||(s=s.updateImmediateChild(o,on.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $fe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new aA(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Un(n,r))||(r=on.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=on.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=on.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(on.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,on.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;We(a.numChildren()===this.limit_,"");const c=new Un(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(oA(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(iA(n,d));const g=a.updateImmediateChild(n,on.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(CE(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(iA(l.name,l.node)),i.trackChildChange(CE(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,on.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gs}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return We(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return We(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:EE}hasEnd(){return this.endSet_}getIndexEndValue(){return We(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return We(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:b0}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return We(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gs}copy(){const e=new G6;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ffe(t){return t.loadsAllData()?new H6(t.getIndex()):t.hasLimit()?new $fe(t):new aA(t)}function _j(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Gs?n="$priority":t.index_===Ufe?n="$value":t.index_===ev?n="$key":(We(t.index_ instanceof Mfe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=bi(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=bi(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+bi(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=bi(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+bi(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Aj(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Gs&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR extends zY{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=fI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(We(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=eR.getListenId_(e,r),a={};this.listens_[o]=a;const c=_j(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),vE(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=eR.getListenId_(e,n);delete this.listens_[r]}get(e){const n=_j(e._queryParams),r=e._path.toString(),s=new n2;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+fde(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=eA(a.responseText)}catch{rc("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&rc("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jfe{constructor(){this.rootNode_=on.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){return{value:null,children:new Map}}function tQ(t,e,n){if(zn(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Bn(e);t.children.has(r)||t.children.set(r,tR());const s=t.children.get(r);e=as(e),tQ(s,e,n)}}function rB(t,e,n){t.value!==null?n(e,t.value):Wfe(t,(r,s)=>{const i=new Qr(e.toString()+"/"+r);rB(s,i,n)})}function Wfe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zfe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&uc(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=10*1e3,Hfe=30*1e3,Gfe=5*60*1e3;class qfe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new zfe(e);const r=Sj+(Hfe-Sj)*Math.random();w_(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;uc(e,(s,i)=>{i>0&&$f(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),w_(this.reportStats_.bind(this),Math.floor(Math.random()*2*Gfe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xu;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(xu||(xu={}));function nQ(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function q6(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function V6(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=xu.ACK_USER_WRITE,this.source=nQ()}operationForChild(e){if(zn(this.path)){if(this.affectedTree.value!=null)return We(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Qr(e));return new nR(pr(),n,this.revert)}}else return We(Bn(this.path)===e,"operationForChild called for unrelated child."),new nR(as(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n){this.source=e,this.path=n,this.type=xu.LISTEN_COMPLETE}operationForChild(e){return zn(this.path)?new cA(this.source,pr()):new cA(this.source,as(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=xu.OVERWRITE}operationForChild(e){return zn(this.path)?new v0(this.source,pr(),this.snap.getImmediateChild(e)):new v0(this.source,as(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=xu.MERGE}operationForChild(e){if(zn(this.path)){const n=this.children.subtree(new Qr(e));return n.isEmpty()?null:n.value?new v0(this.source,pr(),n.value):new lA(this.source,pr(),n)}else return We(Bn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new lA(this.source,as(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(zn(e))return this.isFullyInitialized()&&!this.filtered_;const n=Bn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vfe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Kfe(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Lfe(o.childName,o.snapshotNode))}),r1(t,s,"child_removed",e,r,n),r1(t,s,"child_added",e,r,n),r1(t,s,"child_moved",i,r,n),r1(t,s,"child_changed",e,r,n),r1(t,s,"value",e,r,n),s}function r1(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Qfe(t,a,c)),o.forEach(a=>{const c=Yfe(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Yfe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Qfe(t,e,n){if(e.childName==null||n.childName==null)throw gC("Should only compare child_ events.");const r=new Un(e.childName,e.snapshotNode),s=new Un(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t,e){return{eventCache:t,serverCache:e}}function b_(t,e,n,r){return i2(new nm(e,n,r),t.serverCache)}function rQ(t,e,n,r){return i2(t.eventCache,new nm(e,n,r))}function rR(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function E0(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OO;const Jfe=()=>(OO||(OO=new ec(Bhe)),OO);class ws{constructor(e,n=Jfe()){this.value=e,this.children=n}static fromObject(e){let n=new ws(null);return uc(e,(r,s)=>{n=n.set(new Qr(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:pr(),value:this.value};if(zn(e))return null;{const r=Bn(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(as(e),n);return i!=null?{path:vi(new Qr(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(zn(e))return this;{const n=Bn(e),r=this.children.get(n);return r!==null?r.subtree(as(e)):new ws(null)}}set(e,n){if(zn(e))return new ws(n,this.children);{const r=Bn(e),i=(this.children.get(r)||new ws(null)).set(as(e),n),o=this.children.insert(r,i);return new ws(this.value,o)}}remove(e){if(zn(e))return this.children.isEmpty()?new ws(null):new ws(null,this.children);{const n=Bn(e),r=this.children.get(n);if(r){const s=r.remove(as(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ws(null):new ws(this.value,i)}else return this}}get(e){if(zn(e))return this.value;{const n=Bn(e),r=this.children.get(n);return r?r.get(as(e)):null}}setTree(e,n){if(zn(e))return n;{const r=Bn(e),i=(this.children.get(r)||new ws(null)).setTree(as(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ws(this.value,o)}}fold(e){return this.fold_(pr(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(vi(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,pr(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(zn(e))return null;{const i=Bn(e),o=this.children.get(i);return o?o.findOnPath_(as(e),vi(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,pr(),n)}foreachOnPath_(e,n,r){if(zn(e))return this;{this.value&&r(n,this.value);const s=Bn(e),i=this.children.get(s);return i?i.foreachOnPath_(as(e),vi(n,s),r):new ws(null)}}foreach(e){this.foreach_(pr(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(vi(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.writeTree_=e}static empty(){return new ku(new ws(null))}}function v_(t,e,n){if(zn(e))return new ku(new ws(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=aa(s,e);return i=i.updateChild(o,n),new ku(t.writeTree_.set(s,i))}else{const s=new ws(n),i=t.writeTree_.setTree(e,s);return new ku(i)}}}function Ij(t,e,n){let r=t;return uc(n,(s,i)=>{r=v_(r,vi(e,s),i)}),r}function Nj(t,e){if(zn(e))return ku.empty();{const n=t.writeTree_.setTree(e,new ws(null));return new ku(n)}}function sB(t,e){return tw(t,e)!=null}function tw(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(aa(n.path,e)):null}function xj(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Gs,(r,s)=>{e.push(new Un(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Un(r,s.value))}),e}function kg(t,e){if(zn(e))return t;{const n=tw(t,e);return n!=null?new ku(new ws(n)):new ku(t.writeTree_.subtree(e))}}function iB(t){return t.writeTree_.isEmpty()}function _E(t,e){return sQ(pr(),t.writeTree_,e)}function sQ(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(We(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=sQ(vi(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(vi(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t,e){return cQ(e,t)}function Zfe(t,e,n,r,s){We(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=v_(t.visibleWrites,e,n)),t.lastWriteId=r}function Xfe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function epe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);We(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&tpe(a,r.path)?s=!1:Nu(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return npe(t),!0;if(r.snap)t.visibleWrites=Nj(t.visibleWrites,r.path);else{const a=r.children;uc(a,c=>{t.visibleWrites=Nj(t.visibleWrites,vi(r.path,c))})}return!0}else return!1}function tpe(t,e){if(t.snap)return Nu(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Nu(vi(t.path,n),e))return!0;return!1}function npe(t){t.visibleWrites=iQ(t.allWrites,rpe,pr()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function rpe(t){return t.visible}function iQ(t,e,n){let r=ku.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Nu(n,o)?(a=aa(n,o),r=v_(r,a,i.snap)):Nu(o,n)&&(a=aa(o,n),r=v_(r,pr(),i.snap.getChild(a)));else if(i.children){if(Nu(n,o))a=aa(n,o),r=Ij(r,a,i.children);else if(Nu(o,n))if(a=aa(o,n),zn(a))r=Ij(r,pr(),i.children);else{const c=vE(i.children,Bn(a));if(c){const l=c.getChild(as(a));r=v_(r,pr(),l)}}}else throw gC("WriteRecord should have .snap or .children")}}return r}function oQ(t,e,n,r,s){if(!r&&!s){const i=tw(t.visibleWrites,e);if(i!=null)return i;{const o=kg(t.visibleWrites,e);if(iB(o))return n;if(n==null&&!sB(o,pr()))return null;{const a=n||on.EMPTY_NODE;return _E(o,a)}}}else{const i=kg(t.visibleWrites,e);if(!s&&iB(i))return n;if(!s&&n==null&&!sB(i,pr()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(Nu(l.path,e)||Nu(e,l.path))},a=iQ(t.allWrites,o,e),c=n||on.EMPTY_NODE;return _E(a,c)}}}function spe(t,e,n){let r=on.EMPTY_NODE;const s=tw(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Gs,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=kg(t.visibleWrites,e);return n.forEachChild(Gs,(o,a)=>{const c=_E(kg(i,new Qr(o)),a);r=r.updateImmediateChild(o,c)}),xj(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=kg(t.visibleWrites,e);return xj(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function ipe(t,e,n,r,s){We(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=vi(e,n);if(sB(t.visibleWrites,i))return null;{const o=kg(t.visibleWrites,i);return iB(o)?s.getChild(n):_E(o,s.getChild(n))}}function ope(t,e,n,r){const s=vi(e,n),i=tw(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=kg(t.visibleWrites,s);return _E(o,r.getNode().getImmediateChild(n))}else return null}function ape(t,e){return tw(t.visibleWrites,e)}function cpe(t,e,n,r,s,i,o){let a;const c=kg(t.visibleWrites,e),l=tw(c,pr());if(l!=null)a=l;else if(n!=null)a=_E(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function lpe(){return{visibleWrites:ku.empty(),allWrites:[],lastWriteId:-1}}function sR(t,e,n,r){return oQ(t.writeTree,t.treePath,e,n,r)}function K6(t,e){return spe(t.writeTree,t.treePath,e)}function Tj(t,e,n,r){return ipe(t.writeTree,t.treePath,e,n,r)}function iR(t,e){return ape(t.writeTree,vi(t.treePath,e))}function upe(t,e,n,r,s,i){return cpe(t.writeTree,t.treePath,e,n,r,s,i)}function Y6(t,e,n){return ope(t.writeTree,t.treePath,e,n)}function aQ(t,e){return cQ(vi(t.treePath,e),t.writeTree)}function cQ(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dpe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;We(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),We(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,oA(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,iA(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,CE(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,oA(r,e.snapshotNode,s.oldSnap));else throw gC("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hpe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const lQ=new hpe;class Q6{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new nm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Y6(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:E0(this.viewCache_),i=upe(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fpe(t){return{filter:t}}function ppe(t,e){We(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),We(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function gpe(t,e,n,r,s){const i=new dpe;let o,a;if(n.type===xu.OVERWRITE){const l=n;l.source.fromUser?o=oB(t,e,l.path,l.snap,r,s,i):(We(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!zn(l.path),o=oR(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===xu.MERGE){const l=n;l.source.fromUser?o=ype(t,e,l.path,l.children,r,s,i):(We(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=aB(t,e,l.path,l.children,r,s,a,i))}else if(n.type===xu.ACK_USER_WRITE){const l=n;l.revert?o=vpe(t,e,l.path,r,s,i):o=wpe(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===xu.LISTEN_COMPLETE)o=bpe(t,e,n.path,r,i);else throw gC("Unknown operation type: "+n.type);const c=i.getChanges();return mpe(e,o,c),{viewCache:o,changes:c}}function mpe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=rR(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(eQ(rR(e)))}}function uQ(t,e,n,r,s,i){const o=e.eventCache;if(iR(r,n)!=null)return e;{let a,c;if(zn(n))if(We(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=E0(e),u=l instanceof on?l:on.EMPTY_NODE,d=K6(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=sR(r,E0(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Bn(n);if(l===".priority"){We(tm(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=Tj(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=as(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=Tj(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=Y6(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return b_(e,a,o.isFullyInitialized()||zn(n),t.filter.filtersNodes())}}function oR(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(zn(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Bn(n);if(!c.isCompleteForPath(n)&&tm(n)>1)return e;const p=as(n),m=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),m):l=u.updateChild(c.getNode(),f,m,p,lQ,null)}const d=rQ(e,l,c.isFullyInitialized()||zn(n),u.filtersNodes()),h=new Q6(s,d,i);return uQ(t,d,n,s,h,a)}function oB(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new Q6(s,e,i);if(zn(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=b_(e,l,!0,t.filter.filtersNodes());else{const d=Bn(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=b_(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=as(n),f=a.getNode().getImmediateChild(d);let p;if(zn(h))p=r;else{const g=u.getCompleteChild(d);g!=null?GY(h)===".priority"&&g.getChild(VY(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=on.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=b_(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Rj(t,e){return t.eventCache.isCompleteForChild(e)}function ype(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=vi(n,c);Rj(e,Bn(u))&&(a=oB(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=vi(n,c);Rj(e,Bn(u))||(a=oB(t,a,u,l,s,i,o))}),a}function kj(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function aB(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;zn(n)?l=r:l=new ws(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=kj(t,f,h);c=oR(t,c,new Qr(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=kj(t,p,h);c=oR(t,c,new Qr(d),g,s,i,o,a)}}),c}function wpe(t,e,n,r,s,i,o){if(iR(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(zn(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return oR(t,e,n,c.getNode().getChild(n),s,i,a,o);if(zn(n)){let l=new ws(null);return c.getNode().forEachChild(ev,(u,d)=>{l=l.set(new Qr(u),d)}),aB(t,e,n,l,s,i,a,o)}else return e}else{let l=new ws(null);return r.foreach((u,d)=>{const h=vi(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),aB(t,e,n,l,s,i,a,o)}}function bpe(t,e,n,r,s){const i=e.serverCache,o=rQ(e,i.getNode(),i.isFullyInitialized()||zn(n),i.isFiltered());return uQ(t,o,n,r,lQ,s)}function vpe(t,e,n,r,s,i){let o;if(iR(r,n)!=null)return e;{const a=new Q6(r,e,s),c=e.eventCache.getNode();let l;if(zn(n)||Bn(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=sR(r,E0(e));else{const d=e.serverCache.getNode();We(d instanceof on,"serverChildren would be complete if leaf node"),u=K6(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Bn(n);let d=Y6(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,as(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,on.EMPTY_NODE,as(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=sR(r,E0(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||iR(r,pr())!=null,b_(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Epe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new H6(r.getIndex()),i=Ffe(r);this.processor_=fpe(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(on.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(on.EMPTY_NODE,a.getNode(),null),u=new nm(c,o.isFullyInitialized(),s.filtersNodes()),d=new nm(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=i2(d,u),this.eventGenerator_=new Vfe(this.query_)}get query(){return this.query_}}function Cpe(t){return t.viewCache_.serverCache.getNode()}function _pe(t){return rR(t.viewCache_)}function Ape(t,e){const n=E0(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!zn(e)&&!n.getImmediateChild(Bn(e)).isEmpty())?n.getChild(e):null}function Pj(t){return t.eventRegistrations_.length===0}function Spe(t,e){t.eventRegistrations_.push(e)}function Oj(t,e,n){const r=[];if(n){We(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Dj(t,e,n,r){e.type===xu.MERGE&&e.source.queryId!==null&&(We(E0(t.viewCache_),"We should always have a full cache before handling merges"),We(rR(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=gpe(t.processor_,s,e,n,r);return ppe(t.processor_,i.viewCache),We(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,dQ(t,i.changes,i.viewCache.eventCache.getNode(),null)}function Ipe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Gs,(i,o)=>{r.push(CE(i,o))}),n.isFullyInitialized()&&r.push(eQ(n.getNode())),dQ(t,r,n.getNode(),e)}function dQ(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Kfe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aR;class hQ{constructor(){this.views=new Map}}function Npe(t){We(!aR,"__referenceConstructor has already been defined"),aR=t}function xpe(){return We(aR,"Reference.ts has not been loaded"),aR}function Tpe(t){return t.views.size===0}function J6(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return We(i!=null,"SyncTree gave us an op for an invalid query."),Dj(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Dj(o,e,n,r));return i}}function fQ(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=sR(n,s?r:null),c=!1;a?c=!0:r instanceof on?(a=K6(n,r),c=!1):(a=on.EMPTY_NODE,c=!1);const l=i2(new nm(a,c,!1),new nm(r,s,!1));return new Epe(e,l)}return o}function Rpe(t,e,n,r,s,i){const o=fQ(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Spe(o,n),Ipe(o,n)}function kpe(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=rm(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(Oj(l,n,r)),Pj(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(Oj(c,n,r)),Pj(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!rm(t)&&i.push(new(xpe())(e._repo,e._path)),{removed:i,events:o}}function pQ(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Pg(t,e){let n=null;for(const r of t.views.values())n=n||Ape(r,e);return n}function gQ(t,e){if(e._queryParams.loadsAllData())return a2(t);{const r=e._queryIdentifier;return t.views.get(r)}}function mQ(t,e){return gQ(t,e)!=null}function rm(t){return a2(t)!=null}function a2(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cR;function Ppe(t){We(!cR,"__referenceConstructor has already been defined"),cR=t}function Ope(){return We(cR,"Reference.ts has not been loaded"),cR}let Dpe=1;class Mj{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ws(null),this.pendingWriteTree_=lpe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function yQ(t,e,n,r,s){return Zfe(t.pendingWriteTree_,e,n,r,s),s?mI(t,new v0(nQ(),e,n)):[]}function gy(t,e,n=!1){const r=Xfe(t.pendingWriteTree_,e);if(epe(t.pendingWriteTree_,e)){let i=new ws(null);return r.snap!=null?i=i.set(pr(),!0):uc(r.children,o=>{i=i.set(new Qr(o),!0)}),mI(t,new nR(r.path,i,n))}else return[]}function gI(t,e,n){return mI(t,new v0(q6(),e,n))}function Mpe(t,e,n){const r=ws.fromObject(n);return mI(t,new lA(q6(),e,r))}function Bpe(t,e){return mI(t,new cA(q6(),e))}function Upe(t,e,n){const r=X6(t,n);if(r){const s=e8(r),i=s.path,o=s.queryId,a=aa(i,e),c=new cA(V6(o),a);return t8(t,i,c)}else return[]}function lR(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||mQ(o,e))){const c=kpe(o,e,n,r);Tpe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>rm(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=Fpe(h);for(let p=0;p<f.length;++p){const g=f[p],m=g.query,y=EQ(t,g);t.listenProvider_.startListening(E_(m),uA(t,m),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(E_(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(c2(h));t.listenProvider_.stopListening(E_(h),f)}))}jpe(t,l)}return a}function wQ(t,e,n,r){const s=X6(t,r);if(s!=null){const i=e8(s),o=i.path,a=i.queryId,c=aa(o,e),l=new v0(V6(a),c,n);return t8(t,o,l)}else return[]}function Lpe(t,e,n,r){const s=X6(t,r);if(s){const i=e8(s),o=i.path,a=i.queryId,c=aa(o,e),l=ws.fromObject(n),u=new lA(V6(a),c,l);return t8(t,o,u)}else return[]}function cB(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=aa(h,s);i=i||Pg(f,p),o=o||rm(f)});let a=t.syncPointTree_.get(s);a?(o=o||rm(a),i=i||Pg(a,pr())):(a=new hQ,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=on.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Pg(p,pr());g&&(i=i.updateImmediateChild(f,g))}));const l=mQ(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=c2(e);We(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Wpe();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=o2(t.pendingWriteTree_,s);let d=Rpe(a,e,n,u,i,c);if(!l&&!o&&!r){const h=gQ(a,e);d=d.concat(zpe(t,e,h))}return d}function Z6(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=aa(o,e),l=Pg(a,c);if(l)return l});return oQ(s,e,i,n,!0)}function $pe(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=aa(l,n);r=r||Pg(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Pg(s,pr()):(s=new hQ,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new nm(r,!0,!1):null,a=o2(t.pendingWriteTree_,e._path),c=fQ(s,e,a,i?o.getNode():on.EMPTY_NODE,i);return _pe(c)}function mI(t,e){return bQ(e,t.syncPointTree_,null,o2(t.pendingWriteTree_,pr()))}function bQ(t,e,n,r){if(zn(t.path))return vQ(t,e,n,r);{const s=e.get(pr());n==null&&s!=null&&(n=Pg(s,pr()));let i=[];const o=Bn(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=aQ(r,o);i=i.concat(bQ(a,c,l,u))}return s&&(i=i.concat(J6(s,t,r,n))),i}}function vQ(t,e,n,r){const s=e.get(pr());n==null&&s!=null&&(n=Pg(s,pr()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=aQ(r,o),u=t.operationForChild(o);u&&(i=i.concat(vQ(u,a,c,l)))}),s&&(i=i.concat(J6(s,t,r,n))),i}function EQ(t,e){const n=e.query,r=uA(t,n);return{hashFn:()=>(Cpe(e)||on.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Upe(t,n._path,r):Bpe(t,n._path);{const i=$he(s,n);return lR(t,n,null,i)}}}}function uA(t,e){const n=c2(e);return t.queryToTagMap.get(n)}function c2(t){return t._path.toString()+"$"+t._queryIdentifier}function X6(t,e){return t.tagToQueryMap.get(e)}function e8(t){const e=t.indexOf("$");return We(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Qr(t.substr(0,e))}}function t8(t,e,n){const r=t.syncPointTree_.get(e);We(r,"Missing sync point for query tag that we're tracking");const s=o2(t.pendingWriteTree_,e);return J6(r,n,s,null)}function Fpe(t){return t.fold((e,n,r)=>{if(n&&rm(n))return[a2(n)];{let s=[];return n&&(s=pQ(n)),uc(r,(i,o)=>{s=s.concat(o)}),s}})}function E_(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Ope())(t._repo,t._path):t}function jpe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=c2(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Wpe(){return Dpe++}function zpe(t,e,n){const r=e._path,s=uA(t,e),i=EQ(t,n),o=t.listenProvider_.startListening(E_(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)We(!rm(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!zn(l)&&u&&rm(u))return[a2(u).query];{let h=[];return u&&(h=h.concat(pQ(u).map(f=>f.query))),uc(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(E_(u),uA(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new n8(n)}node(){return this.node_}}class r8{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=vi(this.path_,e);return new r8(this.syncTree_,n)}node(){return Z6(this.syncTree_,this.path_)}}const Hpe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Bj=function(t,e,n){if(!t||typeof t!="object")return t;if(We(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Gpe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return qpe(t[".sv"],e);We(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Gpe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:We(!1,"Unexpected server value: "+t)}},qpe=function(t,e,n){t.hasOwnProperty("increment")||We(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&We(!1,"Unexpected increment value: "+r);const s=e.node();if(We(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},Vpe=function(t,e,n,r){return s8(e,new r8(n,t),r)},CQ=function(t,e,n){return s8(t,new n8(e),n)};function s8(t,e,n){const r=t.getPriority().val(),s=Bj(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=Bj(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Oi(a,Ui(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Oi(s))),o.forEachChild(Gs,(a,c)=>{const l=s8(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function o8(t,e){let n=e instanceof Qr?e:new Qr(e),r=t,s=Bn(n);for(;s!==null;){const i=vE(r.node.children,s)||{children:{},childCount:0};r=new i8(s,r,i),n=as(n),s=Bn(n)}return r}function bC(t){return t.node.value}function _Q(t,e){t.node.value=e,lB(t)}function AQ(t){return t.node.childCount>0}function Kpe(t){return bC(t)===void 0&&!AQ(t)}function l2(t,e){uc(t.node.children,(n,r)=>{e(new i8(n,t,r))})}function SQ(t,e,n,r){n&&e(t),l2(t,s=>{SQ(s,e,!0)})}function Ype(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function yI(t){return new Qr(t.parent===null?t.name:yI(t.parent)+"/"+t.name)}function lB(t){t.parent!==null&&Qpe(t.parent,t.name,t)}function Qpe(t,e,n){const r=Kpe(n),s=$f(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,lB(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,lB(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jpe=/[\[\].#$\/\u0000-\u001F\u007F]/,Zpe=/[\[\].#$\u0000-\u001F\u007F]/,DO=10*1024*1024,IQ=function(t){return typeof t=="string"&&t.length!==0&&!Jpe.test(t)},NQ=function(t){return typeof t=="string"&&t.length!==0&&!Zpe.test(t)},Xpe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),NQ(t)},ege=function(t,e,n,r){a8(M6(t,"value"),e,n)},a8=function(t,e,n){const r=n instanceof Qr?new wfe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+qm(r));if(typeof e=="function")throw new Error(t+"contains a function "+qm(r)+" with contents = "+e.toString());if(AY(e))throw new Error(t+"contains "+e.toString()+" "+qm(r));if(typeof e=="string"&&e.length>DO/3&&r2(e)>DO)throw new Error(t+"contains a string greater than "+DO+" utf8 bytes "+qm(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(uc(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!IQ(o)))throw new Error(t+" contains an invalid key ("+o+") "+qm(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);bfe(r,o),a8(t,a,r),vfe(r)}),s&&i)throw new Error(t+' contains ".value" child '+qm(r)+" in addition to actual children.")}},xQ=function(t,e,n,r){if(!NQ(n))throw new Error(M6(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},tge=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),xQ(t,e,n)},TQ=function(t,e){if(Bn(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},nge=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!IQ(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Xpe(n))throw new Error(M6(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rge{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function c8(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!j6(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function RQ(t,e,n){c8(t,n),kQ(t,r=>j6(r,e))}function Vd(t,e,n){c8(t,n),kQ(t,r=>Nu(r,e)||Nu(e,r))}function kQ(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(sge(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function sge(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();y_&&Uo("event: "+n.toString()),wC(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ige="repo_interrupt",oge=25;class age{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rge,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tR(),this.transactionQueueTree_=new i8,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cge(t,e,n){if(t.stats_=$6(t.repoInfo_),t.forceRestClient_||zhe())t.server_=new eR(t.repoInfo_,(r,s,i,o)=>{Uj(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Lj(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bi(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new gf(t.repoInfo_,e,(r,s,i,o)=>{Uj(t,r,s,i,o)},r=>{Lj(t,r)},r=>{uge(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Khe(t.repoInfo_,()=>new qfe(t.stats_,t.server_)),t.infoData_=new jfe,t.infoSyncTree_=new Mj({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=gI(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),u8(t,"connected",!1),t.serverSyncTree_=new Mj({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Vd(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function lge(t){const n=t.infoData_.getNode(new Qr(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function l8(t){return Hpe({timestamp:lge(t)})}function Uj(t,e,n,r,s){t.dataUpdateCount++;const i=new Qr(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=YT(n,l=>Ui(l));o=Lpe(t.serverSyncTree_,i,c,s)}else{const c=Ui(n);o=wQ(t.serverSyncTree_,i,c,s)}else if(r){const c=YT(n,l=>Ui(l));o=Mpe(t.serverSyncTree_,i,c)}else{const c=Ui(n);o=gI(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=d2(t,i)),Vd(t.eventQueue_,a,o)}function Lj(t,e){u8(t,"connected",e),e===!1&&fge(t)}function uge(t,e){uc(e,(n,r)=>{u8(t,n,r)})}function u8(t,e,n){const r=new Qr("/.info/"+e),s=Ui(n);t.infoData_.updateSnapshot(r,s);const i=gI(t.infoSyncTree_,r,s);Vd(t.eventQueue_,r,i)}function PQ(t){return t.nextWriteId_++}function dge(t,e,n){const r=$pe(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Ui(s).withIndex(e._queryParams.getIndex());cB(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=gI(t.serverSyncTree_,e._path,i);else{const a=uA(t.serverSyncTree_,e);o=wQ(t.serverSyncTree_,e._path,i,a)}return Vd(t.eventQueue_,e._path,o),lR(t.serverSyncTree_,e,n,null,!0),i},s=>(u2(t,"get for query "+bi(e)+" failed: "+s),Promise.reject(new Error(s))))}function hge(t,e,n,r,s){u2(t,"set",{path:e.toString(),value:n,priority:r});const i=l8(t),o=Ui(n,r),a=Z6(t.serverSyncTree_,e),c=CQ(o,a,i),l=PQ(t),u=yQ(t.serverSyncTree_,e,c,l,!0);c8(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||rc("set at "+e+" failed: "+h);const g=gy(t.serverSyncTree_,l,!p);Vd(t.eventQueue_,e,g),yge(t,s,h,f)});const d=UQ(t,e);d2(t,d),Vd(t.eventQueue_,d,[])}function fge(t){u2(t,"onDisconnectEvents");const e=l8(t),n=tR();rB(t.onDisconnect_,pr(),(s,i)=>{const o=Vpe(s,i,t.serverSyncTree_,e);tQ(n,s,o)});let r=[];rB(n,pr(),(s,i)=>{r=r.concat(gI(t.serverSyncTree_,s,i));const o=UQ(t,s);d2(t,o)}),t.onDisconnect_=tR(),Vd(t.eventQueue_,pr(),r)}function pge(t,e,n){let r;Bn(e._path)===".info"?r=cB(t.infoSyncTree_,e,n):r=cB(t.serverSyncTree_,e,n),RQ(t.eventQueue_,e._path,r)}function gge(t,e,n){let r;Bn(e._path)===".info"?r=lR(t.infoSyncTree_,e,n):r=lR(t.serverSyncTree_,e,n),RQ(t.eventQueue_,e._path,r)}function mge(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ige)}function u2(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Uo(n,...e)}function yge(t,e,n,r){e&&wC(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function OQ(t,e,n){return Z6(t.serverSyncTree_,e,n)||on.EMPTY_NODE}function d8(t,e=t.transactionQueueTree_){if(e||h2(t,e),bC(e)){const n=MQ(t,e);We(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&wge(t,yI(e),n)}else AQ(e)&&l2(e,n=>{d8(t,n)})}function wge(t,e,n){const r=n.map(l=>l.currentWriteId),s=OQ(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];We(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=aa(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{u2(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(gy(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();h2(t,o8(t.transactionQueueTree_,e)),d8(t,t.transactionQueueTree_),Vd(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)wC(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{rc("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}d2(t,e)}},o)}function d2(t,e){const n=DQ(t,e),r=yI(n),s=MQ(t,n);return bge(t,s,r),r}function bge(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=aa(n,c.path);let u=!1,d;if(We(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(gy(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=oge)u=!0,d="maxretry",s=s.concat(gy(t.serverSyncTree_,c.currentWriteId,!0));else{const h=OQ(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){a8("transaction failed: Data returned ",f,c.path);let p=Ui(f);typeof f=="object"&&f!=null&&$f(f,".priority")||(p=p.updatePriority(h.getPriority()));const m=c.currentWriteId,y=l8(t),w=CQ(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=w,c.currentWriteId=PQ(t),o.splice(o.indexOf(m),1),s=s.concat(yQ(t.serverSyncTree_,c.path,w,c.currentWriteId,c.applyLocally)),s=s.concat(gy(t.serverSyncTree_,m,!0))}else u=!0,d="nodata",s=s.concat(gy(t.serverSyncTree_,c.currentWriteId,!0))}Vd(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}h2(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)wC(r[a]);d8(t,t.transactionQueueTree_)}function DQ(t,e){let n,r=t.transactionQueueTree_;for(n=Bn(e);n!==null&&bC(r)===void 0;)r=o8(r,n),e=as(e),n=Bn(e);return r}function MQ(t,e){const n=[];return BQ(t,e,n),n.sort((r,s)=>r.order-s.order),n}function BQ(t,e,n){const r=bC(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);l2(e,s=>{BQ(t,s,n)})}function h2(t,e){const n=bC(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,_Q(e,n.length>0?n:void 0)}l2(e,r=>{h2(t,r)})}function UQ(t,e){const n=yI(DQ(t,e)),r=o8(t.transactionQueueTree_,e);return Ype(r,s=>{MO(t,s)}),MO(t,r),SQ(r,s=>{MO(t,s)}),n}function MO(t,e){const n=bC(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(We(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(We(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(gy(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?_Q(e,void 0):n.length=i+1,Vd(t.eventQueue_,yI(e),s);for(let o=0;o<r.length;o++)wC(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vge(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Ege(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):rc(`Invalid query segment '${n}' in query '${t}'`)}return e}const $j=function(t,e){const n=Cge(t),r=n.namespace;n.domain==="firebase.com"&&If(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&If("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Dhe();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new BY(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Qr(n.pathString)}},Cge=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=vge(t.substring(u,d)));const h=Ege(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ge{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+bi(this.snapshot.exportVal())}}class Age{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LQ{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return We(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return zn(this._path)?null:GY(this._path)}get ref(){return new Ff(this._repo,this._path)}get _queryIdentifier(){const e=Aj(this._queryParams),n=U6(e);return n==="{}"?"default":n}get _queryObject(){return Aj(this._queryParams)}isEqual(e){if(e=mC(e),!(e instanceof h8))return!1;const n=this._repo===e._repo,r=j6(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+yfe(this._path)}}class Ff extends h8{constructor(e,n){super(e,n,new G6,!1)}get parent(){const e=VY(this._path);return e===null?null:new Ff(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class dA{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Qr(e),r=uB(this.ref,e);return new dA(this._node.getChild(n),r,Gs)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new dA(s,uB(this.ref,r),Gs)))}hasChild(e){const n=new Qr(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ic(t,e){return t=mC(t),t._checkNotDeleted("ref"),e!==void 0?uB(t._root,e):t._root}function uB(t,e){return t=mC(t),Bn(t._path)===null?tge("child","path",e):xQ("child","path",e),new Ff(t._repo,vi(t._path,e))}function $Q(t){return TQ("remove",t._path),C_(t,null)}function C_(t,e){t=mC(t),TQ("set",t._path),ege("set",e,t._path);const n=new n2;return hge(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ty(t){t=mC(t);const e=new LQ(()=>{}),n=new f2(e);return dge(t._repo,t,n).then(r=>new dA(r,new Ff(t._repo,t._path),t._queryParams.getIndex()))}class f2{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new _ge("value",this,new dA(e.snapshotNode,new Ff(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Age(this,e,n):null}matches(e){return e instanceof f2?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Sge(t,e,n,r,s){const i=new LQ(n,void 0),o=new f2(i);return pge(t._repo,t,o),()=>gge(t._repo,t,o)}function Fj(t,e,n,r){return Sge(t,"value",e)}Npe(Ff);Ppe(Ff);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ige="FIREBASE_DATABASE_EMULATOR_HOST",dB={};let Nge=!1;function xge(t,e,n,r){t.repoInfo_=new BY(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Tge(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||If("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Uo("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=$j(i,s),a=o.repoInfo,c;typeof process<"u"&&oj&&(c=oj[Ige]),c?(i=`http://${c}?ns=${a.namespace}`,o=$j(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Ghe(t.name,t.options,e);nge("Invalid Firebase Database URL",o),zn(o.path)||If("Database URL must point to the root of a Firebase Database (not including a child path).");const u=kge(a,t,l,new Hhe(t.name,n));return new Pge(u,t)}function Rge(t,e){const n=dB[e];(!n||n[t.key]!==t)&&If(`Database ${e}(${t.repoInfo_}) has already been deleted.`),mge(t),delete n[t.key]}function kge(t,e,n,r){let s=dB[e.name];s||(s={},dB[e.name]=s);let i=s[t.toURLString()];return i&&If("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new age(t,Nge,n,r),s[t.toURLString()]=i,i}class Pge{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(cge(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ff(this._repo,pr())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Rge(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&If("Cannot call "+e+" on a deleted database.")}}function Oge(t=wY(),e){const n=hhe(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=tde("database");r&&Dge(n,...r)}return n}function Dge(t,e,n,r={}){t=mC(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&If("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&If('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Qx(Qx.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:nde(r.mockUserToken,t.app.options.projectId);i=new Qx(o)}xge(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mge(t){xhe(ghe),QT(new tA("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Tge(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Zb(aj,cj,t),Zb(aj,cj,"esm2017")}gf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};gf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Mge();const Bge={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},Uge=mhe().length?wY():yY(Bge),uR=Oge(Uge);var hB={},FQ={exports:{}},Jc={},jQ={exports:{}},WQ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(x,B){var W=x.length;x.push(B);e:for(;0<W;){var L=W-1>>>1,S=x[L];if(0<s(S,B))x[L]=B,x[W]=S,W=L;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var B=x[0],W=x.pop();if(W!==B){x[0]=W;e:for(var L=0,S=x.length,F=S>>>1;L<F;){var X=2*(L+1)-1,se=x[X],ge=X+1,Ue=x[ge];if(0>s(se,W))ge<S&&0>s(Ue,se)?(x[L]=Ue,x[ge]=W,L=ge):(x[L]=se,x[X]=W,L=X);else if(ge<S&&0>s(Ue,W))x[L]=Ue,x[ge]=W,L=ge;else break e}}return B}function s(x,B){var W=x.sortIndex-B.sortIndex;return W!==0?W:x.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(x){for(var B=n(l);B!==null;){if(B.callback===null)r(l);else if(B.startTime<=x)r(l),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(l)}}function N(x){if(g=!1,C(x),!p)if(n(c)!==null)p=!0,_(I);else{var B=n(l);B!==null&&D(N,B.startTime-x)}}function I(x,B){p=!1,g&&(g=!1,y(U),U=-1),f=!0;var W=h;try{for(C(B),d=n(c);d!==null&&(!(d.expirationTime>B)||x&&!j());){var L=d.callback;if(typeof L=="function"){d.callback=null,h=d.priorityLevel;var S=L(d.expirationTime<=B);B=t.unstable_now(),typeof S=="function"?d.callback=S:d===n(c)&&r(c),C(B)}else r(c);d=n(c)}if(d!==null)var F=!0;else{var X=n(l);X!==null&&D(N,X.startTime-B),F=!1}return F}finally{d=null,h=W,f=!1}}var k=!1,P=null,U=-1,M=5,H=-1;function j(){return!(t.unstable_now()-H<M)}function K(){if(P!==null){var x=t.unstable_now();H=x;var B=!0;try{B=P(!0,x)}finally{B?$():(k=!1,P=null)}}else k=!1}var $;if(typeof w=="function")$=function(){w(K)};else if(typeof MessageChannel<"u"){var v=new MessageChannel,E=v.port2;v.port1.onmessage=K,$=function(){E.postMessage(null)}}else $=function(){m(K,0)};function _(x){P=x,k||(k=!0,$())}function D(x,B){U=m(function(){x(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(x){x.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,_(I))},t.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<x?Math.floor(1e3/x):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(x){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var W=h;h=B;try{return x()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(x,B){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var W=h;h=x;try{return B()}finally{h=W}},t.unstable_scheduleCallback=function(x,B,W){var L=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?L+W:L):W=L,x){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=W+S,x={id:u++,callback:B,priorityLevel:x,startTime:W,expirationTime:S,sortIndex:-1},W>L?(x.sortIndex=W,e(l,x),n(c)===null&&x===n(l)&&(g?(y(U),U=-1):g=!0,D(N,W-L))):(x.sortIndex=S,e(c,x),p||f||(p=!0,_(I))),x},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(x){var B=h;return function(){var W=h;h=B;try{return x.apply(this,arguments)}finally{h=W}}}})(WQ);jQ.exports=WQ;var Lge=jQ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $ge=G,Kc=Lge;function Me(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zQ=new Set,hA={};function nw(t,e){AE(t,e),AE(t+"Capture",e)}function AE(t,e){for(hA[t]=e,t=0;t<e.length;t++)zQ.add(e[t])}var Nf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fB=Object.prototype.hasOwnProperty,Fge=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jj={},Wj={};function jge(t){return fB.call(Wj,t)?!0:fB.call(jj,t)?!1:Fge.test(t)?Wj[t]=!0:(jj[t]=!0,!1)}function Wge(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zge(t,e,n,r){if(e===null||typeof e>"u"||Wge(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function va(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var wo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wo[t]=new va(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wo[e]=new va(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wo[t]=new va(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wo[t]=new va(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wo[t]=new va(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wo[t]=new va(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wo[t]=new va(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wo[t]=new va(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wo[t]=new va(t,5,!1,t.toLowerCase(),null,!1,!1)});var f8=/[\-:]([a-z])/g;function p8(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(f8,p8);wo[e]=new va(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(f8,p8);wo[e]=new va(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(f8,p8);wo[e]=new va(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wo[t]=new va(t,1,!1,t.toLowerCase(),null,!1,!1)});wo.xlinkHref=new va("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wo[t]=new va(t,1,!1,t.toLowerCase(),null,!0,!0)});function g8(t,e,n,r){var s=wo.hasOwnProperty(e)?wo[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zge(e,n,s,r)&&(n=null),r||s===null?jge(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var jf=$ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,CN=Symbol.for("react.element"),Nb=Symbol.for("react.portal"),xb=Symbol.for("react.fragment"),m8=Symbol.for("react.strict_mode"),pB=Symbol.for("react.profiler"),HQ=Symbol.for("react.provider"),GQ=Symbol.for("react.context"),y8=Symbol.for("react.forward_ref"),gB=Symbol.for("react.suspense"),mB=Symbol.for("react.suspense_list"),w8=Symbol.for("react.memo"),Tp=Symbol.for("react.lazy"),qQ=Symbol.for("react.offscreen"),zj=Symbol.iterator;function s1(t){return t===null||typeof t!="object"?null:(t=zj&&t[zj]||t["@@iterator"],typeof t=="function"?t:null)}var Us=Object.assign,BO;function G1(t){if(BO===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);BO=e&&e[1]||""}return`
`+BO+t}var UO=!1;function LO(t,e){if(!t||UO)return"";UO=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{UO=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?G1(t):""}function Hge(t){switch(t.tag){case 5:return G1(t.type);case 16:return G1("Lazy");case 13:return G1("Suspense");case 19:return G1("SuspenseList");case 0:case 2:case 15:return t=LO(t.type,!1),t;case 11:return t=LO(t.type.render,!1),t;case 1:return t=LO(t.type,!0),t;default:return""}}function yB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xb:return"Fragment";case Nb:return"Portal";case pB:return"Profiler";case m8:return"StrictMode";case gB:return"Suspense";case mB:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GQ:return(t.displayName||"Context")+".Consumer";case HQ:return(t._context.displayName||"Context")+".Provider";case y8:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w8:return e=t.displayName||null,e!==null?e:yB(t.type)||"Memo";case Tp:e=t._payload,t=t._init;try{return yB(t(e))}catch{}}return null}function Gge(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yB(e);case 8:return e===m8?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VQ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qge(t){var e=VQ(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _N(t){t._valueTracker||(t._valueTracker=qge(t))}function KQ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=VQ(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dR(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wB(t,e){var n=e.checked;return Us({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hj(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=sm(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YQ(t,e){e=e.checked,e!=null&&g8(t,"checked",e,!1)}function bB(t,e){YQ(t,e);var n=sm(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vB(t,e.type,n):e.hasOwnProperty("defaultValue")&&vB(t,e.type,sm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gj(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vB(t,e,n){(e!=="number"||dR(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var q1=Array.isArray;function tv(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+sm(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function EB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Me(91));return Us({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qj(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Me(92));if(q1(n)){if(1<n.length)throw Error(Me(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sm(n)}}function QQ(t,e){var n=sm(e.value),r=sm(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vj(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function JQ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function CB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?JQ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var AN,ZQ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(AN=AN||document.createElement("div"),AN.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=AN.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fA(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var __={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vge=["Webkit","ms","Moz","O"];Object.keys(__).forEach(function(t){Vge.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),__[e]=__[t]})});function XQ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||__.hasOwnProperty(t)&&__[t]?(""+e).trim():e+"px"}function eJ(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=XQ(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Kge=Us({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _B(t,e){if(e){if(Kge[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Me(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Me(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Me(62))}}function AB(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SB=null;function b8(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var IB=null,nv=null,rv=null;function Kj(t){if(t=vI(t)){if(typeof IB!="function")throw Error(Me(280));var e=t.stateNode;e&&(e=w2(e),IB(t.stateNode,t.type,e))}}function tJ(t){nv?rv?rv.push(t):rv=[t]:nv=t}function nJ(){if(nv){var t=nv,e=rv;if(rv=nv=null,Kj(t),e)for(t=0;t<e.length;t++)Kj(e[t])}}function rJ(t,e){return t(e)}function sJ(){}var $O=!1;function iJ(t,e,n){if($O)return t(e,n);$O=!0;try{return rJ(t,e,n)}finally{$O=!1,(nv!==null||rv!==null)&&(sJ(),nJ())}}function pA(t,e){var n=t.stateNode;if(n===null)return null;var r=w2(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Me(231,e,typeof n));return n}var NB=!1;if(Nf)try{var i1={};Object.defineProperty(i1,"passive",{get:function(){NB=!0}}),window.addEventListener("test",i1,i1),window.removeEventListener("test",i1,i1)}catch{NB=!1}function Yge(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var A_=!1,hR=null,fR=!1,xB=null,Qge={onError:function(t){A_=!0,hR=t}};function Jge(t,e,n,r,s,i,o,a,c){A_=!1,hR=null,Yge.apply(Qge,arguments)}function Zge(t,e,n,r,s,i,o,a,c){if(Jge.apply(this,arguments),A_){if(A_){var l=hR;A_=!1,hR=null}else throw Error(Me(198));fR||(fR=!0,xB=l)}}function rw(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oJ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yj(t){if(rw(t)!==t)throw Error(Me(188))}function Xge(t){var e=t.alternate;if(!e){if(e=rw(t),e===null)throw Error(Me(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Yj(s),t;if(i===r)return Yj(s),e;i=i.sibling}throw Error(Me(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Me(189))}}if(n.alternate!==r)throw Error(Me(190))}if(n.tag!==3)throw Error(Me(188));return n.stateNode.current===n?t:e}function aJ(t){return t=Xge(t),t!==null?cJ(t):null}function cJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cJ(t);if(e!==null)return e;t=t.sibling}return null}var lJ=Kc.unstable_scheduleCallback,Qj=Kc.unstable_cancelCallback,eme=Kc.unstable_shouldYield,tme=Kc.unstable_requestPaint,ti=Kc.unstable_now,nme=Kc.unstable_getCurrentPriorityLevel,v8=Kc.unstable_ImmediatePriority,uJ=Kc.unstable_UserBlockingPriority,pR=Kc.unstable_NormalPriority,rme=Kc.unstable_LowPriority,dJ=Kc.unstable_IdlePriority,p2=null,$d=null;function sme(t){if($d&&typeof $d.onCommitFiberRoot=="function")try{$d.onCommitFiberRoot(p2,t,void 0,(t.current.flags&128)===128)}catch{}}var Pu=Math.clz32?Math.clz32:ame,ime=Math.log,ome=Math.LN2;function ame(t){return t>>>=0,t===0?32:31-(ime(t)/ome|0)|0}var SN=64,IN=4194304;function V1(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gR(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=V1(a):(i&=o,i!==0&&(r=V1(i)))}else o=n&~s,o!==0?r=V1(o):i!==0&&(r=V1(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Pu(e),s=1<<n,r|=t[n],e&=~s;return r}function cme(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lme(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Pu(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=cme(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function TB(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hJ(){var t=SN;return SN<<=1,!(SN&4194240)&&(SN=64),t}function FO(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wI(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pu(e),t[e]=n}function ume(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Pu(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function E8(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Pu(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Or=0;function fJ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pJ,C8,gJ,mJ,yJ,RB=!1,NN=[],Og=null,Dg=null,Mg=null,gA=new Map,mA=new Map,Bp=[],dme="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jj(t,e){switch(t){case"focusin":case"focusout":Og=null;break;case"dragenter":case"dragleave":Dg=null;break;case"mouseover":case"mouseout":Mg=null;break;case"pointerover":case"pointerout":gA.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mA.delete(e.pointerId)}}function o1(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=vI(e),e!==null&&C8(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function hme(t,e,n,r,s){switch(e){case"focusin":return Og=o1(Og,t,e,n,r,s),!0;case"dragenter":return Dg=o1(Dg,t,e,n,r,s),!0;case"mouseover":return Mg=o1(Mg,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return gA.set(i,o1(gA.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,mA.set(i,o1(mA.get(i)||null,t,e,n,r,s)),!0}return!1}function wJ(t){var e=my(t.target);if(e!==null){var n=rw(e);if(n!==null){if(e=n.tag,e===13){if(e=oJ(n),e!==null){t.blockedOn=e,yJ(t.priority,function(){gJ(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jx(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kB(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);SB=r,n.target.dispatchEvent(r),SB=null}else return e=vI(n),e!==null&&C8(e),t.blockedOn=n,!1;e.shift()}return!0}function Zj(t,e,n){Jx(t)&&n.delete(e)}function fme(){RB=!1,Og!==null&&Jx(Og)&&(Og=null),Dg!==null&&Jx(Dg)&&(Dg=null),Mg!==null&&Jx(Mg)&&(Mg=null),gA.forEach(Zj),mA.forEach(Zj)}function a1(t,e){t.blockedOn===e&&(t.blockedOn=null,RB||(RB=!0,Kc.unstable_scheduleCallback(Kc.unstable_NormalPriority,fme)))}function yA(t){function e(s){return a1(s,t)}if(0<NN.length){a1(NN[0],t);for(var n=1;n<NN.length;n++){var r=NN[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Og!==null&&a1(Og,t),Dg!==null&&a1(Dg,t),Mg!==null&&a1(Mg,t),gA.forEach(e),mA.forEach(e),n=0;n<Bp.length;n++)r=Bp[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Bp.length&&(n=Bp[0],n.blockedOn===null);)wJ(n),n.blockedOn===null&&Bp.shift()}var sv=jf.ReactCurrentBatchConfig,mR=!0;function pme(t,e,n,r){var s=Or,i=sv.transition;sv.transition=null;try{Or=1,_8(t,e,n,r)}finally{Or=s,sv.transition=i}}function gme(t,e,n,r){var s=Or,i=sv.transition;sv.transition=null;try{Or=4,_8(t,e,n,r)}finally{Or=s,sv.transition=i}}function _8(t,e,n,r){if(mR){var s=kB(t,e,n,r);if(s===null)QO(t,e,r,yR,n),Jj(t,r);else if(hme(s,t,e,n,r))r.stopPropagation();else if(Jj(t,r),e&4&&-1<dme.indexOf(t)){for(;s!==null;){var i=vI(s);if(i!==null&&pJ(i),i=kB(t,e,n,r),i===null&&QO(t,e,r,yR,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else QO(t,e,r,null,n)}}var yR=null;function kB(t,e,n,r){if(yR=null,t=b8(r),t=my(t),t!==null)if(e=rw(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oJ(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yR=t,null}function bJ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nme()){case v8:return 1;case uJ:return 4;case pR:case rme:return 16;case dJ:return 536870912;default:return 16}default:return 16}}var gg=null,A8=null,Zx=null;function vJ(){if(Zx)return Zx;var t,e=A8,n=e.length,r,s="value"in gg?gg.value:gg.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Zx=s.slice(t,1<r?1-r:void 0)}function Xx(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xN(){return!0}function Xj(){return!1}function Zc(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xN:Xj,this.isPropagationStopped=Xj,this}return Us(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xN)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xN)},persist:function(){},isPersistent:xN}),e}var vC={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},S8=Zc(vC),bI=Us({},vC,{view:0,detail:0}),mme=Zc(bI),jO,WO,c1,g2=Us({},bI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:I8,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==c1&&(c1&&t.type==="mousemove"?(jO=t.screenX-c1.screenX,WO=t.screenY-c1.screenY):WO=jO=0,c1=t),jO)},movementY:function(t){return"movementY"in t?t.movementY:WO}}),e9=Zc(g2),yme=Us({},g2,{dataTransfer:0}),wme=Zc(yme),bme=Us({},bI,{relatedTarget:0}),zO=Zc(bme),vme=Us({},vC,{animationName:0,elapsedTime:0,pseudoElement:0}),Eme=Zc(vme),Cme=Us({},vC,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_me=Zc(Cme),Ame=Us({},vC,{data:0}),t9=Zc(Ame),Sme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ime={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xme(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Nme[t])?!!e[t]:!1}function I8(){return xme}var Tme=Us({},bI,{key:function(t){if(t.key){var e=Sme[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ime[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:I8,charCode:function(t){return t.type==="keypress"?Xx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rme=Zc(Tme),kme=Us({},g2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n9=Zc(kme),Pme=Us({},bI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:I8}),Ome=Zc(Pme),Dme=Us({},vC,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mme=Zc(Dme),Bme=Us({},g2,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ume=Zc(Bme),Lme=[9,13,27,32],N8=Nf&&"CompositionEvent"in window,S_=null;Nf&&"documentMode"in document&&(S_=document.documentMode);var $me=Nf&&"TextEvent"in window&&!S_,EJ=Nf&&(!N8||S_&&8<S_&&11>=S_),r9=" ",s9=!1;function CJ(t,e){switch(t){case"keyup":return Lme.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _J(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tb=!1;function Fme(t,e){switch(t){case"compositionend":return _J(e);case"keypress":return e.which!==32?null:(s9=!0,r9);case"textInput":return t=e.data,t===r9&&s9?null:t;default:return null}}function jme(t,e){if(Tb)return t==="compositionend"||!N8&&CJ(t,e)?(t=vJ(),Zx=A8=gg=null,Tb=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return EJ&&e.locale!=="ko"?null:e.data;default:return null}}var Wme={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i9(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Wme[t.type]:e==="textarea"}function AJ(t,e,n,r){tJ(r),e=wR(e,"onChange"),0<e.length&&(n=new S8("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var I_=null,wA=null;function zme(t){MJ(t,0)}function m2(t){var e=Pb(t);if(KQ(e))return t}function Hme(t,e){if(t==="change")return e}var SJ=!1;if(Nf){var HO;if(Nf){var GO="oninput"in document;if(!GO){var o9=document.createElement("div");o9.setAttribute("oninput","return;"),GO=typeof o9.oninput=="function"}HO=GO}else HO=!1;SJ=HO&&(!document.documentMode||9<document.documentMode)}function a9(){I_&&(I_.detachEvent("onpropertychange",IJ),wA=I_=null)}function IJ(t){if(t.propertyName==="value"&&m2(wA)){var e=[];AJ(e,wA,t,b8(t)),iJ(zme,e)}}function Gme(t,e,n){t==="focusin"?(a9(),I_=e,wA=n,I_.attachEvent("onpropertychange",IJ)):t==="focusout"&&a9()}function qme(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return m2(wA)}function Vme(t,e){if(t==="click")return m2(e)}function Kme(t,e){if(t==="input"||t==="change")return m2(e)}function Yme(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Uu=typeof Object.is=="function"?Object.is:Yme;function bA(t,e){if(Uu(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fB.call(e,s)||!Uu(t[s],e[s]))return!1}return!0}function c9(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function l9(t,e){var n=c9(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=c9(n)}}function NJ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NJ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xJ(){for(var t=window,e=dR();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dR(t.document)}return e}function x8(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qme(t){var e=xJ(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NJ(n.ownerDocument.documentElement,n)){if(r!==null&&x8(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=l9(n,i);var o=l9(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jme=Nf&&"documentMode"in document&&11>=document.documentMode,Rb=null,PB=null,N_=null,OB=!1;function u9(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;OB||Rb==null||Rb!==dR(r)||(r=Rb,"selectionStart"in r&&x8(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),N_&&bA(N_,r)||(N_=r,r=wR(PB,"onSelect"),0<r.length&&(e=new S8("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rb)))}function TN(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var kb={animationend:TN("Animation","AnimationEnd"),animationiteration:TN("Animation","AnimationIteration"),animationstart:TN("Animation","AnimationStart"),transitionend:TN("Transition","TransitionEnd")},qO={},TJ={};Nf&&(TJ=document.createElement("div").style,"AnimationEvent"in window||(delete kb.animationend.animation,delete kb.animationiteration.animation,delete kb.animationstart.animation),"TransitionEvent"in window||delete kb.transitionend.transition);function y2(t){if(qO[t])return qO[t];if(!kb[t])return t;var e=kb[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in TJ)return qO[t]=e[n];return t}var RJ=y2("animationend"),kJ=y2("animationiteration"),PJ=y2("animationstart"),OJ=y2("transitionend"),DJ=new Map,d9="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Em(t,e){DJ.set(t,e),nw(e,[t])}for(var VO=0;VO<d9.length;VO++){var KO=d9[VO],Zme=KO.toLowerCase(),Xme=KO[0].toUpperCase()+KO.slice(1);Em(Zme,"on"+Xme)}Em(RJ,"onAnimationEnd");Em(kJ,"onAnimationIteration");Em(PJ,"onAnimationStart");Em("dblclick","onDoubleClick");Em("focusin","onFocus");Em("focusout","onBlur");Em(OJ,"onTransitionEnd");AE("onMouseEnter",["mouseout","mouseover"]);AE("onMouseLeave",["mouseout","mouseover"]);AE("onPointerEnter",["pointerout","pointerover"]);AE("onPointerLeave",["pointerout","pointerover"]);nw("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nw("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nw("onBeforeInput",["compositionend","keypress","textInput","paste"]);nw("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nw("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nw("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var K1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eye=new Set("cancel close invalid load scroll toggle".split(" ").concat(K1));function h9(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Zge(r,e,void 0,t),t.currentTarget=null}function MJ(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;h9(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;h9(s,a,l),i=c}}}if(fR)throw t=xB,fR=!1,xB=null,t}function ms(t,e){var n=e[LB];n===void 0&&(n=e[LB]=new Set);var r=t+"__bubble";n.has(r)||(BJ(e,t,2,!1),n.add(r))}function YO(t,e,n){var r=0;e&&(r|=4),BJ(n,t,r,e)}var RN="_reactListening"+Math.random().toString(36).slice(2);function vA(t){if(!t[RN]){t[RN]=!0,zQ.forEach(function(n){n!=="selectionchange"&&(eye.has(n)||YO(n,!1,t),YO(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[RN]||(e[RN]=!0,YO("selectionchange",!1,e))}}function BJ(t,e,n,r){switch(bJ(e)){case 1:var s=pme;break;case 4:s=gme;break;default:s=_8}n=s.bind(null,e,n,t),s=void 0,!NB||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function QO(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=my(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}iJ(function(){var l=i,u=b8(n),d=[];e:{var h=DJ.get(t);if(h!==void 0){var f=S8,p=t;switch(t){case"keypress":if(Xx(n)===0)break e;case"keydown":case"keyup":f=Rme;break;case"focusin":p="focus",f=zO;break;case"focusout":p="blur",f=zO;break;case"beforeblur":case"afterblur":f=zO;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=e9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=wme;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Ome;break;case RJ:case kJ:case PJ:f=Eme;break;case OJ:f=Mme;break;case"scroll":f=mme;break;case"wheel":f=Ume;break;case"copy":case"cut":case"paste":f=_me;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=n9}var g=(e&4)!==0,m=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var w=l,C;w!==null;){C=w;var N=C.stateNode;if(C.tag===5&&N!==null&&(C=N,y!==null&&(N=pA(w,y),N!=null&&g.push(EA(w,N,C)))),m)break;w=w.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==SB&&(p=n.relatedTarget||n.fromElement)&&(my(p)||p[xf]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?my(p):null,p!==null&&(m=rw(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=e9,N="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=n9,N="onPointerLeave",y="onPointerEnter",w="pointer"),m=f==null?h:Pb(f),C=p==null?h:Pb(p),h=new g(N,w+"leave",f,n,u),h.target=m,h.relatedTarget=C,N=null,my(u)===l&&(g=new g(y,w+"enter",p,n,u),g.target=C,g.relatedTarget=m,N=g),m=N,f&&p)t:{for(g=f,y=p,w=0,C=g;C;C=kw(C))w++;for(C=0,N=y;N;N=kw(N))C++;for(;0<w-C;)g=kw(g),w--;for(;0<C-w;)y=kw(y),C--;for(;w--;){if(g===y||y!==null&&g===y.alternate)break t;g=kw(g),y=kw(y)}g=null}else g=null;f!==null&&f9(d,h,f,g,!1),p!==null&&m!==null&&f9(d,m,p,g,!0)}}e:{if(h=l?Pb(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var I=Hme;else if(i9(h))if(SJ)I=Kme;else{I=qme;var k=Gme}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=Vme);if(I&&(I=I(t,l))){AJ(d,I,n,u);break e}k&&k(t,h,l),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&vB(h,"number",h.value)}switch(k=l?Pb(l):window,t){case"focusin":(i9(k)||k.contentEditable==="true")&&(Rb=k,PB=l,N_=null);break;case"focusout":N_=PB=Rb=null;break;case"mousedown":OB=!0;break;case"contextmenu":case"mouseup":case"dragend":OB=!1,u9(d,n,u);break;case"selectionchange":if(Jme)break;case"keydown":case"keyup":u9(d,n,u)}var P;if(N8)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else Tb?CJ(t,n)&&(U="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(EJ&&n.locale!=="ko"&&(Tb||U!=="onCompositionStart"?U==="onCompositionEnd"&&Tb&&(P=vJ()):(gg=u,A8="value"in gg?gg.value:gg.textContent,Tb=!0)),k=wR(l,U),0<k.length&&(U=new t9(U,t,null,n,u),d.push({event:U,listeners:k}),P?U.data=P:(P=_J(n),P!==null&&(U.data=P)))),(P=$me?Fme(t,n):jme(t,n))&&(l=wR(l,"onBeforeInput"),0<l.length&&(u=new t9("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=P))}MJ(d,e)})}function EA(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wR(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=pA(t,n),i!=null&&r.unshift(EA(t,i,s)),i=pA(t,e),i!=null&&r.push(EA(t,i,s))),t=t.return}return r}function kw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function f9(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=pA(n,i),c!=null&&o.unshift(EA(n,c,a))):s||(c=pA(n,i),c!=null&&o.push(EA(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tye=/\r\n?/g,nye=/\u0000|\uFFFD/g;function p9(t){return(typeof t=="string"?t:""+t).replace(tye,`
`).replace(nye,"")}function kN(t,e,n){if(e=p9(e),p9(t)!==e&&n)throw Error(Me(425))}function bR(){}var DB=null,MB=null;function BB(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var UB=typeof setTimeout=="function"?setTimeout:void 0,rye=typeof clearTimeout=="function"?clearTimeout:void 0,g9=typeof Promise=="function"?Promise:void 0,sye=typeof queueMicrotask=="function"?queueMicrotask:typeof g9<"u"?function(t){return g9.resolve(null).then(t).catch(iye)}:UB;function iye(t){setTimeout(function(){throw t})}function JO(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),yA(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);yA(e)}function Bg(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function m9(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var EC=Math.random().toString(36).slice(2),kd="__reactFiber$"+EC,CA="__reactProps$"+EC,xf="__reactContainer$"+EC,LB="__reactEvents$"+EC,oye="__reactListeners$"+EC,aye="__reactHandles$"+EC;function my(t){var e=t[kd];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xf]||n[kd]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=m9(t);t!==null;){if(n=t[kd])return n;t=m9(t)}return e}t=n,n=t.parentNode}return null}function vI(t){return t=t[kd]||t[xf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pb(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Me(33))}function w2(t){return t[CA]||null}var $B=[],Ob=-1;function Cm(t){return{current:t}}function bs(t){0>Ob||(t.current=$B[Ob],$B[Ob]=null,Ob--)}function cs(t,e){Ob++,$B[Ob]=t.current,t.current=e}var im={},jo=Cm(im),sc=Cm(!1),C0=im;function SE(t,e){var n=t.type.contextTypes;if(!n)return im;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ic(t){return t=t.childContextTypes,t!=null}function vR(){bs(sc),bs(jo)}function y9(t,e,n){if(jo.current!==im)throw Error(Me(168));cs(jo,e),cs(sc,n)}function UJ(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Me(108,Gge(t)||"Unknown",s));return Us({},n,r)}function ER(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||im,C0=jo.current,cs(jo,t),cs(sc,sc.current),!0}function w9(t,e,n){var r=t.stateNode;if(!r)throw Error(Me(169));n?(t=UJ(t,e,C0),r.__reactInternalMemoizedMergedChildContext=t,bs(sc),bs(jo),cs(jo,t)):bs(sc),cs(sc,n)}var $h=null,b2=!1,ZO=!1;function LJ(t){$h===null?$h=[t]:$h.push(t)}function cye(t){b2=!0,LJ(t)}function _m(){if(!ZO&&$h!==null){ZO=!0;var t=0,e=Or;try{var n=$h;for(Or=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$h=null,b2=!1}catch(s){throw $h!==null&&($h=$h.slice(t+1)),lJ(v8,_m),s}finally{Or=e,ZO=!1}}return null}var Db=[],Mb=0,CR=null,_R=0,xl=[],Tl=0,_0=null,lf=1,uf="";function Vm(t,e){Db[Mb++]=_R,Db[Mb++]=CR,CR=t,_R=e}function $J(t,e,n){xl[Tl++]=lf,xl[Tl++]=uf,xl[Tl++]=_0,_0=t;var r=lf;t=uf;var s=32-Pu(r)-1;r&=~(1<<s),n+=1;var i=32-Pu(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,lf=1<<32-Pu(e)+s|n<<s|r,uf=i+t}else lf=1<<i|n<<s|r,uf=t}function T8(t){t.return!==null&&(Vm(t,1),$J(t,1,0))}function R8(t){for(;t===CR;)CR=Db[--Mb],Db[Mb]=null,_R=Db[--Mb],Db[Mb]=null;for(;t===_0;)_0=xl[--Tl],xl[Tl]=null,uf=xl[--Tl],xl[Tl]=null,lf=xl[--Tl],xl[Tl]=null}var Gc=null,Wc=null,Ns=!1,bu=null;function FJ(t,e){var n=kl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function b9(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gc=t,Wc=Bg(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gc=t,Wc=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_0!==null?{id:lf,overflow:uf}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kl(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gc=t,Wc=null,!0):!1;default:return!1}}function FB(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jB(t){if(Ns){var e=Wc;if(e){var n=e;if(!b9(t,e)){if(FB(t))throw Error(Me(418));e=Bg(n.nextSibling);var r=Gc;e&&b9(t,e)?FJ(r,n):(t.flags=t.flags&-4097|2,Ns=!1,Gc=t)}}else{if(FB(t))throw Error(Me(418));t.flags=t.flags&-4097|2,Ns=!1,Gc=t}}}function v9(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gc=t}function PN(t){if(t!==Gc)return!1;if(!Ns)return v9(t),Ns=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!BB(t.type,t.memoizedProps)),e&&(e=Wc)){if(FB(t))throw jJ(),Error(Me(418));for(;e;)FJ(t,e),e=Bg(e.nextSibling)}if(v9(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Me(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wc=Bg(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wc=null}}else Wc=Gc?Bg(t.stateNode.nextSibling):null;return!0}function jJ(){for(var t=Wc;t;)t=Bg(t.nextSibling)}function IE(){Wc=Gc=null,Ns=!1}function k8(t){bu===null?bu=[t]:bu.push(t)}var lye=jf.ReactCurrentBatchConfig;function l1(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Me(309));var r=n.stateNode}if(!r)throw Error(Me(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Me(284));if(!n._owner)throw Error(Me(290,t))}return t}function ON(t,e){throw t=Object.prototype.toString.call(e),Error(Me(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E9(t){var e=t._init;return e(t._payload)}function WJ(t){function e(y,w){if(t){var C=y.deletions;C===null?(y.deletions=[w],y.flags|=16):C.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=Fg(y,w),y.index=0,y.sibling=null,y}function i(y,w,C){return y.index=C,t?(C=y.alternate,C!==null?(C=C.index,C<w?(y.flags|=2,w):C):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,C,N){return w===null||w.tag!==6?(w=iD(C,y.mode,N),w.return=y,w):(w=s(w,C),w.return=y,w)}function c(y,w,C,N){var I=C.type;return I===xb?u(y,w,C.props.children,N,C.key):w!==null&&(w.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Tp&&E9(I)===w.type)?(N=s(w,C.props),N.ref=l1(y,w,C),N.return=y,N):(N=oT(C.type,C.key,C.props,null,y.mode,N),N.ref=l1(y,w,C),N.return=y,N)}function l(y,w,C,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=oD(C,y.mode,N),w.return=y,w):(w=s(w,C.children||[]),w.return=y,w)}function u(y,w,C,N,I){return w===null||w.tag!==7?(w=o0(C,y.mode,N,I),w.return=y,w):(w=s(w,C),w.return=y,w)}function d(y,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=iD(""+w,y.mode,C),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case CN:return C=oT(w.type,w.key,w.props,null,y.mode,C),C.ref=l1(y,null,w),C.return=y,C;case Nb:return w=oD(w,y.mode,C),w.return=y,w;case Tp:var N=w._init;return d(y,N(w._payload),C)}if(q1(w)||s1(w))return w=o0(w,y.mode,C,null),w.return=y,w;ON(y,w)}return null}function h(y,w,C,N){var I=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return I!==null?null:a(y,w,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case CN:return C.key===I?c(y,w,C,N):null;case Nb:return C.key===I?l(y,w,C,N):null;case Tp:return I=C._init,h(y,w,I(C._payload),N)}if(q1(C)||s1(C))return I!==null?null:u(y,w,C,N,null);ON(y,C)}return null}function f(y,w,C,N,I){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(C)||null,a(w,y,""+N,I);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case CN:return y=y.get(N.key===null?C:N.key)||null,c(w,y,N,I);case Nb:return y=y.get(N.key===null?C:N.key)||null,l(w,y,N,I);case Tp:var k=N._init;return f(y,w,C,k(N._payload),I)}if(q1(N)||s1(N))return y=y.get(C)||null,u(w,y,N,I,null);ON(w,N)}return null}function p(y,w,C,N){for(var I=null,k=null,P=w,U=w=0,M=null;P!==null&&U<C.length;U++){P.index>U?(M=P,P=null):M=P.sibling;var H=h(y,P,C[U],N);if(H===null){P===null&&(P=M);break}t&&P&&H.alternate===null&&e(y,P),w=i(H,w,U),k===null?I=H:k.sibling=H,k=H,P=M}if(U===C.length)return n(y,P),Ns&&Vm(y,U),I;if(P===null){for(;U<C.length;U++)P=d(y,C[U],N),P!==null&&(w=i(P,w,U),k===null?I=P:k.sibling=P,k=P);return Ns&&Vm(y,U),I}for(P=r(y,P);U<C.length;U++)M=f(P,y,U,C[U],N),M!==null&&(t&&M.alternate!==null&&P.delete(M.key===null?U:M.key),w=i(M,w,U),k===null?I=M:k.sibling=M,k=M);return t&&P.forEach(function(j){return e(y,j)}),Ns&&Vm(y,U),I}function g(y,w,C,N){var I=s1(C);if(typeof I!="function")throw Error(Me(150));if(C=I.call(C),C==null)throw Error(Me(151));for(var k=I=null,P=w,U=w=0,M=null,H=C.next();P!==null&&!H.done;U++,H=C.next()){P.index>U?(M=P,P=null):M=P.sibling;var j=h(y,P,H.value,N);if(j===null){P===null&&(P=M);break}t&&P&&j.alternate===null&&e(y,P),w=i(j,w,U),k===null?I=j:k.sibling=j,k=j,P=M}if(H.done)return n(y,P),Ns&&Vm(y,U),I;if(P===null){for(;!H.done;U++,H=C.next())H=d(y,H.value,N),H!==null&&(w=i(H,w,U),k===null?I=H:k.sibling=H,k=H);return Ns&&Vm(y,U),I}for(P=r(y,P);!H.done;U++,H=C.next())H=f(P,y,U,H.value,N),H!==null&&(t&&H.alternate!==null&&P.delete(H.key===null?U:H.key),w=i(H,w,U),k===null?I=H:k.sibling=H,k=H);return t&&P.forEach(function(K){return e(y,K)}),Ns&&Vm(y,U),I}function m(y,w,C,N){if(typeof C=="object"&&C!==null&&C.type===xb&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case CN:e:{for(var I=C.key,k=w;k!==null;){if(k.key===I){if(I=C.type,I===xb){if(k.tag===7){n(y,k.sibling),w=s(k,C.props.children),w.return=y,y=w;break e}}else if(k.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Tp&&E9(I)===k.type){n(y,k.sibling),w=s(k,C.props),w.ref=l1(y,k,C),w.return=y,y=w;break e}n(y,k);break}else e(y,k);k=k.sibling}C.type===xb?(w=o0(C.props.children,y.mode,N,C.key),w.return=y,y=w):(N=oT(C.type,C.key,C.props,null,y.mode,N),N.ref=l1(y,w,C),N.return=y,y=N)}return o(y);case Nb:e:{for(k=C.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(y,w.sibling),w=s(w,C.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=oD(C,y.mode,N),w.return=y,y=w}return o(y);case Tp:return k=C._init,m(y,w,k(C._payload),N)}if(q1(C))return p(y,w,C,N);if(s1(C))return g(y,w,C,N);ON(y,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(y,w.sibling),w=s(w,C),w.return=y,y=w):(n(y,w),w=iD(C,y.mode,N),w.return=y,y=w),o(y)):n(y,w)}return m}var NE=WJ(!0),zJ=WJ(!1),AR=Cm(null),SR=null,Bb=null,P8=null;function O8(){P8=Bb=SR=null}function D8(t){var e=AR.current;bs(AR),t._currentValue=e}function WB(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function iv(t,e){SR=t,P8=Bb=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tc=!0),t.firstContext=null)}function Bl(t){var e=t._currentValue;if(P8!==t)if(t={context:t,memoizedValue:e,next:null},Bb===null){if(SR===null)throw Error(Me(308));Bb=t,SR.dependencies={lanes:0,firstContext:t}}else Bb=Bb.next=t;return e}var yy=null;function M8(t){yy===null?yy=[t]:yy.push(t)}function HJ(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,M8(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tf(t,r)}function Tf(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Rp=!1;function B8(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GJ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mf(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ug(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,rr&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tf(t,n)}return s=r.interleaved,s===null?(e.next=e,M8(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tf(t,n)}function eT(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,E8(t,n)}}function C9(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function IR(t,e,n,r){var s=t.updateQueue;Rp=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Us({},d,h);break e;case 2:Rp=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);S0|=o,t.lanes=o,t.memoizedState=d}}function _9(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Me(191,s));s.call(r)}}}var EI={},Fd=Cm(EI),_A=Cm(EI),AA=Cm(EI);function wy(t){if(t===EI)throw Error(Me(174));return t}function U8(t,e){switch(cs(AA,e),cs(_A,t),cs(Fd,EI),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:CB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=CB(e,t)}bs(Fd),cs(Fd,e)}function xE(){bs(Fd),bs(_A),bs(AA)}function qJ(t){wy(AA.current);var e=wy(Fd.current),n=CB(e,t.type);e!==n&&(cs(_A,t),cs(Fd,n))}function L8(t){_A.current===t&&(bs(Fd),bs(_A))}var Rs=Cm(0);function NR(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var XO=[];function $8(){for(var t=0;t<XO.length;t++)XO[t]._workInProgressVersionPrimary=null;XO.length=0}var tT=jf.ReactCurrentDispatcher,eD=jf.ReactCurrentBatchConfig,A0=0,Bs=null,mi=null,Mi=null,xR=!1,x_=!1,SA=0,uye=0;function _o(){throw Error(Me(321))}function F8(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Uu(t[n],e[n]))return!1;return!0}function j8(t,e,n,r,s,i){if(A0=i,Bs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tT.current=t===null||t.memoizedState===null?pye:gye,t=n(r,s),x_){i=0;do{if(x_=!1,SA=0,25<=i)throw Error(Me(301));i+=1,Mi=mi=null,e.updateQueue=null,tT.current=mye,t=n(r,s)}while(x_)}if(tT.current=TR,e=mi!==null&&mi.next!==null,A0=0,Mi=mi=Bs=null,xR=!1,e)throw Error(Me(300));return t}function W8(){var t=SA!==0;return SA=0,t}function ld(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mi===null?Bs.memoizedState=Mi=t:Mi=Mi.next=t,Mi}function Ul(){if(mi===null){var t=Bs.alternate;t=t!==null?t.memoizedState:null}else t=mi.next;var e=Mi===null?Bs.memoizedState:Mi.next;if(e!==null)Mi=e,mi=t;else{if(t===null)throw Error(Me(310));mi=t,t={memoizedState:mi.memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},Mi===null?Bs.memoizedState=Mi=t:Mi=Mi.next=t}return Mi}function IA(t,e){return typeof e=="function"?e(t):e}function tD(t){var e=Ul(),n=e.queue;if(n===null)throw Error(Me(311));n.lastRenderedReducer=t;var r=mi,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((A0&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Bs.lanes|=u,S0|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Uu(r,e.memoizedState)||(tc=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Bs.lanes|=i,S0|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nD(t){var e=Ul(),n=e.queue;if(n===null)throw Error(Me(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Uu(i,e.memoizedState)||(tc=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function VJ(){}function KJ(t,e){var n=Bs,r=Ul(),s=e(),i=!Uu(r.memoizedState,s);if(i&&(r.memoizedState=s,tc=!0),r=r.queue,z8(JJ.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Mi!==null&&Mi.memoizedState.tag&1){if(n.flags|=2048,NA(9,QJ.bind(null,n,r,s,e),void 0,null),Hi===null)throw Error(Me(349));A0&30||YJ(n,e,s)}return s}function YJ(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Bs.updateQueue,e===null?(e={lastEffect:null,stores:null},Bs.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QJ(t,e,n,r){e.value=n,e.getSnapshot=r,ZJ(e)&&XJ(t)}function JJ(t,e,n){return n(function(){ZJ(e)&&XJ(t)})}function ZJ(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Uu(t,n)}catch{return!0}}function XJ(t){var e=Tf(t,1);e!==null&&Ou(e,t,1,-1)}function A9(t){var e=ld();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:IA,lastRenderedState:t},e.queue=t,t=t.dispatch=fye.bind(null,Bs,t),[e.memoizedState,t]}function NA(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Bs.updateQueue,e===null?(e={lastEffect:null,stores:null},Bs.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eZ(){return Ul().memoizedState}function nT(t,e,n,r){var s=ld();Bs.flags|=t,s.memoizedState=NA(1|e,n,void 0,r===void 0?null:r)}function v2(t,e,n,r){var s=Ul();r=r===void 0?null:r;var i=void 0;if(mi!==null){var o=mi.memoizedState;if(i=o.destroy,r!==null&&F8(r,o.deps)){s.memoizedState=NA(e,n,i,r);return}}Bs.flags|=t,s.memoizedState=NA(1|e,n,i,r)}function S9(t,e){return nT(8390656,8,t,e)}function z8(t,e){return v2(2048,8,t,e)}function tZ(t,e){return v2(4,2,t,e)}function nZ(t,e){return v2(4,4,t,e)}function rZ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sZ(t,e,n){return n=n!=null?n.concat([t]):null,v2(4,4,rZ.bind(null,e,t),n)}function H8(){}function iZ(t,e){var n=Ul();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&F8(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oZ(t,e){var n=Ul();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&F8(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aZ(t,e,n){return A0&21?(Uu(n,e)||(n=hJ(),Bs.lanes|=n,S0|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tc=!0),t.memoizedState=n)}function dye(t,e){var n=Or;Or=n!==0&&4>n?n:4,t(!0);var r=eD.transition;eD.transition={};try{t(!1),e()}finally{Or=n,eD.transition=r}}function cZ(){return Ul().memoizedState}function hye(t,e,n){var r=$g(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lZ(t))uZ(e,n);else if(n=HJ(t,e,n,r),n!==null){var s=pa();Ou(n,t,r,s),dZ(n,e,r)}}function fye(t,e,n){var r=$g(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lZ(t))uZ(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Uu(a,o)){var c=e.interleaved;c===null?(s.next=s,M8(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=HJ(t,e,s,r),n!==null&&(s=pa(),Ou(n,t,r,s),dZ(n,e,r))}}function lZ(t){var e=t.alternate;return t===Bs||e!==null&&e===Bs}function uZ(t,e){x_=xR=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dZ(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,E8(t,n)}}var TR={readContext:Bl,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},pye={readContext:Bl,useCallback:function(t,e){return ld().memoizedState=[t,e===void 0?null:e],t},useContext:Bl,useEffect:S9,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nT(4194308,4,rZ.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nT(4194308,4,t,e)},useInsertionEffect:function(t,e){return nT(4,2,t,e)},useMemo:function(t,e){var n=ld();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ld();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hye.bind(null,Bs,t),[r.memoizedState,t]},useRef:function(t){var e=ld();return t={current:t},e.memoizedState=t},useState:A9,useDebugValue:H8,useDeferredValue:function(t){return ld().memoizedState=t},useTransition:function(){var t=A9(!1),e=t[0];return t=dye.bind(null,t[1]),ld().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Bs,s=ld();if(Ns){if(n===void 0)throw Error(Me(407));n=n()}else{if(n=e(),Hi===null)throw Error(Me(349));A0&30||YJ(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,S9(JJ.bind(null,r,i,t),[t]),r.flags|=2048,NA(9,QJ.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ld(),e=Hi.identifierPrefix;if(Ns){var n=uf,r=lf;n=(r&~(1<<32-Pu(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=SA++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uye++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gye={readContext:Bl,useCallback:iZ,useContext:Bl,useEffect:z8,useImperativeHandle:sZ,useInsertionEffect:tZ,useLayoutEffect:nZ,useMemo:oZ,useReducer:tD,useRef:eZ,useState:function(){return tD(IA)},useDebugValue:H8,useDeferredValue:function(t){var e=Ul();return aZ(e,mi.memoizedState,t)},useTransition:function(){var t=tD(IA)[0],e=Ul().memoizedState;return[t,e]},useMutableSource:VJ,useSyncExternalStore:KJ,useId:cZ,unstable_isNewReconciler:!1},mye={readContext:Bl,useCallback:iZ,useContext:Bl,useEffect:z8,useImperativeHandle:sZ,useInsertionEffect:tZ,useLayoutEffect:nZ,useMemo:oZ,useReducer:nD,useRef:eZ,useState:function(){return nD(IA)},useDebugValue:H8,useDeferredValue:function(t){var e=Ul();return mi===null?e.memoizedState=t:aZ(e,mi.memoizedState,t)},useTransition:function(){var t=nD(IA)[0],e=Ul().memoizedState;return[t,e]},useMutableSource:VJ,useSyncExternalStore:KJ,useId:cZ,unstable_isNewReconciler:!1};function cu(t,e){if(t&&t.defaultProps){e=Us({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zB(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Us({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var E2={isMounted:function(t){return(t=t._reactInternals)?rw(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pa(),s=$g(t),i=mf(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ug(t,i,s),e!==null&&(Ou(e,t,s,r),eT(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pa(),s=$g(t),i=mf(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ug(t,i,s),e!==null&&(Ou(e,t,s,r),eT(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pa(),r=$g(t),s=mf(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ug(t,s,r),e!==null&&(Ou(e,t,r,n),eT(e,t,r))}};function I9(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!bA(n,r)||!bA(s,i):!0}function hZ(t,e,n){var r=!1,s=im,i=e.contextType;return typeof i=="object"&&i!==null?i=Bl(i):(s=ic(e)?C0:jo.current,r=e.contextTypes,i=(r=r!=null)?SE(t,s):im),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=E2,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function N9(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&E2.enqueueReplaceState(e,e.state,null)}function HB(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},B8(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Bl(i):(i=ic(e)?C0:jo.current,s.context=SE(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(zB(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&E2.enqueueReplaceState(s,s.state,null),IR(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function TE(t,e){try{var n="",r=e;do n+=Hge(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function rD(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function GB(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yye=typeof WeakMap=="function"?WeakMap:Map;function fZ(t,e,n){n=mf(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){kR||(kR=!0,t5=r),GB(t,e)},n}function pZ(t,e,n){n=mf(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){GB(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){GB(t,e),typeof r!="function"&&(Lg===null?Lg=new Set([this]):Lg.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function x9(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yye;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=kye.bind(null,t,e,n),e.then(t,t))}function T9(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function R9(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mf(-1,1),e.tag=2,Ug(n,e,1))),n.lanes|=1),t)}var wye=jf.ReactCurrentOwner,tc=!1;function ea(t,e,n,r){e.child=t===null?zJ(e,null,n,r):NE(e,t.child,n,r)}function k9(t,e,n,r,s){n=n.render;var i=e.ref;return iv(e,s),r=j8(t,e,n,r,i,s),n=W8(),t!==null&&!tc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rf(t,e,s)):(Ns&&n&&T8(e),e.flags|=1,ea(t,e,r,s),e.child)}function P9(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Z8(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,gZ(t,e,i,r,s)):(t=oT(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:bA,n(o,r)&&t.ref===e.ref)return Rf(t,e,s)}return e.flags|=1,t=Fg(i,r),t.ref=e.ref,t.return=e,e.child=t}function gZ(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(bA(i,r)&&t.ref===e.ref)if(tc=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(tc=!0);else return e.lanes=t.lanes,Rf(t,e,s)}return qB(t,e,n,r,s)}function mZ(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},cs(Lb,Pc),Pc|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,cs(Lb,Pc),Pc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,cs(Lb,Pc),Pc|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,cs(Lb,Pc),Pc|=r;return ea(t,e,s,n),e.child}function yZ(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qB(t,e,n,r,s){var i=ic(n)?C0:jo.current;return i=SE(e,i),iv(e,s),n=j8(t,e,n,r,i,s),r=W8(),t!==null&&!tc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Rf(t,e,s)):(Ns&&r&&T8(e),e.flags|=1,ea(t,e,n,s),e.child)}function O9(t,e,n,r,s){if(ic(n)){var i=!0;ER(e)}else i=!1;if(iv(e,s),e.stateNode===null)rT(t,e),hZ(e,n,r),HB(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Bl(l):(l=ic(n)?C0:jo.current,l=SE(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&N9(e,o,r,l),Rp=!1;var h=e.memoizedState;o.state=h,IR(e,r,o,s),c=e.memoizedState,a!==r||h!==c||sc.current||Rp?(typeof u=="function"&&(zB(e,n,u,r),c=e.memoizedState),(a=Rp||I9(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,GJ(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:cu(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Bl(c):(c=ic(n)?C0:jo.current,c=SE(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&N9(e,o,r,c),Rp=!1,h=e.memoizedState,o.state=h,IR(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||sc.current||Rp?(typeof f=="function"&&(zB(e,n,f,r),p=e.memoizedState),(l=Rp||I9(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return VB(t,e,n,r,i,s)}function VB(t,e,n,r,s,i){yZ(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&w9(e,n,!1),Rf(t,e,i);r=e.stateNode,wye.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=NE(e,t.child,null,i),e.child=NE(e,null,a,i)):ea(t,e,a,i),e.memoizedState=r.state,s&&w9(e,n,!0),e.child}function wZ(t){var e=t.stateNode;e.pendingContext?y9(t,e.pendingContext,e.pendingContext!==e.context):e.context&&y9(t,e.context,!1),U8(t,e.containerInfo)}function D9(t,e,n,r,s){return IE(),k8(s),e.flags|=256,ea(t,e,n,r),e.child}var KB={dehydrated:null,treeContext:null,retryLane:0};function YB(t){return{baseLanes:t,cachePool:null,transitions:null}}function bZ(t,e,n){var r=e.pendingProps,s=Rs.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),cs(Rs,s&1),t===null)return jB(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=A2(o,r,0,null),t=o0(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=YB(n),e.memoizedState=KB,t):G8(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return bye(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Fg(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Fg(a,i):(i=o0(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?YB(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=KB,r}return i=t.child,t=i.sibling,r=Fg(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function G8(t,e){return e=A2({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function DN(t,e,n,r){return r!==null&&k8(r),NE(e,t.child,null,n),t=G8(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bye(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=rD(Error(Me(422))),DN(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=A2({mode:"visible",children:r.children},s,0,null),i=o0(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&NE(e,t.child,null,o),e.child.memoizedState=YB(o),e.memoizedState=KB,i);if(!(e.mode&1))return DN(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Me(419)),r=rD(i,r,void 0),DN(t,e,o,r)}if(a=(o&t.childLanes)!==0,tc||a){if(r=Hi,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tf(t,s),Ou(r,t,s,-1))}return J8(),r=rD(Error(Me(421))),DN(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Pye.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Wc=Bg(s.nextSibling),Gc=e,Ns=!0,bu=null,t!==null&&(xl[Tl++]=lf,xl[Tl++]=uf,xl[Tl++]=_0,lf=t.id,uf=t.overflow,_0=e),e=G8(e,r.children),e.flags|=4096,e)}function M9(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),WB(t.return,e,n)}function sD(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function vZ(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ea(t,e,r.children,n),r=Rs.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M9(t,n,e);else if(t.tag===19)M9(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(cs(Rs,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&NR(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),sD(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&NR(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}sD(e,!0,n,null,i);break;case"together":sD(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rT(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rf(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),S0|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Me(153));if(e.child!==null){for(t=e.child,n=Fg(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fg(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vye(t,e,n){switch(e.tag){case 3:wZ(e),IE();break;case 5:qJ(e);break;case 1:ic(e.type)&&ER(e);break;case 4:U8(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;cs(AR,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(cs(Rs,Rs.current&1),e.flags|=128,null):n&e.child.childLanes?bZ(t,e,n):(cs(Rs,Rs.current&1),t=Rf(t,e,n),t!==null?t.sibling:null);cs(Rs,Rs.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vZ(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),cs(Rs,Rs.current),r)break;return null;case 22:case 23:return e.lanes=0,mZ(t,e,n)}return Rf(t,e,n)}var EZ,QB,CZ,_Z;EZ=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};QB=function(){};CZ=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,wy(Fd.current);var i=null;switch(n){case"input":s=wB(t,s),r=wB(t,r),i=[];break;case"select":s=Us({},s,{value:void 0}),r=Us({},r,{value:void 0}),i=[];break;case"textarea":s=EB(t,s),r=EB(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bR)}_B(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(hA.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(hA.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&ms("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};_Z=function(t,e,n,r){n!==r&&(e.flags|=4)};function u1(t,e){if(!Ns)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ao(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Eye(t,e,n){var r=e.pendingProps;switch(R8(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ao(e),null;case 1:return ic(e.type)&&vR(),Ao(e),null;case 3:return r=e.stateNode,xE(),bs(sc),bs(jo),$8(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(PN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bu!==null&&(s5(bu),bu=null))),QB(t,e),Ao(e),null;case 5:L8(e);var s=wy(AA.current);if(n=e.type,t!==null&&e.stateNode!=null)CZ(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Me(166));return Ao(e),null}if(t=wy(Fd.current),PN(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[kd]=e,r[CA]=i,t=(e.mode&1)!==0,n){case"dialog":ms("cancel",r),ms("close",r);break;case"iframe":case"object":case"embed":ms("load",r);break;case"video":case"audio":for(s=0;s<K1.length;s++)ms(K1[s],r);break;case"source":ms("error",r);break;case"img":case"image":case"link":ms("error",r),ms("load",r);break;case"details":ms("toggle",r);break;case"input":Hj(r,i),ms("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ms("invalid",r);break;case"textarea":qj(r,i),ms("invalid",r)}_B(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&kN(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&kN(r.textContent,a,t),s=["children",""+a]):hA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ms("scroll",r)}switch(n){case"input":_N(r),Gj(r,i,!0);break;case"textarea":_N(r),Vj(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bR)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=JQ(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[kd]=e,t[CA]=r,EZ(t,e,!1,!1),e.stateNode=t;e:{switch(o=AB(n,r),n){case"dialog":ms("cancel",t),ms("close",t),s=r;break;case"iframe":case"object":case"embed":ms("load",t),s=r;break;case"video":case"audio":for(s=0;s<K1.length;s++)ms(K1[s],t);s=r;break;case"source":ms("error",t),s=r;break;case"img":case"image":case"link":ms("error",t),ms("load",t),s=r;break;case"details":ms("toggle",t),s=r;break;case"input":Hj(t,r),s=wB(t,r),ms("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Us({},r,{value:void 0}),ms("invalid",t);break;case"textarea":qj(t,r),s=EB(t,r),ms("invalid",t);break;default:s=r}_B(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?eJ(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ZQ(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&fA(t,c):typeof c=="number"&&fA(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(hA.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ms("scroll",t):c!=null&&g8(t,i,c,o))}switch(n){case"input":_N(t),Gj(t,r,!1);break;case"textarea":_N(t),Vj(t);break;case"option":r.value!=null&&t.setAttribute("value",""+sm(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?tv(t,!!r.multiple,i,!1):r.defaultValue!=null&&tv(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bR)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ao(e),null;case 6:if(t&&e.stateNode!=null)_Z(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Me(166));if(n=wy(AA.current),wy(Fd.current),PN(e)){if(r=e.stateNode,n=e.memoizedProps,r[kd]=e,(i=r.nodeValue!==n)&&(t=Gc,t!==null))switch(t.tag){case 3:kN(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kN(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kd]=e,e.stateNode=r}return Ao(e),null;case 13:if(bs(Rs),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ns&&Wc!==null&&e.mode&1&&!(e.flags&128))jJ(),IE(),e.flags|=98560,i=!1;else if(i=PN(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Me(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Me(317));i[kd]=e}else IE(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ao(e),i=!1}else bu!==null&&(s5(bu),bu=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Rs.current&1?Ei===0&&(Ei=3):J8())),e.updateQueue!==null&&(e.flags|=4),Ao(e),null);case 4:return xE(),QB(t,e),t===null&&vA(e.stateNode.containerInfo),Ao(e),null;case 10:return D8(e.type._context),Ao(e),null;case 17:return ic(e.type)&&vR(),Ao(e),null;case 19:if(bs(Rs),i=e.memoizedState,i===null)return Ao(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)u1(i,!1);else{if(Ei!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=NR(t),o!==null){for(e.flags|=128,u1(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return cs(Rs,Rs.current&1|2),e.child}t=t.sibling}i.tail!==null&&ti()>RE&&(e.flags|=128,r=!0,u1(i,!1),e.lanes=4194304)}else{if(!r)if(t=NR(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),u1(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ns)return Ao(e),null}else 2*ti()-i.renderingStartTime>RE&&n!==1073741824&&(e.flags|=128,r=!0,u1(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ti(),e.sibling=null,n=Rs.current,cs(Rs,r?n&1|2:n&1),e):(Ao(e),null);case 22:case 23:return Q8(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pc&1073741824&&(Ao(e),e.subtreeFlags&6&&(e.flags|=8192)):Ao(e),null;case 24:return null;case 25:return null}throw Error(Me(156,e.tag))}function Cye(t,e){switch(R8(e),e.tag){case 1:return ic(e.type)&&vR(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xE(),bs(sc),bs(jo),$8(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return L8(e),null;case 13:if(bs(Rs),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Me(340));IE()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bs(Rs),null;case 4:return xE(),null;case 10:return D8(e.type._context),null;case 22:case 23:return Q8(),null;case 24:return null;default:return null}}var MN=!1,Lo=!1,_ye=typeof WeakSet=="function"?WeakSet:Set,vt=null;function Ub(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Hs(t,e,r)}else n.current=null}function JB(t,e,n){try{n()}catch(r){Hs(t,e,r)}}var B9=!1;function Aye(t,e){if(DB=mR,t=xJ(),x8(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(MB={focusedElem:t,selectionRange:n},mR=!1,vt=e;vt!==null;)if(e=vt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,vt=t;else for(;vt!==null;){e=vt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:cu(e.type,g),m);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Me(163))}}catch(N){Hs(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,vt=t;break}vt=e.return}return p=B9,B9=!1,p}function T_(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&JB(e,n,i)}s=s.next}while(s!==r)}}function C2(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ZB(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function AZ(t){var e=t.alternate;e!==null&&(t.alternate=null,AZ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kd],delete e[CA],delete e[LB],delete e[oye],delete e[aye])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function SZ(t){return t.tag===5||t.tag===3||t.tag===4}function U9(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||SZ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function XB(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bR));else if(r!==4&&(t=t.child,t!==null))for(XB(t,e,n),t=t.sibling;t!==null;)XB(t,e,n),t=t.sibling}function e5(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(e5(t,e,n),t=t.sibling;t!==null;)e5(t,e,n),t=t.sibling}var to=null,wu=!1;function Xf(t,e,n){for(n=n.child;n!==null;)IZ(t,e,n),n=n.sibling}function IZ(t,e,n){if($d&&typeof $d.onCommitFiberUnmount=="function")try{$d.onCommitFiberUnmount(p2,n)}catch{}switch(n.tag){case 5:Lo||Ub(n,e);case 6:var r=to,s=wu;to=null,Xf(t,e,n),to=r,wu=s,to!==null&&(wu?(t=to,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):to.removeChild(n.stateNode));break;case 18:to!==null&&(wu?(t=to,n=n.stateNode,t.nodeType===8?JO(t.parentNode,n):t.nodeType===1&&JO(t,n),yA(t)):JO(to,n.stateNode));break;case 4:r=to,s=wu,to=n.stateNode.containerInfo,wu=!0,Xf(t,e,n),to=r,wu=s;break;case 0:case 11:case 14:case 15:if(!Lo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&JB(n,e,o),s=s.next}while(s!==r)}Xf(t,e,n);break;case 1:if(!Lo&&(Ub(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Hs(n,e,a)}Xf(t,e,n);break;case 21:Xf(t,e,n);break;case 22:n.mode&1?(Lo=(r=Lo)||n.memoizedState!==null,Xf(t,e,n),Lo=r):Xf(t,e,n);break;default:Xf(t,e,n)}}function L9(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _ye),e.forEach(function(r){var s=Oye.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zl(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:to=a.stateNode,wu=!1;break e;case 3:to=a.stateNode.containerInfo,wu=!0;break e;case 4:to=a.stateNode.containerInfo,wu=!0;break e}a=a.return}if(to===null)throw Error(Me(160));IZ(i,o,s),to=null,wu=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Hs(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NZ(e,t),e=e.sibling}function NZ(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zl(e,t),Qu(t),r&4){try{T_(3,t,t.return),C2(3,t)}catch(g){Hs(t,t.return,g)}try{T_(5,t,t.return)}catch(g){Hs(t,t.return,g)}}break;case 1:Zl(e,t),Qu(t),r&512&&n!==null&&Ub(n,n.return);break;case 5:if(Zl(e,t),Qu(t),r&512&&n!==null&&Ub(n,n.return),t.flags&32){var s=t.stateNode;try{fA(s,"")}catch(g){Hs(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&YQ(s,i),AB(a,o);var l=AB(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?eJ(s,d):u==="dangerouslySetInnerHTML"?ZQ(s,d):u==="children"?fA(s,d):g8(s,u,d,l)}switch(a){case"input":bB(s,i);break;case"textarea":QQ(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?tv(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?tv(s,!!i.multiple,i.defaultValue,!0):tv(s,!!i.multiple,i.multiple?[]:"",!1))}s[CA]=i}catch(g){Hs(t,t.return,g)}}break;case 6:if(Zl(e,t),Qu(t),r&4){if(t.stateNode===null)throw Error(Me(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Hs(t,t.return,g)}}break;case 3:if(Zl(e,t),Qu(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yA(e.containerInfo)}catch(g){Hs(t,t.return,g)}break;case 4:Zl(e,t),Qu(t);break;case 13:Zl(e,t),Qu(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(K8=ti())),r&4&&L9(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Lo=(l=Lo)||u,Zl(e,t),Lo=l):Zl(e,t),Qu(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(vt=t,u=t.child;u!==null;){for(d=vt=u;vt!==null;){switch(h=vt,f=h.child,h.tag){case 0:case 11:case 14:case 15:T_(4,h,h.return);break;case 1:Ub(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Hs(r,n,g)}}break;case 5:Ub(h,h.return);break;case 22:if(h.memoizedState!==null){F9(d);continue}}f!==null?(f.return=h,vt=f):F9(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=XQ("display",o))}catch(g){Hs(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Hs(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Zl(e,t),Qu(t),r&4&&L9(t);break;case 21:break;default:Zl(e,t),Qu(t)}}function Qu(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(SZ(n)){var r=n;break e}n=n.return}throw Error(Me(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fA(s,""),r.flags&=-33);var i=U9(t);e5(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=U9(t);XB(t,a,o);break;default:throw Error(Me(161))}}catch(c){Hs(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Sye(t,e,n){vt=t,xZ(t)}function xZ(t,e,n){for(var r=(t.mode&1)!==0;vt!==null;){var s=vt,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||MN;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Lo;a=MN;var l=Lo;if(MN=o,(Lo=c)&&!l)for(vt=s;vt!==null;)o=vt,c=o.child,o.tag===22&&o.memoizedState!==null?j9(s):c!==null?(c.return=o,vt=c):j9(s);for(;i!==null;)vt=i,xZ(i),i=i.sibling;vt=s,MN=a,Lo=l}$9(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,vt=i):$9(t)}}function $9(t){for(;vt!==null;){var e=vt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lo||C2(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lo)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:cu(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&_9(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_9(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&yA(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Me(163))}Lo||e.flags&512&&ZB(e)}catch(h){Hs(e,e.return,h)}}if(e===t){vt=null;break}if(n=e.sibling,n!==null){n.return=e.return,vt=n;break}vt=e.return}}function F9(t){for(;vt!==null;){var e=vt;if(e===t){vt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,vt=n;break}vt=e.return}}function j9(t){for(;vt!==null;){var e=vt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{C2(4,e)}catch(c){Hs(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Hs(e,s,c)}}var i=e.return;try{ZB(e)}catch(c){Hs(e,i,c)}break;case 5:var o=e.return;try{ZB(e)}catch(c){Hs(e,o,c)}}}catch(c){Hs(e,e.return,c)}if(e===t){vt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,vt=a;break}vt=e.return}}var Iye=Math.ceil,RR=jf.ReactCurrentDispatcher,q8=jf.ReactCurrentOwner,Ol=jf.ReactCurrentBatchConfig,rr=0,Hi=null,ci=null,fo=0,Pc=0,Lb=Cm(0),Ei=0,xA=null,S0=0,_2=0,V8=0,R_=null,Ka=null,K8=0,RE=1/0,Bh=null,kR=!1,t5=null,Lg=null,BN=!1,mg=null,PR=0,k_=0,n5=null,sT=-1,iT=0;function pa(){return rr&6?ti():sT!==-1?sT:sT=ti()}function $g(t){return t.mode&1?rr&2&&fo!==0?fo&-fo:lye.transition!==null?(iT===0&&(iT=hJ()),iT):(t=Or,t!==0||(t=window.event,t=t===void 0?16:bJ(t.type)),t):1}function Ou(t,e,n,r){if(50<k_)throw k_=0,n5=null,Error(Me(185));wI(t,n,r),(!(rr&2)||t!==Hi)&&(t===Hi&&(!(rr&2)&&(_2|=n),Ei===4&&Up(t,fo)),oc(t,r),n===1&&rr===0&&!(e.mode&1)&&(RE=ti()+500,b2&&_m()))}function oc(t,e){var n=t.callbackNode;lme(t,e);var r=gR(t,t===Hi?fo:0);if(r===0)n!==null&&Qj(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qj(n),e===1)t.tag===0?cye(W9.bind(null,t)):LJ(W9.bind(null,t)),sye(function(){!(rr&6)&&_m()}),n=null;else{switch(fJ(r)){case 1:n=v8;break;case 4:n=uJ;break;case 16:n=pR;break;case 536870912:n=dJ;break;default:n=pR}n=BZ(n,TZ.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function TZ(t,e){if(sT=-1,iT=0,rr&6)throw Error(Me(327));var n=t.callbackNode;if(ov()&&t.callbackNode!==n)return null;var r=gR(t,t===Hi?fo:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=OR(t,r);else{e=r;var s=rr;rr|=2;var i=kZ();(Hi!==t||fo!==e)&&(Bh=null,RE=ti()+500,i0(t,e));do try{Tye();break}catch(a){RZ(t,a)}while(!0);O8(),RR.current=i,rr=s,ci!==null?e=0:(Hi=null,fo=0,e=Ei)}if(e!==0){if(e===2&&(s=TB(t),s!==0&&(r=s,e=r5(t,s))),e===1)throw n=xA,i0(t,0),Up(t,r),oc(t,ti()),n;if(e===6)Up(t,r);else{if(s=t.current.alternate,!(r&30)&&!Nye(s)&&(e=OR(t,r),e===2&&(i=TB(t),i!==0&&(r=i,e=r5(t,i))),e===1))throw n=xA,i0(t,0),Up(t,r),oc(t,ti()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Me(345));case 2:Km(t,Ka,Bh);break;case 3:if(Up(t,r),(r&130023424)===r&&(e=K8+500-ti(),10<e)){if(gR(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pa(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=UB(Km.bind(null,t,Ka,Bh),e);break}Km(t,Ka,Bh);break;case 4:if(Up(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Pu(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ti()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Iye(r/1960))-r,10<r){t.timeoutHandle=UB(Km.bind(null,t,Ka,Bh),r);break}Km(t,Ka,Bh);break;case 5:Km(t,Ka,Bh);break;default:throw Error(Me(329))}}}return oc(t,ti()),t.callbackNode===n?TZ.bind(null,t):null}function r5(t,e){var n=R_;return t.current.memoizedState.isDehydrated&&(i0(t,e).flags|=256),t=OR(t,e),t!==2&&(e=Ka,Ka=n,e!==null&&s5(e)),t}function s5(t){Ka===null?Ka=t:Ka.push.apply(Ka,t)}function Nye(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Uu(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Up(t,e){for(e&=~V8,e&=~_2,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pu(e),r=1<<n;t[n]=-1,e&=~r}}function W9(t){if(rr&6)throw Error(Me(327));ov();var e=gR(t,0);if(!(e&1))return oc(t,ti()),null;var n=OR(t,e);if(t.tag!==0&&n===2){var r=TB(t);r!==0&&(e=r,n=r5(t,r))}if(n===1)throw n=xA,i0(t,0),Up(t,e),oc(t,ti()),n;if(n===6)throw Error(Me(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Km(t,Ka,Bh),oc(t,ti()),null}function Y8(t,e){var n=rr;rr|=1;try{return t(e)}finally{rr=n,rr===0&&(RE=ti()+500,b2&&_m())}}function I0(t){mg!==null&&mg.tag===0&&!(rr&6)&&ov();var e=rr;rr|=1;var n=Ol.transition,r=Or;try{if(Ol.transition=null,Or=1,t)return t()}finally{Or=r,Ol.transition=n,rr=e,!(rr&6)&&_m()}}function Q8(){Pc=Lb.current,bs(Lb)}function i0(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rye(n)),ci!==null)for(n=ci.return;n!==null;){var r=n;switch(R8(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vR();break;case 3:xE(),bs(sc),bs(jo),$8();break;case 5:L8(r);break;case 4:xE();break;case 13:bs(Rs);break;case 19:bs(Rs);break;case 10:D8(r.type._context);break;case 22:case 23:Q8()}n=n.return}if(Hi=t,ci=t=Fg(t.current,null),fo=Pc=e,Ei=0,xA=null,V8=_2=S0=0,Ka=R_=null,yy!==null){for(e=0;e<yy.length;e++)if(n=yy[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}yy=null}return t}function RZ(t,e){do{var n=ci;try{if(O8(),tT.current=TR,xR){for(var r=Bs.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xR=!1}if(A0=0,Mi=mi=Bs=null,x_=!1,SA=0,q8.current=null,n===null||n.return===null){Ei=1,xA=e,ci=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=fo,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=T9(o);if(f!==null){f.flags&=-257,R9(f,o,a,i,e),f.mode&1&&x9(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){x9(i,l,e),J8();break e}c=Error(Me(426))}}else if(Ns&&a.mode&1){var m=T9(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),R9(m,o,a,i,e),k8(TE(c,a));break e}}i=c=TE(c,a),Ei!==4&&(Ei=2),R_===null?R_=[i]:R_.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=fZ(i,c,e);C9(i,y);break e;case 1:a=c;var w=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Lg===null||!Lg.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=pZ(i,a,e);C9(i,N);break e}}i=i.return}while(i!==null)}OZ(n)}catch(I){e=I,ci===n&&n!==null&&(ci=n=n.return);continue}break}while(!0)}function kZ(){var t=RR.current;return RR.current=TR,t===null?TR:t}function J8(){(Ei===0||Ei===3||Ei===2)&&(Ei=4),Hi===null||!(S0&268435455)&&!(_2&268435455)||Up(Hi,fo)}function OR(t,e){var n=rr;rr|=2;var r=kZ();(Hi!==t||fo!==e)&&(Bh=null,i0(t,e));do try{xye();break}catch(s){RZ(t,s)}while(!0);if(O8(),rr=n,RR.current=r,ci!==null)throw Error(Me(261));return Hi=null,fo=0,Ei}function xye(){for(;ci!==null;)PZ(ci)}function Tye(){for(;ci!==null&&!eme();)PZ(ci)}function PZ(t){var e=MZ(t.alternate,t,Pc);t.memoizedProps=t.pendingProps,e===null?OZ(t):ci=e,q8.current=null}function OZ(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Cye(n,e),n!==null){n.flags&=32767,ci=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ei=6,ci=null;return}}else if(n=Eye(n,e,Pc),n!==null){ci=n;return}if(e=e.sibling,e!==null){ci=e;return}ci=e=t}while(e!==null);Ei===0&&(Ei=5)}function Km(t,e,n){var r=Or,s=Ol.transition;try{Ol.transition=null,Or=1,Rye(t,e,n,r)}finally{Ol.transition=s,Or=r}return null}function Rye(t,e,n,r){do ov();while(mg!==null);if(rr&6)throw Error(Me(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Me(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ume(t,i),t===Hi&&(ci=Hi=null,fo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||BN||(BN=!0,BZ(pR,function(){return ov(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ol.transition,Ol.transition=null;var o=Or;Or=1;var a=rr;rr|=4,q8.current=null,Aye(t,n),NZ(n,t),Qme(MB),mR=!!DB,MB=DB=null,t.current=n,Sye(n),tme(),rr=a,Or=o,Ol.transition=i}else t.current=n;if(BN&&(BN=!1,mg=t,PR=s),i=t.pendingLanes,i===0&&(Lg=null),sme(n.stateNode),oc(t,ti()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(kR)throw kR=!1,t=t5,t5=null,t;return PR&1&&t.tag!==0&&ov(),i=t.pendingLanes,i&1?t===n5?k_++:(k_=0,n5=t):k_=0,_m(),null}function ov(){if(mg!==null){var t=fJ(PR),e=Ol.transition,n=Or;try{if(Ol.transition=null,Or=16>t?16:t,mg===null)var r=!1;else{if(t=mg,mg=null,PR=0,rr&6)throw Error(Me(331));var s=rr;for(rr|=4,vt=t.current;vt!==null;){var i=vt,o=i.child;if(vt.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(vt=l;vt!==null;){var u=vt;switch(u.tag){case 0:case 11:case 15:T_(8,u,i)}var d=u.child;if(d!==null)d.return=u,vt=d;else for(;vt!==null;){u=vt;var h=u.sibling,f=u.return;if(AZ(u),u===l){vt=null;break}if(h!==null){h.return=f,vt=h;break}vt=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}vt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,vt=o;else e:for(;vt!==null;){if(i=vt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:T_(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,vt=y;break e}vt=i.return}}var w=t.current;for(vt=w;vt!==null;){o=vt;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,vt=C;else e:for(o=w;vt!==null;){if(a=vt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:C2(9,a)}}catch(I){Hs(a,a.return,I)}if(a===o){vt=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,vt=N;break e}vt=a.return}}if(rr=s,_m(),$d&&typeof $d.onPostCommitFiberRoot=="function")try{$d.onPostCommitFiberRoot(p2,t)}catch{}r=!0}return r}finally{Or=n,Ol.transition=e}}return!1}function z9(t,e,n){e=TE(n,e),e=fZ(t,e,1),t=Ug(t,e,1),e=pa(),t!==null&&(wI(t,1,e),oc(t,e))}function Hs(t,e,n){if(t.tag===3)z9(t,t,n);else for(;e!==null;){if(e.tag===3){z9(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lg===null||!Lg.has(r))){t=TE(n,t),t=pZ(e,t,1),e=Ug(e,t,1),t=pa(),e!==null&&(wI(e,1,t),oc(e,t));break}}e=e.return}}function kye(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pa(),t.pingedLanes|=t.suspendedLanes&n,Hi===t&&(fo&n)===n&&(Ei===4||Ei===3&&(fo&130023424)===fo&&500>ti()-K8?i0(t,0):V8|=n),oc(t,e)}function DZ(t,e){e===0&&(t.mode&1?(e=IN,IN<<=1,!(IN&130023424)&&(IN=4194304)):e=1);var n=pa();t=Tf(t,e),t!==null&&(wI(t,e,n),oc(t,n))}function Pye(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),DZ(t,n)}function Oye(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Me(314))}r!==null&&r.delete(e),DZ(t,n)}var MZ;MZ=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||sc.current)tc=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tc=!1,vye(t,e,n);tc=!!(t.flags&131072)}else tc=!1,Ns&&e.flags&1048576&&$J(e,_R,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rT(t,e),t=e.pendingProps;var s=SE(e,jo.current);iv(e,n),s=j8(null,e,r,t,s,n);var i=W8();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ic(r)?(i=!0,ER(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,B8(e),s.updater=E2,e.stateNode=s,s._reactInternals=e,HB(e,r,t,n),e=VB(null,e,r,!0,i,n)):(e.tag=0,Ns&&i&&T8(e),ea(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rT(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Mye(r),t=cu(r,t),s){case 0:e=qB(null,e,r,t,n);break e;case 1:e=O9(null,e,r,t,n);break e;case 11:e=k9(null,e,r,t,n);break e;case 14:e=P9(null,e,r,cu(r.type,t),n);break e}throw Error(Me(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cu(r,s),qB(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cu(r,s),O9(t,e,r,s,n);case 3:e:{if(wZ(e),t===null)throw Error(Me(387));r=e.pendingProps,i=e.memoizedState,s=i.element,GJ(t,e),IR(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=TE(Error(Me(423)),e),e=D9(t,e,r,n,s);break e}else if(r!==s){s=TE(Error(Me(424)),e),e=D9(t,e,r,n,s);break e}else for(Wc=Bg(e.stateNode.containerInfo.firstChild),Gc=e,Ns=!0,bu=null,n=zJ(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(IE(),r===s){e=Rf(t,e,n);break e}ea(t,e,r,n)}e=e.child}return e;case 5:return qJ(e),t===null&&jB(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,BB(r,s)?o=null:i!==null&&BB(r,i)&&(e.flags|=32),yZ(t,e),ea(t,e,o,n),e.child;case 6:return t===null&&jB(e),null;case 13:return bZ(t,e,n);case 4:return U8(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=NE(e,null,r,n):ea(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cu(r,s),k9(t,e,r,s,n);case 7:return ea(t,e,e.pendingProps,n),e.child;case 8:return ea(t,e,e.pendingProps.children,n),e.child;case 12:return ea(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,cs(AR,r._currentValue),r._currentValue=o,i!==null)if(Uu(i.value,o)){if(i.children===s.children&&!sc.current){e=Rf(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=mf(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),WB(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Me(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),WB(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ea(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,iv(e,n),s=Bl(s),r=r(s),e.flags|=1,ea(t,e,r,n),e.child;case 14:return r=e.type,s=cu(r,e.pendingProps),s=cu(r.type,s),P9(t,e,r,s,n);case 15:return gZ(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cu(r,s),rT(t,e),e.tag=1,ic(r)?(t=!0,ER(e)):t=!1,iv(e,n),hZ(e,r,s),HB(e,r,s,n),VB(null,e,r,!0,t,n);case 19:return vZ(t,e,n);case 22:return mZ(t,e,n)}throw Error(Me(156,e.tag))};function BZ(t,e){return lJ(t,e)}function Dye(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kl(t,e,n,r){return new Dye(t,e,n,r)}function Z8(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mye(t){if(typeof t=="function")return Z8(t)?1:0;if(t!=null){if(t=t.$$typeof,t===y8)return 11;if(t===w8)return 14}return 2}function Fg(t,e){var n=t.alternate;return n===null?(n=kl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oT(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Z8(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xb:return o0(n.children,s,i,e);case m8:o=8,s|=8;break;case pB:return t=kl(12,n,e,s|2),t.elementType=pB,t.lanes=i,t;case gB:return t=kl(13,n,e,s),t.elementType=gB,t.lanes=i,t;case mB:return t=kl(19,n,e,s),t.elementType=mB,t.lanes=i,t;case qQ:return A2(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HQ:o=10;break e;case GQ:o=9;break e;case y8:o=11;break e;case w8:o=14;break e;case Tp:o=16,r=null;break e}throw Error(Me(130,t==null?t:typeof t,""))}return e=kl(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function o0(t,e,n,r){return t=kl(7,t,r,e),t.lanes=n,t}function A2(t,e,n,r){return t=kl(22,t,r,e),t.elementType=qQ,t.lanes=n,t.stateNode={isHidden:!1},t}function iD(t,e,n){return t=kl(6,t,null,e),t.lanes=n,t}function oD(t,e,n){return e=kl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bye(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=FO(0),this.expirationTimes=FO(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=FO(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function X8(t,e,n,r,s,i,o,a,c){return t=new Bye(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=kl(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},B8(i),t}function Uye(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nb,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function UZ(t){if(!t)return im;t=t._reactInternals;e:{if(rw(t)!==t||t.tag!==1)throw Error(Me(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ic(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Me(171))}if(t.tag===1){var n=t.type;if(ic(n))return UJ(t,n,e)}return e}function LZ(t,e,n,r,s,i,o,a,c){return t=X8(n,r,!0,t,s,i,o,a,c),t.context=UZ(null),n=t.current,r=pa(),s=$g(n),i=mf(r,s),i.callback=e??null,Ug(n,i,s),t.current.lanes=s,wI(t,s,r),oc(t,r),t}function S2(t,e,n,r){var s=e.current,i=pa(),o=$g(s);return n=UZ(n),e.context===null?e.context=n:e.pendingContext=n,e=mf(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ug(s,e,o),t!==null&&(Ou(t,s,o,i),eT(t,s,o)),o}function DR(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function H9(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function e$(t,e){H9(t,e),(t=t.alternate)&&H9(t,e)}function Lye(){return null}var $Z=typeof reportError=="function"?reportError:function(t){console.error(t)};function t$(t){this._internalRoot=t}I2.prototype.render=t$.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Me(409));S2(t,e,null,null)};I2.prototype.unmount=t$.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;I0(function(){S2(null,t,null,null)}),e[xf]=null}};function I2(t){this._internalRoot=t}I2.prototype.unstable_scheduleHydration=function(t){if(t){var e=mJ();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bp.length&&e!==0&&e<Bp[n].priority;n++);Bp.splice(n,0,t),n===0&&wJ(t)}};function n$(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function N2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G9(){}function $ye(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=DR(o);i.call(l)}}var o=LZ(e,r,t,0,null,!1,!1,"",G9);return t._reactRootContainer=o,t[xf]=o.current,vA(t.nodeType===8?t.parentNode:t),I0(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=DR(c);a.call(l)}}var c=X8(t,0,!1,null,null,!1,!1,"",G9);return t._reactRootContainer=c,t[xf]=c.current,vA(t.nodeType===8?t.parentNode:t),I0(function(){S2(e,c,n,r)}),c}function x2(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=DR(o);a.call(c)}}S2(e,o,t,s)}else o=$ye(n,e,t,s,r);return DR(o)}pJ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=V1(e.pendingLanes);n!==0&&(E8(e,n|1),oc(e,ti()),!(rr&6)&&(RE=ti()+500,_m()))}break;case 13:I0(function(){var r=Tf(t,1);if(r!==null){var s=pa();Ou(r,t,1,s)}}),e$(t,1)}};C8=function(t){if(t.tag===13){var e=Tf(t,134217728);if(e!==null){var n=pa();Ou(e,t,134217728,n)}e$(t,134217728)}};gJ=function(t){if(t.tag===13){var e=$g(t),n=Tf(t,e);if(n!==null){var r=pa();Ou(n,t,e,r)}e$(t,e)}};mJ=function(){return Or};yJ=function(t,e){var n=Or;try{return Or=t,e()}finally{Or=n}};IB=function(t,e,n){switch(e){case"input":if(bB(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=w2(r);if(!s)throw Error(Me(90));KQ(r),bB(r,s)}}}break;case"textarea":QQ(t,n);break;case"select":e=n.value,e!=null&&tv(t,!!n.multiple,e,!1)}};rJ=Y8;sJ=I0;var Fye={usingClientEntryPoint:!1,Events:[vI,Pb,w2,tJ,nJ,Y8]},d1={findFiberByHostInstance:my,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jye={bundleType:d1.bundleType,version:d1.version,rendererPackageName:d1.rendererPackageName,rendererConfig:d1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jf.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aJ(t),t===null?null:t.stateNode},findFiberByHostInstance:d1.findFiberByHostInstance||Lye,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var UN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!UN.isDisabled&&UN.supportsFiber)try{p2=UN.inject(jye),$d=UN}catch{}}Jc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fye;Jc.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n$(e))throw Error(Me(200));return Uye(t,e,null,n)};Jc.createRoot=function(t,e){if(!n$(t))throw Error(Me(299));var n=!1,r="",s=$Z;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=X8(t,1,!1,null,null,n,!1,r,s),t[xf]=e.current,vA(t.nodeType===8?t.parentNode:t),new t$(e)};Jc.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Me(188)):(t=Object.keys(t).join(","),Error(Me(268,t)));return t=aJ(e),t=t===null?null:t.stateNode,t};Jc.flushSync=function(t){return I0(t)};Jc.hydrate=function(t,e,n){if(!N2(e))throw Error(Me(200));return x2(null,t,e,!0,n)};Jc.hydrateRoot=function(t,e,n){if(!n$(t))throw Error(Me(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$Z;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=LZ(e,null,t,1,n??null,s,!1,i,o),t[xf]=e.current,vA(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new I2(e)};Jc.render=function(t,e,n){if(!N2(e))throw Error(Me(200));return x2(null,t,e,!1,n)};Jc.unmountComponentAtNode=function(t){if(!N2(t))throw Error(Me(40));return t._reactRootContainer?(I0(function(){x2(null,null,t,!1,function(){t._reactRootContainer=null,t[xf]=null})}),!0):!1};Jc.unstable_batchedUpdates=Y8;Jc.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!N2(n))throw Error(Me(200));if(t==null||t._reactInternals===void 0)throw Error(Me(38));return x2(t,e,n,!1,r)};Jc.version="18.3.1-next-f1338f8080-20240426";function FZ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FZ)}catch(t){console.error(t)}}FZ(),FQ.exports=Jc;var r$=FQ.exports,q9=r$;hB.createRoot=q9.createRoot,hB.hydrateRoot=q9.hydrateRoot;const jZ="2.32.0";let h1={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${jZ}`},Ne=class i5 extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof i5?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof i5&&n.cause.docsPath||n.docsPath,i=(a=h1.getDocsUrl)==null?void 0:a.call(h1,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...h1.version?[`Version: ${h1.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=jZ}walk(e){return WZ(this,e)}};function WZ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?WZ(t.cause,e):e?null:t}let zZ=class extends Ne{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class Wye extends Ne{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class zye extends Ne{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let Hye=class extends Ne{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},HZ=class extends Ne{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},GZ=class extends Ne{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class V9 extends Ne{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function CC(t,{dir:e,size:n=32}={}){return typeof t=="string"?jg(t,{dir:e,size:n}):Gye(t,{dir:e,size:n})}function jg(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new GZ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Gye(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new GZ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Kd(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function qs(t){return Kd(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function jd(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const qye=new TextEncoder;function _C(t,e={}){return typeof t=="number"||typeof t=="bigint"?Kye(t,e):typeof t=="boolean"?Vye(t,e):Kd(t)?Ll(t,e):a0(t,e)}function Vye(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Hl(n,{size:e.size}),CC(n,{size:e.size})):n}const mh={zero:48,nine:57,A:65,F:70,a:97,f:102};function K9(t){if(t>=mh.zero&&t<=mh.nine)return t-mh.zero;if(t>=mh.A&&t<=mh.F)return t-(mh.A-10);if(t>=mh.a&&t<=mh.f)return t-(mh.a-10)}function Ll(t,e={}){let n=t;e.size&&(Hl(n,{size:e.size}),n=CC(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=K9(r.charCodeAt(a++)),l=K9(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Ne(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Kye(t,e){const n=Rt(t,e);return Ll(n)}function a0(t,e={}){const n=qye.encode(t);return typeof e.size=="number"?(Hl(n,{size:e.size}),CC(n,{dir:"right",size:e.size})):n}function Hl(t,{size:e}){if(qs(t)>e)throw new Hye({givenSize:qs(t),maxSize:e})}function Yc(t,e={}){const{signed:n}=e;e.size&&Hl(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Yye(t,e={}){let n=t;if(e.size&&(Hl(n,{size:e.size}),n=jd(n)),jd(n)==="0x00")return!1;if(jd(n)==="0x01")return!0;throw new zye(n)}function Lu(t,e={}){return Number(Yc(t,e))}function qZ(t,e={}){let n=Ll(t);return e.size&&(Hl(n,{size:e.size}),n=jd(n,{dir:"right"})),new TextDecoder().decode(n)}const Qye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $l(t,e={}){return typeof t=="number"||typeof t=="bigint"?Rt(t,e):typeof t=="string"?kE(t,e):typeof t=="boolean"?VZ(t,e):Si(t,e)}function VZ(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Hl(n,{size:e.size}),CC(n,{size:e.size})):n}function Si(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Qye[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Hl(r,{size:e.size}),CC(r,{dir:"right",size:e.size})):r}function Rt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new zZ({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?CC(a,{size:r}):a}const Jye=new TextEncoder;function kE(t,e={}){const n=Jye.encode(t);return Si(n,e)}async function Zye(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Rt(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function $u(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new d0e(t.type);return`${t.name}(${T2(t.inputs,{includeName:e})})`}function T2(t,{includeName:e=!1}={}){return t?t.map(n=>Xye(n,{includeName:e})).join(e?", ":","):""}function Xye(t,{includeName:e}){return t.type.startsWith("tuple")?`(${T2(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class e0e extends Ne{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class Y9 extends Ne{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class KZ extends Ne{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${T2(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class CI extends Ne{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class t0e extends Ne{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class n0e extends Ne{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${qs(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class r0e extends Ne{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class s0e extends Ne{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class Q9 extends Ne{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class YZ extends Ne{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class i0e extends Ne{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class QZ extends Ne{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class J9 extends Ne{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class PE extends Ne{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class JZ extends Ne{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class o0e extends Ne{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class a0e extends Ne{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${$u(e.abiItem)}\`, and`,`\`${n.type}\` in \`${$u(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let c0e=class extends Ne{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class TA extends Ne{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${T2(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class R2 extends Ne{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${$u(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class l0e extends Ne{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class u0e extends Ne{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let ZZ=class extends Ne{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class d0e extends Ne{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Fl(t){return typeof t[0]=="string"?AC(t):h0e(t)}function h0e(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function AC(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let om=class extends Ne{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},k2=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const LN=BigInt(2**32-1),Z9=BigInt(32);function f0e(t,e=!1){return e?{h:Number(t&LN),l:Number(t>>Z9&LN)}:{h:Number(t>>Z9&LN)|0,l:Number(t&LN)|0}}function XZ(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=f0e(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const X9=(t,e,n)=>t>>>n,e7=(t,e,n)=>t<<32-n|e>>>n,Pw=(t,e,n)=>t>>>n|e<<32-n,Ow=(t,e,n)=>t<<32-n|e>>>n,$N=(t,e,n)=>t<<64-n|e>>>n-32,FN=(t,e,n)=>t>>>n-32|e<<64-n,p0e=(t,e,n)=>t<<n|e>>>32-n,g0e=(t,e,n)=>e<<n|t>>>32-n,m0e=(t,e,n)=>e<<n-32|t>>>64-n,y0e=(t,e,n)=>t<<n-32|e>>>64-n;function yh(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const w0e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),b0e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,v0e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),E0e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,C0e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),_0e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Dw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function s$(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function RA(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function jl(t,...e){if(!s$(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function A0e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");RA(t.outputLen),RA(t.blockLen)}function OE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function eX(t,e){jl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function S0e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function am(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function aD(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ju(t,e){return t<<32-e|t>>>e}const I0e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function N0e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function x0e(t){for(let e=0;e<t.length;e++)t[e]=N0e(t[e]);return t}const t7=I0e?t=>t:x0e,tX=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",T0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function DE(t){if(jl(t),tX)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=T0e[t[n]];return e}const wh={_0:48,_9:57,A:65,F:70,a:97,f:102};function n7(t){if(t>=wh._0&&t<=wh._9)return t-wh._0;if(t>=wh.A&&t<=wh.F)return t-(wh.A-10);if(t>=wh.a&&t<=wh.f)return t-(wh.a-10)}function i$(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(tX)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=n7(t.charCodeAt(i)),a=n7(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function R0e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function _I(t){return typeof t=="string"&&(t=R0e(t)),jl(t),t}function df(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];jl(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let o$=class{};function a$(t){const e=r=>t().update(_I(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function k0e(t){const e=(r,s)=>t(s).update(_I(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function nX(t=32){if(Dw&&typeof Dw.getRandomValues=="function")return Dw.getRandomValues(new Uint8Array(t));if(Dw&&typeof Dw.randomBytes=="function")return Uint8Array.from(Dw.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const P0e=BigInt(0),f1=BigInt(1),O0e=BigInt(2),D0e=BigInt(7),M0e=BigInt(256),B0e=BigInt(113),rX=[],sX=[],iX=[];for(let t=0,e=f1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],rX.push(2*(5*r+n)),sX.push((t+1)*(t+2)/2%64);let s=P0e;for(let i=0;i<7;i++)e=(e<<f1^(e>>D0e)*B0e)%M0e,e&O0e&&(s^=f1<<(f1<<BigInt(i))-f1);iX.push(s)}const oX=XZ(iX,!0),U0e=oX[0],L0e=oX[1],r7=(t,e,n)=>n>32?m0e(t,e,n):p0e(t,e,n),s7=(t,e,n)=>n>32?y0e(t,e,n):g0e(t,e,n);function aX(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=r7(l,u,1)^n[a],h=s7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=sX[o],c=r7(s,i,a),l=s7(s,i,a),u=rX[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=U0e[r],t[1]^=L0e[r]}am(n)}let c$=class cX extends o${constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,RA(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=S0e(this.state)}clone(){return this._cloneInto()}keccak(){t7(this.state32),aX(this.state32,this.rounds),t7(this.state32),this.posOut=0,this.pos=0}update(e){OE(this),e=_I(e),jl(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){OE(this,!1),jl(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return RA(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(eX(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,am(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new cX(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Am=(t,e,n)=>a$(()=>new c$(e,t,n)),$0e=Am(6,144,224/8),F0e=Am(6,136,256/8),j0e=Am(6,104,384/8),W0e=Am(6,72,512/8),z0e=Am(1,144,224/8),l$=Am(1,136,256/8),H0e=Am(1,104,384/8),G0e=Am(1,72,512/8),lX=(t,e,n)=>k0e((r={})=>new c$(e,t,r.dkLen===void 0?n:r.dkLen,!0)),q0e=lX(31,168,128/8),V0e=lX(31,136,256/8),eot=Object.freeze(Object.defineProperty({__proto__:null,Keccak:c$,keccakP:aX,keccak_224:z0e,keccak_256:l$,keccak_384:H0e,keccak_512:G0e,sha3_224:$0e,sha3_256:F0e,sha3_384:j0e,sha3_512:W0e,shake128:q0e,shake256:V0e},Symbol.toStringTag,{value:"Module"}));function ho(t,e){const n=e||"hex",r=l$(Kd(t,{strict:!1})?_C(t):t);return n==="bytes"?r:$l(r)}const cD=new k2(8192);function AI(t,e){if(cD.has(`${t}.${e}`))return cD.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=ho(a0(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return cD.set(`${t}.${e}`,i),i}function hf(t,e){if(!Wl(t,{strict:!1}))throw new om({address:t});return AI(t,e)}const K0e=/^0x[a-fA-F0-9]{40}$/,lD=new k2(8192);function Wl(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(lD.has(r))return lD.get(r);const s=K0e.test(t)?t.toLowerCase()===t?!0:n?AI(t)===t:!0:!1;return lD.set(r,s),s}function ME(t,e,n,{strict:r}={}){return Kd(t,{strict:!1})?MR(t,e,n,{strict:r}):hX(t,e,n,{strict:r})}function uX(t,e){if(typeof e=="number"&&e>0&&e>qs(t)-1)throw new HZ({offset:e,position:"start",size:qs(t)})}function dX(t,e,n){if(typeof e=="number"&&typeof n=="number"&&qs(t)!==n-e)throw new HZ({offset:n,position:"end",size:qs(t)})}function hX(t,e,n,{strict:r}={}){uX(t,e);const s=t.slice(e,n);return r&&dX(s,e,n),s}function MR(t,e,n,{strict:r}={}){uX(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&dX(s,e,n),s}const Y0e=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,fX=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Sm(t,e){if(t.length!==e.length)throw new r0e({expectedLength:t.length,givenLength:e.length});const n=Q0e({params:t,values:e}),r=d$(n);return r.length===0?"0x":r}function Q0e({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(u$({param:t[r],value:e[r]}));return n}function u$({param:t,value:e}){const n=h$(t.type);if(n){const[r,s]=n;return Z0e(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return rwe(e,{param:t});if(t.type==="address")return J0e(e);if(t.type==="bool")return ewe(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=fX.exec(t.type)??[];return twe(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return X0e(e,{param:t});if(t.type==="string")return nwe(e);throw new l0e(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function d$(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=qs(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Rt(e+s,{size:32})),r.push(a),s+=qs(a)):n.push(a)}return Fl([...n,...r])}function J0e(t){if(!Wl(t))throw new om({address:t});return{dynamic:!1,encoded:jg(t.toLowerCase())}}function Z0e(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new ZZ(t);if(!r&&t.length!==e)throw new t0e({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=u$({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=d$(i);if(r){const a=Rt(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Fl([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Fl(i.map(({encoded:o})=>o))}}function X0e(t,{param:e}){const[,n]=e.type.split("bytes"),r=qs(t);if(!n){let s=t;return r%32!==0&&(s=jg(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Fl([jg(Rt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new n0e({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:jg(t,{dir:"right"})}}function ewe(t){if(typeof t!="boolean")throw new Ne(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:jg(VZ(t))}}function twe(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new zZ({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Rt(t,{size:32,signed:e})}}function nwe(t){const e=kE(t),n=Math.ceil(qs(e)/32),r=[];for(let s=0;s<n;s++)r.push(jg(ME(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Fl([jg(Rt(qs(e),{size:32})),...r])}}function rwe(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=u$({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?d$(r):Fl(r.map(({encoded:s})=>s))}}function h$(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const uD="/docs/contract/encodeDeployData";function P2(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new e0e({docsPath:uD});if(!("inputs"in s))throw new Y9({docsPath:uD});if(!s.inputs||s.inputs.length===0)throw new Y9({docsPath:uD});const i=Sm(s.inputs,n);return AC([r,i])}function Ks(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class sw extends Ne{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class aT extends Ne{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function swe(t){const e=ho(`0x${t.substring(4)}`).substring(26);return AI(`0x${e}`)}const iwe="modulepreload",owe=function(t){return"/"+t},i7={},no=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=owe(c),c in i7)return;i7[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":iwe,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function awe({hash:t,signature:e}){const n=Kd(t)?t:$l(t),{secp256k1:r}=await no(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>E1e);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=o7(f);return new r.Signature(Yc(l),Yc(u)).addRecoveryBit(p)}const o=Kd(e)?e:$l(e);if(qs(o)!==65)throw new Error("invalid signature length");const a=Lu(`0x${o.slice(130)}`),c=o7(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function o7(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function pX({hash:t,signature:e}){return swe(await awe({hash:t,signature:e}))}class a7 extends Ne{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class gX extends Ne{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class cwe extends Ne{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const lwe={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new cwe({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new gX({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new a7({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new a7({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function f$(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(lwe);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function uwe(t,e="hex"){const n=mX(t),r=f$(new Uint8Array(n.length));return n.encode(r),e==="hex"?Si(r.bytes):r.bytes}function mX(t){return Array.isArray(t)?dwe(t.map(e=>mX(e))):hwe(t)}function dwe(t){const e=t.reduce((s,i)=>s+i.length,0),n=yX(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function hwe(t){const e=typeof t=="string"?Ll(t):t,n=yX(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function yX(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new Ne("Length is too large.")}function fwe(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=ho(AC(["0x05",uwe([e?Rt(e):"0x",s,n?Rt(n):"0x"])]));return r==="bytes"?Ll(i):i}async function wX(t){const{authorization:e,signature:n}=t;return pX({hash:fwe(e),signature:n??e})}class o5 extends Ne{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class pwe extends Ne{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class gwe extends Ne{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class bX extends Ne{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function vX({chain:t,currentChainId:e}){if(!t)throw new gwe;if(e!==t.id)throw new pwe({chain:t,currentChainId:e})}const mwe={gwei:9,wei:18},ywe={ether:-9,wei:9},wwe={ether:-18,gwei:-9};function Im(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function ac(t,e="wei"){return Im(t,ywe[e])}class by extends Ne{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(by,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(by,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class BR extends Ne{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ac(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(BR,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class a5 extends Ne{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ac(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(a5,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class c5 extends Ne{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(c5,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class l5 extends Ne{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(l5,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class u5 extends Ne{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(u5,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class d5 extends Ne{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(d5,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class h5 extends Ne{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(h5,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class f5 extends Ne{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(f5,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class p5 extends Ne{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(p5,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class UR extends Ne{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ac(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ac(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(UR,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class SI extends Ne{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function p$(t,e="wei"){return Im(t,mwe[e])}function II(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class bwe extends Ne{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class vwe extends Ne{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",II(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Ewe extends Ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=II({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${p$(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ac(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ac(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ac(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class EX extends Ne{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class CX extends Ne{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class Cwe extends Ne{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const _i=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),_we=t=>t,g$=t=>t;class P_ extends Ne{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${g$(o)}`,e&&`Request body: ${_i(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class m$ extends Ne{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${g$(r)}`,`Request body: ${_i(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class c7 extends Ne{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${g$(n)}`,`Request body: ${_i(e)}`],name:"TimeoutError"})}}const Awe=-1;class fc extends Ne{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof m$?e.code:n??Awe}}class Xc extends fc{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class kA extends fc{constructor(e){super(e,{code:kA.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(kA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class PA extends fc{constructor(e){super(e,{code:PA.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(PA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class OA extends fc{constructor(e,{method:n}={}){super(e,{code:OA.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(OA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class DA extends fc{constructor(e){super(e,{code:DA.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(DA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class N0 extends fc{constructor(e){super(e,{code:N0.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(N0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class x0 extends fc{constructor(e){super(e,{code:x0.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(x0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class MA extends fc{constructor(e){super(e,{code:MA.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(MA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Wg extends fc{constructor(e){super(e,{code:Wg.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Wg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class BE extends fc{constructor(e){super(e,{code:BE.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(BE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class vy extends fc{constructor(e,{method:n}={}){super(e,{code:vy.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(vy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class UE extends fc{constructor(e){super(e,{code:UE.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(UE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class BA extends fc{constructor(e){super(e,{code:BA.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(BA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class gi extends Xc{constructor(e){super(e,{code:gi.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(gi,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class UA extends Xc{constructor(e){super(e,{code:UA.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(UA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class LA extends Xc{constructor(e,{method:n}={}){super(e,{code:LA.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(LA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class $A extends Xc{constructor(e){super(e,{code:$A.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty($A,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class FA extends Xc{constructor(e){super(e,{code:FA.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(FA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Yd extends Xc{constructor(e){super(e,{code:Yd.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Yd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class LE extends Xc{constructor(e){super(e,{code:LE.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(LE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class jA extends Xc{constructor(e){super(e,{code:jA.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(jA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class WA extends Xc{constructor(e){super(e,{code:WA.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(WA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class zA extends Xc{constructor(e){super(e,{code:zA.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(zA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class HA extends Xc{constructor(e){super(e,{code:HA.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(HA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class GA extends Xc{constructor(e){super(e,{code:GA.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(GA,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class $E extends Xc{constructor(e){super(e,{code:$E.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty($E,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Swe extends fc{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function O2(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof Ne?t.walk(s=>(s==null?void 0:s.code)===by.code):t;return r instanceof Ne?new by({cause:t,message:r.details}):by.nodeMessage.test(n)?new by({cause:t,message:t.details}):BR.nodeMessage.test(n)?new BR({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):a5.nodeMessage.test(n)?new a5({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):c5.nodeMessage.test(n)?new c5({cause:t,nonce:e==null?void 0:e.nonce}):l5.nodeMessage.test(n)?new l5({cause:t,nonce:e==null?void 0:e.nonce}):u5.nodeMessage.test(n)?new u5({cause:t,nonce:e==null?void 0:e.nonce}):d5.nodeMessage.test(n)?new d5({cause:t}):h5.nodeMessage.test(n)?new h5({cause:t,gas:e==null?void 0:e.gas}):f5.nodeMessage.test(n)?new f5({cause:t,gas:e==null?void 0:e.gas}):p5.nodeMessage.test(n)?new p5({cause:t}):UR.nodeMessage.test(n)?new UR({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new SI({cause:t})}function _X(t,{docsPath:e,...n}){const r=(()=>{const s=O2(t,n);return s instanceof SI?t:s})();return new Ewe(r,{docsPath:e,...n})}function D2(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const Iwe={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function SC(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Nwe(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Si(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Rt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Rt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Rt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Rt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Rt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Rt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=Iwe[t.type]),typeof t.value<"u"&&(e.value=Rt(t.value)),e}function Nwe(t){return t.map(e=>({address:e.address,r:e.r?Rt(BigInt(e.r)):e.r,s:e.s?Rt(BigInt(e.s)):e.s,chainId:Rt(e.chainId),nonce:Rt(e.nonce),...typeof e.yParity<"u"?{yParity:Rt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Rt(e.v)}:{}}))}function zt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const xwe=2n**256n-1n;function iw(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Ks(e):void 0;if(o&&!Wl(o.address))throw new om({address:o.address});if(i&&!Wl(i))throw new om({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new bwe;if(r&&r>xwe)throw new BR({maxFeePerGas:r});if(s&&r&&s>r)throw new UR({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function IC(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Lu(e)}class Twe extends Ne{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class y$ extends Ne{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Rwe extends Ne{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ac(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class AX extends Ne{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const SX={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function IX(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Lu(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Lu(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?SX[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=kwe(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function kwe(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function NX(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:IX(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Ud(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?Rt(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new AX({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||NX)(c)}async function w$(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Pwe(t,e){return xX(t,e)}async function xX(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await zt(t,Ud,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Yc(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):zt(t,Ud,"getBlock")({}),zt(t,w$,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new y$;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Owe(t,e){return g5(t,e)}async function g5(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new Twe;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await zt(t,Ud,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new y$;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await xX(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await zt(t,w$,"getGasPrice")({}))}}class Dwe extends Ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=II({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${p$(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ac(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ac(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ac(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function Mwe(t,{docsPath:e,...n}){const r=(()=>{const s=O2(t,n);return s instanceof SI?t:s})();return new Dwe(r,{docsPath:e,...n})}class Bwe extends Ne{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Uwe extends Ne{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function l7(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function Lwe(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=l7(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=l7(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function u7(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new V9({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new V9({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function $we(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Rt(e)),n!==void 0&&(o.nonce=Rt(n)),r!==void 0&&(o.state=u7(r)),s!==void 0){if(o.state)throw new Uwe;o.stateDiff=u7(s)}return o}function b$(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Wl(n,{strict:!1}))throw new om({address:n});if(e[n])throw new Bwe({address:n});e[n]=$we(r)}return e}async function v$(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?Rt(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function M2(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Ks(n):void 0;try{let v=function(_){const{block:D,request:x,rpcStateOverride:B}=_;return t.request({method:"eth_estimateGas",params:B?[x,D??"latest",B]:D?[x,D]:[x]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,value:N,stateOverride:I,...k}=await NI(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),U=(typeof d=="bigint"?Rt(d):void 0)||h,M=b$(I),H=await(async()=>{if(k.to)return k.to;if(c&&c.length>0)return await wX({authorization:c[0]}).catch(()=>{throw new Ne("`to` is required. Could not infer from `authorizationList`")})})();iw(e);const j=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,$=(j||SC)({...D2(k,{format:j}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,to:H,value:N});let E=BigInt(await v({block:U,request:$,rpcStateOverride:M}));if(c){const _=await v$(t,{address:$.from}),D=await Promise.all(c.map(async x=>{const{address:B}=x,W=await v({block:U,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:B,value:Rt(_)},rpcStateOverride:M}).catch(()=>100000n);return 2n*BigInt(W)}));E+=D.reduce((x,B)=>x+B,0n)}return E}catch(a){throw Mwe(a,{...e,account:r,chain:t.chain})}}async function E$(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Rt(r):n]},{dedupe:!!r});return Lu(s)}function TX(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Ll(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Si(i))}function RX(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Ll(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Ll(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Si(o))}function Fwe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function jwe(t,e,n){return t&e^~t&n}function Wwe(t,e,n){return t&e^t&n^e&n}class kX extends o${constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=aD(this.buffer)}update(e){OE(this),e=_I(e),jl(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=aD(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){OE(this),eX(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,am(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Fwe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=aD(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const ep=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),So=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),zwe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tp=new Uint32Array(64);let Hwe=class extends kX{constructor(e=32){super(64,e,8,!1),this.A=ep[0]|0,this.B=ep[1]|0,this.C=ep[2]|0,this.D=ep[3]|0,this.E=ep[4]|0,this.F=ep[5]|0,this.G=ep[6]|0,this.H=ep[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)tp[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=tp[d-15],f=tp[d-2],p=Ju(h,7)^Ju(h,18)^h>>>3,g=Ju(f,17)^Ju(f,19)^f>>>10;tp[d]=g+tp[d-7]+p+tp[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Ju(a,6)^Ju(a,11)^Ju(a,25),f=u+h+jwe(a,c,l)+zwe[d]+tp[d]|0,g=(Ju(r,2)^Ju(r,13)^Ju(r,22))+Wwe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){am(tp)}destroy(){this.set(0,0,0,0,0,0,0,0),am(this.buffer)}};const PX=XZ(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Gwe=PX[0],qwe=PX[1],np=new Uint32Array(80),rp=new Uint32Array(80);let Vwe=class extends kX{constructor(e=64){super(128,e,16,!1),this.Ah=So[0]|0,this.Al=So[1]|0,this.Bh=So[2]|0,this.Bl=So[3]|0,this.Ch=So[4]|0,this.Cl=So[5]|0,this.Dh=So[6]|0,this.Dl=So[7]|0,this.Eh=So[8]|0,this.El=So[9]|0,this.Fh=So[10]|0,this.Fl=So[11]|0,this.Gh=So[12]|0,this.Gl=So[13]|0,this.Hh=So[14]|0,this.Hl=So[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let C=0;C<16;C++,n+=4)np[C]=e.getUint32(n),rp[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const N=np[C-15]|0,I=rp[C-15]|0,k=Pw(N,I,1)^Pw(N,I,8)^X9(N,I,7),P=Ow(N,I,1)^Ow(N,I,8)^e7(N,I,7),U=np[C-2]|0,M=rp[C-2]|0,H=Pw(U,M,19)^$N(U,M,61)^X9(U,M,6),j=Ow(U,M,19)^FN(U,M,61)^e7(U,M,6),K=v0e(P,j,rp[C-7],rp[C-16]),$=E0e(K,k,H,np[C-7],np[C-16]);np[C]=$|0,rp[C]=K|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:y,Hl:w}=this;for(let C=0;C<80;C++){const N=Pw(d,h,14)^Pw(d,h,18)^$N(d,h,41),I=Ow(d,h,14)^Ow(d,h,18)^FN(d,h,41),k=d&f^~d&g,P=h&p^~h&m,U=C0e(w,I,P,qwe[C],rp[C]),M=_0e(U,y,N,k,Gwe[C],np[C]),H=U|0,j=Pw(r,s,28)^$N(r,s,34)^$N(r,s,39),K=Ow(r,s,28)^FN(r,s,34)^FN(r,s,39),$=r&i^r&a^i&a,v=s&o^s&c^o&c;y=g|0,w=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=yh(l|0,u|0,M|0,H|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const E=w0e(H,K,v);r=b0e(E,M,j,$),s=E|0}({h:r,l:s}=yh(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=yh(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=yh(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=yh(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=yh(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=yh(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=yh(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:w}=yh(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,m,y,w)}roundClean(){am(np,rp)}destroy(){am(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const OX=a$(()=>new Hwe),Kwe=a$(()=>new Vwe),m5=OX;function Ywe(t,e){return m5(Kd(t,{strict:!1})?_C(t):t)}function Qwe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Ywe(e);return s.set([n],0),r==="bytes"?s:Si(s)}function Jwe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Qwe({commitment:i,to:r,version:n}));return s}const d7=6,DX=32,C$=4096,MX=DX*C$,h7=MX*d7-1-1*C$*d7;class Zwe extends Ne{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Xwe extends Ne{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function ebe(t){const e=typeof t.data=="string"?Ll(t.data):t.data,n=qs(e);if(!n)throw new Xwe;if(n>h7)throw new Zwe({maxSize:h7,size:n});const r=[];let s=!0,i=0;for(;s;){const o=f$(new Uint8Array(MX));let a=0;for(;a<C$;){const c=e.slice(i,i+(DX-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Si(o.bytes))}function tbe(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??ebe({data:e}),i=t.commitments??TX({blobs:s,kzg:n,to:r}),o=t.proofs??RX({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function nbe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new vwe({transaction:t})}const BX=["blobVersionedHashes","chainId","fees","gas","nonce","type"],f7=new Map;async function NI(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=BX,type:u}=e,d=n&&Ks(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await zt(t,Ud,"getBlock")({blockTag:"latest"}),f)}let g;async function m(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await zt(t,IC,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await m();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await zt(t,E$,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=TX({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const w=Jwe({commitments:y,to:"hex"});h.blobVersionedHashes=w}if(l.includes("sidecars")){const w=RX({blobs:r,commitments:y,kzg:o}),C=tbe({blobs:r,commitments:y,proofs:w,to:"hex"});h.sidecars=C}}if(l.includes("chainId")&&(h.chainId=await m()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=nbe(h)}catch{let y=f7.get(t.uid);if(typeof y>"u"){const w=await p();y=typeof(w==null?void 0:w.baseFeePerGas)=="bigint",f7.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:w,maxPriorityFeePerGas:C}=await g5(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<C)throw new Rwe({maxPriorityFeePerGas:C});h.maxPriorityFeePerGas=C,h.maxFeePerGas=w}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new y$;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:w}=await g5(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=w}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await zt(t,M2,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),iw(h),delete h.parameters,h}async function _$(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const dD=new k2(128);async function xI(t,e){var w,C,N,I;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...m}=e;if(typeof n>"u")throw new sw({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?Ks(n):null;try{iw(e);const k=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await wX({authorization:i[0]}).catch(()=>{throw new Ne("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let P;r!==null&&(P=await zt(t,IC,"getChainId")({}),vX({currentChainId:P,chain:r}));const U=(N=(C=(w=t.chain)==null?void 0:w.formatters)==null?void 0:C.transactionRequest)==null?void 0:N.format,H=(U||SC)({...D2(m,{format:U}),accessList:s,authorizationList:i,blobs:o,chainId:P,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:k,type:p,value:g}),j=dD.get(t.uid),K=j?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:K,params:[H]},{retryCount:0})}catch($){if(j===!1)throw $;const v=$;if(v.name==="InvalidInputRpcError"||v.name==="InvalidParamsRpcError"||v.name==="MethodNotFoundRpcError"||v.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[H]},{retryCount:0}).then(E=>(dD.set(t.uid,!0),E)).catch(E=>{const _=E;throw _.name==="MethodNotFoundRpcError"||_.name==="MethodNotSupportedRpcError"?(dD.set(t.uid,!1),v):_});throw v}}if((y==null?void 0:y.type)==="local"){const P=await zt(t,NI,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...BX,"sidecars"],type:p,value:g,...m,to:k}),U=(I=r==null?void 0:r.serializers)==null?void 0:I.transaction,M=await y.signTransaction(P,{serializer:U});return await zt(t,_$,"sendRawTransaction")({serializedTransaction:M})}throw(y==null?void 0:y.type)==="smart"?new aT({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new aT({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(k){throw k instanceof aT?k:_X(k,{...e,account:y,chain:e.chain||void 0})}}function rbe(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=P2({abi:n,args:r,bytecode:s});return xI(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const y5=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],w5=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],UX=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],LX=[...UX,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],sbe=[...UX,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],p7=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],g7=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],m7=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function ibe(t,e={}){typeof e.size<"u"&&Hl(t,{size:e.size});const n=Si(t,e);return Yc(n,e)}function obe(t,e={}){let n=t;if(typeof e.size<"u"&&(Hl(n,{size:e.size}),n=jd(n)),n.length>1||n[0]>1)throw new Wye(n);return!!n[0]}function yf(t,e={}){typeof e.size<"u"&&Hl(t,{size:e.size});const n=Si(t,e);return Lu(n,e)}function abe(t,e={}){let n=t;return typeof e.size<"u"&&(Hl(n,{size:e.size}),n=jd(n,{dir:"right"})),new TextDecoder().decode(n)}function TI(t,e){const n=typeof e=="string"?Ll(e):e,r=f$(n);if(qs(n)===0&&t.length>0)throw new CI;if(qs(e)&&qs(e)<32)throw new KZ({data:typeof e=="string"?e:Si(e),params:t,size:qs(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=av(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function av(t,e,{staticPosition:n}){const r=h$(e.type);if(r){const[s,i]=r;return lbe(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return fbe(t,e,{staticPosition:n});if(e.type==="address")return cbe(t);if(e.type==="bool")return ube(t);if(e.type.startsWith("bytes"))return dbe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return hbe(t,e);if(e.type==="string")return pbe(t,{staticPosition:n});throw new u0e(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const y7=32,b5=32;function cbe(t){const e=t.readBytes(32);return[AI(Si(hX(e,-20))),32]}function lbe(t,e,{length:n,staticPosition:r}){if(!n){const o=yf(t.readBytes(b5)),a=r+o,c=a+y7;t.setPosition(a);const l=yf(t.readBytes(y7)),u=qA(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=av(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(qA(e)){const o=yf(t.readBytes(b5)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=av(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=av(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function ube(t){return[obe(t.readBytes(32),{size:32}),32]}function dbe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=yf(t.readBytes(32));t.setPosition(n+o);const a=yf(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Si(c),32]}return[Si(t.readBytes(Number.parseInt(s),32)),32]}function hbe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?ibe(s,{signed:n}):yf(s,{signed:n}),32]}function fbe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(qA(e)){const o=yf(t.readBytes(b5)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=av(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=av(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function pbe(t,{staticPosition:e}){const n=yf(t.readBytes(32)),r=e+n;t.setPosition(r);const s=yf(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=abe(jd(i));return t.setPosition(e+32),[o,32]}function qA(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(qA);const n=h$(t.type);return!!(n&&qA({...t,type:n[1]}))}const gbe=t=>ho(_C(t));function mbe(t){return gbe(t)}const ybe="1.0.8";let el=class v5 extends Error{constructor(e,n={}){var o;const r=n.cause instanceof v5?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof v5&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${ybe}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Wf(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const $X=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,FX=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,jX=/^\(.+?\).*?$/,w7=/^tuple(?<array>(\[(\d*)\])*)$/;function E5(t){let e=t.type;if(w7.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=E5(i),s<n-1&&(e+=", ")}const r=Wf(w7,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,E5({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function p1(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=E5(s),r!==n-1&&(e+=", ")}return e}function LR(t){var e;return t.type==="function"?`function ${t.name}(${p1(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${p1(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${p1(t.inputs)})`:t.type==="error"?`error ${t.name}(${p1(t.inputs)})`:t.type==="constructor"?`constructor(${p1(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const WX=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function wbe(t){return WX.test(t)}function bbe(t){return Wf(WX,t)}const zX=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function vbe(t){return zX.test(t)}function Ebe(t){return Wf(zX,t)}const HX=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Cbe(t){return HX.test(t)}function _be(t){return Wf(HX,t)}const GX=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function A$(t){return GX.test(t)}function Abe(t){return Wf(GX,t)}const qX=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Sbe(t){return qX.test(t)}function Ibe(t){return Wf(qX,t)}const VX=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Nbe(t){return VX.test(t)}function xbe(t){return Wf(VX,t)}const Tbe=/^receive\(\) external payable$/;function Rbe(t){return Tbe.test(t)}const kbe=new Set(["indexed"]),C5=new Set(["calldata","memory","storage"]);class Pbe extends el{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Obe extends el{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Dbe extends el{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Mbe extends el{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Bbe extends el{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Ube extends el{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Lbe extends el{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class $be extends el{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class NC extends el{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Fbe extends el{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class jbe extends el{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Wbe extends el{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class zbe extends el{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Hbe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const hD=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function _5(t,e={}){if(Cbe(t))return Gbe(t,e);if(vbe(t))return qbe(t,e);if(wbe(t))return Vbe(t,e);if(Sbe(t))return Kbe(t,e);if(Nbe(t))return Ybe(t);if(Rbe(t))return{type:"receive",stateMutability:"payable"};throw new Fbe({signature:t})}function Gbe(t,e={}){const n=_be(t);if(!n)throw new NC({signature:t,type:"function"});const r=Au(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(T0(r[a],{modifiers:C5,structs:e,type:"function"}));const o=[];if(n.returns){const a=Au(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(T0(a[l],{modifiers:C5,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function qbe(t,e={}){const n=Ebe(t);if(!n)throw new NC({signature:t,type:"event"});const r=Au(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(T0(r[o],{modifiers:kbe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Vbe(t,e={}){const n=bbe(t);if(!n)throw new NC({signature:t,type:"error"});const r=Au(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(T0(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Kbe(t,e={}){const n=Ibe(t);if(!n)throw new NC({signature:t,type:"constructor"});const r=Au(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(T0(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Ybe(t){const e=xbe(t);if(!e)throw new NC({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Qbe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Jbe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Zbe=/^u?int$/;function T0(t,e){var d,h;const n=Hbe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(hD.has(n))return hD.get(n);const r=jX.test(t),s=Wf(r?Jbe:Qbe,t);if(!s)throw new Mbe({param:t});if(s.name&&eve(s.name))throw new Bbe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Au(s.type),p=[],g=f.length;for(let m=0;m<g;m++)p.push(T0(f[m],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Zbe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!KX(c))throw new Dbe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new Ube({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(C5.has(s.modifier)&&!tve(c,!!s.array))throw new Lbe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return hD.set(n,u),u}function Au(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Au(a,[...e,n.trim()]):Au(a,e,`${n}${o}`,r);case"(":return Au(a,e,`${n}${o}`,r+1);case")":return Au(a,e,`${n}${o}`,r-1);default:return Au(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new zbe({current:n,depth:r});return e.push(n.trim()),e}function KX(t){return t==="address"||t==="bool"||t==="function"||t==="string"||$X.test(t)||FX.test(t)}const Xbe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function eve(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||$X.test(t)||FX.test(t)||Xbe.test(t)}function tve(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function YX(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!A$(a))continue;const c=Abe(a);if(!c)throw new NC({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=T0(p,{type:"struct"});u.push(g)}if(!u.length)throw new jbe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=QX(c,e)}return r}const nve=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function QX(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(jX.test(o.type))r.push(o);else{const c=Wf(nve,o.type);if(!(c!=null&&c.type))throw new $be({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new Wbe({type:u});r.push({...o,type:`tuple${l??""}`,components:QX(e[u]??[],e,new Set([...n,u]))})}else if(KX(u))r.push(o);else throw new Obe({type:u})}}return r}function JX(t){const e=YX(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];A$(i)||n.push(_5(i,e))}return n}function b7(t){let e;if(typeof t=="string")e=_5(t);else{const n=YX(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!A$(i)){e=_5(i,n);break}}}if(!e)throw new Pbe({signature:t});return e}function rve(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Ne("Unable to normalize signature.");return s}const sve=t=>{const e=typeof t=="string"?t:LR(t);return rve(e)};function ZX(t){return mbe(sve(t))}const B2=ZX,RI=t=>ME(ZX(t),0,4);function ow(t){const{abi:e,args:n=[],name:r}=t,s=Kd(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?RI(a)===r:a.type==="event"?B2(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?A5(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=XX(a.inputs,o.inputs,n);if(l)throw new a0e({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function A5(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Wl(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>A5(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>A5(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function XX(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return XX(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Wl(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Wl(n[r],{strict:!1}):!1)return o}}const fD="/docs/contract/decodeFunctionResult";function aw(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=ow({abi:e,args:n,name:r});if(!a)throw new PE(r,{docsPath:fD});i=a}if(i.type!=="function")throw new PE(void 0,{docsPath:fD});if(!i.outputs)throw new JZ(i.name,{docsPath:fD});const o=TI(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const v7="/docs/contract/encodeFunctionData";function ive(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=ow({abi:e,args:n,name:r});if(!i)throw new PE(r,{docsPath:v7});s=i}if(s.type!=="function")throw new PE(void 0,{docsPath:v7});return{abi:[s],functionName:RI($u(s))}}function Gl(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:ive(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Sm(s.inputs,e??[]):void 0;return AC([i,o??"0x"])}function xC({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new o5({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new o5({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const eee={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},tee={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},ove={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function ave(t){const{abi:e,data:n}=t,r=ME(n,0,4);if(r==="0x")throw new CI;const i=[...e||[],tee,ove].find(o=>o.type==="error"&&r===RI($u(o)));if(!i)throw new YZ(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?TI(i.inputs,ME(n,4)):void 0,errorName:i.name}}function nee({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?_i(e[i]):e[i]}`).join(", ")})`}class ree extends Ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var m;const p=n?Ks(n):void 0;let g=II({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${p$(h)} ${((m=s==null?void 0:s.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ac(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ac(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ac(l)} gwei`,nonce:u});f&&(g+=`
${Lwe(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class see extends Ne{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=ow({abi:n,args:r,name:o}),l=c?nee({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?$u(c,{includeName:!0}):void 0,d=II({address:s&&_we(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class S5 extends Ne{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=ave({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=eee[f]}else{const f=u?$u(u,{includeName:!0}):void 0,p=u&&h?nee({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof YZ&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class cve extends Ne{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class lve extends Ne{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class U2 extends Ne{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function S$(t,e){var r,s,i,o,a,c;if(!(t instanceof Ne))return!1;const n=t.walk(l=>l instanceof S5);return n instanceof S5?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===eee[50]):!1}function uve(t){const{abi:e,data:n}=t,r=ME(n,0,4),s=e.find(i=>i.type==="function"&&r===RI($u(i)));if(!s)throw new o0e(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?TI(s.inputs,ME(n,4)):void 0}}const pD="/docs/contract/encodeErrorResult";function E7(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=ow({abi:e,args:r,name:n});if(!c)throw new Q9(n,{docsPath:pD});s=c}if(s.type!=="error")throw new Q9(void 0,{docsPath:pD});const i=$u(s),o=RI(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new s0e(s.name,{docsPath:pD});a=Sm(s.inputs,r)}return AC([o,a])}const gD="/docs/contract/encodeFunctionResult";function dve(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=ow({abi:e,name:n});if(!o)throw new PE(n,{docsPath:gD});s=o}if(s.type!=="function")throw new PE(void 0,{docsPath:gD});if(!s.outputs)throw new JZ(s.name,{docsPath:gD});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new ZZ(r)})();return Sm(s.outputs,i)}const I$="x-batch-gateway:true";async function hve(t){const{data:e,ccipRequest:n}=t,{args:[r]}=uve({abi:w5,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(I$)?await hve({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=fve(c)}})),dve({abi:w5,functionName:"query",result:[s,i]})}function fve(t){return t.name==="HttpRequestError"&&t.status?E7({abi:w5,errorName:"HttpError",args:[t.status,t.shortMessage]}):E7({abi:[tee],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function iee(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Kd(e)?e:null}function cT(t){let e=new Uint8Array(32).fill(0);if(!t)return Si(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=iee(n[r]),i=s?_C(s):ho(a0(n[r]),"bytes");e=ho(Fl([e,i]),"bytes")}return Si(e)}function pve(t){return`[${t.slice(2)}]`}function gve(t){const e=new Uint8Array(32).fill(0);return t?iee(t)||ho(a0(t)):Si(e)}function L2(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(a0(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=a0(s[i]);o.byteLength>255&&(o=a0(pve(gve(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const mve=3;function R0(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof U2?t:t instanceof Ne?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof CI?new cve({functionName:i}):[mve,N0.code].includes(c)&&(l||u||d||h)?new S5({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof m$?u:h??d}):t;return new see(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const N$=BigInt(0),I5=BigInt(1);function k0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function jN(t){const e=t.toString(16);return e.length&1?"0"+e:e}function oee(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?N$:BigInt("0x"+t)}function $2(t){return oee(DE(t))}function VA(t){return jl(t),oee(DE(Uint8Array.from(t).reverse()))}function x$(t,e){return i$(t.toString(16).padStart(e*2,"0"))}function F2(t,e){return x$(t,e).reverse()}function Js(t,e,n){let r;if(typeof e=="string")try{r=i$(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(s$(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const mD=t=>typeof t=="bigint"&&N$<=t;function yve(t,e,n){return mD(t)&&mD(e)&&mD(n)&&e<=t&&t<n}function $b(t,e,n,r){if(!yve(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function wve(t){let e;for(e=0;t>N$;t>>=I5,e+=1);return e}const j2=t=>(I5<<BigInt(t))-I5;function bve(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return df(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function kI(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function $R(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const vve="0.1.1";function Eve(){return vve}let ii=class N5 extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof N5){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof N5&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Eve()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return aee(this,e)}};function aee(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?aee(t.cause,e):e?null:t}const Cve="#__bigint";function _ve(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Cve:s,n)}function Ave(t,e){if(_7(t)>e)throw new Dve({givenSize:_7(t),maxSize:e})}const bh={zero:48,nine:57,A:65,F:70,a:97,f:102};function C7(t){if(t>=bh.zero&&t<=bh.nine)return t-bh.zero;if(t>=bh.A&&t<=bh.F)return t-(bh.A-10);if(t>=bh.a&&t<=bh.f)return t-(bh.a-10)}function Sve(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new Mve({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function T$(t,e){if(zl(t)>e)throw new Fve({givenSize:zl(t),maxSize:e})}function Ive(t,e){if(typeof e=="number"&&e>0&&e>zl(t)-1)throw new hee({offset:e,position:"start",size:zl(t)})}function Nve(t,e,n){if(typeof e=="number"&&typeof n=="number"&&zl(t)!==n-e)throw new hee({offset:n,position:"end",size:zl(t)})}function cee(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new jve({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const xve=new TextEncoder;function Tve(t){return t instanceof Uint8Array?t:typeof t=="string"?kve(t):Rve(t)}function Rve(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function kve(t,e={}){const{size:n}=e;let r=t;n&&(T$(t,n),r=O0(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=C7(s.charCodeAt(c++)),u=C7(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new ii(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function Pve(t,e={}){const{size:n}=e,r=xve.encode(t);return typeof n=="number"?(Ave(r,n),Ove(r,n)):r}function Ove(t,e){return Sve(t,{dir:"right",size:e})}function _7(t){return t.length}let Dve=class extends ii{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Mve=class extends ii{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const Bve=new TextEncoder,Uve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Lve(t,e={}){const{strict:n=!1}=e;if(!t)throw new A7(t);if(typeof t!="string")throw new A7(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new S7(t);if(!t.startsWith("0x"))throw new S7(t)}function Qd(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function lee(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(T$(n,e.size),P0(n,e.size)):n}function uee(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Uve[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(T$(r,e.size),O0(r,e.size)):r}function ra(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new dee({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?P0(c,r):c}function R$(t,e={}){return uee(Bve.encode(t),e)}function P0(t,e){return cee(t,{dir:"left",size:e})}function O0(t,e){return cee(t,{dir:"right",size:e})}function k$(t,e,n,r={}){const{strict:s}=r;Ive(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Nve(i,e,n),i}function zl(t){return Math.ceil((t.length-2)/2)}function $ve(t,e={}){const{strict:n=!1}=e;try{return Lve(t,{strict:n}),!0}catch{return!1}}let dee=class extends ii{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class A7 extends ii{constructor(e){super(`Value \`${typeof e=="object"?_ve(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class S7 extends ii{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Fve=class extends ii{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class hee extends ii{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let jve=class extends ii{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Wve(t){return{address:t.address,amount:ra(t.amount),index:ra(t.index),validatorIndex:ra(t.validatorIndex)}}function fee(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:ra(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:ra(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:ra(t.gasLimit)},...typeof t.number=="bigint"&&{number:ra(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:ra(t.prevRandao)},...typeof t.time=="bigint"&&{time:ra(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Wve)}}}const zve="0x82ad56cb",pee="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Hve="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Gve="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function gee(t,{docsPath:e,...n}){const r=(()=>{const s=O2(t,n);return s instanceof SI?t:s})();return new ree(r,{docsPath:e,...n})}function P$(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const yD=new Map;function mee({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>yD.delete(e),a=()=>c().map(({args:u})=>u),c=()=>yD.get(e)||[],l=u=>yD.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=P$();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function PI(t,e){var $,v,E,_;const{account:n=t.account,authorizationList:r,batch:s=!!(($=t.batch)!=null&&$.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,to:N,value:I,stateOverride:k,...P}=e,U=n?Ks(n):void 0;if(u&&(h||f))throw new Ne("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&N)throw new Ne("Cannot provide both `code` & `to` as parameters.");const M=u&&d,H=h&&f&&N&&d,j=M||H,K=M?Kve({code:u,data:d}):H?Yve({data:d,factory:h,factoryData:f,to:N}):d;try{iw(e);const x=(typeof i=="bigint"?Rt(i):void 0)||o,B=l?fee(l):void 0,W=b$(k),L=(_=(E=(v=t.chain)==null?void 0:v.formatters)==null?void 0:E.transactionRequest)==null?void 0:_.format,F=(L||SC)({...D2(P,{format:L}),from:U==null?void 0:U.address,accessList:a,authorizationList:r,blobs:c,data:K,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:w,nonce:C,to:j?void 0:N,value:I});if(s&&qve({request:F})&&!W&&!B)try{return await Vve(t,{...F,blockNumber:i,blockTag:o})}catch(ge){if(!(ge instanceof bX)&&!(ge instanceof o5))throw ge}const X=(()=>{const ge=[F,x];return W&&B?[...ge,W,B]:W?[...ge,W]:B?[...ge,{},B]:ge})(),se=await t.request({method:"eth_call",params:X});return se==="0x"?{data:void 0}:{data:se}}catch(D){const x=Qve(D),{offchainLookup:B,offchainLookupSignature:W}=await no(async()=>{const{offchainLookup:L,offchainLookupSignature:S}=await import("./ccip-BltcaDR9.js");return{offchainLookup:L,offchainLookupSignature:S}},[]);if(t.ccipRead!==!1&&(x==null?void 0:x.slice(0,10))===W&&N)return{data:await B(t,{data:x,to:N})};throw j&&(x==null?void 0:x.slice(0,10))==="0x101bb98d"?new lve({factory:h}):gee(D,{...e,account:U,chain:t.chain})}}function qve({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(zve)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Vve(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new bX;l=xC({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?Rt(s):void 0)||i,{schedule:h}=mee({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(m){return m.reduce((w,{data:C})=>w+(C.length-2),0)>n*2},fn:async m=>{const y=m.map(N=>({allowFailure:!0,callData:N.data,target:N.to})),w=Gl({abi:y5,args:[y],functionName:"aggregate3"}),C=await t.request({method:"eth_call",params:[{data:w,to:l},d]});return aw({abi:y5,args:[y],functionName:"aggregate3",data:C||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new U2({data:f});return f==="0x"?{data:void 0}:{data:f}}function Kve(t){const{code:e,data:n}=t;return P2({abi:JX(["constructor(bytes, bytes)"]),bytecode:pee,args:[e,n]})}function Yve(t){const{data:e,factory:n,factoryData:r,to:s}=t;return P2({abi:JX(["constructor(address, bytes, address, bytes)"]),bytecode:Hve,args:[s,e,n,r]})}function Qve(t){var n;if(!(t instanceof Ne))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Jd(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Gl({abi:n,args:s,functionName:i});try{const{data:c}=await zt(t,PI,"call")({...o,data:a,to:r});return aw({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw R0(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Jve(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xC({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Gl({abi:g7,functionName:"addr",...s!=null?{args:[cT(i),BigInt(s)]}:{args:[cT(i)]}}),h={address:l,abi:LX,functionName:"resolve",args:[$l(L2(i)),d,o??[I$]],blockNumber:n,blockTag:r},p=await zt(t,Jd,"readContract")(h);if(p[0]==="0x")return null;const g=aw({abi:g7,args:s!=null?[cT(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||jd(g)==="0x00"?null:g}catch(d){if(a)throw d;if(S$(d,"resolve"))return null;throw d}}class Zve extends Ne{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class g1 extends Ne{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class O$ extends Ne{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Xve extends Ne{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const eEe=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,tEe=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,nEe=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,rEe=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function sEe(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function I7(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function yee({uri:t,gatewayUrls:e}){const n=nEe.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=I7(e==null?void 0:e.ipfs,"https://ipfs.io"),s=I7(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(eEe),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||tEe.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(rEe,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new O$({uri:t})}function wee(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Zve({data:t});return t.image||t.image_url||t.image_data}async function iEe({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await D$({gatewayUrls:t,uri:wee(n)})}catch{throw new O$({uri:e})}}async function D$({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=yee({uri:e,gatewayUrls:t});if(r||await sEe(n))return n;throw new O$({uri:e})}function oEe(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new g1({reason:"Only EIP-155 supported"});if(!o)throw new g1({reason:"Chain ID not found"});if(!c)throw new g1({reason:"Contract address not found"});if(!s)throw new g1({reason:"Token ID not found"});if(!a)throw new g1({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function aEe(t,{nft:e}){if(e.namespace==="erc721")return Jd(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Jd(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Xve({namespace:e.namespace})}async function cEe(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?lEe(t,{gatewayUrls:e,record:n}):D$({uri:n,gatewayUrls:e})}async function lEe(t,{gatewayUrls:e,record:n}){const r=oEe(n),s=await aEe(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=yee({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return D$({uri:wee(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),iEe({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function bee(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xC({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:LX,functionName:"resolve",args:[$l(L2(i)),Gl({abi:p7,functionName:"text",args:[cT(i),s]}),o??[I$]],blockNumber:n,blockTag:r},f=await zt(t,Jd,"readContract")(d);if(f[0]==="0x")return null;const p=aw({abi:p7,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(S$(d,"resolve"))return null;throw d}}async function uEe(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await zt(t,bee,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await cEe(t,{record:c,gatewayUrls:r})}catch{return null}}async function vee(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=xC({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:sbe,functionName:"reverse",args:[$l(L2(c))],blockNumber:n,blockTag:r},u=zt(t,Jd,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(S$(l,"reverse"))return null;throw l}}async function dEe(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return xC({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await zt(t,Jd,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[$l(L2(s))],blockNumber:n,blockTag:r});return c}async function Eee(t,e){var m,y,w;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Ks(n):void 0;try{iw(e);const N=(typeof r=="bigint"?Rt(r):void 0)||s,I=(w=(y=(m=t.chain)==null?void 0:m.formatters)==null?void 0:y.transactionRequest)==null?void 0:w.format,P=(I||SC)({...D2(p,{format:I}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),U=await t.request({method:"eth_createAccessList",params:[P,N]});return{accessList:U.accessList,gasUsed:BigInt(U.gasUsed)}}catch(C){throw gee(C,{...e,account:g,chain:t.chain})}}function W2(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function hEe(t){const e=W2(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class fEe extends Ne{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const N7="/docs/contract/encodeEventTopics";function OI(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=ow({abi:e,name:n});if(!l)throw new J9(n,{docsPath:N7});s=l}if(s.type!=="event")throw new J9(void 0,{docsPath:N7});const i=$u(s),o=B2(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>x7({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?x7({param:d,value:u[h]}):null))??[])}return[o,...a]}function x7({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return ho(_C(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new fEe(t.type);return Sm([t],[e])}async function Cee(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=W2(t,{method:"eth_newFilter"}),u=i?OI({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?Rt(o):o,toBlock:typeof c=="bigint"?Rt(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function _ee(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=W2(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>OI({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?Rt(i):i,toBlock:typeof a=="bigint"?Rt(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function Aee(t){const e=W2(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function pEe(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Gl({abi:n,args:s,functionName:i});try{return await zt(t,M2,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Ks(a.account):void 0;throw R0(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function gEe(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const mEe=new Map,yEe=new Map;function wEe(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,mEe),r=e(t,yEe);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function bEe(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=wEe(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const vEe=t=>`blockNumber.${t}`;async function DI(t,{cacheTime:e=t.cacheTime}={}){const n=await bEe(()=>t.request({method:"eth_blockNumber"}),{cacheKey:vEe(t.uid),cacheTime:e});return BigInt(n)}async function EEe(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?Rt(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Lu(i)}async function T7(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?Rt(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function z2(t,e){if(!Wl(t,{strict:!1}))throw new om({address:t});if(!Wl(e,{strict:!1}))throw new om({address:e});return t.toLowerCase()===e.toLowerCase()}const R7="/docs/contract/decodeEventLog";function M$(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new i0e({docsPath:R7});const c=e.find(g=>g.type==="event"&&o===B2($u(g)));if(!(c&&"name"in c)||c.type!=="event")throw new QZ(o,{docsPath:R7});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,m)=>[g,m]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[m,y]=f[g],w=a[g];if(!w)throw new R2({abiItem:c,param:m});h[d?y:m.name||y]=CEe({param:m,value:w})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=TI(p,n);if(g)if(d)for(let m=0;m<u.length;m++)h[m]=h[m]??g.shift();else for(let m=0;m<p.length;m++)h[p[m].name]=g[m]}catch(g){if(i)throw g instanceof KZ||g instanceof gX?new TA({abiItem:c,data:n,params:p,size:qs(n)}):g}else if(i)throw new TA({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function CEe({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(TI([t],e)||[])[0]}function B$(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===B2(u));if(!c)return null;const l=M$({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!_Ee({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof QZ)return null;if(c instanceof TA||c instanceof R2){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function _Ee(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?z2(o,a):i.type==="string"||i.type==="bytes"?ho(_C(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function kf(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function U$(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>OI({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?Rt(r):r,toBlock:typeof s=="bigint"?Rt(s):s}]});const f=h.map(p=>kf(p));return u?B$({abi:u,args:a,logs:f,strict:l}):f}async function See(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?ow({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return zt(t,U$,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class AEe extends Ne{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function SEe(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await zt(t,Jd,"readContract")({abi:IEe,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new AEe({address:n}):o}}const IEe=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function NEe(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function xEe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?Rt(n):void 0,o=await t.request({method:"eth_feeHistory",params:[Rt(e),i||r,s]},{dedupe:!!i});return NEe(o)}async function H2(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>kf(i));return!("abi"in e)||!e.abi?s:B$({abi:e.abi,logs:s,strict:n})}async function TEe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>kf(i));return e.abi?B$({abi:e.abi,logs:s,strict:n}):s}async function REe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?Rt(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function G2(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?Rt(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Rt(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Rt(i)]},{dedupe:!!a}),!c)throw new EX({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||IX)(c)}async function kEe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([zt(t,DI,"getBlockNumber")({}),e?zt(t,G2,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const Iee={"0x0":"reverted","0x1":"success"};function PEe(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>kf(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Lu(t.transactionIndex):null,status:t.status?Iee[t.status]:null,type:t.type?SX[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function x5(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new CX({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||PEe)(n)}async function Nee(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=xC({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let w=0;w<l.length;w++){const{abi:C,address:N,args:I,functionName:k}=l[w];try{const P=Gl({abi:C,args:I,functionName:k});p+=(P.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(P.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:P,target:N}]}catch(P){const U=R0(P,{abi:C,address:N,args:I,docsPath:"/docs/contract/multicall",functionName:k,sender:n});if(!r)throw U;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:N}]}}const g=await Promise.allSettled(h.map(w=>zt(t,Jd,"readContract")({abi:y5,account:n,address:d,args:[w],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),m=[];for(let w=0;w<g.length;w++){const C=g[w];if(C.status==="rejected"){if(!r)throw C.reason;for(let I=0;I<h[w].length;I++)m.push({status:"failure",error:C.reason,result:void 0});continue}const N=C.value;for(let I=0;I<N.length;I++){const{returnData:k,success:P}=N[I],{callData:U}=h[w][I],{abi:M,address:H,functionName:j,args:K}=l[m.length];try{if(U==="0x")throw new CI;if(!P)throw new U2({data:k});const $=aw({abi:M,args:K,data:k,functionName:j});m.push(r?{result:$,status:"success"}:$)}catch($){const v=R0($,{abi:M,address:H,args:K,docsPath:"/docs/contract/multicall",functionName:j});if(!r)throw v;m.push({error:v,result:void 0,status:"failure"})}}}if(m.length!==l.length)throw new Ne("multicall results mismatch");return m}async function T5(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?fee(h.blockOverrides):void 0,p=h.calls.map(m=>{const y=m,w=y.account?Ks(y.account):void 0,C=y.abi?Gl(y):y.data,N={...y,data:y.dataSuffix?Fl([C||"0x",y.dataSuffix]):C,from:y.from??(w==null?void 0:w.address)};return iw(N),SC(N)}),g=h.stateOverrides?b$(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?Rt(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...NX(h),calls:h.calls.map((p,g)=>{var H,j;const{abi:m,args:y,functionName:w,to:C}=s[f].calls[g],N=((H=p.error)==null?void 0:H.data)??p.returnData,I=BigInt(p.gasUsed),k=(j=p.logs)==null?void 0:j.map(K=>kf(K)),P=p.status==="0x1"?"success":"failure",U=m&&P==="success"&&N!=="0x"?aw({abi:m,data:N,functionName:w}):null,M=(()=>{var $;if(P==="success")return;let K;if((($=p.error)==null?void 0:$.data)==="0x"?K=new CI:p.error&&(K=new U2(p.error)),!!K)return R0(K,{abi:m??[],address:C??"0x",args:y,functionName:w??"<unknown>"})})();return{data:N,gasUsed:I,logs:k,status:P,...P==="success"?{result:U}:{error:M}}})}))}catch(c){const l=c,u=O2(l,{});throw u instanceof SI?l:u}}function xee(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=l$(Tve(t));return n==="Bytes"?r:uee(r)}let OEe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const DEe={checksum:new OEe(8192)},wD=DEe.checksum,MEe=/^0x[a-fA-F0-9]{40}$/;function q2(t,e={}){const{strict:n=!0}=e;if(!MEe.test(t))throw new k7({address:t,cause:new UEe});if(n){if(t.toLowerCase()===t)return;if(BEe(t)!==t)throw new k7({address:t,cause:new LEe})}}function BEe(t){if(wD.has(t))return wD.get(t);q2(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=xee(Pve(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return wD.set(t,s),s}function R5(t,e={}){const{strict:n=!0}=e??{};try{return q2(t,{strict:n}),!0}catch{return!1}}class k7 extends ii{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class UEe extends ii{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class LEe extends ii{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function k5(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ii("Unable to normalize signature.");return s}function P5(t,e){const n=typeof t,r=e.type;switch(r){case"address":return R5(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>P5(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>P5(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Tee(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return Tee(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?R5(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?R5(n[r],{strict:!1}):!1)return o}}function Ree(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?b7(t):t;return{...r,...n?{hash:Fb(r)}:{}}}function $Ee(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=$ve(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?kee(l)===k$(e,0,4):l.type==="event"?Fb(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new O5({name:e});if(o.length===1)return{...o[0],...s?{hash:Fb(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Fb(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?P5(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=Tee(l.inputs,a.inputs,r);if(d)throw new jEe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new O5({name:e});return{...c,...s?{hash:Fb(c)}:{}}}function kee(t){return k$(Fb(t),0,4)}function FEe(t){const e=typeof t=="string"?t:LR(t);return k5(e)}function Fb(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:xee(R$(FEe(t)))}class jEe extends ii{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${k5(LR(e.abiItem))}\`, and`,`\`${n.type}\` in \`${k5(LR(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class O5 extends ii{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const WEe=/^(.*)\[([0-9]*)\]$/,zEe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Pee=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function HEe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(L$({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function L$({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=ZEe(r.type);if(s){const[i,o]=s;return qEe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return JEe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return GEe(n,{checksum:t});if(r.type==="bool")return KEe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=Pee.exec(r.type)??[];return YEe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return VEe(n,{type:r.type});if(r.type==="string")return QEe(n);throw new Bee(r.type)}function $$(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=zl(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(ra(e+s,{size:32})),r.push(a),s+=zl(a)):n.push(a)}return Qd(...n,...r)}function GEe(t,e){const{checksum:n=!1}=e;return q2(t,{strict:n}),{dynamic:!1,encoded:P0(t.toLowerCase())}}function qEe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new eCe(t);if(!i&&t.length!==r)throw new XEe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=L$({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=$$(a);if(i){const l=ra(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Qd(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Qd(...a.map(({encoded:c})=>c))}}function VEe(t,{type:e}){const[,n]=e.split("bytes"),r=zl(t);if(!n){let s=t;return r%32!==0&&(s=O0(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Qd(P0(ra(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new Dee({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:O0(t)}}function KEe(t){if(typeof t!="boolean")throw new ii(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:P0(lee(t))}}function YEe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new dee({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:ra(t,{size:32,signed:e})}}function QEe(t){const e=R$(t),n=Math.ceil(zl(e)/32),r=[];for(let s=0;s<n;s++)r.push(O0(k$(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Qd(O0(ra(zl(e),{size:32})),...r)}}function JEe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=L$({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?$$(i):Qd(...i.map(({encoded:o})=>o))}}function ZEe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Oee(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new Mee({expectedLength:t.length,givenLength:e.length});const s=HEe({checksumAddress:r,parameters:t,values:e}),i=$$(s);return i.length===0?"0x":i}function D5(t,e){if(t.length!==e.length)throw new Mee({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(D5.encode(s,i))}return Qd(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return q2(c),P0(c.toLowerCase(),s?32:0)}if(n==="string")return R$(r);if(n==="bytes")return r;if(n==="bool")return P0(lee(r),s?32:1);const i=n.match(Pee);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return ra(r,{size:s?32:d,signed:l==="int"})}const o=n.match(zEe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new Dee({expectedSize:Number.parseInt(l),value:r});return O0(r,s?32:0)}const a=n.match(WEe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Qd(...u)}throw new Bee(n)}t.encode=e})(D5||(D5={}));class XEe extends ii{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class Dee extends ii{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${zl(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Mee extends ii{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class eCe extends ii{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Bee extends ii{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function tCe(t,e){var s;const{bytecode:n,args:r}=e;return Qd(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?Oee(t.inputs,r):"0x")}function nCe(t){return Ree(t)}function rCe(t,...e){const{overloads:n}=t,r=n?sCe([t,...n],t.name,{args:e[0]}):t,s=iCe(r),i=e.length>0?Oee(r.inputs,e[0]):void 0;return i?Qd(s,i):s}function Mw(t,e={}){return Ree(t,e)}function sCe(t,e,n){const r=$Ee(t,e,n);if(r.type!=="function")throw new O5({name:e,type:"function"});return r}function iCe(t){return kee(t)}const oCe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Zu="0x0000000000000000000000000000000000000000",WN=new k2(8192);function aCe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(WN.get(n))return WN.get(n);const r=t().finally(()=>WN.delete(n));return WN.set(n,r),r}async function FR(t){return new Promise(e=>setTimeout(e,t))}function jR(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await FR(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function cCe(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new vy(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new vy(new Error("method not supported"),{method:l});const u=s?kE(`${c}.${_i(n)}`):void 0;return aCe(()=>jR(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case kA.code:throw new kA(f);case PA.code:throw new PA(f);case OA.code:throw new OA(f,{method:n.method});case DA.code:throw new DA(f);case N0.code:throw new N0(f);case x0.code:throw new x0(f);case MA.code:throw new MA(f);case Wg.code:throw new Wg(f);case BE.code:throw new BE(f);case vy.code:throw new vy(f,{method:n.method});case UE.code:throw new UE(f);case BA.code:throw new BA(f);case gi.code:throw new gi(f);case UA.code:throw new UA(f);case LA.code:throw new LA(f);case $A.code:throw new $A(f);case FA.code:throw new FA(f);case Yd.code:throw new Yd(f);case LE.code:throw new LE(f);case jA.code:throw new jA(f);case WA.code:throw new WA(f);case zA.code:throw new zA(f);case HA.code:throw new HA(f);case GA.code:throw new GA(f);case $E.code:throw new $E(f);case 5e3:throw new gi(f);default:throw h instanceof Ne?h:new Swe(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof P_){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>lCe(h)}),{enabled:s,id:u})}}function lCe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===UE.code||t.code===N0.code:t instanceof P_&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Uee(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function Lee(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function uCe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const P7=uCe();function dCe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await Lee(async({signal:p})=>{const g={...a,body:Array.isArray(r)?_i(r.map(C=>({jsonrpc:"2.0",id:C.id??P7.take(),...C}))):_i({jsonrpc:"2.0",id:r.id??P7.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},m=new Request(t,g),y=await(s==null?void 0:s(m,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new c7({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new P_({body:r,details:_i(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof P_||h instanceof c7?h:new P_({body:r,cause:h,url:t})}}}}class hCe extends Ne{constructor({domain:e}){super(`Invalid domain "${_i(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class fCe extends Ne{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class pCe extends Ne{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function gCe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:Hee({domain:e}),...t.types};zee({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(mCe({domain:e,types:s})),r!=="EIP712Domain"&&i.push($ee({data:n,primaryType:r,types:s})),ho(Fl(i))}function mCe({domain:t,types:e}){return $ee({data:t,primaryType:"EIP712Domain",types:e})}function $ee({data:t,primaryType:e,types:n}){const r=Fee({data:t,primaryType:e,types:n});return ho(r)}function Fee({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[yCe({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=Wee({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Sm(r,s)}function yCe({primaryType:t,types:e}){const n=$l(wCe({primaryType:t,types:e}));return ho(n)}function wCe({primaryType:t,types:e}){let n="";const r=jee({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function jee({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])jee({primaryType:i.type,types:e},n);return n}function Wee({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},ho(Fee({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},ho(r)];if(n==="string")return[{type:"bytes32"},ho($l(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>Wee({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},ho(Sm(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function bCe(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return _i({domain:o,message:a,primaryType:r,types:s})}function zee(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(fX);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,m,y]=h;Rt(d,{signed:m==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!Wl(d))throw new om({address:d});const f=u.match(Y0e);if(f){const[g,m]=f;if(m&&qs(d)!==Number.parseInt(m))throw new c0e({expectedSize:Number.parseInt(m),givenSize:qs(d)})}const p=s[u];p&&(vCe(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new hCe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new fCe({primaryType:r,types:s})}function Hee({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function vCe(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new pCe({type:t})}const ECe=`Ethereum Signed Message:
`;function CCe(t){const e=typeof t=="string"?kE(t):typeof t.raw=="string"?t.raw:Si(t.raw),n=kE(`${ECe}${qs(e)}`);return Fl([n,e])}function Gee(t,e){return ho(CCe(t),e)}const qee="0x6492649264926492649264926492649264926492649264926492649264926492";function _Ce(t){return MR(t,-32)===qee}function ACe(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=AC([Sm([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),qee]);return s==="hex"?i:Ll(i)}class SCe extends Ne{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function ICe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new SCe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const NCe="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function xCe(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Ks(e.account):void 0;if(o&&!l)throw new Ne("`account` is required when `traceAssetChanges` is true");const u=l?tCe(nCe("constructor(bytes, bytes)"),{bytecode:pee,args:[NCe,rCe(Mw("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async x=>{if(!x.data&&!x.abi)return;const{accessList:B}=await Eee(t,{account:l.address,...x,data:x.abi?Gl(x):x.data});return B.map(({address:W,storageKeys:L})=>L.length>0?W:null)})).then(x=>x.flat().filter(Boolean)):[],h=await T5(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((x,B)=>({abi:[Mw("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:x,from:Zu,nonce:B})),stateOverrides:[{address:Zu,nonce:0}]}]:[],{calls:[...s,{}].map(x=>({...x,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((x,B)=>({abi:[Mw("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:x,from:Zu,nonce:B})),stateOverrides:[{address:Zu,nonce:0}]},{calls:d.map((x,B)=>({to:x,abi:[Mw("function decimals() returns (uint256)")],functionName:"decimals",from:Zu,nonce:B})),stateOverrides:[{address:Zu,nonce:0}]},{calls:d.map((x,B)=>({to:x,abi:[Mw("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Zu,nonce:B})),stateOverrides:[{address:Zu,nonce:0}]},{calls:d.map((x,B)=>({to:x,abi:[Mw("function symbol() returns (string)")],functionName:"symbol",from:Zu,nonce:B})),stateOverrides:[{address:Zu,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,m,y,w,C,N]=o?h:[],{calls:I,...k}=f,P=I.slice(0,-1)??[],U=(p==null?void 0:p.calls)??[],M=(g==null?void 0:g.calls)??[],H=[...U,...M].map(x=>x.status==="success"?Yc(x.data):null),j=(m==null?void 0:m.calls)??[],K=(y==null?void 0:y.calls)??[],$=[...j,...K].map(x=>x.status==="success"?Yc(x.data):null),v=((w==null?void 0:w.calls)??[]).map(x=>x.status==="success"?x.result:null),E=((N==null?void 0:N.calls)??[]).map(x=>x.status==="success"?x.result:null),_=((C==null?void 0:C.calls)??[]).map(x=>x.status==="success"?x.result:null),D=[];for(const[x,B]of $.entries()){const W=H[x];if(typeof B!="bigint"||typeof W!="bigint")continue;const L=v[x-1],S=E[x-1],F=_[x-1],X=x===0?{address:oCe,decimals:18,symbol:"ETH"}:{address:d[x-1],decimals:F||L?Number(L??1):void 0,symbol:S??void 0};D.some(se=>se.token.address===X.address)||D.push({token:X,value:{pre:W,post:B,diff:B-W}})}return{assetChanges:D,block:k,results:P}}const bD=new Map,O7=new Map;let TCe=0;function Pf(t,e,n){const r=++TCe,s=()=>bD.get(t)||[],i=()=>{const u=s();bD.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=O7.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(bD.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&O7.set(t,l),o}function TC(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await FR(c);const l=async()=>{s&&(await t({unpoll:i}),await FR(r),l())};l()})(),i}function RCe(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=_i(["watchBlocks",t.uid,e,n,r,u,c]);return Pf(p,{onBlock:s,onError:i},g=>TC(async()=>{var m;try{const y=await zt(t,Ud,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let w=(d==null?void 0:d.number)+1n;w<y.number;w++){const C=await zt(t,Ud,"getBlock")({blockNumber:w,includeTransactions:u});g.onBlock(C,d),d=C}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(m=g.onError)==null||m.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,m=()=>p=!1;return(async()=>{try{r&&zt(t,Ud,"getBlock")({blockTag:e,includeTransactions:u}).then(C=>{p&&g&&(s(C,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const C=t.transport.transports.find(N=>N.config.type==="webSocket"||N.config.type==="ipc");return C?C.value:t.transport}return t.transport})(),{unsubscribe:w}=await y.subscribe({params:["newHeads"],async onData(C){var I;if(!p)return;const N=await zt(t,Ud,"getBlock")({blockNumber:(I=C.result)==null?void 0:I.number,includeTransactions:u}).catch(()=>{});p&&(s(N,d),g=!1,d=N)},onError(C){i==null||i(C)}});m=w,p||m()}catch(y){i==null||i(y)}})(),()=>m()})()}function Vee(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=_i(["watchBlockNumber",t.uid,e,n,o]);return Pf(d,{onBlockNumber:r,onError:s},h=>TC(async()=>{var f;try{const p=await zt(t,DI,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=_i(["watchBlockNumber",t.uid,e,n]);return Pf(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(w=>w.config.type==="webSocket"||w.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:m}=await g.subscribe({params:["newHeads"],onData(y){var C;if(!f)return;const w=Yc((C=y.result)==null?void 0:C.number);h.onBlockNumber(w,c),c=w},onError(y){var w;(w=h.onError)==null||w.call(h,y)}});p=m,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function V2(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function kCe(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const m=_i(["watchEvent",e,n,r,t.uid,s,u,o]);return Pf(m,{onLogs:c,onError:a},y=>{let w;o!==void 0&&(w=o-1n);let C,N=!1;const I=TC(async()=>{var k;if(!N){try{C=await zt(t,_ee,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}N=!0;return}try{let P;if(C)P=await zt(t,H2,"getFilterChanges")({filter:C});else{const U=await zt(t,DI,"getBlockNumber")({});w&&w!==U?P=await zt(t,U$,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:w+1n,toBlock:U}):P=[],w=U}if(P.length===0)return;if(r)y.onLogs(P);else for(const U of P)y.onLogs([U])}catch(P){C&&P instanceof x0&&(N=!1),(k=y.onError)==null||k.call(y,P)}},{emitOnBegin:!0,interval:u});return async()=>{C&&await zt(t,V2,"uninstallFilter")({filter:C}),I()}})})():(()=>{let m=!0,y=()=>m=!1;return(async()=>{try{const w=(()=>{if(t.transport.type==="fallback"){const k=t.transport.transports.find(P=>P.config.type==="webSocket"||P.config.type==="ipc");return k?k.value:t.transport}return t.transport})(),C=i??(s?[s]:void 0);let N=[];C&&(N=[C.flatMap(P=>OI({abi:[P],eventName:P.name,args:n}))],s&&(N=N[0]));const{unsubscribe:I}=await w.subscribe({params:["logs",{address:e,topics:N}],onData(k){var U;if(!m)return;const P=k.result;try{const{eventName:M,args:H}=M$({abi:C??[],data:P.data,topics:P.topics,strict:f}),j=kf(P,{args:H,eventName:M});c([j])}catch(M){let H,j;if(M instanceof TA||M instanceof R2){if(d)return;H=M.abiItem.name,j=(U=M.abiItem.inputs)==null?void 0:U.some($=>!("name"in $&&$.name))}const K=kf(P,{args:j?[]:{},eventName:H});c([K])}},onError(k){a==null||a(k)}});y=I,m||y()}catch(w){a==null||a(w)}})(),()=>y()})()}function Kee(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=_i(["watchPendingTransactions",t.uid,e,i]);return Pf(l,{onTransactions:r,onError:n},u=>{let d;const h=TC(async()=>{var f;try{if(!d)try{d=await zt(t,Aee,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await zt(t,H2,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await zt(t,V2,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function PCe(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>AI(r))}async function OCe(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function DCe(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Ks(n):void 0,i=r?[s==null?void 0:s.address,[Rt(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const Yee="0x5792579257925792579257925792579257925792579257925792579257925792",Qee=Rt(0,{size:32});async function MCe(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Ks(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Gl({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Fl([p,f.dataSuffix]):p,to:f.to,value:f.value?Rt(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:Rt(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(w=>!w.optional)){const w="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new LE(new Ne(w,{details:w}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new $E(new Ne(y,{details:y}))}const p=[];for(const y of d){const w=xI(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?Yc(y.value):void 0});p.push(w),o>0&&await new Promise(C=>setTimeout(C,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const m=g.map(y=>y.status==="fulfilled"?y.value:Qee);return{id:Fl([...m,Rt(s.id,{size:32}),Yee])}}throw _X(h,{...e,account:u,chain:e.chain})}}async function Jee(t,e){async function n(u){if(u.endsWith(Yee.slice(2))){const h=jd(MR(u,-64,-32)),f=MR(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(m=>Qee.slice(2)!==m?t.request({method:"eth_getTransactionReceipt",params:[`0x${m}`]},{dedupe:!0}):void 0)),g=p.some(m=>m===null)?100:p.every(m=>(m==null?void 0:m.status)==="0x1")?200:p.every(m=>(m==null?void 0:m.status)==="0x0")?500:600;return{atomic:!1,chainId:Lu(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Lu(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Yc(u.blockNumber),gasUsed:Yc(u.gasUsed),status:Iee[u.status]})))??[],statusCode:l,status:c,version:o}}async function BCe(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function UCe(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=_i(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=P$();let u;const d=Pf(o,{resolve:c,reject:l},h=>{const f=TC(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await Jee(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new LCe({id:n}))},i):void 0,await a}class LCe extends Ne{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function $Ce(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function FCe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Lu(t.nonce):void 0,storageProof:t.storageProof?$Ce(t.storageProof):void 0}}async function jCe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?Rt(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return FCe(a)}async function Zee(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=_i(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:m,reject:y}=P$(),w=a?setTimeout(()=>{p(),f(),y(new Cwe({hash:n}))},a):void 0;return f=Pf(c,{onReplaced:r,resolve:m,reject:y},C=>{p=zt(t,Vee,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(N){const I=P=>{clearTimeout(w),p(),P(),f()};let k=N;if(!h)try{if(d){if(e>1&&(!d.blockNumber||k-d.blockNumber+1n<e))return;I(()=>C.resolve(d));return}if(l||(h=!0,await jR(async()=>{l=await zt(t,G2,"getTransaction")({hash:n}),l.blockNumber&&(k=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await zt(t,x5,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||k-d.blockNumber+1n<e))return;I(()=>C.resolve(d))}catch(P){if(P instanceof EX||P instanceof CX){if(!l){h=!1;return}try{u=l,h=!0;const U=await jR(()=>zt(t,Ud,"getBlock")({blockNumber:k,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:j})=>j instanceof AX});h=!1;const M=U.transactions.find(({from:j,nonce:K})=>j===u.from&&K===u.nonce);if(!M||(d=await zt(t,x5,"getTransactionReceipt")({hash:M.hash}),e>1&&(!d.blockNumber||k-d.blockNumber+1n<e)))return;let H="replaced";M.to===u.to&&M.value===u.value&&M.input===u.input?H="repriced":M.from===M.to&&M.value===0n&&(H="cancelled"),I(()=>{var j;(j=C.onReplaced)==null||j.call(C,{reason:H,replacedTransaction:u,transaction:M,transactionReceipt:d}),C.resolve(d)})}catch(U){I(()=>C.reject(U))}}else I(()=>C.reject(P))}}})}),g}async function WCe(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>hf(n))}async function zCe(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function Xee(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new sw({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Ks(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Ks(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await zt(t,IC,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await zt(t,E$,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&z2(o.address,i.address))&&(a.nonce+=1)),a}async function HCe(t,e){const{account:n=t.account}=e;if(!n)throw new sw({docsPath:"/docs/eip7702/signAuthorization"});const r=Ks(n);if(!r.signAuthorization)throw new aT({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await Xee(t,e);return r.signAuthorization(s)}async function GCe(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new sw({docsPath:"/docs/actions/wallet/signTransaction"});const i=Ks(n);iw({account:i,...e});const o=await zt(t,IC,"getChainId")({});r!==null&&vX({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||SC;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:Rt(o),from:i.address}]},{retryCount:0})}async function ete(t,{account:e=t.account,message:n}){if(!e)throw new sw({docsPath:"/docs/actions/wallet/signMessage"});const r=Ks(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?kE(n):n.raw instanceof Uint8Array?$l(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function qCe(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new sw({docsPath:"/docs/actions/wallet/signTypedData"});const o=Ks(n),a={EIP712Domain:Hee({domain:r}),...e.types};if(zee({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=bCe({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function VCe(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Ks(a.account):t.account,l=Gl({abi:n,args:s,functionName:o});try{const{data:u}=await zt(t,PI,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=aw({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw R0(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function KCe(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Rt(e)}]},{retryCount:0})}let tte=class extends o${constructor(e,n){super(),this.finished=!1,this.destroyed=!1,A0e(e);const r=_I(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),am(i)}update(e){return OE(this),this.iHash.update(e),this}digestInto(e){OE(this),jl(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const nte=(t,e,n)=>new tte(t,e).update(n).digest();nte.create=(t,e)=>new tte(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nc=BigInt(0),po=BigInt(1),Ey=BigInt(2),YCe=BigInt(3),rte=BigInt(4),ste=BigInt(5),ite=BigInt(8);function Zs(t,e){const n=t%e;return n>=nc?n:e+n}function Ws(t,e,n){let r=t;for(;e-- >nc;)r*=r,r%=n;return r}function D7(t,e){if(t===nc)throw new Error("invert: expected non-zero number");if(e<=nc)throw new Error("invert: expected positive modulus, got "+e);let n=Zs(t,e),r=e,s=nc,i=po;for(;n!==nc;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==po)throw new Error("invert: does not exist");return Zs(s,e)}function ote(t,e){const n=(t.ORDER+po)/rte,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function QCe(t,e){const n=(t.ORDER-ste)/ite,r=t.mul(e,Ey),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Ey),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function JCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-po,n=0;for(;e%Ey===nc;)e/=Ey,n++;let r=Ey;const s=RC(t);for(;M7(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return ote;let i=s.pow(r,e);const o=(e+po)/Ey;return function(c,l){if(c.is0(l))return l;if(M7(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const m=po<<BigInt(u-p-1),y=c.pow(d,m);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function ZCe(t){return t%rte===YCe?ote:t%ite===ste?QCe:JCe(t)}const XCe=(t,e)=>(Zs(t,e)&po)===po,e1e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function t1e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=e1e.reduce((r,s)=>(r[s]="function",r),e);return kI(t,n),t}function n1e(t,e,n){if(n<nc)throw new Error("invalid exponent, negatives unsupported");if(n===nc)return t.ONE;if(n===po)return e;let r=t.ONE,s=e;for(;n>nc;)n&po&&(r=t.mul(r,s)),s=t.sqr(s),n>>=po;return r}function ate(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function M7(t,e){const n=(t.ORDER-po)/Ey,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function r1e(t,e){e!==void 0&&RA(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function RC(t,e,n=!1,r={}){if(t<=nc)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=r1e(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:j2(o),ZERO:nc,ONE:po,create:u=>Zs(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return nc<=u&&u<t},is0:u=>u===nc,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&po)===po,neg:u=>Zs(-u,t),eql:(u,d)=>u===d,sqr:u=>Zs(u*u,t),add:(u,d)=>Zs(u+d,t),sub:(u,d)=>Zs(u-d,t),mul:(u,d)=>Zs(u*d,t),pow:(u,d)=>n1e(l,u,d),div:(u,d)=>Zs(u*D7(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>D7(u,t),sqrt:i||(u=>(c||(c=ZCe(t)),c(l,u))),toBytes:u=>n?F2(u,a):x$(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?VA(u):$2(u)},invertBatch:u=>ate(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function cte(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function lte(t){const e=cte(t);return e+Math.ceil(e/2)}function s1e(t,e,n=!1){const r=t.length,s=cte(e),i=lte(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?VA(t):$2(t),a=Zs(o,e-po)+po;return n?F2(a,s):x$(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const FE=BigInt(0),Cy=BigInt(1);function O_(t,e){const n=e.negate();return t?n:e}function ute(t,e,n){const r=e==="pz"?o=>o.pz:o=>o.ez,s=ate(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function dte(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function vD(t,e){dte(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=j2(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function B7(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Cy);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function i1e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function o1e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const ED=new WeakMap,hte=new WeakMap;function CD(t){return hte.get(t)||1}function U7(t){if(t!==FE)throw new Error("invalid wNAF")}function fte(t,e){return{constTimeNegate:O_,hasPrecomputes(n){return CD(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>FE;)r&Cy&&(s=s.add(i)),i=i.double(),r>>=Cy;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=vD(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=vD(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=B7(s,c,a);s=l,d?o=o.add(O_(f,r[p])):i=i.add(O_(h,r[u]))}return U7(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=vD(n,e);for(let a=0;a<o.windows&&s!==FE;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=B7(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return U7(s),i},getPrecomputes(n,r,s){let i=ED.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),ED.set(r,i))),i},wNAFCached(n,r,s){const i=CD(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=CD(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){dte(r,e),hte.set(n,r),ED.delete(n)}}}function a1e(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>FE||r>FE;)n&Cy&&(i=i.add(s)),r&Cy&&(o=o.add(s)),s=s.double(),n>>=Cy,r>>=Cy;return{p1:i,p2:o}}function pte(t,e,n,r){i1e(n,t),o1e(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=wve(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=j2(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const m=r[g],y=Number(m>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,m=o;g>0;g--)m=m.add(u[g]),p=p.add(m);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function L7(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return t1e(e),e}else return RC(t)}function gte(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>FE))throw new Error(`CURVE.${a} must be positive bigint`)}const r=L7(e.p,n.Fp),s=L7(e.n,n.Fn),o=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $7(t){t.lowS!==void 0&&k0("lowS",t.lowS),t.prehash!==void 0&&k0("prehash",t.prehash)}class c1e extends Error{constructor(e=""){super(e)}}const Fh={Err:c1e,_tlv:{encode:(t,e)=>{const{Err:n}=Fh;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=jN(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?jN(s.length/2|128):"";return jN(t)+i+s+e},decode(t,e){const{Err:n}=Fh;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Fh;if(t<D_)throw new e("integer: negative integers are not allowed");let n=jN(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Fh;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return $2(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Fh,s=Js("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Fh,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},D_=BigInt(0),M_=BigInt(1),l1e=BigInt(2),zN=BigInt(3),u1e=BigInt(4);function d1e(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function mte(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Js("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function h1e(t,e={}){const{Fp:n,Fn:r}=gte("weierstrass",t,e),{h:s,n:i}=t;kI(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(U,M,H){const{x:j,y:K}=M.toAffine(),$=n.toBytes(j);if(k0("isCompressed",H),H){a();const v=!n.isOdd(K);return df(yte(v),$)}else return df(Uint8Array.of(4),$,n.toBytes(K))}function l(U){jl(U);const M=n.BYTES,H=M+1,j=2*M+1,K=U.length,$=U[0],v=U.subarray(1);if(K===H&&($===2||$===3)){const E=n.fromBytes(v);if(!n.isValid(E))throw new Error("bad point: is not on curve, wrong x");const _=h(E);let D;try{D=n.sqrt(_)}catch(W){const L=W instanceof Error?": "+W.message:"";throw new Error("bad point: is not on curve, sqrt error"+L)}a();const x=n.isOdd(D);return($&1)===1!==x&&(D=n.neg(D)),{x:E,y:D}}else if(K===j&&$===4){const E=n.fromBytes(v.subarray(M*0,M*1)),_=n.fromBytes(v.subarray(M*1,M*2));if(!f(E,_))throw new Error("bad point: is not on curve");return{x:E,y:_}}else throw new Error(`bad point: got length ${K}, expected compressed=${H} or uncompressed=${j}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=d1e(n,t.a,t.b);function f(U,M){const H=n.sqr(M),j=h(U);return n.eql(H,j)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,zN),u1e),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function m(U,M,H=!1){if(!n.isValid(M)||H&&n.is0(M))throw new Error(`bad point coordinate ${U}`);return M}function y(U){if(!(U instanceof I))throw new Error("ProjectivePoint expected")}const w=$R((U,M)=>{const{px:H,py:j,pz:K}=U;if(n.eql(K,n.ONE))return{x:H,y:j};const $=U.is0();M==null&&(M=$?n.ONE:n.inv(K));const v=n.mul(H,M),E=n.mul(j,M),_=n.mul(K,M);if($)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:v,y:E}}),C=$R(U=>{if(U.is0()){if(e.allowInfinityPoint&&!n.is0(U.py))return;throw new Error("bad point: ZERO")}const{x:M,y:H}=U.toAffine();if(!n.isValid(M)||!n.isValid(H))throw new Error("bad point: x or y not field elements");if(!f(M,H))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function N(U,M,H,j,K){return H=new I(n.mul(H.px,U),H.py,H.pz),M=O_(j,M),H=O_(K,H),M.add(H)}class I{constructor(M,H,j){this.px=m("x",M),this.py=m("y",H,!0),this.pz=m("z",j),Object.freeze(this)}static fromAffine(M){const{x:H,y:j}=M||{};if(!M||!n.isValid(H)||!n.isValid(j))throw new Error("invalid affine point");if(M instanceof I)throw new Error("projective point not allowed");return n.is0(H)&&n.is0(j)?I.ZERO:new I(H,j,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(M){return ute(I,"pz",M)}static fromBytes(M){return jl(M),I.fromHex(M)}static fromHex(M){const H=I.fromAffine(d(Js("pointHex",M)));return H.assertValidity(),H}static fromPrivateKey(M){const H=mte(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return I.BASE.multiply(H(M))}static msm(M,H){return pte(I,r,M,H)}precompute(M=8,H=!0){return P.setWindowSize(this,M),H||this.multiply(zN),this}_setWindowSize(M){this.precompute(M)}assertValidity(){C(this)}hasEvenY(){const{y:M}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(M)}equals(M){y(M);const{px:H,py:j,pz:K}=this,{px:$,py:v,pz:E}=M,_=n.eql(n.mul(H,E),n.mul($,K)),D=n.eql(n.mul(j,E),n.mul(v,K));return _&&D}negate(){return new I(this.px,n.neg(this.py),this.pz)}double(){const{a:M,b:H}=t,j=n.mul(H,zN),{px:K,py:$,pz:v}=this;let E=n.ZERO,_=n.ZERO,D=n.ZERO,x=n.mul(K,K),B=n.mul($,$),W=n.mul(v,v),L=n.mul(K,$);return L=n.add(L,L),D=n.mul(K,v),D=n.add(D,D),E=n.mul(M,D),_=n.mul(j,W),_=n.add(E,_),E=n.sub(B,_),_=n.add(B,_),_=n.mul(E,_),E=n.mul(L,E),D=n.mul(j,D),W=n.mul(M,W),L=n.sub(x,W),L=n.mul(M,L),L=n.add(L,D),D=n.add(x,x),x=n.add(D,x),x=n.add(x,W),x=n.mul(x,L),_=n.add(_,x),W=n.mul($,v),W=n.add(W,W),x=n.mul(W,L),E=n.sub(E,x),D=n.mul(W,B),D=n.add(D,D),D=n.add(D,D),new I(E,_,D)}add(M){y(M);const{px:H,py:j,pz:K}=this,{px:$,py:v,pz:E}=M;let _=n.ZERO,D=n.ZERO,x=n.ZERO;const B=t.a,W=n.mul(t.b,zN);let L=n.mul(H,$),S=n.mul(j,v),F=n.mul(K,E),X=n.add(H,j),se=n.add($,v);X=n.mul(X,se),se=n.add(L,S),X=n.sub(X,se),se=n.add(H,K);let ge=n.add($,E);return se=n.mul(se,ge),ge=n.add(L,F),se=n.sub(se,ge),ge=n.add(j,K),_=n.add(v,E),ge=n.mul(ge,_),_=n.add(S,F),ge=n.sub(ge,_),x=n.mul(B,se),_=n.mul(W,F),x=n.add(_,x),_=n.sub(S,x),x=n.add(S,x),D=n.mul(_,x),S=n.add(L,L),S=n.add(S,L),F=n.mul(B,F),se=n.mul(W,se),S=n.add(S,F),F=n.sub(L,F),F=n.mul(B,F),se=n.add(se,F),L=n.mul(S,se),D=n.add(D,L),L=n.mul(ge,se),_=n.mul(X,_),_=n.sub(_,L),L=n.mul(X,S),x=n.mul(ge,x),x=n.add(x,L),new I(_,D,x)}subtract(M){return this.add(M.negate())}is0(){return this.equals(I.ZERO)}multiply(M){const{endo:H}=e;if(!r.isValidNot0(M))throw new Error("invalid scalar: out of range");let j,K;const $=v=>P.wNAFCached(this,v,I.normalizeZ);if(H){const{k1neg:v,k1:E,k2neg:_,k2:D}=H.splitScalar(M),{p:x,f:B}=$(E),{p:W,f:L}=$(D);K=B.add(L),j=N(H.beta,x,W,v,_)}else{const{p:v,f:E}=$(M);j=v,K=E}return I.normalizeZ([j,K])[0]}multiplyUnsafe(M){const{endo:H}=e,j=this;if(!r.isValid(M))throw new Error("invalid scalar: out of range");if(M===D_||j.is0())return I.ZERO;if(M===M_)return j;if(P.hasPrecomputes(this))return this.multiply(M);if(H){const{k1neg:K,k1:$,k2neg:v,k2:E}=H.splitScalar(M),{p1:_,p2:D}=a1e(I,j,$,E);return N(H.beta,_,D,K,v)}else return P.wNAFCachedUnsafe(j,M)}multiplyAndAddUnsafe(M,H,j){const K=this.multiplyUnsafe(H).add(M.multiplyUnsafe(j));return K.is0()?void 0:K}toAffine(M){return w(this,M)}isTorsionFree(){const{isTorsionFree:M}=e;return s===M_?!0:M?M(I,this):P.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:M}=e;return s===M_?this:M?M(I,this):this.multiplyUnsafe(s)}toBytes(M=!0){return k0("isCompressed",M),this.assertValidity(),u(I,this,M)}toRawBytes(M=!0){return this.toBytes(M)}toHex(M=!0){return DE(this.toBytes(M))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}I.BASE=new I(t.Gx,t.Gy,n.ONE),I.ZERO=new I(n.ZERO,n.ONE,n.ZERO),I.Fp=n,I.Fn=r;const k=r.BITS,P=fte(I,e.endo?Math.ceil(k/2):k);return I}function yte(t){return Uint8Array.of(t?2:3)}function f1e(t,e,n={}){kI(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||nX,s=e.hmac||((j,...K)=>nte(e.hash,j,df(...K))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(j){const K=a>>M_;return j>K}function u(j){return l(j)?o.neg(j):j}function d(j,K){if(!o.isValidNot0(K))throw new Error(`invalid signature ${j}: out of range 1..CURVE.n`)}class h{constructor(K,$,v){d("r",K),d("s",$),this.r=K,this.s=$,v!=null&&(this.recovery=v),Object.freeze(this)}static fromCompact(K){const $=o.BYTES,v=Js("compactSignature",K,$*2);return new h(o.fromBytes(v.subarray(0,$)),o.fromBytes(v.subarray($,$*2)))}static fromDER(K){const{r:$,s:v}=Fh.toSig(Js("DER",K));return new h($,v)}assertValidity(){}addRecoveryBit(K){return new h(this.r,this.s,K)}recoverPublicKey(K){const $=i.ORDER,{r:v,s:E,recovery:_}=this;if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");if(a*l1e<$&&_>1)throw new Error("recovery id is ambiguous for h>1 curve");const x=_===2||_===3?v+a:v;if(!i.isValid(x))throw new Error("recovery id 2 or 3 invalid");const B=i.toBytes(x),W=t.fromHex(df(yte((_&1)===0),B)),L=o.inv(x),S=C(Js("msgHash",K)),F=o.create(-S*L),X=o.create(E*L),se=t.BASE.multiplyUnsafe(F).add(W.multiplyUnsafe(X));if(se.is0())throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(K){if(K==="compact")return df(o.toBytes(this.r),o.toBytes(this.s));if(K==="der")return i$(Fh.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return DE(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return DE(this.toBytes("compact"))}}const f=mte(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(j){try{return f(j),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const j=a;return s1e(r(lte(j)),j)},precompute(j=8,K=t.BASE){return K.precompute(j,!1)}};function g(j,K=!0){return t.fromPrivateKey(j).toBytes(K)}function m(j){if(typeof j=="bigint")return!1;if(j instanceof t)return!0;const $=Js("key",j).length,v=i.BYTES,E=v+1,_=2*v+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===E))return $===E||$===_}function y(j,K,$=!0){if(m(j)===!0)throw new Error("first arg must be private key");if(m(K)===!1)throw new Error("second arg must be public key");return t.fromHex(K).multiply(f(j)).toBytes($)}const w=e.bits2int||function(j){if(j.length>8192)throw new Error("input is too large");const K=$2(j),$=j.length*8-c;return $>0?K>>BigInt($):K},C=e.bits2int_modN||function(j){return o.create(w(j))},N=j2(c);function I(j){return $b("num < 2^"+c,j,D_,N),o.toBytes(j)}function k(j,K,$=P){if(["recovered","canonical"].some(X=>X in $))throw new Error("sign() legacy options not supported");const{hash:v}=e;let{lowS:E,prehash:_,extraEntropy:D}=$;E==null&&(E=!0),j=Js("msgHash",j),$7($),_&&(j=Js("prehashed msgHash",v(j)));const x=C(j),B=f(K),W=[I(B),I(x)];if(D!=null&&D!==!1){const X=D===!0?r(i.BYTES):D;W.push(Js("extraEntropy",X))}const L=df(...W),S=x;function F(X){const se=w(X);if(!o.isValidNot0(se))return;const ge=o.inv(se),Ue=t.BASE.multiply(se).toAffine(),Le=o.create(Ue.x);if(Le===D_)return;const Be=o.create(ge*o.create(S+Le*B));if(Be===D_)return;let Ut=(Ue.x===Le?0:2)|Number(Ue.y&M_),lt=Be;return E&&l(Be)&&(lt=u(Be),Ut^=1),new h(Le,lt,Ut)}return{seed:L,k2sig:F}}const P={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function M(j,K,$=P){const{seed:v,k2sig:E}=k(j,K,$);return bve(e.hash.outputLen,o.BYTES,s)(v,E)}t.BASE.precompute(8);function H(j,K,$,v=U){const E=j;K=Js("msgHash",K),$=Js("publicKey",$),$7(v);const{lowS:_,prehash:D,format:x}=v;if("strict"in v)throw new Error("options.strict was renamed to lowS");if(x!==void 0&&!["compact","der","js"].includes(x))throw new Error('format must be "compact", "der" or "js"');const B=typeof E=="string"||s$(E),W=!B&&!x&&typeof E=="object"&&E!==null&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!B&&!W)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let L,S;try{if(W)if(x===void 0||x==="js")L=new h(E.r,E.s);else throw new Error("invalid format");if(B){try{x!=="compact"&&(L=h.fromDER(E))}catch(lt){if(!(lt instanceof Fh.Err))throw lt}!L&&x!=="der"&&(L=h.fromCompact(E))}S=t.fromHex($)}catch{return!1}if(!L||_&&L.hasHighS())return!1;D&&(K=e.hash(K));const{r:F,s:X}=L,se=C(K),ge=o.inv(X),Ue=o.create(se*ge),Le=o.create(F*ge),Be=t.BASE.multiplyUnsafe(Ue).add(S.multiplyUnsafe(Le));return Be.is0()?!1:o.create(Be.x)===F}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:M,verify:H,utils:p,Point:t,Signature:h})}function p1e(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=RC(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function g1e(t){const{CURVE:e,curveOpts:n}=p1e(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function m1e(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function y1e(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=g1e(t),s=h1e(e,n),i=f1e(s,r,n);return m1e(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function w1e(t,e){const n=r=>y1e({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const WR={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const b1e=BigInt(1),M5=BigInt(2),F7=(t,e)=>(t+e/M5)/e;function v1e(t){const e=WR.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Ws(u,n,e)*u%e,h=Ws(d,n,e)*u%e,f=Ws(h,M5,e)*l%e,p=Ws(f,s,e)*f%e,g=Ws(p,i,e)*p%e,m=Ws(g,a,e)*g%e,y=Ws(m,c,e)*m%e,w=Ws(y,a,e)*g%e,C=Ws(w,n,e)*u%e,N=Ws(C,o,e)*p%e,I=Ws(N,r,e)*l%e,k=Ws(I,M5,e);if(!B5.eql(B5.sqr(k),t))throw new Error("Cannot find square root");return k}const B5=RC(WR.p,void 0,void 0,{sqrt:v1e}),K2=w1e({...WR,Fp:B5,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=WR.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-b1e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=F7(i*t,e),c=F7(-r*t,e);let l=Zs(t-a*n-c*s,e),u=Zs(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},OX),E1e=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:K2},Symbol.toStringTag,{value:"Module"}));function C1e({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new K2.Signature(Yc(t),Yc(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Ll(o)}async function F$(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Kd(o)?o:typeof o=="object"&&"r"in o&&"s"in o?C1e(o):Si(o),u=await(async()=>!r&&!s||_Ce(l)?l:ACe({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Gl({abi:m7,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:P2({abi:m7,args:[n,i,u],bytecode:Gve}),...c},{data:g}=await zt(t,PI,"call")(p);return Yye(g??"0x0")}catch(p){try{if(z2(hf(n),await pX({hash:i,signature:o})))return!0}catch{}if(p instanceof ree)return!1;throw p}}async function _1e(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=Gee(n);return F$(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function A1e(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=gCe({message:o,primaryType:a,types:c,domain:l});return F$(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function S1e(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function I1e(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const m=h??!1,y=_i(["watchContractEvent",r,s,i,t.uid,o,d,m,a]);return Pf(y,{onLogs:l,onError:c},w=>{let C;a!==void 0&&(C=a-1n);let N,I=!1;const k=TC(async()=>{var P;if(!I){try{N=await zt(t,Cee,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:m,fromBlock:a})}catch{}I=!0;return}try{let U;if(N)U=await zt(t,H2,"getFilterChanges")({filter:N});else{const M=await zt(t,DI,"getBlockNumber")({});C&&C<M?U=await zt(t,See,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:C+1n,toBlock:M,strict:m}):U=[],C=M}if(U.length===0)return;if(i)w.onLogs(U);else for(const M of U)w.onLogs([M])}catch(U){N&&U instanceof x0&&(I=!1),(P=w.onError)==null||P.call(w,U)}},{emitOnBegin:!0,interval:d});return async()=>{N&&await zt(t,V2,"uninstallFilter")({filter:N}),k()}})})():(()=>{const m=h??!1,y=_i(["watchContractEvent",r,s,i,t.uid,o,d,m]);let w=!0,C=()=>w=!1;return Pf(y,{onLogs:l,onError:c},N=>((async()=>{try{const I=(()=>{if(t.transport.type==="fallback"){const U=t.transport.transports.find(M=>M.config.type==="webSocket"||M.config.type==="ipc");return U?U.value:t.transport}return t.transport})(),k=o?OI({abi:n,eventName:o,args:s}):[],{unsubscribe:P}=await I.subscribe({params:["logs",{address:r,topics:k}],onData(U){var H;if(!w)return;const M=U.result;try{const{eventName:j,args:K}=M$({abi:n,data:M.data,topics:M.topics,strict:h}),$=kf(M,{args:K,eventName:j});N.onLogs([$])}catch(j){let K,$;if(j instanceof TA||j instanceof R2){if(h)return;K=j.abiItem.name,$=(H=j.abiItem.inputs)==null?void 0:H.some(E=>!("name"in E&&E.name))}const v=kf(M,{args:$?[]:{},eventName:K});N.onLogs([v])}},onError(U){var M;(M=N.onError)==null||M.call(N,U)}});C=P,w||C()}catch(I){c==null||c(I)}})(),()=>C()))})()}async function wte(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new sw({docsPath:"/docs/contract/writeContract"});const l=r?Ks(r):null,u=Gl({abi:n,args:i,functionName:a});try{return await zt(t,xI,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw R0(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function qc(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const lT="2.17.3",N1e=()=>`@wagmi/core@${lT}`;var bte=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},zR,vte;let zf=class U5 extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return N1e()}constructor(e,n={}){var i;super(),zR.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof U5?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof U5&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return bte(this,zR,"m",vte).call(this,this,e)}};zR=new WeakSet,vte=function t(e,n){return n!=null&&n(e)?e:e.cause?bte(this,zR,"m",t).call(this,e.cause,n):e};class KA extends zf{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class x1e extends zf{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class T1e extends zf{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class R1e extends zf{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class k1e extends zf{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class P1e extends zf{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function uT(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new x1e;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const L5=256;let HN=L5,GN;function Ete(t=11){if(!GN||HN+t>L5*2){GN="",HN=0;for(let e=0;e<L5;e++)GN+=(256+Math.random()*256|0).toString(16).substring(1)}return GN.substring(HN,HN+++t)}function Cte(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Ks(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},m={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:Ete()};function y(w){return C=>{const N=C(w);for(const k in m)delete N[k];const I={...w,...N};return Object.assign(I,{extend:y(I)})}}return Object.assign(m,{extend:y(m)})}function j$({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=Ete();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:cCe(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function O1e(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>j$({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function HR(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=D1e,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=j$({key:n,name:r,async request({method:g,params:m}){let y;const w=async(C=0)=>{const N=h[C]({...d,chain:c,retryCount:0,timeout:u});try{const I=await N.request({method:g,params:m});return f({method:g,params:m,response:I,transport:N,status:"success"}),I}catch(I){if(f({error:I,method:g,params:m,transport:N,status:"error"}),i(I)||C===h.length-1||(y??(y=h.slice(C+1).some(k=>{const{include:P,exclude:U}=k({chain:c}).config.methods||{};return P?P.includes(g):U?!U.includes(g):!0})),!y))throw I;return w(C+1)}};return w()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};M1e({chain:c,interval:g.interval??l,onTransports:m=>h=m,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function D1e(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===BE.code||t.code===gi.code||by.nodeMessage.test(t.message)||t.code===5e3))}function M1e({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const m=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let w,C;try{await(r?r({transport:m}):m.request({method:"net_listening"})),C=1}catch{C=0}finally{w=Date.now()}return{latency:w-y,success:C}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:m})=>m)))),p=o.map((g,m)=>{const y=u.map(k=>k[m].latency),C=1-y.reduce((k,P)=>k+P,0)/y.length/f,N=u.map(k=>k[m].success),I=N.reduce((k,P)=>k+P,0)/N.length;return I===0?[0,m]:[l*C+c*I,m]}).sort((g,m)=>m[0]-g[0]);n(p.map(([,g])=>o[g])),await FR(e),d()};d()}class B1e extends Ne{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function yg(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},m=e.retryCount??h,y=f??e.timeout??1e4,w=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!w)throw new B1e;const C=dCe(w,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return j$({key:s,methods:i,name:o,async request({method:N,params:I}){const k={method:N,params:I},{schedule:P}=mee({id:w,wait:g,shouldSplitBatch(j){return j.length>p},fn:j=>C.request({body:j}),sort:(j,K)=>j.id-K.id}),U=async j=>n?P(j):[await C.request({body:j})],[{error:M,result:H}]=await U(k);if(u)return{error:M,result:H};if(M)throw new m$({body:k,error:M,url:w});return H},retryCount:m,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:w})}}function U1e(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(L1e))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match($1e))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const L1e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,$1e=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function F1e(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Wl(r.address,{strict:!1})||e&&!z2(r.address,e))return!1}catch{return!1}return!0}async function j1e(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=U1e(s);if(!u.address||!F1e({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=Gee(s);return F$(t,{address:u.address,hash:h,signature:a,...l})}function W1e(t){return{call:e=>PI(t,e),createAccessList:e=>Eee(t,e),createBlockFilter:()=>hEe(t),createContractEventFilter:e=>Cee(t,e),createEventFilter:e=>_ee(t,e),createPendingTransactionFilter:()=>Aee(t),estimateContractGas:e=>pEe(t,e),estimateGas:e=>M2(t,e),getBalance:e=>v$(t,e),getBlobBaseFee:()=>gEe(t),getBlock:e=>Ud(t,e),getBlockNumber:e=>DI(t,e),getBlockTransactionCount:e=>EEe(t,e),getBytecode:e=>T7(t,e),getChainId:()=>IC(t),getCode:e=>T7(t,e),getContractEvents:e=>See(t,e),getEip712Domain:e=>SEe(t,e),getEnsAddress:e=>Jve(t,e),getEnsAvatar:e=>uEe(t,e),getEnsName:e=>vee(t,e),getEnsResolver:e=>dEe(t,e),getEnsText:e=>bee(t,e),getFeeHistory:e=>xEe(t,e),estimateFeesPerGas:e=>Owe(t,e),getFilterChanges:e=>H2(t,e),getFilterLogs:e=>TEe(t,e),getGasPrice:()=>w$(t),getLogs:e=>U$(t,e),getProof:e=>jCe(t,e),estimateMaxPriorityFeePerGas:e=>Pwe(t,e),getStorageAt:e=>REe(t,e),getTransaction:e=>G2(t,e),getTransactionConfirmations:e=>kEe(t,e),getTransactionCount:e=>E$(t,e),getTransactionReceipt:e=>x5(t,e),multicall:e=>Nee(t,e),prepareTransactionRequest:e=>NI(t,e),readContract:e=>Jd(t,e),sendRawTransaction:e=>_$(t,e),simulate:e=>T5(t,e),simulateBlocks:e=>T5(t,e),simulateCalls:e=>xCe(t,e),simulateContract:e=>VCe(t,e),verifyMessage:e=>_1e(t,e),verifySiweMessage:e=>j1e(t,e),verifyTypedData:e=>A1e(t,e),uninstallFilter:e=>V2(t,e),waitForTransactionReceipt:e=>Zee(t,e),watchBlocks:e=>RCe(t,e),watchBlockNumber:e=>Vee(t,e),watchContractEvent:e=>I1e(t,e),watchEvent:e=>kCe(t,e),watchPendingTransactions:e=>Kee(t,e)}}function z1e(t){return{addChain:e=>Zye(t,e),deployContract:e=>rbe(t,e),getAddresses:()=>PCe(t),getCallsStatus:e=>Jee(t,e),getCapabilities:e=>DCe(t,e),getChainId:()=>IC(t),getPermissions:()=>OCe(t),prepareAuthorization:e=>Xee(t,e),prepareTransactionRequest:e=>NI(t,e),requestAddresses:()=>WCe(t),requestPermissions:e=>zCe(t,e),sendCalls:e=>MCe(t,e),sendRawTransaction:e=>_$(t,e),sendTransaction:e=>xI(t,e),showCallsStatus:e=>BCe(t,e),signAuthorization:e=>HCe(t,e),signMessage:e=>ete(t,e),signTransaction:e=>GCe(t,e),signTypedData:e=>qCe(t,e),switchChain:e=>KCe(t,e),waitForCallsStatus:e=>UCe(t,e),watchAsset:e=>S1e(t,e),writeContract:e=>wte(t,e)}}async function MI(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new P1e({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new T1e;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new k1e({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Ks(e.account??n.accounts[0]);if(o&&(o.address=hf(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new R1e({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return Cte({account:o,chain:a,name:"Connector Client",transport:l=>O1e(c)({...l,retryCount:0})})}async function $5(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function H1e(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await MI(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return qc(o,M2,"estimateGas")({...s,account:i})}function _te(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(wwe[t])}function cv(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function G1e(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return qc(o,Nee,"multicall")({allowFailure:n,contracts:s,...i})}function Ate(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return qc(s,Jd,"readContract")(r)}async function q1e(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>G1e(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof see)throw c;const l=()=>o.map(u=>Ate(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function V1e(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await j7(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await j7(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=qZ(jd(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await qc(c,v$,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Im(u,_te(a)),symbol:d.nativeCurrency.symbol,value:u}}async function j7(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await q1e(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Im(c??"0",_te(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function W7(t){return t.state.chainId}function cm(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!cm(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!cm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let _D=[];function z7(t){const e=t.chains;return cm(_D,e)?_D:(_D=e,e)}function K1e(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let qN=[];function lu(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||cm(qN,e)?qN:(qN=e,e)}let AD=[];function H7(t){const e=t.connectors;return cm(AD,e)?AD:(AD=e,e)}function Y1e(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return qc(s,vee,"getEnsName")(r)}function F5(t,e={}){const n=K1e(t,e);return n==null?void 0:n.extend(W1e)}async function Q1e(t,e={}){return(await MI(t,e)).extend(z1e)}async function J1e(t,e){const{account:n,chainId:r,...s}=e,i=n??cv(t).address,o=t.getClient({chainId:r});return qc(o,NI,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let SD=!1;async function j5(t,e={}){var l,u;if(SD)return[];SD=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const m=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:m}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),SD=!1,a}async function Z1e(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await MI(t,{account:n??void 0,chainId:r,connector:s}),await qc(o,xI,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function X1e(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await MI(t,{account:n,connector:r}),qc(i,ete,"signMessage")({...s,...n?{account:n}:{}})}class kp extends zf{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class e_e extends zf{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function W5(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new e_e({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new KA;return t.setState(a=>({...a,chainId:r})),i}function Ste(t,e){const{onChange:n}=e;return t.subscribe(()=>cv(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return cm(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function t_e(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function Ite(t,e){const{onChange:n}=e;return t.subscribe(()=>lu(t),n,{equalityFn:cm})}function Nte(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function n_e(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=qc(l,Kee,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function r_e(t,e){const{onChange:n}=e;return t.subscribe(()=>F5(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function xte(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await qc(i,Zee,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await qc(i,G2,"getTransaction")({hash:a.transactionHash}),d=await qc(i,PI,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?qZ(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function Tte(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await MI(t,{account:n??void 0,chainId:r,connector:s}),await qc(o,wte,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function uot(t){return t}Y2.type="injected";function Y2(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...s_e[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:Y2.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,m,y,w;const d=await this.getProvider();if(!d)throw new kp;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(m=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:m.map(N=>hf(N)),h.length>0&&(h=await this.getAccounts())}catch(C){const N=C;if(N.code===gi.code)throw new gi(N);if(N.code===Wg.code)throw N}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(I=>hf(I))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let C=await this.getChainId();if(l&&C!==l){const N=await this.switchChain({chainId:l}).catch(I=>{if(I.code===gi.code)throw I;return{id:C}});C=(N==null?void 0:N.id)??C}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((w=c.storage)==null?void 0:w.setItem("injected.connected",!0)),{accounts:h,chainId:C}}catch(C){const N=C;throw N.code===gi.code?new gi(N):N.code===Wg.code?new Wg(N):N}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new kp;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await Lee(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new kp;return(await l.request({method:"eth_accounts"})).map(d=>hf(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new kp;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=dT(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new kp}return!!(await jR(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,m,y;const d=await this.getProvider();if(!d)throw new kp;const h=c.chains.find(w=>w.id===u);if(!h)throw new Yd(new KA);const f=new Promise(w=>{const C=N=>{"chainId"in N&&N.chainId===u&&(c.emitter.off("change",C),w())};c.emitter.on("change",C)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Rt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(w){const C=w;if(C.code===4902||((g=(p=C==null?void 0:C.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:N,...I}=h.blockExplorers??{};let k;l!=null&&l.blockExplorerUrls?k=l.blockExplorerUrls:N&&(k=[N.url,...Object.values(I).map(M=>M.url)]);let P;(m=l==null?void 0:l.rpcUrls)!=null&&m.length?P=l.rpcUrls:P=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const U={blockExplorerUrls:k,chainId:Rt(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:P};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[U]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new gi(new Error("User rejected switch after adding network."))}),f]),h}catch(N){throw new gi(N)}throw C.code===gi.code?new gi(C):new Yd(C)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>hf(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const s_e={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:dT(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return dT(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:dT(t,"isPhantom")}}};function dT(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function i_e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function o_e(){const t=new Set;let e=[];const n=()=>i_e(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const a_e=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},c_e=a_e;function l_e(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const z5=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return z5(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return z5(r)(n)}}}},u_e=(t,e)=>(n,r,s)=>{let i={storage:l_e(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,m)=>{d(g,m),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,m;if(!l)return;o=!1,a.forEach(w=>{var C;return w((C=r())!=null?C:h)});const y=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(g=r())!=null?g:h))||void 0;return z5(l.getItem.bind(l))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return[!0,i.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var C;const[N,I]=w;if(f=i.merge(I,(C=r())!=null?C:h),n(f,!0),N)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(w=>w(f))}).catch(w=>{y==null||y(void 0,w)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},d_e=u_e,G7=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},ID=t=>t?G7(t):G7;var Rte={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var m=this._events[g],y=arguments.length,w,C;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,h),!0;case 5:return m.fn.call(m.context,u,d,h,f),!0;case 6:return m.fn.call(m.context,u,d,h,f,p),!0}for(C=1,w=new Array(y-1);C<y;C++)w[C-1]=arguments[C];m.fn.apply(m.context,w)}else{var N=m.length,I;for(C=0;C<N;C++)switch(m[C].once&&this.removeListener(l,m[C].fn,void 0,!0),y){case 1:m[C].fn.call(m[C].context);break;case 2:m[C].fn.call(m[C].context,u);break;case 3:m[C].fn.call(m[C].context,u,d);break;case 4:m[C].fn.call(m[C].context,u,d,h);break;default:if(!w)for(I=1,w=new Array(y-1);I<y;I++)w[I-1]=arguments[I];m[C].fn.apply(m[C].context,w)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,m=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&m.push(p[g]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Rte);var h_e=Rte.exports;const W$=rh(h_e);class f_e{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new W$})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function p_e(t){return new f_e(t)}function g_e(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function q7(t,e){return t.slice(0,e).join(".")||"."}function V7(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function m_e(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=V7(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=V7(s,c);if(u!==0)return r?e.call(this,a,c,q7(i,u)):`[ref=${q7(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function y_e(t,e,n,r){return JSON.stringify(t,m_e((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function w_e(t){const{deserialize:e=g_e,key:n="wagmi",serialize:r=y_e,storage:s=kte}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const kte={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function b_e(){const t=typeof window<"u"&&window.localStorage?window.localStorage:kte;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const H5=256;let VN=H5,KN;function v_e(t=11){if(!KN||VN+t>H5*2){KN="",VN=0;for(let e=0;e<H5;e++)KN+=(256+Math.random()*256|0).toString(16).substring(1)}return KN.substring(VN,VN+++t)}function E_e(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=w_e({storage:b_e()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?o_e():void 0,a=ID(()=>i.chains),c=ID(()=>{const I=[],k=new Set;for(const P of i.connectors??[]){const U=l(P);if(I.push(U),!s&&U.rdns){const M=typeof U.rdns=="string"?[U.rdns]:U.rdns;for(const H of M)k.add(H)}}if(!s&&o){const P=o.getProviders();for(const U of P)k.has(U.info.rdns)||I.push(l(u(U)))}return I});function l(I){var U;const k=p_e(v_e()),P={...I({emitter:k,chains:a.getState(),storage:n,transports:i.transports}),emitter:k,uid:k.uid};return k.on("connect",C),(U=P.setup)==null||U.call(P),P}function u(I){const{info:k}=I,P=I.provider;return Y2({target:{...k,id:k.rdns,provider:P}})}const d=new Map;function h(I={}){const k=I.chainId??m.getState().chainId,P=a.getState().find(M=>M.id===k);if(I.chainId&&!P)throw new KA;{const M=d.get(m.getState().chainId);if(M&&!P)return M;if(!P)throw new KA}{const M=d.get(k);if(M)return M}let U;if(i.client)U=i.client({chain:P});else{const M=P.id,H=a.getState().map($=>$.id),j={},K=Object.entries(i);for(const[$,v]of K)if(!($==="chains"||$==="client"||$==="connectors"||$==="transports"))if(typeof v=="object")if(M in v)j[$]=v[M];else{if(H.some(_=>_ in v))continue;j[$]=v}else j[$]=v;U=Cte({...j,chain:P,batch:j.batch??{multicall:!0},transport:$=>i.transports[M]({...$,connectors:c})})}return d.set(k,U),U}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";lT.startsWith(g)?p=Number.parseInt(lT.replace(g,"")):p=Number.parseInt(lT.split(".")[0]??"0");const m=ID(c_e(n?d_e(f,{migrate(I,k){if(k===p)return I;const P=f(),U=y(I,P.chainId);return{...P,chainId:U}},name:"store",partialize(I){return{connections:{__type:"Map",value:Array.from(I.connections.entries()).map(([k,P])=>{const{id:U,name:M,type:H,uid:j}=P.connector;return[k,{...P,connector:{id:U,name:M,type:H,uid:j}}]})},chainId:I.chainId,current:I.current}},merge(I,k){typeof I=="object"&&I&&"status"in I&&delete I.status;const P=y(I,k.chainId);return{...k,...I,chainId:P}},skipHydration:s,storage:n,version:p}):f));m.setState(f());function y(I,k){return I&&typeof I=="object"&&"chainId"in I&&typeof I.chainId=="number"&&a.getState().some(P=>P.id===I.chainId)?I.chainId:k}r&&m.subscribe(({connections:I,current:k})=>{var P;return k?(P=I.get(k))==null?void 0:P.chainId:void 0},I=>{if(a.getState().some(P=>P.id===I))return m.setState(P=>({...P,chainId:I??P.chainId}))}),o==null||o.subscribe(I=>{const k=new Set,P=new Set;for(const M of c.getState())if(k.add(M.id),M.rdns){const H=typeof M.rdns=="string"?[M.rdns]:M.rdns;for(const j of H)P.add(j)}const U=[];for(const M of I){if(P.has(M.info.rdns))continue;const H=l(u(M));k.has(H.id)||U.push(H)}n&&!m.persist.hasHydrated()||c.setState(M=>[...M,...U],!0)});function w(I){m.setState(k=>{const P=k.connections.get(I.uid);return P?{...k,connections:new Map(k.connections).set(I.uid,{accounts:I.accounts??P.accounts,chainId:I.chainId??P.chainId,connector:P.connector})}:k})}function C(I){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(k=>{const P=c.getState().find(U=>U.uid===I.uid);return P?(P.emitter.listenerCount("connect")&&P.emitter.off("connect",w),P.emitter.listenerCount("change")||P.emitter.on("change",w),P.emitter.listenerCount("disconnect")||P.emitter.on("disconnect",N),{...k,connections:new Map(k.connections).set(I.uid,{accounts:I.accounts,chainId:I.chainId,connector:P}),current:I.uid,status:"connected"}):k})}function N(I){m.setState(k=>{const P=k.connections.get(I.uid);if(P){const M=P.connector;M.emitter.listenerCount("change")&&P.connector.emitter.off("change",w),M.emitter.listenerCount("disconnect")&&P.connector.emitter.off("disconnect",N),M.emitter.listenerCount("connect")||P.connector.emitter.on("connect",C)}if(k.connections.delete(I.uid),k.connections.size===0)return{...k,connections:new Map,current:null,status:"disconnected"};const U=k.connections.values().next().value;return{...k,connections:new Map(k.connections),current:U.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return m.getState()},setState(I){let k;typeof I=="function"?k=I(m.getState()):k=I;const P=f();typeof k!="object"&&(k=P),Object.keys(P).some(M=>!(M in k))&&(k=P),m.setState(k,!0)},subscribe(I,k,P){return m.subscribe(I,k,P?{...P,fireImmediately:P.emitImmediately}:void 0)},_internal:{mipd:o,store:m,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(I){const k=typeof I=="function"?I(a.getState()):I;if(k.length!==0)return a.setState(k,!0)},subscribe(I){return a.subscribe(I)}},connectors:{providerDetailToConnector:u,setup:l,setState(I){return c.setState(typeof I=="function"?I(c.getState()):I,!0)},subscribe(I){return c.subscribe(I)}},events:{change:w,connect:C,disconnect:N}}}}function C_e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?j5(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function __e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=C_e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=G.useRef(!0);return G.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const Pte=G.createContext(void 0);function A_e(t){const{children:e,config:n}=t,r={value:n};return G.createElement(__e,t,G.createElement(Pte.Provider,r,e))}const S_e="2.15.6",I_e=()=>`wagmi@${S_e}`;let N_e=class extends zf{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return I_e()}};class x_e extends N_e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function pc(t={}){const e=t.config??G.useContext(Pte);if(!e)throw new x_e;return e}function T_e(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var Ote={exports:{}},Dte={},Mte={exports:{}},Bte={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE=G;function R_e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var k_e=typeof Object.is=="function"?Object.is:R_e,P_e=jE.useState,O_e=jE.useEffect,D_e=jE.useLayoutEffect,M_e=jE.useDebugValue;function B_e(t,e){var n=e(),r=P_e({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return D_e(function(){s.value=n,s.getSnapshot=e,ND(s)&&i({inst:s})},[t,n,e]),O_e(function(){return ND(s)&&i({inst:s}),t(function(){ND(s)&&i({inst:s})})},[t]),M_e(n),n}function ND(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!k_e(t,n)}catch{return!0}}function U_e(t,e){return e()}var L_e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?U_e:B_e;Bte.useSyncExternalStore=jE.useSyncExternalStore!==void 0?jE.useSyncExternalStore:L_e;Mte.exports=Bte;var Ute=Mte.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2=G,$_e=Ute;function F_e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var j_e=typeof Object.is=="function"?Object.is:F_e,W_e=$_e.useSyncExternalStore,z_e=Q2.useRef,H_e=Q2.useEffect,G_e=Q2.useMemo,q_e=Q2.useDebugValue;Dte.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=z_e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=G_e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,j_e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=W_e(t,i[0],i[1]);return H_e(function(){o.hasValue=!0,o.value=a},[a]),q_e(a),a};Ote.exports=Dte;var Lte=Ote.exports;const xD=t=>typeof t=="object"&&!Array.isArray(t);function V_e(t,e,n=e,r=cm){const s=G.useRef([]),i=Lte.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(xD(o)&&xD(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return G.useMemo(()=>{if(xD(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function kC(t={}){const e=pc(t);return V_e(n=>Ste(e,{onChange:n}),()=>cv(e))}var PC=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},D0=typeof window>"u"||"Deno"in globalThis;function na(){}function K_e(t,e){return typeof t=="function"?t(e):t}function G5(t){return typeof t=="number"&&t>=0&&t!==1/0}function $te(t,e){return Math.max(t+(e||0)-Date.now(),0)}function zg(t,e){return typeof t=="function"?t(e):t}function Il(t,e){return typeof t=="function"?t(e):t}function K7(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==z$(o,e.options))return!1}else if(!YA(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Y7(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(M0(e.options.mutationKey)!==M0(i))return!1}else if(!YA(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function z$(t,e){return((e==null?void 0:e.queryKeyHashFn)||M0)(t)}function M0(t){return JSON.stringify(t,(e,n)=>q5(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function YA(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>YA(t[n],e[n])):!1}function H$(t,e){if(t===e)return t;const n=Q7(t)&&Q7(e);if(n||q5(t)&&q5(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=H$(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function GR(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Q7(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function q5(t){if(!J7(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!J7(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function J7(t){return Object.prototype.toString.call(t)==="[object Object]"}function Y_e(t){return new Promise(e=>{setTimeout(e,t)})}function V5(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?H$(t,e):e}function Q_e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function J_e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var G$=Symbol();function Fte(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===G$?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function jte(t,e){return typeof t=="function"?t(...e):!!t}var Ry,Wp,Cv,BK,Z_e=(BK=class extends PC{constructor(){super();re(this,Ry);re(this,Wp);re(this,Cv);q(this,Cv,e=>{if(!D0&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){R(this,Wp)||this.setEventListener(R(this,Cv))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,Wp))==null||e.call(this),q(this,Wp,void 0))}setEventListener(e){var n;q(this,Cv,e),(n=R(this,Wp))==null||n.call(this),q(this,Wp,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){R(this,Ry)!==e&&(q(this,Ry,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof R(this,Ry)=="boolean"?R(this,Ry):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ry=new WeakMap,Wp=new WeakMap,Cv=new WeakMap,BK),q$=new Z_e,_v,zp,Av,UK,X_e=(UK=class extends PC{constructor(){super();re(this,_v,!0);re(this,zp);re(this,Av);q(this,Av,e=>{if(!D0&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){R(this,zp)||this.setEventListener(R(this,Av))}onUnsubscribe(){var e;this.hasListeners()||((e=R(this,zp))==null||e.call(this),q(this,zp,void 0))}setEventListener(e){var n;q(this,Av,e),(n=R(this,zp))==null||n.call(this),q(this,zp,e(this.setOnline.bind(this)))}setOnline(e){R(this,_v)!==e&&(q(this,_v,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return R(this,_v)}},_v=new WeakMap,zp=new WeakMap,Av=new WeakMap,UK),qR=new X_e;function K5(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function eAe(t){return Math.min(1e3*2**t,3e4)}function Wte(t){return(t??"online")==="online"?qR.isOnline():!0}var zte=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function TD(t){return t instanceof zte}function Hte(t){let e=!1,n=0,r=!1,s;const i=K5(),o=g=>{var m;r||(h(new zte(g)),(m=t.abort)==null||m.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>q$.isFocused()&&(t.networkMode==="always"||qR.isOnline())&&t.canRun(),u=()=>Wte(t.networkMode)&&t.canRun(),d=g=>{var m;r||(r=!0,(m=t.onSuccess)==null||m.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var m;r||(r=!0,(m=t.onError)==null||m.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var m;s=y=>{(r||l())&&g(y)},(m=t.onPause)==null||m.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const m=n===0?t.initialPromise:void 0;try{g=m??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var k;if(r)return;const w=t.retry??(D0?0:3),C=t.retryDelay??eAe,N=typeof C=="function"?C(n,y):C,I=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(e||!I){h(y);return}n++,(k=t.onFail)==null||k.call(t,n,y),Y_e(N).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var tAe=t=>setTimeout(t,0);function nAe(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=tAe;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var wi=nAe(),ky,LK,Gte=(LK=class{constructor(){re(this,ky)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),G5(this.gcTime)&&q(this,ky,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(D0?1/0:5*60*1e3))}clearGcTimeout(){R(this,ky)&&(clearTimeout(R(this,ky)),q(this,ky,void 0))}},ky=new WeakMap,LK),Sv,Py,bl,Oy,Po,VS,Dy,du,Oh,$K,rAe=($K=class extends Gte{constructor(e){super();re(this,du);re(this,Sv);re(this,Py);re(this,bl);re(this,Oy);re(this,Po);re(this,VS);re(this,Dy);q(this,Dy,!1),q(this,VS,e.defaultOptions),this.setOptions(e.options),this.observers=[],q(this,Oy,e.client),q(this,bl,R(this,Oy).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,q(this,Sv,sAe(this.options)),this.state=e.state??R(this,Sv),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=R(this,Po))==null?void 0:e.promise}setOptions(e){this.options={...R(this,VS),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&R(this,bl).remove(this)}setData(e,n){const r=V5(this.state.data,e,this.options);return Ae(this,du,Oh).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ae(this,du,Oh).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=R(this,Po))==null?void 0:r.promise;return(s=R(this,Po))==null||s.cancel(e),n?n.then(na).catch(na):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(R(this,Sv))}isActive(){return this.observers.some(e=>Il(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===G$||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>zg(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!$te(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=R(this,Po))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=R(this,Po))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),R(this,bl).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(R(this,Po)&&(R(this,Dy)?R(this,Po).cancel({revert:!0}):R(this,Po).cancelRetry()),this.scheduleGc()),R(this,bl).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ae(this,du,Oh).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(R(this,Po))return R(this,Po).continueRetry(),R(this,Po).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(q(this,Dy,!0),r.signal)})},i=()=>{const h=Fte(this.options,n),p=(()=>{const g={client:R(this,Oy),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return q(this,Dy,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:R(this,Oy),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),q(this,Py,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ae(this,du,Oh).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,m;TD(h)&&h.silent||Ae(this,du,Oh).call(this,{type:"error",error:h}),TD(h)||((p=(f=R(this,bl).config).onError)==null||p.call(f,h,this),(m=(g=R(this,bl).config).onSettled)==null||m.call(g,this.state.data,h,this)),this.scheduleGc()};return q(this,Po,Hte({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,m;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=R(this,bl).config).onSuccess)==null||p.call(f,h,this),(m=(g=R(this,bl).config).onSettled)==null||m.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{Ae(this,du,Oh).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{Ae(this,du,Oh).call(this,{type:"pause"})},onContinue:()=>{Ae(this,du,Oh).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),R(this,Po).start()}},Sv=new WeakMap,Py=new WeakMap,bl=new WeakMap,Oy=new WeakMap,Po=new WeakMap,VS=new WeakMap,Dy=new WeakMap,du=new WeakSet,Oh=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...qte(r.data,this.options),fetchMeta:e.meta??null};case"success":return q(this,Py,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return TD(s)&&s.revert&&R(this,Py)?{...R(this,Py),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),wi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),R(this,bl).notify({query:this,type:"updated",action:e})})},$K);function qte(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Wte(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function sAe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var fd,FK,iAe=(FK=class extends PC{constructor(e={}){super();re(this,fd);this.config=e,q(this,fd,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??z$(s,n);let o=this.get(i);return o||(o=new rAe({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){R(this,fd).has(e.queryHash)||(R(this,fd).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=R(this,fd).get(e.queryHash);n&&(e.destroy(),n===e&&R(this,fd).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){wi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return R(this,fd).get(e)}getAll(){return[...R(this,fd).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>K7(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>K7(e,r)):n}notify(e){wi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){wi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){wi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},fd=new WeakMap,FK),pd,Jo,My,gd,Sp,jK,oAe=(jK=class extends Gte{constructor(e){super();re(this,gd);re(this,pd);re(this,Jo);re(this,My);this.mutationId=e.mutationId,q(this,Jo,e.mutationCache),q(this,pd,[]),this.state=e.state||Vte(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){R(this,pd).includes(e)||(R(this,pd).push(e),this.clearGcTimeout(),R(this,Jo).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){q(this,pd,R(this,pd).filter(n=>n!==e)),this.scheduleGc(),R(this,Jo).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){R(this,pd).length||(this.state.status==="pending"?this.scheduleGc():R(this,Jo).remove(this))}continue(){var e;return((e=R(this,My))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,m,y,w,C,N,I,k,P,U;const n=()=>{Ae(this,gd,Sp).call(this,{type:"continue"})};q(this,My,Hte({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,H)=>{Ae(this,gd,Sp).call(this,{type:"failed",failureCount:M,error:H})},onPause:()=>{Ae(this,gd,Sp).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>R(this,Jo).canRun(this)}));const r=this.state.status==="pending",s=!R(this,My).canStart();try{if(r)n();else{Ae(this,gd,Sp).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=R(this,Jo).config).onMutate)==null?void 0:o.call(i,e,this));const H=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));H!==this.state.context&&Ae(this,gd,Sp).call(this,{type:"pending",context:H,variables:e,isPaused:s})}const M=await R(this,My).start();return await((u=(l=R(this,Jo).config).onSuccess)==null?void 0:u.call(l,M,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,M,e,this.state.context)),await((p=(f=R(this,Jo).config).onSettled)==null?void 0:p.call(f,M,null,this.state.variables,this.state.context,this)),await((m=(g=this.options).onSettled)==null?void 0:m.call(g,M,null,e,this.state.context)),Ae(this,gd,Sp).call(this,{type:"success",data:M}),M}catch(M){try{throw await((w=(y=R(this,Jo).config).onError)==null?void 0:w.call(y,M,e,this.state.context,this)),await((N=(C=this.options).onError)==null?void 0:N.call(C,M,e,this.state.context)),await((k=(I=R(this,Jo).config).onSettled)==null?void 0:k.call(I,void 0,M,this.state.variables,this.state.context,this)),await((U=(P=this.options).onSettled)==null?void 0:U.call(P,void 0,M,e,this.state.context)),M}finally{Ae(this,gd,Sp).call(this,{type:"error",error:M})}}finally{R(this,Jo).runNext(this)}}},pd=new WeakMap,Jo=new WeakMap,My=new WeakMap,gd=new WeakSet,Sp=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),wi.batch(()=>{R(this,pd).forEach(r=>{r.onMutationUpdate(e)}),R(this,Jo).notify({mutation:this,type:"updated",action:e})})},jK);function Vte(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zh,hu,KS,WK,aAe=(WK=class extends PC{constructor(e={}){super();re(this,zh);re(this,hu);re(this,KS);this.config=e,q(this,zh,new Set),q(this,hu,new Map),q(this,KS,0)}build(e,n,r){const s=new oAe({mutationCache:this,mutationId:++Zf(this,KS)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){R(this,zh).add(e);const n=YN(e);if(typeof n=="string"){const r=R(this,hu).get(n);r?r.push(e):R(this,hu).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(R(this,zh).delete(e)){const n=YN(e);if(typeof n=="string"){const r=R(this,hu).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&R(this,hu).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=YN(e);if(typeof n=="string"){const r=R(this,hu).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=YN(e);if(typeof n=="string"){const s=(r=R(this,hu).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){wi.batch(()=>{R(this,zh).forEach(e=>{this.notify({type:"removed",mutation:e})}),R(this,zh).clear(),R(this,hu).clear()})}getAll(){return Array.from(R(this,zh))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Y7(n,r))}findAll(e={}){return this.getAll().filter(n=>Y7(e,n))}notify(e){wi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return wi.batch(()=>Promise.all(e.map(n=>n.continue().catch(na))))}},zh=new WeakMap,hu=new WeakMap,KS=new WeakMap,WK);function YN(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Z7(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const m=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=Fte(e.options,e.fetchOptions),w=async(C,N,I)=>{if(g)return Promise.reject();if(N==null&&C.pages.length)return Promise.resolve(C);const P=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:N,direction:I?"backward":"forward",meta:e.options.meta};return m(j),j})(),U=await y(P),{maxPages:M}=e.options,H=I?J_e:Q_e;return{pages:H(C.pages,U,M),pageParams:H(C.pageParams,N,M)}};if(s&&i.length){const C=s==="backward",N=C?cAe:X7,I={pages:i,pageParams:o},k=N(r,I);a=await w(I,k,C)}else{const C=t??i.length;do{const N=c===0?o[0]??r.initialPageParam:X7(r,a);if(c>0&&N==null)break;a=await w(a,N),c++}while(c<C)}return a};e.options.persister?e.fetchFn=()=>{var g,m;return(m=(g=e.options).persister)==null?void 0:m.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function X7(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function cAe(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var js,Hp,Gp,Iv,Nv,qp,xv,Tv,zK,lAe=(zK=class{constructor(t={}){re(this,js);re(this,Hp);re(this,Gp);re(this,Iv);re(this,Nv);re(this,qp);re(this,xv);re(this,Tv);q(this,js,t.queryCache||new iAe),q(this,Hp,t.mutationCache||new aAe),q(this,Gp,t.defaultOptions||{}),q(this,Iv,new Map),q(this,Nv,new Map),q(this,qp,0)}mount(){Zf(this,qp)._++,R(this,qp)===1&&(q(this,xv,q$.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,js).onFocus())})),q(this,Tv,qR.subscribe(async t=>{t&&(await this.resumePausedMutations(),R(this,js).onOnline())})))}unmount(){var t,e;Zf(this,qp)._--,R(this,qp)===0&&((t=R(this,xv))==null||t.call(this),q(this,xv,void 0),(e=R(this,Tv))==null||e.call(this),q(this,Tv,void 0))}isFetching(t){return R(this,js).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return R(this,Hp).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=R(this,js).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=R(this,js).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(zg(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return R(this,js).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=R(this,js).get(r.queryHash),i=s==null?void 0:s.state.data,o=K_e(e,i);if(o!==void 0)return R(this,js).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return wi.batch(()=>R(this,js).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=R(this,js).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=R(this,js);wi.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=R(this,js);return wi.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=wi.batch(()=>R(this,js).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(na).catch(na)}invalidateQueries(t,e={}){return wi.batch(()=>(R(this,js).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=wi.batch(()=>R(this,js).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(na)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(na)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=R(this,js).build(this,e);return n.isStaleByTime(zg(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(na).catch(na)}fetchInfiniteQuery(t){return t.behavior=Z7(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(na).catch(na)}ensureInfiniteQueryData(t){return t.behavior=Z7(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return qR.isOnline()?R(this,Hp).resumePausedMutations():Promise.resolve()}getQueryCache(){return R(this,js)}getMutationCache(){return R(this,Hp)}getDefaultOptions(){return R(this,Gp)}setDefaultOptions(t){q(this,Gp,t)}setQueryDefaults(t,e){R(this,Iv).set(M0(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...R(this,Iv).values()],n={};return e.forEach(r=>{YA(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){R(this,Nv).set(M0(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...R(this,Nv).values()],n={};return e.forEach(r=>{YA(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...R(this,Gp).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=z$(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===G$&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...R(this,Gp).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){R(this,js).clear(),R(this,Hp).clear()}},js=new WeakMap,Hp=new WeakMap,Gp=new WeakMap,Iv=new WeakMap,Nv=new WeakMap,qp=new WeakMap,xv=new WeakMap,Tv=new WeakMap,zK),$a,Yn,YS,Zo,By,Rv,Vp,Kp,QS,kv,Pv,Uy,Ly,Yp,Ov,xr,Y1,Y5,Q5,J5,Z5,X5,eU,tU,Kte,HK,uAe=(HK=class extends PC{constructor(e,n){super();re(this,xr);re(this,$a);re(this,Yn);re(this,YS);re(this,Zo);re(this,By);re(this,Rv);re(this,Vp);re(this,Kp);re(this,QS);re(this,kv);re(this,Pv);re(this,Uy);re(this,Ly);re(this,Yp);re(this,Ov,new Set);this.options=n,q(this,$a,e),q(this,Kp,null),q(this,Vp,K5()),this.options.experimental_prefetchInRender||R(this,Vp).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(R(this,Yn).addObserver(this),eW(R(this,Yn),this.options)?Ae(this,xr,Y1).call(this):this.updateResult(),Ae(this,xr,Z5).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nU(R(this,Yn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nU(R(this,Yn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ae(this,xr,X5).call(this),Ae(this,xr,eU).call(this),R(this,Yn).removeObserver(this)}setOptions(e){const n=this.options,r=R(this,Yn);if(this.options=R(this,$a).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Il(this.options.enabled,R(this,Yn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ae(this,xr,tU).call(this),R(this,Yn).setOptions(this.options),n._defaulted&&!GR(this.options,n)&&R(this,$a).getQueryCache().notify({type:"observerOptionsUpdated",query:R(this,Yn),observer:this});const s=this.hasListeners();s&&tW(R(this,Yn),r,this.options,n)&&Ae(this,xr,Y1).call(this),this.updateResult(),s&&(R(this,Yn)!==r||Il(this.options.enabled,R(this,Yn))!==Il(n.enabled,R(this,Yn))||zg(this.options.staleTime,R(this,Yn))!==zg(n.staleTime,R(this,Yn)))&&Ae(this,xr,Y5).call(this);const i=Ae(this,xr,Q5).call(this);s&&(R(this,Yn)!==r||Il(this.options.enabled,R(this,Yn))!==Il(n.enabled,R(this,Yn))||i!==R(this,Yp))&&Ae(this,xr,J5).call(this,i)}getOptimisticResult(e){const n=R(this,$a).getQueryCache().build(R(this,$a),e),r=this.createResult(n,e);return hAe(this,r)&&(q(this,Zo,r),q(this,Rv,this.options),q(this,By,R(this,Yn).state)),r}getCurrentResult(){return R(this,Zo)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){R(this,Ov).add(e)}getCurrentQuery(){return R(this,Yn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=R(this,$a).defaultQueryOptions(e),r=R(this,$a).getQueryCache().build(R(this,$a),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ae(this,xr,Y1).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),R(this,Zo)))}createResult(e,n){var M;const r=R(this,Yn),s=this.options,i=R(this,Zo),o=R(this,By),a=R(this,Rv),l=e!==r?e.state:R(this,YS),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const H=this.hasListeners(),j=!H&&eW(e,n),K=H&&tW(e,r,n,s);(j||K)&&(d={...d,...qte(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:m}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&m==="pending"){let H;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(H=i.data,y=!0):H=typeof n.placeholderData=="function"?n.placeholderData((M=R(this,Pv))==null?void 0:M.state.data,R(this,Pv)):n.placeholderData,H!==void 0&&(m="success",f=V5(i==null?void 0:i.data,H,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===R(this,QS))f=R(this,kv);else try{q(this,QS,n.select),f=n.select(f),f=V5(i==null?void 0:i.data,f,n),q(this,kv,f),q(this,Kp,null)}catch(H){q(this,Kp,H)}R(this,Kp)&&(p=R(this,Kp),f=R(this,kv),g=Date.now(),m="error");const w=d.fetchStatus==="fetching",C=m==="pending",N=m==="error",I=C&&w,k=f!==void 0,U={status:m,fetchStatus:d.fetchStatus,isPending:C,isSuccess:m==="success",isError:N,isInitialLoading:I,isLoading:I,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!C,isLoadingError:N&&!k,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:N&&k,isStale:V$(e,n),refetch:this.refetch,promise:R(this,Vp),isEnabled:Il(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const H=$=>{U.status==="error"?$.reject(U.error):U.data!==void 0&&$.resolve(U.data)},j=()=>{const $=q(this,Vp,U.promise=K5());H($)},K=R(this,Vp);switch(K.status){case"pending":e.queryHash===r.queryHash&&H(K);break;case"fulfilled":(U.status==="error"||U.data!==K.value)&&j();break;case"rejected":(U.status!=="error"||U.error!==K.reason)&&j();break}}return U}updateResult(){const e=R(this,Zo),n=this.createResult(R(this,Yn),this.options);if(q(this,By,R(this,Yn).state),q(this,Rv,this.options),R(this,By).data!==void 0&&q(this,Pv,R(this,Yn)),GR(n,e))return;q(this,Zo,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!R(this,Ov).size)return!0;const o=new Set(i??R(this,Ov));return this.options.throwOnError&&o.add("error"),Object.keys(R(this,Zo)).some(a=>{const c=a;return R(this,Zo)[c]!==e[c]&&o.has(c)})};Ae(this,xr,Kte).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ae(this,xr,Z5).call(this)}},$a=new WeakMap,Yn=new WeakMap,YS=new WeakMap,Zo=new WeakMap,By=new WeakMap,Rv=new WeakMap,Vp=new WeakMap,Kp=new WeakMap,QS=new WeakMap,kv=new WeakMap,Pv=new WeakMap,Uy=new WeakMap,Ly=new WeakMap,Yp=new WeakMap,Ov=new WeakMap,xr=new WeakSet,Y1=function(e){Ae(this,xr,tU).call(this);let n=R(this,Yn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(na)),n},Y5=function(){Ae(this,xr,X5).call(this);const e=zg(this.options.staleTime,R(this,Yn));if(D0||R(this,Zo).isStale||!G5(e))return;const r=$te(R(this,Zo).dataUpdatedAt,e)+1;q(this,Uy,setTimeout(()=>{R(this,Zo).isStale||this.updateResult()},r))},Q5=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(R(this,Yn)):this.options.refetchInterval)??!1},J5=function(e){Ae(this,xr,eU).call(this),q(this,Yp,e),!(D0||Il(this.options.enabled,R(this,Yn))===!1||!G5(R(this,Yp))||R(this,Yp)===0)&&q(this,Ly,setInterval(()=>{(this.options.refetchIntervalInBackground||q$.isFocused())&&Ae(this,xr,Y1).call(this)},R(this,Yp)))},Z5=function(){Ae(this,xr,Y5).call(this),Ae(this,xr,J5).call(this,Ae(this,xr,Q5).call(this))},X5=function(){R(this,Uy)&&(clearTimeout(R(this,Uy)),q(this,Uy,void 0))},eU=function(){R(this,Ly)&&(clearInterval(R(this,Ly)),q(this,Ly,void 0))},tU=function(){const e=R(this,$a).getQueryCache().build(R(this,$a),this.options);if(e===R(this,Yn))return;const n=R(this,Yn);q(this,Yn,e),q(this,YS,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},Kte=function(e){wi.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(R(this,Zo))}),R(this,$a).getQueryCache().notify({query:R(this,Yn),type:"observerResultsUpdated"})})},HK);function dAe(t,e){return Il(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function eW(t,e){return dAe(t,e)||t.state.data!==void 0&&nU(t,e,e.refetchOnMount)}function nU(t,e,n){if(Il(e.enabled,t)!==!1&&zg(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&V$(t,e)}return!1}function tW(t,e,n,r){return(t!==e||Il(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&V$(t,n)}function V$(t,e){return Il(e.enabled,t)!==!1&&t.isStaleByTime(zg(e.staleTime,t))}function hAe(t,e){return!GR(t.getCurrentResult(),e)}var Qp,Jp,Fa,Hh,Af,hT,rU,GK,fAe=(GK=class extends PC{constructor(n,r){super();re(this,Af);re(this,Qp);re(this,Jp);re(this,Fa);re(this,Hh);q(this,Qp,n),this.setOptions(r),this.bindMethods(),Ae(this,Af,hT).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=R(this,Qp).defaultMutationOptions(n),GR(this.options,r)||R(this,Qp).getMutationCache().notify({type:"observerOptionsUpdated",mutation:R(this,Fa),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&M0(r.mutationKey)!==M0(this.options.mutationKey)?this.reset():((s=R(this,Fa))==null?void 0:s.state.status)==="pending"&&R(this,Fa).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=R(this,Fa))==null||n.removeObserver(this)}onMutationUpdate(n){Ae(this,Af,hT).call(this),Ae(this,Af,rU).call(this,n)}getCurrentResult(){return R(this,Jp)}reset(){var n;(n=R(this,Fa))==null||n.removeObserver(this),q(this,Fa,void 0),Ae(this,Af,hT).call(this),Ae(this,Af,rU).call(this)}mutate(n,r){var s;return q(this,Hh,r),(s=R(this,Fa))==null||s.removeObserver(this),q(this,Fa,R(this,Qp).getMutationCache().build(R(this,Qp),this.options)),R(this,Fa).addObserver(this),R(this,Fa).execute(n)}},Qp=new WeakMap,Jp=new WeakMap,Fa=new WeakMap,Hh=new WeakMap,Af=new WeakSet,hT=function(){var r;const n=((r=R(this,Fa))==null?void 0:r.state)??Vte();q(this,Jp,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},rU=function(n){wi.batch(()=>{var r,s,i,o,a,c,l,u;if(R(this,Hh)&&this.hasListeners()){const d=R(this,Jp).variables,h=R(this,Jp).context;(n==null?void 0:n.type)==="success"?((s=(r=R(this,Hh)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=R(this,Hh)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=R(this,Hh)).onError)==null||c.call(a,n.error,d,h),(u=(l=R(this,Hh)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(R(this,Jp))})})},GK);function pAe(t,e){return H$(t,e)}function gAe(t){return JSON.stringify(t,(e,n)=>mAe(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function mAe(t){if(!nW(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!nW(n)||!n.hasOwnProperty("isPrototypeOf"))}function nW(t){return Object.prototype.toString.call(t)==="[object Object]"}function J2(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:m,getNextPageParam:y,initialPageParam:w,_optimisticResults:C,enabled:N,notifyOnChangeProps:I,placeholderData:k,refetchInterval:P,refetchIntervalInBackground:U,refetchOnMount:M,refetchOnReconnect:H,refetchOnWindowFocus:j,retryOnMount:K,select:$,staleTime:v,suspense:E,throwOnError:_,config:D,connector:x,query:B,...W}=t;return W}function yAe(t){return{mutationFn(e){return uT(t,e)},mutationKey:["connect"]}}function wAe(t){return{mutationFn(e){return $5(t,e)},mutationKey:["disconnect"]}}function bAe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return Y1e(t,{...i,address:r})},queryKey:vAe(e)}}function vAe(t={}){return["ensName",J2(t)]}function EAe(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Q1e(t,{...o,connector:r})},queryKey:CAe(e)}}function CAe(t={}){const{connector:e,...n}=t;return["walletClient",{...J2(n),connectorUid:e==null?void 0:e.uid}]}function _Ae(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return Ate(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:AAe(e)}}function AAe(t={}){const{abi:e,...n}=t;return["readContract",J2(n)]}function SAe(t){return{mutationFn(e){return W5(t,e)},mutationKey:["switchChain"]}}function IAe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return xte(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:NAe(e)}}function NAe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",J2(n)]}function xAe(t){return{mutationFn(e){return Tte(t,e)},mutationKey:["writeContract"]}}var Yte=G.createContext(void 0),K$=t=>{const e=G.useContext(Yte);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},TAe=({client:t,children:e})=>(G.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),b.jsx(Yte.Provider,{value:t,children:e})),Qte=G.createContext(!1),RAe=()=>G.useContext(Qte);Qte.Provider;function kAe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var PAe=G.createContext(kAe()),OAe=()=>G.useContext(PAe),DAe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},MAe=t=>{G.useEffect(()=>{t.clearReset()},[t])},BAe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||jte(n,[t.error,r])),UAe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},LAe=(t,e)=>t.isLoading&&t.isFetching&&!e,$Ae=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,rW=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function FAe(t,e,n){var d,h,f,p,g;const r=RAe(),s=OAe(),i=K$(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",UAe(o),DAe(o,s),MAe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=G.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(G.useSyncExternalStore(G.useCallback(m=>{const y=u?c.subscribe(wi.batchCalls(m)):na;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),G.useEffect(()=>{c.setOptions(o)},[o,c]),$Ae(o,l))throw rW(o,c,s);if(BAe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!D0&&LAe(l,r)){const m=a?rW(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;m==null||m.catch(na).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function jAe(t,e){return FAe(t,uAe)}function Z2(t,e){const n=K$(),[r]=G.useState(()=>new fAe(n,t));G.useEffect(()=>{r.setOptions(t)},[r,t]);const s=G.useSyncExternalStore(G.useCallback(o=>r.subscribe(wi.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=G.useCallback((o,a)=>{r.mutate(o,a).catch(na)},[r]);if(s.error&&jte(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function X2(t){const e=jAe({...t,queryKeyHashFn:gAe});return e.queryKey=t.queryKey,e}function BI(t={}){const e=pc(t);return G.useSyncExternalStore(n=>t_e(e,{onChange:n}),()=>W7(e),()=>W7(e))}function WAe(t={}){const e=pc(t);return G.useSyncExternalStore(n=>T_e(e,{onChange:n}),()=>z7(e),()=>z7(e))}function zAe(t={}){const e=pc(t);return G.useSyncExternalStore(n=>Nte(e,{onChange:n}),()=>H7(e),()=>H7(e))}function Jte(t={}){const{mutation:e}=t,n=pc(t),r=yAe(n),{mutate:s,mutateAsync:i,...o}=Z2({...e,...r});return G.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:zAe({config:n})}}function HAe(t={}){const e=pc(t);return G.useSyncExternalStore(n=>Ite(e,{onChange:n}),()=>lu(e),()=>lu(e))}function Zte(t={}){const{mutation:e}=t,n=pc(t),r=wAe(n),{mutate:s,mutateAsync:i,...o}=Z2({...e,...r});return{...o,connectors:HAe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function Xte(t={}){const{address:e,query:n={}}=t,r=pc(t),s=BI({config:r}),i=bAe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return X2({...n,...i,enabled:o})}function GAe(t={}){const e=pc(t);return Lte.useSyncExternalStoreWithSelector(n=>r_e(e,{onChange:n}),()=>F5(e,t),()=>F5(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function sU(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=pc(t),a=BI({config:o}),c=_Ae(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return X2({...s,...c,enabled:l,structuralSharing:s.structuralSharing??pAe})}function qAe(t={}){const{mutation:e}=t,n=pc(t),r=SAe(n),{mutate:s,mutateAsync:i,...o}=Z2({...e,...r});return{...o,chains:WAe({config:n}),switchChain:s,switchChainAsync:i}}function ene(t={}){const{query:e={},...n}=t,r=pc(n),s=K$(),{address:i,connector:o,status:a}=kC({config:r}),c=BI({config:r}),l=t.connector??o,{queryKey:u,...d}=EAe(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=G.useRef(i);return G.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),X2({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function QN(t={}){const{hash:e,query:n={}}=t,r=pc(t),s=BI({config:r}),i=IAe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return X2({...n,...i,enabled:o})}function JN(t={}){const{mutation:e}=t,n=pc(t),r=xAe(n),{mutate:s,mutateAsync:i,...o}=Z2({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const VAe="_verified_lvyh0_1",Y$={verified:VAe},KAe=()=>b.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:Y$.verified,children:b.jsx("g",{children:b.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),YAe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:Y$.verified,children:b.jsxs("g",{children:[b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[b.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),b.jsx("stop",{offset:".539",stopColor:"#cd8105"}),b.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),b.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),b.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[b.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),b.jsx("stop",{offset:".406",stopColor:"#e2b719"}),b.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),b.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[b.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),b.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),b.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),QAe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:Y$.verified,children:b.jsx("g",{children:b.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function tne(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=tne(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Hg(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=tne(t))&&(r&&(r+=" "),r+=e);return r}const JAe="_root_98iqw_1",ZAe="_article_98iqw_21",sW={root:JAe,article:ZAe},Q$=({className:t,children:e})=>b.jsx("div",{className:Hg("react-tweet-theme",sW.root,t),children:b.jsx("article",{className:sW.article,children:e})}),nne=t=>b.jsx("img",{...t}),XAe="_header_nqq4j_1",eSe="_avatar_nqq4j_11",tSe="_avatarOverflow_nqq4j_16",nSe="_avatarSquare_nqq4j_23",rSe="_avatarShadow_nqq4j_26",sSe="_author_nqq4j_37",iSe="_authorLink_nqq4j_44",oSe="_authorVerified_nqq4j_53",aSe="_authorLinkText_nqq4j_56",cSe="_authorMeta_nqq4j_63",lSe="_authorFollow_nqq4j_66",uSe="_username_nqq4j_69",dSe="_follow_nqq4j_74",hSe="_separator_nqq4j_82",fSe="_brand_nqq4j_86",pSe="_twitterIcon_nqq4j_90",qi={header:XAe,avatar:eSe,avatarOverflow:tSe,avatarSquare:nSe,avatarShadow:rSe,author:sSe,authorLink:iSe,authorVerified:oSe,authorLinkText:aSe,authorMeta:cSe,authorFollow:lSe,username:uSe,follow:dSe,separator:hSe,brand:fSe,twitterIcon:pSe},gSe="_verifiedOld_lcna5_1",mSe="_verifiedBlue_lcna5_4",ySe="_verifiedGovernment_lcna5_7",RD={verifiedOld:gSe,verifiedBlue:mSe,verifiedGovernment:ySe},rne=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=b.jsx(KAe,{}),s=RD.verifiedBlue;if(n)switch(t.is_blue_verified||(s=RD.verifiedOld),t.verified_type){case"Government":r=b.jsx(QAe,{}),s=RD.verifiedGovernment;break;case"Business":r=b.jsx(YAe,{}),s=null;break}return n?b.jsx("div",{className:Hg(e,s),children:r}):null},wSe=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:nne,{user:s}=t;return b.jsxs("div",{className:qi.header,children:[b.jsxs("a",{href:t.url,className:qi.avatar,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:Hg(qi.avatarOverflow,s.profile_image_shape==="Square"&&qi.avatarSquare),children:b.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),b.jsx("div",{className:qi.avatarOverflow,children:b.jsx("div",{className:qi.avatarShadow})})]}),b.jsxs("div",{className:qi.author,children:[b.jsxs("a",{href:t.url,className:qi.authorLink,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:qi.authorLinkText,children:b.jsx("span",{title:s.name,children:s.name})}),b.jsx(rne,{user:s,className:qi.authorVerified})]}),b.jsxs("div",{className:qi.authorMeta,children:[b.jsx("a",{href:t.url,className:qi.username,target:"_blank",rel:"noopener noreferrer",children:b.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),b.jsxs("div",{className:qi.authorFollow,children:[b.jsx("span",{className:qi.separator,children:""}),b.jsx("a",{href:s.follow_url,className:qi.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),b.jsx("a",{href:t.url,className:qi.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:qi.twitterIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},bSe="_root_1ec15_1",vSe={root:bSe},ESe=({tweet:t})=>b.jsxs("a",{href:t.in_reply_to_url,className:vSe.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),CSe="_root_eihfa_1",_Se={root:CSe},ASe=({href:t,children:e})=>b.jsx("a",{href:t,className:_Se.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),SSe="_root_1xq52_1",ISe={root:SSe},NSe=({tweet:t})=>b.jsx("p",{className:ISe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return b.jsx(ASe,{href:e.href,children:e.text},n);case"media":return;default:return b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),iW=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,sne=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,xSe=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,TSe=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,RSe=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,kSe=t=>`https://x.com/hashtag/${t.text}`,PSe=t=>`https://x.com/search?q=%24${t.text}`,OSe=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,ine=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},DSe=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},MSe=t=>{const e=DSe(t);return e.length>1?e[1]:e[0]},iU=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function oW(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return m1(n,"hashtag",t.entities.hashtags),m1(n,"mention",t.entities.user_mentions),m1(n,"url",t.entities.urls),m1(n,"symbol",t.entities.symbols),t.entities.media&&m1(n,"media",t.entities.media),BSe(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:kSe(r),text:s});case"mention":return Object.assign(r,{href:sne(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:PSe(r),text:s});default:return Object.assign(r,{text:s})}})}function m1(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function BSe(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const USe=t=>({...t,url:iW(t),user:{...t.user,url:sne(t),follow_url:RSe(t)},like_url:xSe(t),reply_url:TSe(t),in_reply_to_url:t.in_reply_to_screen_name?OSe(t):void 0,entities:oW(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:iW(t.quoted_tweet),entities:oW(t.quoted_tweet)}:void 0}),LSe="_root_g9tkv_1",$Se="_rounded_g9tkv_6",FSe="_mediaWrapper_g9tkv_10",jSe="_grid2Columns_g9tkv_17",WSe="_grid3_g9tkv_20",zSe="_grid2x2_g9tkv_23",HSe="_mediaContainer_g9tkv_26",GSe="_mediaLink_g9tkv_34",qSe="_skeleton_g9tkv_38",VSe="_image_g9tkv_43",Ec={root:LSe,rounded:$Se,mediaWrapper:FSe,grid2Columns:jSe,grid3:WSe,grid2x2:zSe,mediaContainer:HSe,mediaLink:GSe,skeleton:qSe,image:VSe},KSe="_anchor_fp31d_1",YSe="_videoButton_fp31d_17",QSe="_videoButtonIcon_fp31d_35",JSe="_watchOnTwitter_fp31d_44",ZSe="_viewReplies_fp31d_60",Bw={anchor:KSe,videoButton:YSe,videoButtonIcon:QSe,watchOnTwitter:JSe,viewReplies:ZSe},XSe=({tweet:t,media:e})=>{const[n,r]=G.useState(!0),[s,i]=G.useState(!1),[o,a]=G.useState(!1),c=MSe(e);let l=0;return b.jsxs(b.Fragment,{children:[b.jsx("video",{className:Ec.image,poster:ine(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:b.jsx("source",{src:c.url,type:c.content_type})}),n&&b.jsx("button",{type:"button",className:Bw.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:b.jsx("svg",{viewBox:"0 0 24 24",className:Bw.videoButtonIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&b.jsx("div",{className:Bw.watchOnTwitter,children:b.jsx("a",{href:t.url,className:Bw.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&b.jsx("a",{href:t.url,className:Hg(Bw.anchor,Bw.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},eIe=t=>b.jsx("img",{...t}),aW=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},one=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:eIe;return b.jsx("div",{className:Hg(Ec.root,!n&&Ec.rounded),children:b.jsx("div",{className:Hg(Ec.mediaWrapper,o>1&&Ec.grid2Columns,o===3&&Ec.grid3,o>4&&Ec.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>b.jsx(G.Fragment,{children:l.type==="photo"?b.jsxs("a",{href:t.url,className:Hg(Ec.mediaContainer,Ec.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:Ec.skeleton,style:aW(l,o)}),b.jsx(c,{src:ine(l,"small"),alt:l.ext_alt_text||"Image",className:Ec.image,draggable:!0})]},l.media_url_https):b.jsxs("div",{className:Ec.mediaContainer,children:[b.jsx("div",{className:Ec.skeleton,style:aW(l,o)}),b.jsx(XSe,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},tIe={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},nIe=new Intl.DateTimeFormat("en-US",tIe),rIe=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},sIe=t=>{const e=rIe(nIe.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},iIe="_root_i24yn_1",oIe={root:iIe},aIe=({tweet:t})=>{const e=new Date(t.created_at),n=sIe(e);return b.jsx("a",{className:oIe.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:b.jsx("time",{dateTime:e.toISOString(),children:n})})},cIe="_info_19qcj_1",lIe="_infoLink_19qcj_10",uIe="_infoIcon_19qcj_30",kD={info:cIe,infoLink:lIe,infoIcon:uIe},dIe=({tweet:t})=>b.jsxs("div",{className:kD.info,children:[b.jsx(aIe,{tweet:t}),b.jsx("a",{className:kD.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:kD.infoIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),hIe="_actions_n2anf_1",fIe="_like_n2anf_13",pIe="_reply_n2anf_14",gIe="_copy_n2anf_15",mIe="_likeIconWrapper_n2anf_27",yIe="_likeCount_n2anf_30",wIe="_replyIconWrapper_n2anf_35",bIe="_copyIconWrapper_n2anf_36",vIe="_likeIcon_n2anf_27",EIe="_replyIcon_n2anf_35",CIe="_copyIcon_n2anf_36",_Ie="_replyText_n2anf_56",AIe="_copyText_n2anf_57",za={actions:hIe,like:fIe,reply:pIe,copy:gIe,likeIconWrapper:mIe,likeCount:yIe,replyIconWrapper:wIe,copyIconWrapper:bIe,likeIcon:vIe,replyIcon:EIe,copyIcon:CIe,replyText:_Ie,copyText:AIe},SIe=({tweet:t})=>{const[e,n]=G.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return G.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),b.jsxs("button",{type:"button",className:za.copy,"aria-label":"Copy link",onClick:r,children:[b.jsx("div",{className:za.copyIconWrapper,children:e?b.jsx("svg",{viewBox:"0 0 24 24",className:za.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):b.jsx("svg",{viewBox:"0 0 24 24",className:za.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),b.jsx("span",{className:za.copyText,children:e?"Copied!":"Copy link"})]})},IIe=({tweet:t})=>{const e=iU(t.favorite_count);return b.jsxs("div",{className:za.actions,children:[b.jsxs("a",{className:za.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[b.jsx("div",{className:za.likeIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:za.likeIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),b.jsx("span",{className:za.likeCount,children:e})]}),b.jsxs("a",{className:za.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[b.jsx("div",{className:za.replyIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:za.replyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),b.jsx("span",{className:za.replyText,children:"Reply"})]}),b.jsx(SIe,{tweet:t})]})},NIe="_replies_1cutb_1",xIe="_link_1cutb_4",TIe="_text_1cutb_23",PD={replies:NIe,link:xIe,text:TIe},RIe=({tweet:t})=>b.jsx("div",{className:PD.replies,children:b.jsx("a",{className:PD.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:b.jsx("span",{className:PD.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${iU(t.conversation_count)} reply`:`Read ${iU(t.conversation_count)} replies`})})}),kIe="_root_q5799_1",PIe="_article_q5799_16",cW={root:kIe,article:PIe},OIe=({tweet:t,children:e})=>b.jsx("div",{className:cW.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:b.jsx("article",{className:cW.article,children:e})}),DIe="_header_r31i5_1",MIe="_avatar_r31i5_11",BIe="_avatarSquare_r31i5_17",UIe="_author_r31i5_21",LIe="_authorText_r31i5_26",$Ie="_username_r31i5_33",Om={header:DIe,avatar:MIe,avatarSquare:BIe,author:UIe,authorText:LIe,username:$Ie},FIe=({tweet:t})=>{const{user:e}=t;return b.jsxs("div",{className:Om.header,children:[b.jsx("a",{href:t.url,className:Om.avatar,target:"_blank",rel:"noopener noreferrer",children:b.jsx("div",{className:Hg(Om.avatarOverflow,e.profile_image_shape==="Square"&&Om.avatarSquare),children:b.jsx(nne,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),b.jsxs("div",{className:Om.author,children:[b.jsx("div",{className:Om.authorText,children:b.jsx("span",{title:e.name,children:e.name})}),b.jsx(rne,{user:e}),b.jsx("div",{className:Om.username,children:b.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},jIe="_root_175ot_1",WIe={root:jIe},zIe=({tweet:t})=>b.jsx("p",{className:WIe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),HIe=({tweet:t})=>{var e;return b.jsxs(OIe,{tweet:t,children:[b.jsx(FIe,{tweet:t}),b.jsx(zIe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?b.jsx(one,{quoted:!0,tweet:t}):null]})},GIe=({tweet:t,components:e})=>{var n;const r=G.useMemo(()=>USe(t),[t]);return b.jsxs(Q$,{children:[b.jsx(wSe,{tweet:r,components:e}),r.in_reply_to_status_id_str&&b.jsx(ESe,{tweet:r}),b.jsx(NSe,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?b.jsx(one,{tweet:r,components:e}):null,r.quoted_tweet&&b.jsx(HIe,{tweet:r.quoted_tweet}),b.jsx(dIe,{tweet:r}),b.jsx(IIe,{tweet:r}),b.jsx(RIe,{tweet:r})]})},qIe="_root_16yxa_1",VIe={root:qIe},KIe=t=>b.jsx(Q$,{children:b.jsxs("div",{className:VIe.root,children:[b.jsx("h3",{children:"Tweet not found"}),b.jsx("p",{children:"The embedded tweet could not be found"})]})}),YIe="_skeleton_oi7hr_1",QIe={skeleton:YIe},ZN=({style:t})=>b.jsx("span",{className:QIe.skeleton,style:t}),JIe="_root_17qqv_1",ZIe={root:JIe},XIe=()=>b.jsxs(Q$,{className:ZIe.root,children:[b.jsx(ZN,{style:{height:"3rem",marginBottom:"0.75rem"}}),b.jsx(ZN,{style:{height:"6rem",margin:"0.5rem 0"}}),b.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),b.jsx(ZN,{style:{height:"2rem"}}),b.jsx(ZN,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),ane=0,cne=1,lne=2,lW=3;var uW=Object.prototype.hasOwnProperty;function oU(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&oU(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(uW.call(t,n)&&++r&&!uW.call(e,n)||!(n in e)||!oU(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const nf=new WeakMap,wg=()=>{},sa=wg(),aU=Object,nr=t=>t===sa,Pd=t=>typeof t=="function",lm=(t,e)=>({...t,...e}),une=t=>Pd(t.then),OD={},XN={},J$="undefined",UI=typeof window!=J$,cU=typeof document!=J$,eNe=UI&&"Deno"in window,tNe=()=>UI&&typeof window.requestAnimationFrame!=J$,dne=(t,e)=>{const n=nf.get(t);return[()=>!nr(e)&&t.get(e)||OD,r=>{if(!nr(e)){const s=t.get(e);e in XN||(XN[e]=s),n[5](e,lm(s,r),s||OD)}},n[6],()=>!nr(e)&&e in XN?XN[e]:!nr(e)&&t.get(e)||OD]};let lU=!0;const nNe=()=>lU,[uU,dU]=UI&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[wg,wg],rNe=()=>{const t=cU&&document.visibilityState;return nr(t)||t!=="hidden"},sNe=t=>(cU&&document.addEventListener("visibilitychange",t),uU("focus",t),()=>{cU&&document.removeEventListener("visibilitychange",t),dU("focus",t)}),iNe=t=>{const e=()=>{lU=!0,t()},n=()=>{lU=!1};return uU("online",e),uU("offline",n),()=>{dU("online",e),dU("offline",n)}},oNe={isOnline:nNe,isVisible:rNe},aNe={initFocus:sNe,initReconnect:iNe},dW=!Hc.useId,QA=!UI||eNe,cNe=t=>tNe()?window.requestAnimationFrame(t):setTimeout(t,1),DD=QA?G.useEffect:G.useLayoutEffect,MD=typeof navigator<"u"&&navigator.connection,hW=!QA&&MD&&(["slow-2g","2g"].includes(MD.effectiveType)||MD.saveData),ex=new WeakMap,lNe=t=>aU.prototype.toString.call(t),BD=(t,e)=>t===`[object ${e}]`;let uNe=0;const hU=t=>{const e=typeof t,n=lNe(t),r=BD(n,"Date"),s=BD(n,"RegExp"),i=BD(n,"Object");let o,a;if(aU(t)===t&&!r&&!s){if(o=ex.get(t),o)return o;if(o=++uNe+"~",ex.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=hU(t[a])+",";ex.set(t,o)}if(i){o="#";const c=aU.keys(t).sort();for(;!nr(a=c.pop());)nr(t[a])||(o+=a+":"+hU(t[a])+",");ex.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},Z$=t=>{if(Pd(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?hU(t):"",[t,e]};let dNe=0;const fU=()=>++dNe;async function hne(...t){const[e,n,r,s]=t,i=lm({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Pd(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=Z$(h);if(!f)return;const[p,g]=dne(e,f),[m,y,w,C]=nf.get(e),N=()=>{const v=m[f];return(Pd(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete w[f],delete C[f],v&&v[0])?v[0](lne).then(()=>p().data):p().data};if(t.length<3)return N();let I=r,k,P=!1;const U=fU();y[f]=[U,0];const M=!nr(c),H=p(),j=H.data,K=H._c,$=nr(K)?j:K;if(M&&(c=Pd(c)?c($,j):c,g({data:c,_c:$})),Pd(I))try{I=I($)}catch(v){k=v,P=!0}if(I&&une(I))if(I=await I.catch(v=>{k=v,P=!0}),U!==y[f][0]){if(P)throw k;return I}else P&&M&&l(k)&&(o=!0,g({data:$,_c:sa}));if(o&&!P)if(Pd(o)){const v=o(I,$);g({data:v,error:sa,_c:sa})}else g({data:I,error:sa,_c:sa});if(y[f][1]=fU(),Promise.resolve(N()).then(()=>{g({_c:sa})}),P){if(u)throw k;return}return I}}const fW=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},hNe=(t,e)=>{if(!nf.has(t)){const n=lm(aNe,e),r=Object.create(null),s=hne.bind(sa,t);let i=wg;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!nf.has(t)&&(nf.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!QA)){const u=n.initFocus(setTimeout.bind(sa,fW.bind(sa,r,ane))),d=n.initReconnect(setTimeout.bind(sa,fW.bind(sa,r,cne)));i=()=>{u&&u(),d&&d(),nf.delete(t)}}};return l(),[t,s,l,i]}return[t,nf.get(t)[4]]},fNe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!nr(i)&&o>i||setTimeout(r,a,s)},pNe=oU,[fne,gNe]=hNe(new Map),mNe=lm({onLoadingSlow:wg,onSuccess:wg,onError:wg,onErrorRetry:fNe,onDiscarded:wg,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:hW?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:hW?5e3:3e3,compare:pNe,isPaused:()=>!1,cache:fne,mutate:gNe,fallback:{}},oNe),yNe=(t,e)=>{const n=lm(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=lm(s,o))}return n},wNe=G.createContext({}),bNe="$inf$",pne=UI&&window.__SWR_DEVTOOLS_USE__,vNe=pne?window.__SWR_DEVTOOLS_USE__:[],ENe=()=>{pne&&(window.__SWR_DEVTOOLS_REACT__=Hc)},CNe=t=>Pd(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],_Ne=()=>lm(mNe,G.useContext(wNe)),ANe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=Z$(e),[,,,a]=nf.get(fne);if(o.startsWith(bNe))return n(...i);const c=a[o];return nr(c)?n(...i):(delete a[o],c)}),r),SNe=vNe.concat(ANe),INe=t=>function(...n){const r=_Ne(),[s,i,o]=CNe(n),a=yNe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(SNe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},NNe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};ENe();const UD=Hc.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),LD={dedupe:!0},xNe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,m]=nf.get(r),[y,w]=Z$(t),C=G.useRef(!1),N=G.useRef(!1),I=G.useRef(y),k=G.useRef(e),P=G.useRef(n),U=()=>P.current,M=()=>U().isVisible()&&U().isOnline(),[H,j,K,$]=dne(r,y),v=G.useRef({}).current,E=nr(o)?nr(n.fallback)?sa:n.fallback[y]:o,_=(ce,ae)=>{for(const _e in v){const Se=_e;if(Se==="data"){if(!s(ce[Se],ae[Se])&&(!nr(ce[Se])||!s(se,ae[Se])))return!1}else if(ae[Se]!==ce[Se])return!1}return!0},D=G.useMemo(()=>{const ce=!y||!e?!1:nr(a)?U().isPaused()||i?!1:c!==!1:a,ae=Ye=>{const it=lm(Ye);return delete it._k,ce?{isValidating:!0,isLoading:!0,...it}:it},_e=H(),Se=$(),Ce=ae(_e),Qe=_e===Se?Ce:ae(Se);let pt=Ce;return[()=>{const Ye=ae(H());return _(Ye,pt)?(pt.data=Ye.data,pt.isLoading=Ye.isLoading,pt.isValidating=Ye.isValidating,pt.error=Ye.error,pt):(pt=Ye,Ye)},()=>Qe]},[r,y]),x=Ute.useSyncExternalStore(G.useCallback(ce=>K(y,(ae,_e)=>{_(_e,ae)||ce()}),[r,y]),D[0],D[1]),B=!C.current,W=f[y]&&f[y].length>0,L=x.data,S=nr(L)?E&&une(E)?UD(E):E:L,F=x.error,X=G.useRef(S),se=h?nr(L)?nr(X.current)?S:X.current:L:S,ge=W&&!nr(F)?!1:B&&!nr(a)?a:U().isPaused()?!1:i?nr(S)?!1:c:nr(S)||c,Ue=!!(y&&e&&B&&ge),Le=nr(x.isValidating)?Ue:x.isValidating,Be=nr(x.isLoading)?Ue:x.isLoading,Ut=G.useCallback(async ce=>{const ae=k.current;if(!y||!ae||N.current||U().isPaused())return!1;let _e,Se,Ce=!0;const Qe=ce||{},pt=!g[y]||!Qe.dedupe,Ye=()=>dW?!N.current&&y===I.current&&C.current:y===I.current,it={isValidating:!1,isLoading:!1},vn=()=>{j(it)},He=()=>{const Qt=g[y];Qt&&Qt[1]===Se&&delete g[y]},Yt={isValidating:!0};nr(H().data)&&(Yt.isLoading=!0);try{if(pt&&(j(Yt),n.loadingTimeout&&nr(H().data)&&setTimeout(()=>{Ce&&Ye()&&U().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[ae(w),fU()]),[_e,Se]=g[y],_e=await _e,pt&&setTimeout(He,n.dedupingInterval),!g[y]||g[y][1]!==Se)return pt&&Ye()&&U().onDiscarded(y),!1;it.error=sa;const Qt=p[y];if(!nr(Qt)&&(Se<=Qt[0]||Se<=Qt[1]||Qt[1]===0))return vn(),pt&&Ye()&&U().onDiscarded(y),!1;const De=H().data;it.data=s(De,_e)?De:_e,pt&&Ye()&&U().onSuccess(_e,y,n)}catch(Qt){He();const De=U(),{shouldRetryOnError:z}=De;De.isPaused()||(it.error=Qt,pt&&Ye()&&(De.onError(Qt,y,De),(z===!0||Pd(z)&&z(Qt))&&(!U().revalidateOnFocus||!U().revalidateOnReconnect||M())&&De.onErrorRetry(Qt,y,De,T=>{const O=f[y];O&&O[0]&&O[0](lW,T)},{retryCount:(Qe.retryCount||0)+1,dedupe:!0})))}return Ce=!1,vn(),!0},[y,r]),lt=G.useCallback((...ce)=>hne(r,I.current,...ce),[]);if(DD(()=>{k.current=e,P.current=n,nr(L)||(X.current=L)}),DD(()=>{if(!y)return;const ce=Ut.bind(sa,LD);let ae=0;U().revalidateOnFocus&&(ae=Date.now()+U().focusThrottleInterval);const Se=NNe(y,f,(Ce,Qe={})=>{if(Ce==ane){const pt=Date.now();U().revalidateOnFocus&&pt>ae&&M()&&(ae=pt+U().focusThrottleInterval,ce())}else if(Ce==cne)U().revalidateOnReconnect&&M()&&ce();else{if(Ce==lne)return Ut();if(Ce==lW)return Ut(Qe)}});return N.current=!1,I.current=y,C.current=!0,j({_k:w}),ge&&(g[y]||(nr(S)||QA?ce():cNe(ce))),()=>{N.current=!0,Se()}},[y]),DD(()=>{let ce;function ae(){const Se=Pd(l)?l(H().data):l;Se&&ce!==-1&&(ce=setTimeout(_e,Se))}function _e(){!H().error&&(u||U().isVisible())&&(d||U().isOnline())?Ut(LD).then(ae):ae()}return ae(),()=>{ce&&(clearTimeout(ce),ce=-1)}},[l,u,d,y]),G.useDebugValue(se),i&&nr(S)&&y){if(!dW&&QA)throw new Error("Fallback data is required when using Suspense in SSR.");k.current=e,P.current=n,N.current=!1;const ce=m[y];if(!nr(ce)){const ae=lt(ce);UD(ae)}if(nr(F)){const ae=Ut(LD);nr(se)||(ae.status="fulfilled",ae.value=!0),UD(ae)}else throw F}return{mutate:lt,get data(){return v.data=!0,se},get error(){return v.error=!0,F},get isValidating(){return v.isValidating=!0,Le},get isLoading(){return v.isLoading=!0,Be}}},pW=INe(xNe);class TNe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const RNe=pW.default||pW,kNe="https://react-tweet.vercel.app";async function PNe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new TNe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const ONe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=RNe(()=>e||t?[e||t&&`${kNe}/api/tweet/${t}`,n]:null,PNe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},DNe=({id:t,apiUrl:e,fallback:n=b.jsx(XIe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=ONe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||KIe;return b.jsx(l,{error:i?i(a):a})}return b.jsx(GIe,{tweet:o,components:r})};var eP={exports:{}},gne={},mne={exports:{}},MNe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",BNe=MNe,UNe=BNe;function yne(){}function wne(){}wne.resetWarningCache=yne;var LNe=function(){function t(r,s,i,o,a,c){if(c!==UNe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:wne,resetWarningCache:yne};return n.PropTypes=n,n};mne.exports=LNe();var bne=mne.exports,pU={exports:{}};function vne(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=vne(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function gW(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=vne(t))&&(r&&(r+=" "),r+=e);return r}pU.exports=gW,pU.exports.clsx=gW;var $Ne=pU.exports,Ys={},sh={};Object.defineProperty(sh,"__esModule",{value:!0});sh.dontSetMe=HNe;sh.findInArray=FNe;sh.int=zNe;sh.isFunction=jNe;sh.isNum=WNe;function FNe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function jNe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function WNe(t){return typeof t=="number"&&!isNaN(t)}function zNe(t){return parseInt(t,10)}function HNe(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var cw={};Object.defineProperty(cw,"__esModule",{value:!0});cw.browserPrefixToKey=Cne;cw.browserPrefixToStyle=GNe;cw.default=void 0;cw.getPrefix=Ene;const $D=["Moz","Webkit","O","ms"];function Ene(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<$D.length;s++)if(Cne(t,$D[s])in e)return $D[s];return""}function Cne(t,e){return e?`${e}${qNe(t)}`:t}function GNe(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function qNe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}cw.default=Ene();Object.defineProperty(Ys,"__esModule",{value:!0});Ys.addClassName=Sne;Ys.addEvent=KNe;Ys.addUserSelectStyles=ixe;Ys.createCSSTransform=txe;Ys.createSVGTransform=nxe;Ys.getTouch=rxe;Ys.getTouchIdentifier=sxe;Ys.getTranslation=X$;Ys.innerHeight=ZNe;Ys.innerWidth=XNe;Ys.matchesSelector=Ane;Ys.matchesSelectorAndParentsTo=VNe;Ys.offsetXYFromParent=exe;Ys.outerHeight=QNe;Ys.outerWidth=JNe;Ys.removeClassName=Ine;Ys.removeEvent=YNe;Ys.scheduleRemoveUserSelectStyles=oxe;var Vc=sh,mW=_ne(cw);function _ne(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(_ne=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let tx="";function Ane(t,e){return tx||(tx=(0,Vc.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Vc.isFunction)(t[n])})),(0,Vc.isFunction)(t[tx])?t[tx](e):!1}function VNe(t,e,n){let r=t;do{if(Ane(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function KNe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function YNe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function QNe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Vc.int)(n.borderTopWidth),e+=(0,Vc.int)(n.borderBottomWidth),e}function JNe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Vc.int)(n.borderLeftWidth),e+=(0,Vc.int)(n.borderRightWidth),e}function ZNe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Vc.int)(n.paddingTop),e-=(0,Vc.int)(n.paddingBottom),e}function XNe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Vc.int)(n.paddingLeft),e-=(0,Vc.int)(n.paddingRight),e}function exe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function txe(t,e){const n=X$(t,e,"px");return{[(0,mW.browserPrefixToKey)("transform",mW.default)]:n}}function nxe(t,e){return X$(t,e,"")}function X$(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function rxe(t,e){return t.targetTouches&&(0,Vc.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Vc.findInArray)(t.changedTouches,n=>e===n.identifier)}function sxe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function ixe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&Sne(t.body,"react-draggable-transparent-selection")}function oxe(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{yW(t)}):yW(t)}function yW(t){if(t)try{if(t.body&&Ine(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function Sne(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function Ine(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var ih={};Object.defineProperty(ih,"__esModule",{value:!0});ih.canDragX=lxe;ih.canDragY=uxe;ih.createCoreData=hxe;ih.createDraggableData=fxe;ih.getBoundPosition=axe;ih.getControlPosition=dxe;ih.snapToGrid=cxe;var Cc=sh,jb=Ys;function axe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:pxe(r);const s=e4(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,Cc.int)(u.paddingLeft)+(0,Cc.int)(l.marginLeft),top:-s.offsetTop+(0,Cc.int)(u.paddingTop)+(0,Cc.int)(l.marginTop),right:(0,jb.innerWidth)(c)-(0,jb.outerWidth)(s)-s.offsetLeft+(0,Cc.int)(u.paddingRight)-(0,Cc.int)(l.marginRight),bottom:(0,jb.innerHeight)(c)-(0,jb.outerHeight)(s)-s.offsetTop+(0,Cc.int)(u.paddingBottom)-(0,Cc.int)(l.marginBottom)}}return(0,Cc.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Cc.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Cc.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Cc.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function cxe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function lxe(t){return t.props.axis==="both"||t.props.axis==="x"}function uxe(t){return t.props.axis==="both"||t.props.axis==="y"}function dxe(t,e,n){const r=typeof e=="number"?(0,jb.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=e4(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,jb.offsetXYFromParent)(r||t,i,n.props.scale)}function hxe(t,e,n){const r=!(0,Cc.isNum)(t.lastX),s=e4(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function fxe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function pxe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function e4(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var tP={},nP={};Object.defineProperty(nP,"__esModule",{value:!0});nP.default=gxe;function gxe(){}Object.defineProperty(tP,"__esModule",{value:!0});tP.default=void 0;var FD=Nne(G),Vo=t4(bne),mxe=t4(r$),Io=Ys,sp=ih,jD=sh,y1=t4(nP);function t4(t){return t&&t.__esModule?t:{default:t}}function Nne(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(Nne=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function Qo(t,e,n){return(e=yxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yxe(t){var e=wxe(t,"string");return typeof e=="symbol"?e:e+""}function wxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ru={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ip=ru.mouse,rP=class extends FD.Component{constructor(){super(...arguments),Qo(this,"dragging",!1),Qo(this,"lastX",NaN),Qo(this,"lastY",NaN),Qo(this,"touchIdentifier",null),Qo(this,"mounted",!1),Qo(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Io.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Io.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,Io.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,sp.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,sp.createCoreData)(this,o,a);(0,y1.default)("DraggableCore: handleDragStart: %j",c),(0,y1.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Io.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Io.addEvent)(r,ip.move,this.handleDrag),(0,Io.addEvent)(r,ip.stop,this.handleDragStop))}),Qo(this,"handleDrag",e=>{const n=(0,sp.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,sp.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,sp.createCoreData)(this,r,s);if((0,y1.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),Qo(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,sp.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,sp.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,sp.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Io.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,y1.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,y1.default)("DraggableCore: Removing handlers"),(0,Io.removeEvent)(a.ownerDocument,ip.move,this.handleDrag),(0,Io.removeEvent)(a.ownerDocument,ip.stop,this.handleDragStop))}),Qo(this,"onMouseDown",e=>(ip=ru.mouse,this.handleDragStart(e))),Qo(this,"onMouseUp",e=>(ip=ru.mouse,this.handleDragStop(e))),Qo(this,"onTouchStart",e=>(ip=ru.touch,this.handleDragStart(e))),Qo(this,"onTouchEnd",e=>(ip=ru.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Io.addEvent)(e,ru.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Io.removeEvent)(n,ru.mouse.move,this.handleDrag),(0,Io.removeEvent)(n,ru.touch.move,this.handleDrag),(0,Io.removeEvent)(n,ru.mouse.stop,this.handleDragStop),(0,Io.removeEvent)(n,ru.touch.stop,this.handleDragStop),(0,Io.removeEvent)(e,ru.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Io.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:mxe.default.findDOMNode(this)}render(){return FD.cloneElement(FD.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};tP.default=rP;Qo(rP,"displayName","DraggableCore");Qo(rP,"propTypes",{allowAnyClick:Vo.default.bool,allowMobileScroll:Vo.default.bool,children:Vo.default.node.isRequired,disabled:Vo.default.bool,enableUserSelectHack:Vo.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Vo.default.arrayOf(Vo.default.number),handle:Vo.default.string,cancel:Vo.default.string,nodeRef:Vo.default.object,onStart:Vo.default.func,onDrag:Vo.default.func,onStop:Vo.default.func,onMouseDown:Vo.default.func,scale:Vo.default.number,className:jD.dontSetMe,style:jD.dontSetMe,transform:jD.dontSetMe});Qo(rP,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(G),n=u(bne),r=u(r$),s=$Ne,i=Ys,o=ih,a=sh,c=u(tP),l=u(nP);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,w){if(typeof WeakMap=="function")var C=new WeakMap,N=new WeakMap;return(d=function(I,k){if(!k&&I&&I.__esModule)return I;var P,U,M={__proto__:null,default:I};if(I===null||typeof I!="object"&&typeof I!="function")return M;if(P=k?N:C){if(P.has(I))return P.get(I);P.set(I,M)}for(const H in I)H!=="default"&&{}.hasOwnProperty.call(I,H)&&((U=(P=Object.defineProperty)&&Object.getOwnPropertyDescriptor(I,H))&&(U.get||U.set)?P(M,H,U):M[H]=I[H]);return M})(y,w)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var w=1;w<arguments.length;w++){var C=arguments[w];for(var N in C)({}).hasOwnProperty.call(C,N)&&(y[N]=C[N])}return y},h.apply(null,arguments)}function f(y,w,C){return(w=p(w))in y?Object.defineProperty(y,w,{value:C,enumerable:!0,configurable:!0,writable:!0}):y[w]=C,y}function p(y){var w=g(y,"string");return typeof w=="symbol"?w:w+""}function g(y,w){if(typeof y!="object"||!y)return y;var C=y[Symbol.toPrimitive];if(C!==void 0){var N=C.call(y,w);if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(y)}class m extends e.Component{static getDerivedStateFromProps(w,C){let{position:N}=w,{prevPropsPosition:I}=C;return N&&(!I||N.x!==I.x||N.y!==I.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:N,prevPropsPosition:I}),{x:N.x,y:N.y,prevPropsPosition:{...N}}):null}constructor(w){super(w),f(this,"onDragStart",(C,N)=>{if((0,l.default)("Draggable: onDragStart: %j",N),this.props.onStart(C,(0,o.createDraggableData)(this,N))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(C,N)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",N);const I=(0,o.createDraggableData)(this,N),k={x:I.x,y:I.y,slackX:0,slackY:0};if(this.props.bounds){const{x:U,y:M}=k;k.x+=this.state.slackX,k.y+=this.state.slackY;const[H,j]=(0,o.getBoundPosition)(this,k.x,k.y);k.x=H,k.y=j,k.slackX=this.state.slackX+(U-k.x),k.slackY=this.state.slackY+(M-k.y),I.x=k.x,I.y=k.y,I.deltaX=k.x-this.state.x,I.deltaY=k.y-this.state.y}if(this.props.onDrag(C,I)===!1)return!1;this.setState(k)}),f(this,"onDragStop",(C,N)=>{if(!this.state.dragging||this.props.onStop(C,(0,o.createDraggableData)(this,N))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",N);const k={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:U,y:M}=this.props.position;k.x=U,k.y=M}this.setState(k)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var w,C;return((C=(w=this.props)==null?void 0:w.nodeRef)==null?void 0:C.current)??r.default.findDOMNode(this)}render(){const{axis:w,bounds:C,children:N,defaultPosition:I,defaultClassName:k,defaultClassNameDragging:P,defaultClassNameDragged:U,position:M,positionOffset:H,scale:j,...K}=this.props;let $={},v=null;const _=!!!M||this.state.dragging,D=M||I,x={x:(0,o.canDragX)(this)&&_?this.state.x:D.x,y:(0,o.canDragY)(this)&&_?this.state.y:D.y};this.state.isElementSVG?v=(0,i.createSVGTransform)(x,H):$=(0,i.createCSSTransform)(x,H);const B=(0,s.clsx)(N.props.className||"",k,{[P]:this.state.dragging,[U]:this.state.dragged});return e.createElement(c.default,h({},K,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(N),{className:B,style:{...N.props.style,...$},transform:v}))}}t.default=m,f(m,"displayName","Draggable"),f(m,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(m,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(gne);const{default:xne,DraggableCore:bxe}=gne;eP.exports=xne;eP.exports.default=xne;eP.exports.DraggableCore=bxe;var vxe=eP.exports;const LI=rh(vxe);function Ms(){return Ms=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ms.apply(null,arguments)}function Tne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Rne={exports:{}},Br={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gi=typeof Symbol=="function"&&Symbol.for,n4=Gi?Symbol.for("react.element"):60103,r4=Gi?Symbol.for("react.portal"):60106,sP=Gi?Symbol.for("react.fragment"):60107,iP=Gi?Symbol.for("react.strict_mode"):60108,oP=Gi?Symbol.for("react.profiler"):60114,aP=Gi?Symbol.for("react.provider"):60109,cP=Gi?Symbol.for("react.context"):60110,s4=Gi?Symbol.for("react.async_mode"):60111,lP=Gi?Symbol.for("react.concurrent_mode"):60111,uP=Gi?Symbol.for("react.forward_ref"):60112,dP=Gi?Symbol.for("react.suspense"):60113,Exe=Gi?Symbol.for("react.suspense_list"):60120,hP=Gi?Symbol.for("react.memo"):60115,fP=Gi?Symbol.for("react.lazy"):60116,Cxe=Gi?Symbol.for("react.block"):60121,_xe=Gi?Symbol.for("react.fundamental"):60117,Axe=Gi?Symbol.for("react.responder"):60118,Sxe=Gi?Symbol.for("react.scope"):60119;function tl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case n4:switch(t=t.type,t){case s4:case lP:case sP:case oP:case iP:case dP:return t;default:switch(t=t&&t.$$typeof,t){case cP:case uP:case fP:case hP:case aP:return t;default:return e}}case r4:return e}}}function kne(t){return tl(t)===lP}Br.AsyncMode=s4;Br.ConcurrentMode=lP;Br.ContextConsumer=cP;Br.ContextProvider=aP;Br.Element=n4;Br.ForwardRef=uP;Br.Fragment=sP;Br.Lazy=fP;Br.Memo=hP;Br.Portal=r4;Br.Profiler=oP;Br.StrictMode=iP;Br.Suspense=dP;Br.isAsyncMode=function(t){return kne(t)||tl(t)===s4};Br.isConcurrentMode=kne;Br.isContextConsumer=function(t){return tl(t)===cP};Br.isContextProvider=function(t){return tl(t)===aP};Br.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===n4};Br.isForwardRef=function(t){return tl(t)===uP};Br.isFragment=function(t){return tl(t)===sP};Br.isLazy=function(t){return tl(t)===fP};Br.isMemo=function(t){return tl(t)===hP};Br.isPortal=function(t){return tl(t)===r4};Br.isProfiler=function(t){return tl(t)===oP};Br.isStrictMode=function(t){return tl(t)===iP};Br.isSuspense=function(t){return tl(t)===dP};Br.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===sP||t===lP||t===oP||t===iP||t===dP||t===Exe||typeof t=="object"&&t!==null&&(t.$$typeof===fP||t.$$typeof===hP||t.$$typeof===aP||t.$$typeof===cP||t.$$typeof===uP||t.$$typeof===_xe||t.$$typeof===Axe||t.$$typeof===Sxe||t.$$typeof===Cxe)};Br.typeOf=tl;Rne.exports=Br;var Ixe=Rne.exports,i4=Ixe,Nxe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},xxe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Txe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Pne={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o4={};o4[i4.ForwardRef]=Txe;o4[i4.Memo]=Pne;function wW(t){return i4.isMemo(t)?Pne:o4[t.$$typeof]||Nxe}var Rxe=Object.defineProperty,kxe=Object.getOwnPropertyNames,bW=Object.getOwnPropertySymbols,Pxe=Object.getOwnPropertyDescriptor,Oxe=Object.getPrototypeOf,vW=Object.prototype;function One(t,e,n){if(typeof e!="string"){if(vW){var r=Oxe(e);r&&r!==vW&&One(t,r,n)}var s=kxe(e);bW&&(s=s.concat(bW(e)));for(var i=wW(t),o=wW(e),a=0;a<s.length;++a){var c=s[a];if(!xxe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=Pxe(e,c);try{Rxe(t,c,l)}catch{}}}}return t}var Dxe=One;const Mxe=rh(Dxe);var Dne={};Object.defineProperty(Dne,"__esModule",{value:!0});Dne.default=Bxe;function Bxe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function nx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VR(){return VR=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VR.apply(this,arguments)}function Uxe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function op(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lxe(t){var e=function(n){Uxe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,nx(op(op(i)),"cachedTheme",void 0),nx(op(op(i)),"lastOuterTheme",void 0),nx(op(op(i)),"lastTheme",void 0),nx(op(op(i)),"renderProvider",function(l){var u=i.props.children;return Hc.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?VR({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Hc.createElement(t.Consumer,null,this.renderProvider):null},r}(Hc.Component);return e}function $xe(t){return function(n){var r=Hc.forwardRef(function(s,i){return Hc.createElement(t.Consumer,null,function(o){return Hc.createElement(n,VR({theme:o,ref:i},s))})});return Mxe(r,n),r}}function Fxe(t){var e=function(){var r=Hc.useContext(t);return r};return e}function jxe(t){return{context:t,withTheme:$xe(t),useTheme:Fxe(t),ThemeProvider:Lxe(t)}}var Mne=G.createContext();jxe(Mne);var EW=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OC=(typeof window>"u"?"undefined":EW(window))==="object"&&(typeof document>"u"?"undefined":EW(document))==="object"&&document.nodeType===9;function JA(t){"@babel/helpers - typeof";return JA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JA(t)}function Wxe(t,e){if(JA(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(JA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function zxe(t){var e=Wxe(t,"string");return JA(e)=="symbol"?e:e+""}function Hxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zxe(r.key),r)}}function a4(t,e,n){return e&&Hxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gU(t,e){return gU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},gU(t,e)}function Bne(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,gU(t,e)}function CW(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Gxe={}.constructor;function mU(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(mU);if(t.constructor!==Gxe)return t;var e={};for(var n in t)e[n]=mU(t[n]);return e}function pP(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=mU(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var _W=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},c0=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=_W(e[r]," ");else n=_W(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function DC(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function w1(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function ZA(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=DC(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=w1(f+":"+u+c0(p)+";",o))}}else for(var g in a){var m=a[g];m!=null&&(r&&(r+=l),r+=w1(g+":"+u+c0(m)+";",o))}for(var y in e){var w=e[y];w!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=w1(y+":"+u+c0(w)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),w1(""+t+u+"{"+r,o)+w1("}",o))}var qxe=/([[\].#*$><+~=|^:(),"'`\s])/g,AW=typeof CSS<"u"&&CSS.escape,c4=function(t){return AW?AW(t):t.replace(qxe,"\\$1")},Une=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),yU=function(t){Bne(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(CW(CW(o)),l),o.selectorText="."+c4(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=c0(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Ms({},s,{allowEmpty:!0}):s;return ZA(this.selectorText,this.style,a)},a4(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(Une),Vxe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new yU(e,n,r)}},WD={indent:1,children:!0},Kxe=/@([\w-]+)/,Yxe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Kxe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new gP(Ms({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=WD);var s=DC(r),i=s.linebreak;if(r.indent==null&&(r.indent=WD.indent),r.children==null&&(r.children=WD.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Qxe=/@container|@media|@supports\s+/,Jxe={onCreateRule:function(e,n,r){return Qxe.test(e)?new Yxe(e,n,r):null}},zD={indent:1,children:!0},Zxe=/@keyframes\s+([\w-]+)/,wU=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Zxe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:c4(c(this,a)),this.rules=new gP(Ms({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Ms({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=zD);var s=DC(r),i=s.linebreak;if(r.indent==null&&(r.indent=zD.indent),r.children==null&&(r.children=zD.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Xxe=/@keyframes\s+/,eTe=/\$([\w-]+)/g,bU=function(e,n){return typeof e=="string"?e.replace(eTe,function(r,s){return s in n?n[s]:r}):e},SW=function(e,n,r){var s=e[n],i=bU(s,r);i!==s&&(e[n]=i)},tTe={onCreateRule:function(e,n,r){return typeof e=="string"&&Xxe.test(e)?new wU(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&SW(e,"animation-name",r.keyframes),"animation"in e&&SW(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return bU(e,s.keyframes);case"animation-name":return bU(e,s.keyframes);default:return e}}},nTe=function(t){Bne(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Ms({},s,{allowEmpty:!0}):s;return ZA(this.key,this.style,a)},e}(Une),rTe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new nTe(e,n,r):null}},sTe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=DC(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=ZA(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return ZA(this.at,this.style,r)},t}(),iTe=/@font-face/,oTe={onCreateRule:function(e,n,r){return iTe.test(e)?new sTe(e,n,r):null}},aTe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return ZA(this.key,this.style,r)},t}(),cTe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new aTe(e,n,r):null}},lTe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),uTe={"@charset":!0,"@import":!0,"@namespace":!0},dTe={onCreateRule:function(e,n,r){return e in uTe?new lTe(e,n,r):null}},IW=[Vxe,Jxe,tTe,rTe,oTe,cTe,dTe],hTe={process:!0},NW={force:!0,process:!0},gP=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Ms({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+c4(this.classes[p]));var g=pP(p,s,f);if(!g)return null;this.register(g);var m=f.index===void 0?this.index.length:f.index;return this.index.splice(m,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Ms({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof yU?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof wU&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof yU?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof wU&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=hTe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,NW)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,NW)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=DC(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),Lne=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Ms({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new gP(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),fTe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),pTe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=Tne(s,["attached"]),a=DC(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},a4(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),B_=new pTe,vU=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),EU="2f1acc6c3a606b082e5eef5e54414ffb";vU[EU]==null&&(vU[EU]=0);var xW=vU[EU]++,TW=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+xW+a+n:c+i.key+"-"+xW+(a?"-"+a:"")+"-"+n};return r},$ne=function(e){var n;return function(){return n||(n=e()),n}},gTe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},mTe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=c0(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},yTe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},wTe=function(e,n){return e.selectorText=n,e.selectorText===n},Fne=$ne(function(){return document.querySelector("head")});function bTe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function vTe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function ETe(t){for(var e=Fne(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function CTe(t){var e=B_.registry;if(e.length>0){var n=bTe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=vTe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=ETe(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function _Te(t,e){var n=e.insertionPoint,r=CTe(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}Fne().appendChild(t)}var ATe=$ne(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),RW=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},kW=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},STe=function(){var e=document.createElement("style");return e.textContent=`
`,e},ITe=function(){function t(n){this.getPropertyValue=gTe,this.setProperty=mTe,this.removeProperty=yTe,this.setSelector=wTe,this.hasInsertedRules=!1,this.cssRules=[],n&&B_.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||STe(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=ATe();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){_Te(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=kW(i,s);if(a=RW(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=kW(i,s),d=RW(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof Lne&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),NTe=0,xTe=function(){function t(n){this.id=NTe++,this.version="10.10.0",this.plugins=new fTe,this.options={id:{minify:!1},createGenerateId:TW,Renderer:OC?ITe:null,plugins:[]},this.generateId=TW({minify:!1});for(var r=0;r<IW.length;r++)this.plugins.use(IW[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Ms({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=B_.index===0?0:B_.index+1);var a=new Lne(r,Ms({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),B_.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Ms({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=pP(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),jne=function(e){return new xTe(e)},PW=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},a4(t,[{key:"size",get:function(){return this.length}}]),t}(),l4=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function Wne(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=Wne(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */jne();var zne=Date.now(),HD="fnValues"+zne,GD="fnStyle"+ ++zne,TTe=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=pP(n,{},s);return i[GD]=r,i},onProcessStyle:function(n,r){if(HD in r||GD in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[HD]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[GD];a&&(o.style=a(n)||{});var c=o[HD];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function RTe(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var gb;typeof self<"u"?gb=self:typeof window<"u"?gb=window:typeof global<"u"?gb=global:typeof module<"u"?gb=module:gb=Function("return this")();var OW=RTe(gb),DW=function(e){return e&&e[OW]&&e===e[OW]()},kTe=function(e){return{onCreateRule:function(r,s,i){if(!DW(s))return null;var o=s,a=pP(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!DW(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},PTe=/;\n/,OTe=function(e){for(var n={},r=e.split(PTe),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},DTe=function(e){typeof e.style=="string"&&(e.style=OTe(e.style))};function MTe(){return{onProcessRule:DTe}}var Gg="@global",CU="@global ",BTe=function(){function t(n,r,s){this.type="global",this.at=Gg,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new gP(Ms({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),UTe=function(){function t(n,r,s){this.type="global",this.at=Gg,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(CU.length);this.rule=s.jss.createRule(i,r,Ms({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),LTe=/\s*,\s*/g;function Hne(t,e){for(var n=t.split(LTe),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function $Te(t,e){var n=t.options,r=t.style,s=r?r[Gg]:null;if(s){for(var i in s)e.addRule(i,s[i],Ms({},n,{selector:Hne(i,t.selector)}));delete r[Gg]}}function FTe(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Gg.length)!==Gg)){var i=Hne(s.substr(Gg.length),t.selector);e.addRule(i,r[s],Ms({},n,{selector:i})),delete r[s]}}function jTe(){function t(n,r,s){if(!n)return null;if(n===Gg)return new BTe(n,r,s);if(n[0]==="@"&&n.substr(0,CU.length)===CU)return new UTe(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||($Te(n,r),FTe(n,r))}return{onCreateRule:t,onProcessRule:e}}var fT=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},qD="extendCurrValue"+Date.now();function WTe(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];_y(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Ms({},t,{extend:l}):t.extend[c];_y(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){_y(t.extend.extend,e,n,r);continue}if(fT(t.extend[d])){d in r||(r[d]={}),_y(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function zTe(t,e,n,r){for(var s in t)if(s!=="extend"){if(fT(r[s])&&fT(t[s])){_y(t[s],e,n,r[s]);continue}if(fT(t[s])){r[s]=_y(t[s],e,n);continue}r[s]=t[s]}}function _y(t,e,n,r){return r===void 0&&(r={}),WTe(t,e,n,r),zTe(t,e,n,r),r}function HTe(){function t(n,r,s){return"extend"in n?_y(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[qD])s.prop(i,null);return s[qD]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[qD]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var MW=/\s*,\s*/g,GTe=/&/g,qTe=/\$([\w-]+)/g;function VTe(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(MW),a=s.split(MW),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(GTe,u):u+" "+h}return c}function n(s,i,o){if(o)return Ms({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Ms({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(qTe,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Ms({},l,{selector:p})):c.addRule(g,s[d],Ms({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function _U(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=_U(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return _U(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function KTe(){function t(e,n){return"composes"in e&&(_U(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var YTe=/[A-Z]/g,QTe=/^ms-/,VD={};function JTe(t){return"-"+t.toLowerCase()}function Gne(t){if(VD.hasOwnProperty(t))return VD[t];var e=t.replace(YTe,JTe);return VD[t]=QTe.test(e)?"-"+e:e}function KR(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:Gne(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(KR):e.fallbacks=KR(t.fallbacks)),e}function ZTe(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=KR(n[r]);return n}return KR(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=Gne(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var Ee=l4&&CSS?CSS.px:"px",rx=l4&&CSS?CSS.ms:"ms",Uw=l4&&CSS?CSS.percent:"%",XTe={"animation-delay":rx,"animation-duration":rx,"background-position":Ee,"background-position-x":Ee,"background-position-y":Ee,"background-size":Ee,border:Ee,"border-bottom":Ee,"border-bottom-left-radius":Ee,"border-bottom-right-radius":Ee,"border-bottom-width":Ee,"border-left":Ee,"border-left-width":Ee,"border-radius":Ee,"border-right":Ee,"border-right-width":Ee,"border-top":Ee,"border-top-left-radius":Ee,"border-top-right-radius":Ee,"border-top-width":Ee,"border-width":Ee,"border-block":Ee,"border-block-end":Ee,"border-block-end-width":Ee,"border-block-start":Ee,"border-block-start-width":Ee,"border-block-width":Ee,"border-inline":Ee,"border-inline-end":Ee,"border-inline-end-width":Ee,"border-inline-start":Ee,"border-inline-start-width":Ee,"border-inline-width":Ee,"border-start-start-radius":Ee,"border-start-end-radius":Ee,"border-end-start-radius":Ee,"border-end-end-radius":Ee,margin:Ee,"margin-bottom":Ee,"margin-left":Ee,"margin-right":Ee,"margin-top":Ee,"margin-block":Ee,"margin-block-end":Ee,"margin-block-start":Ee,"margin-inline":Ee,"margin-inline-end":Ee,"margin-inline-start":Ee,padding:Ee,"padding-bottom":Ee,"padding-left":Ee,"padding-right":Ee,"padding-top":Ee,"padding-block":Ee,"padding-block-end":Ee,"padding-block-start":Ee,"padding-inline":Ee,"padding-inline-end":Ee,"padding-inline-start":Ee,"mask-position-x":Ee,"mask-position-y":Ee,"mask-size":Ee,height:Ee,width:Ee,"min-height":Ee,"max-height":Ee,"min-width":Ee,"max-width":Ee,bottom:Ee,left:Ee,top:Ee,right:Ee,inset:Ee,"inset-block":Ee,"inset-block-end":Ee,"inset-block-start":Ee,"inset-inline":Ee,"inset-inline-end":Ee,"inset-inline-start":Ee,"box-shadow":Ee,"text-shadow":Ee,"column-gap":Ee,"column-rule":Ee,"column-rule-width":Ee,"column-width":Ee,"font-size":Ee,"font-size-delta":Ee,"letter-spacing":Ee,"text-decoration-thickness":Ee,"text-indent":Ee,"text-stroke":Ee,"text-stroke-width":Ee,"word-spacing":Ee,motion:Ee,"motion-offset":Ee,outline:Ee,"outline-offset":Ee,"outline-width":Ee,perspective:Ee,"perspective-origin-x":Uw,"perspective-origin-y":Uw,"transform-origin":Uw,"transform-origin-x":Uw,"transform-origin-y":Uw,"transform-origin-z":Uw,"transition-delay":rx,"transition-duration":rx,"vertical-align":Ee,"flex-basis":Ee,"shape-margin":Ee,size:Ee,gap:Ee,grid:Ee,"grid-gap":Ee,"row-gap":Ee,"grid-row-gap":Ee,"grid-column-gap":Ee,"grid-template-rows":Ee,"grid-template-columns":Ee,"grid-auto-rows":Ee,"grid-auto-columns":Ee,"box-shadow-x":Ee,"box-shadow-y":Ee,"box-shadow-blur":Ee,"box-shadow-spread":Ee,"font-line-height":Ee,"text-shadow-x":Ee,"text-shadow-y":Ee,"text-shadow-blur":Ee};function qne(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var eRe=qne(XTe);function U_(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=U_(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=U_(s,e[s],n);else for(var i in e)e[i]=U_(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||eRe[t];return o&&!(e===0&&o===Ee)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function tRe(t){t===void 0&&(t={});var e=qne(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=U_(o,s[o],e);return s}function r(s,i){return U_(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var nRe={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},rRe={position:!0,size:!0},sx={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},KD={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function sRe(t,e,n){return t.map(function(r){return Kne(r,e,n,!1,!0)})}function Vne(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?Vne(t[0],e,n,r):typeof t[0]=="object"?sRe(t,e,r):[t]}function Kne(t,e,n,r,s){if(!(sx[e]||KD[e]))return[];var i=[];if(KD[e]&&(t=iRe(t,n,KD[e],r)),Object.keys(t).length)for(var o in sx[e]){if(t[o]){Array.isArray(t[o])?i.push(rRe[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}sx[e][o]!=null&&i.push(sx[e][o])}return!i.length||s?i:[i]}function iRe(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=XA((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function XA(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=XA(t.fallbacks[i],e,!0);continue}t[r]=Vne(s,r,nRe,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=XA(t.fallbacks,e,!0);continue}t[r]=Kne(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function oRe(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=XA(e[r],n);return e}return XA(e,n)}return{onProcessStyle:t}}function AU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function aRe(t){if(Array.isArray(t))return AU(t)}function cRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lRe(t,e){if(t){if(typeof t=="string")return AU(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AU(t,e):void 0}}function uRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dRe(t){return aRe(t)||cRe(t)||lRe(t)||uRe()}var Q1="",SU="",Yne="",Qne="",hRe=OC&&"ontouchstart"in document.documentElement;if(OC){var YD={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},fRe=document.createElement("p"),QD=fRe.style,pRe="Transform";for(var JD in YD)if(JD+pRe in QD){Q1=JD,SU=YD[JD];break}Q1==="Webkit"&&"msHyphens"in QD&&(Q1="ms",SU=YD.ms,Qne="edge"),Q1==="Webkit"&&"-apple-trailing-word"in QD&&(Yne="apple")}var Nn={js:Q1,css:SU,vendor:Yne,browser:Qne,isTouch:hRe};function gRe(t){return t[1]==="-"||Nn.js==="ms"?t:"@"+Nn.css+"keyframes"+t.substr(10)}var mRe={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Nn.js==="ms"?"-webkit-"+e:Nn.css+e}},yRe={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Nn.js==="Webkit"?Nn.css+"print-"+e:e}},wRe=/[-\s]+(.)?/g;function bRe(t,e){return e?e.toUpperCase():""}function u4(t){return t.replace(wRe,bRe)}function um(t){return u4("-"+t)}var vRe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Nn.js==="Webkit"){var r="mask-image";if(u4(r)in n)return e;if(Nn.js+um(r)in n)return Nn.css+e}return e}},ERe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Nn.vendor==="apple"&&!Nn.isTouch?Nn.css+e:e}},CRe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Nn.css+e}},_Re={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Nn.css+e}},ARe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Nn.js==="Webkit"||Nn.js==="ms"&&Nn.browser!=="edge"?Nn.css+e:e}},SRe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Nn.js==="Moz"||Nn.js==="ms"||Nn.vendor==="apple"?Nn.css+e:e}},IRe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Nn.js==="Webkit"){var r="WebkitColumn"+um(e);return r in n?Nn.css+"column-"+e:!1}if(Nn.js==="Moz"){var s="page"+um(e);return s in n?"page-"+e:!1}return!1}},NRe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Nn.js==="Moz")return e;var r=e.replace("-inline","");return Nn.js+um(r)in n?Nn.css+r:!1}},xRe={supportedProperty:function(e,n){return u4(e)in n?e:!1}},TRe={supportedProperty:function(e,n){var r=um(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Nn.js+r in n?Nn.css+e:Nn.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},RRe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Nn.js==="ms"?""+Nn.css+e:e}},kRe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Nn.js==="ms"?Nn.css+"scroll-chaining":e}},PRe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},ORe={supportedProperty:function(e,n){var r=PRe[e];return r&&Nn.js+um(r)in n?Nn.css+r:!1}},Jne={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},DRe=Object.keys(Jne),MRe=function(e){return Nn.css+e},BRe={supportedProperty:function(e,n,r){var s=r.multiple;if(DRe.indexOf(e)>-1){var i=Jne[e];if(!Array.isArray(i))return Nn.js+um(i)in n?Nn.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Nn.js+um(i[0])in n))return!1;return i.map(MRe)}return!1}},Zne=[mRe,yRe,vRe,ERe,CRe,_Re,ARe,SRe,IRe,NRe,xRe,TRe,RRe,kRe,ORe,BRe],BW=Zne.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),URe=Zne.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,dRe(e.noPrefill)),t},[]),J1,ny={};if(OC){J1=document.createElement("p");var ZD=window.getComputedStyle(document.documentElement,"");for(var XD in ZD)isNaN(XD)||(ny[ZD[XD]]=ZD[XD]);URe.forEach(function(t){return delete ny[t]})}function IU(t,e){if(e===void 0&&(e={}),!J1)return t;if(ny[t]!=null)return ny[t];(t==="transition"||t==="transform")&&(e[t]=t in J1.style);for(var n=0;n<BW.length&&(ny[t]=BW[n](t,J1.style,e),!ny[t]);n++);try{J1.style[t]=""}catch{return!1}return ny[t]}var Lw={},LRe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},$Re=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Ip;function FRe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?IU(e):", "+IU(n);return r||e||n}OC&&(Ip=document.createElement("p"));function UW(t,e){var n=e;if(!Ip||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Lw[r]!=null)return Lw[r];try{Ip.style[t]=n}catch{return Lw[r]=!1,!1}if(LRe[t])n=n.replace($Re,FRe);else if(Ip.style[t]===""&&(n=Nn.css+n,n==="-ms-flex"&&(Ip.style[t]="-ms-flexbox"),Ip.style[t]=n,Ip.style[t]===""))return Lw[r]=!1,!1;return Ip.style[t]="",Lw[r]=n,Lw[r]}function jRe(){function t(s){if(s.type==="keyframes"){var i=s;i.at=gRe(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=IU(i);c&&c!==i&&(a=!0);var l=!1,u=UW(c,c0(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return UW(i,c0(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function WRe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var zRe=function(e){return e===void 0&&(e={}),{plugins:[TTe(),kTe(e.observable),MTe(),jTe(),HTe(),VTe(),KTe(),ZTe(),tRe(e.defaultUnit),oRe(),jRe(),WRe()]}},HRe=Number.MIN_SAFE_INTEGER||-1e9,GRe=function(){return HRe++},qRe=G.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!OC}),LW=new Map,d4=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new PW),r[n];var s=LW.get(n);return s||(s=new PW,LW.set(n,s)),s},$W=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=d4(r,s);o.manage(i),r.registry&&r.registry.add(n)}},VRe=function(e){if(e.sheet){var n=d4(e.context,e.index);n.unmanage(e.theme)}},KRe=jne(zRe()),Xne=new WeakMap,ere=function(e){return Xne.get(e)},YRe=function(e,n){Xne.set(e,n)},QRe=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function JRe(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Ms({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var ZRe=function(e){if(!e.context.disableStylesGeneration){var n=d4(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||KRe,i=QRe(e),o=Wne(i),a=s.createStyleSheet(i,JRe(e,o!==null));return YRe(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},XRe=function(e,n){for(var r in n)e.deleteRule(n[r])},eke=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},tke=function(e,n){var r=ere(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},nke=function(e,n){if(!n)return e.classes;var r=ere(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function FW(t){return t?G.useEffect:Hc.useInsertionEffect||G.useLayoutEffect}var e3={},zu=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?GRe():s,o=r.theming,a=r.name,c=Tne(r,["index","theming","name"]),l=o&&o.context||Mne,u=function(f){return typeof e=="function"&&(f||G.useContext(l))||e3},d={};return function(f){var p=G.useRef(!0),g=G.useContext(qRe),m=u(f&&f.theme),y=G.useMemo(function(){var I=ZRe({context:g,styles:e,name:a,theme:m,index:i,sheetOptions:c});return I&&g.isSSR&&$W({index:i,context:g,sheet:I,theme:m}),[I,I?tke(I,f):null]},[g,m]),w=y[0],C=y[1];FW(g.isSSR)(function(){w&&C&&!p.current&&eke(f,w,C)},[f]),FW(g.isSSR)(function(){return w&&$W({index:i,context:g,sheet:w,theme:m}),function(){w&&(VRe({index:i,context:g,sheet:w,theme:m}),C&&XRe(w,C))}},[w]);var N=G.useMemo(function(){return w&&C?nke(w,C):d},[w,C]);return G.useDebugValue(N),G.useDebugValue(m===e3?"No theme":m),G.useEffect(function(){p.current=!1}),N}};const rke=zu({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function t3({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=rke(),d=G.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=b.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[b.jsx("img",{src:t,alt:e,className:u.iconImage}),b.jsx("span",{className:u.iconLabel,children:e})]});return o?f:b.jsx(LI,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const ske=zu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function pl({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=ske({isOpen:e}),u=G.useRef(null),d=()=>{r&&r(t)};return b.jsx(LI,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:b.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[b.jsxs("div",{className:l.header,children:[b.jsx("span",{children:i||t.replace("-popup","")}),b.jsxs("div",{className:l.titleBarButtons,children:[b.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),b.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),b.jsx("div",{className:l.content,children:s})]})})}const n3=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],ike=80,oke=80,ake=10,cke=10,lke=10,uke=10,dke=({onIconClick:t})=>{const e=n3.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:lke+d*(ike+ake),y:uke+u*(oke+cke)},u++,u>=4&&(u=0,d++)}),l},[r,s]=G.useState(n()),[i,o]=G.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return b.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:b.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>b.jsx(t3,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&b.jsx(pl,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:n3.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>b.jsx(t3,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&b.jsx(pl,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:n3.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>b.jsx(t3,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},hke=zu({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),fke=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=G.useState(!1),[o,a]=G.useState(new Date),c=hke({isOpen:s});G.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return b.jsxs("div",{className:c.taskbar,children:[b.jsxs("div",{className:c.leftSection,children:[b.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),b.jsx("div",{className:c.windows,children:t.map(h=>b.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),b.jsxs("div",{className:c.rightSection,children:[b.jsxs("div",{className:c.statusSection,children:[b.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:b.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),b.jsx("div",{className:c.clock,children:l(o)})]}),s&&b.jsxs("div",{className:c.menu,children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function tre(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function h4(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function nre(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function f4(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function rre(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function sre(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,g,m,y,w,C,N,I,k,P,U,M,H,j,K,$,v,E,_,D,x,B,W,L,S,F,X;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(m=u.content)==null?void 0:m.metadata)==null?void 0:y.name)||((N=(C=(w=u.content)==null?void 0:w.files)==null?void 0:C[0])==null?void 0:N.name)||`#${(I=u.mint)==null?void 0:I.slice(0,8)}`,image_url:((U=(P=(k=u.content)==null?void 0:k.files)==null?void 0:P[0])==null?void 0:U.uri)||((H=(M=u.content)==null?void 0:M.metadata)==null?void 0:H.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:((K=(j=u.content)==null?void 0:j.metadata)==null?void 0:K.description)||"",image:((E=(v=($=u.content)==null?void 0:$.files)==null?void 0:v[0])==null?void 0:E.uri)||((D=(_=u.content)==null?void 0:_.metadata)==null?void 0:D.image)||"",image_url_shrunk:((W=(B=(x=u.content)==null?void 0:x.files)==null?void 0:B[0])==null?void 0:W.uri)||((S=(L=u.content)==null?void 0:L.metadata)==null?void 0:S.image)||"",animation_url:((X=(F=u.content)==null?void 0:F.metadata)==null?void 0:X.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function pke(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,g,m,y,w,C,N,I,k,P,U,M,H,j,K,$,v,E,_,D,x,B,W,L,S,F,X,se,ge;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(m=u.content)==null?void 0:m.metadata)==null?void 0:y.name)||((N=(C=(w=u.content)==null?void 0:w.files)==null?void 0:C[0])==null?void 0:N.name)||`#${(I=u.mint)==null?void 0:I.slice(0,8)}`,image_url:((U=(P=(k=u.content)==null?void 0:k.files)==null?void 0:P[0])==null?void 0:U.uri)||((H=(M=u.content)==null?void 0:M.metadata)==null?void 0:H.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:((K=(j=u.content)==null?void 0:j.metadata)==null?void 0:K.description)||"",image:((E=(v=($=u.content)==null?void 0:$.files)==null?void 0:v[0])==null?void 0:E.uri)||((D=(_=u.content)==null?void 0:_.metadata)==null?void 0:D.image)||"",image_url_shrunk:((W=(B=(x=u.content)==null?void 0:x.files)==null?void 0:B[0])==null?void 0:W.uri)||((S=(L=u.content)==null?void 0:L.metadata)==null?void 0:S.image)||"",animation_url:((X=(F=u.content)==null?void 0:F.metadata)==null?void 0:X.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((ge=(se=u.grouping)==null?void 0:se.find(Ue=>Ue.group_key==="collection"))==null?void 0:ge.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const gke=zu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),mke=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=gke({isOpen:t}),i=G.useRef(null),[o,a]=G.useState([]),[c,l]=G.useState(!1),[u,d]=G.useState(!1),[h,f]=G.useState({}),[p,g]=G.useState(null),{data:m}=ene();G.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{l(!0),g(null);try{const k=await tre(r);a(k);const P={};k.forEach(U=>{P[U.id]=0}),f(P)}catch(k){g(k.message)}finally{l(!1)}},w=(k,P)=>{f(U=>({...U,[k]:Math.max(0,P)}))},C=async()=>{const k=Object.entries(h).filter(([,P])=>P>0).map(([P,U])=>({id:P,quantity:U}));if(k.length===0){g("Please select at least one item to mint");return}if(!m){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const P=await nre(r,k);if(console.log("Mint API result:",P),P.success&&P.mintTransaction){console.log("Got mint transaction:",P.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const U=await m.sendTransaction({to:P.mintTransaction.to,value:BigInt(P.mintTransaction.value),data:P.mintTransaction.data});console.log("Transaction sent successfully:",U),alert(`NFT Minted Successfully: Transaction Hash - ${U}`),e()}catch(U){console.error("Transaction sending failed:",U),g("Transaction failed: "+U.message)}}else throw new Error(P.message||"Could not retrieve minting transaction.")}catch(P){console.error("Minting failed:",P),g("Minting failed: "+P.message)}finally{d(!1)}},N=(k,P)=>`${parseFloat(k)} ${P}`,I=()=>{n&&n()};return t?b.jsx(LI,{nodeRef:i,handle:`.${s.header}`,children:b.jsxs("div",{ref:i,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"Mint Pixelawbster"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:I,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),b.jsxs("div",{className:s.content,children:[p&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?b.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{children:"Available Lists:"}),o.map(k=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:k.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",N(k.token_price,k.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",k.wallet_limit===4294967295?"Unlimited":k.wallet_limit," per wallet"]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[b.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),b.jsx("input",{type:"number",min:"0",max:k.wallet_limit===4294967295?999:k.wallet_limit,value:h[k.id]||0,onChange:P=>w(k.id,parseInt(P.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},k.id))]}),b.jsx("button",{onClick:()=>void C(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},ire=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",ore=({src:t,alt:e,style:n})=>{const[r,s]=G.useState(t),[i,o]=G.useState(!1),[a,c]=G.useState(0);G.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?b.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):b.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},yke=zu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),wke=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},bke=({nft:t,onClose:e})=>{const n=yke(),r=G.useRef(null),s=wke(t.attributes);return b.jsx(LI,{nodeRef:r,handle:`.${n.header}`,children:b.jsxs("div",{className:n.popup,ref:r,children:[b.jsxs("div",{className:n.header,children:[b.jsxs("span",{children:[t.name," - Details"]}),b.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),b.jsxs("div",{className:n.content,children:[b.jsx(ore,{src:ire(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),b.jsx("h3",{children:"Traits"}),b.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):b.jsx("li",{children:"No traits found."})})]})]})})},vke=Symbol(),jW=Object.getPrototypeOf,NU=new WeakMap,Eke=t=>t&&(NU.has(t)?NU.get(t):jW(t)===Object.prototype||jW(t)===Array.prototype),Cke=t=>Eke(t)&&t[vke]||null,WW=(t,e=!0)=>{NU.set(t,e)},YR={},r3=t=>typeof t=="object"&&t!==null,Pp=new WeakMap,Z1=new WeakSet,_ke=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>r3(l)&&!Z1.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return WW(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:m}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:m,configurable:!0};if(Z1.has(g))WW(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(Pp.has(g)){const[w,C]=Pp.get(g);y.value=i(w,C(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!r3(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(M,H=++a[0])=>{d!==H&&(d=H,h.forEach(j=>j(M,H)))};let p=a[1];const g=(M=++a[1])=>(p!==M&&!h.size&&(p=M,y.forEach(([H])=>{const j=H[1](M);j>d&&(d=j)})),d),m=M=>(H,j)=>{const K=[...H];K[1]=[M,...K[1]],f(K,j)},y=new Map,w=(M,H)=>{if((YR?"production":void 0)!=="production"&&y.has(M))throw new Error("prop listener already exists");if(h.size){const j=H[3](m(M));y.set(M,[H,j])}else y.set(M,[H])},C=M=>{var H;const j=y.get(M);j&&(y.delete(M),(H=j[1])==null||H.call(j))},N=M=>(h.add(M),h.size===1&&y.forEach(([j,K],$)=>{if((YR?"production":void 0)!=="production"&&K)throw new Error("remove already exists");const v=j[3](m($));y.set($,[j,v])}),()=>{h.delete(M),h.size===0&&y.forEach(([j,K],$)=>{K&&(K(),y.set($,[j]))})}),I=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),P=e(I,{deleteProperty(M,H){const j=Reflect.get(M,H);C(H);const K=Reflect.deleteProperty(M,H);return K&&f(["delete",[H],j]),K},set(M,H,j,K){const $=Reflect.has(M,H),v=Reflect.get(M,H,K);if($&&(t(v,j)||o.has(j)&&t(v,o.get(j))))return!0;C(H),r3(j)&&(j=Cke(j)||j);let E=j;if(j instanceof Promise)j.then(_=>{j.status="fulfilled",j.value=_,f(["resolve",[H],_])}).catch(_=>{j.status="rejected",j.reason=_,f(["reject",[H],_])});else{!Pp.has(j)&&n(j)&&(E=c(j));const _=!Z1.has(E)&&Pp.get(E);_&&w(H,_)}return Reflect.set(M,H,E,K),f(["set",[H],j,v]),!0}});o.set(l,P);const U=[I,g,i,N];return Pp.set(P,U),Reflect.ownKeys(l).forEach(M=>{const H=Object.getOwnPropertyDescriptor(l,M);"value"in H&&(P[M]=l[M],delete H.value,delete H.writable),Object.defineProperty(I,M,H)}),P})=>[c,Pp,Z1,t,e,n,r,s,i,o,a],[Ake]=_ke();function vs(t={}){return Ake(t)}function Wo(t,e,n){const r=Pp.get(t);(YR?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function eS(t,e){const n=Pp.get(t);(YR?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function B0(t){return Z1.add(t),t}function Ho(t,e,n,r){let s=t[e];return Wo(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function Ske(t){const e=vs({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var zW={};const ft={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof zW<"u"?zW.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},are={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ft.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var Ike=20,Nke=1,U0=1e6,HW=1e6,xke=-7,Tke=21,Rke=!1,$I="[big.js] ",lw=$I+"Invalid ",mP=lw+"decimal places",kke=lw+"rounding mode",cre=$I+"Division by zero",Dr={},Wd=void 0,Pke=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function lre(){function t(e){var n=this;if(!(n instanceof t))return e===Wd?lre():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(lw+"value");e=e===0&&1/e<0?"-0":String(e)}Oke(n,e)}n.constructor=t}return t.prototype=Dr,t.DP=Ike,t.RM=Nke,t.NE=xke,t.PE=Tke,t.strict=Rke,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Oke(t,e){var n,r,s;if(!Pke.test(e))throw Error(lw+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function uw(t,e,n,r){var s=t.c;if(n===Wd&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(kke);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Wd))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Wd||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function dw(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Dr.abs=function(){var t=new this.constructor(this);return t.s=1,t};Dr.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Dr.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>U0)throw Error(mP);if(!s[0])throw Error(cre);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),m=g.length,y=t,w=y.c=[],C=0,N=o+(y.e=e.e-t.e)+1;for(y.s=i,i=N<0?0:N,h.unshift(0);m++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(m=g.length))u=a>m?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=m==a?s:h;m;){if(g[--m]<c[m]){for(d=m;d&&!g[--d];)g[d]=9;--g[d],g[m]+=10}g[m]-=c[m]}for(;!g[0];)g.shift()}else break}w[C++]=u?l:++l,g[0]&&u?g[m]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Wd)&&i--);return!w[0]&&C!=1&&(w.shift(),y.e--,N--),C>N&&uw(y,N,n.RM,g[0]!==Wd),y};Dr.eq=function(t){return this.cmp(t)===0};Dr.gt=function(t){return this.cmp(t)>0};Dr.gte=function(t){return this.cmp(t)>-1};Dr.lt=function(t){return this.cmp(t)<0};Dr.lte=function(t){return this.cmp(t)<1};Dr.minus=Dr.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Dr.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(cre);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Dr.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Dr.plus=Dr.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Dr.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-HW||t>HW)throw Error(lw+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Dr.prec=function(t,e){if(t!==~~t||t<1||t>U0)throw Error(lw+"precision");return uw(new this.constructor(this),t,e)};Dr.round=function(t,e){if(t===Wd)t=0;else if(t!==~~t||t<-U0||t>U0)throw Error(mP);return uw(new this.constructor(this),t+this.e+1,e)};Dr.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error($I+"No square root");i=Math.sqrt(+dw(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return uw(t,(s.DP-=4)+t.e+1,s.RM)};Dr.times=Dr.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Dr.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Wd){if(t!==~~t||t<0||t>U0)throw Error(mP);for(n=uw(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return dw(n,!0,!!r)};Dr.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Wd){if(t!==~~t||t<0||t>U0)throw Error(mP);for(n=uw(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return dw(n,!1,!!r)};Dr[Symbol.for("nodejs.util.inspect.custom")]=Dr.toJSON=Dr.toString=function(){var t=this,e=t.constructor;return dw(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Dr.toNumber=function(){var t=+dw(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error($I+"Imprecise conversion");return t};Dr.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Wd){if(t!==~~t||t<1||t>U0)throw Error(lw+"precision");for(n=uw(new r(n),t,e);n.c.length<t;)n.c.push(0)}return dw(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Dr.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error($I+"valueOf disallowed");return dw(t,t.e<=e.NE||t.e>=e.PE,!0)};var ia=lre();const Dke={bigNumber(t){return t?new ia(t):new ia(0)},multiply(t,e){if(t===void 0||e===void 0)return new ia(0);const n=new ia(t),r=new ia(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},Mke=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Bke=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Uke=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Lke={getERC20Abi:t=>ft.USDT_CONTRACT_ADDRESSES.includes(t)?Uke:Mke,getSwapAbi:()=>Bke},ap={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},_n={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function s3(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const pn={setItem(t,e){X1()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(X1())return localStorage.getItem(t)||void 0},removeItem(t){X1()&&localStorage.removeItem(t)},clear(){X1()&&localStorage.clear()}};function X1(){return typeof window<"u"&&typeof localStorage<"u"}function ff(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var GW={};const i3=(typeof process<"u"&&typeof GW<"u"?GW.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",ure=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],$ke="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",zr={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:i3,SECURE_SITE_DASHBOARD:`${i3}/dashboard`,SECURE_SITE_FAVICON:`${i3}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Ct={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ct.getActiveNamespace(),e=Ct.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{pn.setItem(_n.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=pn.getItem(_n.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{pn.removeItem(_n.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{pn.setItem(_n.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{pn.setItem(_n.ACTIVE_CAIP_NETWORK_ID,t),Ct.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return pn.getItem(_n.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{pn.removeItem(_n.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=s3(t);pn.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ct.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),pn.setItem(_n.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=pn.getItem(_n.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=s3(t);pn.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return pn.getItem(_n.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=s3(t);return pn.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{pn.setItem(_n.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return pn.getItem(_n.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{pn.removeItem(_n.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return pn.getItem(_n.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=pn.getItem(_n.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{pn.setItem(_n.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return pn.getItem(_n.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=pn.getItem(_n.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));pn.setItem(_n.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ct.getConnectedNamespaces();e.includes(t)||(e.push(t),Ct.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ct.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Ct.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return pn.getItem(_n.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{pn.setItem(_n.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{pn.removeItem(_n.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=pn.getItem(_n.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ct.getBalanceCache();pn.setItem(_n.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Ct.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Ct.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ct.getBalanceCache();e[t.caipAddress]=t,pn.setItem(_n.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=pn.getItem(_n.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ct.getBalanceCache();pn.setItem(_n.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Ct.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Ct.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ct.getNativeBalanceCache();e[t.caipAddress]=t,pn.setItem(_n.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=pn.getItem(_n.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Ct.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Ct.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ct.getEnsCache();e[t.address]=t,pn.setItem(_n.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ct.getEnsCache();pn.setItem(_n.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=pn.getItem(_n.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Ct.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Ct.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ct.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},pn.setItem(_n.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ct.getIdentityCache();pn.setItem(_n.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{pn.removeItem(_n.PORTFOLIO_CACHE),pn.removeItem(_n.NATIVE_BALANCE_CACHE),pn.removeItem(_n.ENS_CACHE),pn.removeItem(_n.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{pn.setItem(_n.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=pn.getItem(_n.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Ct.getConnections(),[e]:t};pn.setItem(_n.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=pn.getItem(_n.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},$t={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return $t.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=zr.TEN_SEC_MS:!0},isAllowedRetry(t,e=zr.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if($t.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+zr.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if($t.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!$t.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ct.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,$t.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ft.W3M_API_URL},getBlockchainApiUrl(){return ft.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ft.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?zr.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ft.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function b1(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let FI=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await b1(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await b1(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await b1(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await b1(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await b1(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const Fke={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?zr.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if($t.isTelegram()){if($t.isIos())return t.filter(e=>e!=="google");if($t.isMac())return t.filter(e=>e!=="x");if($t.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},qt=vs({features:zr.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:zr.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Pe={state:qt,subscribeKey(t,e){return Ho(qt,t,e)},setOptions(t){Object.assign(qt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...qt.remoteFeatures,...t};qt.remoteFeatures=e,(n=qt.remoteFeatures)!=null&&n.socials&&(qt.remoteFeatures.socials=Fke.filterSocialsByPlatform(qt.remoteFeatures.socials))},setFeatures(t){if(!t)return;qt.features||(qt.features=zr.DEFAULT_FEATURES);const e={...qt.features,...t};qt.features=e},setProjectId(t){qt.projectId=t},setCustomRpcUrls(t){qt.customRpcUrls=t},setAllWallets(t){qt.allWallets=t},setIncludeWalletIds(t){qt.includeWalletIds=t},setExcludeWalletIds(t){qt.excludeWalletIds=t},setFeaturedWalletIds(t){qt.featuredWalletIds=t},setTokens(t){qt.tokens=t},setTermsConditionsUrl(t){qt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){qt.privacyPolicyUrl=t},setCustomWallets(t){qt.customWallets=t},setIsSiweEnabled(t){qt.isSiweEnabled=t},setIsUniversalProvider(t){qt.isUniversalProvider=t},setSdkVersion(t){qt.sdkVersion=t},setMetadata(t){qt.metadata=t},setDisableAppend(t){qt.disableAppend=t},setEIP6963Enabled(t){qt.enableEIP6963=t},setDebug(t){qt.debug=t},setEnableWalletConnect(t){qt.enableWalletConnect=t},setEnableWalletGuide(t){qt.enableWalletGuide=t},setEnableAuthLogger(t){qt.enableAuthLogger=t},setEnableWallets(t){qt.enableWallets=t},setPreferUniversalLinks(t){qt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){qt.hasMultipleAddresses=t},setSIWX(t){qt.siwx=t},setConnectMethodsOrder(t){qt.features={...qt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){qt.features={...qt.features,walletFeaturesOrder:t}},setSocialsOrder(t){qt.remoteFeatures={...qt.remoteFeatures,socials:t}},setCollapseWallets(t){qt.features={...qt.features,collapseWallets:t}},setEnableEmbedded(t){qt.enableEmbedded=t},setAllowUnsupportedChain(t){qt.allowUnsupportedChain=t},setManualWCControl(t){qt.manualWCControl=t},setEnableNetworkSwitch(t){qt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(qt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){qt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return qt.universalProviderConfigOverride},getSnapshot(){return eS(qt)}},jke=Object.freeze({enabled:!0,events:[]}),Wke=new FI({baseUrl:$t.getAnalyticsUrl(),clientId:null}),zke=5,Hke=60*1e3,cp=vs({...jke}),Gke={state:cp,subscribeKey(t,e){return Ho(cp,t,e)},async sendError(t,e){if(!cp.enabled)return;const n=Date.now();if(cp.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Hke}).length>=zke)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};cp.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Pe.state;await Wke.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:$t.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){cp.enabled=!0},disable(){cp.enabled=!1},clearEvents(){cp.events=[]}};let xU=class TU extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,TU.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,TU):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function qW(t,e){const n=t instanceof xU?t:new xU(t instanceof Error?t.message:String(t),e,t);throw Gke.sendError(n,n.category),n}function nl(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return qW(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return qW(a,e)}},n[r]=i}else n[r]=s}),n}const Sd={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},qke={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Sd.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Sd.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Sd.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Sd.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ft.CHAIN.SOLANA&&t===Sd.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Sd.COINBASE.url}/dapp?cb_url=${r}`)}},mc=vs({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Vke={state:mc,subscribeNetworkImages(t){return Wo(mc.networkImages,()=>t(mc.networkImages))},subscribeKey(t,e){return Ho(mc,t,e)},subscribe(t){return Wo(mc,()=>t(mc))},setWalletImage(t,e){mc.walletImages[t]=e},setNetworkImage(t,e){mc.networkImages[t]=e},setChainImage(t,e){mc.chainImages[t]=e},setConnectorImage(t,e){mc.connectorImages={...mc.connectorImages,[t]:e}},setTokenImage(t,e){mc.tokenImages[t]=e},setCurrencyImage(t,e){mc.currencyImages[t]=e}},vu=nl(Vke),Kke={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},o3=vs({networkImagePromises:{}}),dre={async fetchWalletImage(t){if(t)return await jt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(o3.networkImagePromises[t]||(o3.networkImagePromises[t]=jt._fetchNetworkImage(t)),await o3.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return vu.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return vu.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return vu.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return vu.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return vu.state.connectorImages[t.imageId]},getChainImage(t){return vu.state.networkImages[Kke[t]]}},lp=vs({message:"",variant:"info",open:!1}),Yke={state:lp,subscribeKey(t,e){return Ho(lp,t,e)},open(t,e){const{debug:n}=Pe.state,{shortMessage:r,longMessage:s}=t;n&&(lp.message=r,lp.variant=e,lp.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){lp.open=!1,lp.message="",lp.variant="info"}},Od=nl(Yke),Qke=$t.getAnalyticsUrl(),Jke=new FI({baseUrl:Qke,clientId:null}),Zke=["MODAL_CREATED"],vh=vs({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),xs={state:vh,subscribe(t){return Wo(vh,()=>t(vh))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Pe.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Et.state.address;if(Zke.includes(t.data.event)||typeof window>"u")return;await Jke.post({path:"/e",params:xs.getSdkProperties(),body:{eventId:$t.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),vh.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ft.HTTP_STATUS_CODES.FORBIDDEN&&!vh.reportedErrors.FORBIDDEN&&(Od.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${X1()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),vh.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;vh.timestamp=Date.now(),vh.data=t,(e=Pe.state.features)!=null&&e.analytics&&xs._sendAnalyticsEvent(vh)}},Xke=$t.getApiUrl(),Sa=new FI({baseUrl:Xke,clientId:null}),e2e=40,VW=4,t2e=20,An=vs({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),jt={state:An,subscribeKey(t,e){return Ho(An,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Pe.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Pe.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Sa.baseUrl}/getWalletImage/${t}`,n=await Sa.getBlob({path:e,params:jt._getSdkProperties()});vu.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Sa.baseUrl}/public/getAssetImage/${t}`,n=await Sa.getBlob({path:e,params:jt._getSdkProperties()});vu.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Sa.baseUrl}/public/getAssetImage/${t}`,n=await Sa.getBlob({path:e,params:jt._getSdkProperties()});vu.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Sa.baseUrl}/public/getCurrencyImage/${t}`,n=await Sa.getBlob({path:e,params:jt._getSdkProperties()});vu.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Sa.baseUrl}/public/getTokenImage/${t}`,n=await Sa.getBlob({path:e,params:jt._getSdkProperties()});vu.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return $t.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Sd.COINBASE.id?!0:J.state.activeChain==="solana"&&(n.id===Sd.SOLFLARE.id||n.id===Sd.PHANTOM.id)):t},async fetchProjectConfig(){return(await Sa.get({path:"/appkit/v1/config",params:jt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Sa.get({path:"/projects/v1/origins",params:jt._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=J.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!dre.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>jt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=ht.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>jt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>jt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>jt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];jt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Sd).map(o=>o.id));const r=await Sa.get({path:"/getWallets",params:{...jt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:jt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Pe.state;if(t!=null&&t.length){const e={...jt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??VW,include:t},{data:n}=await jt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>jt._fetchWalletImage(i))),An.featured=r,An.allFeatured=r}},async fetchRecommendedWallets(){try{An.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=Pe.state,r=[...e??[],...n??[]].filter(Boolean),s=J.getRequestedCaipNetworkIds().join(","),i={page:1,entries:VW,include:t,exclude:r,chains:s},{data:o,count:a}=await jt.fetchWallets(i),c=Ct.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>jt._fetchWalletImage(d))),An.recommended=o,An.allRecommended=o,An.count=a??0}catch{}finally{An.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=Pe.state,s=J.getRequestedCaipNetworkIds().join(","),i=[...An.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:e2e,include:e,exclude:i,chains:s},{data:a,count:c}=await jt.fetchWallets(o),l=a.slice(0,t2e).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>jt._fetchWalletImage(u))),An.wallets=$t.uniqueBy([...An.wallets,...jt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),An.count=c>An.count?c:An.count,An.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await jt.fetchWallets(e);n&&n.forEach(r=>{An.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=Pe.state,s=J.getRequestedCaipNetworkIds().join(",");An.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await jt.fetchWallets(i);xs.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>jt._fetchWalletImage(c)),$t.wait(300)]),An.search=jt._filterOutExtensions(o)},initPromise(t,e){const n=An.promises[t];return n||(An.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&jt.initPromise("connectorImages",jt.fetchConnectorImages),e&&jt.initPromise("featuredWallets",jt.fetchFeaturedWallets),n&&jt.initPromise("recommendedWallets",jt.fetchRecommendedWallets),r&&jt.initPromise("networkImages",jt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=Pe.state.features)!=null&&t.analytics&&jt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Sa.get({path:"/getAnalyticsConfig",params:jt._getSdkProperties()});Pe.setFeatures({analytics:t})}catch{Pe.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){An.featured=An.allFeatured,An.recommended=An.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");An.featured=An.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),An.recommended=An.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),An.filteredWallets=An.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){An.filteredWallets=[]},setFilterByNamespace(t){if(!t){An.featured=An.allFeatured,An.recommended=An.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");An.featured=An.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),An.recommended=An.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),An.filteredWallets=An.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Lr=vs({view:"Connect",history:["Connect"],transactionStack:[]}),n2e={state:Lr,subscribeKey(t,e){return Ho(Lr,t,e)},pushTransactionStack(t){Lr.transactionStack.push(t)},popTransactionStack(t){const e=Lr.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Pn.goBack();break;case"cancel":s==null||s(),Pn.goBack();break}},push(t,e){t!==Lr.view&&(Lr.view=t,Lr.history.push(t),Lr.data=e)},reset(t,e){Lr.view=t,Lr.history=[t],Lr.data=e},replace(t,e){Lr.history.at(-1)===t||(Lr.view=t,Lr.history[Lr.history.length-1]=t,Lr.data=e)},goBack(){var r;const t=J.state.activeCaipAddress,e=Pn.state.view==="ConnectingFarcaster",n=!t&&e;if(Lr.history.length>1){Lr.history.pop();const[s]=Lr.history.slice(-1);s&&(t&&s==="Connect"?Lr.view="Account":Lr.view=s)}else Fi.close();(r=Lr.data)!=null&&r.wallet&&(Lr.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Et.setFarcasterUrl(void 0,J.state.activeChain);const a=ht.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=eS(Pe.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Lr.history.length>1){Lr.history=Lr.history.slice(0,t+1);const[e]=Lr.history.slice(-1);e&&(Lr.view=e)}},goBackOrCloseModal(){Pn.state.history.length>1?Pn.goBack():Fi.close()}},Pn=nl(n2e),Eh=vs({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),RU={state:Eh,subscribe(t){return Wo(Eh,()=>t(Eh))},setThemeMode(t){Eh.themeMode=t;try{const e=ht.getAuthConnector();if(e){const n=RU.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:ff(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Eh.themeVariables={...Eh.themeVariables,...t};try{const e=ht.getAuthConnector();if(e){const n=RU.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:ff(Eh.themeVariables,Eh.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return eS(Eh)}},Ha=nl(RU),hre={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},ar=vs({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...hre},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),r2e={state:ar,subscribe(t){return Wo(ar,()=>{t(ar)})},subscribeKey(t,e){return Ho(ar,t,e)},initialize(t){t.forEach(e=>{const n=Ct.getConnectedConnectorId(e);n&&ht.setConnectorId(n,e)})},setActiveConnector(t){t&&(ar.activeConnector=B0(t))},setConnectors(t){t.filter(s=>!ar.allConnectors.some(i=>i.id===s.id&&ht.getConnectorName(i.name)===ht.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&ar.allConnectors.push(B0(s))});const n=ht.getEnabledNamespaces(),r=ht.getEnabledConnectors(n);ar.connectors=ht.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(ar.filterByNamespaceMap).forEach(e=>{ar.filterByNamespaceMap[e]=!1}),t.forEach(e=>{ar.filterByNamespaceMap[e]=!0}),ht.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){ar.filterByNamespaceMap[t]=e,ht.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ht.getEnabledNamespaces(),e=ht.getEnabledConnectors(t),n=ht.areAllNamespacesEnabled();ar.connectors=ht.mergeMultiChainConnectors(e),n?jt.clearFilterByNamespaces():jt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(ar.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return ar.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(ar.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ht.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ft.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=ht.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ft.CONNECTOR_ID.AUTH){const s=t,i=eS(Pe.state),o=Ha.getSnapshot().themeMode,a=Ha.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:ff(a,o)}),ht.setConnectors([t])}else ht.setConnectors([t])},getAuthConnector(t){var r;const e=t||J.state.activeChain,n=ar.connectors.find(s=>s.id===ft.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return ar.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return ar.allConnectors.find(e=>e.id===t)},getConnector(t,e){return ar.allConnectors.filter(r=>r.chain===J.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=eS(Pe.state),r=Ha.getSnapshot().themeMode,s=Ha.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:ff(s,r)})},getConnectorsByNamespace(t){const e=ar.allConnectors.filter(n=>n.chain===t);return ht.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=ht.getConnector(t.id,t.rdns),n=J.state.activeChain;qke.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Pn.push("ConnectingExternal",{connector:e}):Pn.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?ht.getConnectorsByNamespace(t):ht.mergeMultiChainConnectors(ar.allConnectors)},setFilterByNamespace(t){ar.filterByNamespace=t,ar.connectors=ht.getConnectors(t),jt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(ar.activeConnectorIds={...ar.activeConnectorIds,[e]:t},Ct.setConnectedConnectorId(e,t))},removeConnectorId(t){ar.activeConnectorIds={...ar.activeConnectorIds,[t]:void 0},Ct.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return ar.activeConnectorIds[t]},isConnected(t){return t?!!ar.activeConnectorIds[t]:Object.values(ar.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ar.activeConnectorIds={...hre}}},ht=nl(r2e);var WE={};const s2e="https://secure.walletconnect.org/sdk",i2e=(typeof process<"u"&&typeof WE<"u"?WE.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||s2e,o2e=(typeof process<"u"&&typeof WE<"u"?WE.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",a2e=(typeof process<"u"&&typeof WE<"u"?WE.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",bt={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},go={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Ym=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),di=vs({...Ym}),c2e={state:di,subscribeKey(t,e){return Ho(di,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=$t.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){di.message=Ym.message,di.variant=Ym.variant,di.svg=Ym.svg,di.open=Ym.open,di.autoClose=Ym.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Ym.autoClose}){di.open?(di.open=!1,setTimeout(()=>{di.message=t,di.variant=n,di.svg=e,di.open=!0,di.autoClose=r},150)):(di.message=t,di.variant=n,di.svg=e,di.open=!0,di.autoClose=r)}},Su=c2e,Xr=vs({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),l2e={state:Xr,subscribe(t){return Wo(Xr,()=>t(Xr))},setLastNetworkInView(t){Xr.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Xr.loading=!0;try{const s=await Jt.fetchTransactions({account:t,cursor:Xr.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=e_.filterSpamTransactions(s.data),o=e_.filterByConnectedChain(i),a=[...Xr.transactions,...o];Xr.loading=!1,e==="coinbase"?Xr.coinbaseTransactions=e_.groupTransactionsByYearAndMonth(Xr.coinbaseTransactions,s.data):(Xr.transactions=a,Xr.transactionsByYear=e_.groupTransactionsByYearAndMonth(Xr.transactionsByYear,o)),Xr.empty=a.length===0,Xr.next=s.next?s.next:void 0}catch{const i=J.state.activeChain;xs.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Pe.state.projectId,cursor:Xr.next,isSmartAccount:((r=Et.state.preferredAccountTypes)==null?void 0:r[i])===go.ACCOUNT_TYPES.SMART_ACCOUNT}}),Su.showError("Failed to fetch transactions"),Xr.loading=!1,Xr.empty=!0,Xr.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Xr.next=void 0},resetTransactions(){Xr.transactions=[],Xr.transactionsByYear={},Xr.lastNetworkInView=void 0,Xr.loading=!1,Xr.empty=!1,Xr.next=void 0}},e_=nl(l2e,"API_ERROR"),qr=vs({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Dm;const u2e={state:qr,subscribeKey(t,e){return Ho(qr,t,e)},_getClient(){return qr._client},setClient(t){qr._client=B0(t)},async connectWalletConnect(){var t,e,n,r;if($t.isTelegram()||$t.isSafari()&&$t.isIos()){if(Dm){await Dm,Dm=void 0;return}if(!$t.isPairingExpired(qr==null?void 0:qr.wcPairingExpiry)){const s=qr.wcUri;qr.wcUri=s;return}Dm=(e=(t=Zt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Zt.state.status="connecting",await Dm,Dm=void 0,qr.wcPairingExpiry=void 0,Zt.state.status="connected"}else await((r=(n=Zt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=Zt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&J.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=Zt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||J.state.activeChain;e&&ht.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Fi.setLoading(!0,J.state.activeChain);const n=ht.getAuthConnector();n&&(Et.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Ct.setPreferredAccountTypes(Et.state.preferredAccountTypes??{[e]:t}),await Zt.reconnectExternal(n),Fi.setLoading(!1,J.state.activeChain),xs.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Zt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Zt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Zt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Zt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Zt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Zt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Zt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Zt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Zt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Zt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Zt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Zt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){qr.wcUri=void 0,qr.wcPairingExpiry=void 0,qr.wcLinking=void 0,qr.recentWallet=void 0,qr.status="disconnected",e_.resetTransactions(),Ct.deleteWalletConnectDeepLink()},resetUri(){qr.wcUri=void 0,qr.wcPairingExpiry=void 0,Dm=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Zt.state;t&&Ct.setWalletConnectDeepLink(t),e&&Ct.setAppKitRecent(e),xs.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Pn.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){qr.wcBasic=t},setUri(t){qr.wcUri=t,qr.wcPairingExpiry=$t.getPairingExpiry()},setWcLinking(t){qr.wcLinking=t},setWcError(t){qr.wcError=t,qr.buffering=!1},setRecentWallet(t){qr.recentWallet=t},setBuffering(t){qr.buffering=t},setStatus(t){qr.status=t},async disconnect(t){var e;try{await((e=Zt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new xU("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){qr.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(ht.state.activeConnectorIds[n]===t.connectorId){const i=J.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Et.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=ht.getConnector(t.connectorId);i?Zt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},Zt=nl(u2e),$w=vs({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),zd={state:$w,subscribe(t){return Wo($w,()=>t($w))},subscribeOpen(t){return Ho($w,"open",t)},set(t){Object.assign($w,{...$w,...t})}},a3={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Im(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},KW={async getMyTokensWithBalance(t){const e=Et.state.address,n=J.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await Jt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=a3.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Zt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Zt.walletGetAssets({account:t,chainFilter:[s]});return a3.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>a3.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:J.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Rr=vs({tokenBalances:[],loading:!1}),d2e={state:Rr,subscribe(t){return Wo(Rr,()=>t(Rr))},subscribeKey(t,e){return Ho(Rr,t,e)},setToken(t){t&&(Rr.token=B0(t))},setTokenAmount(t){Rr.sendTokenAmount=t},setReceiverAddress(t){Rr.receiverAddress=t},setReceiverProfileImageUrl(t){Rr.receiverProfileImageUrl=t},setReceiverProfileName(t){Rr.receiverProfileName=t},setNetworkBalanceInUsd(t){Rr.networkBalanceInUSD=t},setLoading(t){Rr.loading=t},async sendToken(){var t;try{switch(yr.setLoading(!0),(t=J.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await yr.sendEvmToken();return;case"solana":await yr.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{yr.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=J.state.activeChain,e=(n=Et.state.preferredAccountTypes)==null?void 0:n[t];if(!yr.state.sendTokenAmount||!yr.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!yr.state.token)throw new Error("A token is required");(r=yr.state.token)!=null&&r.address?(xs.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===go.ACCOUNT_TYPES.SMART_ACCOUNT,token:yr.state.token.address,amount:yr.state.sendTokenAmount,network:((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await yr.sendERC20Token({receiverAddress:yr.state.receiverAddress,tokenAddress:yr.state.token.address,sendTokenAmount:yr.state.sendTokenAmount,decimals:yr.state.token.quantity.decimals})):(xs.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===go.ACCOUNT_TYPES.SMART_ACCOUNT,token:yr.state.token.symbol||"",amount:yr.state.sendTokenAmount,network:((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await yr.sendNativeToken({receiverAddress:yr.state.receiverAddress,sendTokenAmount:yr.state.sendTokenAmount,decimals:yr.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Rr.loading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?$t.getPlainAddress(r):void 0;if(Rr.lastRetry&&!$t.isAllowedRetry(Rr.lastRetry,30*zr.ONE_SEC_MS))return Rr.loading=!1,[];try{if(s&&e&&n){const a=await KW.getMyTokensWithBalance();return Rr.tokenBalances=a,Rr.lastRetry=void 0,a}}catch(a){Rr.lastRetry=Date.now(),t==null||t(a),Su.showError("Token Balance Unavailable")}finally{Rr.loading=!1}return[]},fetchNetworkBalance(){if(Rr.tokenBalances.length===0)return;const t=KW.mapBalancesToSwapTokens(Rr.tokenBalances);if(!t)return;const e=t.find(n=>n.address===J.getActiveNetworkTokenAddress());e&&(Rr.networkBalanceInUSD=e?Dke.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Pn.pushTransactionStack({});const e=t.receiverAddress,n=Et.state.address,r=Zt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Zt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),xs.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Et.state.preferredAccountTypes)==null?void 0:i.eip155)===go.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=yr.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=Zt._getClient())==null||c.updateBalance("eip155"),yr.resetSend()},async sendERC20Token(t){Pn.pushTransactionStack({onSuccess(){Pn.replace("Account")}});const e=Zt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Et.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=$t.getPlainAddress(t.tokenAddress);await Zt.writeContract({fromAddress:Et.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Lke.getERC20Abi(n),chainNamespace:"eip155"}),yr.resetSend()}},async sendSolanaToken(){var t;if(!yr.state.sendTokenAmount||!yr.state.receiverAddress)throw new Error("An amount and receiver address are required");Pn.pushTransactionStack({onSuccess(){Pn.replace("Account")}}),await Zt.sendTransaction({chainNamespace:"solana",to:yr.state.receiverAddress,value:yr.state.sendTokenAmount}),(t=Zt._getClient())==null||t.updateBalance("solana"),yr.resetSend()},resetSend(){Rr.token=void 0,Rr.sendTokenAmount=void 0,Rr.receiverAddress=void 0,Rr.receiverProfileImageUrl=void 0,Rr.receiverProfileName=void 0,Rr.loading=!1,Rr.tokenBalances=[]}},yr=nl(d2e),c3={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},ix={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},nt=vs({chains:Ske(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),h2e={state:nt,subscribe(t){return Wo(nt,()=>{t(nt)})},subscribeKey(t,e){return Ho(nt,t,e)},subscribeChainProp(t,e,n){let r;return Wo(nt.chains,()=>{var i;const s=n||nt.activeChain;if(s){const o=(i=nt.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Ct.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=Pe.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(nt.noAdapters=!0),nt.noAdapters||(nt.activeChain=a==null?void 0:a.namespace,nt.activeCaipNetwork=i,J.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),nt.activeChain&&zd.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);J.state.chains.set(u,{namespace:u,networkState:vs({...ix,caipNetwork:d==null?void 0:d[0]}),accountState:vs(c3),caipNetworks:d??[],...n}),J.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(nt.activeChain===t){const r=Array.from(nt.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&J.setActiveCaipNetwork(s)}}nt.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){nt.chains.set(t.namespace,{namespace:t.namespace,networkState:{...ix,caipNetwork:r[0]},accountState:c3,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),J.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=nt.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),nt.chains.set(t.chainNamespace,{...e,caipNetworks:r}),J.setRequestedCaipNetworks(r,t.chainNamespace),ht.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=nt.chains.get(t);if(n){const o=((r=nt.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&J.setActiveCaipNetwork(n.caipNetworks[0]),nt.chains.set(t,{...n,caipNetworks:a}),J.setRequestedCaipNetworks(a||[],t),a.length===0&&ht.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=nt.chains.get(t);n&&(n.networkState={...n.networkState||ix,...e},nt.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=nt.chains.get(t);if(r){const s={...r.accountState||c3,...e};nt.chains.set(t,{...r,accountState:s}),(nt.chains.size===1||nt.activeChain===t)&&(e.caipAddress&&(nt.activeCaipAddress=e.caipAddress),Et.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=nt.chains.get(t);if(n){const r={...n.networkState||ix,...e};nt.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){J.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&ht.removeConnectorId(n)},setActiveNamespace(t){var r,s;nt.activeChain=t;const e=t?nt.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(nt.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,nt.activeCaipNetwork=n,J.setChainNetworkData(t,{caipNetwork:n}),Ct.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),zd.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;nt.activeChain!==t.chainNamespace&&J.setIsSwitchingNamespace(!0);const e=nt.chains.get(t.chainNamespace);nt.activeChain=t.chainNamespace,nt.activeCaipNetwork=t,J.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?nt.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:nt.activeCaipAddress=void 0,J.setAccountProp("caipAddress",nt.activeCaipAddress,t.chainNamespace),e&&Et.replaceState(e.accountState),yr.resetSend(),zd.set({activeChain:nt.activeChain,selectedNetworkId:(i=nt.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Ct.setActiveCaipNetworkId(t.caipNetworkId),!J.checkIfSupportedNetwork(t.chainNamespace)&&Pe.state.enableNetworkSwitch&&!Pe.state.allowUnsupportedChain&&!Zt.state.wcBasic&&J.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=nt.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==J.state.activeChain,n=(s=J.getNetworkData(t))==null?void 0:s.caipNetwork,r=J.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await J.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=J.state.chains.get(J.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=nt.activeCaipNetwork)==null?void 0:o.id)})),r=J.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Fi.close()}catch{Pn.goBack()}xs.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||nt.activeChain,n=nt.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||nt.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=nt.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=nt.activeChain;if(e&&(n=e),!n)return;const r=(s=nt.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=nt.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=nt.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return $t.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return nt.chains.forEach(e=>{const n=J.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){J.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=J.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));ht.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return nt.chains.forEach(e=>{const n=J.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return nt.activeCaipNetwork},getActiveCaipAddress(){return nt.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=nt.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=J.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());J.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||nt.activeCaipNetwork,r=J.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!nt.activeChain)return!0;const e=J.getRequestedCaipNetworks(nt.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){J.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=are.caipNetworkIdToNumber((r=nt.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=nt.activeChain;if(!e||!t)return!1;const n=J.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=nt.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=nt.activeCaipNetwork)==null?void 0:s.id)||1,n=zr.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){Fi.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=nt.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&zr.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){J.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");nt.activeCaipAddress=void 0,J.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),ht.removeConnectorId(e)},setIsSwitchingNamespace(t){nt.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(nt.chains.forEach(s=>{ft.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=nt.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=J.state.chains.get(t))==null?void 0:e.accountState:Et.state},getNetworkData(t){var n;const e=t||nt.activeChain;if(e)return(n=J.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=J.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=ht.state.filterByNamespace;return(t?[nt.chains.get(t)]:Array.from(nt.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?J.getRequestedCaipNetworks(t):J.getAllRequestedCaipNetworks()}},J=nl(h2e),f2e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},fre=$t.getBlockchainApiUrl(),Ia=vs({clientId:null,api:new FI({baseUrl:fre,clientId:null}),supportedChains:{http:[],ws:[]}}),Jt={state:Ia,async get(t){const{st:e,sv:n}=Jt.getSdkProperties(),r=Pe.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ia.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Pe.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ia.supportedChains.http.length||await Jt.getSupportedNetworks()}catch{return!1}return Ia.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Jt.get({path:"v1/supported-chains"});return Ia.supportedChains=t,t}catch{return Ia.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Jt.isNetworkSupported(e))return{avatar:"",name:""};const r=Ct.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Jt.get({path:`/v1/identity/${t}`,params:{sender:J.state.activeCaipAddress?$t.getPlainAddress(J.state.activeCaipAddress):void 0}});return Ct.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Jt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Jt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Jt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Jt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Jt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Jt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Jt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ia.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Pe.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Jt.isNetworkSupported((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Jt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Jt.getSdkProperties();if(!await Jt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Jt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Jt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ia.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:zr.CONVERT_SLIPPAGE_TOLERANCE},projectId:Pe.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Jt.getSdkProperties();if(!await Jt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Jt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Jt.getSdkProperties();if(!await Jt.isNetworkSupported((l=J.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Su.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ct.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Jt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Ct.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Jt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Jt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Jt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Jt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Et.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Jt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Jt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Jt.isNetworkSupported((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ia.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Jt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ia.api.post({path:"/v1/generators/onrampurl",params:{projectId:Pe.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Jt.isNetworkSupported((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Jt.get({path:"/v1/onramp/options"})}catch{return f2e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Jt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ia.api.post({path:"/v1/onramp/quote",params:{projectId:Pe.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Jt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Jt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Jt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ia.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Pe.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ia.clientId=t,Ia.api=new FI({baseUrl:fre,clientId:t})}},sl=vs({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),p2e={state:sl,replaceState(t){t&&Object.assign(sl,B0(t))},subscribe(t){return J.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return J.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){J.setAccountProp("status",t,e)},getCaipAddress(t){return J.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?$t.getPlainAddress(t):void 0;e===J.state.activeChain&&(J.state.activeCaipAddress=t),J.setAccountProp("caipAddress",t,e),J.setAccountProp("address",n,e)},setBalance(t,e,n){J.setAccountProp("balance",t,n),J.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){J.setAccountProp("profileName",t,e)},setProfileImage(t,e){J.setAccountProp("profileImage",t,e)},setUser(t,e){J.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){J.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){J.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){J.setAccountProp("currentTab",t,J.state.activeChain)},setTokenBalance(t,e){t&&J.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){J.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){J.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=J.getAccountProp("addressLabels",n)||new Map;r.set(t,e),J.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=J.getAccountProp("addressLabels",e)||new Map;n.delete(t),J.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){J.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){J.setAccountProp("preferredAccountTypes",{...sl.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){sl.preferredAccountTypes=t},setSocialProvider(t,e){t&&J.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){J.setAccountProp("socialWindow",t?B0(t):void 0,e)},setFarcasterUrl(t,e){J.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;sl.balanceLoading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?$t.getPlainAddress(r):void 0;if(sl.lastRetry&&!$t.isAllowedRetry(sl.lastRetry,30*zr.ONE_SEC_MS))return sl.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await Jt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Et.setTokenBalance(c,n),sl.lastRetry=void 0,sl.balanceLoading=!1,c}}catch(a){sl.lastRetry=Date.now(),t==null||t(a),Su.showError("Token Balance Unavailable")}finally{sl.balanceLoading=!1}return[]},resetAccount(t){J.resetAccount(t)}},Et=nl(p2e),g2e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=J.state.activeCaipNetwork,r=Pn.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Et.getCaipAddress(J.state.activeChain),o=t.chainNamespace!==J.state.activeChain,a=Et.getCaipAddress(t.chainNamespace),l=ht.getConnectorId(J.state.activeChain)===ft.CONNECTOR_ID.AUTH,u=ft.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Pn.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Pn.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Pn.push("SwitchNetwork",{...r,network:t})}},Na=vs({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),m2e={state:Na,subscribe(t){return Wo(Na,()=>t(Na))},subscribeKey(t,e){return Ho(Na,t,e)},async open(t){var o,a;const e=Et.state.status==="connected",n=t==null?void 0:t.namespace,r=J.state.activeChain,s=n&&n!==r,i=(o=J.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(Zt.state.wcBasic?jt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await jt.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),ht.setFilterByNamespace(t==null?void 0:t.namespace),Fi.setLoading(!0,n),n&&s){const c=((a=J.getNetworkData(n))==null?void 0:a.caipNetwork)||J.getRequestedCaipNetworks(n)[0];c&&g2e.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=J.state.noAdapters;Pe.state.manualWCControl||c&&!i?$t.isMobile()?Pn.reset("AllWallets"):Pn.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Pn.reset(t.view,t.data):i?Pn.reset("Account"):Pn.reset("Connect")}Na.open=!0,zd.set({open:!0}),xs.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=Pe.state.enableEmbedded,e=!!J.state.activeCaipAddress;Na.open&&xs.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Na.open=!1,Pn.reset("Connect"),Fi.clearLoading(),t?e?Pn.replace("Account"):Pn.push("Connect"):zd.set({open:!1}),Zt.resetUri()},setLoading(t,e){e&&Na.loadingNamespaceMap.set(e,t),Na.loading=t,zd.set({loading:t})},clearLoading(){Na.loadingNamespaceMap.clear(),Na.loading=!1},shake(){Na.shake||(Na.shake=!0,setTimeout(()=>{Na.shake=!1},500))}},Fi=nl(m2e),L_={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},kU={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},y2e={providers:ure,selectedProvider:null,error:null,purchaseCurrency:L_,paymentCurrency:kU,purchaseCurrencies:[L_],paymentCurrencies:[],quotesLoading:!1},tr=vs(y2e),w2e={state:tr,subscribe(t){return Wo(tr,()=>t(tr))},subscribeKey(t,e){return Ho(tr,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=J.state.activeChain===ft.CHAIN.SOLANA?"SOL":"USDC",n=Et.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",$ke),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",Pe.state.projectId),tr.selectedProvider={...t,url:r.toString()}}else tr.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=ure.filter(r=>e.includes(r.name));tr.providers=n}else tr.providers=[]},setPurchaseCurrency(t){tr.purchaseCurrency=t},setPaymentCurrency(t){tr.paymentCurrency=t},setPurchaseAmount(t){PU.state.purchaseAmount=t},setPaymentAmount(t){PU.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Jt.getOnrampOptions();tr.purchaseCurrencies=t.purchaseCurrencies,tr.paymentCurrencies=t.paymentCurrencies,tr.paymentCurrency=t.paymentCurrencies[0]||kU,tr.purchaseCurrency=t.purchaseCurrencies[0]||L_,await jt.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await jt.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;tr.quotesLoading=!0;try{const n=await Jt.getOnrampQuote({purchaseCurrency:tr.purchaseCurrency,paymentCurrency:tr.paymentCurrency,amount:((t=tr.paymentAmount)==null?void 0:t.toString())||"0",network:(e=tr.purchaseCurrency)==null?void 0:e.symbol});return tr.quotesLoading=!1,tr.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return tr.error=n.message,tr.quotesLoading=!1,null}finally{tr.quotesLoading=!1}},resetState(){tr.selectedProvider=null,tr.error=null,tr.purchaseCurrency=L_,tr.paymentCurrency=kU,tr.purchaseCurrencies=[L_],tr.paymentCurrencies=[],tr.paymentAmount=void 0,tr.purchaseAmount=void 0,tr.quotesLoading=!1}},PU=nl(w2e),YW=2147483648,b2e={convertEVMChainIdToCoinType(t){if(t>=YW)throw new Error("Invalid chainId");return(YW|t)>>>0}},il=vs({suggestions:[],loading:!1}),v2e={state:il,subscribe(t){return Wo(il,()=>t(il))},subscribeKey(t,e){return Ho(il,t,e)},async resolveName(t){var e,n;try{return await Jt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Jt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{il.loading=!0,il.suggestions=[];const e=await Jt.getEnsNameSuggestions(t);return il.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],il.suggestions}catch(e){const n=$_.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{il.loading=!1}},async getNamesForAddress(t){try{if(!J.state.activeCaipNetwork)return[];const n=Ct.getEnsFromCacheForAddress(t);if(n)return n;const r=await Jt.reverseLookupEnsName({address:t});return Ct.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=$_.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=J.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Et.state.address,r=ht.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");il.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Pn.pushTransactionStack({onCancel(){Pn.replace("RegisterAccountName")}});const i=await Zt.signMessage(s);il.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=b2e.convertEVMChainIdToCoinType(Number(o));await Jt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Et.setProfileName(t,e.chainNamespace),Pn.replace("RegisterAccountNameSuccess")}catch(s){const i=$_.parseEnsApiError(s,`Error registering name ${t}`);throw Pn.replace("RegisterAccountName"),new Error(i)}finally{il.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},$_=nl(v2e);var p4={exports:{}},lv=typeof Reflect=="object"?Reflect:null,QW=lv&&typeof lv.apply=="function"?lv.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},pT;lv&&typeof lv.ownKeys=="function"?pT=lv.ownKeys:Object.getOwnPropertySymbols?pT=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:pT=function(e){return Object.getOwnPropertyNames(e)};function E2e(t){console&&console.warn&&console.warn(t)}var pre=Number.isNaN||function(e){return e!==e};function Gr(){Gr.init.call(this)}p4.exports=Gr;p4.exports.once=S2e;Gr.EventEmitter=Gr;Gr.prototype._events=void 0;Gr.prototype._eventsCount=0;Gr.prototype._maxListeners=void 0;var JW=10;function yP(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Gr,"defaultMaxListeners",{enumerable:!0,get:function(){return JW},set:function(t){if(typeof t!="number"||t<0||pre(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");JW=t}});Gr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Gr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||pre(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function gre(t){return t._maxListeners===void 0?Gr.defaultMaxListeners:t._maxListeners}Gr.prototype.getMaxListeners=function(){return gre(this)};Gr.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")QW(c,this,n);else for(var l=c.length,u=vre(c,l),r=0;r<l;++r)QW(u[r],this,n);return!0};function mre(t,e,n,r){var s,i,o;if(yP(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=gre(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,E2e(a)}return t}Gr.prototype.addListener=function(e,n){return mre(this,e,n,!1)};Gr.prototype.on=Gr.prototype.addListener;Gr.prototype.prependListener=function(e,n){return mre(this,e,n,!0)};function C2e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yre(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=C2e.bind(r);return s.listener=n,r.wrapFn=s,s}Gr.prototype.once=function(e,n){return yP(n),this.on(e,yre(this,e,n)),this};Gr.prototype.prependOnceListener=function(e,n){return yP(n),this.prependListener(e,yre(this,e,n)),this};Gr.prototype.removeListener=function(e,n){var r,s,i,o,a;if(yP(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():_2e(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Gr.prototype.off=Gr.prototype.removeListener;Gr.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function wre(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?A2e(s):vre(s,s.length)}Gr.prototype.listeners=function(e){return wre(this,e,!0)};Gr.prototype.rawListeners=function(e){return wre(this,e,!1)};Gr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):bre.call(t,e)};Gr.prototype.listenerCount=bre;function bre(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Gr.prototype.eventNames=function(){return this._eventsCount>0?pT(this._events):[]};function vre(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function _2e(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function A2e(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function S2e(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}Ere(t,e,i,{once:!0}),e!=="error"&&I2e(t,s,{once:!0})})}function I2e(t,e,n){typeof t.on=="function"&&Ere(t,"error",e,n)}function Ere(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ql=p4.exports;const g4=rh(ql);var je={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var OU=function(t,e){return OU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},OU(t,e)};function N2e(t,e){OU(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var DU=function(){return DU=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},DU.apply(this,arguments)};function x2e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function T2e(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function R2e(t,e){return function(n,r){e(n,r,t)}}function k2e(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function P2e(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function O2e(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function D2e(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function M2e(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function MU(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cre(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function B2e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Cre(arguments[e]));return t}function U2e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function tS(t){return this instanceof tS?(this.v=t,this):new tS(t)}function L2e(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof tS?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function $2e(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:tS(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function F2e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof MU=="function"?MU(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function j2e(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function W2e(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function z2e(t){return t&&t.__esModule?t:{default:t}}function H2e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function G2e(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const q2e=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return DU},__asyncDelegator:$2e,__asyncGenerator:L2e,__asyncValues:F2e,__await:tS,__awaiter:P2e,__classPrivateFieldGet:H2e,__classPrivateFieldSet:G2e,__createBinding:D2e,__decorate:T2e,__exportStar:M2e,__extends:N2e,__generator:O2e,__importDefault:z2e,__importStar:W2e,__makeTemplateObject:j2e,__metadata:k2e,__param:R2e,__read:Cre,__rest:x2e,__spread:B2e,__spreadArrays:U2e,__values:MU},Symbol.toStringTag,{value:"Module"})),wP=lI(q2e);var l3={},v1={},ZW;function V2e(){if(ZW)return v1;ZW=1,Object.defineProperty(v1,"__esModule",{value:!0}),v1.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return v1.delay=t,v1}var Mm={},u3={},Bm={},XW;function K2e(){return XW||(XW=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.ONE_THOUSAND=Bm.ONE_HUNDRED=void 0,Bm.ONE_HUNDRED=100,Bm.ONE_THOUSAND=1e3),Bm}var d3={},ez;function Y2e(){return ez||(ez=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(d3)),d3}var tz;function _re(){return tz||(tz=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=wP;e.__exportStar(K2e(),t),e.__exportStar(Y2e(),t)}(u3)),u3}var nz;function Q2e(){if(nz)return Mm;nz=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.fromMiliseconds=Mm.toMiliseconds=void 0;const t=_re();function e(r){return r*t.ONE_THOUSAND}Mm.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Mm.fromMiliseconds=n,Mm}var rz;function J2e(){return rz||(rz=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=wP;e.__exportStar(V2e(),t),e.__exportStar(Q2e(),t)}(l3)),l3}var Fw={},sz;function Z2e(){if(sz)return Fw;sz=1,Object.defineProperty(Fw,"__esModule",{value:!0}),Fw.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Fw.Watch=t,Fw.default=t,Fw}var h3={},E1={},iz;function X2e(){if(iz)return E1;iz=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.IWatch=void 0;class t{}return E1.IWatch=t,E1}var oz;function ePe(){return oz||(oz=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),wP.__exportStar(X2e(),t)}(h3)),h3}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=wP;e.__exportStar(J2e(),t),e.__exportStar(Z2e(),t),e.__exportStar(ePe(),t),e.__exportStar(_re(),t)})(je);class hw{}let tPe=class extends hw{constructor(e){super()}};const az=je.FIVE_SECONDS,fw={pulse:"heartbeat_pulse"};let nPe=class Are extends tPe{constructor(e){super(e),this.events=new ql.EventEmitter,this.interval=az,this.interval=(e==null?void 0:e.interval)||az}static async init(e){const n=new Are(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),je.toMiliseconds(this.interval))}pulse(){this.events.emit(fw.pulse)}};const rPe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,sPe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,iPe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function oPe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){aPe(t);return}return e}function aPe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function ox(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!iPe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(rPe.test(t)||sPe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,oPe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function pw(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Sre(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=pw(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let f3;function jI(){return f3||(f3=Sre("keyval-store","keyval")),f3}function cz(t,e=jI()){return e("readonly",n=>pw(n.get(t)))}function cPe(t,e,n=jI()){return n("readwrite",r=>(r.put(e,t),pw(r.transaction)))}function lPe(t,e=jI()){return e("readwrite",n=>(n.delete(t),pw(n.transaction)))}function uPe(t=jI()){return t("readwrite",e=>(e.clear(),pw(e.transaction)))}function dPe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},pw(t.transaction)}function hPe(t=jI()){return t("readonly",e=>{if(e.getAllKeys)return pw(e.getAllKeys());const n=[];return dPe(e,r=>n.push(r.key)).then(()=>n)})}const fPe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),pPe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function L0(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return pPe(t)}catch{return t}}function Of(t){return typeof t=="string"?t:fPe(t)||""}function gPe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var mPe=yPe;function yPe(t,e,n){var r=n&&n.stringify||gPe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const lz=mPe;var mb=Hd;const nS=NPe().console||{},wPe={mapHttpRequest:ax,mapHttpResponse:ax,wrapRequestSerializer:p3,wrapResponseSerializer:p3,wrapErrorSerializer:p3,req:ax,res:ax,err:_Pe};function bPe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Hd(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||nS;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=bPe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=rS),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:APe(t)};c.levels=Hd.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=rS,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=BU());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,jw(l,c,"error","log"),jw(l,c,"fatal","error"),jw(l,c,"warn","error"),jw(l,c,"info","log"),jw(l,c,"debug","log"),jw(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const m=g.serializers;if(s&&m){var y=Object.assign({},r,m),w=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,bP([p],w,y,this._stdErrSerialize)}function C(N){this._childLevel=(N._childLevel|0)+1,this.error=Ww(N,p,"error"),this.fatal=Ww(N,p,"fatal"),this.warn=Ww(N,p,"warn"),this.info=Ww(N,p,"info"),this.debug=Ww(N,p,"debug"),this.trace=Ww(N,p,"trace"),y&&(this.serializers=y,this._serialize=w),e&&(this._logEvent=BU([].concat(N._logEvent.bindings,p)))}return C.prototype=this,new C(this)}return c}Hd.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Hd.stdSerializers=wPe;Hd.stdTimeFunctions=Object.assign({},{nullTime:Ire,epochTime:Nre,unixTime:SPe,isoTime:IPe});function jw(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?rS:s[n]?s[n]:nS[n]||nS[r]||rS,vPe(t,e,n)}function vPe(t,e,n){!t.transmit&&e[n]===rS||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===nS?nS:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&bP(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,EPe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Hd.levels.values[l],d=Hd.levels.values[n];if(d<u)return;CPe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Hd.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function EPe(t,e,n,r){t._serialize&&bP(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Hd.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?lz(s.shift(),s):void 0}else typeof i=="string"&&(i=lz(s.shift(),s));return i!==void 0&&(o.msg=i),o}function bP(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Hd.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Ww(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function CPe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;bP(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=BU(c)}function BU(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function _Pe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function APe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Ire:Nre}function ax(){return{}}function p3(t){return t}function rS(){}function Ire(){return!1}function Nre(){return Date.now()}function SPe(){return Math.round(Date.now()/1e3)}function IPe(){return new Date(Date.now()).toISOString()}function NPe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const WI=rh(mb),xPe={level:"info"},zI="custom_context",m4=1e3*1024;let TPe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},uz=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new TPe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},xre=class{constructor(e,n=m4){this.level=e??"error",this.levelValue=mb.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new uz(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===mb.levels.values.error?console.error(e):n===mb.levels.values.warn?console.warn(e):n===mb.levels.values.debug?console.debug(e):n===mb.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Of({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new uz(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Of({extraMetadata:e})),new Blob(n,{type:"application/json"})}},RPe=class{constructor(e,n=m4){this.baseChunkLogger=new xre(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},kPe=class{constructor(e,n=m4){this.baseChunkLogger=new xre(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var PPe=Object.defineProperty,OPe=Object.defineProperties,DPe=Object.getOwnPropertyDescriptors,dz=Object.getOwnPropertySymbols,MPe=Object.prototype.hasOwnProperty,BPe=Object.prototype.propertyIsEnumerable,hz=(t,e,n)=>e in t?PPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,QR=(t,e)=>{for(var n in e||(e={}))MPe.call(e,n)&&hz(t,n,e[n]);if(dz)for(var n of dz(e))BPe.call(e,n)&&hz(t,n,e[n]);return t},JR=(t,e)=>OPe(t,DPe(e));function gw(t){return JR(QR({},t),{level:(t==null?void 0:t.level)||xPe.level})}function UPe(t,e=zI){return t[e]||""}function LPe(t,e,n=zI){return t[n]=e,t}function gc(t,e=zI){let n="";return typeof t.bindings>"u"?n=UPe(t,e):n=t.bindings().context||"",n}function $Pe(t,e,n=zI){const r=gc(t,n);return r.trim()?`${r}/${e}`:e}function bo(t,e,n=zI){const r=$Pe(t,e,n),s=t.child({context:r});return LPe(s,r,n)}function FPe(t){var e,n;const r=new RPe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:WI(JR(QR({},t.opts),{level:"trace",browser:JR(QR({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function jPe(t){var e;const n=new kPe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:WI(JR(QR({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function vP(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?FPe(t):jPe(t)}function WPe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Tre(t,...e){if(!WPe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function fz(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zPe(t,e){Tre(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const zw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const g3=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function HPe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Rre(t){return typeof t=="string"&&(t=HPe(t)),Tre(t),t}let GPe=class{clone(){return this._cloneInto()}};function qPe(t){const e=r=>t().update(Rre(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function kre(t=32){if(zw&&typeof zw.getRandomValues=="function")return zw.getRandomValues(new Uint8Array(t));if(zw&&typeof zw.randomBytes=="function")return zw.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function VPe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let KPe=class extends GPe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=g3(this.buffer)}update(e){fz(this);const{view:n,buffer:r,blockLen:s}=this;e=Rre(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=g3(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fz(this),zPe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;VPe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=g3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const cx=BigInt(2**32-1),UU=BigInt(32);function Pre(t,e=!1){return e?{h:Number(t&cx),l:Number(t>>UU&cx)}:{h:Number(t>>UU&cx)|0,l:Number(t&cx)|0}}function YPe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Pre(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const QPe=(t,e)=>BigInt(t>>>0)<<UU|BigInt(e>>>0),JPe=(t,e,n)=>t>>>n,ZPe=(t,e,n)=>t<<32-n|e>>>n,XPe=(t,e,n)=>t>>>n|e<<32-n,eOe=(t,e,n)=>t<<32-n|e>>>n,tOe=(t,e,n)=>t<<64-n|e>>>n-32,nOe=(t,e,n)=>t>>>n-32|e<<64-n,rOe=(t,e)=>e,sOe=(t,e)=>t,iOe=(t,e,n)=>t<<n|e>>>32-n,oOe=(t,e,n)=>e<<n|t>>>32-n,aOe=(t,e,n)=>e<<n-32|t>>>64-n,cOe=(t,e,n)=>t<<n-32|e>>>64-n;function lOe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const uOe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),dOe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,hOe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),fOe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,pOe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),gOe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Tn={fromBig:Pre,split:YPe,toBig:QPe,shrSH:JPe,shrSL:ZPe,rotrSH:XPe,rotrSL:eOe,rotrBH:tOe,rotrBL:nOe,rotr32H:rOe,rotr32L:sOe,rotlSH:iOe,rotlSL:oOe,rotlBH:aOe,rotlBL:cOe,add:lOe,add3L:uOe,add3H:dOe,add4L:hOe,add4H:fOe,add5H:gOe,add5L:pOe},[mOe,yOe]=Tn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),up=new Uint32Array(80),dp=new Uint32Array(80);let wOe=class extends KPe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let C=0;C<16;C++,n+=4)up[C]=e.getUint32(n),dp[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const N=up[C-15]|0,I=dp[C-15]|0,k=Tn.rotrSH(N,I,1)^Tn.rotrSH(N,I,8)^Tn.shrSH(N,I,7),P=Tn.rotrSL(N,I,1)^Tn.rotrSL(N,I,8)^Tn.shrSL(N,I,7),U=up[C-2]|0,M=dp[C-2]|0,H=Tn.rotrSH(U,M,19)^Tn.rotrBH(U,M,61)^Tn.shrSH(U,M,6),j=Tn.rotrSL(U,M,19)^Tn.rotrBL(U,M,61)^Tn.shrSL(U,M,6),K=Tn.add4L(P,j,dp[C-7],dp[C-16]),$=Tn.add4H(K,k,H,up[C-7],up[C-16]);up[C]=$|0,dp[C]=K|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:y,Hl:w}=this;for(let C=0;C<80;C++){const N=Tn.rotrSH(d,h,14)^Tn.rotrSH(d,h,18)^Tn.rotrBH(d,h,41),I=Tn.rotrSL(d,h,14)^Tn.rotrSL(d,h,18)^Tn.rotrBL(d,h,41),k=d&f^~d&g,P=h&p^~h&m,U=Tn.add5L(w,I,P,yOe[C],dp[C]),M=Tn.add5H(U,y,N,k,mOe[C],up[C]),H=U|0,j=Tn.rotrSH(r,s,28)^Tn.rotrBH(r,s,34)^Tn.rotrBH(r,s,39),K=Tn.rotrSL(r,s,28)^Tn.rotrBL(r,s,34)^Tn.rotrBL(r,s,39),$=r&i^r&a^i&a,v=s&o^s&c^o&c;y=g|0,w=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=Tn.add(l|0,u|0,M|0,H|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const E=Tn.add3L(H,K,v);r=Tn.add3H(E,M,j,$),s=E|0}({h:r,l:s}=Tn.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Tn.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Tn.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Tn.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Tn.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Tn.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=Tn.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:w}=Tn.add(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,m,y,w)}roundClean(){up.fill(0),dp.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const bOe=qPe(()=>new wOe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const y4=BigInt(0),Ore=BigInt(1),vOe=BigInt(2);function w4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function b4(t){if(!w4(t))throw new Error("Uint8Array expected")}function m3(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const EOe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function v4(t){b4(t);let e="";for(let n=0;n<t.length;n++)e+=EOe[t[n]];return e}function Dre(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?y4:BigInt("0x"+t)}const Ch={_0:48,_9:57,A:65,F:70,a:97,f:102};function pz(t){if(t>=Ch._0&&t<=Ch._9)return t-Ch._0;if(t>=Ch.A&&t<=Ch.F)return t-(Ch.A-10);if(t>=Ch.a&&t<=Ch.f)return t-(Ch.a-10)}function Mre(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=pz(t.charCodeAt(i)),a=pz(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function COe(t){return Dre(v4(t))}function gT(t){return b4(t),Dre(v4(Uint8Array.from(t).reverse()))}function Bre(t,e){return Mre(t.toString(16).padStart(e*2,"0"))}function LU(t,e){return Bre(t,e).reverse()}function _h(t,e,n){let r;if(typeof e=="string")try{r=Mre(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(w4(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function gz(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];b4(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const y3=t=>typeof t=="bigint"&&y4<=t;function _Oe(t,e,n){return y3(t)&&y3(e)&&y3(n)&&e<=t&&t<n}function C1(t,e,n,r){if(!_Oe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function AOe(t){let e;for(e=0;t>y4;t>>=Ore,e+=1);return e}const SOe=t=>(vOe<<BigInt(t-1))-Ore,IOe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||w4(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function E4(t,e,n={}){const r=(s,i,o)=>{const a=IOe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function mz(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const ji=BigInt(0),ni=BigInt(1),ry=BigInt(2),NOe=BigInt(3),$U=BigInt(4),yz=BigInt(5),wz=BigInt(8);function yi(t,e){const n=t%e;return n>=ji?n:e+n}function xOe(t,e,n){if(e<ji)throw new Error("invalid exponent, negatives unsupported");if(n<=ji)throw new Error("invalid modulus");if(n===ni)return ji;let r=ni;for(;e>ji;)e&ni&&(r=r*t%n),t=t*t%n,e>>=ni;return r}function Xu(t,e,n){let r=t;for(;e-- >ji;)r*=r,r%=n;return r}function bz(t,e){if(t===ji)throw new Error("invert: expected non-zero number");if(e<=ji)throw new Error("invert: expected positive modulus, got "+e);let n=yi(t,e),r=e,s=ji,i=ni;for(;n!==ji;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ni)throw new Error("invert: does not exist");return yi(s,e)}function TOe(t){const e=(t-ni)/ry;let n,r,s;for(n=t-ni,r=0;n%ry===ji;n/=ry,r++);for(s=ry;s<t&&xOe(s,e,t)!==t-ni;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ni)/$U;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+ni)/ry;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,ni<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function ROe(t){if(t%$U===NOe){const e=(t+ni)/$U;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%wz===yz){const e=(t-yz)/wz;return function(n,r){const s=n.mul(r,ry),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,ry),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return TOe(t)}const kOe=(t,e)=>(yi(t,e)&ni)===ni,POe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function OOe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=POe.reduce((r,s)=>(r[s]="function",r),e);return E4(t,n)}function DOe(t,e,n){if(n<ji)throw new Error("invalid exponent, negatives unsupported");if(n===ji)return t.ONE;if(n===ni)return e;let r=t.ONE,s=e;for(;n>ji;)n&ni&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ni;return r}function MOe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Ure(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Lre(t,e,n=!1,r={}){if(t<=ji)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=Ure(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:SOe(s),ZERO:ji,ONE:ni,create:c=>yi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ji<=c&&c<t},is0:c=>c===ji,isOdd:c=>(c&ni)===ni,neg:c=>yi(-c,t),eql:(c,l)=>c===l,sqr:c=>yi(c*c,t),add:(c,l)=>yi(c+l,t),sub:(c,l)=>yi(c-l,t),mul:(c,l)=>yi(c*l,t),pow:(c,l)=>DOe(a,c,l),div:(c,l)=>yi(c*bz(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>bz(c,t),sqrt:r.sqrt||(c=>(o||(o=ROe(t)),o(a,c))),invertBatch:c=>MOe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?LU(c,i):Bre(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?gT(c):COe(c)}});return Object.freeze(a)}const vz=BigInt(0),lx=BigInt(1);function w3(t,e){const n=e.negate();return t?n:e}function $re(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function b3(t,e){$re(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function BOe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function UOe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const v3=new WeakMap,Fre=new WeakMap;function E3(t){return Fre.get(t)||1}function LOe(t,e){return{constTimeNegate:w3,hasPrecomputes(n){return E3(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>vz;)r&lx&&(s=s.add(i)),i=i.double(),r>>=lx;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=b3(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=b3(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=lx);const g=f,m=f+Math.abs(p)-1,y=h%2!==0,w=p<0;p===0?c=c.add(w3(y,r[g])):a=a.add(w3(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=b3(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===vz)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=lx),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=v3.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&v3.set(r,s(i))),i},wNAFCached(n,r,s){const i=E3(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=E3(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){$re(r,e),Fre.set(n,r),v3.delete(n)}}}function $Oe(t,e,n,r){if(BOe(n,t),UOe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=AOe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function FOe(t){return OOe(t.Fp),E4(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ure(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Xl=BigInt(0),xa=BigInt(1),ux=BigInt(2),jOe=BigInt(8),WOe={zip215:!0};function zOe(t){const e=FOe(t);return E4(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function HOe(t){const e=zOe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=ux<<BigInt(a*8)-xa,u=n.create,d=Lre(e.n,e.nBitLength),h=e.uvRatio||((E,_)=>{try{return{isValid:!0,value:n.sqrt(E*n.inv(_))}}catch{return{isValid:!1,value:Xl}}}),f=e.adjustScalarBytes||(E=>E),p=e.domain||((E,_,D)=>{if(m3("phflag",D),_.length||D)throw new Error("Contexts/pre-hash are not supported");return E});function g(E,_){C1("coordinate "+E,_,Xl,l)}function m(E){if(!(E instanceof C))throw new Error("ExtendedPoint expected")}const y=mz((E,_)=>{const{ex:D,ey:x,ez:B}=E,W=E.is0();_==null&&(_=W?jOe:n.inv(B));const L=u(D*_),S=u(x*_),F=u(B*_);if(W)return{x:Xl,y:xa};if(F!==xa)throw new Error("invZ was invalid");return{x:L,y:S}}),w=mz(E=>{const{a:_,d:D}=e;if(E.is0())throw new Error("bad point: ZERO");const{ex:x,ey:B,ez:W,et:L}=E,S=u(x*x),F=u(B*B),X=u(W*W),se=u(X*X),ge=u(S*_),Ue=u(X*u(ge+F)),Le=u(se+u(D*u(S*F)));if(Ue!==Le)throw new Error("bad point: equation left != right (1)");const Be=u(x*B),Ut=u(W*L);if(Be!==Ut)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(_,D,x,B){this.ex=_,this.ey=D,this.ez=x,this.et=B,g("x",_),g("y",D),g("z",x),g("t",B),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof C)throw new Error("extended point not allowed");const{x:D,y:x}=_||{};return g("x",D),g("y",x),new C(D,x,xa,u(D*x))}static normalizeZ(_){const D=n.invertBatch(_.map(x=>x.ez));return _.map((x,B)=>x.toAffine(D[B])).map(C.fromAffine)}static msm(_,D){return $Oe(C,d,_,D)}_setWindowSize(_){k.setWindowSize(this,_)}assertValidity(){w(this)}equals(_){m(_);const{ex:D,ey:x,ez:B}=this,{ex:W,ey:L,ez:S}=_,F=u(D*S),X=u(W*B),se=u(x*S),ge=u(L*B);return F===X&&se===ge}is0(){return this.equals(C.ZERO)}negate(){return new C(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:_}=e,{ex:D,ey:x,ez:B}=this,W=u(D*D),L=u(x*x),S=u(ux*u(B*B)),F=u(_*W),X=D+x,se=u(u(X*X)-W-L),ge=F+L,Ue=ge-S,Le=F-L,Be=u(se*Ue),Ut=u(ge*Le),lt=u(se*Le),st=u(Ue*ge);return new C(Be,Ut,st,lt)}add(_){m(_);const{a:D,d:x}=e,{ex:B,ey:W,ez:L,et:S}=this,{ex:F,ey:X,ez:se,et:ge}=_;if(D===BigInt(-1)){const pt=u((W-B)*(X+F)),Ye=u((W+B)*(X-F)),it=u(Ye-pt);if(it===Xl)return this.double();const vn=u(L*ux*ge),He=u(S*ux*se),Yt=He+vn,Qt=Ye+pt,De=He-vn,z=u(Yt*it),T=u(Qt*De),O=u(Yt*De),Y=u(it*Qt);return new C(z,T,Y,O)}const Ue=u(B*F),Le=u(W*X),Be=u(S*x*ge),Ut=u(L*se),lt=u((B+W)*(F+X)-Ue-Le),st=Ut-Be,ce=Ut+Be,ae=u(Le-D*Ue),_e=u(lt*st),Se=u(ce*ae),Ce=u(lt*ae),Qe=u(st*ce);return new C(_e,Se,Qe,Ce)}subtract(_){return this.add(_.negate())}wNAF(_){return k.wNAFCached(this,_,C.normalizeZ)}multiply(_){const D=_;C1("scalar",D,xa,r);const{p:x,f:B}=this.wNAF(D);return C.normalizeZ([x,B])[0]}multiplyUnsafe(_,D=C.ZERO){const x=_;return C1("scalar",x,Xl,r),x===Xl?I:this.is0()||x===xa?this:k.wNAFCachedUnsafe(this,x,C.normalizeZ,D)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return k.unsafeLadder(this,r).is0()}toAffine(_){return y(this,_)}clearCofactor(){const{h:_}=e;return _===xa?this:this.multiplyUnsafe(_)}static fromHex(_,D=!1){const{d:x,a:B}=e,W=n.BYTES;_=_h("pointHex",_,W),m3("zip215",D);const L=_.slice(),S=_[W-1];L[W-1]=S&-129;const F=gT(L),X=D?l:n.ORDER;C1("pointHex.y",F,Xl,X);const se=u(F*F),ge=u(se-xa),Ue=u(x*se-B);let{isValid:Le,value:Be}=h(ge,Ue);if(!Le)throw new Error("Point.fromHex: invalid y coordinate");const Ut=(Be&xa)===xa,lt=(S&128)!==0;if(!D&&Be===Xl&&lt)throw new Error("Point.fromHex: x=0 and x_0=1");return lt!==Ut&&(Be=u(-Be)),C.fromAffine({x:Be,y:F})}static fromPrivateKey(_){return M(_).point}toRawBytes(){const{x:_,y:D}=this.toAffine(),x=LU(D,n.BYTES);return x[x.length-1]|=_&xa?128:0,x}toHex(){return v4(this.toRawBytes())}}C.BASE=new C(e.Gx,e.Gy,xa,u(e.Gx*e.Gy)),C.ZERO=new C(Xl,xa,xa,Xl);const{BASE:N,ZERO:I}=C,k=LOe(C,a*8);function P(E){return yi(E,r)}function U(E){return P(gT(E))}function M(E){const _=n.BYTES;E=_h("private key",E,_);const D=_h("hashed private key",i(E),2*_),x=f(D.slice(0,_)),B=D.slice(_,2*_),W=U(x),L=N.multiply(W),S=L.toRawBytes();return{head:x,prefix:B,scalar:W,point:L,pointBytes:S}}function H(E){return M(E).pointBytes}function j(E=new Uint8Array,..._){const D=gz(..._);return U(i(p(D,_h("context",E),!!s)))}function K(E,_,D={}){E=_h("message",E),s&&(E=s(E));const{prefix:x,scalar:B,pointBytes:W}=M(_),L=j(D.context,x,E),S=N.multiply(L).toRawBytes(),F=j(D.context,S,W,E),X=P(L+F*B);C1("signature.s",X,Xl,r);const se=gz(S,LU(X,n.BYTES));return _h("result",se,n.BYTES*2)}const $=WOe;function v(E,_,D,x=$){const{context:B,zip215:W}=x,L=n.BYTES;E=_h("signature",E,2*L),_=_h("message",_),D=_h("publicKey",D,L),W!==void 0&&m3("zip215",W),s&&(_=s(_));const S=gT(E.slice(L,2*L));let F,X,se;try{F=C.fromHex(D,W),X=C.fromHex(E.slice(0,L),W),se=N.multiplyUnsafe(S)}catch{return!1}if(!W&&F.isSmallOrder())return!1;const ge=j(B,X.toRawBytes(),F.toRawBytes(),_);return X.add(F.multiplyUnsafe(ge)).subtract(se).clearCofactor().equals(C.ZERO)}return N._setWindowSize(8),{CURVE:e,getPublicKey:H,sign:K,verify:v,ExtendedPoint:C,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>o(n.BYTES),precompute(E=8,_=C.BASE){return _._setWindowSize(E),_.multiply(BigInt(3)),_}}}}BigInt(0),BigInt(1);const C4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ez=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const GOe=BigInt(1),Cz=BigInt(2);BigInt(3);const qOe=BigInt(5),VOe=BigInt(8);function KOe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=C4,o=t*t%i*t%i,a=Xu(o,Cz,i)*o%i,c=Xu(a,GOe,i)*t%i,l=Xu(c,qOe,i)*c%i,u=Xu(l,e,i)*l%i,d=Xu(u,n,i)*u%i,h=Xu(d,r,i)*d%i,f=Xu(h,s,i)*h%i,p=Xu(f,s,i)*h%i,g=Xu(p,e,i)*l%i;return{pow_p_5_8:Xu(g,Cz,i)*t%i,b2:o}}function YOe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function QOe(t,e){const n=C4,r=yi(e*e*e,n),s=yi(r*r*e,n),i=KOe(t*s).pow_p_5_8;let o=yi(t*r*i,n);const a=yi(e*o*o,n),c=o,l=yi(o*Ez,n),u=a===t,d=a===yi(-t,n),h=a===yi(-t*Ez,n);return u&&(o=c),(d||h)&&(o=l),kOe(o,n)&&(o=yi(-o,n)),{isValid:u||d,value:o}}const JOe=Lre(C4,void 0,!0),ZOe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:JOe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:VOe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:bOe,randomBytes:kre,adjustScalarBytes:YOe,uvRatio:QOe},jre=HOe(ZOe),XOe="EdDSA",eDe="JWT",ZR=".",EP="base64url",Wre="utf8",zre="utf8",tDe=":",nDe="did",rDe="key",_z="base58btc",sDe="z",iDe="K36",oDe=32;function _4(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Hre(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?_4(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Gre(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Hre(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return _4(n)}function aDe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,g++;for(var C=(w-y)*u+1>>>0,N=new Uint8Array(C);y!==w;){for(var I=p[y],k=0,P=C-1;(I!==0||k<m)&&P!==-1;P--,k++)I+=256*N[P]>>>0,N[P]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");m=k,y++}for(var U=C-m;U!==C&&N[U]===0;)U++;for(var M=c.repeat(g);U<C;++U)M+=t.charAt(N[U]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*l+1>>>0,C=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var I=0,k=w-1;(N!==0||I<y)&&k!==-1;k--,I++)N+=a*C[k]>>>0,C[k]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=I,g++}if(p[g]!==" "){for(var P=w-y;P!==w&&C[P]===0;)P++;for(var U=new Uint8Array(m+(w-P)),M=m;P!==w;)U[M++]=C[P++];return U}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var cDe=aDe,lDe=cDe;const qre=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},uDe=t=>new TextEncoder().encode(t),dDe=t=>new TextDecoder().decode(t);let hDe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},fDe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Vre(this,e)}},pDe=class{constructor(e){this.decoders=e}or(e){return Vre(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Vre=(t,e)=>new pDe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let gDe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new hDe(e,n,r),this.decoder=new fDe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const CP=({name:t,prefix:e,encode:n,decode:r})=>new gDe(t,e,n,r),HI=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=lDe(n,e);return CP({prefix:t,name:e,encode:r,decode:i=>qre(s(i))})},mDe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},yDe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},vo=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>CP({prefix:e,name:t,encode(s){return yDe(s,r,n)},decode(s){return mDe(s,r,n,t)}}),wDe=CP({prefix:"\0",name:"identity",encode:t=>dDe(t),decode:t=>uDe(t)});var bDe=Object.freeze({__proto__:null,identity:wDe});const vDe=vo({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var EDe=Object.freeze({__proto__:null,base2:vDe});const CDe=vo({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var _De=Object.freeze({__proto__:null,base8:CDe});const ADe=HI({prefix:"9",name:"base10",alphabet:"0123456789"});var SDe=Object.freeze({__proto__:null,base10:ADe});const IDe=vo({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),NDe=vo({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var xDe=Object.freeze({__proto__:null,base16:IDe,base16upper:NDe});const TDe=vo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),RDe=vo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),kDe=vo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),PDe=vo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ODe=vo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),DDe=vo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),MDe=vo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),BDe=vo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),UDe=vo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var LDe=Object.freeze({__proto__:null,base32:TDe,base32upper:RDe,base32pad:kDe,base32padupper:PDe,base32hex:ODe,base32hexupper:DDe,base32hexpad:MDe,base32hexpadupper:BDe,base32z:UDe});const $De=HI({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),FDe=HI({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var jDe=Object.freeze({__proto__:null,base36:$De,base36upper:FDe});const WDe=HI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zDe=HI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var HDe=Object.freeze({__proto__:null,base58btc:WDe,base58flickr:zDe});const GDe=vo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qDe=vo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),VDe=vo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),KDe=vo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var YDe=Object.freeze({__proto__:null,base64:GDe,base64pad:qDe,base64url:VDe,base64urlpad:KDe});const Kre=Array.from(""),QDe=Kre.reduce((t,e,n)=>(t[n]=e,t),[]),JDe=Kre.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function ZDe(t){return t.reduce((e,n)=>(e+=QDe[n],e),"")}function XDe(t){const e=[];for(const n of t){const r=JDe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const e3e=CP({prefix:"",name:"base256emoji",encode:ZDe,decode:XDe});var t3e=Object.freeze({__proto__:null,base256emoji:e3e}),n3e=Yre,Az=128,r3e=-128,s3e=Math.pow(2,31);function Yre(t,e,n){e=e||[],n=n||0;for(var r=n;t>=s3e;)e[n++]=t&255|Az,t/=128;for(;t&r3e;)e[n++]=t&255|Az,t>>>=7;return e[n]=t|0,Yre.bytes=n-r+1,e}var i3e=FU,o3e=128,Sz=127;function FU(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw FU.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Sz)<<s:(o&Sz)*Math.pow(2,s),s+=7}while(o>=o3e);return FU.bytes=i-r,n}var a3e=Math.pow(2,7),c3e=Math.pow(2,14),l3e=Math.pow(2,21),u3e=Math.pow(2,28),d3e=Math.pow(2,35),h3e=Math.pow(2,42),f3e=Math.pow(2,49),p3e=Math.pow(2,56),g3e=Math.pow(2,63),m3e=function(t){return t<a3e?1:t<c3e?2:t<l3e?3:t<u3e?4:t<d3e?5:t<h3e?6:t<f3e?7:t<p3e?8:t<g3e?9:10},y3e={encode:n3e,decode:i3e,encodingLength:m3e},Qre=y3e;const Iz=(t,e,n=0)=>(Qre.encode(t,e,n),e),Nz=t=>Qre.encodingLength(t),jU=(t,e)=>{const n=e.byteLength,r=Nz(t),s=r+Nz(n),i=new Uint8Array(s+n);return Iz(t,i,0),Iz(n,i,r),i.set(e,s),new w3e(t,n,e,i)};let w3e=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const Jre=({name:t,code:e,encode:n})=>new b3e(t,e,n);let b3e=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?jU(this.code,n):n.then(r=>jU(this.code,r))}else throw Error("Unknown type, must be binary type")}};const Zre=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),v3e=Jre({name:"sha2-256",code:18,encode:Zre("SHA-256")}),E3e=Jre({name:"sha2-512",code:19,encode:Zre("SHA-512")});var C3e=Object.freeze({__proto__:null,sha256:v3e,sha512:E3e});const Xre=0,_3e="identity",ese=qre,A3e=t=>jU(Xre,ese(t)),S3e={code:Xre,name:_3e,encode:ese,digest:A3e};var I3e=Object.freeze({__proto__:null,identity:S3e});new TextEncoder,new TextDecoder;const xz={...bDe,...EDe,..._De,...SDe,...xDe,...LDe,...jDe,...HDe,...YDe,...t3e};({...C3e,...I3e});function tse(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Tz=tse("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),C3=tse("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Hre(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),nse={utf8:Tz,"utf-8":Tz,hex:xz.base16,latin1:C3,ascii:C3,binary:C3,...xz};function _P(t,e="utf8"){const n=nse[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function MC(t,e="utf8"){const n=nse[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?_4(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Rz(t){return L0(_P(MC(t,EP),Wre))}function XR(t){return _P(MC(Of(t),Wre),EP)}function rse(t){const e=MC(iDe,_z),n=sDe+_P(Gre([e,t]),_z);return[nDe,rDe,n].join(tDe)}function N3e(t){return _P(t,EP)}function x3e(t){return MC(t,EP)}function T3e(t){return MC([XR(t.header),XR(t.payload)].join(ZR),zre)}function R3e(t){return[XR(t.header),XR(t.payload),N3e(t.signature)].join(ZR)}function WU(t){const e=t.split(ZR),n=Rz(e[0]),r=Rz(e[1]),s=x3e(e[2]),i=MC(e.slice(0,2).join(ZR),zre);return{header:n,payload:r,signature:s,data:i}}function kz(t=kre(oDe)){const e=jre.getPublicKey(t);return{secretKey:Gre([t,e]),publicKey:e}}async function k3e(t,e,n,r,s=je.fromMiliseconds(Date.now())){const i={alg:XOe,typ:eDe},o=rse(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=T3e({header:i,payload:c}),u=jre.sign(l,r.secretKey.slice(0,32));return R3e({header:i,payload:c,signature:u})}var Pz=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},P3e=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),O3e=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),D3e=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),M3e=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),B3e=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),U3e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,L3e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Oz=3,$3e=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",U3e]],Dz=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function F3e(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new B3e:typeof navigator<"u"?W3e(navigator.userAgent):H3e()}function j3e(t){return t!==""&&$3e.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function W3e(t){var e=j3e(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new M3e;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<Oz&&(s=Pz(Pz([],s,!0),G3e(Oz-s.length),!0)):s=[];var i=s.join("."),o=z3e(t),a=L3e.exec(t);return a&&a[1]?new D3e(n,i,o,a[1]):new P3e(n,i,o)}function z3e(t){for(var e=0,n=Dz.length;e<n;e++){var r=Dz[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function H3e(){var t=typeof process<"u"&&process.version;return t?new O3e(process.version.slice(1)):null}function G3e(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.getLocalStorage=rs.getLocalStorageOrThrow=rs.getCrypto=rs.getCryptoOrThrow=sse=rs.getLocation=rs.getLocationOrThrow=A4=rs.getNavigator=rs.getNavigatorOrThrow=$0=rs.getDocument=rs.getDocumentOrThrow=rs.getFromWindowOrThrow=rs.getFromWindow=void 0;function mw(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}rs.getFromWindow=mw;function BC(t){const e=mw(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}rs.getFromWindowOrThrow=BC;function q3e(){return BC("document")}rs.getDocumentOrThrow=q3e;function V3e(){return mw("document")}var $0=rs.getDocument=V3e;function K3e(){return BC("navigator")}rs.getNavigatorOrThrow=K3e;function Y3e(){return mw("navigator")}var A4=rs.getNavigator=Y3e;function Q3e(){return BC("location")}rs.getLocationOrThrow=Q3e;function J3e(){return mw("location")}var sse=rs.getLocation=J3e;function Z3e(){return BC("crypto")}rs.getCryptoOrThrow=Z3e;function X3e(){return mw("crypto")}rs.getCrypto=X3e;function eMe(){return BC("localStorage")}rs.getLocalStorageOrThrow=eMe;function tMe(){return mw("localStorage")}rs.getLocalStorage=tMe;var S4={};Object.defineProperty(S4,"__esModule",{value:!0});var ise=S4.getWindowMetadata=void 0;const Mz=rs;function nMe(){let t,e;try{t=Mz.getDocumentOrThrow(),e=Mz.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const m=p.getAttribute("href");if(m)if(m.toLowerCase().indexOf("https:")===-1&&m.toLowerCase().indexOf("http:")===-1&&m.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(m.indexOf("/")===0)y+=m;else{const w=e.pathname.split("/");w.pop();const C=w.join("/");y+=C+"/"+m}h.push(y)}else if(m.indexOf("//")===0){const y=e.protocol+m;h.push(y)}else h.push(m)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(m=>p.getAttribute(m)).filter(m=>m?d.includes(m):!1);if(g.length&&g){const m=p.getAttribute("content");if(m)return m}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}ise=S4.getWindowMetadata=nMe;function rMe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let w=l[h],C=0;for(let N=p-1;(w!==0||C<d)&&N!==-1;N--,C++)w+=256*g[N]>>>0,g[N]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=C,h++}let m=p-d;for(;m!==p&&g[m]===0;)m++;let y=r.repeat(u);for(;m<p;++m)y+=t.charAt(g[m]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const w=l.charCodeAt(u);if(w>255)return;let C=e[w];if(C===255)return;let N=0;for(let I=f-1;(C!==0||N<h)&&I!==-1;I--,N++)C+=n*p[I]>>>0,p[I]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");h=N,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const m=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)m[y++]=p[g++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var sMe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Qa=rMe(sMe);function ose(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function F_(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=ose(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function iMe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,g++;for(var C=(w-y)*u+1>>>0,N=new Uint8Array(C);y!==w;){for(var I=p[y],k=0,P=C-1;(I!==0||k<m)&&P!==-1;P--,k++)I+=256*N[P]>>>0,N[P]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");m=k,y++}for(var U=C-m;U!==C&&N[U]===0;)U++;for(var M=c.repeat(g);U<C;++U)M+=t.charAt(N[U]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*l+1>>>0,C=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var I=0,k=w-1;(N!==0||I<y)&&k!==-1;k--,I++)N+=a*C[k]>>>0,C[k]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=I,g++}if(p[g]!==" "){for(var P=w-y;P!==w&&C[P]===0;)P++;for(var U=new Uint8Array(m+(w-P)),M=m;P!==w;)U[M++]=C[P++];return U}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var oMe=iMe,aMe=oMe;const cMe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},lMe=t=>new TextEncoder().encode(t),uMe=t=>new TextDecoder().decode(t);class dMe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class hMe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ase(this,e)}}class fMe{constructor(e){this.decoders=e}or(e){return ase(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ase=(t,e)=>new fMe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class pMe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new dMe(e,n,r),this.decoder=new hMe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const AP=({name:t,prefix:e,encode:n,decode:r})=>new pMe(t,e,n,r),GI=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=aMe(n,e);return AP({prefix:t,name:e,encode:r,decode:i=>cMe(s(i))})},gMe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},mMe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Eo=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>AP({prefix:e,name:t,encode(s){return mMe(s,r,n)},decode(s){return gMe(s,r,n,t)}}),yMe=AP({prefix:"\0",name:"identity",encode:t=>uMe(t),decode:t=>lMe(t)}),wMe=Object.freeze(Object.defineProperty({__proto__:null,identity:yMe},Symbol.toStringTag,{value:"Module"})),bMe=Eo({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),vMe=Object.freeze(Object.defineProperty({__proto__:null,base2:bMe},Symbol.toStringTag,{value:"Module"})),EMe=Eo({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),CMe=Object.freeze(Object.defineProperty({__proto__:null,base8:EMe},Symbol.toStringTag,{value:"Module"})),_Me=GI({prefix:"9",name:"base10",alphabet:"0123456789"}),AMe=Object.freeze(Object.defineProperty({__proto__:null,base10:_Me},Symbol.toStringTag,{value:"Module"})),SMe=Eo({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),IMe=Eo({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),NMe=Object.freeze(Object.defineProperty({__proto__:null,base16:SMe,base16upper:IMe},Symbol.toStringTag,{value:"Module"})),xMe=Eo({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),TMe=Eo({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),RMe=Eo({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kMe=Eo({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),PMe=Eo({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),OMe=Eo({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),DMe=Eo({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),MMe=Eo({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),BMe=Eo({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),UMe=Object.freeze(Object.defineProperty({__proto__:null,base32:xMe,base32hex:PMe,base32hexpad:DMe,base32hexpadupper:MMe,base32hexupper:OMe,base32pad:RMe,base32padupper:kMe,base32upper:TMe,base32z:BMe},Symbol.toStringTag,{value:"Module"})),LMe=GI({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$Me=GI({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),FMe=Object.freeze(Object.defineProperty({__proto__:null,base36:LMe,base36upper:$Me},Symbol.toStringTag,{value:"Module"})),jMe=GI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),WMe=GI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),zMe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:jMe,base58flickr:WMe},Symbol.toStringTag,{value:"Module"})),HMe=Eo({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),GMe=Eo({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qMe=Eo({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),VMe=Eo({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),KMe=Object.freeze(Object.defineProperty({__proto__:null,base64:HMe,base64pad:GMe,base64url:qMe,base64urlpad:VMe},Symbol.toStringTag,{value:"Module"})),cse=Array.from(""),YMe=cse.reduce((t,e,n)=>(t[n]=e,t),[]),QMe=cse.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function JMe(t){return t.reduce((e,n)=>(e+=YMe[n],e),"")}function ZMe(t){const e=[];for(const n of t){const r=QMe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const XMe=AP({prefix:"",name:"base256emoji",encode:JMe,decode:ZMe}),eBe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:XMe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Bz={...wMe,...vMe,...CMe,...AMe,...NMe,...UMe,...FMe,...zMe,...KMe,...eBe};function lse(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Uz=lse("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),_3=lse("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=ose(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),use={utf8:Uz,"utf-8":Uz,hex:Bz.base16,latin1:_3,ascii:_3,binary:_3,...Bz};function Pl(t,e="utf8"){const n=use[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function cc(t,e="utf8"){const n=use[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const tBe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},nBe="PARSE_ERROR",rBe="INVALID_REQUEST",sBe="METHOD_NOT_FOUND",iBe="INVALID_PARAMS",dse="INTERNAL_ERROR",I4="SERVER_ERROR",oBe=[-32700,-32600,-32601,-32602,-32603],j_={[nBe]:{code:-32700,message:"Parse error"},[rBe]:{code:-32600,message:"Invalid Request"},[sBe]:{code:-32601,message:"Method not found"},[iBe]:{code:-32602,message:"Invalid params"},[dse]:{code:-32603,message:"Internal error"},[I4]:{code:-32e3,message:"Server error"}},hse=I4;function aBe(t){return oBe.includes(t)}function Lz(t){return Object.keys(j_).includes(t)?j_[t]:j_[hse]}function cBe(t){const e=Object.values(j_).find(n=>n.code===t);return e||j_[hse]}function fse(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var pse={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zU=function(t,e){return zU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},zU(t,e)};function lBe(t,e){zU(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var HU=function(){return HU=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},HU.apply(this,arguments)};function uBe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function dBe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function hBe(t,e){return function(n,r){e(n,r,t)}}function fBe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function pBe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function gBe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function mBe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function yBe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function GU(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gse(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function wBe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(gse(arguments[e]));return t}function bBe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function sS(t){return this instanceof sS?(this.v=t,this):new sS(t)}function vBe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof sS?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function EBe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:sS(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function CBe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof GU=="function"?GU(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function _Be(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function ABe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function SBe(t){return t&&t.__esModule?t:{default:t}}function IBe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function NBe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const xBe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return HU},__asyncDelegator:EBe,__asyncGenerator:vBe,__asyncValues:CBe,__await:sS,__awaiter:pBe,__classPrivateFieldGet:IBe,__classPrivateFieldSet:NBe,__createBinding:mBe,__decorate:dBe,__exportStar:yBe,__extends:lBe,__generator:gBe,__importDefault:SBe,__importStar:ABe,__makeTemplateObject:_Be,__metadata:fBe,__param:hBe,__read:gse,__rest:uBe,__spread:wBe,__spreadArrays:bBe,__values:GU},Symbol.toStringTag,{value:"Module"})),TBe=lI(xBe);var Ah={},$z;function RBe(){if($z)return Ah;$z=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.isBrowserCryptoAvailable=Ah.getSubtleCrypto=Ah.getBrowerCrypto=void 0;function t(){return(ei==null?void 0:ei.crypto)||(ei==null?void 0:ei.msCrypto)||{}}Ah.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Ah.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Ah.isBrowserCryptoAvailable=n,Ah}var Sh={},Fz;function kBe(){if(Fz)return Sh;Fz=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.isBrowser=Sh.isNode=Sh.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Sh.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Sh.isNode=e;function n(){return!t()&&!e()}return Sh.isBrowser=n,Sh}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=TBe;e.__exportStar(RBe(),t),e.__exportStar(kBe(),t)})(pse);function ud(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Ay(t=6){return BigInt(ud(t))}function bg(t,e,n){return{id:n||ud(),jsonrpc:"2.0",method:t,params:e}}function SP(t,e){return{id:t,jsonrpc:"2.0",result:e}}function IP(t,e,n){return{id:t,jsonrpc:"2.0",error:PBe(e)}}function PBe(t,e){return typeof t>"u"?Lz(dse):(typeof t=="string"&&(t=Object.assign(Object.assign({},Lz(I4)),{message:t})),aBe(t.code)&&(t=cBe(t.code)),t)}let OBe=class{},DBe=class extends OBe{constructor(){super()}},MBe=class extends DBe{constructor(e){super()}};const BBe="^https?:",UBe="^wss?:";function LBe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function mse(t,e){const n=LBe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function jz(t){return mse(t,BBe)}function Wz(t){return mse(t,UBe)}function $Be(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function yse(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function N4(t){return yse(t)&&"method"in t}function NP(t){return yse(t)&&(dd(t)||Al(t))}function dd(t){return"result"in t}function Al(t){return"error"in t}let Vl=class extends MBe{constructor(e){super(e),this.events=new ql.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(bg(e.method,e.params||[],e.id||Ay().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Al(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),NP(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const FBe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),jBe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",zz=t=>t.split("?")[0],Hz=10,WBe=FBe();let zBe=class{constructor(e){if(this.url=e,this.events=new ql.EventEmitter,this.registering=!1,!Wz(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Of(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Wz(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=pse.isReactNative()?void 0:{rejectUnauthorized:!$Be(e)},i=new WBe(e,[],s);jBe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?L0(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=IP(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return fse(e,zz(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Hz&&this.events.setMaxListeners(Hz)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${zz(this.url)}`));return this.events.emit("register_error",n),n}};var qU={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ei<"u"&&ei,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof ei<"u"&&ei||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(E){return E&&DataView.prototype.isPrototypeOf(E)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(E){return E&&u.indexOf(Object.prototype.toString.call(E))>-1};function h(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(E)||E==="")throw new TypeError('Invalid character in header field name: "'+E+'"');return E.toLowerCase()}function f(E){return typeof E!="string"&&(E=String(E)),E}function p(E){var _={next:function(){var D=E.shift();return{done:D===void 0,value:D}}};return c.iterable&&(_[Symbol.iterator]=function(){return _}),_}function g(E){this.map={},E instanceof g?E.forEach(function(_,D){this.append(D,_)},this):Array.isArray(E)?E.forEach(function(_){if(_.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+_.length);this.append(_[0],_[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(_){this.append(_,E[_])},this)}g.prototype.append=function(E,_){E=h(E),_=f(_);var D=this.map[E];this.map[E]=D?D+", "+_:_},g.prototype.delete=function(E){delete this.map[h(E)]},g.prototype.get=function(E){return E=h(E),this.has(E)?this.map[E]:null},g.prototype.has=function(E){return this.map.hasOwnProperty(h(E))},g.prototype.set=function(E,_){this.map[h(E)]=f(_)},g.prototype.forEach=function(E,_){for(var D in this.map)this.map.hasOwnProperty(D)&&E.call(_,this.map[D],D,this)},g.prototype.keys=function(){var E=[];return this.forEach(function(_,D){E.push(D)}),p(E)},g.prototype.values=function(){var E=[];return this.forEach(function(_){E.push(_)}),p(E)},g.prototype.entries=function(){var E=[];return this.forEach(function(_,D){E.push([D,_])}),p(E)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(E){if(!E._noBody){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}}function y(E){return new Promise(function(_,D){E.onload=function(){_(E.result)},E.onerror=function(){D(E.error)}})}function w(E){var _=new FileReader,D=y(_);return _.readAsArrayBuffer(E),D}function C(E){var _=new FileReader,D=y(_),x=/charset=([A-Za-z0-9_-]+)/.exec(E.type),B=x?x[1]:"utf-8";return _.readAsText(E,B),D}function N(E){for(var _=new Uint8Array(E),D=new Array(_.length),x=0;x<_.length;x++)D[x]=String.fromCharCode(_[x]);return D.join("")}function I(E){if(E.slice)return E.slice(0);var _=new Uint8Array(E.byteLength);return _.set(new Uint8Array(E)),_.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(E){this.bodyUsed=this.bodyUsed,this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:c.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:c.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():c.arrayBuffer&&c.blob&&l(E)?(this._bodyArrayBuffer=I(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||d(E))?this._bodyArrayBuffer=I(E):this._bodyText=E=Object.prototype.toString.call(E):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var E=m(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var E=m(this);return E||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var E=m(this);if(E)return E;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(H)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function U(E){var _=E.toUpperCase();return P.indexOf(_)>-1?_:E}function M(E,_){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');_=_||{};var D=_.body;if(E instanceof M){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,_.headers||(this.headers=new g(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!D&&E._bodyInit!=null&&(D=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new g(_.headers)),this.method=U(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal||function(){if("AbortController"in a){var W=new AbortController;return W.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&D)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(D),(this.method==="GET"||this.method==="HEAD")&&(_.cache==="no-store"||_.cache==="no-cache")){var x=/([?&])_=[^&]*/;if(x.test(this.url))this.url=this.url.replace(x,"$1_="+new Date().getTime());else{var B=/\?/;this.url+=(B.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function H(E){var _=new FormData;return E.trim().split("&").forEach(function(D){if(D){var x=D.split("="),B=x.shift().replace(/\+/g," "),W=x.join("=").replace(/\+/g," ");_.append(decodeURIComponent(B),decodeURIComponent(W))}}),_}function j(E){var _=new g,D=E.replace(/\r?\n[\t ]+/g," ");return D.split("\r").map(function(x){return x.indexOf(`
`)===0?x.substr(1,x.length):x}).forEach(function(x){var B=x.split(":"),W=B.shift().trim();if(W){var L=B.join(":").trim();try{_.append(W,L)}catch(S){console.warn("Response "+S.message)}}}),_}k.call(M.prototype);function K(E,_){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=_.statusText===void 0?"":""+_.statusText,this.headers=new g(_.headers),this.url=_.url||"",this._initBody(E)}k.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},K.error=function(){var E=new K(null,{status:200,statusText:""});return E.ok=!1,E.status=0,E.type="error",E};var $=[301,302,303,307,308];K.redirect=function(E,_){if($.indexOf(_)===-1)throw new RangeError("Invalid status code");return new K(null,{status:_,headers:{location:E}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(_,D){this.message=_,this.name=D;var x=Error(_);this.stack=x.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function v(E,_){return new Promise(function(D,x){var B=new M(E,_);if(B.signal&&B.signal.aborted)return x(new o.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function L(){W.abort()}W.onload=function(){var X={statusText:W.statusText,headers:j(W.getAllResponseHeaders()||"")};B.url.indexOf("file://")===0&&(W.status<200||W.status>599)?X.status=200:X.status=W.status,X.url="responseURL"in W?W.responseURL:X.headers.get("X-Request-URL");var se="response"in W?W.response:W.responseText;setTimeout(function(){D(new K(se,X))},0)},W.onerror=function(){setTimeout(function(){x(new TypeError("Network request failed"))},0)},W.ontimeout=function(){setTimeout(function(){x(new TypeError("Network request timed out"))},0)},W.onabort=function(){setTimeout(function(){x(new o.DOMException("Aborted","AbortError"))},0)};function S(X){try{return X===""&&a.location.href?a.location.href:X}catch{return X}}if(W.open(B.method,S(B.url),!0),B.credentials==="include"?W.withCredentials=!0:B.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&(c.blob?W.responseType="blob":c.arrayBuffer&&(W.responseType="arraybuffer")),_&&typeof _.headers=="object"&&!(_.headers instanceof g||a.Headers&&_.headers instanceof a.Headers)){var F=[];Object.getOwnPropertyNames(_.headers).forEach(function(X){F.push(h(X)),W.setRequestHeader(X,f(_.headers[X]))}),B.headers.forEach(function(X,se){F.indexOf(se)===-1&&W.setRequestHeader(se,X)})}else B.headers.forEach(function(X,se){W.setRequestHeader(se,X)});B.signal&&(B.signal.addEventListener("abort",L),W.onreadystatechange=function(){W.readyState===4&&B.signal.removeEventListener("abort",L)}),W.send(typeof B._bodyInit>"u"?null:B._bodyInit)})}return v.polyfill=!0,a.fetch||(a.fetch=v,a.Headers=g,a.Request=M,a.Response=K),o.Headers=g,o.Request=M,o.Response=K,o.fetch=v,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(qU,qU.exports);var HBe=qU.exports;const Gz=rh(HBe);var GBe=Object.defineProperty,qBe=Object.defineProperties,VBe=Object.getOwnPropertyDescriptors,qz=Object.getOwnPropertySymbols,KBe=Object.prototype.hasOwnProperty,YBe=Object.prototype.propertyIsEnumerable,Vz=(t,e,n)=>e in t?GBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kz=(t,e)=>{for(var n in e||(e={}))KBe.call(e,n)&&Vz(t,n,e[n]);if(qz)for(var n of qz(e))YBe.call(e,n)&&Vz(t,n,e[n]);return t},Yz=(t,e)=>qBe(t,VBe(e));const QBe={Accept:"application/json","Content-Type":"application/json"},JBe="POST",Qz={headers:QBe,method:JBe},Jz=10;let Hu=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new ql.EventEmitter,this.isAvailable=!1,this.registering=!1,!jz(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Of(e),r=await(await Gz(this.url,Yz(Kz({},Qz),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!jz(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Of({id:1,jsonrpc:"2.0",method:"test",params:[]});await Gz(e,Yz(Kz({},Qz),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?L0(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=IP(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return fse(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Jz&&this.events.setMaxListeners(Jz)}};const W_={getSIWX(){return Pe.state.siwx},async initializeIfEnabled(){var i;const t=Pe.state.siwx,e=J.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(J.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Fi.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),xs.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Zt._getClient())==null?void 0:i.disconnect().catch(console.error)),Pn.reset("Connect"),Su.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Pe.state.siwx,e=$t.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork(),r=Zt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();ht.getConnectorId(n.chainNamespace)===ft.CONNECTOR_ID.AUTH&&Pn.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Fi.close(),xs.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Fi.state.open||Pn.state.view==="ApproveTransaction")&&await Fi.open({view:"SIWXSignMessage"}),i.isSmartAccount?Su.showError("This application might not support Smart Accounts"):Su.showError("Signature declined"),xs.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await Zt.disconnect():Fi.close(),Pn.reset("Connect"),xs.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=Pe.state.siwx,e=$t.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Pn.state.view==="ApproveTransaction",r=Pn.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=W_.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Su.showLoading("Authenticating...",{autoClose:!1}),Et.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),xs.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:W_.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),xs.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:W_.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Su.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=J.state.activeChain;return{network:((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Et.state.preferredAccountTypes)==null?void 0:n[t])===go.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function dx(t,e){return ht.getConnectorId(t)===e}function ZBe(t){const e=Array.from(J.state.chains.keys());let n=[];return t?(n.push([t,J.state.chains.get(t)]),dx(t,ft.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&dx(r,ft.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,J.state.chains.get(r)])}):dx(t,ft.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&dx(r,ft.CONNECTOR_ID.AUTH)&&n.push([r,J.state.chains.get(r)])})):n=Array.from(J.state.chains.entries()),n}const Ga={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},ek={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ft.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ft.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ft.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ft.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ft.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ft.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ft.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ft.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ft.CONNECTOR_ID.COINBASE]:"Coinbase",[ft.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ft.CONNECTOR_ID.LEDGER]:"Ledger",[ft.CONNECTOR_ID.SAFE]:"Safe"}},xP={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Ga.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},XBe=new AbortController,Id={EmbeddedWalletAbortController:XBe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${e5e()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function e5e(){return typeof window<"u"}const t5e={createLogger(t,e="error"){const n=gw({level:e}),{logger:r}=vP({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},n5e="rpc.walletconnect.org";function Zz(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const A3=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],yb={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===n5e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ft.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ft.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return A3.includes(e)?Zz(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,m;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((m=r==null?void 0:r[i])==null?void 0:m.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:ek.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>yb.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(yg(a.url,a.config))}),A3.includes(t.caipNetworkId)&&r.push(yg(Zz(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(yg(a))}),HR(r)},extendWagmiTransports(t,e,n){if(A3.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return HR([n,yg(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ft.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Ct.getActiveCaipNetworkId(),n=J.getAllRequestedCaipNetworks(),r=Array.from(((c=J.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},tk={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ta=vs({providers:{...tk},providerIds:{...tk}}),jr={state:Ta,subscribeKey(t,e){return Ho(Ta,t,e)},subscribe(t){return Wo(Ta,()=>{t(Ta)})},subscribeProviders(t){return Wo(Ta.providers,()=>t(Ta.providers))},setProvider(t,e){e&&(Ta.providers[t]=B0(e))},getProvider(t){return Ta.providers[t]},setProviderId(t,e){e&&(Ta.providerIds[t]=e)},getProviderId(t){if(t)return Ta.providerIds[t]},reset(){Ta.providers={...tk},Ta.providerIds={...tk}},resetChain(t){Ta.providers[t]=void 0,Ta.providerIds[t]=void 0}};var En={},TP={};TP.byteLength=i5e;TP.toByteArray=a5e;TP.fromByteArray=u5e;var Dd=[],wl=[],r5e=typeof Uint8Array<"u"?Uint8Array:Array,S3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Hw=0,s5e=S3.length;Hw<s5e;++Hw)Dd[Hw]=S3[Hw],wl[S3.charCodeAt(Hw)]=Hw;wl[45]=62;wl[95]=63;function wse(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function i5e(t){var e=wse(t),n=e[0],r=e[1];return(n+r)*3/4-r}function o5e(t,e,n){return(e+n)*3/4-n}function a5e(t){var e,n=wse(t),r=n[0],s=n[1],i=new r5e(o5e(t,r,s)),o=0,a=s>0?r-4:r,c;for(c=0;c<a;c+=4)e=wl[t.charCodeAt(c)]<<18|wl[t.charCodeAt(c+1)]<<12|wl[t.charCodeAt(c+2)]<<6|wl[t.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=wl[t.charCodeAt(c)]<<2|wl[t.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=wl[t.charCodeAt(c)]<<10|wl[t.charCodeAt(c+1)]<<4|wl[t.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function c5e(t){return Dd[t>>18&63]+Dd[t>>12&63]+Dd[t>>6&63]+Dd[t&63]}function l5e(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(c5e(r));return s.join("")}function u5e(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(l5e(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(Dd[e>>2]+Dd[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(Dd[e>>10]+Dd[e>>4&63]+Dd[e<<2&63]+"=")),s.join("")}var x4={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */x4.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?s-1:0,h=n?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=i*256+t[e+d],d+=h,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=h,u-=8);if(i===0)i=1-l;else{if(i===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-l}return(f?-1:1)*o*Math.pow(2,i-r)};x4.write=function(t,e,n,r,s,i){var o,a,c,l=i*8-s-1,u=(1<<l)-1,d=u>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,l+=s;l>0;t[n+f]=o&255,f+=p,o/=256,l-=8);t[n+f-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=TP,n=x4,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const z=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(z,T),z.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(z){if(z>s)throw new RangeError('The value "'+z+'" is invalid for option "size"');const T=new Uint8Array(z);return Object.setPrototypeOf(T,a.prototype),T}function a(z,T,O){if(typeof z=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(z)}return c(z,T,O)}a.poolSize=8192;function c(z,T,O){if(typeof z=="string")return h(z,T);if(ArrayBuffer.isView(z))return p(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(vn(z,ArrayBuffer)||z&&vn(z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(vn(z,SharedArrayBuffer)||z&&vn(z.buffer,SharedArrayBuffer)))return g(z,T,O);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Y=z.valueOf&&z.valueOf();if(Y!=null&&Y!==z)return a.from(Y,T,O);const te=m(z);if(te)return te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return a.from(z[Symbol.toPrimitive]("string"),T,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}a.from=function(z,T,O){return c(z,T,O)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function u(z,T,O){return l(z),z<=0?o(z):T!==void 0?typeof O=="string"?o(z).fill(T,O):o(z).fill(T):o(z)}a.alloc=function(z,T,O){return u(z,T,O)};function d(z){return l(z),o(z<0?0:y(z)|0)}a.allocUnsafe=function(z){return d(z)},a.allocUnsafeSlow=function(z){return d(z)};function h(z,T){if((typeof T!="string"||T==="")&&(T="utf8"),!a.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const O=C(z,T)|0;let Y=o(O);const te=Y.write(z,T);return te!==O&&(Y=Y.slice(0,te)),Y}function f(z){const T=z.length<0?0:y(z.length)|0,O=o(T);for(let Y=0;Y<T;Y+=1)O[Y]=z[Y]&255;return O}function p(z){if(vn(z,Uint8Array)){const T=new Uint8Array(z);return g(T.buffer,T.byteOffset,T.byteLength)}return f(z)}function g(z,T,O){if(T<0||z.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<T+(O||0))throw new RangeError('"length" is outside of buffer bounds');let Y;return T===void 0&&O===void 0?Y=new Uint8Array(z):O===void 0?Y=new Uint8Array(z,T):Y=new Uint8Array(z,T,O),Object.setPrototypeOf(Y,a.prototype),Y}function m(z){if(a.isBuffer(z)){const T=y(z.length)|0,O=o(T);return O.length===0||z.copy(O,0,0,T),O}if(z.length!==void 0)return typeof z.length!="number"||He(z.length)?o(0):f(z);if(z.type==="Buffer"&&Array.isArray(z.data))return f(z.data)}function y(z){if(z>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return z|0}function w(z){return+z!=z&&(z=0),a.alloc(+z)}a.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==a.prototype},a.compare=function(T,O){if(vn(T,Uint8Array)&&(T=a.from(T,T.offset,T.byteLength)),vn(O,Uint8Array)&&(O=a.from(O,O.offset,O.byteLength)),!a.isBuffer(T)||!a.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===O)return 0;let Y=T.length,te=O.length;for(let he=0,be=Math.min(Y,te);he<be;++he)if(T[he]!==O[he]){Y=T[he],te=O[he];break}return Y<te?-1:te<Y?1:0},a.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(T,O){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return a.alloc(0);let Y;if(O===void 0)for(O=0,Y=0;Y<T.length;++Y)O+=T[Y].length;const te=a.allocUnsafe(O);let he=0;for(Y=0;Y<T.length;++Y){let be=T[Y];if(vn(be,Uint8Array))he+be.length>te.length?(a.isBuffer(be)||(be=a.from(be)),be.copy(te,he)):Uint8Array.prototype.set.call(te,be,he);else if(a.isBuffer(be))be.copy(te,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=be.length}return te};function C(z,T){if(a.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||vn(z,ArrayBuffer))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const O=z.length,Y=arguments.length>2&&arguments[2]===!0;if(!Y&&O===0)return 0;let te=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return Ce(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return Ye(z).length;default:if(te)return Y?-1:Ce(z).length;T=(""+T).toLowerCase(),te=!0}}a.byteLength=C;function N(z,T,O){let Y=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,T>>>=0,O<=T))return"";for(z||(z="utf8");;)switch(z){case"hex":return B(this,T,O);case"utf8":case"utf-8":return v(this,T,O);case"ascii":return D(this,T,O);case"latin1":case"binary":return x(this,T,O);case"base64":return $(this,T,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,T,O);default:if(Y)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),Y=!0}}a.prototype._isBuffer=!0;function I(z,T,O){const Y=z[T];z[T]=z[O],z[O]=Y}a.prototype.swap16=function(){const T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let O=0;O<T;O+=2)I(this,O,O+1);return this},a.prototype.swap32=function(){const T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let O=0;O<T;O+=4)I(this,O,O+3),I(this,O+1,O+2);return this},a.prototype.swap64=function(){const T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let O=0;O<T;O+=8)I(this,O,O+7),I(this,O+1,O+6),I(this,O+2,O+5),I(this,O+3,O+4);return this},a.prototype.toString=function(){const T=this.length;return T===0?"":arguments.length===0?v(this,0,T):N.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(T){if(!a.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:a.compare(this,T)===0},a.prototype.inspect=function(){let T="";const O=t.INSPECT_MAX_BYTES;return T=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(T+=" ... "),"<Buffer "+T+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(T,O,Y,te,he){if(vn(T,Uint8Array)&&(T=a.from(T,T.offset,T.byteLength)),!a.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(O===void 0&&(O=0),Y===void 0&&(Y=T?T.length:0),te===void 0&&(te=0),he===void 0&&(he=this.length),O<0||Y>T.length||te<0||he>this.length)throw new RangeError("out of range index");if(te>=he&&O>=Y)return 0;if(te>=he)return-1;if(O>=Y)return 1;if(O>>>=0,Y>>>=0,te>>>=0,he>>>=0,this===T)return 0;let be=he-te,cn=Y-O;const Ft=Math.min(be,cn),It=this.slice(te,he),Fn=T.slice(O,Y);for(let ke=0;ke<Ft;++ke)if(It[ke]!==Fn[ke]){be=It[ke],cn=Fn[ke];break}return be<cn?-1:cn<be?1:0};function k(z,T,O,Y,te){if(z.length===0)return-1;if(typeof O=="string"?(Y=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,He(O)&&(O=te?0:z.length-1),O<0&&(O=z.length+O),O>=z.length){if(te)return-1;O=z.length-1}else if(O<0)if(te)O=0;else return-1;if(typeof T=="string"&&(T=a.from(T,Y)),a.isBuffer(T))return T.length===0?-1:P(z,T,O,Y,te);if(typeof T=="number")return T=T&255,typeof Uint8Array.prototype.indexOf=="function"?te?Uint8Array.prototype.indexOf.call(z,T,O):Uint8Array.prototype.lastIndexOf.call(z,T,O):P(z,[T],O,Y,te);throw new TypeError("val must be string, number or Buffer")}function P(z,T,O,Y,te){let he=1,be=z.length,cn=T.length;if(Y!==void 0&&(Y=String(Y).toLowerCase(),Y==="ucs2"||Y==="ucs-2"||Y==="utf16le"||Y==="utf-16le")){if(z.length<2||T.length<2)return-1;he=2,be/=2,cn/=2,O/=2}function Ft(Fn,ke){return he===1?Fn[ke]:Fn.readUInt16BE(ke*he)}let It;if(te){let Fn=-1;for(It=O;It<be;It++)if(Ft(z,It)===Ft(T,Fn===-1?0:It-Fn)){if(Fn===-1&&(Fn=It),It-Fn+1===cn)return Fn*he}else Fn!==-1&&(It-=It-Fn),Fn=-1}else for(O+cn>be&&(O=be-cn),It=O;It>=0;It--){let Fn=!0;for(let ke=0;ke<cn;ke++)if(Ft(z,It+ke)!==Ft(T,ke)){Fn=!1;break}if(Fn)return It}return-1}a.prototype.includes=function(T,O,Y){return this.indexOf(T,O,Y)!==-1},a.prototype.indexOf=function(T,O,Y){return k(this,T,O,Y,!0)},a.prototype.lastIndexOf=function(T,O,Y){return k(this,T,O,Y,!1)};function U(z,T,O,Y){O=Number(O)||0;const te=z.length-O;Y?(Y=Number(Y),Y>te&&(Y=te)):Y=te;const he=T.length;Y>he/2&&(Y=he/2);let be;for(be=0;be<Y;++be){const cn=parseInt(T.substr(be*2,2),16);if(He(cn))return be;z[O+be]=cn}return be}function M(z,T,O,Y){return it(Ce(T,z.length-O),z,O,Y)}function H(z,T,O,Y){return it(Qe(T),z,O,Y)}function j(z,T,O,Y){return it(Ye(T),z,O,Y)}function K(z,T,O,Y){return it(pt(T,z.length-O),z,O,Y)}a.prototype.write=function(T,O,Y,te){if(O===void 0)te="utf8",Y=this.length,O=0;else if(Y===void 0&&typeof O=="string")te=O,Y=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(Y)?(Y=Y>>>0,te===void 0&&(te="utf8")):(te=Y,Y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const he=this.length-O;if((Y===void 0||Y>he)&&(Y=he),T.length>0&&(Y<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let be=!1;for(;;)switch(te){case"hex":return U(this,T,O,Y);case"utf8":case"utf-8":return M(this,T,O,Y);case"ascii":case"latin1":case"binary":return H(this,T,O,Y);case"base64":return j(this,T,O,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,T,O,Y);default:if(be)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),be=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(z,T,O){return T===0&&O===z.length?e.fromByteArray(z):e.fromByteArray(z.slice(T,O))}function v(z,T,O){O=Math.min(z.length,O);const Y=[];let te=T;for(;te<O;){const he=z[te];let be=null,cn=he>239?4:he>223?3:he>191?2:1;if(te+cn<=O){let Ft,It,Fn,ke;switch(cn){case 1:he<128&&(be=he);break;case 2:Ft=z[te+1],(Ft&192)===128&&(ke=(he&31)<<6|Ft&63,ke>127&&(be=ke));break;case 3:Ft=z[te+1],It=z[te+2],(Ft&192)===128&&(It&192)===128&&(ke=(he&15)<<12|(Ft&63)<<6|It&63,ke>2047&&(ke<55296||ke>57343)&&(be=ke));break;case 4:Ft=z[te+1],It=z[te+2],Fn=z[te+3],(Ft&192)===128&&(It&192)===128&&(Fn&192)===128&&(ke=(he&15)<<18|(Ft&63)<<12|(It&63)<<6|Fn&63,ke>65535&&ke<1114112&&(be=ke))}}be===null?(be=65533,cn=1):be>65535&&(be-=65536,Y.push(be>>>10&1023|55296),be=56320|be&1023),Y.push(be),te+=cn}return _(Y)}const E=4096;function _(z){const T=z.length;if(T<=E)return String.fromCharCode.apply(String,z);let O="",Y=0;for(;Y<T;)O+=String.fromCharCode.apply(String,z.slice(Y,Y+=E));return O}function D(z,T,O){let Y="";O=Math.min(z.length,O);for(let te=T;te<O;++te)Y+=String.fromCharCode(z[te]&127);return Y}function x(z,T,O){let Y="";O=Math.min(z.length,O);for(let te=T;te<O;++te)Y+=String.fromCharCode(z[te]);return Y}function B(z,T,O){const Y=z.length;(!T||T<0)&&(T=0),(!O||O<0||O>Y)&&(O=Y);let te="";for(let he=T;he<O;++he)te+=Yt[z[he]];return te}function W(z,T,O){const Y=z.slice(T,O);let te="";for(let he=0;he<Y.length-1;he+=2)te+=String.fromCharCode(Y[he]+Y[he+1]*256);return te}a.prototype.slice=function(T,O){const Y=this.length;T=~~T,O=O===void 0?Y:~~O,T<0?(T+=Y,T<0&&(T=0)):T>Y&&(T=Y),O<0?(O+=Y,O<0&&(O=0)):O>Y&&(O=Y),O<T&&(O=T);const te=this.subarray(T,O);return Object.setPrototypeOf(te,a.prototype),te};function L(z,T,O){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+T>O)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(T,O,Y){T=T>>>0,O=O>>>0,Y||L(T,O,this.length);let te=this[T],he=1,be=0;for(;++be<O&&(he*=256);)te+=this[T+be]*he;return te},a.prototype.readUintBE=a.prototype.readUIntBE=function(T,O,Y){T=T>>>0,O=O>>>0,Y||L(T,O,this.length);let te=this[T+--O],he=1;for(;O>0&&(he*=256);)te+=this[T+--O]*he;return te},a.prototype.readUint8=a.prototype.readUInt8=function(T,O){return T=T>>>0,O||L(T,1,this.length),this[T]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(T,O){return T=T>>>0,O||L(T,2,this.length),this[T]|this[T+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(T,O){return T=T>>>0,O||L(T,2,this.length),this[T]<<8|this[T+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(T,O){return T=T>>>0,O||L(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(T,O){return T=T>>>0,O||L(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},a.prototype.readBigUInt64LE=Qt(function(T){T=T>>>0,ce(T,"offset");const O=this[T],Y=this[T+7];(O===void 0||Y===void 0)&&ae(T,this.length-8);const te=O+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24,he=this[++T]+this[++T]*2**8+this[++T]*2**16+Y*2**24;return BigInt(te)+(BigInt(he)<<BigInt(32))}),a.prototype.readBigUInt64BE=Qt(function(T){T=T>>>0,ce(T,"offset");const O=this[T],Y=this[T+7];(O===void 0||Y===void 0)&&ae(T,this.length-8);const te=O*2**24+this[++T]*2**16+this[++T]*2**8+this[++T],he=this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+Y;return(BigInt(te)<<BigInt(32))+BigInt(he)}),a.prototype.readIntLE=function(T,O,Y){T=T>>>0,O=O>>>0,Y||L(T,O,this.length);let te=this[T],he=1,be=0;for(;++be<O&&(he*=256);)te+=this[T+be]*he;return he*=128,te>=he&&(te-=Math.pow(2,8*O)),te},a.prototype.readIntBE=function(T,O,Y){T=T>>>0,O=O>>>0,Y||L(T,O,this.length);let te=O,he=1,be=this[T+--te];for(;te>0&&(he*=256);)be+=this[T+--te]*he;return he*=128,be>=he&&(be-=Math.pow(2,8*O)),be},a.prototype.readInt8=function(T,O){return T=T>>>0,O||L(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},a.prototype.readInt16LE=function(T,O){T=T>>>0,O||L(T,2,this.length);const Y=this[T]|this[T+1]<<8;return Y&32768?Y|4294901760:Y},a.prototype.readInt16BE=function(T,O){T=T>>>0,O||L(T,2,this.length);const Y=this[T+1]|this[T]<<8;return Y&32768?Y|4294901760:Y},a.prototype.readInt32LE=function(T,O){return T=T>>>0,O||L(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},a.prototype.readInt32BE=function(T,O){return T=T>>>0,O||L(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},a.prototype.readBigInt64LE=Qt(function(T){T=T>>>0,ce(T,"offset");const O=this[T],Y=this[T+7];(O===void 0||Y===void 0)&&ae(T,this.length-8);const te=this[T+4]+this[T+5]*2**8+this[T+6]*2**16+(Y<<24);return(BigInt(te)<<BigInt(32))+BigInt(O+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24)}),a.prototype.readBigInt64BE=Qt(function(T){T=T>>>0,ce(T,"offset");const O=this[T],Y=this[T+7];(O===void 0||Y===void 0)&&ae(T,this.length-8);const te=(O<<24)+this[++T]*2**16+this[++T]*2**8+this[++T];return(BigInt(te)<<BigInt(32))+BigInt(this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+Y)}),a.prototype.readFloatLE=function(T,O){return T=T>>>0,O||L(T,4,this.length),n.read(this,T,!0,23,4)},a.prototype.readFloatBE=function(T,O){return T=T>>>0,O||L(T,4,this.length),n.read(this,T,!1,23,4)},a.prototype.readDoubleLE=function(T,O){return T=T>>>0,O||L(T,8,this.length),n.read(this,T,!0,52,8)},a.prototype.readDoubleBE=function(T,O){return T=T>>>0,O||L(T,8,this.length),n.read(this,T,!1,52,8)};function S(z,T,O,Y,te,he){if(!a.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>te||T<he)throw new RangeError('"value" argument is out of bounds');if(O+Y>z.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(T,O,Y,te){if(T=+T,O=O>>>0,Y=Y>>>0,!te){const cn=Math.pow(2,8*Y)-1;S(this,T,O,Y,cn,0)}let he=1,be=0;for(this[O]=T&255;++be<Y&&(he*=256);)this[O+be]=T/he&255;return O+Y},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(T,O,Y,te){if(T=+T,O=O>>>0,Y=Y>>>0,!te){const cn=Math.pow(2,8*Y)-1;S(this,T,O,Y,cn,0)}let he=Y-1,be=1;for(this[O+he]=T&255;--he>=0&&(be*=256);)this[O+he]=T/be&255;return O+Y},a.prototype.writeUint8=a.prototype.writeUInt8=function(T,O,Y){return T=+T,O=O>>>0,Y||S(this,T,O,1,255,0),this[O]=T&255,O+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(T,O,Y){return T=+T,O=O>>>0,Y||S(this,T,O,2,65535,0),this[O]=T&255,this[O+1]=T>>>8,O+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(T,O,Y){return T=+T,O=O>>>0,Y||S(this,T,O,2,65535,0),this[O]=T>>>8,this[O+1]=T&255,O+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(T,O,Y){return T=+T,O=O>>>0,Y||S(this,T,O,4,4294967295,0),this[O+3]=T>>>24,this[O+2]=T>>>16,this[O+1]=T>>>8,this[O]=T&255,O+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(T,O,Y){return T=+T,O=O>>>0,Y||S(this,T,O,4,4294967295,0),this[O]=T>>>24,this[O+1]=T>>>16,this[O+2]=T>>>8,this[O+3]=T&255,O+4};function F(z,T,O,Y,te){st(T,Y,te,z,O,7);let he=Number(T&BigInt(4294967295));z[O++]=he,he=he>>8,z[O++]=he,he=he>>8,z[O++]=he,he=he>>8,z[O++]=he;let be=Number(T>>BigInt(32)&BigInt(4294967295));return z[O++]=be,be=be>>8,z[O++]=be,be=be>>8,z[O++]=be,be=be>>8,z[O++]=be,O}function X(z,T,O,Y,te){st(T,Y,te,z,O,7);let he=Number(T&BigInt(4294967295));z[O+7]=he,he=he>>8,z[O+6]=he,he=he>>8,z[O+5]=he,he=he>>8,z[O+4]=he;let be=Number(T>>BigInt(32)&BigInt(4294967295));return z[O+3]=be,be=be>>8,z[O+2]=be,be=be>>8,z[O+1]=be,be=be>>8,z[O]=be,O+8}a.prototype.writeBigUInt64LE=Qt(function(T,O=0){return F(this,T,O,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Qt(function(T,O=0){return X(this,T,O,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(T,O,Y,te){if(T=+T,O=O>>>0,!te){const Ft=Math.pow(2,8*Y-1);S(this,T,O,Y,Ft-1,-Ft)}let he=0,be=1,cn=0;for(this[O]=T&255;++he<Y&&(be*=256);)T<0&&cn===0&&this[O+he-1]!==0&&(cn=1),this[O+he]=(T/be>>0)-cn&255;return O+Y},a.prototype.writeIntBE=function(T,O,Y,te){if(T=+T,O=O>>>0,!te){const Ft=Math.pow(2,8*Y-1);S(this,T,O,Y,Ft-1,-Ft)}let he=Y-1,be=1,cn=0;for(this[O+he]=T&255;--he>=0&&(be*=256);)T<0&&cn===0&&this[O+he+1]!==0&&(cn=1),this[O+he]=(T/be>>0)-cn&255;return O+Y},a.prototype.writeInt8=function(T,O,Y){return T=+T,O=O>>>0,Y||S(this,T,O,1,127,-128),T<0&&(T=255+T+1),this[O]=T&255,O+1},a.prototype.writeInt16LE=function(T,O,Y){return T=+T,O=O>>>0,Y||S(this,T,O,2,32767,-32768),this[O]=T&255,this[O+1]=T>>>8,O+2},a.prototype.writeInt16BE=function(T,O,Y){return T=+T,O=O>>>0,Y||S(this,T,O,2,32767,-32768),this[O]=T>>>8,this[O+1]=T&255,O+2},a.prototype.writeInt32LE=function(T,O,Y){return T=+T,O=O>>>0,Y||S(this,T,O,4,2147483647,-2147483648),this[O]=T&255,this[O+1]=T>>>8,this[O+2]=T>>>16,this[O+3]=T>>>24,O+4},a.prototype.writeInt32BE=function(T,O,Y){return T=+T,O=O>>>0,Y||S(this,T,O,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[O]=T>>>24,this[O+1]=T>>>16,this[O+2]=T>>>8,this[O+3]=T&255,O+4},a.prototype.writeBigInt64LE=Qt(function(T,O=0){return F(this,T,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Qt(function(T,O=0){return X(this,T,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(z,T,O,Y,te,he){if(O+Y>z.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function ge(z,T,O,Y,te){return T=+T,O=O>>>0,te||se(z,T,O,4),n.write(z,T,O,Y,23,4),O+4}a.prototype.writeFloatLE=function(T,O,Y){return ge(this,T,O,!0,Y)},a.prototype.writeFloatBE=function(T,O,Y){return ge(this,T,O,!1,Y)};function Ue(z,T,O,Y,te){return T=+T,O=O>>>0,te||se(z,T,O,8),n.write(z,T,O,Y,52,8),O+8}a.prototype.writeDoubleLE=function(T,O,Y){return Ue(this,T,O,!0,Y)},a.prototype.writeDoubleBE=function(T,O,Y){return Ue(this,T,O,!1,Y)},a.prototype.copy=function(T,O,Y,te){if(!a.isBuffer(T))throw new TypeError("argument should be a Buffer");if(Y||(Y=0),!te&&te!==0&&(te=this.length),O>=T.length&&(O=T.length),O||(O=0),te>0&&te<Y&&(te=Y),te===Y||T.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),T.length-O<te-Y&&(te=T.length-O+Y);const he=te-Y;return this===T&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(O,Y,te):Uint8Array.prototype.set.call(T,this.subarray(Y,te),O),he},a.prototype.fill=function(T,O,Y,te){if(typeof T=="string"){if(typeof O=="string"?(te=O,O=0,Y=this.length):typeof Y=="string"&&(te=Y,Y=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!a.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(T.length===1){const be=T.charCodeAt(0);(te==="utf8"&&be<128||te==="latin1")&&(T=be)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(O<0||this.length<O||this.length<Y)throw new RangeError("Out of range index");if(Y<=O)return this;O=O>>>0,Y=Y===void 0?this.length:Y>>>0,T||(T=0);let he;if(typeof T=="number")for(he=O;he<Y;++he)this[he]=T;else{const be=a.isBuffer(T)?T:a.from(T,te),cn=be.length;if(cn===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(he=0;he<Y-O;++he)this[he+O]=be[he%cn]}return this};const Le={};function Be(z,T,O){Le[z]=class extends O{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}Be("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Be("ERR_INVALID_ARG_TYPE",function(z,T){return`The "${z}" argument must be of type number. Received type ${typeof T}`},TypeError),Be("ERR_OUT_OF_RANGE",function(z,T,O){let Y=`The value of "${z}" is out of range.`,te=O;return Number.isInteger(O)&&Math.abs(O)>2**32?te=Ut(String(O)):typeof O=="bigint"&&(te=String(O),(O>BigInt(2)**BigInt(32)||O<-(BigInt(2)**BigInt(32)))&&(te=Ut(te)),te+="n"),Y+=` It must be ${T}. Received ${te}`,Y},RangeError);function Ut(z){let T="",O=z.length;const Y=z[0]==="-"?1:0;for(;O>=Y+4;O-=3)T=`_${z.slice(O-3,O)}${T}`;return`${z.slice(0,O)}${T}`}function lt(z,T,O){ce(T,"offset"),(z[T]===void 0||z[T+O]===void 0)&&ae(T,z.length-(O+1))}function st(z,T,O,Y,te,he){if(z>O||z<T){const be=typeof T=="bigint"?"n":"";let cn;throw T===0||T===BigInt(0)?cn=`>= 0${be} and < 2${be} ** ${(he+1)*8}${be}`:cn=`>= -(2${be} ** ${(he+1)*8-1}${be}) and < 2 ** ${(he+1)*8-1}${be}`,new Le.ERR_OUT_OF_RANGE("value",cn,z)}lt(Y,te,he)}function ce(z,T){if(typeof z!="number")throw new Le.ERR_INVALID_ARG_TYPE(T,"number",z)}function ae(z,T,O){throw Math.floor(z)!==z?(ce(z,O),new Le.ERR_OUT_OF_RANGE("offset","an integer",z)):T<0?new Le.ERR_BUFFER_OUT_OF_BOUNDS:new Le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${T}`,z)}const _e=/[^+/0-9A-Za-z-_]/g;function Se(z){if(z=z.split("=")[0],z=z.trim().replace(_e,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function Ce(z,T){T=T||1/0;let O;const Y=z.length;let te=null;const he=[];for(let be=0;be<Y;++be){if(O=z.charCodeAt(be),O>55295&&O<57344){if(!te){if(O>56319){(T-=3)>-1&&he.push(239,191,189);continue}else if(be+1===Y){(T-=3)>-1&&he.push(239,191,189);continue}te=O;continue}if(O<56320){(T-=3)>-1&&he.push(239,191,189),te=O;continue}O=(te-55296<<10|O-56320)+65536}else te&&(T-=3)>-1&&he.push(239,191,189);if(te=null,O<128){if((T-=1)<0)break;he.push(O)}else if(O<2048){if((T-=2)<0)break;he.push(O>>6|192,O&63|128)}else if(O<65536){if((T-=3)<0)break;he.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((T-=4)<0)break;he.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return he}function Qe(z){const T=[];for(let O=0;O<z.length;++O)T.push(z.charCodeAt(O)&255);return T}function pt(z,T){let O,Y,te;const he=[];for(let be=0;be<z.length&&!((T-=2)<0);++be)O=z.charCodeAt(be),Y=O>>8,te=O%256,he.push(te),he.push(Y);return he}function Ye(z){return e.toByteArray(Se(z))}function it(z,T,O,Y){let te;for(te=0;te<Y&&!(te+O>=T.length||te>=z.length);++te)T[te+O]=z[te];return te}function vn(z,T){return z instanceof T||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===T.name}function He(z){return z!==z}const Yt=function(){const z="0123456789abcdef",T=new Array(256);for(let O=0;O<16;++O){const Y=O*16;for(let te=0;te<16;++te)T[Y+te]=z[O]+z[te]}return T}();function Qt(z){return typeof BigInt>"u"?De:z}function De(){throw new Error("BigInt not supported")}})(En);const Xz={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ji={set(t,e){Fc.isClient&&localStorage.setItem(`${bt.STORAGE_KEY}${t}`,e)},get(t){return Fc.isClient?localStorage.getItem(`${bt.STORAGE_KEY}${t}`):null},delete(t,e){Fc.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${bt.STORAGE_KEY}${t}`))}},hx=30*1e3,Fc={checkIfAllowedToTriggerEmail(){const t=Ji.get(bt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<hx){const n=Math.ceil((hx-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ji.get(bt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<hx)return Math.ceil((hx-e)/1e3)}return 0},checkIfRequestExists(t){return go.NOT_SAFE_RPC_METHODS.includes(t.method)||go.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(Xz.transactionHash))||(t==null?void 0:t.match(Xz.signedMessage)))?bt.RPC_RESPONSE_TYPE_TX:bt.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return go.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var fr;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(fr||(fr={}));var VU;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(VU||(VU={}));const ct=fr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Lp=t=>{switch(typeof t){case"undefined":return ct.undefined;case"string":return ct.string;case"number":return isNaN(t)?ct.nan:ct.number;case"boolean":return ct.boolean;case"function":return ct.function;case"bigint":return ct.bigint;case"symbol":return ct.symbol;case"object":return Array.isArray(t)?ct.array:t===null?ct.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ct.promise:typeof Map<"u"&&t instanceof Map?ct.map:typeof Set<"u"&&t instanceof Set?ct.set:typeof Date<"u"&&t instanceof Date?ct.date:ct.object;default:return ct.unknown}},$e=fr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),d5e=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Du extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,fr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Du.create=t=>new Du(t);const iS=(t,e)=>{let n;switch(t.code){case $e.invalid_type:t.received===ct.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case $e.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,fr.jsonStringifyReplacer)}`;break;case $e.unrecognized_keys:n=`Unrecognized key(s) in object: ${fr.joinValues(t.keys,", ")}`;break;case $e.invalid_union:n="Invalid input";break;case $e.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${fr.joinValues(t.options)}`;break;case $e.invalid_enum_value:n=`Invalid enum value. Expected ${fr.joinValues(t.options)}, received '${t.received}'`;break;case $e.invalid_arguments:n="Invalid function arguments";break;case $e.invalid_return_type:n="Invalid function return type";break;case $e.invalid_date:n="Invalid date";break;case $e.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:fr.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case $e.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case $e.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case $e.custom:n="Invalid input";break;case $e.invalid_intersection_types:n="Intersection results could not be merged";break;case $e.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case $e.not_finite:n="Number must be finite";break;default:n=e.defaultError,fr.assertNever(t)}return{message:n}};let bse=iS;function h5e(t){bse=t}function nk(){return bse}const rk=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},f5e=[];function yt(t,e){const n=rk({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nk(),iS].filter(r=>!!r)});t.common.issues.push(n)}class zo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return bn;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return zo.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return bn;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const bn=Object.freeze({status:"aborted"}),vse=t=>({status:"dirty",value:t}),ma=t=>({status:"valid",value:t}),KU=t=>t.status==="aborted",YU=t=>t.status==="dirty",oS=t=>t.status==="valid",sk=t=>typeof Promise<"u"&&t instanceof Promise;var Wt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Wt||(Wt={}));class Zd{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const eH=(t,e)=>{if(oS(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Du(t.common.issues);return this._error=n,this._error}}};function xn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class On{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Lp(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Lp(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new zo,ctx:{common:e.parent.common,data:e.data,parsedType:Lp(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(sk(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lp(e)},i=this._parseSync({data:e,path:s.path,parent:s});return eH(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lp(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(sk(s)?s:Promise.resolve(s));return eH(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:$e.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Fu({schema:this,typeName:an.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return wf.create(this,this._def)}nullable(){return W0.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Mu.create(this,this._def)}promise(){return HE.create(this,this._def)}or(e){return uS.create([this,e],this._def)}and(e){return dS.create(this,e,this._def)}transform(e){return new Fu({...xn(this._def),schema:this,typeName:an.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new mS({...xn(this._def),innerType:this,defaultValue:n,typeName:an.ZodDefault})}brand(){return new Cse({typeName:an.ZodBranded,type:this,...xn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ck({...xn(this._def),innerType:this,catchValue:n,typeName:an.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return qI.create(this,e)}readonly(){return uk.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const p5e=/^c[^\s-]{8,}$/i,g5e=/^[a-z][a-z0-9]*$/,m5e=/^[0-9A-HJKMNP-TV-Z]{26}$/,y5e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,w5e=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,b5e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let I3;const v5e=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,E5e=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,C5e=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function _5e(t,e){return!!((e==="v4"||!e)&&v5e.test(t)||(e==="v6"||!e)&&E5e.test(t))}class Tu extends On{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ct.string){const i=this._getOrReturnCtx(e);return yt(i,{code:$e.invalid_type,expected:ct.string,received:i.parsedType}),bn}const r=new zo;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),yt(s,{code:$e.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),yt(s,{code:$e.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?yt(s,{code:$e.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&yt(s,{code:$e.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")w5e.test(e.data)||(s=this._getOrReturnCtx(e,s),yt(s,{validation:"email",code:$e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")I3||(I3=new RegExp(b5e,"u")),I3.test(e.data)||(s=this._getOrReturnCtx(e,s),yt(s,{validation:"emoji",code:$e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")y5e.test(e.data)||(s=this._getOrReturnCtx(e,s),yt(s,{validation:"uuid",code:$e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")p5e.test(e.data)||(s=this._getOrReturnCtx(e,s),yt(s,{validation:"cuid",code:$e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")g5e.test(e.data)||(s=this._getOrReturnCtx(e,s),yt(s,{validation:"cuid2",code:$e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")m5e.test(e.data)||(s=this._getOrReturnCtx(e,s),yt(s,{validation:"ulid",code:$e.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),yt(s,{validation:"url",code:$e.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),yt(s,{validation:"regex",code:$e.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),yt(s,{code:$e.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),yt(s,{code:$e.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),yt(s,{code:$e.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?C5e(i).test(e.data)||(s=this._getOrReturnCtx(e,s),yt(s,{code:$e.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?_5e(e.data,i.version)||(s=this._getOrReturnCtx(e,s),yt(s,{validation:"ip",code:$e.invalid_string,message:i.message}),r.dirty()):fr.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:$e.invalid_string,...Wt.errToObj(r)})}_addCheck(e){return new Tu({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Wt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Wt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Wt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Wt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Wt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Wt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Wt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Wt.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Wt.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Wt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Wt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Wt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Wt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Wt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Wt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Wt.errToObj(n)})}nonempty(e){return this.min(1,Wt.errToObj(e))}trim(){return new Tu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Tu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Tu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Tu.create=t=>{var e;return new Tu({checks:[],typeName:an.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...xn(t)})};function A5e(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class dm extends On{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ct.number){const i=this._getOrReturnCtx(e);return yt(i,{code:$e.invalid_type,expected:ct.number,received:i.parsedType}),bn}let r;const s=new zo;for(const i of this._def.checks)i.kind==="int"?fr.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),yt(r,{code:$e.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),yt(r,{code:$e.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),yt(r,{code:$e.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?A5e(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),yt(r,{code:$e.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),yt(r,{code:$e.not_finite,message:i.message}),s.dirty()):fr.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Wt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Wt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Wt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Wt.toString(n))}setLimit(e,n,r,s){return new dm({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Wt.toString(s)}]})}_addCheck(e){return new dm({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Wt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Wt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Wt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Wt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Wt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Wt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Wt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Wt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Wt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&fr.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}dm.create=t=>new dm({checks:[],typeName:an.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...xn(t)});class hm extends On{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ct.bigint){const i=this._getOrReturnCtx(e);return yt(i,{code:$e.invalid_type,expected:ct.bigint,received:i.parsedType}),bn}let r;const s=new zo;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),yt(r,{code:$e.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),yt(r,{code:$e.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),yt(r,{code:$e.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):fr.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Wt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Wt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Wt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Wt.toString(n))}setLimit(e,n,r,s){return new hm({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Wt.toString(s)}]})}_addCheck(e){return new hm({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Wt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Wt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Wt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Wt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Wt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}hm.create=t=>{var e;return new hm({checks:[],typeName:an.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...xn(t)})};class aS extends On{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ct.boolean){const r=this._getOrReturnCtx(e);return yt(r,{code:$e.invalid_type,expected:ct.boolean,received:r.parsedType}),bn}return ma(e.data)}}aS.create=t=>new aS({typeName:an.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...xn(t)});class F0 extends On{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ct.date){const i=this._getOrReturnCtx(e);return yt(i,{code:$e.invalid_type,expected:ct.date,received:i.parsedType}),bn}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return yt(i,{code:$e.invalid_date}),bn}const r=new zo;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),yt(s,{code:$e.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),yt(s,{code:$e.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):fr.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new F0({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Wt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Wt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}F0.create=t=>new F0({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:an.ZodDate,...xn(t)});class ik extends On{_parse(e){if(this._getType(e)!==ct.symbol){const r=this._getOrReturnCtx(e);return yt(r,{code:$e.invalid_type,expected:ct.symbol,received:r.parsedType}),bn}return ma(e.data)}}ik.create=t=>new ik({typeName:an.ZodSymbol,...xn(t)});class cS extends On{_parse(e){if(this._getType(e)!==ct.undefined){const r=this._getOrReturnCtx(e);return yt(r,{code:$e.invalid_type,expected:ct.undefined,received:r.parsedType}),bn}return ma(e.data)}}cS.create=t=>new cS({typeName:an.ZodUndefined,...xn(t)});class lS extends On{_parse(e){if(this._getType(e)!==ct.null){const r=this._getOrReturnCtx(e);return yt(r,{code:$e.invalid_type,expected:ct.null,received:r.parsedType}),bn}return ma(e.data)}}lS.create=t=>new lS({typeName:an.ZodNull,...xn(t)});class zE extends On{constructor(){super(...arguments),this._any=!0}_parse(e){return ma(e.data)}}zE.create=t=>new zE({typeName:an.ZodAny,...xn(t)});class l0 extends On{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ma(e.data)}}l0.create=t=>new l0({typeName:an.ZodUnknown,...xn(t)});class Df extends On{_parse(e){const n=this._getOrReturnCtx(e);return yt(n,{code:$e.invalid_type,expected:ct.never,received:n.parsedType}),bn}}Df.create=t=>new Df({typeName:an.ZodNever,...xn(t)});class ok extends On{_parse(e){if(this._getType(e)!==ct.undefined){const r=this._getOrReturnCtx(e);return yt(r,{code:$e.invalid_type,expected:ct.void,received:r.parsedType}),bn}return ma(e.data)}}ok.create=t=>new ok({typeName:an.ZodVoid,...xn(t)});class Mu extends On{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ct.array)return yt(n,{code:$e.invalid_type,expected:ct.array,received:n.parsedType}),bn;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(yt(n,{code:o?$e.too_big:$e.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(yt(n,{code:$e.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(yt(n,{code:$e.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Zd(n,o,n.path,a)))).then(o=>zo.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Zd(n,o,n.path,a)));return zo.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Mu({...this._def,minLength:{value:e,message:Wt.toString(n)}})}max(e,n){return new Mu({...this._def,maxLength:{value:e,message:Wt.toString(n)}})}length(e,n){return new Mu({...this._def,exactLength:{value:e,message:Wt.toString(n)}})}nonempty(e){return this.min(1,e)}}Mu.create=(t,e)=>new Mu({type:t,minLength:null,maxLength:null,exactLength:null,typeName:an.ZodArray,...xn(e)});function wb(t){if(t instanceof Ts){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=wf.create(wb(r))}return new Ts({...t._def,shape:()=>e})}else return t instanceof Mu?new Mu({...t._def,type:wb(t.element)}):t instanceof wf?wf.create(wb(t.unwrap())):t instanceof W0?W0.create(wb(t.unwrap())):t instanceof Xd?Xd.create(t.items.map(e=>wb(e))):t}class Ts extends On{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=fr.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ct.object){const l=this._getOrReturnCtx(e);return yt(l,{code:$e.invalid_type,expected:ct.object,received:l.parsedType}),bn}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Df&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Zd(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Df){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(yt(s,{code:$e.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Zd(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>zo.mergeObjectSync(r,l)):zo.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Wt.errToObj,new Ts({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Wt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Ts({...this._def,unknownKeys:"strip"})}passthrough(){return new Ts({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ts({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ts({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:an.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ts({...this._def,catchall:e})}pick(e){const n={};return fr.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ts({...this._def,shape:()=>n})}omit(e){const n={};return fr.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ts({...this._def,shape:()=>n})}deepPartial(){return wb(this)}partial(e){const n={};return fr.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Ts({...this._def,shape:()=>n})}required(e){const n={};return fr.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof wf;)i=i._def.innerType;n[r]=i}}),new Ts({...this._def,shape:()=>n})}keyof(){return Ese(fr.objectKeys(this.shape))}}Ts.create=(t,e)=>new Ts({shape:()=>t,unknownKeys:"strip",catchall:Df.create(),typeName:an.ZodObject,...xn(e)});Ts.strictCreate=(t,e)=>new Ts({shape:()=>t,unknownKeys:"strict",catchall:Df.create(),typeName:an.ZodObject,...xn(e)});Ts.lazycreate=(t,e)=>new Ts({shape:t,unknownKeys:"strip",catchall:Df.create(),typeName:an.ZodObject,...xn(e)});class uS extends On{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Du(a.ctx.common.issues));return yt(n,{code:$e.invalid_union,unionErrors:o}),bn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Du(c));return yt(n,{code:$e.invalid_union,unionErrors:a}),bn}}get options(){return this._def.options}}uS.create=(t,e)=>new uS({options:t,typeName:an.ZodUnion,...xn(e)});const mT=t=>t instanceof fS?mT(t.schema):t instanceof Fu?mT(t.innerType()):t instanceof pS?[t.value]:t instanceof fm?t.options:t instanceof gS?Object.keys(t.enum):t instanceof mS?mT(t._def.innerType):t instanceof cS?[void 0]:t instanceof lS?[null]:null;class RP extends On{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ct.object)return yt(n,{code:$e.invalid_type,expected:ct.object,received:n.parsedType}),bn;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(yt(n,{code:$e.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),bn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=mT(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new RP({typeName:an.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...xn(r)})}}function QU(t,e){const n=Lp(t),r=Lp(e);if(t===e)return{valid:!0,data:t};if(n===ct.object&&r===ct.object){const s=fr.objectKeys(e),i=fr.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=QU(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ct.array&&r===ct.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=QU(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===ct.date&&r===ct.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class dS extends On{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(KU(i)||KU(o))return bn;const a=QU(i.value,o.value);return a.valid?((YU(i)||YU(o))&&n.dirty(),{status:n.value,value:a.data}):(yt(r,{code:$e.invalid_intersection_types}),bn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}dS.create=(t,e,n)=>new dS({left:t,right:e,typeName:an.ZodIntersection,...xn(n)});class Xd extends On{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ct.array)return yt(r,{code:$e.invalid_type,expected:ct.array,received:r.parsedType}),bn;if(r.data.length<this._def.items.length)return yt(r,{code:$e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),bn;!this._def.rest&&r.data.length>this._def.items.length&&(yt(r,{code:$e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Zd(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>zo.mergeArray(n,o)):zo.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Xd({...this._def,rest:e})}}Xd.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xd({items:t,typeName:an.ZodTuple,rest:null,...xn(e)})};class hS extends On{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ct.object)return yt(r,{code:$e.invalid_type,expected:ct.object,received:r.parsedType}),bn;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Zd(r,a,r.path,a)),value:o._parse(new Zd(r,r.data[a],r.path,a))});return r.common.async?zo.mergeObjectAsync(n,s):zo.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof On?new hS({keyType:e,valueType:n,typeName:an.ZodRecord,...xn(r)}):new hS({keyType:Tu.create(),valueType:e,typeName:an.ZodRecord,...xn(n)})}}class ak extends On{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ct.map)return yt(r,{code:$e.invalid_type,expected:ct.map,received:r.parsedType}),bn;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Zd(r,a,r.path,[l,"key"])),value:i._parse(new Zd(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return bn;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return bn;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}ak.create=(t,e,n)=>new ak({valueType:e,keyType:t,typeName:an.ZodMap,...xn(n)});class j0 extends On{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ct.set)return yt(r,{code:$e.invalid_type,expected:ct.set,received:r.parsedType}),bn;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(yt(r,{code:$e.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(yt(r,{code:$e.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return bn;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Zd(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new j0({...this._def,minSize:{value:e,message:Wt.toString(n)}})}max(e,n){return new j0({...this._def,maxSize:{value:e,message:Wt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}j0.create=(t,e)=>new j0({valueType:t,minSize:null,maxSize:null,typeName:an.ZodSet,...xn(e)});class uv extends On{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ct.function)return yt(n,{code:$e.invalid_type,expected:ct.function,received:n.parsedType}),bn;function r(a,c){return rk({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,nk(),iS].filter(l=>!!l),issueData:{code:$e.invalid_arguments,argumentsError:c}})}function s(a,c){return rk({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,nk(),iS].filter(l=>!!l),issueData:{code:$e.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof HE){const a=this;return ma(async function(...c){const l=new Du([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return ma(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Du([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Du([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new uv({...this._def,args:Xd.create(e).rest(l0.create())})}returns(e){return new uv({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new uv({args:e||Xd.create([]).rest(l0.create()),returns:n||l0.create(),typeName:an.ZodFunction,...xn(r)})}}class fS extends On{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}fS.create=(t,e)=>new fS({getter:t,typeName:an.ZodLazy,...xn(e)});class pS extends On{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return yt(n,{received:n.data,code:$e.invalid_literal,expected:this._def.value}),bn}return{status:"valid",value:e.data}}get value(){return this._def.value}}pS.create=(t,e)=>new pS({value:t,typeName:an.ZodLiteral,...xn(e)});function Ese(t,e){return new fm({values:t,typeName:an.ZodEnum,...xn(e)})}class fm extends On{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return yt(n,{expected:fr.joinValues(r),received:n.parsedType,code:$e.invalid_type}),bn}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return yt(n,{received:n.data,code:$e.invalid_enum_value,options:r}),bn}return ma(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return fm.create(e)}exclude(e){return fm.create(this.options.filter(n=>!e.includes(n)))}}fm.create=Ese;class gS extends On{_parse(e){const n=fr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ct.string&&r.parsedType!==ct.number){const s=fr.objectValues(n);return yt(r,{expected:fr.joinValues(s),received:r.parsedType,code:$e.invalid_type}),bn}if(n.indexOf(e.data)===-1){const s=fr.objectValues(n);return yt(r,{received:r.data,code:$e.invalid_enum_value,options:s}),bn}return ma(e.data)}get enum(){return this._def.values}}gS.create=(t,e)=>new gS({values:t,typeName:an.ZodNativeEnum,...xn(e)});class HE extends On{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ct.promise&&n.common.async===!1)return yt(n,{code:$e.invalid_type,expected:ct.promise,received:n.parsedType}),bn;const r=n.parsedType===ct.promise?n.data:Promise.resolve(n.data);return ma(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}HE.create=(t,e)=>new HE({type:t,typeName:an.ZodPromise,...xn(e)});class Fu extends On{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===an.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{yt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?bn:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?bn:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!oS(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>oS(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);fr.assertNever(s)}}Fu.create=(t,e,n)=>new Fu({schema:t,typeName:an.ZodEffects,effect:e,...xn(n)});Fu.createWithPreprocess=(t,e,n)=>new Fu({schema:e,effect:{type:"preprocess",transform:t},typeName:an.ZodEffects,...xn(n)});class wf extends On{_parse(e){return this._getType(e)===ct.undefined?ma(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wf.create=(t,e)=>new wf({innerType:t,typeName:an.ZodOptional,...xn(e)});class W0 extends On{_parse(e){return this._getType(e)===ct.null?ma(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}W0.create=(t,e)=>new W0({innerType:t,typeName:an.ZodNullable,...xn(e)});class mS extends On{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ct.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}mS.create=(t,e)=>new mS({innerType:t,typeName:an.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xn(e)});class ck extends On{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return sk(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Du(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Du(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ck.create=(t,e)=>new ck({innerType:t,typeName:an.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xn(e)});class lk extends On{_parse(e){if(this._getType(e)!==ct.nan){const r=this._getOrReturnCtx(e);return yt(r,{code:$e.invalid_type,expected:ct.nan,received:r.parsedType}),bn}return{status:"valid",value:e.data}}}lk.create=t=>new lk({typeName:an.ZodNaN,...xn(t)});const S5e=Symbol("zod_brand");class Cse extends On{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class qI extends On{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?bn:i.status==="dirty"?(n.dirty(),vse(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?bn:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new qI({in:e,out:n,typeName:an.ZodPipeline})}}class uk extends On{_parse(e){const n=this._def.innerType._parse(e);return oS(n)&&(n.value=Object.freeze(n.value)),n}}uk.create=(t,e)=>new uk({innerType:t,typeName:an.ZodReadonly,...xn(e)});const _se=(t,e={},n)=>t?zE.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):zE.create(),I5e={object:Ts.lazycreate};var an;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(an||(an={}));const N5e=(t,e={message:`Input not instance of ${t.name}`})=>_se(n=>n instanceof t,e),Ase=Tu.create,Sse=dm.create,x5e=lk.create,T5e=hm.create,Ise=aS.create,R5e=F0.create,k5e=ik.create,P5e=cS.create,O5e=lS.create,D5e=zE.create,M5e=l0.create,B5e=Df.create,U5e=ok.create,L5e=Mu.create,$5e=Ts.create,F5e=Ts.strictCreate,j5e=uS.create,W5e=RP.create,z5e=dS.create,H5e=Xd.create,G5e=hS.create,q5e=ak.create,V5e=j0.create,K5e=uv.create,Y5e=fS.create,Q5e=pS.create,J5e=fm.create,Z5e=gS.create,X5e=HE.create,tH=Fu.create,eUe=wf.create,tUe=W0.create,nUe=Fu.createWithPreprocess,rUe=qI.create,sUe=()=>Ase().optional(),iUe=()=>Sse().optional(),oUe=()=>Ise().optional(),aUe={string:t=>Tu.create({...t,coerce:!0}),number:t=>dm.create({...t,coerce:!0}),boolean:t=>aS.create({...t,coerce:!0}),bigint:t=>hm.create({...t,coerce:!0}),date:t=>F0.create({...t,coerce:!0})},cUe=bn;var A=Object.freeze({__proto__:null,defaultErrorMap:iS,setErrorMap:h5e,getErrorMap:nk,makeIssue:rk,EMPTY_PATH:f5e,addIssueToContext:yt,ParseStatus:zo,INVALID:bn,DIRTY:vse,OK:ma,isAborted:KU,isDirty:YU,isValid:oS,isAsync:sk,get util(){return fr},get objectUtil(){return VU},ZodParsedType:ct,getParsedType:Lp,ZodType:On,ZodString:Tu,ZodNumber:dm,ZodBigInt:hm,ZodBoolean:aS,ZodDate:F0,ZodSymbol:ik,ZodUndefined:cS,ZodNull:lS,ZodAny:zE,ZodUnknown:l0,ZodNever:Df,ZodVoid:ok,ZodArray:Mu,ZodObject:Ts,ZodUnion:uS,ZodDiscriminatedUnion:RP,ZodIntersection:dS,ZodTuple:Xd,ZodRecord:hS,ZodMap:ak,ZodSet:j0,ZodFunction:uv,ZodLazy:fS,ZodLiteral:pS,ZodEnum:fm,ZodNativeEnum:gS,ZodPromise:HE,ZodEffects:Fu,ZodTransformer:Fu,ZodOptional:wf,ZodNullable:W0,ZodDefault:mS,ZodCatch:ck,ZodNaN:lk,BRAND:S5e,ZodBranded:Cse,ZodPipeline:qI,ZodReadonly:uk,custom:_se,Schema:On,ZodSchema:On,late:I5e,get ZodFirstPartyTypeKind(){return an},coerce:aUe,any:D5e,array:L5e,bigint:T5e,boolean:Ise,date:R5e,discriminatedUnion:W5e,effect:tH,enum:J5e,function:K5e,instanceof:N5e,intersection:z5e,lazy:Y5e,literal:Q5e,map:q5e,nan:x5e,nativeEnum:Z5e,never:B5e,null:O5e,nullable:tUe,number:Sse,object:$5e,oboolean:oUe,onumber:iUe,optional:eUe,ostring:sUe,pipeline:rUe,preprocess:nUe,promise:X5e,record:G5e,set:V5e,strictObject:F5e,string:Ase,symbol:k5e,transformer:tH,tuple:H5e,undefined:P5e,union:j5e,unknown:M5e,void:U5e,NEVER:cUe,ZodIssueCode:$e,quotelessJson:d5e,ZodError:Du});const $s=A.object({message:A.string()});function gt(t){return A.literal(bt[t])}A.object({accessList:A.array(A.string()),blockHash:A.string().nullable(),blockNumber:A.string().nullable(),chainId:A.string().or(A.number()),from:A.string(),gas:A.string(),hash:A.string(),input:A.string().nullable(),maxFeePerGas:A.string(),maxPriorityFeePerGas:A.string(),nonce:A.string(),r:A.string(),s:A.string(),to:A.string(),transactionIndex:A.string().nullable(),type:A.string(),v:A.string(),value:A.string()});const lUe=A.object({chainId:A.string().or(A.number())}),uUe=A.object({email:A.string().email()}),dUe=A.object({otp:A.string()}),hUe=A.object({uri:A.string(),preferredAccountType:A.optional(A.string()),chainId:A.optional(A.string().or(A.number()))}),fUe=A.object({chainId:A.optional(A.string().or(A.number())),preferredAccountType:A.optional(A.string()),socialUri:A.optional(A.string())}),pUe=A.object({provider:A.enum(["google","github","apple","facebook","x","discord"])}),gUe=A.object({email:A.string().email()}),mUe=A.object({otp:A.string()}),yUe=A.object({otp:A.string()}),wUe=A.object({themeMode:A.optional(A.enum(["light","dark"])),themeVariables:A.optional(A.record(A.string(),A.string().or(A.number()))),w3mThemeVariables:A.optional(A.record(A.string(),A.string()))}),bUe=A.object({metadata:A.object({name:A.string(),description:A.string(),url:A.string(),icons:A.array(A.string())}).optional(),sdkVersion:A.string().optional(),sdkType:A.string().optional(),projectId:A.string()}),vUe=A.object({type:A.string()}),EUe=A.object({action:A.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),CUe=A.object({url:A.string()}),_Ue=A.object({userName:A.string()}),AUe=A.object({email:A.string().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),accounts:A.array(A.object({address:A.string(),type:A.enum([go.ACCOUNT_TYPES.EOA,go.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:A.string().optional().nullable(),preferredAccountType:A.optional(A.string())}),SUe=A.object({action:A.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),IUe=A.object({email:A.string().email().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),smartAccountDeployed:A.optional(A.boolean()),accounts:A.array(A.object({address:A.string(),type:A.enum([go.ACCOUNT_TYPES.EOA,go.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:A.optional(A.string())}),NUe=A.object({uri:A.string()}),xUe=A.object({isConnected:A.boolean()}),TUe=A.object({chainId:A.string().or(A.number())}),RUe=A.object({chainId:A.string().or(A.number())}),kUe=A.object({newEmail:A.string().email()}),PUe=A.object({smartAccountEnabledNetworks:A.array(A.number())});A.object({address:A.string(),isDeployed:A.boolean()});const OUe=A.object({version:A.string().optional()}),DUe=A.object({type:A.string(),address:A.string()}),MUe=A.any(),BUe=A.object({method:A.literal("eth_accounts")}),UUe=A.object({method:A.literal("eth_blockNumber")}),LUe=A.object({method:A.literal("eth_call"),params:A.array(A.any())}),$Ue=A.object({method:A.literal("eth_chainId")}),FUe=A.object({method:A.literal("eth_estimateGas"),params:A.array(A.any())}),jUe=A.object({method:A.literal("eth_feeHistory"),params:A.array(A.any())}),WUe=A.object({method:A.literal("eth_gasPrice")}),zUe=A.object({method:A.literal("eth_getAccount"),params:A.array(A.any())}),HUe=A.object({method:A.literal("eth_getBalance"),params:A.array(A.any())}),GUe=A.object({method:A.literal("eth_getBlockByHash"),params:A.array(A.any())}),qUe=A.object({method:A.literal("eth_getBlockByNumber"),params:A.array(A.any())}),VUe=A.object({method:A.literal("eth_getBlockReceipts"),params:A.array(A.any())}),KUe=A.object({method:A.literal("eth_getBlockTransactionCountByHash"),params:A.array(A.any())}),YUe=A.object({method:A.literal("eth_getBlockTransactionCountByNumber"),params:A.array(A.any())}),QUe=A.object({method:A.literal("eth_getCode"),params:A.array(A.any())}),JUe=A.object({method:A.literal("eth_getFilterChanges"),params:A.array(A.any())}),ZUe=A.object({method:A.literal("eth_getFilterLogs"),params:A.array(A.any())}),XUe=A.object({method:A.literal("eth_getLogs"),params:A.array(A.any())}),eLe=A.object({method:A.literal("eth_getProof"),params:A.array(A.any())}),tLe=A.object({method:A.literal("eth_getStorageAt"),params:A.array(A.any())}),nLe=A.object({method:A.literal("eth_getTransactionByBlockHashAndIndex"),params:A.array(A.any())}),rLe=A.object({method:A.literal("eth_getTransactionByBlockNumberAndIndex"),params:A.array(A.any())}),sLe=A.object({method:A.literal("eth_getTransactionByHash"),params:A.array(A.any())}),iLe=A.object({method:A.literal("eth_getTransactionCount"),params:A.array(A.any())}),oLe=A.object({method:A.literal("eth_getTransactionReceipt"),params:A.array(A.any())}),aLe=A.object({method:A.literal("eth_getUncleCountByBlockHash"),params:A.array(A.any())}),cLe=A.object({method:A.literal("eth_getUncleCountByBlockNumber"),params:A.array(A.any())}),lLe=A.object({method:A.literal("eth_maxPriorityFeePerGas")}),uLe=A.object({method:A.literal("eth_newBlockFilter")}),dLe=A.object({method:A.literal("eth_newFilter"),params:A.array(A.any())}),hLe=A.object({method:A.literal("eth_newPendingTransactionFilter")}),fLe=A.object({method:A.literal("eth_sendRawTransaction"),params:A.array(A.any())}),pLe=A.object({method:A.literal("eth_syncing"),params:A.array(A.any())}),gLe=A.object({method:A.literal("eth_uninstallFilter"),params:A.array(A.any())}),nH=A.object({method:A.literal("personal_sign"),params:A.array(A.any())}),mLe=A.object({method:A.literal("eth_signTypedData_v4"),params:A.array(A.any())}),yLe=A.object({method:A.literal("eth_sendTransaction"),params:A.array(A.any())}),wLe=A.object({method:A.literal("solana_signMessage"),params:A.object({message:A.string(),pubkey:A.string()})}),bLe=A.object({method:A.literal("solana_signTransaction"),params:A.object({transaction:A.string()})}),vLe=A.object({method:A.literal("solana_signAllTransactions"),params:A.object({transactions:A.array(A.string())})}),ELe=A.object({method:A.literal("solana_signAndSendTransaction"),params:A.object({transaction:A.string(),options:A.object({skipPreflight:A.boolean().optional(),preflightCommitment:A.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:A.number().optional(),minContextSlot:A.number().optional()}).optional()})}),CLe=A.object({method:A.literal("wallet_sendCalls"),params:A.array(A.object({chainId:A.string().or(A.number()).optional(),from:A.string().optional(),version:A.string().optional(),capabilities:A.any().optional(),calls:A.array(A.object({to:A.string().startsWith("0x"),data:A.string().startsWith("0x").optional(),value:A.string().optional()}))}))}),_Le=A.object({method:A.literal("wallet_getCallsStatus"),params:A.array(A.string())}),ALe=A.object({method:A.literal("wallet_getCapabilities")}),SLe=A.object({method:A.literal("wallet_grantPermissions"),params:A.array(A.any())}),ILe=A.object({method:A.literal("wallet_revokePermissions"),params:A.any()}),NLe=A.object({method:A.literal("wallet_getAssets"),params:A.any()}),rH=A.object({token:A.string()}),mt=A.object({id:A.string().optional()}),_1={appEvent:mt.extend({type:gt("APP_SWITCH_NETWORK"),payload:lUe}).or(mt.extend({type:gt("APP_CONNECT_EMAIL"),payload:uUe})).or(mt.extend({type:gt("APP_CONNECT_DEVICE")})).or(mt.extend({type:gt("APP_CONNECT_OTP"),payload:dUe})).or(mt.extend({type:gt("APP_CONNECT_SOCIAL"),payload:hUe})).or(mt.extend({type:gt("APP_GET_FARCASTER_URI")})).or(mt.extend({type:gt("APP_CONNECT_FARCASTER")})).or(mt.extend({type:gt("APP_GET_USER"),payload:A.optional(fUe)})).or(mt.extend({type:gt("APP_GET_SOCIAL_REDIRECT_URI"),payload:pUe})).or(mt.extend({type:gt("APP_SIGN_OUT")})).or(mt.extend({type:gt("APP_IS_CONNECTED"),payload:A.optional(rH)})).or(mt.extend({type:gt("APP_GET_CHAIN_ID")})).or(mt.extend({type:gt("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(mt.extend({type:gt("APP_INIT_SMART_ACCOUNT")})).or(mt.extend({type:gt("APP_SET_PREFERRED_ACCOUNT"),payload:vUe})).or(mt.extend({type:gt("APP_RPC_REQUEST"),payload:nH.or(NLe).or(BUe).or(UUe).or(LUe).or($Ue).or(FUe).or(jUe).or(WUe).or(zUe).or(HUe).or(GUe).or(qUe).or(VUe).or(KUe).or(YUe).or(QUe).or(JUe).or(ZUe).or(XUe).or(eLe).or(tLe).or(nLe).or(rLe).or(sLe).or(iLe).or(oLe).or(aLe).or(cLe).or(lLe).or(uLe).or(dLe).or(hLe).or(fLe).or(pLe).or(gLe).or(nH).or(mLe).or(yLe).or(wLe).or(bLe).or(vLe).or(ELe).or(_Le).or(CLe).or(ALe).or(SLe).or(ILe)})).or(mt.extend({type:gt("APP_UPDATE_EMAIL"),payload:gUe})).or(mt.extend({type:gt("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:mUe})).or(mt.extend({type:gt("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:yUe})).or(mt.extend({type:gt("APP_SYNC_THEME"),payload:wUe})).or(mt.extend({type:gt("APP_SYNC_DAPP_DATA"),payload:bUe})).or(mt.extend({type:gt("APP_RELOAD")})),frameEvent:mt.extend({type:gt("FRAME_SWITCH_NETWORK_ERROR"),payload:$s}).or(mt.extend({type:gt("FRAME_SWITCH_NETWORK_SUCCESS"),payload:RUe})).or(mt.extend({type:gt("FRAME_CONNECT_EMAIL_SUCCESS"),payload:EUe})).or(mt.extend({type:gt("FRAME_CONNECT_EMAIL_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:CUe})).or(mt.extend({type:gt("FRAME_GET_FARCASTER_URI_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:_Ue})).or(mt.extend({type:gt("FRAME_CONNECT_FARCASTER_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_CONNECT_OTP_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_CONNECT_OTP_SUCCESS")})).or(mt.extend({type:gt("FRAME_CONNECT_DEVICE_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_CONNECT_DEVICE_SUCCESS")})).or(mt.extend({type:gt("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:AUe})).or(mt.extend({type:gt("FRAME_CONNECT_SOCIAL_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_GET_USER_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_GET_USER_SUCCESS"),payload:IUe})).or(mt.extend({type:gt("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:NUe})).or(mt.extend({type:gt("FRAME_SIGN_OUT_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_SIGN_OUT_SUCCESS")})).or(mt.extend({type:gt("FRAME_IS_CONNECTED_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_IS_CONNECTED_SUCCESS"),payload:xUe})).or(mt.extend({type:gt("FRAME_GET_CHAIN_ID_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_GET_CHAIN_ID_SUCCESS"),payload:TUe})).or(mt.extend({type:gt("FRAME_RPC_REQUEST_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_RPC_REQUEST_SUCCESS"),payload:MUe})).or(mt.extend({type:gt("FRAME_SESSION_UPDATE"),payload:rH})).or(mt.extend({type:gt("FRAME_UPDATE_EMAIL_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_UPDATE_EMAIL_SUCCESS"),payload:SUe})).or(mt.extend({type:gt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(mt.extend({type:gt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:kUe})).or(mt.extend({type:gt("FRAME_SYNC_THEME_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_SYNC_THEME_SUCCESS")})).or(mt.extend({type:gt("FRAME_SYNC_DAPP_DATA_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(mt.extend({type:gt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:PUe})).or(mt.extend({type:gt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:DUe})).or(mt.extend({type:gt("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_READY"),payload:OUe})).or(mt.extend({type:gt("FRAME_RELOAD_ERROR"),payload:$s})).or(mt.extend({type:gt("FRAME_RELOAD_SUCCESS")}))};function N3(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let xLe=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ft.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!N3(bt.FRAME_EVENT_KEY,l))return;const u=_1.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Fc.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Fc.isClient&&window.addEventListener("message",({data:o})=>{if(!N3(bt.FRAME_EVENT_KEY,o))return;const a=_1.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Fc.isClient&&window.addEventListener("message",({data:o})=>{if(!N3(bt.APP_EVENT_KEY,o))return;const a=_1.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Fc.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");_1.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Fc.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");_1.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Fc.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${i2e}?projectId=${e}&chainId=${r}&version=${a2e}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},TLe=class{constructor(e){var i;const n=gw({level:o2e}),{logger:r,chunkLoggerController:s}=vP({opts:n});this.logger=bo(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},RLe=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new TLe(e)),this.abortController=i,this.w3mFrame=new xLe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ji.get(bt.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ji.get(bt.EMAIL)}getUsername(){return Ji.get(bt.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:bt.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Fc.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:bt.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:bt.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:bt.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:bt.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:bt.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:bt.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:bt.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:bt.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:bt.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:bt.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:bt.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:bt.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:bt.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:bt.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:bt.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:bt.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:bt.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:bt.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:bt.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:bt.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(go.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:bt.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_IS_CONNECTED_ERROR&&e(),n.type===bt.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===bt.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:go.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===bt.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{go.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[bt.APP_SYNC_DAPP_DATA,bt.APP_SYNC_THEME,bt.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[bt.APP_CONNECT_EMAIL,bt.APP_CONNECT_DEVICE,bt.APP_CONNECT_OTP,bt.APP_CONNECT_SOCIAL,bt.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests=[...this.openRpcRequests,{...m.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(m,y){var w,C,N;m.id===u&&((C=y==null?void 0:(w=y.logger).info)==null||C.call(w,{framEvent:m,id:u},"Received frame response"),m.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&l(new Error(((N=m.payload)==null?void 0:N.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,m=>h(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ji.set(bt.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ji.set(bt.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ji.set(bt.EMAIL,e),Ji.set(bt.EMAIL_LOGIN_USED_KEY,"true"),Ji.delete(bt.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ji.delete(bt.EMAIL_LOGIN_USED_KEY),Ji.delete(bt.EMAIL),Ji.delete(bt.LAST_USED_CHAIN_KEY),Ji.delete(bt.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ji.set(bt.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ji.get(bt.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ji.set(bt.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},kLe=class yT{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return yT.instance||(yT.instance=new RLe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),yT.instance}};function PLe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Ri(t,...e){try{return PLe(t(...e))}catch(n){return Promise.reject(n)}}function OLe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function DLe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function wT(t){if(OLe(t))return String(t);if(DLe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return wT(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const JU="base64:";function MLe(t){return typeof t=="string"?t:JU+LLe(t)}function BLe(t){return typeof t!="string"||!t.startsWith(JU)?t:ULe(t.slice(JU.length))}function ULe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function LLe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ua(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function $Le(...t){return Ua(t.join(":"))}function fx(t){return t=Ua(t),t?t+":":""}function FLe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function jLe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const WLe="memory",zLe=()=>{const t=new Map;return{name:WLe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function HLe(t={}){const e={mounts:{"":t.driver||zLe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ua(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await sH(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",m=Ua(g?p:p.key),y=g?void 0:p.value,w=g||!p.options?u:{...u,...p.options},C=n(m);f(C).items.push({key:m,value:y,relativeKey:C.relativeKey,options:w})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ua(l);const{relativeKey:d,driver:h}=n(l);return Ri(h.hasItem,d,u)},getItem(l,u={}){l=Ua(l);const{relativeKey:d,driver:h}=n(l);return Ri(h.getItem,d,u).then(f=>ox(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Ri(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:$Le(d.base,f.key),value:ox(f.value)}))):Promise.all(d.items.map(h=>Ri(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:ox(f)})))))},getItemRaw(l,u={}){l=Ua(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Ri(h.getItemRaw,d,u):Ri(h.getItem,d,u).then(f=>BLe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ua(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Ri(f.setItem,h,wT(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Ri(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:wT(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Ri(d.driver.setItem,h.relativeKey,wT(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ua(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Ri(f.setItemRaw,h,u,d);else if(f.setItem)await Ri(f.setItem,h,MLe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ua(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Ri(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Ri(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ua(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Ri(h.getMeta,d,u)),!u.nativeOnly){const p=await Ri(h.getItem,d+"$",u).then(g=>ox(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var m;l=fx(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(m=y.driver.flags)!=null&&m.maxDepth||(p=!1);const w=await Ri(y.driver.getKeys,y.relativeBase,u);for(const C of w){const N=y.mountpoint+Ua(C);h.some(I=>N.startsWith(I))||f.push(N)}h=[y.mountpoint,...h.filter(C=>!C.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||FLe(y,u.maxDepth))&&jLe(y,l))},async clear(l,u={}){l=fx(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Ri(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>iH(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=fx(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(sH(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=fx(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await iH(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ua(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ua(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function sH(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function iH(t){typeof t.dispose=="function"&&await Ri(t.dispose)}const GLe="idb-keyval";var qLe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=Sre(t.dbName,t.storeName)),{name:GLe,options:t,async hasItem(s){return!(typeof await cz(n(s),r)>"u")},async getItem(s){return await cz(n(s),r)??null},setItem(s,i){return cPe(n(s),i,r)},removeItem(s){return lPe(n(s),r)},getKeys(){return hPe(r)},clear(){return uPe(r)}}};const VLe="WALLET_CONNECT_V2_INDEXED_DB",KLe="keyvaluestorage";let YLe=class{constructor(){this.indexedDb=HLe({driver:qLe({dbName:VLe,storeName:KLe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Of(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var x3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bT={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof x3<"u"&&x3.localStorage?bT.exports=x3.localStorage:typeof window<"u"&&window.localStorage?bT.exports=window.localStorage:bT.exports=new e})();function QLe(t){var e;return[t[0],L0((e=t[1])!=null?e:"")]}let JLe=class{constructor(){this.localStorage=bT.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(QLe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return L0(n)}async setItem(e,n){this.localStorage.setItem(e,Of(n))}async removeItem(e){this.localStorage.removeItem(e)}};const ZLe="wc_storage_version",oH=1,XLe=async(t,e,n)=>{const r=ZLe,s=await e.getItem(r);if(s&&s>=oH){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,oH),n(e),e6e(t,o)},e6e=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let t6e=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new JLe;this.storage=e;try{const n=new YLe;XLe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var n6e=Object.defineProperty,r6e=(t,e,n)=>e in t?n6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aH=(t,e,n)=>r6e(t,typeof e!="symbol"?e+"":e,n);let s6e=class extends hw{constructor(e){super(),this.opts=e,aH(this,"protocol","wc"),aH(this,"version",2)}};var i6e=Object.defineProperty,o6e=(t,e,n)=>e in t?i6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,a6e=(t,e,n)=>o6e(t,e+"",n);let c6e=class extends hw{constructor(e,n){super(),this.core=e,this.logger=n,a6e(this,"records",new Map)}},l6e=class{constructor(e,n){this.logger=e,this.core=n}},u6e=class extends hw{constructor(e,n){super(),this.relayer=e,this.logger=n}},d6e=class extends hw{constructor(e){super()}},h6e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},f6e=class extends hw{constructor(e,n){super(),this.relayer=e,this.logger=n}},p6e=class extends hw{constructor(e,n){super(),this.core=e,this.logger=n}},g6e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},m6e=class{constructor(e,n){this.projectId=e,this.logger=n}},y6e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var w6e=Object.defineProperty,b6e=(t,e,n)=>e in t?w6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cH=(t,e,n)=>b6e(t,typeof e!="symbol"?e+"":e,n);let v6e=class{constructor(e){this.opts=e,cH(this,"protocol","wc"),cH(this,"version",2)}},E6e=class{constructor(e){this.client=e}};function yS(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function lH(t){return yS(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Nse="2.23.2";let A1={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${Nse}`};class z0 extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof z0?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof z0&&n.cause.docsPath||n.docsPath,i=(a=A1.getDocsUrl)==null?void 0:a.call(A1,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...A1.version?[`Version: ${A1.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=Nse}walk(e){return xse(this,e)}}function xse(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?xse(t.cause,e):e?null:t}class Tse extends z0{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function UC(t,{dir:e,size:n=32}={}){return typeof t=="string"?C6e(t,{dir:e,size:n}):_6e(t,{dir:e,size:n})}function C6e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new Tse({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function _6e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Tse({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class A6e extends z0{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class S6e extends z0{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function LC(t,{size:e}){if(lH(t)>e)throw new S6e({givenSize:lH(t),maxSize:e})}function ZU(t,e={}){const{signed:n}=e;e.size&&LC(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function I6e(t,e={}){return Number(ZU(t,e))}const N6e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function XU(t,e={}){return typeof t=="number"||typeof t=="bigint"?kse(t,e):typeof t=="string"?R6e(t,e):typeof t=="boolean"?x6e(t,e):Rse(t,e)}function x6e(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(LC(n,{size:e.size}),UC(n,{size:e.size})):n}function Rse(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=N6e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(LC(r,{size:e.size}),UC(r,{dir:"right",size:e.size})):r}function kse(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new A6e({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?UC(a,{size:r}):a}const T6e=new TextEncoder;function R6e(t,e={}){const n=T6e.encode(t);return Rse(n,e)}const k6e=new TextEncoder;function P6e(t,e={}){return typeof t=="number"||typeof t=="bigint"?D6e(t,e):typeof t=="boolean"?O6e(t,e):yS(t)?Pse(t,e):Ose(t,e)}function O6e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(LC(n,{size:e.size}),UC(n,{size:e.size})):n}const Ih={zero:48,nine:57,A:65,F:70,a:97,f:102};function uH(t){if(t>=Ih.zero&&t<=Ih.nine)return t-Ih.zero;if(t>=Ih.A&&t<=Ih.F)return t-(Ih.A-10);if(t>=Ih.a&&t<=Ih.f)return t-(Ih.a-10)}function Pse(t,e={}){let n=t;e.size&&(LC(n,{size:e.size}),n=UC(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=uH(r.charCodeAt(a++)),l=uH(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new z0(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function D6e(t,e){const n=kse(t,e);return Pse(n)}function Ose(t,e={}){const n=k6e.encode(t);return typeof e.size=="number"?(LC(n,{size:e.size}),UC(n,{dir:"right",size:e.size})):n}function dk(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function M6e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kP(t,...e){if(!M6e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function nat(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");dk(t.outputLen),dk(t.blockLen)}function dH(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function B6e(t,e){kP(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const px=BigInt(2**32-1),hH=BigInt(32);function U6e(t,e=!1){return e?{h:Number(t&px),l:Number(t>>hH&px)}:{h:Number(t>>hH&px)|0,l:Number(t&px)|0}}function L6e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=U6e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const $6e=(t,e,n)=>t<<n|e>>>32-n,F6e=(t,e,n)=>e<<n|t>>>32-n,j6e=(t,e,n)=>e<<n-32|t>>>64-n,W6e=(t,e,n)=>t<<n-32|e>>>64-n,Gw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function z6e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function rat(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function sat(t,e){return t<<32-e|t>>>e}const fH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function H6e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function pH(t){for(let e=0;e<t.length;e++)t[e]=H6e(t[e])}function G6e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Dse(t){return typeof t=="string"&&(t=G6e(t)),kP(t),t}function iat(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];kP(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let q6e=class{clone(){return this._cloneInto()}};function V6e(t){const e=r=>t().update(Dse(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function aat(t=32){if(Gw&&typeof Gw.getRandomValues=="function")return Gw.getRandomValues(new Uint8Array(t));if(Gw&&typeof Gw.randomBytes=="function")return Gw.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Mse=[],Bse=[],Use=[],K6e=BigInt(0),S1=BigInt(1),Y6e=BigInt(2),Q6e=BigInt(7),J6e=BigInt(256),Z6e=BigInt(113);for(let t=0,e=S1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Mse.push(2*(5*r+n)),Bse.push((t+1)*(t+2)/2%64);let s=K6e;for(let i=0;i<7;i++)e=(e<<S1^(e>>Q6e)*Z6e)%J6e,e&Y6e&&(s^=S1<<(S1<<BigInt(i))-S1);Use.push(s)}const[X6e,e8e]=L6e(Use,!0),gH=(t,e,n)=>n>32?j6e(t,e,n):$6e(t,e,n),mH=(t,e,n)=>n>32?W6e(t,e,n):F6e(t,e,n);function t8e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=gH(l,u,1)^n[a],h=mH(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Bse[o],c=gH(s,i,a),l=mH(s,i,a),u=Mse[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=X6e[r],t[1]^=e8e[r]}n.fill(0)}let n8e=class Lse extends q6e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,dk(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=z6e(this.state)}keccak(){fH||pH(this.state32),t8e(this.state32,this.rounds),fH||pH(this.state32),this.posOut=0,this.pos=0}update(e){dH(this);const{blockLen:n,state:r}=this;e=Dse(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){dH(this,!1),kP(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return dk(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(B6e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Lse(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const r8e=(t,e,n)=>V6e(()=>new n8e(e,t,n)),s8e=r8e(1,136,256/8);function $se(t,e){const n=e||"hex",r=s8e(yS(t,{strict:!1})?P6e(t):t);return n==="bytes"?r:XU(r)}class i8e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const T3=new i8e(8192);function o8e(t,e){if(T3.has(`${t}.${e}`))return T3.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=$se(Ose(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return T3.set(`${t}.${e}`,i),i}function a8e(t){const e=$se(`0x${t.substring(4)}`).substring(26);return o8e(`0x${e}`)}async function c8e({hash:t,signature:e}){const n=yS(t)?t:XU(t),{secp256k1:r}=await no(async()=>{const{secp256k1:o}=await import("./secp256k1-CvJLVwxP.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=yH(f);return new r.Signature(ZU(l),ZU(u)).addRecoveryBit(p)}const o=yS(e)?e:XU(e),a=I6e(`0x${o.slice(130)}`),c=yH(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function yH(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function l8e({hash:t,signature:e}){return a8e(await c8e({hash:t,signature:e}))}var u8e={};const d8e=":";function dv(t){const[e,n]=t.split(d8e);return{namespace:e,reference:n}}function Fse(t,e){return t.includes(":")?[t]:e.chains||[]}var h8e=Object.defineProperty,f8e=Object.defineProperties,p8e=Object.getOwnPropertyDescriptors,wH=Object.getOwnPropertySymbols,g8e=Object.prototype.hasOwnProperty,m8e=Object.prototype.propertyIsEnumerable,bH=(t,e,n)=>e in t?h8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vH=(t,e)=>{for(var n in e||(e={}))g8e.call(e,n)&&bH(t,n,e[n]);if(wH)for(var n of wH(e))m8e.call(e,n)&&bH(t,n,e[n]);return t},y8e=(t,e)=>f8e(t,p8e(e));const w8e="ReactNative",zc={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},b8e="js";function hk(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Nm(){return!$0()&&!!A4()&&navigator.product===w8e}function v8e(){return Nm()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function E8e(){return Nm()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function $C(){return!hk()&&!!A4()&&!!$0()}function VI(){return Nm()?zc.reactNative:hk()?zc.node:$C()?zc.browser:zc.unknown}function EH(){var t;try{return Nm()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function C8e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function _8e(t){var e,n;const r=jse();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),y8e(vH(vH({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function jse(){return ise()||{name:"",description:"",url:"",icons:[""]}}function A8e(){if(VI()===zc.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=F3e();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function S8e(){var t;const e=VI();return e===zc.browser?[e,((t=sse())==null?void 0:t.host)||"unknown"].join(":"):e}function Wse(t,e,n){const r=A8e(),s=S8e();return[[t,e].join("-"),[b8e,n].join("-"),r,s].join("/")}function I8e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=Wse(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=C8e(l[1]||"",d);return l[0]+"?"+h}function Sy(t,e){return t.filter(n=>e.includes(n)).length===t.length}function eL(t){return Object.fromEntries(t.entries())}function tL(t){return new Map(Object.entries(t))}function Qm(t=je.FIVE_MINUTES,e){const n=je.toMiliseconds(t||je.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function vg(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function zse(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function N8e(t){return zse("topic",t)}function x8e(t){return zse("id",t)}function Hse(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function pi(t,e){return je.fromMiliseconds(Date.now()+je.toMiliseconds(t))}function Op(t){return Date.now()>=je.toMiliseconds(t)}function Ir(t,e){return`${t}${e?`:${e}`:""}`}function Gd(t=[],e=[]){return[...new Set([...t,...e])]}async function T8e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=R8e(i,t,e),a=VI();if(a===zc.browser){if(!((r=$0())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}k8e(o)}else a===zc.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function R8e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${M8e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function k8e(t){let e="_self";D8e()?e="_top":(O8e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function P8e(t,e){let n="";try{if($C()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function CH(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function _H(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function T4(){return typeof process<"u"&&u8e.IS_VITEST==="true"}function O8e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function D8e(){try{return window.self!==window.top}catch{return!1}}function M8e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function Gse(t){return Buffer.from(t,"base64").toString("utf-8")}function B8e(t){return new Promise(e=>setTimeout(e,t))}function wS(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function U8e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function KI(t,...e){if(!U8e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function R4(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");wS(t.outputLen),wS(t.blockLen)}function GE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function qse(t,e){KI(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const gx=BigInt(2**32-1),AH=BigInt(32);function L8e(t,e=!1){return e?{h:Number(t&gx),l:Number(t>>AH&gx)}:{h:Number(t>>AH&gx)|0,l:Number(t&gx)|0}}function $8e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=L8e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const F8e=(t,e,n)=>t<<n|e>>>32-n,j8e=(t,e,n)=>e<<n|t>>>32-n,W8e=(t,e,n)=>e<<n-32|t>>>64-n,z8e=(t,e,n)=>t<<n-32|e>>>64-n,qw=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function H8e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function R3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ed(t,e){return t<<32-e|t>>>e}const SH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function G8e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function IH(t){for(let e=0;e<t.length;e++)t[e]=G8e(t[e])}function q8e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function qE(t){return typeof t=="string"&&(t=q8e(t)),KI(t),t}function V8e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];KI(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let k4=class{clone(){return this._cloneInto()}};function Vse(t){const e=r=>t().update(qE(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function FC(t=32){if(qw&&typeof qw.getRandomValues=="function")return qw.getRandomValues(new Uint8Array(t));if(qw&&typeof qw.randomBytes=="function")return qw.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Kse=[],Yse=[],Qse=[],K8e=BigInt(0),I1=BigInt(1),Y8e=BigInt(2),Q8e=BigInt(7),J8e=BigInt(256),Z8e=BigInt(113);for(let t=0,e=I1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Kse.push(2*(5*r+n)),Yse.push((t+1)*(t+2)/2%64);let s=K8e;for(let i=0;i<7;i++)e=(e<<I1^(e>>Q8e)*Z8e)%J8e,e&Y8e&&(s^=I1<<(I1<<BigInt(i))-I1);Qse.push(s)}const[X8e,e$e]=$8e(Qse,!0),NH=(t,e,n)=>n>32?W8e(t,e,n):F8e(t,e,n),xH=(t,e,n)=>n>32?z8e(t,e,n):j8e(t,e,n);function t$e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=NH(l,u,1)^n[a],h=xH(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Yse[o],c=NH(s,i,a),l=xH(s,i,a),u=Kse[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=X8e[r],t[1]^=e$e[r]}n.fill(0)}let n$e=class Jse extends k4{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,wS(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=H8e(this.state)}keccak(){SH||IH(this.state32),t$e(this.state32,this.rounds),SH||IH(this.state32),this.posOut=0,this.pos=0}update(e){GE(this);const{blockLen:n,state:r}=this;e=qE(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){GE(this,!1),KI(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return wS(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(qse(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Jse(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const r$e=(t,e,n)=>Vse(()=>new n$e(e,t,n)),s$e=r$e(1,136,256/8),i$e="https://rpc.walletconnect.org/v1";function Zse(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(s$e(n)).toString("hex")}async function o$e(t,e,n,r,s,i){switch(n.t){case"eip191":return await a$e(t,e,n.s);case"eip1271":return await c$e(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function a$e(t,e,n){return(await l8e({hash:Zse(e),signature:n})).toLowerCase()===t.toLowerCase()}async function c$e(t,e,n,r,s,i){const o=dv(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=Zse(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||i$e}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:l$e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function l$e(){return Date.now()+Math.floor(Math.random()*1e3)}function u$e(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Qa.encode(i)}var d$e=Object.defineProperty,h$e=Object.defineProperties,f$e=Object.getOwnPropertyDescriptors,TH=Object.getOwnPropertySymbols,p$e=Object.prototype.hasOwnProperty,g$e=Object.prototype.propertyIsEnumerable,RH=(t,e,n)=>e in t?d$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,m$e=(t,e)=>{for(var n in e||(e={}))p$e.call(e,n)&&RH(t,n,e[n]);if(TH)for(var n of TH(e))g$e.call(e,n)&&RH(t,n,e[n]);return t},y$e=(t,e)=>h$e(t,f$e(e));const w$e="did:pkh:",P4=t=>t==null?void 0:t.split(":"),b$e=t=>{const e=t&&P4(t);if(e)return t.includes(w$e)?e[3]:e[1]},nL=t=>{const e=t&&P4(t);if(e)return e[2]+":"+e[3]},fk=t=>{const e=t&&P4(t);if(e)return e.pop()};async function kH(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=Xse(s,s.iss),o=fk(s.iss);return await o$e(o,i,r,nL(s.iss),n)}const Xse=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=fk(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${b$e(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=vT(t.resources);if(p){const g=bS(p);s=x$e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function v$e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function E$e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function H0(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function C$e(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:_$e(e,n,r)}}}function _$e(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function eie(t){return H0(t),`urn:recap:${v$e(t).replace(/=/g,"")}`}function bS(t){const e=E$e(t.replace("urn:recap:",""));return H0(e),e}function A$e(t,e,n){const r=C$e(t,e,n);return eie(r)}function S$e(t){return t&&t.includes("urn:recap:")}function I$e(t,e){const n=bS(t),r=bS(e),s=N$e(n,r);return eie(s)}function N$e(t,e){H0(t),H0(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=y$e(m$e({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function x$e(t="",e){H0(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function PH(t){var e;const n=bS(t);H0(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function OH(t){const e=bS(t);H0(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function vT(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return S$e(e)?e:void 0}function k3(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function tie(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Mc(t,...e){if(!tie(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function DH(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function T$e(t,e){Mc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function MH(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const qg=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),R$e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),k$e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!k$e)throw new Error("Non little-endian hardware is not supported");function P$e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function rL(t){if(typeof t=="string")t=P$e(t);else if(tie(t))t=sL(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function O$e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function D$e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const M$e=(t,e)=>{function n(r,...s){if(Mc(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Mc(l):Mc(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Mc(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Mc(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Mc(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Mc(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function BH(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!B$e(e))throw new Error("invalid output, must be aligned");return e}function UH(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function B$e(t){return t.byteOffset%4===0}function sL(t){return Uint8Array.from(t)}function VE(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const nie=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),U$e=nie("expand 16-byte k"),L$e=nie("expand 32-byte k"),$$e=qg(U$e),F$e=qg(L$e);function cr(t,e){return t<<e|t>>>32-e}function iL(t){return t.byteOffset%4===0}const mx=64,j$e=16,rie=2**32-1,LH=new Uint32Array;function W$e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(mx),u=qg(l),d=iL(s)&&iL(i),h=d?qg(s):LH,f=d?qg(i):LH;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=rie)throw new Error("arx: counter overflow");const g=Math.min(mx,c-p);if(d&&g===mx){const m=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,w;y<j$e;y++)w=m+y,f[w]=h[w]^u[y];p+=mx;continue}for(let m=0,y;m<g;m++)y=p+m,i[y]=s[y]^l[m];p+=g}}function z$e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=O$e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return k3(s),k3(o),MH(i),MH(n),(a,c,l,u,d=0)=>{Mc(a),Mc(c),Mc(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Mc(u),k3(d),d<0||d>=rie)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,m;if(p===32)f.push(g=sL(a)),m=F$e;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),m=$$e,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);iL(c)||f.push(c=sL(c));const y=qg(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,y,qg(c.subarray(0,16)),y),c=c.subarray(16)}const w=16-s;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const N=new Uint8Array(12);N.set(c,i?0:12-c.length),c=N,f.push(c)}const C=qg(c);return W$e(t,m,y,C,l,u,d,o),VE(...f),u}}const Vi=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class H$e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=rL(e),Mc(e,32);const n=Vi(e,0),r=Vi(e,2),s=Vi(e,4),i=Vi(e,6),o=Vi(e,8),a=Vi(e,10),c=Vi(e,12),l=Vi(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Vi(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],m=o[9],y=Vi(e,n+0),w=Vi(e,n+2),C=Vi(e,n+4),N=Vi(e,n+6),I=Vi(e,n+8),k=Vi(e,n+10),P=Vi(e,n+12),U=Vi(e,n+14);let M=i[0]+(y&8191),H=i[1]+((y>>>13|w<<3)&8191),j=i[2]+((w>>>10|C<<6)&8191),K=i[3]+((C>>>7|N<<9)&8191),$=i[4]+((N>>>4|I<<12)&8191),v=i[5]+(I>>>1&8191),E=i[6]+((I>>>14|k<<2)&8191),_=i[7]+((k>>>11|P<<5)&8191),D=i[8]+((P>>>8|U<<8)&8191),x=i[9]+(U>>>5|s),B=0,W=B+M*a+H*(5*m)+j*(5*g)+K*(5*p)+$*(5*f);B=W>>>13,W&=8191,W+=v*(5*h)+E*(5*d)+_*(5*u)+D*(5*l)+x*(5*c),B+=W>>>13,W&=8191;let L=B+M*c+H*a+j*(5*m)+K*(5*g)+$*(5*p);B=L>>>13,L&=8191,L+=v*(5*f)+E*(5*h)+_*(5*d)+D*(5*u)+x*(5*l),B+=L>>>13,L&=8191;let S=B+M*l+H*c+j*a+K*(5*m)+$*(5*g);B=S>>>13,S&=8191,S+=v*(5*p)+E*(5*f)+_*(5*h)+D*(5*d)+x*(5*u),B+=S>>>13,S&=8191;let F=B+M*u+H*l+j*c+K*a+$*(5*m);B=F>>>13,F&=8191,F+=v*(5*g)+E*(5*p)+_*(5*f)+D*(5*h)+x*(5*d),B+=F>>>13,F&=8191;let X=B+M*d+H*u+j*l+K*c+$*a;B=X>>>13,X&=8191,X+=v*(5*m)+E*(5*g)+_*(5*p)+D*(5*f)+x*(5*h),B+=X>>>13,X&=8191;let se=B+M*h+H*d+j*u+K*l+$*c;B=se>>>13,se&=8191,se+=v*a+E*(5*m)+_*(5*g)+D*(5*p)+x*(5*f),B+=se>>>13,se&=8191;let ge=B+M*f+H*h+j*d+K*u+$*l;B=ge>>>13,ge&=8191,ge+=v*c+E*a+_*(5*m)+D*(5*g)+x*(5*p),B+=ge>>>13,ge&=8191;let Ue=B+M*p+H*f+j*h+K*d+$*u;B=Ue>>>13,Ue&=8191,Ue+=v*l+E*c+_*a+D*(5*m)+x*(5*g),B+=Ue>>>13,Ue&=8191;let Le=B+M*g+H*p+j*f+K*h+$*d;B=Le>>>13,Le&=8191,Le+=v*u+E*l+_*c+D*a+x*(5*m),B+=Le>>>13,Le&=8191;let Be=B+M*m+H*g+j*p+K*f+$*h;B=Be>>>13,Be&=8191,Be+=v*d+E*u+_*l+D*c+x*a,B+=Be>>>13,Be&=8191,B=(B<<2)+B|0,B=B+W|0,W=B&8191,B=B>>>13,L+=B,i[0]=W,i[1]=L,i[2]=S,i[3]=F,i[4]=X,i[5]=se,i[6]=ge,i[7]=Ue,i[8]=Le,i[9]=Be}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;VE(r)}update(e){DH(this);const{buffer:n,blockLen:r}=this;e=rL(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){VE(this.h,this.r,this.buffer,this.pad)}digestInto(e){DH(this),T$e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function G$e(t){const e=(r,s)=>t(s).update(rL(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const q$e=G$e(t=>new H$e(t));function V$e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],m=e[6],y=e[7],w=s,C=n[0],N=n[1],I=n[2],k=o,P=a,U=c,M=l,H=u,j=d,K=h,$=f,v=p,E=g,_=m,D=y,x=w,B=C,W=N,L=I;for(let F=0;F<i;F+=2)k=k+H|0,x=cr(x^k,16),v=v+x|0,H=cr(H^v,12),k=k+H|0,x=cr(x^k,8),v=v+x|0,H=cr(H^v,7),P=P+j|0,B=cr(B^P,16),E=E+B|0,j=cr(j^E,12),P=P+j|0,B=cr(B^P,8),E=E+B|0,j=cr(j^E,7),U=U+K|0,W=cr(W^U,16),_=_+W|0,K=cr(K^_,12),U=U+K|0,W=cr(W^U,8),_=_+W|0,K=cr(K^_,7),M=M+$|0,L=cr(L^M,16),D=D+L|0,$=cr($^D,12),M=M+$|0,L=cr(L^M,8),D=D+L|0,$=cr($^D,7),k=k+j|0,L=cr(L^k,16),_=_+L|0,j=cr(j^_,12),k=k+j|0,L=cr(L^k,8),_=_+L|0,j=cr(j^_,7),P=P+K|0,x=cr(x^P,16),D=D+x|0,K=cr(K^D,12),P=P+K|0,x=cr(x^P,8),D=D+x|0,K=cr(K^D,7),U=U+$|0,B=cr(B^U,16),v=v+B|0,$=cr($^v,12),U=U+$|0,B=cr(B^U,8),v=v+B|0,$=cr($^v,7),M=M+H|0,W=cr(W^M,16),E=E+W|0,H=cr(H^E,12),M=M+H|0,W=cr(W^M,8),E=E+W|0,H=cr(H^E,7);let S=0;r[S++]=o+k|0,r[S++]=a+P|0,r[S++]=c+U|0,r[S++]=l+M|0,r[S++]=u+H|0,r[S++]=d+j|0,r[S++]=h+K|0,r[S++]=f+$|0,r[S++]=p+v|0,r[S++]=g+E|0,r[S++]=m+_|0,r[S++]=y+D|0,r[S++]=w+x|0,r[S++]=C+B|0,r[S++]=N+W|0,r[S++]=I+L|0}const K$e=z$e(V$e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Y$e=new Uint8Array(16),$H=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Y$e.subarray(n))},Q$e=new Uint8Array(32);function FH(t,e,n,r,s){const i=t(e,n,Q$e),o=q$e.create(i);s&&$H(o,s),$H(o,r);const a=new Uint8Array(16),c=R$e(a);UH(c,0,BigInt(s?s.length:0),!0),UH(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return VE(i,a),l}const J$e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=BH(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=FH(t,e,n,a,r);return i.set(c,o),VE(c),i},decrypt(s,i){i=BH(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=FH(t,e,n,o,r);if(!D$e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),VE(c),i}}),sie=M$e({blockSize:64,nonceLength:12,tagLength:16},J$e(K$e));let iie=class extends k4{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,R4(e);const r=qE(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return GE(this),this.iHash.update(e),this}digestInto(e){GE(this),KI(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const PP=(t,e,n)=>new iie(t,e).update(n).digest();PP.create=(t,e)=>new iie(t,e);function Z$e(t,e,n){return R4(t),n===void 0&&(n=new Uint8Array(t.outputLen)),PP(t,qE(n),qE(e))}const P3=new Uint8Array([0]),jH=new Uint8Array;function X$e(t,e,n,r=32){if(R4(t),wS(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=jH);const i=new Uint8Array(s*t.outputLen),o=PP.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)P3[0]=l+1,a.update(l===0?jH:c).update(n).update(P3).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),P3.fill(0),i.slice(0,r)}const e4e=(t,e,n,r,s)=>X$e(t,Z$e(t,e,n),r,s);function t4e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function n4e(t,e,n){return t&e^~t&n}function r4e(t,e,n){return t&e^t&n^e&n}let s4e=class extends k4{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=R3(this.buffer)}update(e){GE(this);const{view:n,buffer:r,blockLen:s}=this;e=qE(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=R3(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){GE(this),qse(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;t4e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=R3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const i4e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),hp=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fp=new Uint32Array(64);class o4e extends s4e{constructor(){super(64,32,8,!1),this.A=hp[0]|0,this.B=hp[1]|0,this.C=hp[2]|0,this.D=hp[3]|0,this.E=hp[4]|0,this.F=hp[5]|0,this.G=hp[6]|0,this.H=hp[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)fp[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=fp[d-15],f=fp[d-2],p=ed(h,7)^ed(h,18)^h>>>3,g=ed(f,17)^ed(f,19)^f>>>10;fp[d]=g+fp[d-7]+p+fp[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ed(a,6)^ed(a,11)^ed(a,25),f=u+h+n4e(a,c,l)+i4e[d]+fp[d]|0,p=(ed(r,2)^ed(r,13)^ed(r,22))+r4e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){fp.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const YI=Vse(()=>new o4e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const OP=BigInt(0),DP=BigInt(1),a4e=BigInt(2);function G0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function QI(t){if(!G0(t))throw new Error("Uint8Array expected")}function KE(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const c4e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function YE(t){QI(t);let e="";for(let n=0;n<t.length;n++)e+=c4e[t[n]];return e}function Wb(t){const e=t.toString(16);return e.length&1?"0"+e:e}function O4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?OP:BigInt("0x"+t)}const Nh={_0:48,_9:57,A:65,F:70,a:97,f:102};function WH(t){if(t>=Nh._0&&t<=Nh._9)return t-Nh._0;if(t>=Nh.A&&t<=Nh.F)return t-(Nh.A-10);if(t>=Nh.a&&t<=Nh.f)return t-(Nh.a-10)}function QE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=WH(t.charCodeAt(i)),a=WH(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function u0(t){return O4(YE(t))}function vS(t){return QI(t),O4(YE(Uint8Array.from(t).reverse()))}function JE(t,e){return QE(t.toString(16).padStart(e*2,"0"))}function MP(t,e){return JE(t,e).reverse()}function l4e(t){return QE(Wb(t))}function Oc(t,e,n){let r;if(typeof e=="string")try{r=QE(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(G0(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function ES(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];QI(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function u4e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function d4e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const O3=t=>typeof t=="bigint"&&OP<=t;function BP(t,e,n){return O3(t)&&O3(e)&&O3(n)&&e<=t&&t<n}function bf(t,e,n,r){if(!BP(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function oie(t){let e;for(e=0;t>OP;t>>=DP,e+=1);return e}function h4e(t,e){return t>>BigInt(e)&DP}function f4e(t,e,n){return t|(n?DP:OP)<<BigInt(e)}const D4=t=>(a4e<<BigInt(t-1))-DP,D3=t=>new Uint8Array(t),zH=t=>Uint8Array.from(t);function aie(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=D3(t),s=D3(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=D3())=>{s=a(zH([0]),u),r=a(),u.length!==0&&(s=a(zH([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return ES(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const p4e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||G0(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function jC(t,e,n={}){const r=(s,i,o)=>{const a=p4e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const g4e=()=>{throw new Error("not implemented")};function oL(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var m4e=Object.freeze({__proto__:null,isBytes:G0,abytes:QI,abool:KE,bytesToHex:YE,numberToHexUnpadded:Wb,hexToNumber:O4,hexToBytes:QE,bytesToNumberBE:u0,bytesToNumberLE:vS,numberToBytesBE:JE,numberToBytesLE:MP,numberToVarBytesBE:l4e,ensureBytes:Oc,concatBytes:ES,equalBytes:u4e,utf8ToBytes:d4e,inRange:BP,aInRange:bf,bitLen:oie,bitGet:h4e,bitSet:f4e,bitMask:D4,createHmacDrbg:aie,validateObject:jC,notImplemented:g4e,memoized:oL});const Wi=BigInt(0),ri=BigInt(1),sy=BigInt(2),y4e=BigInt(3),aL=BigInt(4),HH=BigInt(5),GH=BigInt(8);function qa(t,e){const n=t%e;return n>=Wi?n:e+n}function cie(t,e,n){if(e<Wi)throw new Error("invalid exponent, negatives unsupported");if(n<=Wi)throw new Error("invalid modulus");if(n===ri)return Wi;let r=ri;for(;e>Wi;)e&ri&&(r=r*t%n),t=t*t%n,e>>=ri;return r}function su(t,e,n){let r=t;for(;e-- >Wi;)r*=r,r%=n;return r}function cL(t,e){if(t===Wi)throw new Error("invert: expected non-zero number");if(e<=Wi)throw new Error("invert: expected positive modulus, got "+e);let n=qa(t,e),r=e,s=Wi,i=ri;for(;n!==Wi;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ri)throw new Error("invert: does not exist");return qa(s,e)}function w4e(t){const e=(t-ri)/sy;let n,r,s;for(n=t-ri,r=0;n%sy===Wi;n/=sy,r++);for(s=sy;s<t&&cie(s,e,t)!==t-ri;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ri)/aL;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+ri)/sy;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,ri<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function b4e(t){if(t%aL===y4e){const e=(t+ri)/aL;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%GH===HH){const e=(t-HH)/GH;return function(n,r){const s=n.mul(r,sy),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,sy),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return w4e(t)}const v4e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function E4e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=v4e.reduce((r,s)=>(r[s]="function",r),e);return jC(t,n)}function C4e(t,e,n){if(n<Wi)throw new Error("invalid exponent, negatives unsupported");if(n===Wi)return t.ONE;if(n===ri)return e;let r=t.ONE,s=e;for(;n>Wi;)n&ri&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ri;return r}function _4e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function lie(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function uie(t,e,n=!1,r={}){if(t<=Wi)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=lie(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:D4(s),ZERO:Wi,ONE:ri,create:c=>qa(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Wi<=c&&c<t},is0:c=>c===Wi,isOdd:c=>(c&ri)===ri,neg:c=>qa(-c,t),eql:(c,l)=>c===l,sqr:c=>qa(c*c,t),add:(c,l)=>qa(c+l,t),sub:(c,l)=>qa(c-l,t),mul:(c,l)=>qa(c*l,t),pow:(c,l)=>C4e(a,c,l),div:(c,l)=>qa(c*cL(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>cL(c,t),sqrt:r.sqrt||(c=>(o||(o=b4e(t)),o(a,c))),invertBatch:c=>_4e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?MP(c,i):JE(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?vS(c):u0(c)}});return Object.freeze(a)}function die(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function hie(t){const e=die(t);return e+Math.ceil(e/2)}function A4e(t,e,n=!1){const r=t.length,s=die(e),i=hie(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?vS(t):u0(t),a=qa(o,e-ri)+ri;return n?MP(a,s):JE(a,s)}const qH=BigInt(0),yx=BigInt(1);function M3(t,e){const n=e.negate();return t?n:e}function fie(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function B3(t,e){fie(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function S4e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function I4e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const U3=new WeakMap,pie=new WeakMap;function L3(t){return pie.get(t)||1}function N4e(t,e){return{constTimeNegate:M3,hasPrecomputes(n){return L3(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>qH;)r&yx&&(s=s.add(i)),i=i.double(),r>>=yx;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=B3(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=B3(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=yx);const g=f,m=f+Math.abs(p)-1,y=h%2!==0,w=p<0;p===0?c=c.add(M3(y,r[g])):a=a.add(M3(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=B3(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===qH)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=yx),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=U3.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&U3.set(r,s(i))),i},wNAFCached(n,r,s){const i=L3(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=L3(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){fie(r,e),pie.set(n,r),U3.delete(n)}}}function x4e(t,e,n,r){if(S4e(n,t),I4e(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=oie(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function gie(t){return E4e(t.Fp),jC(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...lie(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Vw=BigInt(0),$3=BigInt(1);function T4e(t){return jC(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function R4e(t){const e=T4e(t),{P:n}=e,r=w=>qa(w,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(w=>w),c=e.powPminus2||(w=>cie(w,n-BigInt(2),n));function l(w,C,N){const I=r(w*(C-N));return C=r(C-I),N=r(N+I),[C,N]}const u=(e.a-BigInt(2))/BigInt(4);function d(w,C){bf("u",w,Vw,n),bf("scalar",C,Vw,n);const N=C,I=w;let k=$3,P=Vw,U=w,M=$3,H=Vw,j;for(let $=BigInt(s-1);$>=Vw;$--){const v=N>>$&$3;H^=v,j=l(H,k,U),k=j[0],U=j[1],j=l(H,P,M),P=j[0],M=j[1],H=v;const E=k+P,_=r(E*E),D=k-P,x=r(D*D),B=_-x,W=U+M,L=U-M,S=r(L*E),F=r(W*D),X=S+F,se=S-F;U=r(X*X),M=r(I*r(se*se)),k=r(_*x),P=r(B*(_+r(u*B)))}j=l(H,k,U),k=j[0],U=j[1],j=l(H,P,M),P=j[0],M=j[1];const K=c(P);return r(k*K)}function h(w){return MP(r(w),i)}function f(w){const C=Oc("u coordinate",w,i);return o===32&&(C[31]&=127),vS(C)}function p(w){const C=Oc("scalar",w),N=C.length;if(N!==i&&N!==o){let I=""+i+" or "+o;throw new Error("invalid scalar, expected "+I+" bytes, got "+N)}return vS(a(C))}function g(w,C){const N=f(C),I=p(w),k=d(N,I);if(k===Vw)throw new Error("invalid private or public key received");return h(k)}const m=h(e.Gu);function y(w){return g(w,m)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(w,C)=>g(w,C),getPublicKey:w=>y(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:m}}const lL=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const k4e=BigInt(1),VH=BigInt(2),P4e=BigInt(3),O4e=BigInt(5);BigInt(8);function D4e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=lL,o=t*t%i*t%i,a=su(o,VH,i)*o%i,c=su(a,k4e,i)*t%i,l=su(c,O4e,i)*c%i,u=su(l,e,i)*l%i,d=su(u,n,i)*u%i,h=su(d,r,i)*d%i,f=su(h,s,i)*h%i,p=su(f,s,i)*h%i,g=su(p,e,i)*l%i;return{pow_p_5_8:su(g,VH,i)*t%i,b2:o}}function M4e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const uL=R4e({P:lL,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=lL,{pow_p_5_8:n,b2:r}=D4e(t);return qa(su(n,P4e,e)*r,e)},adjustScalarBytes:M4e,randomBytes:FC});function KH(t){t.lowS!==void 0&&KE("lowS",t.lowS),t.prehash!==void 0&&KE("prehash",t.prehash)}function B4e(t){const e=gie(t);jC(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:U4e,hexToBytes:L4e}=m4e;class $4e extends Error{constructor(e=""){super(e)}}const jh={Err:$4e,_tlv:{encode:(t,e)=>{const{Err:n}=jh;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Wb(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Wb(s.length/2|128):"";return Wb(t)+i+s+e},decode(t,e){const{Err:n}=jh;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=jh;if(t<rf)throw new e("integer: negative integers are not allowed");let n=Wb(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=jh;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return U4e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=jh,s=typeof t=="string"?L4e(t):t;QI(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=jh,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},rf=BigInt(0),Pi=BigInt(1);BigInt(2);const YH=BigInt(3);BigInt(4);function F4e(t){const e=B4e(t),{Fp:n}=e,r=uie(e.n,e.nBitLength),s=e.toBytes||((g,m,y)=>{const w=m.toAffine();return ES(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(g=>{const m=g.subarray(1),y=n.fromBytes(m.subarray(0,n.BYTES)),w=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:y,y:w}});function o(g){const{a:m,b:y}=e,w=n.sqr(g),C=n.mul(w,g);return n.add(n.add(C,n.mul(g,m)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return BP(g,Pi,e.n)}function c(g){const{allowedPrivateKeyLengths:m,nByteLength:y,wrapPrivateKey:w,n:C}=e;if(m&&typeof g!="bigint"){if(G0(g)&&(g=YE(g)),typeof g!="string"||!m.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let N;try{N=typeof g=="bigint"?g:u0(Oc("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return w&&(N=qa(N,C)),bf("private key",N,Pi,C),N}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=oL((g,m)=>{const{px:y,py:w,pz:C}=g;if(n.eql(C,n.ONE))return{x:y,y:w};const N=g.is0();m==null&&(m=N?n.ONE:n.inv(C));const I=n.mul(y,m),k=n.mul(w,m),P=n.mul(C,m);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:I,y:k}}),d=oL(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:m,y}=g.toAffine();if(!n.isValid(m)||!n.isValid(y))throw new Error("bad point: x or y not FE");const w=n.sqr(y),C=o(m);if(!n.eql(w,C))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,y,w){if(this.px=m,this.py=y,this.pz=w,m==null||!n.isValid(m))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required");Object.freeze(this)}static fromAffine(m){const{x:y,y:w}=m||{};if(!m||!n.isValid(y)||!n.isValid(w))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const C=N=>n.eql(N,n.ZERO);return C(y)&&C(w)?h.ZERO:new h(y,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const y=n.invertBatch(m.map(w=>w.pz));return m.map((w,C)=>w.toAffine(y[C])).map(h.fromAffine)}static fromHex(m){const y=h.fromAffine(i(Oc("pointHex",m)));return y.assertValidity(),y}static fromPrivateKey(m){return h.BASE.multiply(c(m))}static msm(m,y){return x4e(h,r,m,y)}_setWindowSize(m){p.setWindowSize(this,m)}assertValidity(){d(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:y,py:w,pz:C}=this,{px:N,py:I,pz:k}=m,P=n.eql(n.mul(y,k),n.mul(N,C)),U=n.eql(n.mul(w,k),n.mul(I,C));return P&&U}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:y}=e,w=n.mul(y,YH),{px:C,py:N,pz:I}=this;let k=n.ZERO,P=n.ZERO,U=n.ZERO,M=n.mul(C,C),H=n.mul(N,N),j=n.mul(I,I),K=n.mul(C,N);return K=n.add(K,K),U=n.mul(C,I),U=n.add(U,U),k=n.mul(m,U),P=n.mul(w,j),P=n.add(k,P),k=n.sub(H,P),P=n.add(H,P),P=n.mul(k,P),k=n.mul(K,k),U=n.mul(w,U),j=n.mul(m,j),K=n.sub(M,j),K=n.mul(m,K),K=n.add(K,U),U=n.add(M,M),M=n.add(U,M),M=n.add(M,j),M=n.mul(M,K),P=n.add(P,M),j=n.mul(N,I),j=n.add(j,j),M=n.mul(j,K),k=n.sub(k,M),U=n.mul(j,H),U=n.add(U,U),U=n.add(U,U),new h(k,P,U)}add(m){l(m);const{px:y,py:w,pz:C}=this,{px:N,py:I,pz:k}=m;let P=n.ZERO,U=n.ZERO,M=n.ZERO;const H=e.a,j=n.mul(e.b,YH);let K=n.mul(y,N),$=n.mul(w,I),v=n.mul(C,k),E=n.add(y,w),_=n.add(N,I);E=n.mul(E,_),_=n.add(K,$),E=n.sub(E,_),_=n.add(y,C);let D=n.add(N,k);return _=n.mul(_,D),D=n.add(K,v),_=n.sub(_,D),D=n.add(w,C),P=n.add(I,k),D=n.mul(D,P),P=n.add($,v),D=n.sub(D,P),M=n.mul(H,_),P=n.mul(j,v),M=n.add(P,M),P=n.sub($,M),M=n.add($,M),U=n.mul(P,M),$=n.add(K,K),$=n.add($,K),v=n.mul(H,v),_=n.mul(j,_),$=n.add($,v),v=n.sub(K,v),v=n.mul(H,v),_=n.add(_,v),K=n.mul($,_),U=n.add(U,K),K=n.mul(D,_),P=n.mul(E,P),P=n.sub(P,K),K=n.mul(E,$),M=n.mul(D,M),M=n.add(M,K),new h(P,U,M)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return p.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:y,n:w}=e;bf("scalar",m,rf,w);const C=h.ZERO;if(m===rf)return C;if(this.is0()||m===Pi)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:N,k1:I,k2neg:k,k2:P}=y.splitScalar(m),U=C,M=C,H=this;for(;I>rf||P>rf;)I&Pi&&(U=U.add(H)),P&Pi&&(M=M.add(H)),H=H.double(),I>>=Pi,P>>=Pi;return N&&(U=U.negate()),k&&(M=M.negate()),M=new h(n.mul(M.px,y.beta),M.py,M.pz),U.add(M)}multiply(m){const{endo:y,n:w}=e;bf("scalar",m,Pi,w);let C,N;if(y){const{k1neg:I,k1:k,k2neg:P,k2:U}=y.splitScalar(m);let{p:M,f:H}=this.wNAF(k),{p:j,f:K}=this.wNAF(U);M=p.constTimeNegate(I,M),j=p.constTimeNegate(P,j),j=new h(n.mul(j.px,y.beta),j.py,j.pz),C=M.add(j),N=H.add(K)}else{const{p:I,f:k}=this.wNAF(m);C=I,N=k}return h.normalizeZ([C,N])[0]}multiplyAndAddUnsafe(m,y,w){const C=h.BASE,N=(k,P)=>P===rf||P===Pi||!k.equals(C)?k.multiplyUnsafe(P):k.multiply(P),I=N(this,y).add(N(m,w));return I.is0()?void 0:I}toAffine(m){return u(this,m)}isTorsionFree(){const{h:m,isTorsionFree:y}=e;if(m===Pi)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:y}=e;return m===Pi?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return KE("isCompressed",m),this.assertValidity(),s(h,this,m)}toHex(m=!0){return KE("isCompressed",m),YE(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=N4e(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function j4e(t){const e=gie(t);return jC(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function W4e(t){const e=j4e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(v){return qa(v,r)}function a(v){return cL(v,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=F4e({...e,toBytes(v,E,_){const D=E.toAffine(),x=n.toBytes(D.x),B=ES;return KE("isCompressed",_),_?B(Uint8Array.from([E.hasEvenY()?2:3]),x):B(Uint8Array.from([4]),x,n.toBytes(D.y))},fromBytes(v){const E=v.length,_=v[0],D=v.subarray(1);if(E===s&&(_===2||_===3)){const x=u0(D);if(!BP(x,Pi,n.ORDER))throw new Error("Point is not on curve");const B=u(x);let W;try{W=n.sqrt(B)}catch(S){const F=S instanceof Error?": "+S.message:"";throw new Error("Point is not on curve"+F)}const L=(W&Pi)===Pi;return(_&1)===1!==L&&(W=n.neg(W)),{x,y:W}}else if(E===i&&_===4){const x=n.fromBytes(D.subarray(0,n.BYTES)),B=n.fromBytes(D.subarray(n.BYTES,2*n.BYTES));return{x,y:B}}else{const x=s,B=i;throw new Error("invalid Point, expected length of "+x+", or uncompressed "+B+", got "+E)}}}),h=v=>YE(JE(v,e.nByteLength));function f(v){const E=r>>Pi;return v>E}function p(v){return f(v)?o(-v):v}const g=(v,E,_)=>u0(v.slice(E,_));class m{constructor(E,_,D){this.r=E,this.s=_,this.recovery=D,this.assertValidity()}static fromCompact(E){const _=e.nByteLength;return E=Oc("compactSignature",E,_*2),new m(g(E,0,_),g(E,_,2*_))}static fromDER(E){const{r:_,s:D}=jh.toSig(Oc("DER",E));return new m(_,D)}assertValidity(){bf("r",this.r,Pi,r),bf("s",this.s,Pi,r)}addRecoveryBit(E){return new m(this.r,this.s,E)}recoverPublicKey(E){const{r:_,s:D,recovery:x}=this,B=k(Oc("msgHash",E));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const W=x===2||x===3?_+e.n:_;if(W>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=x&1?"03":"02",S=c.fromHex(L+h(W)),F=a(W),X=o(-B*F),se=o(D*F),ge=c.BASE.multiplyAndAddUnsafe(S,X,se);if(!ge)throw new Error("point at infinify");return ge.assertValidity(),ge}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return QE(this.toDERHex())}toDERHex(){return jh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return QE(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(v){try{return l(v),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const v=hie(e.n);return A4e(e.randomBytes(v),e.n)},precompute(v=8,E=c.BASE){return E._setWindowSize(v),E.multiply(BigInt(3)),E}};function w(v,E=!0){return c.fromPrivateKey(v).toRawBytes(E)}function C(v){const E=G0(v),_=typeof v=="string",D=(E||_)&&v.length;return E?D===s||D===i:_?D===2*s||D===2*i:v instanceof c}function N(v,E,_=!0){if(C(v))throw new Error("first arg must be private key");if(!C(E))throw new Error("second arg must be public key");return c.fromHex(E).multiply(l(v)).toRawBytes(_)}const I=e.bits2int||function(v){if(v.length>8192)throw new Error("input is too large");const E=u0(v),_=v.length*8-e.nBitLength;return _>0?E>>BigInt(_):E},k=e.bits2int_modN||function(v){return o(I(v))},P=D4(e.nBitLength);function U(v){return bf("num < 2^"+e.nBitLength,v,rf,P),JE(v,e.nByteLength)}function M(v,E,_=H){if(["recovered","canonical"].some(Le=>Le in _))throw new Error("sign() legacy options not supported");const{hash:D,randomBytes:x}=e;let{lowS:B,prehash:W,extraEntropy:L}=_;B==null&&(B=!0),v=Oc("msgHash",v),KH(_),W&&(v=Oc("prehashed msgHash",D(v)));const S=k(v),F=l(E),X=[U(F),U(S)];if(L!=null&&L!==!1){const Le=L===!0?x(n.BYTES):L;X.push(Oc("extraEntropy",Le))}const se=ES(...X),ge=S;function Ue(Le){const Be=I(Le);if(!d(Be))return;const Ut=a(Be),lt=c.BASE.multiply(Be).toAffine(),st=o(lt.x);if(st===rf)return;const ce=o(Ut*o(ge+st*F));if(ce===rf)return;let ae=(lt.x===st?0:2)|Number(lt.y&Pi),_e=ce;return B&&f(ce)&&(_e=p(ce),ae^=1),new m(st,_e,ae)}return{seed:se,k2sig:Ue}}const H={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function K(v,E,_=H){const{seed:D,k2sig:x}=M(v,E,_),B=e;return aie(B.hash.outputLen,B.nByteLength,B.hmac)(D,x)}c.BASE._setWindowSize(8);function $(v,E,_,D=j){var ce;const x=v;E=Oc("msgHash",E),_=Oc("publicKey",_);const{lowS:B,prehash:W,format:L}=D;if(KH(D),"strict"in D)throw new Error("options.strict was renamed to lowS");if(L!==void 0&&L!=="compact"&&L!=="der")throw new Error("format must be compact or der");const S=typeof x=="string"||G0(x),F=!S&&!L&&typeof x=="object"&&x!==null&&typeof x.r=="bigint"&&typeof x.s=="bigint";if(!S&&!F)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let X,se;try{if(F&&(X=new m(x.r,x.s)),S){try{L!=="compact"&&(X=m.fromDER(x))}catch(ae){if(!(ae instanceof jh.Err))throw ae}!X&&L!=="der"&&(X=m.fromCompact(x))}se=c.fromHex(_)}catch{return!1}if(!X||B&&X.hasHighS())return!1;W&&(E=e.hash(E));const{r:ge,s:Ue}=X,Le=k(E),Be=a(Ue),Ut=o(Le*Be),lt=o(ge*Be),st=(ce=c.BASE.multiplyAndAddUnsafe(se,Ut,lt))==null?void 0:ce.toAffine();return st?o(st.x)===ge:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:N,sign:K,verify:$,ProjectivePoint:c,Signature:m,utils:y}}function z4e(t){return{hash:t,hmac:(e,...n)=>PP(t,e,V8e(...n)),randomBytes:FC}}function H4e(t,e){const n=r=>W4e({...t,...z4e(r)});return{...n(e),create:n}}const mie=uie(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),G4e=mie.create(BigInt("-3")),q4e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),V4e=H4e({a:G4e,b:q4e,Fp:mie,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},YI),yie="base10",ga="base16",Ru="base64pad",$p="base64url",JI="utf8",wie=0,vf=1,ZI=2,K4e=0,QH=1,z_=12,M4=32;function Y4e(){const t=uL.utils.randomPrivateKey(),e=uL.getPublicKey(t);return{privateKey:cc(t,ga),publicKey:cc(e,ga)}}function dL(){const t=FC(M4);return cc(t,ga)}function Q4e(t,e){const n=uL.getSharedSecret(Pl(t,ga),Pl(e,ga)),r=e4e(YI,n,void 0,void 0,M4);return cc(r,ga)}function ET(t){const e=YI(Pl(t,ga));return cc(e,ga)}function Nd(t){const e=YI(Pl(t,JI));return cc(e,ga)}function bie(t){return Pl(`${t}`,yie)}function q0(t){return Number(cc(t,yie))}function vie(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Eie(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function J4e(t){const e=bie(typeof t.type<"u"?t.type:wie);if(q0(e)===vf&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Pl(t.senderPublicKey,ga):void 0,r=typeof t.iv<"u"?Pl(t.iv,ga):FC(z_),s=Pl(t.symKey,ga),i=sie(s,r).encrypt(Pl(t.message,JI)),o=Cie({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===$p?vie(o):o}function Z4e(t){const e=Pl(t.symKey,ga),{sealed:n,iv:r}=CS({encoded:t.encoded,encoding:t.encoding}),s=sie(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return cc(s,JI)}function X4e(t,e){const n=bie(ZI),r=FC(z_),s=Pl(t,JI),i=Cie({type:n,sealed:s,iv:r});return e===$p?vie(i):i}function eFe(t,e){const{sealed:n}=CS({encoded:t,encoding:e});return cc(n,JI)}function Cie(t){if(q0(t.type)===ZI)return cc(F_([t.type,t.sealed]),Ru);if(q0(t.type)===vf){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return cc(F_([t.type,t.senderPublicKey,t.iv,t.sealed]),Ru)}return cc(F_([t.type,t.iv,t.sealed]),Ru)}function CS(t){const e=(t.encoding||Ru)===$p?Eie(t.encoded):t.encoded,n=Pl(e,Ru),r=n.slice(K4e,QH),s=QH;if(q0(r)===vf){const c=s+M4,l=c+z_,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(q0(r)===ZI){const c=n.slice(s),l=FC(z_);return{type:r,sealed:c,iv:l}}const i=s+z_,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function tFe(t,e){const n=CS({encoded:t,encoding:e==null?void 0:e.encoding});return _ie({type:q0(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?cc(n.senderPublicKey,ga):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function _ie(t){const e=(t==null?void 0:t.type)||wie;if(e===vf){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function JH(t){return t.type===vf&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function ZH(t){return t.type===ZI}function nFe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return F_([new Uint8Array([4]),e,n])}function rFe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(Eie(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=YI(c),u=nFe(e);if(!V4e.verify(F_([o,a]),l,u))throw new Error("Invalid signature");return WU(t).payload}const sFe="irn";function pk(t){return(t==null?void 0:t.relay)||{protocol:sFe}}function t_(t){const e=tBe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function iFe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function XH(t){if(!t.includes("wc:")){const l=Gse(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:oFe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:iFe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function oFe(t){return t.startsWith("//")?t.substring(2):t}function aFe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function eG(t){const e=new URLSearchParams,n=aFe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function wx(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var cFe=Object.defineProperty,lFe=Object.defineProperties,uFe=Object.getOwnPropertyDescriptors,tG=Object.getOwnPropertySymbols,dFe=Object.prototype.hasOwnProperty,hFe=Object.prototype.propertyIsEnumerable,nG=(t,e,n)=>e in t?cFe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fFe=(t,e)=>{for(var n in e||(e={}))dFe.call(e,n)&&nG(t,n,e[n]);if(tG)for(var n of tG(e))hFe.call(e,n)&&nG(t,n,e[n]);return t},pFe=(t,e)=>lFe(t,uFe(e));function WC(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function gFe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...WC(n.accounts))}),e}function mFe(t,e){const n=[];return Object.values(t).forEach(r=>{WC(r.accounts).includes(e)&&n.push(...r.methods)}),n}function yFe(t,e){const n=[];return Object.values(t).forEach(r=>{WC(r.accounts).includes(e)&&n.push(...r.events)}),n}function UP(t){return t.includes(":")}function zb(t){return UP(t)?t.split(":")[0]:t}function rG(t){var e,n,r;const s={};if(!Kg(t))return s;for(const[i,o]of Object.entries(t)){const a=UP(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=zb(i);s[u]=pFe(fFe({},s[u]),{chains:Gd(a,(e=s[u])==null?void 0:e.chains),methods:Gd(c,(n=s[u])==null?void 0:n.methods),events:Gd(l,(r=s[u])==null?void 0:r.events)})}return s}function wFe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function sG(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=wFe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Gd(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function bFe(t,e){var n,r,s,i,o,a;const c=rG(t),l=rG(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Gd((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Gd((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Gd((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const vFe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},EFe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ge(t,e){const{message:n,code:r}=EFe[t];return{message:e?`${n} ${e}`:n,code:r}}function Wr(t,e){const{message:n,code:r}=vFe[t];return{message:e?`${n} ${e}`:n,code:r}}function Vg(t,e){return!!Array.isArray(t)}function Kg(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ao(t){return typeof t>"u"}function ai(t,e){return e&&ao(t)?!0:typeof t=="string"&&!!t.trim().length}function B4(t,e){return e&&ao(t)?!0:typeof t=="number"&&!isNaN(t)}function CFe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Sy(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=WC(a),d=n[o];(!Sy(Fse(o,d),u)||!Sy(d.methods,c)||!Sy(d.events,l))&&(i=!1)}),i):!1}function gk(t){return ai(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function _Fe(t){if(ai(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&gk(n)}}return!1}function AFe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(ai(t,!1)){if(e(t))return!0;const n=Gse(t);return e(n)}}catch{}return!1}function SFe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function IFe(t){return t==null?void 0:t.topic}function NFe(t,e){let n=null;return ai(t==null?void 0:t.publicKey,!1)||(n=Ge("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function iG(t){let e=!0;return Vg(t)?t.length&&(e=t.every(n=>ai(n,!1))):e=!1,e}function xFe(t,e,n){let r=null;return Vg(e)&&e.length?e.forEach(s=>{r||gk(s)||(r=Wr("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):gk(t)||(r=Wr("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function TFe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=xFe(s,Fse(s,i),`${e} ${n}`);o&&(r=o)}),r}function RFe(t,e){let n=null;return Vg(t)?t.forEach(r=>{n||_Fe(r)||(n=Wr("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Wr("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function kFe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=RFe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function PFe(t,e){let n=null;return iG(t==null?void 0:t.methods)?iG(t==null?void 0:t.events)||(n=Wr("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Wr("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function Aie(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=PFe(r,`${e}, namespace`);s&&(n=s)}),n}function OFe(t,e,n){let r=null;if(t&&Kg(t)){const s=Aie(t,e);s&&(r=s);const i=TFe(t,e,n);i&&(r=i)}else r=Ge("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function F3(t,e){let n=null;if(t&&Kg(t)){const r=Aie(t,e);r&&(n=r);const s=kFe(t,e);s&&(n=s)}else n=Ge("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function Sie(t){return ai(t.protocol,!0)}function DFe(t,e){let n=!1;return t?t&&Vg(t)&&t.length&&t.forEach(r=>{n=Sie(r)}):n=!0,n}function MFe(t){return typeof t=="number"}function La(t){return typeof t<"u"&&typeof t!==null}function BFe(t){return!(!t||typeof t!="object"||!t.code||!B4(t.code,!1)||!t.message||!ai(t.message,!1))}function UFe(t){return!(ao(t)||!ai(t.method,!1))}function LFe(t){return!(ao(t)||ao(t.result)&&ao(t.error)||!B4(t.id,!1)||!ai(t.jsonrpc,!1))}function $Fe(t){return!(ao(t)||!ai(t.name,!1))}function oG(t,e){return!(!gk(e)||!gFe(t).includes(e))}function FFe(t,e,n){return ai(n,!1)?mFe(t,e).includes(n):!1}function jFe(t,e,n){return ai(n,!1)?yFe(t,e).includes(n):!1}function aG(t,e,n){let r=null;const s=WFe(t),i=zFe(e),o=Object.keys(s),a=Object.keys(i),c=cG(Object.keys(t)),l=cG(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Ge("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Sy(o,a)||(r=Ge("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=WC(e[d].accounts);h.includes(d)||(r=Ge("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Sy(s[d].methods,i[d].methods)?Sy(s[d].events,i[d].events)||(r=Ge("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Ge("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function WFe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function cG(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function zFe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=WC(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function HFe(t,e){return B4(t,!1)&&t<=e.max&&t>=e.min}function lG(){const t=VI();return new Promise(e=>{switch(t){case zc.browser:e(GFe());break;case zc.reactNative:e(qFe());break;case zc.node:e(VFe());break;default:e(!0)}})}function GFe(){return $C()&&(navigator==null?void 0:navigator.onLine)}async function qFe(){if(Nm()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function VFe(){return!0}function KFe(t){switch(VI()){case zc.browser:YFe(t);break;case zc.reactNative:QFe(t);break}}function YFe(t){!Nm()&&$C()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function QFe(t){Nm()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function JFe(){var t;return $C()&&$0()?((t=$0())==null?void 0:t.visibilityState)==="visible":!0}const j3={};class N1{static get(e){return j3[e]}static set(e,n){j3[e]=n}static delete(e){delete j3[e]}}var ZFe={};const Iie="wc",Nie=2,hL="core",eh=`${Iie}@2:${hL}:`,XFe={logger:"error"},eje={database:":memory:"},tje="crypto",uG="client_ed25519_seed",nje=je.ONE_DAY,rje="keychain",sje="0.3",ije="messages",oje="0.3",dG=je.SIX_HOURS,aje="publisher",xie="irn",cje="error",Tie="wss://relay.walletconnect.org",lje="relayer",Li={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},uje="_subscription",ol={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},dje=.1,fL="2.21.0",ys={link_mode:"link_mode",relay:"relay"},CT={inbound:"inbound",outbound:"outbound"},hje="0.3",fje="WALLETCONNECT_CLIENT_ID",hG="WALLETCONNECT_LINK_MODE_APPS",Sc={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},pje="subscription",gje="0.3",mje="pairing",yje="0.3",x1={wc_pairingDelete:{req:{ttl:je.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:je.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:je.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:je.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:je.ONE_DAY,prompt:!1,tag:0},res:{ttl:je.ONE_DAY,prompt:!1,tag:0}}},iy={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},eu={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},wje="history",bje="0.3",vje="expirer",gl={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Eje="0.3",Cje="verify-api",_je="https://verify.walletconnect.com",Rie="https://verify.walletconnect.org",H_=Rie,Aje=`${H_}/v3`,Sje=[_je,Rie],Ije="echo",Nje="https://echo.walletconnect.com",ad={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Dh={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},tu={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Um={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Lm={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},T1={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},xje=.1,Tje="event-client",Rje=86400,kje="https://pulse.walletconnect.org/batch";function Pje(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,w=p.length;y!==w&&p[y]===0;)y++,g++;for(var C=(w-y)*u+1>>>0,N=new Uint8Array(C);y!==w;){for(var I=p[y],k=0,P=C-1;(I!==0||k<m)&&P!==-1;P--,k++)I+=256*N[P]>>>0,N[P]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");m=k,y++}for(var U=C-m;U!==C&&N[U]===0;)U++;for(var M=c.repeat(g);U<C;++U)M+=t.charAt(N[U]);return M}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*l+1>>>0,C=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var I=0,k=w-1;(N!==0||I<y)&&k!==-1;k--,I++)N+=a*C[k]>>>0,C[k]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=I,g++}if(p[g]!==" "){for(var P=w-y;P!==w&&C[P]===0;)P++;for(var U=new Uint8Array(m+(w-P)),M=m;P!==w;)U[M++]=C[P++];return U}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Oje=Pje,Dje=Oje;const kie=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Mje=t=>new TextEncoder().encode(t),Bje=t=>new TextDecoder().decode(t);class Uje{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Lje{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Pie(this,e)}}class $je{constructor(e){this.decoders=e}or(e){return Pie(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Pie=(t,e)=>new $je({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Fje{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Uje(e,n,r),this.decoder=new Lje(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const LP=({name:t,prefix:e,encode:n,decode:r})=>new Fje(t,e,n,r),XI=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Dje(n,e);return LP({prefix:t,name:e,encode:r,decode:i=>kie(s(i))})},jje=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Wje=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Co=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>LP({prefix:e,name:t,encode(s){return Wje(s,r,n)},decode(s){return jje(s,r,n,t)}}),zje=LP({prefix:"\0",name:"identity",encode:t=>Bje(t),decode:t=>Mje(t)});var Hje=Object.freeze({__proto__:null,identity:zje});const Gje=Co({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var qje=Object.freeze({__proto__:null,base2:Gje});const Vje=Co({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Kje=Object.freeze({__proto__:null,base8:Vje});const Yje=XI({prefix:"9",name:"base10",alphabet:"0123456789"});var Qje=Object.freeze({__proto__:null,base10:Yje});const Jje=Co({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Zje=Co({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Xje=Object.freeze({__proto__:null,base16:Jje,base16upper:Zje});const e9e=Co({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),t9e=Co({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),n9e=Co({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),r9e=Co({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),s9e=Co({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),i9e=Co({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),o9e=Co({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),a9e=Co({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),c9e=Co({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var l9e=Object.freeze({__proto__:null,base32:e9e,base32upper:t9e,base32pad:n9e,base32padupper:r9e,base32hex:s9e,base32hexupper:i9e,base32hexpad:o9e,base32hexpadupper:a9e,base32z:c9e});const u9e=XI({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),d9e=XI({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var h9e=Object.freeze({__proto__:null,base36:u9e,base36upper:d9e});const f9e=XI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),p9e=XI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var g9e=Object.freeze({__proto__:null,base58btc:f9e,base58flickr:p9e});const m9e=Co({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),y9e=Co({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),w9e=Co({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),b9e=Co({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var v9e=Object.freeze({__proto__:null,base64:m9e,base64pad:y9e,base64url:w9e,base64urlpad:b9e});const Oie=Array.from(""),E9e=Oie.reduce((t,e,n)=>(t[n]=e,t),[]),C9e=Oie.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function _9e(t){return t.reduce((e,n)=>(e+=E9e[n],e),"")}function A9e(t){const e=[];for(const n of t){const r=C9e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const S9e=LP({prefix:"",name:"base256emoji",encode:_9e,decode:A9e});var I9e=Object.freeze({__proto__:null,base256emoji:S9e}),N9e=Die,fG=128,x9e=-128,T9e=Math.pow(2,31);function Die(t,e,n){e=e||[],n=n||0;for(var r=n;t>=T9e;)e[n++]=t&255|fG,t/=128;for(;t&x9e;)e[n++]=t&255|fG,t>>>=7;return e[n]=t|0,Die.bytes=n-r+1,e}var R9e=pL,k9e=128,pG=127;function pL(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw pL.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&pG)<<s:(o&pG)*Math.pow(2,s),s+=7}while(o>=k9e);return pL.bytes=i-r,n}var P9e=Math.pow(2,7),O9e=Math.pow(2,14),D9e=Math.pow(2,21),M9e=Math.pow(2,28),B9e=Math.pow(2,35),U9e=Math.pow(2,42),L9e=Math.pow(2,49),$9e=Math.pow(2,56),F9e=Math.pow(2,63),j9e=function(t){return t<P9e?1:t<O9e?2:t<D9e?3:t<M9e?4:t<B9e?5:t<U9e?6:t<L9e?7:t<$9e?8:t<F9e?9:10},W9e={encode:N9e,decode:R9e,encodingLength:j9e},Mie=W9e;const gG=(t,e,n=0)=>(Mie.encode(t,e,n),e),mG=t=>Mie.encodingLength(t),gL=(t,e)=>{const n=e.byteLength,r=mG(t),s=r+mG(n),i=new Uint8Array(s+n);return gG(t,i,0),gG(n,i,r),i.set(e,s),new z9e(t,n,e,i)};class z9e{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const Bie=({name:t,code:e,encode:n})=>new H9e(t,e,n);class H9e{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?gL(this.code,n):n.then(r=>gL(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Uie=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),G9e=Bie({name:"sha2-256",code:18,encode:Uie("SHA-256")}),q9e=Bie({name:"sha2-512",code:19,encode:Uie("SHA-512")});var V9e=Object.freeze({__proto__:null,sha256:G9e,sha512:q9e});const Lie=0,K9e="identity",$ie=kie,Y9e=t=>gL(Lie,$ie(t)),Q9e={code:Lie,name:K9e,encode:$ie,digest:Y9e};var J9e=Object.freeze({__proto__:null,identity:Q9e});new TextEncoder,new TextDecoder;const yG={...Hje,...qje,...Kje,...Qje,...Xje,...l9e,...h9e,...g9e,...v9e,...I9e};({...V9e,...J9e});function Z9e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Fie(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const wG=Fie("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),W3=Fie("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Z9e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),X9e={utf8:wG,"utf-8":wG,hex:yG.base16,latin1:W3,ascii:W3,binary:W3,...yG};function e7e(t,e="utf8"){const n=X9e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var t7e=Object.defineProperty,n7e=(t,e,n)=>e in t?t7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,td=(t,e,n)=>n7e(t,typeof e!="symbol"?e+"":e,n);class r7e{constructor(e,n){this.core=e,this.logger=n,td(this,"keychain",new Map),td(this,"name",rje),td(this,"version",sje),td(this,"initialized",!1),td(this,"storagePrefix",eh),td(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),td(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),td(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),td(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Ge("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),td(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=bo(n,this.name)}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,eL(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?tL(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var s7e=Object.defineProperty,i7e=(t,e,n)=>e in t?s7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ki=(t,e,n)=>i7e(t,typeof e!="symbol"?e+"":e,n);class o7e{constructor(e,n,r){this.core=e,this.logger=n,Ki(this,"name",tje),Ki(this,"keychain"),Ki(this,"randomSessionIdentifier",dL()),Ki(this,"initialized",!1),Ki(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Ki(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Ki(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=kz(s);return rse(i.publicKey)}),Ki(this,"generateKeyPair",()=>{this.isInitialized();const s=Y4e();return this.setPrivateKey(s.publicKey,s.privateKey)}),Ki(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=kz(i),a=this.randomSessionIdentifier;return await k3e(a,s,nje,o)}),Ki(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Q4e(a,i);return this.setSymKey(c,o)}),Ki(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||ET(s);return await this.keychain.set(o,s),o}),Ki(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ki(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ki(this,"encode",async(s,i,o)=>{this.isInitialized();const a=_ie(o),c=Of(i);if(ZH(a))return X4e(c,o==null?void 0:o.encoding);if(JH(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return J4e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Ki(this,"decode",async(s,i,o)=>{this.isInitialized();const a=tFe(i,o);if(ZH(a)){const c=eFe(i,o==null?void 0:o.encoding);return L0(c)}if(JH(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=Z4e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return L0(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Ki(this,"getPayloadType",(s,i=Ru)=>{const o=CS({encoded:s,encoding:i});return q0(o.type)}),Ki(this,"getPayloadSenderPublicKey",(s,i=Ru)=>{const o=CS({encoded:s,encoding:i});return o.senderPublicKey?cc(o.senderPublicKey,ga):void 0}),this.core=e,this.logger=bo(n,this.name),this.keychain=r||new r7e(this.core,this.logger)}get context(){return gc(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(uG)}catch{e=dL(),await this.keychain.set(uG,e)}return e7e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var a7e=Object.defineProperty,c7e=Object.defineProperties,l7e=Object.getOwnPropertyDescriptors,bG=Object.getOwnPropertySymbols,u7e=Object.prototype.hasOwnProperty,d7e=Object.prototype.propertyIsEnumerable,mL=(t,e,n)=>e in t?a7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h7e=(t,e)=>{for(var n in e||(e={}))u7e.call(e,n)&&mL(t,n,e[n]);if(bG)for(var n of bG(e))d7e.call(e,n)&&mL(t,n,e[n]);return t},f7e=(t,e)=>c7e(t,l7e(e)),yc=(t,e,n)=>mL(t,typeof e!="symbol"?e+"":e,n);class p7e extends l6e{constructor(e,n){super(e,n),this.logger=e,this.core=n,yc(this,"messages",new Map),yc(this,"messagesWithoutClientAck",new Map),yc(this,"name",ije),yc(this,"version",oje),yc(this,"initialized",!1),yc(this,"storagePrefix",eh),yc(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),yc(this,"set",async(r,s,i)=>{this.isInitialized();const o=Nd(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===CT.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,f7e(h7e({},c),{[o]:s}))}return await this.persist(),o}),yc(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),yc(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),yc(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Nd(s);return typeof i[o]<"u"}),yc(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Nd(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),yc(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=bo(e,this.name),this.core=n}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,eL(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,eL(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?tL(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?tL(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var g7e=Object.defineProperty,m7e=Object.defineProperties,y7e=Object.getOwnPropertyDescriptors,vG=Object.getOwnPropertySymbols,w7e=Object.prototype.hasOwnProperty,b7e=Object.prototype.propertyIsEnumerable,yL=(t,e,n)=>e in t?g7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bx=(t,e)=>{for(var n in e||(e={}))w7e.call(e,n)&&yL(t,n,e[n]);if(vG)for(var n of vG(e))b7e.call(e,n)&&yL(t,n,e[n]);return t},z3=(t,e)=>m7e(t,y7e(e)),nu=(t,e,n)=>yL(t,typeof e!="symbol"?e+"":e,n);class v7e extends u6e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,nu(this,"events",new ql.EventEmitter),nu(this,"name",aje),nu(this,"queue",new Map),nu(this,"publishTimeout",je.toMiliseconds(je.ONE_MINUTE)),nu(this,"initialPublishTimeout",je.toMiliseconds(je.ONE_SECOND*15)),nu(this,"needsTransportRestart",!1),nu(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||dG,c=pk(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Ay().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const m=({id:w})=>{h.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(Li.publish,m),g(h))};this.relayer.events.on(Li.publish,m);const y=vg(new Promise((w,C)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(w).catch(N=>{this.logger.warn(N,N==null?void 0:N.message),C(N)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(Li.publish,m)}catch(w){this.queue.set(d,z3(bx({},h),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await vg(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),nu(this,"on",(r,s)=>{this.events.on(r,s)}),nu(this,"once",(r,s)=>{this.events.once(r,s)}),nu(this,"off",(r,s)=>{this.events.off(r,s)}),nu(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=bo(n,this.name),this.registerEventListeners()}get context(){return gc(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=dG,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:t_(pk().protocol).publish,params:bx({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};ao((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),ao((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Li.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,z3(bx({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(z3(bx({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(fw.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Li.connection_stalled);return}this.checkQueue()}),this.relayer.on(Li.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var E7e=Object.defineProperty,C7e=(t,e,n)=>e in t?E7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kw=(t,e,n)=>C7e(t,typeof e!="symbol"?e+"":e,n);class _7e{constructor(){Kw(this,"map",new Map),Kw(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Kw(this,"get",e=>this.map.get(e)||[]),Kw(this,"exists",(e,n)=>this.get(e).includes(n)),Kw(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Kw(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var A7e=Object.defineProperty,S7e=Object.defineProperties,I7e=Object.getOwnPropertyDescriptors,EG=Object.getOwnPropertySymbols,N7e=Object.prototype.hasOwnProperty,x7e=Object.prototype.propertyIsEnumerable,wL=(t,e,n)=>e in t?A7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R1=(t,e)=>{for(var n in e||(e={}))N7e.call(e,n)&&wL(t,n,e[n]);if(EG)for(var n of EG(e))x7e.call(e,n)&&wL(t,n,e[n]);return t},H3=(t,e)=>S7e(t,I7e(e)),Vr=(t,e,n)=>wL(t,typeof e!="symbol"?e+"":e,n);class T7e extends f6e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Vr(this,"subscriptions",new Map),Vr(this,"topicMap",new _7e),Vr(this,"events",new ql.EventEmitter),Vr(this,"name",pje),Vr(this,"version",gje),Vr(this,"pending",new Map),Vr(this,"cached",[]),Vr(this,"initialized",!1),Vr(this,"storagePrefix",eh),Vr(this,"subscribeTimeout",je.toMiliseconds(je.ONE_MINUTE)),Vr(this,"initialSubscribeTimeout",je.toMiliseconds(je.ONE_SECOND*15)),Vr(this,"clientId"),Vr(this,"batchSubscribeTopicsLimit",500),Vr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Vr(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=pk(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Vr(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Vr(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Vr(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Vr(this,"on",(r,s)=>{this.events.on(r,s)}),Vr(this,"once",(r,s)=>{this.events.once(r,s)}),Vr(this,"off",(r,s)=>{this.events.off(r,s)}),Vr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Vr(this,"start",async()=>{await this.onConnect()}),Vr(this,"stop",async()=>{await this.onDisconnect()}),Vr(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Vr(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Vr(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(fw.pulse,async()=>{await this.checkPending()}),this.events.on(Sc.created,async r=>{const s=Sc.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Sc.deleted,async r=>{const s=Sc.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=bo(n,this.name),this.clientId=""}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=pk(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Wr("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===ys.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:t_(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===ys.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},je.toMiliseconds(je.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Sc.created,d),u(h.id))};this.events.on(Sc.created,d);try{const h=await vg(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Sc.created,d),u(h)}catch{}}),l=await vg(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Li.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:t_(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await vg(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Li.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:t_(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await vg(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Li.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:t_(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,H3(R1({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,R1({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,R1({},n)),this.topicMap.set(n.topic,e),this.events.emit(Sc.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Sc.deleted,H3(R1({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Sc.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Sc.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>H3(R1({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await B8e(je.toMiliseconds(je.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Nd(e+await this.getClientId())}}var R7e=Object.defineProperty,CG=Object.getOwnPropertySymbols,k7e=Object.prototype.hasOwnProperty,P7e=Object.prototype.propertyIsEnumerable,bL=(t,e,n)=>e in t?R7e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_G=(t,e)=>{for(var n in e||(e={}))k7e.call(e,n)&&bL(t,n,e[n]);if(CG)for(var n of CG(e))P7e.call(e,n)&&bL(t,n,e[n]);return t},lr=(t,e,n)=>bL(t,typeof e!="symbol"?e+"":e,n);class O7e extends d6e{constructor(e){super(e),lr(this,"protocol","wc"),lr(this,"version",2),lr(this,"core"),lr(this,"logger"),lr(this,"events",new ql.EventEmitter),lr(this,"provider"),lr(this,"messages"),lr(this,"subscriber"),lr(this,"publisher"),lr(this,"name",lje),lr(this,"transportExplicitlyClosed",!1),lr(this,"initialized",!1),lr(this,"connectionAttemptInProgress",!1),lr(this,"relayUrl"),lr(this,"projectId"),lr(this,"packageName"),lr(this,"bundleId"),lr(this,"hasExperiencedNetworkDisruption",!1),lr(this,"pingTimeout"),lr(this,"heartBeatTimeout",je.toMiliseconds(je.THIRTY_SECONDS+je.FIVE_SECONDS)),lr(this,"reconnectTimeout"),lr(this,"connectPromise"),lr(this,"reconnectInProgress",!1),lr(this,"requestsInFlight",[]),lr(this,"connectTimeout",je.toMiliseconds(je.ONE_SECOND*15)),lr(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Ay().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),lr(this,"resetPingTimeout",()=>{hk()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),lr(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),lr(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Li.connect)}),lr(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),lr(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Li.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),lr(this,"registerProviderListeners",()=>{this.provider.on(ol.payload,this.onPayloadHandler),this.provider.on(ol.connect,this.onConnectHandler),this.provider.on(ol.disconnect,this.onDisconnectHandler),this.provider.on(ol.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?bo(e.logger,this.name):WI(gw({level:e.logger||cje})),this.messages=new p7e(this.logger,e.core),this.subscriber=new T7e(this,this.logger),this.publisher=new v7e(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Tie,this.projectId=e.projectId,v8e()?this.packageName=EH():E8e()&&(this.bundleId=EH()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return gc(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:ys.relay},CT.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Sc.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Sc.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,_G({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await vg(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await lG())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=pi(je.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Li.message,e),await this.recordMessageEvent(e,CT.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ol.disconnect,i),await vg(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ol.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ol.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(ol.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,je.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(hk())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Vl(new zBe(I8e({sdkVersion:fL,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),N4(e)){if(!e.method.endsWith(uje))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:ys.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(_G({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else NP(e)&&this.events.emit(Li.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,CT.inbound),this.events.emit(Li.message,e))}async acknowledgePayload(e){const n=SP(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(ol.payload,this.onPayloadHandler),this.provider.off(ol.connect,this.onConnectHandler),this.provider.off(ol.disconnect,this.onDisconnectHandler),this.provider.off(ol.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await lG();KFe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(fw.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&JFe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Li.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},je.toMiliseconds(dje)))))}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function D7e(){}function AG(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function SG(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function IG(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const M7e="[object RegExp]",B7e="[object String]",U7e="[object Number]",L7e="[object Boolean]",NG="[object Arguments]",$7e="[object Symbol]",F7e="[object Date]",j7e="[object Map]",W7e="[object Set]",z7e="[object Array]",H7e="[object Function]",G7e="[object ArrayBuffer]",G3="[object Object]",q7e="[object Error]",V7e="[object DataView]",K7e="[object Uint8Array]",Y7e="[object Uint8ClampedArray]",Q7e="[object Uint16Array]",J7e="[object Uint32Array]",Z7e="[object BigUint64Array]",X7e="[object Int8Array]",eWe="[object Int16Array]",tWe="[object Int32Array]",nWe="[object BigInt64Array]",rWe="[object Float32Array]",sWe="[object Float64Array]";function iWe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function oWe(t,e,n){return n_(t,e,void 0,void 0,void 0,void 0,n)}function n_(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return G_(t,e,i,o)}return G_(t,e,i,o)}function G_(t,e,n,r){if(Object.is(t,e))return!0;let s=IG(t),i=IG(e);if(s===NG&&(s=G3),i===NG&&(i=G3),s!==i)return!1;switch(s){case B7e:return t.toString()===e.toString();case U7e:{const c=t.valueOf(),l=e.valueOf();return iWe(c,l)}case L7e:case F7e:case $7e:return Object.is(t.valueOf(),e.valueOf());case M7e:return t.source===e.source&&t.flags===e.flags;case H7e:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case j7e:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!n_(l,e.get(c),c,t,e,n,r))return!1;return!0}case W7e:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>n_(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case z7e:case K7e:case Y7e:case Q7e:case J7e:case Z7e:case X7e:case eWe:case tWe:case nWe:case rWe:case sWe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!n_(t[c],e[c],c,t,e,n,r))return!1;return!0}case G7e:return t.byteLength!==e.byteLength?!1:G_(new Uint8Array(t),new Uint8Array(e),n,r);case V7e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:G_(new Uint8Array(t),new Uint8Array(e),n,r);case q7e:return t.name===e.name&&t.message===e.message;case G3:{if(!(G_(t.constructor,e.constructor,n,r)||AG(t)&&AG(e)))return!1;const c=[...Object.keys(t),...SG(t)],l=[...Object.keys(e),...SG(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!n_(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function aWe(t,e){return oWe(t,e,D7e)}var cWe=Object.defineProperty,xG=Object.getOwnPropertySymbols,lWe=Object.prototype.hasOwnProperty,uWe=Object.prototype.propertyIsEnumerable,vL=(t,e,n)=>e in t?cWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TG=(t,e)=>{for(var n in e||(e={}))lWe.call(e,n)&&vL(t,n,e[n]);if(xG)for(var n of xG(e))uWe.call(e,n)&&vL(t,n,e[n]);return t},Ra=(t,e,n)=>vL(t,typeof e!="symbol"?e+"":e,n);class yw extends h6e{constructor(e,n,r,s=eh,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Ra(this,"map",new Map),Ra(this,"version",hje),Ra(this,"cached",[]),Ra(this,"initialized",!1),Ra(this,"getKey"),Ra(this,"storagePrefix",eh),Ra(this,"recentlyDeleted",[]),Ra(this,"recentlyDeletedLimit",200),Ra(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!ao(o)?this.map.set(this.getKey(o),o):SFe(o)?this.map.set(o.id,o):IFe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ra(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ra(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ra(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>aWe(a[c],o[c]))):this.values)),Ra(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=TG(TG({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ra(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=bo(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Ge("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dWe=Object.defineProperty,hWe=(t,e,n)=>e in t?dWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vn=(t,e,n)=>hWe(t,typeof e!="symbol"?e+"":e,n);class fWe{constructor(e,n){this.core=e,this.logger=n,Vn(this,"name",mje),Vn(this,"version",yje),Vn(this,"events",new g4),Vn(this,"pairings"),Vn(this,"initialized",!1),Vn(this,"storagePrefix",eh),Vn(this,"ignoredPayloadTypes",[vf]),Vn(this,"registeredMethods",[]),Vn(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Vn(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Vn(this,"create",async r=>{this.isInitialized();const s=dL(),i=await this.core.crypto.setSymKey(s),o=pi(je.FIVE_MINUTES),a={protocol:xie},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=eG({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(iy.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Vn(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ad.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=XH(r.uri);s.props.properties.topic=i,s.addTrace(ad.pairing_uri_validation_success),s.addTrace(ad.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(ad.existing_pairing),u.active)throw s.setError(Dh.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ad.pairing_not_expired)}const d=c||pi(je.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(ad.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(iy.create,h),s.addTrace(ad.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ad.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Dh.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Dh.subscribe_pairing_topic_failure),f}return s.addTrace(ad.subscribe_pairing_topic_success),h}),Vn(this,"activate",async({topic:r})=>{this.isInitialized();const s=pi(je.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Vn(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Qm();this.events.once(Ir("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Vn(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Vn(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Vn(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Vn(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Wr("USER_DISCONNECTED")),await this.deletePairing(s))}),Vn(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return eG({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Vn(this,"sendRequest",async(r,s,i)=>{const o=bg(s,i),a=await this.core.crypto.encode(r,o),c=x1[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Vn(this,"sendResult",async(r,s,i)=>{const o=SP(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=x1[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Vn(this,"sendError",async(r,s,i)=>{const o=IP(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=x1[c]?x1[c].res:x1.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Vn(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Wr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Vn(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Op(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Vn(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Vn(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Vn(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(iy.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Vn(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{dd(s)?this.events.emit(Ir("pairing_ping",i),{}):Al(s)&&this.events.emit(Ir("pairing_ping",i),{error:s.error})},500)}),Vn(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(iy.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Vn(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Wr("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Vn(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Wr("WC_METHOD_UNSUPPORTED",r))}),Vn(this,"isValidPair",(r,s)=>{var i;if(!La(r)){const{message:a}=Ge("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Dh.malformed_pairing_uri),new Error(a)}if(!AFe(r.uri)){const{message:a}=Ge("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Dh.malformed_pairing_uri),new Error(a)}const o=XH(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Ge("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Dh.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Ge("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Dh.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&je.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Dh.pairing_expired);const{message:a}=Ge("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Vn(this,"isValidPing",async r=>{if(!La(r)){const{message:i}=Ge("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Vn(this,"isValidDisconnect",async r=>{if(!La(r)){const{message:i}=Ge("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Vn(this,"isValidPairingTopic",async r=>{if(!ai(r,!1)){const{message:s}=Ge("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Op(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Ge("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=bo(n,this.name),this.pairings=new yw(this.core,this.logger,this.name,this.storagePrefix)}get context(){return gc(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Li.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==ys.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);N4(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):NP(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(gl.expired,async e=>{const{topic:n}=Hse(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(iy.expire,{topic:n}))})}}var pWe=Object.defineProperty,gWe=(t,e,n)=>e in t?pWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yi=(t,e,n)=>gWe(t,typeof e!="symbol"?e+"":e,n);class mWe extends c6e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Yi(this,"records",new Map),Yi(this,"events",new ql.EventEmitter),Yi(this,"name",wje),Yi(this,"version",bje),Yi(this,"cached",[]),Yi(this,"initialized",!1),Yi(this,"storagePrefix",eh),Yi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Yi(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:pi(je.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(eu.created,o)}),Yi(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Al(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(eu.updated,s))}),Yi(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Yi(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(eu.deleted,i)}}),this.persist()}),Yi(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Yi(this,"on",(r,s)=>{this.events.on(r,s)}),Yi(this,"once",(r,s)=>{this.events.once(r,s)}),Yi(this,"off",(r,s)=>{this.events.off(r,s)}),Yi(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=bo(n,this.name)}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:bg(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(eu.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(eu.created,e=>{const n=eu.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(eu.updated,e=>{const n=eu.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(eu.deleted,e=>{const n=eu.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(fw.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{je.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(eu.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var yWe=Object.defineProperty,wWe=(t,e,n)=>e in t?yWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,No=(t,e,n)=>wWe(t,typeof e!="symbol"?e+"":e,n);class bWe extends p6e{constructor(e,n){super(e,n),this.core=e,this.logger=n,No(this,"expirations",new Map),No(this,"events",new ql.EventEmitter),No(this,"name",vje),No(this,"version",Eje),No(this,"cached",[]),No(this,"initialized",!1),No(this,"storagePrefix",eh),No(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),No(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),No(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(gl.created,{target:i,expiration:o})}),No(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),No(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(gl.deleted,{target:s,expiration:i})}}),No(this,"on",(r,s)=>{this.events.on(r,s)}),No(this,"once",(r,s)=>{this.events.once(r,s)}),No(this,"off",(r,s)=>{this.events.off(r,s)}),No(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=bo(n,this.name)}get context(){return gc(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return N8e(e);if(typeof e=="number")return x8e(e);const{message:n}=Ge("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(gl.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;je.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(gl.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(fw.pulse,()=>this.checkExpirations()),this.events.on(gl.created,e=>{const n=gl.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(gl.expired,e=>{const n=gl.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(gl.deleted,e=>{const n=gl.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var vWe=Object.defineProperty,EWe=(t,e,n)=>e in t?vWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oi=(t,e,n)=>EWe(t,typeof e!="symbol"?e+"":e,n);class CWe extends g6e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,oi(this,"name",Cje),oi(this,"abortController"),oi(this,"isDevEnv"),oi(this,"verifyUrlV3",Aje),oi(this,"storagePrefix",eh),oi(this,"version",Nie),oi(this,"publicKey"),oi(this,"fetchPromise"),oi(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&je.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),oi(this,"register",async s=>{if(!$C()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=$0(),u=this.startAbortTimer(je.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",m),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const m=y=>{if(y.data&&typeof y.data=="string")try{const w=JSON.parse(y.data);if(w.type==="verify_attestation"){if(WU(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",m),h(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(g),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),oi(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(WU(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),oi(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(je.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),oi(this,"getVerifyUrl",s=>{let i=s||H_;return Sje.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${H_}`),i=H_),i}),oi(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(je.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),oi(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),oi(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),oi(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),oi(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),oi(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),oi(this,"validateAttestation",(s,i)=>{const o=rFe(s,i.publicKey),a={hasExpired:je.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=bo(n,this.name),this.abortController=new AbortController,this.isDevEnv=T4(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return gc(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),je.toMiliseconds(e))}}var _We=Object.defineProperty,AWe=(t,e,n)=>e in t?_We(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RG=(t,e,n)=>AWe(t,typeof e!="symbol"?e+"":e,n);class SWe extends m6e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,RG(this,"context",Ije),RG(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${Nje}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=bo(n,this.context)}}var IWe=Object.defineProperty,kG=Object.getOwnPropertySymbols,NWe=Object.prototype.hasOwnProperty,xWe=Object.prototype.propertyIsEnumerable,EL=(t,e,n)=>e in t?IWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k1=(t,e)=>{for(var n in e||(e={}))NWe.call(e,n)&&EL(t,n,e[n]);if(kG)for(var n of kG(e))xWe.call(e,n)&&EL(t,n,e[n]);return t},Ni=(t,e,n)=>EL(t,typeof e!="symbol"?e+"":e,n);class TWe extends y6e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Ni(this,"context",Tje),Ni(this,"storagePrefix",eh),Ni(this,"storageVersion",xje),Ni(this,"events",new Map),Ni(this,"shouldPersist",!1),Ni(this,"init",async()=>{if(!T4())try{const s={eventId:_H(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Wse(this.core.relayer.protocol,this.core.relayer.version,fL)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Ni(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=_H(),u=this.core.projectId||"",d=Date.now(),h=k1({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Ni(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return k1(k1({},a),this.setMethods(a.eventId))}),Ni(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Ni(this,"setEventListeners",()=>{this.core.heartbeat.on(fw.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{je.fromMiliseconds(Date.now())-je.fromMiliseconds(s.timestamp)>Rje&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Ni(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Ni(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Ni(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Ni(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ni(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,k1(k1({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Ni(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Ni(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${kje}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${fL}${i}`,{method:"POST",body:JSON.stringify(s)})}),Ni(this,"getAppDomain",()=>jse().url),this.logger=bo(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var RWe=Object.defineProperty,PG=Object.getOwnPropertySymbols,kWe=Object.prototype.hasOwnProperty,PWe=Object.prototype.propertyIsEnumerable,CL=(t,e,n)=>e in t?RWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OG=(t,e)=>{for(var n in e||(e={}))kWe.call(e,n)&&CL(t,n,e[n]);if(PG)for(var n of PG(e))PWe.call(e,n)&&CL(t,n,e[n]);return t},es=(t,e,n)=>CL(t,typeof e!="symbol"?e+"":e,n);let OWe=class jie extends s6e{constructor(e){var n;super(e),es(this,"protocol",Iie),es(this,"version",Nie),es(this,"name",hL),es(this,"relayUrl"),es(this,"projectId"),es(this,"customStoragePrefix"),es(this,"events",new ql.EventEmitter),es(this,"logger"),es(this,"heartbeat"),es(this,"relayer"),es(this,"crypto"),es(this,"storage"),es(this,"history"),es(this,"expirer"),es(this,"pairing"),es(this,"verify"),es(this,"echoClient"),es(this,"linkModeSupportedApps"),es(this,"eventClient"),es(this,"initialized",!1),es(this,"logChunkController"),es(this,"on",(a,c)=>this.events.on(a,c)),es(this,"once",(a,c)=>this.events.once(a,c)),es(this,"off",(a,c)=>this.events.off(a,c)),es(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),es(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:ys.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Tie,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=gw({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:XFe.logger,name:hL}),{logger:i,chunkLoggerController:o}=vP({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=bo(i,this.name),this.heartbeat=new nPe,this.crypto=new o7e(this,this.logger,e==null?void 0:e.keychain),this.history=new mWe(this,this.logger),this.expirer=new bWe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new t6e(OG(OG({},eje),e==null?void 0:e.storageOptions)),this.relayer=new O7e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new fWe(this,this.logger),this.verify=new CWe(this,this.logger,this.storage),this.echoClient=new SWe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new TWe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new jie(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(fje,r),n}get context(){return gc(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(hG,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(hG)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&ZFe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const DWe=OWe,Wie="wc",zie=2,Hie="client",U4=`${Wie}@${zie}:${Hie}:`,q3={name:Hie,logger:"error"},DG="WALLETCONNECT_DEEPLINK_CHOICE",MWe="proposal",MG="Proposal expired",BWe="session",Yw=je.SEVEN_DAYS,UWe="engine",xi={wc_sessionPropose:{req:{ttl:je.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:je.ONE_DAY,prompt:!1,tag:1104},res:{ttl:je.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:je.ONE_DAY,prompt:!1,tag:1106},res:{ttl:je.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:je.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:je.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:je.ONE_DAY,prompt:!1,tag:1112},res:{ttl:je.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:je.ONE_DAY,prompt:!1,tag:1114},res:{ttl:je.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:je.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:je.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:je.FIVE_MINUTES,prompt:!1,tag:1119}}},V3={min:je.FIVE_MINUTES,max:je.SEVEN_DAYS},nd={idle:"IDLE",active:"ACTIVE"},BG={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},LWe="request",$We=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],FWe="wc",jWe="auth",WWe="authKeys",zWe="pairingTopics",HWe="requests",$P=`${FWe}@${1.5}:${jWe}:`,_T=`${$P}:PUB_KEY`;var GWe=Object.defineProperty,qWe=Object.defineProperties,VWe=Object.getOwnPropertyDescriptors,UG=Object.getOwnPropertySymbols,KWe=Object.prototype.hasOwnProperty,YWe=Object.prototype.propertyIsEnumerable,_L=(t,e,n)=>e in t?GWe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kr=(t,e)=>{for(var n in e||(e={}))KWe.call(e,n)&&_L(t,n,e[n]);if(UG)for(var n of UG(e))YWe.call(e,n)&&_L(t,n,e[n]);return t},Ko=(t,e)=>qWe(t,VWe(e)),Re=(t,e,n)=>_L(t,typeof e!="symbol"?e+"":e,n);class QWe extends E6e{constructor(e){super(e),Re(this,"name",UWe),Re(this,"events",new g4),Re(this,"initialized",!1),Re(this,"requestQueue",{state:nd.idle,queue:[]}),Re(this,"sessionRequestQueue",{state:nd.idle,queue:[]}),Re(this,"requestQueueDelay",je.ONE_SECOND),Re(this,"expectedPairingMethodMap",new Map),Re(this,"recentlyDeletedMap",new Map),Re(this,"recentlyDeletedLimit",200),Re(this,"relayMessageCache",[]),Re(this,"pendingSessions",new Map),Re(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(xi)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},je.toMiliseconds(this.requestQueueDelay)))}),Re(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Ko(Kr({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=bFe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const k=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=k.active}}catch(k){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),k}if(!u||!h){const{topic:k,uri:P}=await this.client.core.pairing.create();u=k,d=P}if(!u){const{message:k}=Ge("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(k)}const f=await this.client.core.crypto.generateKeyPair(),p=xi.wc_sessionPropose.req.ttl||je.FIVE_MINUTES,g=pi(p),m=Ko(Kr(Kr({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:xie}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:ud()}),y=Ir("session_connect",m.id),{reject:w,resolve:C,done:N}=Qm(p,MG),I=({id:k})=>{k===m.id&&(this.client.events.off("proposal_expire",I),this.pendingSessions.delete(m.id),this.events.emit(y,{error:{message:MG,code:0}}))};return this.client.events.on("proposal_expire",I),this.events.once(y,({error:k,session:P})=>{this.client.events.off("proposal_expire",I),k?w(k):P&&C(P)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:N}}),Re(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Re(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[tu.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(M){throw o.setError(Um.no_internet_connection),M}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(M){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Um.proposal_not_found),M}try{await this.isValidApprove(n)}catch(M){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Um.session_approve_namespace_validation_failure),M}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:m,optionalNamespaces:y}=f;let w=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});w||(w=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:tu.session_approve_started,properties:{topic:p,trace:[tu.session_approve_started,tu.session_namespaces_validation_success]}}));const C=await this.client.core.crypto.generateKeyPair(),N=g.publicKey,I=await this.client.core.crypto.generateSharedKey(C,N),k=Kr(Kr(Kr({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:C,metadata:this.client.metadata},expiry:pi(Yw)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),P=ys.relay;w.addTrace(tu.subscribing_session_topic);try{await this.client.core.relayer.subscribe(I,{transportType:P})}catch(M){throw w.setError(Um.subscribe_session_topic_failure),M}w.addTrace(tu.subscribe_session_topic_success);const U=Ko(Kr({},k),{topic:I,requiredNamespaces:m,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:k.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:C,transportType:ys.relay});await this.client.session.set(I,U),w.addTrace(tu.store_session);try{w.addTrace(tu.publishing_session_settle),await this.sendRequest({topic:I,method:"wc_sessionSettle",params:k,throwOnFailedPublish:!0}).catch(M=>{throw w==null||w.setError(Um.session_settle_publish_failure),M}),w.addTrace(tu.session_settle_publish_success),w.addTrace(tu.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:C},throwOnFailedPublish:!0}).catch(M=>{throw w==null||w.setError(Um.session_approve_publish_failure),M}),w.addTrace(tu.session_approve_publish_success)}catch(M){throw this.client.logger.error(M),this.client.session.delete(I,Wr("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(I),M}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Wr("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(I,pi(Yw)),{topic:I,acknowledged:()=>Promise.resolve(this.client.session.get(I))}}),Re(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:xi.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Wr("USER_DISCONNECTED")))}),Re(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Qm(),c=ud(),l=Ay().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Ir("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),Re(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=ud(),{done:i,resolve:o,reject:a}=Qm();return this.events.once(Ir("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,pi(Yw)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),Re(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=xi.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===ys.relay&&await this.confirmOnlineStateOrThrow();const c=ud(),l=Ay().toString(),{done:u,resolve:d,reject:h}=Qm(o,"Request expired. Please try again.");this.events.once(Ir("session_request",c),({error:y,result:w})=>{y?h(y):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Ko(Kr({},s),{expiryTimestamp:pi(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:Ko(Kr({},s),{expiryTimestamp:pi(o)}),chainId:r},m=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(Kr({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},m&&{tvf:this.getTVFParams(c,g)})).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const C=await P8e(this.client.core.storage,DG);await T8e({id:c,topic:i,wcDeepLink:C})}y()}),u()]).then(y=>y[2])}),Re(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===ys.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);dd(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Al(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),Re(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=ud(),i=Ay().toString(),{done:o,resolve:a,reject:c}=Qm();this.events.once(Ir("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Re(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Ay().toString(),a=ud();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Re(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Wr("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Ge("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),Re(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>CFe(r,n)))),Re(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Re(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?ys.link_mode:ys.relay;o===ys.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:m}=n,y=[...n.resources||[]],{topic:w,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:C}});const N=await this.client.core.crypto.generateKeyPair(),I=ET(N);if(await Promise.all([this.client.auth.authKeys.set(_T,{responseTopic:I,publicKey:N}),this.client.auth.pairingTopics.set(I,{topic:I,pairingTopic:w})]),await this.client.core.relayer.subscribe(I,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),g.length>0){const{namespace:B}=dv(a[0]);let W=A$e(B,"request",g);vT(y)&&(W=I$e(W,y.pop())),y.push(W)}const k=m&&m>xi.wc_sessionAuthenticate.req.ttl?m:xi.wc_sessionAuthenticate.req.ttl,P={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:pi(k)},U={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},M={requiredNamespaces:{},optionalNamespaces:U,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:pi(xi.wc_sessionPropose.req.ttl),id:ud()},{done:H,resolve:j,reject:K}=Qm(k,"Request expired"),$=ud(),v=Ir("session_connect",M.id),E=Ir("session_request",$),_=async({error:B,session:W})=>{this.events.off(E,D),B?K(B):W&&j({session:W})},D=async B=>{var W,L,S;if(await this.deletePendingAuthRequest($,{message:"fulfilled",code:0}),B.error){const Be=Wr("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return B.error.code===Be.code?void 0:(this.events.off(v,_),K(B.error.message))}await this.deleteProposal(M.id),this.events.off(v,_);const{cacaos:F,responder:X}=B.result,se=[],ge=[];for(const Be of F){await kH({cacao:Be,projectId:this.client.core.projectId})||(this.client.logger.error(Be,"Signature verification failed"),K(Wr("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Ut}=Be,lt=vT(Ut.resources),st=[nL(Ut.iss)],ce=fk(Ut.iss);if(lt){const ae=PH(lt),_e=OH(lt);se.push(...ae),st.push(..._e)}for(const ae of st)ge.push(`${ae}:${ce}`)}const Ue=await this.client.core.crypto.generateSharedKey(N,X.publicKey);let Le;se.length>0&&(Le={topic:Ue,acknowledged:!0,self:{publicKey:N,metadata:this.client.metadata},peer:X,controller:X.publicKey,expiry:pi(Yw),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:sG([...new Set(se)],[...new Set(ge)]),transportType:o},await this.client.core.relayer.subscribe(Ue,{transportType:o}),await this.client.session.set(Ue,Le),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:X.metadata}),Le=this.client.session.get(Ue)),(W=this.client.metadata.redirect)!=null&&W.linkMode&&(L=X.metadata.redirect)!=null&&L.linkMode&&(S=X.metadata.redirect)!=null&&S.universal&&r&&(this.client.core.addLinkModeSupportedApp(X.metadata.redirect.universal),this.client.session.update(Ue,{transportType:ys.link_mode})),j({auths:F,session:Le})};this.events.once(v,_),this.events.once(E,D);let x;try{if(i){const B=bg("wc_sessionAuthenticate",P,$);this.client.core.history.set(w,B);const W=await this.client.core.crypto.encode("",B,{type:ZI,encoding:$p});x=wx(r,w,W)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:P,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:$}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:M,expiry:xi.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:M.id})])}catch(B){throw this.events.off(v,_),this.events.off(E,D),B}return await this.setProposal(M.id,M),await this.setAuthRequest($,{request:Ko(Kr({},P),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:x??C,response:H}}),Re(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Lm.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw i.setError(T1.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(T1.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||ys.relay;a===ys.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=ET(c),d={type:vf,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const m of s){if(!await kH({cacao:m,projectId:this.client.core.projectId})){i.setError(T1.invalid_cacao);const I=Wr("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:I,encodeOpts:d}),new Error(I.message)}i.addTrace(Lm.cacaos_verified);const{p:y}=m,w=vT(y.resources),C=[nL(y.iss)],N=fk(y.iss);if(w){const I=PH(w),k=OH(w);h.push(...I),C.push(...k)}for(const I of C)f.push(`${I}:${N}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Lm.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:pi(Yw),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:sG([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Lm.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(m){throw i.setError(T1.subscribe_authenticated_session_topic_failure),m}i.addTrace(Lm.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Lm.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Lm.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw i.setError(T1.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),Re(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===ys.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=ET(o),l={type:vf,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:xi.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Wr("USER_DISCONNECTED"))}),Re(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return Xse(r,s)}),Re(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),Re(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Re(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Wr("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(DG).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Wr("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=nd.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),Re(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Um.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Wr("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),Re(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=nd.idle,this.client.events.emit("session_request_expire",{id:n}))}),Re(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),Re(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),Re(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,pi(xi.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),Re(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=ys.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Re(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||pi(xi.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),Re(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=bg(s,i,c);let f;const p=!!u;try{const y=p?$p:Ru;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if($We.includes(s)){const y=Nd(JSON.stringify(h)),w=Nd(f);g=await this.client.core.verify.register({id:w,decryptedId:y})}const m=xi[s].req;if(m.attestation=g,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,h),p){const y=wx(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=xi[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=Ko(Kr({},d),{correlationId:h.id}),l?(y.internal=Ko(Kr({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(w=>this.client.logger.error(w))}return h.id}),Re(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=SP(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?$p:Ru;u=await this.client.core.crypto.encode(s,l,Ko(Kr({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=wx(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=xi[p].res;g.tvf=Ko(Kr({},f),{correlationId:r}),o?(g.internal=Ko(Kr({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),Re(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=IP(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?$p:Ru;u=await this.client.core.crypto.encode(s,l,Ko(Kr({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=wx(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||xi[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),Re(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Op(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Op(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),Re(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),Re(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),Re(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===nd.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=nd.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=nd.idle}),Re(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Re(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Re(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Ge("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Re(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Re(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Dh.proposal_listener_not_found)),this.isValidConnect(Kr({},s.params));const u=a.expiryTimestamp||pi(xi.wc_sessionPropose.req.ttl),d=Kr({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Nd(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(ad.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:xi.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),Re(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(dd(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Al(r)){await this.client.proposal.delete(i,Wr("USER_DISCONNECTED"));const o=Ir("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),Re(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=Ko(Kr(Kr(Kr({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:ys.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Ir("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Re(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;dd(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Ir("session_approve",s),{})):Al(r)&&(await this.client.session.delete(n,Wr("USER_DISCONNECTED")),this.events.emit(Ir("session_approve",s),{error:r.error}))}),Re(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=N1.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Wr("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Kr({topic:n},s));try{N1.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw N1.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Re(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),Re(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Ir("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);dd(r)?this.events.emit(Ir("session_update",s),{}):Al(r)&&this.events.emit(Ir("session_update",s),{error:r.error})}),Re(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,pi(Yw)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Re(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Ir("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);dd(r)?this.events.emit(Ir("session_extend",s),{}):Al(r)&&this.events.emit(Ir("session_extend",s),{error:r.error})}),Re(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Re(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Ir("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);dd(r)?this.events.emit(Ir("session_ping",s),{}):Al(r)&&this.events.emit(Ir("session_ping",s),{error:r.error})},500)}),Re(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Li.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Wr("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),Re(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Kr({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Nd(JSON.stringify(bg("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===ys.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),Re(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Ir("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);dd(r)?this.events.emit(Ir("session_request",s),{result:r.result}):Al(r)&&this.events.emit(Ir("session_request",s),{error:r.error})}),Re(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=N1.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Kr({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),N1.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Re(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),dd(r)?this.events.emit(Ir("session_request",s),{result:r.result}):Al(r)&&this.events.emit(Ir("session_request",s),{error:r.error})}),Re(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Nd(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===ys.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:vf,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:xi.wc_sessionAuthenticate.autoReject,appLink:h})}}),Re(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),Re(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=nd.idle,this.processSessionRequestQueue()},je.toMiliseconds(this.requestQueueDelay))}),Re(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Ir("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Ir("session_request",i.request.id),{error:r})})}),Re(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===nd.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=nd.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),Re(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),Re(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:bg("wc_sessionPropose",Ko(Kr({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),Re(this,"isValidConnect",async n=>{if(!La(n)){const{message:l}=Ge("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(ao(r)||await this.isValidPairingTopic(r),!DFe(c)){const{message:l}=Ge("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!ao(s)&&Kg(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!ao(i)&&Kg(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),ao(o)||this.validateSessionProps(o,"sessionProperties"),!ao(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),Re(this,"validateNamespaces",(n,r)=>{const s=OFe(n,"connect()",r);if(s)throw new Error(s.message)}),Re(this,"isValidApprove",async n=>{if(!La(n))throw new Error(Ge("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=F3(s,"approve()");if(l)throw new Error(l.message);const u=aG(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!ai(i,!0)){const{message:d}=Ge("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(ao(o)||this.validateSessionProps(o,"sessionProperties"),!ao(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),Re(this,"isValidReject",async n=>{if(!La(n)){const{message:i}=Ge("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!BFe(s)){const{message:i}=Ge("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Re(this,"isValidSessionSettleRequest",n=>{if(!La(n)){const{message:l}=Ge("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!Sie(r)){const{message:l}=Ge("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=NFe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=F3(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Op(o)){const{message:l}=Ge("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),Re(this,"isValidUpdate",async n=>{if(!La(n)){const{message:c}=Ge("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=F3(s,"update()");if(o)throw new Error(o.message);const a=aG(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),Re(this,"isValidExtend",async n=>{if(!La(n)){const{message:s}=Ge("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Re(this,"isValidRequest",async n=>{if(!La(n)){const{message:c}=Ge("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!oG(a,i)){const{message:c}=Ge("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!UFe(s)){const{message:c}=Ge("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!FFe(a,i,s.method)){const{message:c}=Ge("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!HFe(o,V3)){const{message:c}=Ge("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${V3.min} and ${V3.max}`);throw new Error(c)}}),Re(this,"isValidRespond",async n=>{var r;if(!La(n)){const{message:o}=Ge("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!LFe(i)){const{message:o}=Ge("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),Re(this,"isValidPing",async n=>{if(!La(n)){const{message:s}=Ge("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Re(this,"isValidEmit",async n=>{if(!La(n)){const{message:a}=Ge("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!oG(o,i)){const{message:a}=Ge("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!$Fe(s)){const{message:a}=Ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!jFe(o,i,s.name)){const{message:a}=Ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),Re(this,"isValidDisconnect",async n=>{if(!La(n)){const{message:s}=Ge("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Re(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!ai(s,!1))throw new Error("uri is required parameter");if(!ai(i,!1))throw new Error("domain is required parameter");if(!ai(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>dv(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=dv(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Re(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||H_,validation:"UNKNOWN",origin:o.url||""}};try{if(a===ys.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Re(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Ge("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),Re(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),Re(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Re(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Ge("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),Re(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==ys.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Re(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),Re(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=CH(n,"topic")||"",s=decodeURIComponent(CH(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:ys.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),Re(this,"registerLinkModeListeners",async()=>{var n;if(T4()||Nm()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Re(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(BG).includes(s.method)}),Re(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return Ko(Kr({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),Re(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Re(this,"extractTxHashesFromResult",(n,r)=>{try{const s=BG[n];if(typeof r=="string")return[r];const i=r[s.key];if(Vg(i))return n==="solana_signAllTransactions"?i.map(o=>u$e(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Li.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(_T)?this.client.auth.authKeys.get(_T):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===ys.link_mode?$p:Ru});N4(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Nd(r)})):NP(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(gl.expired,async e=>{const{topic:n,id:r}=Hse(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ge("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ge("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(iy.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(iy.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!ai(e,!1)){const{message:n}=Ge("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Op(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Ge("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!ai(e,!1)){const{message:n}=Ge("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Ge("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Op(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Ge("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Ge("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(ai(e,!1)){const{message:n}=Ge("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Ge("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!MFe(e)){const{message:n}=Ge("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Ge("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Op(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Ge("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class JWe extends yw{constructor(e,n){super(e,n,MWe,U4),this.core=e,this.logger=n}}let ZWe=class extends yw{constructor(e,n){super(e,n,BWe,U4),this.core=e,this.logger=n}};class XWe extends yw{constructor(e,n){super(e,n,LWe,U4,r=>r.id),this.core=e,this.logger=n}}class eze extends yw{constructor(e,n){super(e,n,WWe,$P,()=>_T),this.core=e,this.logger=n}}class tze extends yw{constructor(e,n){super(e,n,zWe,$P),this.core=e,this.logger=n}}class nze extends yw{constructor(e,n){super(e,n,HWe,$P,r=>r.id),this.core=e,this.logger=n}}var rze=Object.defineProperty,sze=(t,e,n)=>e in t?rze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K3=(t,e,n)=>sze(t,typeof e!="symbol"?e+"":e,n);class ize{constructor(e,n){this.core=e,this.logger=n,K3(this,"authKeys"),K3(this,"pairingTopics"),K3(this,"requests"),this.authKeys=new eze(this.core,this.logger),this.pairingTopics=new tze(this.core,this.logger),this.requests=new nze(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var oze=Object.defineProperty,aze=(t,e,n)=>e in t?oze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kn=(t,e,n)=>aze(t,typeof e!="symbol"?e+"":e,n);let cze=class Gie extends v6e{constructor(e){super(e),Kn(this,"protocol",Wie),Kn(this,"version",zie),Kn(this,"name",q3.name),Kn(this,"metadata"),Kn(this,"core"),Kn(this,"logger"),Kn(this,"events",new ql.EventEmitter),Kn(this,"engine"),Kn(this,"session"),Kn(this,"proposal"),Kn(this,"pendingRequest"),Kn(this,"auth"),Kn(this,"signConfig"),Kn(this,"on",(r,s)=>this.events.on(r,s)),Kn(this,"once",(r,s)=>this.events.once(r,s)),Kn(this,"off",(r,s)=>this.events.off(r,s)),Kn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Kn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Kn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Kn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Kn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Kn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||q3.name,this.metadata=_8e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:WI(gw({level:(e==null?void 0:e.logger)||q3.logger}));this.core=(e==null?void 0:e.core)||new DWe(e),this.logger=bo(n,this.name),this.session=new ZWe(this.core,this.logger),this.proposal=new JWe(this.core,this.logger),this.pendingRequest=new XWe(this.core,this.logger),this.engine=new QWe(this),this.auth=new ize(this.core,this.logger)}static async init(e){const n=new Gie(e);return await n.initialize(),n}get context(){return gc(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},je.toMiliseconds(je.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const LG="error",lze="wss://relay.walletconnect.org",uze="wc",dze="universal_provider",vx=`${uze}@2:${dze}:`,qie="https://rpc.walletconnect.org/v1/",bb="generic",hze=`${qie}bundler`,Kl={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function fze(){}function L4(t){return t==null||typeof t!="object"&&typeof t!="function"}function $4(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function pze(t){if(L4(t))return t;if(Array.isArray(t)||$4(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function $G(t){return typeof t=="object"&&t!==null}function Vie(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Kie(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const gze="[object RegExp]",Yie="[object String]",Qie="[object Number]",Jie="[object Boolean]",Zie="[object Arguments]",mze="[object Symbol]",yze="[object Date]",wze="[object Map]",bze="[object Set]",vze="[object Array]",Eze="[object ArrayBuffer]",Cze="[object Object]",_ze="[object DataView]",Aze="[object Uint8Array]",Sze="[object Uint8ClampedArray]",Ize="[object Uint16Array]",Nze="[object Uint32Array]",xze="[object Int8Array]",Tze="[object Int16Array]",Rze="[object Int32Array]",kze="[object Float32Array]",Pze="[object Float64Array]";function Oze(t,e){return Hb(t,void 0,t,new Map,e)}function Hb(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(L4(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Hb(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Hb(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Hb(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if($4(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Hb(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),oy(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),oy(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),oy(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,oy(o,t,n,r,s),o}if(typeof t=="object"&&Dze(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),oy(o,t,n,r,s),o}return t}function oy(t,e,n=t,r,s){const i=[...Object.keys(e),...Vie(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Hb(e[a],a,n,r,s))}}function Dze(t){switch(Kie(t)){case Zie:case vze:case Eze:case _ze:case Jie:case yze:case kze:case Pze:case xze:case Tze:case Rze:case wze:case Qie:case Cze:case gze:case bze:case Yie:case mze:case Aze:case Sze:case Ize:case Nze:return!0;default:return!1}}function Mze(t,e){return Oze(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case Qie:case Yie:case Jie:{const o=new t.constructor(t==null?void 0:t.valueOf());return oy(o,t),o}case Zie:{const o={};return oy(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function FG(t){return Mze(t)}function jG(t){return t!==null&&typeof t=="object"&&Kie(t)==="[object Arguments]"}function Bze(t){return $4(t)}function Uze(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Lze(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=AL(s,o,r,new Map)}return s}function AL(t,e,n,r){if(L4(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return pze(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...Vie(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(jG(a)&&(a={...a}),jG(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=FG(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||$G(c)&&$G(a)?t[o]=AL(c,a,n,r):c==null&&Uze(a)?t[o]=AL({},a,n,r):c==null&&Bze(a)?t[o]=FG(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function $ze(t,...e){return Lze(t,...e,fze)}var Fze=Object.defineProperty,jze=Object.defineProperties,Wze=Object.getOwnPropertyDescriptors,WG=Object.getOwnPropertySymbols,zze=Object.prototype.hasOwnProperty,Hze=Object.prototype.propertyIsEnumerable,zG=(t,e,n)=>e in t?Fze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ex=(t,e)=>{for(var n in e||(e={}))zze.call(e,n)&&zG(t,n,e[n]);if(WG)for(var n of WG(e))Hze.call(e,n)&&zG(t,n,e[n]);return t},Gze=(t,e)=>jze(t,Wze(e));function Qc(t,e,n){var r;const s=dv(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${qie}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function ww(t){return t.includes(":")?t.split(":")[1]:t}function Xie(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function qze(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Cx(t={},e={}){const n=HG(t),r=HG(e);return $ze(n,r)}function HG(t){var e,n,r,s,i;const o={};if(!Kg(t))return o;for(const[a,c]of Object.entries(t)){const l=UP(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=zb(a);o[f]=Gze(Ex(Ex({},o[f]),c),{chains:Gd(l,(e=o[f])==null?void 0:e.chains),methods:Gd(u,(n=o[f])==null?void 0:n.methods),events:Gd(d,(r=o[f])==null?void 0:r.events)}),(Kg(h)||Kg(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Ex(Ex({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function GG(t){return t.includes(":")?t.split(":")[2]:t}function qG(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=UP(n)?[n]:r.chains?r.chains:Xie(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function Y3(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const eoe={},gr=t=>eoe[t],Q3=(t,e)=>{eoe[t]=e};var Vze=Object.defineProperty,Kze=(t,e,n)=>e in t?Vze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qw=(t,e,n)=>Kze(t,typeof e!="symbol"?e+"":e,n);class Yze{constructor(e){Qw(this,"name","polkadot"),Qw(this,"client"),Qw(this,"httpProviders"),Qw(this,"events"),Qw(this,"namespace"),Qw(this,"chainId"),this.namespace=e.namespace,this.events=gr("events"),this.client=gr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Kl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ww(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vl(new Hu(r,gr("disableProviderPing")))}}var Qze=Object.defineProperty,Jze=Object.defineProperties,Zze=Object.getOwnPropertyDescriptors,VG=Object.getOwnPropertySymbols,Xze=Object.prototype.hasOwnProperty,eHe=Object.prototype.propertyIsEnumerable,SL=(t,e,n)=>e in t?Qze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,KG=(t,e)=>{for(var n in e||(e={}))Xze.call(e,n)&&SL(t,n,e[n]);if(VG)for(var n of VG(e))eHe.call(e,n)&&SL(t,n,e[n]);return t},YG=(t,e)=>Jze(t,Zze(e)),Jw=(t,e,n)=>SL(t,typeof e!="symbol"?e+"":e,n);class tHe{constructor(e){Jw(this,"name","eip155"),Jw(this,"client"),Jw(this,"chainId"),Jw(this,"namespace"),Jw(this,"httpProviders"),Jw(this,"events"),this.namespace=e.namespace,this.events=gr("events"),this.client=gr("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Kl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Qc(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vl(new Hu(r,gr("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(ww(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:YG(KG({},u.sessionProperties||{}),{capabilities:YG(KG({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(bg("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${hze}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var nHe=Object.defineProperty,rHe=(t,e,n)=>e in t?nHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zw=(t,e,n)=>rHe(t,typeof e!="symbol"?e+"":e,n);class sHe{constructor(e){Zw(this,"name","solana"),Zw(this,"client"),Zw(this,"httpProviders"),Zw(this,"events"),Zw(this,"namespace"),Zw(this,"chainId"),this.namespace=e.namespace,this.events=gr("events"),this.client=gr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Kl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ww(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vl(new Hu(r,gr("disableProviderPing")))}}var iHe=Object.defineProperty,oHe=(t,e,n)=>e in t?iHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xw=(t,e,n)=>oHe(t,typeof e!="symbol"?e+"":e,n);class aHe{constructor(e){Xw(this,"name","cosmos"),Xw(this,"client"),Xw(this,"httpProviders"),Xw(this,"events"),Xw(this,"namespace"),Xw(this,"chainId"),this.namespace=e.namespace,this.events=gr("events"),this.client=gr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Kl.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ww(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vl(new Hu(r,gr("disableProviderPing")))}}var cHe=Object.defineProperty,lHe=(t,e,n)=>e in t?cHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eb=(t,e,n)=>lHe(t,typeof e!="symbol"?e+"":e,n);class uHe{constructor(e){eb(this,"name","algorand"),eb(this,"client"),eb(this,"httpProviders"),eb(this,"events"),eb(this,"namespace"),eb(this,"chainId"),this.namespace=e.namespace,this.events=gr("events"),this.client=gr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Qc(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Kl.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qc(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Vl(new Hu(r,gr("disableProviderPing")))}}var dHe=Object.defineProperty,hHe=(t,e,n)=>e in t?dHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tb=(t,e,n)=>hHe(t,typeof e!="symbol"?e+"":e,n);class fHe{constructor(e){tb(this,"name","cip34"),tb(this,"client"),tb(this,"httpProviders"),tb(this,"events"),tb(this,"namespace"),tb(this,"chainId"),this.namespace=e.namespace,this.events=gr("events"),this.client=gr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Kl.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=ww(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vl(new Hu(r,gr("disableProviderPing")))}}var pHe=Object.defineProperty,gHe=(t,e,n)=>e in t?pHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nb=(t,e,n)=>gHe(t,typeof e!="symbol"?e+"":e,n);class mHe{constructor(e){nb(this,"name","elrond"),nb(this,"client"),nb(this,"httpProviders"),nb(this,"events"),nb(this,"namespace"),nb(this,"chainId"),this.namespace=e.namespace,this.events=gr("events"),this.client=gr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Kl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ww(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vl(new Hu(r,gr("disableProviderPing")))}}var yHe=Object.defineProperty,wHe=(t,e,n)=>e in t?yHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rb=(t,e,n)=>wHe(t,typeof e!="symbol"?e+"":e,n);class bHe{constructor(e){rb(this,"name","multiversx"),rb(this,"client"),rb(this,"httpProviders"),rb(this,"events"),rb(this,"namespace"),rb(this,"chainId"),this.namespace=e.namespace,this.events=gr("events"),this.client=gr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Kl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ww(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vl(new Hu(r,gr("disableProviderPing")))}}var vHe=Object.defineProperty,EHe=(t,e,n)=>e in t?vHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sb=(t,e,n)=>EHe(t,typeof e!="symbol"?e+"":e,n);class CHe{constructor(e){sb(this,"name","near"),sb(this,"client"),sb(this,"httpProviders"),sb(this,"events"),sb(this,"namespace"),sb(this,"chainId"),this.namespace=e.namespace,this.events=gr("events"),this.client=gr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Qc(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Kl.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qc(e,this.namespace);return typeof r>"u"?void 0:new Vl(new Hu(r,gr("disableProviderPing")))}}var _He=Object.defineProperty,AHe=(t,e,n)=>e in t?_He(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ib=(t,e,n)=>AHe(t,typeof e!="symbol"?e+"":e,n);class SHe{constructor(e){ib(this,"name","tezos"),ib(this,"client"),ib(this,"httpProviders"),ib(this,"events"),ib(this,"namespace"),ib(this,"chainId"),this.namespace=e.namespace,this.events=gr("events"),this.client=gr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Qc(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Kl.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qc(e,this.namespace);return typeof r>"u"?void 0:new Vl(new Hu(r))}}var IHe=Object.defineProperty,NHe=(t,e,n)=>e in t?IHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ob=(t,e,n)=>NHe(t,typeof e!="symbol"?e+"":e,n);class xHe{constructor(e){ob(this,"name",bb),ob(this,"client"),ob(this,"httpProviders"),ob(this,"events"),ob(this,"namespace"),ob(this,"chainId"),this.namespace=e.namespace,this.events=gr("events"),this.client=gr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Kl.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=dv(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Qc(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Vl(new Hu(r,gr("disableProviderPing")))}}var THe=Object.defineProperty,RHe=Object.defineProperties,kHe=Object.getOwnPropertyDescriptors,QG=Object.getOwnPropertySymbols,PHe=Object.prototype.hasOwnProperty,OHe=Object.prototype.propertyIsEnumerable,IL=(t,e,n)=>e in t?THe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_x=(t,e)=>{for(var n in e||(e={}))PHe.call(e,n)&&IL(t,n,e[n]);if(QG)for(var n of QG(e))OHe.call(e,n)&&IL(t,n,e[n]);return t},J3=(t,e)=>RHe(t,kHe(e)),al=(t,e,n)=>IL(t,typeof e!="symbol"?e+"":e,n);let DHe=class toe{constructor(e){al(this,"client"),al(this,"namespaces"),al(this,"optionalNamespaces"),al(this,"sessionProperties"),al(this,"scopedProperties"),al(this,"events",new g4),al(this,"rpcProviders",{}),al(this,"session"),al(this,"providerOpts"),al(this,"logger"),al(this,"uri"),al(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:WI(gw({level:(e==null?void 0:e.logger)||LG})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new toe(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:_x({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,SP(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Wr("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=qG(this.session.namespaces);this.namespaces=Cx(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=qG(s.namespaces);return this.namespaces=Cx(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===bb?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Vg(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await cze.init({core:this.providerOpts.core,logger:this.providerOpts.logger||LG,relayUrl:this.providerOpts.relayUrl||lze,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>zb(n)))];Q3("client",this.client),Q3("events",this.events),Q3("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=qze(n,this.session),s=Xie(r),i=Cx(this.namespaces,this.optionalNamespaces),o=J3(_x({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new tHe({namespace:o});break;case"algorand":this.rpcProviders[n]=new uHe({namespace:o});break;case"solana":this.rpcProviders[n]=new sHe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new aHe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new Yze({namespace:o});break;case"cip34":this.rpcProviders[n]=new fHe({namespace:o});break;case"elrond":this.rpcProviders[n]=new mHe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new bHe({namespace:o});break;case"near":this.rpcProviders[n]=new CHe({namespace:o});break;case"tezos":this.rpcProviders[n]=new SHe({namespace:o});break;default:this.rpcProviders[bb]?this.rpcProviders[bb].updateNamespace(o):this.rpcProviders[bb]=new xHe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Vg(o)&&this.events.emit("accountsChanged",o.map(GG))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=zb(o),l=Y3(o)!==Y3(a)?`${c}:${Y3(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=J3(_x({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",J3(_x({},Wr("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Kl.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[bb]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Cx(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>zb(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=zb(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(GG);if(!Vg(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${vx}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${vx}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${vx}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(vx)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var JG={};const MHe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof JG<"u"?JG.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},NL={filterOutDuplicatesByRDNS(t){const e=Pe.state.enableEIP6963?ht.state.connectors:[],n=Ct.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&$t.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=ht.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Ct.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ht.state,{featuredWalletIds:n}=Pe.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=Pe.state.features)==null?void 0:c.connectMethodsOrder),r=e||ht.state.connectors;if(n)return n;const{injected:s,announced:i}=AT.getConnectorsByType(r,jt.state.recommended,jt.state.featured),o=s.filter(AT.showConnector),a=i.filter(AT.showConnector);return o.length||a.length?["wallet","email","social"]:MHe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&jt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&jt.state.excludedWallets.some(r=>xP.isLowerCaseMatch(r.name,t.name));return e||n}},AT={getConnectorsByType(t,e,n){const{customWallets:r}=Pe.state,s=Ct.getRecentWallets(),i=NL.filterOutDuplicateWallets(e),o=NL.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&jt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&jt.state.excludedWallets.some(i=>xP.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!$t.isMobile()||$t.isMobile()&&!e&&!Zt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(J.state.chains.values()).some(n=>ht.getConnectorId(n.namespace)===ft.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=Pe.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=AT.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:Pe.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),m=f.filter(({type:y})=>!g.some(({type:C})=>C===y));return Array.from(new Set([...g,...m].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ST=globalThis,F4=ST.ShadowRoot&&(ST.ShadyCSS===void 0||ST.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,j4=Symbol(),ZG=new WeakMap;let noe=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==j4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(F4&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=ZG.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&ZG.set(n,e))}return e}toString(){return this.cssText}};const hl=t=>new noe(typeof t=="string"?t:t+"",void 0,j4),Dl=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new noe(n,t,j4)},BHe=(t,e)=>{if(F4)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=ST.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},XG=F4?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return hl(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:UHe,defineProperty:LHe,getOwnPropertyDescriptor:$He,getOwnPropertyNames:FHe,getOwnPropertySymbols:jHe,getPrototypeOf:WHe}=Object,Yg=globalThis,eq=Yg.trustedTypes,zHe=eq?eq.emptyScript:"",Z3=Yg.reactiveElementPolyfillSupport,q_=(t,e)=>t,xL={toAttribute(t,e){switch(e){case Boolean:t=t?zHe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},roe=(t,e)=>!UHe(t,e),tq={attribute:!0,type:String,converter:xL,reflect:!1,useDefault:!1,hasChanged:roe};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Yg.litPropertyMetadata??(Yg.litPropertyMetadata=new WeakMap);let vb=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=tq){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&LHe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=$He(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??tq}static _$Ei(){if(this.hasOwnProperty(q_("elementProperties")))return;const e=WHe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(q_("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(q_("properties"))){const n=this.properties,r=[...FHe(n),...jHe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(XG(s))}else e!==void 0&&n.push(XG(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return BHe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:xL).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:xL;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??roe)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};vb.elementStyles=[],vb.shadowRootOptions={mode:"open"},vb[q_("elementProperties")]=new Map,vb[q_("finalized")]=new Map,Z3==null||Z3({ReactiveElement:vb}),(Yg.reactiveElementVersions??(Yg.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const V_=globalThis,mk=V_.trustedTypes,nq=mk?mk.createPolicy("lit-html",{createHTML:t=>t}):void 0,soe="$lit$",Fp=`lit$${Math.random().toFixed(9).slice(2)}$`,ioe="?"+Fp,HHe=`<${ioe}>`,V0=document,_S=()=>V0.createComment(""),AS=t=>t===null||typeof t!="object"&&typeof t!="function",W4=Array.isArray,GHe=t=>W4(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",X3=`[ 	
\f\r]`,P1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,rq=/-->/g,sq=/>/g,$m=RegExp(`>|${X3}(?:([^\\s"'>=/]+)(${X3}*=${X3}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),iq=/'/g,oq=/"/g,ooe=/^(?:script|style|textarea|title)$/i,aoe=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),pat=aoe(1),gat=aoe(2),ZE=Symbol.for("lit-noChange"),$i=Symbol.for("lit-nothing"),aq=new WeakMap,Iy=V0.createTreeWalker(V0,129);function coe(t,e){if(!W4(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return nq!==void 0?nq.createHTML(e):e}const qHe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=P1;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===P1?u[1]==="!--"?o=rq:u[1]!==void 0?o=sq:u[2]!==void 0?(ooe.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=$m):u[3]!==void 0&&(o=$m):o===$m?u[0]===">"?(o=s??P1,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?$m:u[3]==='"'?oq:iq):o===oq||o===iq?o=$m:o===rq||o===sq?o=P1:(o=$m,s=void 0);const f=o===$m&&t[a+1].startsWith("/>")?" ":"";i+=o===P1?c+HHe:d>=0?(r.push(l),c.slice(0,d)+soe+c.slice(d)+Fp+f):c+Fp+(d===-2?a:f)}return[coe(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class SS{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=qHe(e,n);if(this.el=SS.createElement(l,r),Iy.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Iy.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(soe)){const h=u[o++],f=s.getAttribute(d).split(Fp),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?KHe:p[1]==="?"?YHe:p[1]==="@"?QHe:FP}),s.removeAttribute(d)}else d.startsWith(Fp)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(ooe.test(s.tagName)){const d=s.textContent.split(Fp),h=d.length-1;if(h>0){s.textContent=mk?mk.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],_S()),Iy.nextNode(),c.push({type:2,index:++i});s.append(d[h],_S())}}}else if(s.nodeType===8)if(s.data===ioe)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Fp,d+1))!==-1;)c.push({type:7,index:i}),d+=Fp.length-1}i++}}static createElement(e,n){const r=V0.createElement("template");return r.innerHTML=e,r}}function XE(t,e,n=t,r){var o,a;if(e===ZE)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=AS(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=XE(t,s._$AS(t,e.values),s,r)),e}class VHe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??V0).importNode(n,!0);Iy.currentNode=s;let i=Iy.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new eN(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new JHe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Iy.nextNode(),o++)}return Iy.currentNode=V0,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class eN{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=$i,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=XE(this,e,n),AS(e)?e===$i||e==null||e===""?(this._$AH!==$i&&this._$AR(),this._$AH=$i):e!==this._$AH&&e!==ZE&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):GHe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==$i&&AS(this._$AH)?this._$AA.nextSibling.data=e:this.T(V0.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=SS.createElement(coe(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new VHe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=aq.get(e.strings);return n===void 0&&aq.set(e.strings,n=new SS(e)),n}k(e){W4(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new eN(this.O(_S()),this.O(_S()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class FP{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=$i,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=$i}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=XE(this,e,n,0),o=!AS(e)||e!==this._$AH&&e!==ZE,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=XE(this,a[r+c],n,c),l===ZE&&(l=this._$AH[c]),o||(o=!AS(l)||l!==this._$AH[c]),l===$i?e=$i:e!==$i&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===$i?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class KHe extends FP{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===$i?void 0:e}}class YHe extends FP{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==$i)}}class QHe extends FP{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=XE(this,e,n,0)??$i)===ZE)return;const r=this._$AH,s=e===$i&&r!==$i||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==$i&&(r===$i||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class JHe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){XE(this,e)}}const eM=V_.litHtmlPolyfillSupport;eM==null||eM(SS,eN),(V_.litHtmlVersions??(V_.litHtmlVersions=[])).push("3.3.1");const ZHe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new eN(e.insertBefore(_S(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const d0=globalThis;let IT=class extends vb{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=ZHe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ZE}};var qK;IT._$litElement$=!0,IT.finalized=!0,(qK=d0.litElementHydrateSupport)==null||qK.call(d0,{LitElement:IT});const tM=d0.litElementPolyfillSupport;tM==null||tM({LitElement:IT});(d0.litElementVersions??(d0.litElementVersions=[])).push("4.2.1");let K_,Qg,Jg;function yat(t,e){K_=document.createElement("style"),Qg=document.createElement("style"),Jg=document.createElement("style"),K_.textContent=hv(t).core.cssText,Qg.textContent=hv(t).dark.cssText,Jg.textContent=hv(t).light.cssText,document.head.appendChild(K_),document.head.appendChild(Qg),document.head.appendChild(Jg),loe(e)}function loe(t){Qg&&Jg&&(t==="light"?(Qg.removeAttribute("media"),Jg.media="enabled"):(Jg.removeAttribute("media"),Qg.media="enabled"))}function XHe(t){K_&&Qg&&Jg&&(K_.textContent=hv(t).core.cssText,Qg.textContent=hv(t).dark.cssText,Jg.textContent=hv(t).light.cssText)}function hv(t){return{core:Dl`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${hl(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${hl((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${hl((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${hl((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${hl((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Dl`
      :root {
        --w3m-color-mix: ${hl((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${hl(ff(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${hl(ff(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Dl`
      :root {
        --w3m-color-mix: ${hl((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${hl(ff(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${hl(ff(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const wat=Dl`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,bat=Dl`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,vat=Dl`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,r_={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},uoe=Uee({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),doe=Uee({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function tN(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const TL=tN({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),RL=tN({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),eGe=tN({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});tN({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});tN({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const tGe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},NT={getMethodsByChainNamespace(t){return tGe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case TL.caipNetworkId:u.chains.push(TL.deprecatedCaipNetworkId);break;case RL.caipNetworkId:u.chains.push(RL.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await $_.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let hoe=class{constructor({provider:e,namespace:n}){this.id=ft.CONNECTOR_ID.WALLET_CONNECT,this.name=ek.ConnectorNamesMap[ft.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=ek.ConnectorImageIds[ft.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=J.getCaipNetworks.bind(J),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=Pe.state.universalProviderConfigOverride,s=NT.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return W_.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:nGe})}};const nGe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let rGe=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>J.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ft.CONNECTOR_ID.AUTH,type:"AUTH",name:ft.CONNECTOR_NAMES.AUTH,provider:e,imageId:ek.ConnectorImageIds[ft.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Et.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Et.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof hoe);if(!e)throw new Error("WalletConnectConnector not found");return e}};class sGe extends rGe{setUniversalProvider(e){this.addConnector(new hoe({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>$t.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&zr.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Et.state.balanceLoading&&e.chainId===((c=J.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Et.state.balance||"0.00",symbol:Et.state.balanceSymbol||""};const s=(await Et.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ft.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Qa.encode(new TextEncoder().encode(r)),pubkey:s}},(a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=J.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ft.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:$l(n.id)}]}))}catch(u){if(u.code===r_.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===r_.ERROR_INVALID_CHAIN_ID||u.code===r_.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===r_.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:$l(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const iGe=["email","socials","swaps","onramp","activity","reownBranding"],Ax={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?zr.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?zr.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?zr.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?zr.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?zr.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?zr.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?zr.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?zr.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?zr.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},oGe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Ax[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Ax[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Ax[t].processApi(e)},processFallbackFeature(t,e){return Ax[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await jt.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?zr.DEFAULT_REMOTE_FEATURES:zr.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of iGe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),zr.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Od.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class aGe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=J.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=J.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=J.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return J.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>J.getCaipNetworks(n),this.getActiveChainNamespace=()=>J.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{J.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>J.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>J.state.activeChain===n||!n?J.state.activeCaipAddress:J.getAccountProp("caipAddress",n),this.setClientId=n=>{Jt.setClientId(n)},this.getProvider=n=>jr.getProvider(n),this.getProviderType=n=>jr.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Et.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Et.setCaipAddress(n,r),n&&Pe.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Et.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Et.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Et.setProfileImage(n,r)},this.setUser=(n,r)=>{Et.setUser(n,r)},this.resetAccount=n=>{Et.resetAccount(n)},this.setCaipNetwork=n=>{J.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{J.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Et.setAllAccounts(n,r),Pe.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Et.setStatus(n,r),ht.isConnected()?Ct.setConnectionStatus("connected"):Ct.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>J.getAccountProp("address",n),this.setConnectors=n=>{const r=[...ht.state.allConnectors,...n];ht.setConnectors(r)},this.setConnections=(n,r)=>{Zt.setConnections(n,r)},this.fetchIdentity=n=>Jt.fetchIdentity(n),this.getReownName=n=>$_.getNamesForAddress(n),this.getConnectors=()=>ht.getConnectors(),this.getConnectorImage=n=>dre.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=jr.getProviderId(r),i=n?{...n,type:s}:void 0;Et.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!J.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Et.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Et.removeAddressLabel(n,r)},this.getAddress=n=>J.state.activeChain===n||!n?Et.state.address:J.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>J.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{J.resetNetwork(n)},this.addConnector=n=>{ht.addConnector(n)},this.resetWcConnection=()=>{Zt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Et.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Et.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{J.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Et.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{Pe.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await oGe.fetchRemoteFeatures(e),Pe.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&PU.setOnrampProviders(this.remoteFeatures.onramp),((n=Pe.state.remoteFeatures)!=null&&n.email||Array.isArray((r=Pe.state.remoteFeatures)==null?void 0:r.socials)&&((s=Pe.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await jt.fetchAllowedOrigins();if(e&&$t.isClient()){const n=window.location.origin;NT.isOriginAllowed(n,e,r_.DEFAULT_ALLOWED_ANCESTORS)||Od.open(Id.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Od.open(Id.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,xs.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Ha.setThemeMode(e.themeMode),e.themeVariables&&Ha.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");J.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&J.setActiveCaipNetwork(n)}initializeConnectionController(e){Zt.setWcBasic(e.basic??!1)}initializeConnectorController(){ht.initialize(this.chainNamespaces)}initializeProjectSettings(e){Pe.setProjectId(e.projectId),Pe.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;Pe.setDebug(e.debug!==!1),Pe.setEnableWalletConnect(e.enableWalletConnect!==!1),Pe.setEnableWalletGuide(e.enableWalletGuide!==!1),Pe.setEnableWallets(e.enableWallets!==!1),Pe.setEIP6963Enabled(e.enableEIP6963!==!1),Pe.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),Pe.setEnableAuthLogger(e.enableAuthLogger!==!1),Pe.setCustomRpcUrls(e.customRpcUrls),Pe.setEnableEmbedded(e.enableEmbedded),Pe.setAllWallets(e.allWallets),Pe.setIncludeWalletIds(e.includeWalletIds),Pe.setExcludeWalletIds(e.excludeWalletIds),Pe.setFeaturedWalletIds(e.featuredWalletIds),Pe.setTokens(e.tokens),Pe.setTermsConditionsUrl(e.termsConditionsUrl),Pe.setPrivacyPolicyUrl(e.privacyPolicyUrl),Pe.setCustomWallets(e.customWallets),Pe.setFeatures(e.features),Pe.setAllowUnsupportedChain(e.allowUnsupportedChain),Pe.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),Pe.setPreferUniversalLinks(e.experimental_preferUniversalLinks),Pe.setDefaultAccountTypes(e.defaultAccountTypes);const n=Ct.getPreferredAccountTypes()||{},r={...Pe.state.defaultAccountTypes,...n};Et.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),Pe.setMetadata(e.metadata),Pe.setDisableAppend(e.disableAppend),Pe.setEnableEmbedded(e.enableEmbedded),Pe.setSIWX(e.siwx),!e.projectId){Od.open(Id.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ft.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");Pe.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return $t.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=yb.getUnsupportedNetwork(`${n}:${e}`);J.setActiveCaipNetwork(r)}}getDefaultNetwork(){return yb.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return yb.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return yb.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?yb.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=jr.getProvider(e),s=jr.getProviderId(e),{caipAddress:i}=J.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Ct.removeConnectedNamespace(e),jr.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),ht.removeConnectorId(e),J.resetAccount(e),J.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=J.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Ct.setConnectedNamespaces([...J.state.chains.keys()]),this.chainNamespaces.forEach(o=>{ht.setConnectorId(Ga.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,m,y,w,C,N;const c=J.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const I=this.getCaipNetworks().find(k=>k.chainNamespace===i);I&&this.setCaipNetwork(I)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(m=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:m.http)==null?void 0:y[0])||((N=(C=(w=d==null?void 0:d.rpcUrls)==null?void 0:w.default)==null?void 0:C.http)==null?void 0:N[0])});if(!h)return;Ct.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Et.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=J.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Ct.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=ZBe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));yr.resetSend(),Zt.resetWcConnection(),await W_.clearSessions(),ht.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Ct.deleteConnectedSocialProvider(),xs.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(J.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Et.state.address,provider:jr.getProvider(J.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(zr.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(J.state.activeChain),s=jr.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ft.CHAIN.EVM){const n=this.getAdapter(J.state.activeChain),r=jr.getProvider(J.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Et.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:J.state.activeChain}),Et.state.profileImage||!1},getEnsAddress:async e=>await NT.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(J.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=jr.getProvider(J.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(J.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(J.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(J.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(J.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(J.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(J.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Et.state.address||this.updateNativeBalance(Et.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Zt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(jr.getProviderId(J.state.activeChain)===Ga.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=jr.getProvider(n),i=jr.getProviderId(n);if(e.chainNamespace===J.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Ga.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=ap.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new sGe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Ct.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Ct.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=J.state.activeChain===e,c=J.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Et.state.address,i=J.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=J.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=J.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=J.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ft.CHAIN.EVM&&$t.isSafeApp()&&ht.setConnectorId(ft.CONNECTOR_ID.SAFE,e);const n=ht.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ft.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ft.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=ht.getConnectorId(e),s=this.getCaipNetwork(e),o=ht.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([$t.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=J.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=ap.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=ap.validateCaipAddress(o),{chainId:f,address:p}=ap.parseCaipAddress(h);if(jr.setProviderId(n,Ga.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&J.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==ft.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:J.state.activeCaipNetwork});jr.setProvider(n,g)}else jr.setProvider(n,this.universalProvider);ht.setConnectorId(ft.CONNECTOR_ID.WALLET_CONNECT,n),Ct.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await J.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=ap.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>$t.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){jr.setProviderId(s,e),jr.setProvider(s,n),ht.setConnectorId(r,s)}async syncAllAccounts(e){const n=ht.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===J.state.activeChain,r=J.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Ct.getActiveNetworkProps(),c=i||a,l=((d=J.state.activeCaipNetwork)==null?void 0:d.name)===ft.UNSUPPORTED_NETWORK_NAME,u=J.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(m=>m.id.toString()===c.toString()),p=this.getCaipNetworks().find(m=>m.chainNamespace===o);if(!u&&!f&&!p){const m=this.getApprovedCaipNetworkIds()||[],y=m.find(C=>{var N;return((N=ap.parseCaipNetworkId(C))==null?void 0:N.chainId)===c.toString()}),w=m.find(C=>{var N;return((N=ap.parseCaipNetworkId(C))==null?void 0:N.chainNamespace)===o});f=this.getCaipNetworks().find(C=>C.caipNetworkId===y),p=this.getCaipNetworks().find(C=>C.caipNetworkId===w||"deprecatedCaipNetworkId"in C&&C.deprecatedCaipNetworkId===w)}const g=f||p;(g==null?void 0:g.chainNamespace)===J.state.activeChain?Pe.state.enableNetworkSwitch&&!Pe.state.allowUnsupportedChain&&((h=J.state.activeCaipNetwork)==null?void 0:h.name)===ft.UNSUPPORTED_NETWORK_NAME?J.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),xP.isLowerCaseMatch(s,Et.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=ht.getConnectorId(e),r=jr.getProviderId(e);if(r===Ga.CONNECTOR_TYPE_ANNOUNCED||r===Ga.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Ga.CONNECTOR_TYPE_WALLET_CONNECT){const i=jr.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ft.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ft.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!are.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=J.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=t5e.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};Pe.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await DHe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Zt.setUri(e)}),this.universalProvider.on("connect",Zt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Zt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(NT.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&$t.isCaipAddress(r[0])&&this.syncAccount(ap.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&$t.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){xs.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Id.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Id.ALERT_ERRORS[o];a&&(Od.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&Zt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Fi.open({...e,data:{swap:e.arguments}})}return Fi.open(e)}async close(){await this.injectModalUi(),Fi.close()}setLoading(e,n){Fi.setLoading(e,n)}async disconnect(e){await Zt.disconnect(e)}getSIWX(){return Pe.state.siwx}getError(){return""}getChainId(){var e;return(e=J.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Od.open(Id.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await J.switchActiveNetwork(n)}getWalletProvider(){return J.state.activeChain?jr.state.providers[J.state.activeChain]:null}getWalletProviderType(){return jr.getProviderId(J.state.activeChain)}subscribeProviders(e){return jr.subscribeProviders(e)}getThemeMode(){return Ha.state.themeMode}getThemeVariables(){return Ha.state.themeVariables}setThemeMode(e){Ha.setThemeMode(e),loe(Ha.state.themeMode)}setTermsConditionsUrl(e){Pe.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){Pe.setPrivacyPolicyUrl(e)}setThemeVariables(e){Ha.setThemeVariables(e),XHe(Ha.state.themeVariables)}subscribeTheme(e){return Ha.subscribe(e)}getWalletInfo(){return Et.state.connectedWalletInfo}getAccount(e){var o;const n=ht.getAuthConnector(e),r=J.getAccountData(e),s=J.state.activeChain,i=Ct.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:$t.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ft.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Ct.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?J.subscribeChainProp("accountState",r,n):J.subscribe(r),ht.subscribe(r)}subscribeNetwork(e){return J.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Et.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Et.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){J.subscribeKey("activeCaipNetwork",e)}getState(){return zd.state}subscribeState(e){return zd.subscribe(e)}showErrorMessage(e){Su.showError(e)}showSuccessMessage(e){Su.showSuccess(e)}getEvent(){return{...xs.state}}subscribeEvents(e){return xs.subscribe(e)}replace(e){Pn.replace(e)}redirect(e){Pn.push(e)}popTransactionStack(e){Pn.popTransactionStack(e)}isOpen(){return Fi.state.open}isTransactionStackEmpty(){return Pn.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){Pe.setFeatures(e)}updateRemoteFeatures(e){Pe.setRemoteFeatures(e)}updateOptions(e){const r={...Pe.state||{},...e};Pe.setOptions(r)}setConnectMethodsOrder(e){Pe.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){Pe.setWalletFeaturesOrder(e)}setCollapseWallets(e){Pe.setCollapseWallets(e)}setSocialsOrder(e){Pe.setSocialsOrder(e)}getConnectMethodsOrder(){return NL.getConnectOrderMethod(Pe.state.features,ht.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||J.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&J.removeNetwork(e,n)}}let cq=!1;class cGe extends aGe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Fc.checkIfRequestExists(n)?Fc.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(go.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(go.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Fc.checkIfRequestIsSafe(r),i=Et.state.address,o=J.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=J.state.activeChain;ht.getConnectorId(n)===ft.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=J.state.activeChain,s=r===ft.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=Pe.state.defaultAccountTypes[r],o=(l=Et.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;xP.isLowerCaseMatch(n.address,Et.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Et.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>$t.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[$t.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Et.state.user||{},username:n},J.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,J.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,J.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=ft.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Et.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Ha.getSnapshot(),l=Pe.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:ff(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:ft.CONNECTOR_ID.AUTH,info:{name:ft.CONNECTOR_ID.AUTH},type:Ga.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=J.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):ht.getConnectorId(n)===ft.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Ct.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!$t.isTelegram())return;const r=Ct.getTelegramSocialProvider();if(!r||!$t.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Et.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=ht.getAuthConnector();r&&o&&(this.setLoading(!0,e),await Zt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Ct.setConnectedSocialProvider(r),Ct.removeTelegramSocialProvider(),xs.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!ft.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=kLe.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:Id.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Od.open(Id.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Od.open(Id.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Od.open(Id.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),zd.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&jt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=J.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=jr.getProvider(r),u=jr.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=jr.getProviderId(n)===Ga.CONNECTOR_TYPE_AUTH,u=jr.getProviderId(r),d=u===Ga.CONNECTOR_TYPE_AUTH,h=ft.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(J.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ft.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Ga.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Ga.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),zd.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ft.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=jr.getProviderId(e);if(n===Ga.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Ct.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if($t.isClient()&&!cq)try{const e={...zr.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),$t.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!Pe.state.disableAppend&&!Pe.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}cq=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!$t.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(no(()=>import("./embedded-wallet-BxAnD_Fe.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(no(()=>import("./email-BFyHn_pD.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(no(()=>import("./socials-r5XkxbuZ.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(no(()=>import("./swaps-C5cWXvb7.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(no(()=>import("./send-DxbWKVZc.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(no(()=>import("./receive-BbPL2o4t.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(no(()=>import("./onramp-CFPiXEql.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(no(()=>import("./transactions-5YsOBQ-W.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(no(()=>import("./index-eDBn7Te-.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,no(()=>import("./index-r3CH25fz.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),no(()=>import("./w3m-modal-Cag9tbXq.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Np;function lGe(t){t&&(Np=t)}function nN(){if(!Np)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Np==null?void 0:Np.open(n))}async function e(){await(Np==null?void 0:Np.close())}return{open:t,close:e}}const uGe="1.7.8";let Sx;function dGe(t){return Sx||(Sx=new cGe({...t,sdkVersion:$t.generateSdkVersion(t.adapters??[],"react",uGe)}),lGe(Sx)),Sx}const hGe=zu({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),lq=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],fGe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=hGe({isOpen:t}),{open:i}=nN(),o=G.useRef(null),[a,c]=G.useState([]),[l,u]=G.useState(!0),[d,h]=G.useState(null),[f,p]=G.useState("all"),[g,m]=G.useState(1),[y,w]=G.useState(1),[C,N]=G.useState(0),[I,k]=G.useState(null),[P,U]=G.useState(lq[0]),[M,H]=G.useState(!1),[j,K]=G.useState(null),$=G.useCallback(async()=>{var B,W;try{if((B=window.solana)!=null&&B.isPhantom){const L=await window.solana.connect();K(L.publicKey.toString());return}if((W=window.solflare)!=null&&W.isSolflare){const L=await window.solflare.connect();K(L.publicKey.toString());return}i()}catch(L){console.error("Failed to connect Solana wallet:",L),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}H(!1)},[i]);G.useEffect(()=>{var B,W;(B=window.solana)!=null&&B.publicKey?K(window.solana.publicKey.toString()):(W=window.solflare)!=null&&W.publicKey&&K(window.solflare.publicKey.toString())},[]),G.useEffect(()=>{t&&(async()=>{var W;u(!0),h(null);try{let L,S=f==="owned"&&r||void 0;if(P.api==="opensea-solana"){if(f==="owned"&&!j){H(!0),u(!1);return}S=j||void 0,L=await sre(P.slug,50),console.log("Fetched Solana NFTs from collection:",L.data.length),f==="owned"&&j&&(console.log("Filtering for owner:",j),console.log("Sample NFT owner data:",(W=L.data[0])==null?void 0:W.owners),console.log("All NFTs owner data:",L.data.map(X=>({name:X.name,owners:X.owners,owner_of:X.owner_of}))),L.data.some(X=>X.owners&&X.owners.length>0)?(L.data=L.data.filter(X=>{const se=X.owners.some(ge=>ge.owner_of&&ge.owner_of.toLowerCase()===j.toLowerCase());return se&&console.log("Found owned NFT:",X.name),se}),console.log("NFTs after filtering:",L.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else P.api==="opensea"?L=await f4(P.slug,50,S):L=await h4(P.slug,g,50,S);c(L.data),w(L.totalPages),N(L.totalCount)}catch(L){L instanceof Error?h(L.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,P,j]),G.useEffect(()=>{M&&$()},[M,$]);const v=B=>new Date(B).toLocaleDateString(),E=B=>P.api==="opensea-solana"?B.owner_of&&B.owner_of.length>0?`${B.owner_of.substring(0,6)}...${B.owner_of.substring(-4)}`:B.owners&&B.owners.length>0?`${B.owners[0].owner_of.substring(0,6)}...${B.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":B.owner_of&&B.owner_of.length>0?`${B.owner_of.substring(0,6)}...${B.owner_of.substring(-4)}`:B.owners&&B.owners.length>0?`${B.owners[0].owner_of.substring(0,6)}...${B.owners[0].owner_of.substring(-4)}`:"N/A",_=()=>{n&&n()},D=async B=>{if(P.api==="opensea"&&P.chain)try{const W=await rre(P.chain,B.address,B.token_id.toString()),L={...B,attributes:JSON.stringify(W.traits||[])};k(L)}catch(W){console.error("Failed to fetch full NFT details",W),k(B)}else k(B)},x=B=>{U(B),m(1)};return t?b.jsxs(b.Fragment,{children:[b.jsx(LI,{nodeRef:o,handle:`.${s.header}`,children:b.jsxs("div",{ref:o,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"LAWB NFT GALLERY"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:_,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),b.jsx("div",{className:s.collectionSelector,children:lq.map(B=>b.jsx("button",{className:`${s.collectionButton} ${P.slug===B.slug?"active":""}`,onClick:()=>x(B),children:B.name},B.slug))}),b.jsxs("div",{className:s.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),b.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!j,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||j?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||j?1:.6},children:"My NFTs"}),P.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{$()},style:{background:j?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:j?"white":"black",marginLeft:"auto"},children:j?`Solana: ${j.slice(0,4)}...${j.slice(-4)}`:"Connect Solana"})]}),P.api==="opensea-solana"&&!j&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?b.jsx("div",{children:"Loading NFTs..."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${C} total)`,f==="recent"&&`Recently minted NFTs by ${P.api==="opensea-solana"?(j==null?void 0:j.slice(0,6))+"..."+(j==null?void 0:j.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${P.api==="opensea-solana"?(j==null?void 0:j.slice(0,6))+"..."+(j==null?void 0:j.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?b.jsx("div",{children:"No NFTs found."}):b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(B=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{D(B)},children:[b.jsx(ore,{src:ire(B),alt:`NFT #${B.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),b.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:b.jsxs("strong",{children:["#",B.token_id]})}),b.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",E(B)]}),b.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",v(B.created_at)]})]},B.id))}),f!=="recent"&&y>1&&b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[b.jsx("button",{onClick:()=>m(B=>Math.max(1,B-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),b.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),b.jsx("button",{onClick:()=>m(B=>Math.min(y,B+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),I&&b.jsx(bke,{nft:I,onClose:()=>k(null)})]}):null};var Ix,pGe=new Uint8Array(16);function foe(){if(!Ix&&(Ix=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ix))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ix(pGe)}const gGe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function jP(t){return typeof t=="string"&&gGe.test(t)}var Qi=[];for(var nM=0;nM<256;++nM)Qi.push((nM+256).toString(16).substr(1));function WP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Qi[t[e+0]]+Qi[t[e+1]]+Qi[t[e+2]]+Qi[t[e+3]]+"-"+Qi[t[e+4]]+Qi[t[e+5]]+"-"+Qi[t[e+6]]+Qi[t[e+7]]+"-"+Qi[t[e+8]]+Qi[t[e+9]]+"-"+Qi[t[e+10]]+Qi[t[e+11]]+Qi[t[e+12]]+Qi[t[e+13]]+Qi[t[e+14]]+Qi[t[e+15]]).toLowerCase();if(!jP(n))throw TypeError("Stringified UUID is invalid");return n}var uq,rM,sM=0,iM=0;function mGe(t,e,n){var r=e&&n||0,s=e||new Array(16);t=t||{};var i=t.node||uq,o=t.clockseq!==void 0?t.clockseq:rM;if(i==null||o==null){var a=t.random||(t.rng||foe)();i==null&&(i=uq=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=rM=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:iM+1,u=c-sM+(l-iM)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||c>sM)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");sM=c,iM=l,rM=o,c+=122192928e5;var d=((c&268435455)*1e4+l)%4294967296;s[r++]=d>>>24&255,s[r++]=d>>>16&255,s[r++]=d>>>8&255,s[r++]=d&255;var h=c/4294967296*1e4&268435455;s[r++]=h>>>8&255,s[r++]=h&255,s[r++]=h>>>24&15|16,s[r++]=h>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var f=0;f<6;++f)s[r+f]=i[f];return e||WP(s)}function poe(t){if(!jP(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function yGe(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var wGe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",bGe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function goe(t,e,n){function r(s,i,o,a){if(typeof s=="string"&&(s=yGe(s)),typeof i=="string"&&(i=poe(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=c[l];return o}return WP(c)}try{r.name=t}catch{}return r.DNS=wGe,r.URL=bGe,r}function vGe(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return EGe(CGe(_Ge(t),t.length*8))}function EGe(t){for(var e=[],n=t.length*32,r="0123456789abcdef",s=0;s<n;s+=8){var i=t[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);e.push(o)}return e}function moe(t){return(t+64>>>9<<4)+14+1}function CGe(t,e){t[e>>5]|=128<<e%32,t[moe(e)-1]=e;for(var n=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<t.length;o+=16){var a=n,c=r,l=s,u=i;n=xo(n,r,s,i,t[o],7,-680876936),i=xo(i,n,r,s,t[o+1],12,-389564586),s=xo(s,i,n,r,t[o+2],17,606105819),r=xo(r,s,i,n,t[o+3],22,-1044525330),n=xo(n,r,s,i,t[o+4],7,-176418897),i=xo(i,n,r,s,t[o+5],12,1200080426),s=xo(s,i,n,r,t[o+6],17,-1473231341),r=xo(r,s,i,n,t[o+7],22,-45705983),n=xo(n,r,s,i,t[o+8],7,1770035416),i=xo(i,n,r,s,t[o+9],12,-1958414417),s=xo(s,i,n,r,t[o+10],17,-42063),r=xo(r,s,i,n,t[o+11],22,-1990404162),n=xo(n,r,s,i,t[o+12],7,1804603682),i=xo(i,n,r,s,t[o+13],12,-40341101),s=xo(s,i,n,r,t[o+14],17,-1502002290),r=xo(r,s,i,n,t[o+15],22,1236535329),n=To(n,r,s,i,t[o+1],5,-165796510),i=To(i,n,r,s,t[o+6],9,-1069501632),s=To(s,i,n,r,t[o+11],14,643717713),r=To(r,s,i,n,t[o],20,-373897302),n=To(n,r,s,i,t[o+5],5,-701558691),i=To(i,n,r,s,t[o+10],9,38016083),s=To(s,i,n,r,t[o+15],14,-660478335),r=To(r,s,i,n,t[o+4],20,-405537848),n=To(n,r,s,i,t[o+9],5,568446438),i=To(i,n,r,s,t[o+14],9,-1019803690),s=To(s,i,n,r,t[o+3],14,-187363961),r=To(r,s,i,n,t[o+8],20,1163531501),n=To(n,r,s,i,t[o+13],5,-1444681467),i=To(i,n,r,s,t[o+2],9,-51403784),s=To(s,i,n,r,t[o+7],14,1735328473),r=To(r,s,i,n,t[o+12],20,-1926607734),n=Ro(n,r,s,i,t[o+5],4,-378558),i=Ro(i,n,r,s,t[o+8],11,-2022574463),s=Ro(s,i,n,r,t[o+11],16,1839030562),r=Ro(r,s,i,n,t[o+14],23,-35309556),n=Ro(n,r,s,i,t[o+1],4,-1530992060),i=Ro(i,n,r,s,t[o+4],11,1272893353),s=Ro(s,i,n,r,t[o+7],16,-155497632),r=Ro(r,s,i,n,t[o+10],23,-1094730640),n=Ro(n,r,s,i,t[o+13],4,681279174),i=Ro(i,n,r,s,t[o],11,-358537222),s=Ro(s,i,n,r,t[o+3],16,-722521979),r=Ro(r,s,i,n,t[o+6],23,76029189),n=Ro(n,r,s,i,t[o+9],4,-640364487),i=Ro(i,n,r,s,t[o+12],11,-421815835),s=Ro(s,i,n,r,t[o+15],16,530742520),r=Ro(r,s,i,n,t[o+2],23,-995338651),n=ko(n,r,s,i,t[o],6,-198630844),i=ko(i,n,r,s,t[o+7],10,1126891415),s=ko(s,i,n,r,t[o+14],15,-1416354905),r=ko(r,s,i,n,t[o+5],21,-57434055),n=ko(n,r,s,i,t[o+12],6,1700485571),i=ko(i,n,r,s,t[o+3],10,-1894986606),s=ko(s,i,n,r,t[o+10],15,-1051523),r=ko(r,s,i,n,t[o+1],21,-2054922799),n=ko(n,r,s,i,t[o+8],6,1873313359),i=ko(i,n,r,s,t[o+15],10,-30611744),s=ko(s,i,n,r,t[o+6],15,-1560198380),r=ko(r,s,i,n,t[o+13],21,1309151649),n=ko(n,r,s,i,t[o+4],6,-145523070),i=ko(i,n,r,s,t[o+11],10,-1120210379),s=ko(s,i,n,r,t[o+2],15,718787259),r=ko(r,s,i,n,t[o+9],21,-343485551),n=Eg(n,a),r=Eg(r,c),s=Eg(s,l),i=Eg(i,u)}return[n,r,s,i]}function _Ge(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(moe(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function Eg(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function AGe(t,e){return t<<e|t>>>32-e}function zP(t,e,n,r,s,i){return Eg(AGe(Eg(Eg(e,t),Eg(r,i)),s),n)}function xo(t,e,n,r,s,i,o){return zP(e&n|~e&r,t,e,s,i,o)}function To(t,e,n,r,s,i,o){return zP(e&r|n&~r,t,e,s,i,o)}function Ro(t,e,n,r,s,i,o){return zP(e^n^r,t,e,s,i,o)}function ko(t,e,n,r,s,i,o){return zP(n^(e|~r),t,e,s,i,o)}var SGe=goe("v3",48,vGe);function yoe(t,e,n){t=t||{};var r=t.random||(t.rng||foe)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=r[s];return e}return WP(r)}function IGe(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function oM(t,e){return t<<e|t>>>32-e}function NGe(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var s=0;s<r.length;++s)t.push(r.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=t[c*64+u*4]<<24|t[c*64+u*4+1]<<16|t[c*64+u*4+2]<<8|t[c*64+u*4+3];a[c]=l}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[d][f];for(var p=16;p<80;++p)h[p]=oM(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var g=n[0],m=n[1],y=n[2],w=n[3],C=n[4],N=0;N<80;++N){var I=Math.floor(N/20),k=oM(g,5)+IGe(I,m,y,w)+C+e[I]+h[N]>>>0;C=w,w=y,y=oM(m,30)>>>0,m=g,g=k}n[0]=n[0]+g>>>0,n[1]=n[1]+m>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+w>>>0,n[4]=n[4]+C>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var xGe=goe("v5",80,NGe);const TGe="00000000-0000-0000-0000-000000000000";function RGe(t){if(!jP(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const kGe=Object.freeze(Object.defineProperty({__proto__:null,NIL:TGe,parse:poe,stringify:WP,v1:mGe,v3:SGe,v4:yoe,v5:xGe,validate:jP,version:RGe},Symbol.toStringTag,{value:"Module"})),PGe=zu({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),OGe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],DGe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],wc=500;function woe(){const t=PGe(),e=G.useRef(null),[n,r]=G.useState(null),[s,i]=G.useState(""),[o,a]=G.useState(""),[c,l]=G.useState(50),[u,d]=G.useState(50),[h,f]=G.useState(!1),[p,g]=G.useState(!1),[m,y]=G.useState(!1),[w,C]=G.useState(!1),[N,I]=G.useState(!1),[k,P]=G.useState([]),[U,M]=G.useState(null),H=G.useRef(null),[j,K]=G.useState(null),$=async ce=>{const ae=ce.getContext("2d");if(!ae)return;ae.clearRect(0,0,ce.width,ce.height),n?await new Promise(Se=>{const Ce=new window.Image;Ce.crossOrigin="anonymous",Ce.onload=()=>{const Qe=Math.min(ce.width/Ce.width,ce.height/Ce.height),pt=(ce.width-Ce.width*Qe)/2,Ye=(ce.height-Ce.height*Qe)/2;ae.drawImage(Ce,pt,Ye,Ce.width*Qe,Ce.height*Qe),Se()},Ce.onerror=()=>Se(),Ce.src=n}):(ae.fillStyle="#333",ae.fillRect(0,0,ce.width,ce.height)),(Se=>{Se.textAlign="center",Se.strokeStyle="black",Se.lineWidth=3,Se.fillStyle="white";const Ce=(Qe,pt)=>{const Ye=Qe.toUpperCase().split(" "),it=[];let vn=Ye[0];for(let He=1;He<Ye.length;He++){const Yt=Ye[He];Se.measureText(vn+" "+Yt).width<pt?vn+=" "+Yt:(it.push(vn),vn=Yt)}return it.push(vn),it};if(s&&(Se.font=`${c}px Impact`,Ce(s,wc-20).forEach((pt,Ye)=>{const it=c+Ye*c*1.2;Se.strokeText(pt,wc/2,it),Se.fillText(pt,wc/2,it)})),o){Se.font=`${u}px Impact`;const Qe=Ce(o,wc-20);Qe.forEach((pt,Ye)=>{const it=wc-(Qe.length-Ye)*u*1.2+u;Se.strokeText(pt,wc/2,it),Se.fillText(pt,wc/2,it)})}})(ae),await Promise.all(k.map(Se=>new Promise(Ce=>{const Qe=new window.Image;Qe.src=Se.src,Qe.onload=()=>{ae.save(),ae.translate(Se.x,Se.y),ae.rotate(Se.rotation*Math.PI/180),ae.scale(Se.scale,Se.scale),ae.drawImage(Qe,-40,-40,80,80),ae.restore(),Ce()},Qe.onerror=()=>Ce()})));try{h&&v(ce),p&&E(ce),m&&_(ce)}catch(Se){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",Se),f(!1),g(!1),y(!1)}},v=ce=>{const ae=ce.getContext("2d");if(!ae)return;const _e=ae.getImageData(0,0,ce.width,ce.height),Se=_e.data;for(let Ce=0;Ce<Se.length;Ce+=4){const Qe=Se[Ce],pt=Se[Ce+1],Ye=Se[Ce+2],it=(Qe+pt+Ye)/3,vn=1.8;Se[Ce]=Math.min(255,it+(Qe-it)*vn),Se[Ce+1]=Math.min(255,it+(pt-it)*vn*.7),Se[Ce+2]=Math.min(255,it+(Ye-it)*vn*.4);const He=1.3;Se[Ce]=Math.min(255,Math.max(0,Se[Ce]*He)),Se[Ce+1]=Math.min(255,Math.max(0,Se[Ce+1]*He)),Se[Ce+2]=Math.min(255,Math.max(0,Se[Ce+2]*He))}ae.putImageData(_e,0,0)},E=ce=>{const ae=ce.getContext("2d");if(!ae)return;const _e=4,Ce=ae.getImageData(0,0,ce.width,ce.height).data,Qe=new Uint8ClampedArray(Ce);for(let pt=0;pt<ce.height;pt+=_e)for(let Ye=0;Ye<ce.width;Ye+=_e){const it=(pt*ce.width+Ye)*4,vn=Ce[it],He=Ce[it+1],Yt=Ce[it+2],Qt=Ce[it+3];for(let De=0;De<_e&&pt+De<ce.height;De++)for(let z=0;z<_e&&Ye+z<ce.width;z++){const T=((pt+De)*ce.width+(Ye+z))*4;Qe[T]=vn,Qe[T+1]=He,Qe[T+2]=Yt,Qe[T+3]=Qt}}ae.putImageData(new ImageData(Qe,ce.width,ce.height),0,0)},_=ce=>{const ae=ce.getContext("2d");if(!ae)return;const _e=ae.getImageData(0,0,ce.width,ce.height),Se=_e.data;for(let Ce=0;Ce<Se.length;Ce+=4){const Qe=(Math.random()-.5)*50;Se[Ce]=Math.max(0,Math.min(255,Se[Ce]+Qe)),Se[Ce+1]=Math.max(0,Math.min(255,Se[Ce+1]+Qe)),Se[Ce+2]=Math.max(0,Math.min(255,Se[Ce+2]+Qe))}ae.putImageData(_e,0,0)};G.useEffect(()=>{e.current&&$(e.current)},[$]);const D=G.useRef(null),x=500,B=ce=>{ce.preventDefault(),D.current=setTimeout(()=>{const ae=e.current;ae&&(navigator.share?ae.toBlob(_e=>{if(_e){const Se=new File([_e],"meme.png",{type:"image/png"});navigator.share({title:"Lawb Meme",text:"Check out this meme I made!",files:[Se]}).catch(()=>{se()})}}):se())},x)},W=()=>{D.current&&(clearTimeout(D.current),D.current=null)},L=()=>{D.current&&(clearTimeout(D.current),D.current=null)},S=ce=>{ce.preventDefault()},F=ce=>{var _e;const ae=(_e=ce.target.files)==null?void 0:_e[0];ae&&r(URL.createObjectURL(ae))},X=()=>{r(null),i(""),a(""),l(50),d(50),f(!1),g(!1),y(!1)},se=async()=>{const ce=e.current;if(!ce)return;await $(ce);const ae=document.createElement("a");ae.download="meme.png",ae.href=ce.toDataURL("image/png"),document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)},ge=async ce=>{I(!0),C(!1);try{console.log("Fetching NFTs for collection:",ce);let ae;if(ce.api==="opensea"){console.log("Using OpenSea API for:",ce.slug);const _e=await f4(ce.slug,50);ae=_e.data,console.log("OpenSea response:",_e)}else if(ce.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",ce.slug);const _e=await sre(ce.slug,50);if(ae=_e.data,console.log("Helius Solana response:",_e),!ae||ae.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",ce.slug);const _e=await h4(ce.slug,1,50);ae=_e.data,console.log("Scatter response:",_e)}if(ae&&ae.length>0){const _e=ae[Math.floor(Math.random()*ae.length)],Se=_e.image||_e.image_url||_e.image_url_shrunk;console.log("Selected NFT:",_e),console.log("Image URL:",Se),r(Se)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ae){console.error("Error fetching NFTs:",ae),alert("Failed to fetch NFT images. Check console for details.")}finally{I(!1)}},Ue=ce=>{const ae={id:yoe(),src:ce,x:80,y:80,scale:1,rotation:0};P(_e=>_e.length>=2||_e.some(Se=>Se.src===ce&&!Se.id.startsWith("upload-"))?_e:[..._e,ae]),K(ae.id)},Le=ce=>{var _e;const ae=(_e=ce.target.files)==null?void 0:_e[0];if(ae){const Se=URL.createObjectURL(ae);Ue(Se)}},Be=(ce,ae,_e)=>{P(Se=>Se.map(Ce=>{if(Ce.id!==ce)return Ce;let Qe=Ce.x+ae/1.2,pt=Ce.y+_e/1.2;const Ye=40*Ce.scale,it=40*Ce.scale;return Qe=Math.max(Ye,Math.min(wc-Ye,Qe)),pt=Math.max(it,Math.min(wc-it,pt)),{...Ce,x:Qe,y:pt}}))},Ut=(ce,ae,_e,Se,Ce)=>{P(Qe=>Qe.map(pt=>{if(pt.id!==ce)return pt;const Ye=pt.x,it=pt.y,vn=Math.atan2(Ce-it,Se-Ye)*180/Math.PI;return{...pt,rotation:_e+(vn-ae)*.5}}))},lt=ce=>{P(ae=>ae.filter(_e=>_e.id!==ce))},st=(ce,ae)=>{P(_e=>_e.map(Se=>Se.id===ce?{...Se,scale:Math.max(.2,Se.scale*(1+(ae-1)*.2))}:Se))};return b.jsxs("div",{className:t.container,children:[b.jsxs("div",{className:t.header,children:[b.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),b.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",b.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),b.jsxs("div",{className:t.content,children:[b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Collections"}),b.jsxs("div",{className:t.row,children:[b.jsxs("div",{className:t.dropdown,children:[b.jsx("button",{className:t.button,onClick:()=>C(ce=>!ce),children:"Collections"}),w&&b.jsx("div",{className:t.dropdownContent,children:OGe.map(ce=>b.jsx("div",{className:t.dropdownItem,onClick:()=>{ge(ce)},children:ce.name},ce.id))})]}),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:F})]}),N&&b.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Text"}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Top Text:"}),b.jsx("input",{className:t.input,type:"text",value:s,onChange:ce=>i(ce.target.value),placeholder:"Enter top text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:ce=>l(Number(ce.target.value)),style:{width:60,textAlign:"center"}})]}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Bottom Text:"}),b.jsx("input",{className:t.input,type:"text",value:o,onChange:ce=>a(ce.target.value),placeholder:"Enter bottom text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:ce=>d(Number(ce.target.value)),style:{width:60,textAlign:"center"}})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Effects"}),b.jsxs("div",{className:t.row,children:[b.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(ce=>!ce),children:"Deep Fry"}),b.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(ce=>!ce),children:"Pixelate"}),b.jsx("button",{className:t.effectButton,style:{background:m?"#00ffff":void 0},onClick:()=>y(ce=>!ce),children:"Grain"})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Stickers"}),b.jsxs("div",{className:t.row,children:[DGe.map((ce,ae)=>b.jsx("img",{src:ce,alt:`sticker${ae+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>Ue(ce)},ce)),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:H,onChange:Le})]})]})]}),b.jsxs("div",{className:t.actions,children:[b.jsx("button",{className:t.button,onClick:se,children:"Save Image"}),b.jsx("button",{className:t.button,onClick:X,children:"Restart"})]})]}),b.jsx("div",{className:t.memeArea,children:b.jsx("canvas",{ref:e,width:wc,height:wc,className:t.canvas,onTouchStart:B,onTouchEnd:W,onTouchMove:L,onContextMenu:S,style:{touchAction:"none"}})}),b.jsx("div",{style:{position:"absolute",left:0,top:0,width:wc,height:wc,pointerEvents:"none"},children:k.map(ce=>j===ce.id?b.jsxs("div",{style:{position:"absolute",left:ce.x,top:ce.y,width:80*ce.scale,height:80*ce.scale,transform:`rotate(${ce.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ae=>{M(ce.id),ae.stopPropagation()},onMouseUp:()=>M(null),onMouseMove:ae=>{U===ce.id&&ae.buttons===1&&Be(ce.id,ae.movementX,ae.movementY)},children:[b.jsx("img",{src:ce.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),b.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ae=>{var vn;ae.stopPropagation();const _e=(vn=ae.currentTarget.parentElement)==null?void 0:vn.getBoundingClientRect(),Se=_e?_e.left+_e.width/2:0,Ce=_e?_e.top+_e.height/2:0,Qe=Math.atan2(ae.clientY-Ce,ae.clientX-Se)*180/Math.PI,pt=ce.rotation,Ye=He=>{Ut(ce.id,Qe,pt,He.clientX,He.clientY)},it=()=>{window.removeEventListener("mousemove",Ye),window.removeEventListener("mouseup",it)};window.addEventListener("mousemove",Ye),window.addEventListener("mouseup",it)}}),b.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ae=>{ae.stopPropagation();const _e=ae.clientX,Se=Qe=>{const pt=(Qe.clientX-_e)/80;st(ce.id,1+pt)},Ce=()=>{window.removeEventListener("mousemove",Se),window.removeEventListener("mouseup",Ce)};window.addEventListener("mousemove",Se),window.addEventListener("mouseup",Ce)}}),b.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>lt(ce.id),children:""}),b.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>K(null),children:"Place"})]},ce.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function IS(){return IS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IS.apply(this,arguments)}var Cg;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Cg||(Cg={}));const dq="popstate";function MGe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return kL("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:voe(s)}return UGe(e,n,null,t)}function Ai(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function boe(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BGe(){return Math.random().toString(36).substr(2,8)}function hq(t,e){return{usr:t.state,key:t.key,idx:e}}function kL(t,e,n,r){return n===void 0&&(n=null),IS({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zC(e):e,{state:n,key:e&&e.key||r||BGe()})}function voe(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zC(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function UGe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Cg.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(IS({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Cg.Pop;let m=u(),y=m==null?null:m-l;l=m,c&&c({action:a,location:g.location,delta:y})}function h(m,y){a=Cg.Push;let w=kL(g.location,m,y);l=u()+1;let C=hq(w,l),N=g.createHref(w);try{o.pushState(C,"",N)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(N)}i&&c&&c({action:a,location:g.location,delta:1})}function f(m,y){a=Cg.Replace;let w=kL(g.location,m,y);l=u();let C=hq(w,l),N=g.createHref(w);o.replaceState(C,"",N),i&&c&&c({action:a,location:g.location,delta:0})}function p(m){let y=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof m=="string"?m:voe(m);return w=w.replace(/ $/,"%20"),Ai(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let g={get action(){return a},get location(){return t(s,o)},listen(m){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(dq,d),c=m,()=>{s.removeEventListener(dq,d),c=null}},createHref(m){return e(s,m)},createURL:p,encodeLocation(m){let y=p(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(m){return o.go(m)}};return g}var fq;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fq||(fq={}));function LGe(t,e,n){return n===void 0&&(n="/"),$Ge(t,e,n)}function $Ge(t,e,n,r){let s=typeof e=="string"?zC(e):e,i=_oe(s.pathname||"/",n);if(i==null)return null;let o=Eoe(t);FGe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=ZGe(i);a=YGe(o[c],l)}return a}function Eoe(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ai(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=h0([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Ai(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Eoe(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:VGe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of Coe(i.path))s(i,o,c)}),e}function Coe(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Coe(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function FGe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:KGe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jGe=/^:[\w-]+$/,WGe=3,zGe=2,HGe=1,GGe=10,qGe=-2,pq=t=>t==="*";function VGe(t,e){let n=t.split("/"),r=n.length;return n.some(pq)&&(r+=qGe),e&&(r+=zGe),n.filter(s=>!pq(s)).reduce((s,i)=>s+(jGe.test(i)?WGe:i===""?HGe:GGe),r)}function KGe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function YGe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=QGe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:h0([i,d.pathname]),pathnameBase:sqe(h0([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=h0([i,d.pathnameBase]))}return o}function QGe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=JGe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function JGe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),boe(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function ZGe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return boe(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _oe(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function XGe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?zC(t):t;return{pathname:n?n.startsWith("/")?n:eqe(n,e):e,search:iqe(r),hash:oqe(s)}}function eqe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function aM(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tqe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function nqe(t,e){let n=tqe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function rqe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=zC(t):(s=IS({},t),Ai(!s.pathname||!s.pathname.includes("?"),aM("?","pathname","search",s)),Ai(!s.pathname||!s.pathname.includes("#"),aM("#","pathname","hash",s)),Ai(!s.search||!s.search.includes("#"),aM("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=XGe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const h0=t=>t.join("/").replace(/\/\/+/g,"/"),sqe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iqe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oqe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function aqe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Aoe=["post","put","patch","delete"];new Set(Aoe);const cqe=["get",...Aoe];new Set(cqe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function NS(){return NS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NS.apply(this,arguments)}const z4=G.createContext(null),lqe=G.createContext(null),HP=G.createContext(null),GP=G.createContext(null),HC=G.createContext({outlet:null,matches:[],isDataRoute:!1}),Soe=G.createContext(null);function qP(){return G.useContext(GP)!=null}function Ioe(){return qP()||Ai(!1),G.useContext(GP).location}function Noe(t){G.useContext(HP).static||G.useLayoutEffect(t)}function uqe(){let{isDataRoute:t}=G.useContext(HC);return t?_qe():dqe()}function dqe(){qP()||Ai(!1);let t=G.useContext(z4),{basename:e,future:n,navigator:r}=G.useContext(HP),{matches:s}=G.useContext(HC),{pathname:i}=Ioe(),o=JSON.stringify(nqe(s,n.v7_relativeSplatPath)),a=G.useRef(!1);return Noe(()=>{a.current=!0}),G.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=rqe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:h0([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function hqe(t,e){return fqe(t,e)}function fqe(t,e,n,r){qP()||Ai(!1);let{navigator:s}=G.useContext(HP),{matches:i}=G.useContext(HC),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=Ioe(),u;if(e){var d;let m=typeof e=="string"?zC(e):e;c==="/"||(d=m.pathname)!=null&&d.startsWith(c)||Ai(!1),u=m}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let m=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(m.length).join("/")}let p=LGe(t,{pathname:f}),g=wqe(p&&p.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:h0([c,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:h0([c,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,n,r);return e&&g?G.createElement(GP.Provider,{value:{location:NS({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Cg.Pop}},g):g}function pqe(){let t=Cqe(),e=aqe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:s},n):null,null)}const gqe=G.createElement(pqe,null);class mqe extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?G.createElement(HC.Provider,{value:this.props.routeContext},G.createElement(Soe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yqe(t){let{routeContext:e,match:n,children:r}=t,s=G.useContext(z4);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),G.createElement(HC.Provider,{value:e},r)}function wqe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Ai(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,m=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||gqe,c&&(l<0&&h===0?(Aqe("route-fallback"),p=!0,m=null):l===h&&(p=!0,m=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),w=()=>{let C;return f?C=g:p?C=m:d.route.Component?C=G.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=u,G.createElement(yqe,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:C})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?G.createElement(mqe,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var xoe=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(xoe||{}),Toe=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Toe||{});function bqe(t){let e=G.useContext(z4);return e||Ai(!1),e}function vqe(t){let e=G.useContext(lqe);return e||Ai(!1),e}function Eqe(t){let e=G.useContext(HC);return e||Ai(!1),e}function Roe(t){let e=Eqe(),n=e.matches[e.matches.length-1];return n.route.id||Ai(!1),n.route.id}function Cqe(){var t;let e=G.useContext(Soe),n=vqe(),r=Roe();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function _qe(){let{router:t}=bqe(xoe.UseNavigateStable),e=Roe(Toe.UseNavigateStable),n=G.useRef(!1);return Noe(()=>{n.current=!0}),G.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,NS({fromRouteId:e},i)))},[t,e])}const gq={};function Aqe(t,e,n){gq[t]||(gq[t]=!0)}function Sqe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function xT(t){Ai(!1)}function Iqe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Cg.Pop,navigator:i,static:o=!1,future:a}=t;qP()&&Ai(!1);let c=e.replace(/^\/*/,"/"),l=G.useMemo(()=>({basename:c,navigator:i,static:o,future:NS({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=zC(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=G.useMemo(()=>{let m=_oe(u,c);return m==null?null:{location:{pathname:m,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:G.createElement(HP.Provider,{value:l},G.createElement(GP.Provider,{children:n,value:g}))}function Nqe(t){let{children:e,location:n}=t;return hqe(PL(e),n)}new Promise(()=>{});function PL(t,e){e===void 0&&(e=[]);let n=[];return G.Children.forEach(t,(r,s)=>{if(!G.isValidElement(r))return;let i=[...e,s];if(r.type===G.Fragment){n.push.apply(n,PL(r.props.children,i));return}r.type!==xT&&Ai(!1),!r.props.index||!r.props.children||Ai(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=PL(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const xqe="6";try{window.__reactRouterVersion=xqe}catch{}const Tqe="startTransition",mq=$ue[Tqe];function Rqe(t){let{basename:e,children:n,future:r,window:s}=t,i=G.useRef();i.current==null&&(i.current=MGe({window:s,v5Compat:!0}));let o=i.current,[a,c]=G.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=G.useCallback(d=>{l&&mq?mq(()=>c(d)):c(d)},[c,l]);return G.useLayoutEffect(()=>o.listen(u),[o,u]),G.useEffect(()=>Sqe(r),[r]),G.createElement(Iqe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var yq;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(yq||(yq={}));var wq;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wq||(wq={}));const kqe=zu({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function Pqe(){const t=kqe(),{open:e}=nN(),{address:n,isConnected:r}=kC(),{isPending:s}=Jte(),{disconnect:i}=Zte(),{data:o}=Xte({address:n}),[a,c]=G.useState("pixelawbs-popup"),[l,u]=G.useState(new Set),[d,h]=G.useState(!1),[f,p]=G.useState(!1),[g,m]=G.useState(!1),[y,w]=G.useState(!1),C=uqe(),N=G.useRef(null);G.useEffect(()=>{if(a==="halloween-popup"&&N.current){const _=N.current.querySelector("script[data-tiktok-embed]");_&&_.remove();const D=document.createElement("script");D.src="https://www.tiktok.com/embed.js",D.async=!0,D.setAttribute("data-tiktok-embed","true"),N.current.appendChild(D)}},[a]);const I=(_,D,x)=>{if(_==="url"&&x)window.open(x,"_blank");else if(_==="popup"&&D)c(D),u(B=>{const W=new Set(B);return W.delete(D),W}),document.body.offsetWidth;else if(_==="wallet")r?i():e();else if(_==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else _==="nft-gallery"?p(!0):_==="meme-generator"?m(!0):_==="chess"&&(r?w(!0):e().then(()=>{const B=()=>{window.ethereum&&window.ethereum.selectedAddress?w(!0):setTimeout(B,200)};B()}))},k=()=>c(null),P=_=>{u(D=>new Set(D).add(_)),c(null)},U=_=>{_==="mint-popup"?h(!0):_==="nft-gallery-popup"?p(!0):_==="meme-generator-popup"?m(!0):c(_),u(D=>{const x=new Set(D);return x.delete(_),x})},M=()=>h(!1),H=()=>p(!1),j=()=>m(!1),K=()=>{h(!1),u(_=>new Set(_).add("mint-popup"))},$=()=>{p(!1),u(_=>new Set(_).add("nft-gallery-popup"))},v=()=>{m(!1),u(_=>new Set(_).add("meme-generator-popup"))},E=b.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return b.jsxs("div",{className:t.body,children:[y&&b.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[b.jsx("video",{src:"/images/loadingchess.mp4",style:{width:120,height:120,marginBottom:32},autoPlay:!0,muted:!0,onEnded:()=>{w(!1),C("/chess")}}),b.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),b.jsx(dke,{onIconClick:I}),b.jsx(fke,{minimizedWindows:Array.from(l),onRestoreWindow:U,walletButton:E,connectionStatus:{connected:r,address:n,ens:o||void 0}}),b.jsxs(pl,{id:"chat-popup",isOpen:a==="chat-popup",onClose:k,onMinimize:P,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",b.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),b.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(pl,{id:"purity-popup",isOpen:a==="purity-popup",onClose:k,onMinimize:P,children:[b.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),b.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),b.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),b.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(pl,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:k,onMinimize:P,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[b.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",b.jsx("br",{}),b.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",b.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",b.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),b.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(pl,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:k,onMinimize:P,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(pl,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:k,onMinimize:P,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsxs(pl,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:k,onMinimize:P,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx(DNe,{id:"1620879129850834944"})}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsx(pl,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:k,onMinimize:P,children:(()=>{const _=D=>{D.preventDefault(),c(null),h(!0)};return b.jsxs(b.Fragment,{children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:_,children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),b.jsxs(pl,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:k,onMinimize:P,children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),b.jsx("div",{ref:N,style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:b.jsxs("section",{children:[b.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",b.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),b.jsxs(pl,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:k,onMinimize:P,children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),b.jsx(mke,{isOpen:d,onClose:M,onMinimize:K,walletAddress:n||""}),b.jsx(fGe,{isOpen:f,onClose:H,onMinimize:$,walletAddress:n}),b.jsx(pl,{id:"meme-generator-popup",isOpen:g,onClose:j,onMinimize:v,children:b.jsx(woe,{})})]})}const Oqe=zu({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),bq=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Dqe=({onBack:t,walletAddress:e})=>{const n=Oqe(),{open:r}=nN(),[s,i]=G.useState([]),[o,a]=G.useState(!0),[c,l]=G.useState(null),[u,d]=G.useState(bq[0]),[h,f]=G.useState(!1),[p,g]=G.useState(null),[m,y]=G.useState("all"),[w,C]=G.useState(null),N=G.useCallback(async()=>{var U,M;try{if((U=window.solana)!=null&&U.isPhantom){const H=await window.solana.connect();g(H.publicKey.toString());return}if((M=window.solflare)!=null&&M.isSolflare){const H=await window.solflare.connect();g(H.publicKey.toString());return}r()}catch(H){console.error("Failed to connect Solana wallet:",H),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);G.useEffect(()=>{var U,M;(U=window.solana)!=null&&U.publicKey?g(window.solana.publicKey.toString()):(M=window.solflare)!=null&&M.publicKey&&g(window.solflare.publicKey.toString())},[]),G.useEffect(()=>{(async()=>{a(!0);try{let M,H=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}H=p,M=await pke(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",M.data.length)}else u.api==="opensea"?M=await f4(u.slug,100,H):M=await h4(u.slug,1,100,H);m==="owned"&&p&&(console.log("Filtering for owner:",p),M.data.some(K=>K.owners&&K.owners.length>0)?M.data=M.data.filter(K=>K.owners.some(v=>v.owner_of&&v.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),C("Owner data not available for this Solana collection. Showing all NFTs."))),i(M.data)}catch(M){console.error(M)}finally{a(!1)}})()},[e,u,p,m]),G.useEffect(()=>{h&&N()},[h,N]);const I=async U=>{if(a(!0),u.api==="opensea"&&u.chain)try{const M=await rre(u.chain,U.address,U.token_id.toString()),H={...U,attributes:JSON.stringify(M.traits||[])};l(H)}catch(M){console.error("Failed to fetch full NFT details",M),l(U)}else l(U);a(!1)},k=()=>{if(!c)return null;let U=[];try{U=JSON.parse(c.attributes||"[]")}catch(M){console.error("Failed to parse NFT attributes:",M)}return b.jsxs("div",{className:n.detailView,children:[b.jsx("img",{src:c.image,alt:c.name}),b.jsx("h2",{children:c.name}),b.jsx("h4",{children:"Traits:"}),b.jsx("ul",{children:U.map((M,H)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[M.trait_type,":"]})," ",M.value]},H))})]})},P=()=>b.jsxs(b.Fragment,{children:[b.jsx("div",{className:n.collectionSelector,children:bq.map(U=>b.jsx("button",{className:`${n.collectionButton} ${u.slug===U.slug?"active":""}`,onClick:()=>d(U),children:U.name},U.slug))}),b.jsxs("div",{className:n.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>y("all"),style:{background:m==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:m==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:m==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:m==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{N()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),w&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:w}),u.api==="opensea-solana"&&!p&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?b.jsx("div",{className:n.loading,children:"Loading NFTs..."}):b.jsx("div",{className:n.grid,children:s.map(U=>{let M=U.image||U.image_url||U.image_url_shrunk||"/assets/pixelawb.png";return b.jsxs("div",{className:n.gridItem,onClick:()=>void I(U),children:[b.jsx("img",{src:M,alt:U.name,onError:H=>{H.currentTarget.src!==U.image_url&&U.image_url?H.currentTarget.src=U.image_url:H.currentTarget.src!==U.image_url_shrunk&&U.image_url_shrunk?H.currentTarget.src=U.image_url_shrunk:H.currentTarget.src="/assets/pixelawb.png"}}),b.jsx("span",{children:U.name})]},U.id)})})]})]});return b.jsxs("div",{className:n.galleryContainer,children:[b.jsxs("header",{className:n.header,children:[b.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),b.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),b.jsx("div",{className:n.content,children:o?b.jsx("p",{className:n.loading,children:"Loading..."}):c?k():P()})]})},Mqe=zu({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),iu=({isOpen:t,onClose:e,title:n,children:r})=>{const s=Mqe();return t?b.jsx("div",{className:s.overlay,children:b.jsxs("div",{className:s.popup,children:[b.jsxs("div",{className:s.titleBar,children:[b.jsx("span",{children:n}),b.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),b.jsx("div",{className:s.content,children:r})]})}):null},Bqe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=G.useState([]),[i,o]=G.useState(!1),[a,c]=G.useState(!1),[l,u]=G.useState({}),[d,h]=G.useState(null),{data:f}=ene();G.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const N=await tre(n);s(N);const I={};N.forEach(k=>{I[k.id]=0}),u(I)}catch(N){h(N.message)}finally{o(!1)}},g=(N,I)=>{u(k=>({...k,[N]:Math.max(0,I)}))},m=async()=>{const N=Object.entries(l).filter(([,I])=>I>0).map(([I,k])=>({id:I,quantity:k}));if(N.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const I=await nre(n,N);if(I.success&&I.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const k=await f.sendTransaction({to:I.mintTransaction.to,value:BigInt(I.mintTransaction.value),data:I.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${k}`),e()}catch(k){h("Transaction failed: "+k.message)}}else throw new Error(I.message||"Could not retrieve minting transaction.")}catch(I){h("Minting failed: "+I.message)}finally{c(!1)}},y=(N,I)=>`${parseFloat(N)} ${I}`,w={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},C={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return b.jsxs(iu,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&b.jsx("div",{style:C,children:d}),i?b.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(N=>b.jsxs("div",{style:w,children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:N.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(N.token_price,N.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",N.wallet_limit===4294967295?"Unlimited":N.wallet_limit," per wallet"]}),b.jsx("input",{type:"number",min:0,max:N.wallet_limit===4294967295?void 0:N.wallet_limit,value:l[N.id]||"",onChange:I=>g(N.id,parseInt(I.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),b.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},N.id))]}),b.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:m,disabled:a,children:a?"Minting...":"Mint"})]})]})},Uqe=zu({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),Lqe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],$qe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],Fqe=()=>{const t=Uqe(),{open:e}=nN(),{address:n,isConnected:r}=kC(),{isPending:s}=Jte(),{disconnect:i}=Zte(),{data:o}=Xte({address:n}),[a,c]=G.useState("main"),[l,u]=G.useState(!1),[d,h]=G.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=G.useState(!1),[g,m]=G.useState(!1),[y,w]=G.useState(!1),[C,N]=G.useState(!1),[I,k]=G.useState(!1),[P,U]=G.useState(!1),[M,H]=G.useState(!1),[j,K]=G.useState(!1),[$,v]=G.useState(!1),[E,_]=G.useState(!1),[D,x]=G.useState(!1),[B,W]=G.useState(!1),L=[{label:"Mint",icon:"/assets/mint.gif",action:()=>m(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>w(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>N(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>k(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],S=se=>{se.disabled||se.action()};if(G.useEffect(()=>{const se=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(se)},[]),G.useEffect(()=>{u(!0)},[]),a==="gallery")return b.jsx(Dqe,{onBack:()=>c("main"),walletAddress:n||void 0});function F({open:se,onClose:ge,title:Ue,nfts:Le}){const Be=Ut=>{switch(Ut){case"lawbsters":U(!0);break;case"lawbstarz":H(!0);break;case"pixelawbs":K(!0);break;case"halloween":v(!0);break;case"lawbstation":_(!0);break;case"nexus":x(!0);break}};return b.jsx(iu,{isOpen:se,onClose:ge,title:Ue,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:Le.map(Ut=>b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>Be(Ut.id),children:[b.jsx("img",{src:Ut.image,alt:Ut.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),b.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:Ut.name}),b.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:Ut.description})]},Ut.id))})})}function X({open:se,onClose:ge}){return se?b.jsxs(iu,{isOpen:se,onClose:ge,title:"$LAWB",children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return b.jsxs("div",{className:t.mobileContainer,children:[b.jsx("header",{className:t.header,children:b.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),b.jsx("div",{className:t.iconGrid,children:L.map(se=>b.jsxs("div",{className:t.icon,onClick:()=>S(se),children:[b.jsx("img",{src:se.icon,alt:se.label}),b.jsx("span",{children:se.label})]},se.label))}),l&&b.jsxs(iu,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),m(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&b.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:b.jsxs("div",{className:t.menuModal,onClick:se=>se.stopPropagation(),children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),b.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),W(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),b.jsx(Bqe,{isOpen:g,onClose:()=>m(!1),walletAddress:n||""}),b.jsx(F,{open:y,onClose:()=>w(!1),title:"EVM NFT'S FOLDER",nfts:Lqe}),b.jsx(F,{open:C,onClose:()=>N(!1),title:"SOL NFTS FOLDER",nfts:$qe}),b.jsx(X,{open:I,onClose:()=>k(!1)}),b.jsxs(iu,{isOpen:P,onClose:()=>U(!1),title:"Lawbsters",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(iu,{isOpen:M,onClose:()=>H(!1),title:"Lawbstarz",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(iu,{isOpen:j,onClose:()=>K(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{K(!1),m(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),b.jsxs(iu,{isOpen:$,onClose:()=>v(!1),title:"A Lawbster Halloween",children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),b.jsxs(iu,{isOpen:E,onClose:()=>_(!1),title:"Lawbstation",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(iu,{isOpen:D,onClose:()=>x(!1),title:"Nexus",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsx(iu,{isOpen:B,onClose:()=>W(!1),title:"Meme Generator",children:b.jsx(woe,{})}),b.jsxs("div",{className:t.taskbar,children:[b.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),b.jsxs("div",{className:t.walletStatus,children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),b.jsx("span",{className:t.clock,children:d})]})]})};function jqe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=G.useState(e(t));function s(){r(e(t))}return G.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const Wqe=Symbol(),vq=Object.getPrototypeOf,OL=new WeakMap,zqe=t=>t&&(OL.has(t)?OL.get(t):vq(t)===Object.prototype||vq(t)===Array.prototype),Hqe=t=>zqe(t)&&t[Wqe]||null,Eq=(t,e=!0)=>{OL.set(t,e)},yk={},H4=t=>typeof t=="object"&&t!==null,Gqe=t=>H4(t)&&!rN.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),koe=(t,e)=>{const n=DL.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return Eq(r,!0),DL.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(rN.has(i))Eq(i,!1);else if(pm.has(i)){const[c,l]=pm.get(i);a.value=koe(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},qqe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(Cq(l,o)||xS.has(o)&&Cq(l,xS.get(o))))return!0;n(i),H4(o)&&(o=Hqe(o)||o);const u=!pm.has(o)&&Kqe(o)?Es(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),pm=new WeakMap,rN=new WeakSet,DL=new WeakMap,s_=[1,1],xS=new WeakMap;let Cq=Object.is,Vqe=(t,e)=>new Proxy(t,e),Kqe=Gqe,Yqe=koe,Qqe=qqe;function Es(t={}){if(!H4(t))throw new Error("object required");const e=xS.get(t);if(e)return e;let n=s_[0];const r=new Set,s=(m,y=++s_[0])=>{n!==y&&(n=y,r.forEach(w=>w(m,y)))};let i=s_[1];const o=(m=++s_[1])=>(i!==m&&!r.size&&(i=m,c.forEach(([y])=>{const w=y[1](m);w>n&&(n=w)})),n),a=m=>(y,w)=>{const C=[...y];C[1]=[m,...C[1]],s(C,w)},c=new Map,l=(m,y)=>{const w=!rN.has(y)&&pm.get(y);if(w){if((yk?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(r.size){const C=w[2](a(m));c.set(m,[w,C])}else c.set(m,[w])}},u=m=>{var y;const w=c.get(m);w&&(c.delete(m),(y=w[1])==null||y.call(w))},d=m=>(r.add(m),r.size===1&&c.forEach(([w,C],N)=>{if((yk?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const I=w[2](a(N));c.set(N,[w,I])}),()=>{r.delete(m),r.size===0&&c.forEach(([w,C],N)=>{C&&(C(),c.set(N,[w]))})});let h=!0;const f=Qqe(()=>h,l,u,s),p=Vqe(t,f);xS.set(t,p);const g=[t,o,d];return pm.set(p,g),Reflect.ownKeys(t).forEach(m=>{const y=Object.getOwnPropertyDescriptor(t,m);"value"in y&&y.writable&&(p[m]=t[m])}),h=!1,p}function dc(t,e,n){const r=pm.get(t);(yk?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function TS(t){const e=pm.get(t);(yk?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return Yqe(n,r())}function eC(t){return rN.add(t),t}function Jqe(){return{proxyStateMap:pm,refSet:rN,snapCache:DL,versionHolder:s_,proxyCache:xS}}function Ea(t,e,n,r){let s=t[e];return dc(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:Zqe,snapCache:Xqe}=Jqe(),Nx=t=>Zqe.has(t);function eVe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=Xqe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return Nx(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!Nx(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!Nx(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!Nx(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Es(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var _q={};const Ie={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof _q<"u"?_q.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},wk={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Ie.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},tVe={bigNumber(t){return t?new ia(t):new ia(0)},multiply(t,e){if(t===void 0||e===void 0)return new ia(0);const n=new ia(t),r=new ia(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},nVe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],rVe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],sVe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],iVe={getERC20Abi:t=>Ie.USDT_CONTRACT_ADDRESSES.includes(t)?sVe:nVe,getSwapAbi:()=>rVe},_g={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},hn={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function cM(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const tn={setItem(t,e){i_()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(i_())return localStorage.getItem(t)||void 0},removeItem(t){i_()&&localStorage.removeItem(t)},clear(){i_()&&localStorage.clear()}};function i_(){return typeof window<"u"&&typeof localStorage<"u"}function bk(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const ca={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[Ie.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},xt={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=xt.getActiveNamespace(),e=xt.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{tn.setItem(hn.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=tn.getItem(hn.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{tn.removeItem(hn.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{tn.setItem(hn.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{tn.setItem(hn.ACTIVE_CAIP_NETWORK_ID,t),xt.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return tn.getItem(hn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{tn.removeItem(hn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=cM(t);tn.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=xt.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),tn.setItem(hn.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=tn.getItem(hn.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=cM(t);tn.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return tn.getItem(hn.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=cM(t);return tn.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{tn.setItem(hn.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return tn.getItem(hn.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{tn.removeItem(hn.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return tn.getItem(hn.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=tn.getItem(hn.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{tn.setItem(hn.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return tn.getItem(hn.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=tn.getItem(hn.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));tn.setItem(hn.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=xt.getConnectedNamespaces();e.includes(t)||(e.push(t),xt.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=xt.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),xt.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return tn.getItem(hn.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{tn.setItem(hn.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{tn.removeItem(hn.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=tn.getItem(hn.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=xt.getBalanceCache();tn.setItem(hn.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=xt.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;xt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=xt.getBalanceCache();e[t.caipAddress]=t,tn.setItem(hn.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=tn.getItem(hn.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=xt.getBalanceCache();tn.setItem(hn.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=xt.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),xt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=xt.getNativeBalanceCache();e[t.caipAddress]=t,tn.setItem(hn.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=tn.getItem(hn.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=xt.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;xt.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=xt.getEnsCache();e[t.address]=t,tn.setItem(hn.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=xt.getEnsCache();tn.setItem(hn.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=tn.getItem(hn.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=xt.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;xt.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=xt.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},tn.setItem(hn.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=xt.getIdentityCache();tn.setItem(hn.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{tn.removeItem(hn.PORTFOLIO_CACHE),tn.removeItem(hn.NATIVE_BALANCE_CACHE),tn.removeItem(hn.ENS_CACHE),tn.removeItem(hn.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{tn.setItem(hn.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=tn.getItem(hn.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=xt.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===Ie.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};tn.setItem(hn.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=tn.getItem(hn.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=xt.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),tn.setItem(hn.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=tn.getItem(hn.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=xt.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),tn.setItem(hn.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=xt.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),tn.setItem(hn.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(xt.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Ht={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ht.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ca.TEN_SEC_MS:!0},isAllowedRetry(t,e=ca.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Ht.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ca.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Ht.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Ht.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?xt.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Ht.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Ie.W3M_API_URL},getBlockchainApiUrl(){return Ie.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Ie.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?ca.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Ie.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function O1(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let sN=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await O1(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await O1(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await O1(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await O1(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await O1(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const oVe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?ca.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ht.isTelegram()){if(Ht.isIos())return t.filter(e=>e!=="google");if(Ht.isMac())return t.filter(e=>e!=="x");if(Ht.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Vt=Es({features:ca.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ca.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),wn={state:Vt,subscribeKey(t,e){return Ea(Vt,t,e)},setOptions(t){Object.assign(Vt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Vt.remoteFeatures,...t};Vt.remoteFeatures=e,(n=Vt.remoteFeatures)!=null&&n.socials&&(Vt.remoteFeatures.socials=oVe.filterSocialsByPlatform(Vt.remoteFeatures.socials))},setFeatures(t){if(!t)return;Vt.features||(Vt.features=ca.DEFAULT_FEATURES);const e={...Vt.features,...t};Vt.features=e},setProjectId(t){Vt.projectId=t},setCustomRpcUrls(t){Vt.customRpcUrls=t},setAllWallets(t){Vt.allWallets=t},setIncludeWalletIds(t){Vt.includeWalletIds=t},setExcludeWalletIds(t){Vt.excludeWalletIds=t},setFeaturedWalletIds(t){Vt.featuredWalletIds=t},setTokens(t){Vt.tokens=t},setTermsConditionsUrl(t){Vt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Vt.privacyPolicyUrl=t},setCustomWallets(t){Vt.customWallets=t},setIsSiweEnabled(t){Vt.isSiweEnabled=t},setIsUniversalProvider(t){Vt.isUniversalProvider=t},setSdkVersion(t){Vt.sdkVersion=t},setMetadata(t){Vt.metadata=t},setDisableAppend(t){Vt.disableAppend=t},setEIP6963Enabled(t){Vt.enableEIP6963=t},setDebug(t){Vt.debug=t},setEnableWalletConnect(t){Vt.enableWalletConnect=t},setEnableWalletGuide(t){Vt.enableWalletGuide=t},setEnableAuthLogger(t){Vt.enableAuthLogger=t},setEnableWallets(t){Vt.enableWallets=t},setPreferUniversalLinks(t){Vt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(ca.SIWX_DEFAULTS))t[e]??(t[e]=n);Vt.siwx=t},setConnectMethodsOrder(t){Vt.features={...Vt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Vt.features={...Vt.features,walletFeaturesOrder:t}},setSocialsOrder(t){Vt.remoteFeatures={...Vt.remoteFeatures,socials:t}},setCollapseWallets(t){Vt.features={...Vt.features,collapseWallets:t}},setEnableEmbedded(t){Vt.enableEmbedded=t},setAllowUnsupportedChain(t){Vt.allowUnsupportedChain=t},setManualWCControl(t){Vt.manualWCControl=t},setEnableNetworkSwitch(t){Vt.enableNetworkSwitch=t},setEnableReconnect(t){Vt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Vt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Vt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Vt.universalProviderConfigOverride},getSnapshot(){return TS(Vt)}},aVe=Object.freeze({enabled:!0,events:[]}),cVe=new sN({baseUrl:Ht.getAnalyticsUrl(),clientId:null}),lVe=5,uVe=60*1e3,pp=Es({...aVe}),dVe={state:pp,subscribeKey(t,e){return Ea(pp,t,e)},async sendError(t,e){if(!pp.enabled)return;const n=Date.now();if(pp.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<uVe}).length>=lVe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};pp.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=wn.state;await cVe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Ht.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){pp.enabled=!0},disable(){pp.enabled=!1},clearEvents(){pp.events=[]}};let ML=class BL extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,BL.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,BL):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function Aq(t,e){const n=t instanceof ML?t:new ML(t instanceof Error?t.message:String(t),e,t);throw dVe.sendError(n,n.category),n}function Yl(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return Aq(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return Aq(a,e)}},n[r]=i}else n[r]=s}),n}var tC={};const hVe="https://secure.walletconnect.org/sdk",fVe=(typeof process<"u"&&typeof tC<"u"?tC.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||hVe,pVe=(typeof process<"u"&&typeof tC<"u"?tC.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",gVe=(typeof process<"u"&&typeof tC<"u"?tC.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",_t={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},mo={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},xd={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},mVe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===xd.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${xd.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===xd.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${xd.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Ie.CHAIN.SOLANA&&t===xd.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${xd.COINBASE.url}/dapp?cb_url=${r}`)}},bc=Es({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),yVe={state:bc,subscribeNetworkImages(t){return dc(bc.networkImages,()=>t(bc.networkImages))},subscribeKey(t,e){return Ea(bc,t,e)},subscribe(t){return dc(bc,()=>t(bc))},setWalletImage(t,e){bc.walletImages[t]=e},setNetworkImage(t,e){bc.networkImages[t]=e},setChainImage(t,e){bc.chainImages[t]=e},setConnectorImage(t,e){bc.connectorImages={...bc.connectorImages,[t]:e}},setTokenImage(t,e){bc.tokenImages[t]=e},setCurrencyImage(t,e){bc.currencyImages[t]=e}},Eu=Yl(yVe),wVe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},lM=Es({networkImagePromises:{}}),bVe={async fetchWalletImage(t){if(t)return await rn._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(lM.networkImagePromises[t]||(lM.networkImagePromises[t]=rn._fetchNetworkImage(t)),await lM.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Eu.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Eu.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Eu.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Eu.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Eu.state.connectorImages[t.imageId]},getChainImage(t){return Eu.state.networkImages[wVe[t]]}},gp=Es({message:"",variant:"info",open:!1}),vVe={state:gp,subscribeKey(t,e){return Ea(gp,t,e)},open(t,e){const{debug:n}=wn.state,{shortMessage:r,longMessage:s}=t;n&&(gp.message=r,gp.variant=e,gp.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){gp.open=!1,gp.message="",gp.variant="info"}},Jm=Yl(vVe),EVe=Ht.getAnalyticsUrl(),CVe=new sN({baseUrl:EVe,clientId:null}),_Ve=["MODAL_CREATED"],xh=Es({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Ps={state:xh,subscribe(t){return dc(xh,()=>t(xh))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=wn.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=wr.state.address;if(_Ve.includes(t.data.event)||typeof window>"u")return;await CVe.post({path:"/e",params:Ps.getSdkProperties(),body:{eventId:Ht.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),xh.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Ie.HTTP_STATUS_CODES.FORBIDDEN&&!xh.reportedErrors.FORBIDDEN&&(Jm.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${i_()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),xh.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;xh.timestamp=Date.now(),xh.data=t,(e=wn.state.features)!=null&&e.analytics&&Ps._sendAnalyticsEvent(xh)}},AVe=Ht.getApiUrl(),ka=new sN({baseUrl:AVe,clientId:null}),SVe=40,Sq=4,IVe=20,Sn=Es({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),rn={state:Sn,subscribeKey(t,e){return Ea(Sn,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=wn.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return wn.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${ka.baseUrl}/getWalletImage/${t}`,n=await ka.getBlob({path:e,params:rn._getSdkProperties()});Eu.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${ka.baseUrl}/public/getAssetImage/${t}`,n=await ka.getBlob({path:e,params:rn._getSdkProperties()});Eu.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${ka.baseUrl}/public/getAssetImage/${t}`,n=await ka.getBlob({path:e,params:rn._getSdkProperties()});Eu.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${ka.baseUrl}/public/getCurrencyImage/${t}`,n=await ka.getBlob({path:e,params:rn._getSdkProperties()});Eu.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${ka.baseUrl}/public/getTokenImage/${t}`,n=await ka.getBlob({path:e,params:rn._getSdkProperties()});Eu.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Ht.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===xd.COINBASE.id?!0:ie.state.activeChain==="solana"&&(n.id===xd.SOLFLARE.id||n.id===xd.PHANTOM.id)):t},async fetchProjectConfig(){return(await ka.get({path:"/appkit/v1/config",params:rn._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await ka.get({path:"/projects/v1/origins",params:rn._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===Ie.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=Ie.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=ie.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!bVe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>rn._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Bt.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>rn._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>rn._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>rn._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];rn._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(xd).map(o=>o.id));const r=await ka.get({path:"/getWallets",params:{...rn._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:rn._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=wn.state;if(t!=null&&t.length){const e={...rn._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??Sq,include:t},{data:n}=await rn.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>rn._fetchWalletImage(i))),Sn.featured=r,Sn.allFeatured=r}},async fetchRecommendedWallets(){try{Sn.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=wn.state,r=[...e??[],...n??[]].filter(Boolean),s=ie.getRequestedCaipNetworkIds().join(","),i={page:1,entries:Sq,include:t,exclude:r,chains:s},{data:o,count:a}=await rn.fetchWallets(i),c=xt.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>rn._fetchWalletImage(d))),Sn.recommended=o,Sn.allRecommended=o,Sn.count=a??0}catch{}finally{Sn.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=wn.state,s=ie.getRequestedCaipNetworkIds().join(","),i=[...Sn.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:SVe,include:e,exclude:i,chains:s},{data:a,count:c}=await rn.fetchWallets(o),l=a.slice(0,IVe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>rn._fetchWalletImage(u))),Sn.wallets=Ht.uniqueBy([...Sn.wallets,...rn._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Sn.count=c>Sn.count?c:Sn.count,Sn.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await rn.fetchWallets(e);n&&n.forEach(r=>{Sn.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=wn.state,s=ie.getRequestedCaipNetworkIds().join(",");Sn.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await rn.fetchWallets(i);Ps.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>rn._fetchWalletImage(c)),Ht.wait(300)]),Sn.search=rn._filterOutExtensions(o)},initPromise(t,e){const n=Sn.promises[t];return n||(Sn.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&rn.initPromise("connectorImages",rn.fetchConnectorImages),e&&rn.initPromise("featuredWallets",rn.fetchFeaturedWallets),n&&rn.initPromise("recommendedWallets",rn.fetchRecommendedWallets),r&&rn.initPromise("networkImages",rn.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=wn.state.features)!=null&&t.analytics&&rn.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await ka.get({path:"/getAnalyticsConfig",params:rn._getSdkProperties()});wn.setFeatures({analytics:t})}catch{wn.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Sn.featured=Sn.allFeatured,Sn.recommended=Sn.allRecommended;return}const e=ie.getRequestedCaipNetworkIds().join(",");Sn.featured=Sn.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Sn.recommended=Sn.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Sn.filteredWallets=Sn.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Sn.filteredWallets=[]},setFilterByNamespace(t){if(!t){Sn.featured=Sn.allFeatured,Sn.recommended=Sn.allRecommended;return}const e=ie.getRequestedCaipNetworkIds().join(",");Sn.featured=Sn.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Sn.recommended=Sn.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Sn.filteredWallets=Sn.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},$r=Es({view:"Connect",history:["Connect"],transactionStack:[]}),NVe={state:$r,subscribeKey(t,e){return Ea($r,t,e)},pushTransactionStack(t){$r.transactionStack.push(t)},popTransactionStack(t){const e=$r.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),gn.goBack();break;case"cancel":s==null||s(),gn.goBack();break}},push(t,e){t!==$r.view&&($r.view=t,$r.history.push(t),$r.data=e)},reset(t,e){$r.view=t,$r.history=[t],$r.data=e},replace(t,e){$r.history.at(-1)===t||($r.view=t,$r.history[$r.history.length-1]=t,$r.data=e)},goBack(){var r;const t=ie.state.activeCaipAddress,e=gn.state.view==="ConnectingFarcaster",n=!t&&e;if($r.history.length>1){$r.history.pop();const[s]=$r.history.slice(-1);s&&(t&&s==="Connect"?$r.view="Account":$r.view=s)}else is.close();(r=$r.data)!=null&&r.wallet&&($r.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){wr.setFarcasterUrl(void 0,ie.state.activeChain);const a=Bt.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=TS(wn.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if($r.history.length>1){$r.history=$r.history.slice(0,t+1);const[e]=$r.history.slice(-1);e&&($r.view=e)}},goBackOrCloseModal(){gn.state.history.length>1?gn.goBack():is.close()}},gn=Yl(NVe),Th=Es({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),UL={state:Th,subscribe(t){return dc(Th,()=>t(Th))},setThemeMode(t){Th.themeMode=t;try{const e=Bt.getAuthConnector();if(e){const n=UL.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:bk(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Th.themeVariables={...Th.themeVariables,...t};try{const e=Bt.getAuthConnector();if(e){const n=UL.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:bk(Th.themeVariables,Th.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return TS(Th)}},xx=Yl(UL),Poe={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},ur=Es({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...Poe},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),xVe={state:ur,subscribe(t){return dc(ur,()=>{t(ur)})},subscribeKey(t,e){return Ea(ur,t,e)},initialize(t){t.forEach(e=>{const n=xt.getConnectedConnectorId(e);n&&Bt.setConnectorId(n,e)})},setActiveConnector(t){t&&(ur.activeConnector=eC(t))},setConnectors(t){t.filter(s=>!ur.allConnectors.some(i=>i.id===s.id&&Bt.getConnectorName(i.name)===Bt.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&ur.allConnectors.push(eC(s))});const n=Bt.getEnabledNamespaces(),r=Bt.getEnabledConnectors(n);ur.connectors=Bt.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(ur.filterByNamespaceMap).forEach(e=>{ur.filterByNamespaceMap[e]=!1}),t.forEach(e=>{ur.filterByNamespaceMap[e]=!0}),Bt.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){ur.filterByNamespaceMap[t]=e,Bt.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Bt.getEnabledNamespaces(),e=Bt.getEnabledConnectors(t),n=Bt.areAllNamespacesEnabled();ur.connectors=Bt.mergeMultiChainConnectors(e),n?rn.clearFilterByNamespaces():rn.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(ur.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return ur.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(ur.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Bt.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Ie.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Bt.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Ie.CONNECTOR_ID.AUTH){const s=t,i=TS(wn.state),o=xx.getSnapshot().themeMode,a=xx.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:bk(a,o)}),Bt.setConnectors([t])}else Bt.setConnectors([t])},getAuthConnector(t){var r;const e=t||ie.state.activeChain,n=ur.connectors.find(s=>s.id===Ie.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return ur.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return ur.allConnectors.find(e=>e.id===t)},getConnector(t,e){return ur.allConnectors.filter(r=>r.chain===ie.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=TS(wn.state),r=xx.getSnapshot().themeMode,s=xx.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:bk(s,r)})},getConnectorsByNamespace(t){const e=ur.allConnectors.filter(n=>n.chain===t);return Bt.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return ie.checkIfSmartAccountEnabled()&&th(t)===mo.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Bt.getConnector(t.id,t.rdns);mVe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,ie.state.activeChain),e?gn.push("ConnectingExternal",{connector:e}):gn.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Bt.getConnectorsByNamespace(t):Bt.mergeMultiChainConnectors(ur.allConnectors)},setFilterByNamespace(t){ur.filterByNamespace=t,ur.connectors=Bt.getConnectors(t),rn.setFilterByNamespace(t)},setConnectorId(t,e){t&&(ur.activeConnectorIds={...ur.activeConnectorIds,[e]:t},xt.setConnectedConnectorId(e,t))},removeConnectorId(t){ur.activeConnectorIds={...ur.activeConnectorIds,[t]:void 0},xt.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return ur.activeConnectorIds[t]},isConnected(t){return t?!!ur.activeConnectorIds[t]:Object.values(ur.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ur.activeConnectorIds={...Poe}}},Bt=Yl(xVe),TVe=1e3,D1={checkNamespaceConnectorId(t,e){return Bt.getConnectorId(t)===e},isSocialProvider(t){return ca.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Bt.setActiveConnector(e),s==null||s(Ht.isMobile()&&t),r){const l=is.subscribeKey("open",u=>{u||(gn.state.view!==r&&gn.replace(r),l(),a(new Error("Modal closed")))})}const c=ie.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&is.close(),c(),o(_g.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=ie.subscribeKey("activeCaipAddress",s=>{s&&(is.close(),r(),e(_g.parseCaipAddress(s)))});Dt.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=wr.state.socialWindow,i=wr.state.socialProvider,o=!1,a=null;const c=ie.subscribeKey("activeCaipAddress",l=>{l&&(e&&is.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===Ie.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=Bt.getAuthConnector();if(g&&!o){s&&(s.close(),wr.setSocialWindow(void 0,ie.state.activeChain),s=wr.state.socialWindow),o=!0;const m=f.data.resultUri;i&&Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=ie.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:m,chainId:y==null?void 0:y.caipNetworkId}),i){xt.setConnectedSocialProvider(i),await Dt.connectExternal({id:g.id,type:g.type,socialUri:m},g.chain);const w=ie.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(_g.parseCaipAddress(w)),Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(wr.setSocialProvider(t,ie.state.activeChain),i=wr.state.socialProvider,Ps.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=is.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Bt.getAuthConnector();if(p&&!wr.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();wr.setFarcasterUrl(g,ie.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Bt.getAuthConnector();a=Ht.returnOpenHref(`${Ie.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){wr.setSocialWindow(a,ie.state.activeChain),s=wr.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=is.subscribeKey("open",c=>{c||(gn.state.view!==e&&gn.replace(e),a(),i(new Error("Modal closed")))})}const o=ie.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&is.close(),o(),s(_g.parseCaipAddress(a)))})})},async updateEmail(){const t=xt.getConnectedConnectorId(ie.state.activeChain),e=Bt.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==Ie.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return gn.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(is.close(),clearInterval(i),o(),r({email:a}))},TVe),o=is.subscribeKey("open",a=>{a||(gn.state.view!=="Connect"&&gn.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return ie.checkIfSmartAccountEnabled()&&th(t)===mo.ACCOUNT_TYPES.EOA}};function Ooe(){var r,s;const t=((r=ie.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=ie.state.activeCaipNetwork)==null?void 0:s.id)||1,n=ca.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function th(t){var n;return(n=ie.getAccountData(t))==null?void 0:n.preferredAccountType}const Doe={getConnectionStatus(t,e){const n=Bt.state.activeConnectorIds[e],r=Dt.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=wn.state.remoteFeatures)!=null&&a.multiWallet),n=Bt.state.activeConnectorIds[t],r=Dt.getConnections(t),i=(Dt.state.recentConnections.get(t)??[]).filter(c=>Bt.getConnectorById(c.connectorId)),o=Doe.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},Zm=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),hi=Es({...Zm}),RVe={state:hi,subscribeKey(t,e){return Ea(hi,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ht.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){hi.message=Zm.message,hi.variant=Zm.variant,hi.svg=Zm.svg,hi.open=Zm.open,hi.autoClose=Zm.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Zm.autoClose}){hi.open?(hi.open=!1,setTimeout(()=>{hi.message=t,hi.variant=n,hi.svg=e,hi.open=!0,hi.autoClose=r},150)):(hi.message=t,hi.variant=n,hi.svg=e,hi.open=!0,hi.autoClose=r)}},Ag=RVe,ts=Es({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),kVe={state:ts,subscribe(t){return dc(ts,()=>t(ts))},setLastNetworkInView(t){ts.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");ts.loading=!0;try{const r=await un.fetchTransactions({account:t,cursor:ts.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=o_.filterSpamTransactions(r.data),i=o_.filterByConnectedChain(s),o=[...ts.transactions,...i];ts.loading=!1,e==="coinbase"?ts.coinbaseTransactions=o_.groupTransactionsByYearAndMonth(ts.coinbaseTransactions,r.data):(ts.transactions=o,ts.transactionsByYear=o_.groupTransactionsByYearAndMonth(ts.transactionsByYear,i)),ts.empty=o.length===0,ts.next=r.next?r.next:void 0}catch{const s=ie.state.activeChain;Ps.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:wn.state.projectId,cursor:ts.next,isSmartAccount:th(s)===mo.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ag.showError("Failed to fetch transactions"),ts.loading=!1,ts.empty=!0,ts.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=ie.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){ts.next=void 0},resetTransactions(){ts.transactions=[],ts.transactionsByYear={},ts.lastNetworkInView=void 0,ts.loading=!1,ts.empty=!1,ts.next=void 0}},o_=Yl(kVe,"API_ERROR"),Zn=Es({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Fm;const PVe={state:Zn,subscribe(t){return dc(Zn,()=>t(Zn))},subscribeKey(t,e){return Ea(Zn,t,e)},_getClient(){return Zn._client},setClient(t){Zn._client=eC(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Dt.syncStorageConnections(e)},syncStorageConnections(t){const e=xt.getConnections(),n=t??Array.from(ie.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Zn.recentConnections);i.set(r,s),Zn.recentConnections=i}},getConnections(t){return t?Zn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Dt.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(Ht.isTelegram()||Ht.isSafari()&&Ht.isIos()){if(Fm){await Fm,Fm=void 0;return}if(!Ht.isPairingExpired(Zn==null?void 0:Zn.wcPairingExpiry)){const s=Zn.wcUri;Zn.wcUri=s;return}Fm=(e=(t=Dt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Dt.state.status="connecting",await Fm,Fm=void 0,Zn.wcPairingExpiry=void 0,Dt.state.status="connected"}else await((r=(n=Dt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Dt._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&ie.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Dt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||ie.state.activeChain;e&&Bt.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;is.setLoading(!0,ie.state.activeChain);const n=Bt.getAuthConnector();n&&(wr.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),xt.setPreferredAccountTypes(Object.entries(ie.state.chains).reduce((s,[i,o])=>{const a=i,c=th(a);return c!==void 0&&(s[a]=c),s},{})),await Dt.reconnectExternal(n),is.setLoading(!1,ie.state.activeChain),Ps.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=ie.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Dt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Dt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Dt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Dt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Dt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Dt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Dt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Dt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Dt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Dt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Dt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Dt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Zn.wcUri=void 0,Zn.wcPairingExpiry=void 0,Zn.wcLinking=void 0,Zn.recentWallet=void 0,Zn.status="disconnected",o_.resetTransactions(),xt.deleteWalletConnectDeepLink()},resetUri(){Zn.wcUri=void 0,Zn.wcPairingExpiry=void 0,Fm=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Dt.state;t&&xt.setWalletConnectDeepLink(t),e&&xt.setAppKitRecent(e),Ps.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=gn.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Zn.wcBasic=t},setUri(t){Zn.wcUri=t,Zn.wcPairingExpiry=Ht.getPairingExpiry()},setWcLinking(t){Zn.wcLinking=t},setWcError(t){Zn.wcError=t,Zn.buffering=!1},setRecentWallet(t){Zn.recentWallet=t},setBuffering(t){Zn.buffering=t},setStatus(t){Zn.status=t},setIsSwitchingConnection(t){Zn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=Dt._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new ML("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Zn.connections);n.set(e,t),Zn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=wr.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&D1.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Dt.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Bt.getConnectorById(t.connectorId),s=t.connectorId===Ie.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await Dt.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await Dt.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Bt.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===Ie.CONNECTOR_ID.AUTH,a=t.connectorId===Ie.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&D1.isSocialProvider(i)){const{address:d}=await D1.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){is.open({view:"ConnectingFarcaster"})},onConnect(){gn.replace("ProfileWallets")}});c=d}else{const{address:d}=await D1.connectEmail({closeModalOnConnect:r,onOpen(){is.open({view:"EmailLogin"})},onConnect(){gn.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await D1.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){is.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){gn.replace("ProfileWallets")}});c=d}else{const d=await Dt.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Dt.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=wr.getCaipAddress(n);if(o){const{address:c}=_g.parseCaipAddress(o);i=c}const a=Doe.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Dt.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Dt.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Dt=Yl(PVe),ab=Es({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),fv={state:ab,subscribe(t){return dc(ab,()=>t(ab))},subscribeOpen(t){return Ea(ab,"open",t)},set(t){Object.assign(ab,{...ab,...t})}},OVe={async getTokenList(){var r;const t=ie.state.activeCaipNetwork,e=await un.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=ie.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Dt==null?void 0:Dt.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await un.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await un.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Dt.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await G4.getMyTokensWithBalance(t);return wr.setTokenBalance(e,ie.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Ooe(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},kr=Es({tokenBalances:[],loading:!1}),DVe={state:kr,subscribe(t){return dc(kr,()=>t(kr))},subscribeKey(t,e){return Ea(kr,t,e)},setToken(t){t&&(kr.token=eC(t))},setTokenAmount(t){kr.sendTokenAmount=t},setReceiverAddress(t){kr.receiverAddress=t},setReceiverProfileImageUrl(t){kr.receiverProfileImageUrl=t},setReceiverProfileName(t){kr.receiverProfileName=t},setNetworkBalanceInUsd(t){kr.networkBalanceInUSD=t},setLoading(t){kr.loading=t},async sendToken(){var t;try{switch(Ar.setLoading(!0),(t=ie.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Ar.sendEvmToken();return;case"solana":await Ar.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Ar.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=ie.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=th(t);if(!Ar.state.sendTokenAmount||!Ar.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Ar.state.token)throw new Error("A token is required");(n=Ar.state.token)!=null&&n.address?(Ps.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===mo.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ar.state.token.address,amount:Ar.state.sendTokenAmount,network:((r=ie.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Ar.sendERC20Token({receiverAddress:Ar.state.receiverAddress,tokenAddress:Ar.state.token.address,sendTokenAmount:Ar.state.sendTokenAmount,decimals:Ar.state.token.quantity.decimals})):(Ps.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===mo.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ar.state.token.symbol||"",amount:Ar.state.sendTokenAmount,network:((s=ie.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Ar.sendNativeToken({receiverAddress:Ar.state.receiverAddress,sendTokenAmount:Ar.state.sendTokenAmount,decimals:Ar.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;kr.loading=!0;const e=(i=ie.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=ie.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=ie.state.activeCaipAddress,s=r?Ht.getPlainAddress(r):void 0;if(kr.lastRetry&&!Ht.isAllowedRetry(kr.lastRetry,30*ca.ONE_SEC_MS))return kr.loading=!1,[];try{if(s&&e&&n){const a=await G4.getMyTokensWithBalance();return kr.tokenBalances=a,kr.lastRetry=void 0,a}}catch(a){kr.lastRetry=Date.now(),t==null||t(a),Ag.showError("Token Balance Unavailable")}finally{kr.loading=!1}return[]},fetchNetworkBalance(){if(kr.tokenBalances.length===0)return;const t=OVe.mapBalancesToSwapTokens(kr.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Ooe());e&&(kr.networkBalanceInUSD=e?tVe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;gn.pushTransactionStack({});const e=t.receiverAddress,n=wr.state.address,r=Dt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Dt.sendTransaction({chainNamespace:Ie.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Ps.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:th("eip155")===mo.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Ar.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=ie.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=Dt._getClient())==null||a.updateBalance("eip155"),Ar.resetSend()},async sendERC20Token(t){gn.pushTransactionStack({onSuccess(){gn.replace("Account")}});const e=Dt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(wr.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Ht.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Dt.writeContract({fromAddress:wr.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:iVe.getERC20Abi(n),chainNamespace:Ie.CHAIN.EVM}),Ar.resetSend()}},async sendSolanaToken(){var t;if(!Ar.state.sendTokenAmount||!Ar.state.receiverAddress)throw new Error("An amount and receiver address are required");gn.pushTransactionStack({onSuccess(){gn.replace("Account")}}),await Dt.sendTransaction({chainNamespace:"solana",to:Ar.state.receiverAddress,value:Ar.state.sendTokenAmount}),(t=Dt._getClient())==null||t.updateBalance("solana"),Ar.resetSend()},resetSend(){kr.token=void 0,kr.sendTokenAmount=void 0,kr.receiverAddress=void 0,kr.receiverProfileImageUrl=void 0,kr.receiverProfileName=void 0,kr.loading=!1,kr.tokenBalances=[]}},Ar=Yl(DVe),uM={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Tx={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Xe=Es({chains:eVe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),MVe={state:Xe,subscribe(t){return dc(Xe,()=>{t(Xe)})},subscribeKey(t,e){return Ea(Xe,t,e)},subscribeChainProp(t,e,n){let r;return dc(Xe.chains,()=>{var i;const s=n||Xe.activeChain;if(s){const o=(i=Xe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=xt.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=wn.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Xe.noAdapters=!0),Xe.noAdapters||(Xe.activeChain=a==null?void 0:a.namespace,Xe.activeCaipNetwork=i,ie.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Xe.activeChain&&fv.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=xt.getPreferredAccountTypes()||{},f={...wn.state.defaultAccountTypes,...h};ie.state.chains.set(u,{namespace:u,networkState:Es({...Tx,caipNetwork:d==null?void 0:d[0]}),accountState:Es({...uM,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),ie.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Xe.activeChain===t){const r=Array.from(Xe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&ie.setActiveCaipNetwork(s)}}Xe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Xe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Tx,caipNetwork:r[0]},accountState:uM,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),ie.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Xe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Xe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),ie.setRequestedCaipNetworks(r,t.chainNamespace),Bt.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Xe.chains.get(t);if(n){const o=((r=Xe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&ie.setActiveCaipNetwork(n.caipNetworks[0]),Xe.chains.set(t,{...n,caipNetworks:a}),ie.setRequestedCaipNetworks(a||[],t),a.length===0&&Bt.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Xe.chains.get(t);n&&(n.networkState={...n.networkState||Tx,...e},Xe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Xe.chains.get(t);if(r){const s={...r.accountState||uM,...e};Xe.chains.set(t,{...r,accountState:s}),(Xe.chains.size===1||Xe.activeChain===t)&&(e.caipAddress&&(Xe.activeCaipAddress=e.caipAddress),wr.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Xe.chains.get(t);if(n){const r={...n.networkState||Tx,...e};Xe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){ie.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Xe.activeChain=t;const e=t?Xe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Xe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Xe.activeCaipNetwork=n,ie.setChainNetworkData(t,{caipNetwork:n}),xt.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),fv.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Xe.activeChain!==t.chainNamespace&&ie.setIsSwitchingNamespace(!0);const e=Xe.chains.get(t.chainNamespace);Xe.activeChain=t.chainNamespace,Xe.activeCaipNetwork=t,ie.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Xe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Xe.activeCaipAddress=void 0,ie.setAccountProp("caipAddress",Xe.activeCaipAddress,t.chainNamespace),e&&wr.replaceState(e.accountState),Ar.resetSend(),fv.set({activeChain:Xe.activeChain,selectedNetworkId:(i=Xe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),xt.setActiveCaipNetworkId(t.caipNetworkId),!ie.checkIfSupportedNetwork(t.chainNamespace)&&wn.state.enableNetworkSwitch&&!wn.state.allowUnsupportedChain&&!Dt.state.wcBasic&&ie.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Xe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==ie.state.activeChain,n=(s=ie.getNetworkData(t))==null?void 0:s.caipNetwork,r=ie.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await ie.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=ie.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=ie.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Xe.activeCaipNetwork)==null?void 0:a.id)})),s=ie.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&is.close()}catch{gn.goBack()}Ps.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Xe.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Xe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Xe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Xe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Xe.activeChain;if(e&&(n=e),!n)return;const r=(s=Xe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Xe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Xe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Ht.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Xe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=ie.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){ie.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=ie.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Bt.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Xe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=ie.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Xe.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Xe.activeCaipNetwork},getActiveCaipAddress(){return Xe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Xe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=ie.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());ie.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Xe.activeCaipNetwork,r=ie.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Xe.activeChain)return!0;const e=ie.getRequestedCaipNetworks(Xe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){ie.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=wk.caipNetworkIdToNumber((r=Xe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Xe.activeChain;if(!e||!t)return!1;const n=ie.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){is.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Xe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ca.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){ie.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=ie.getAccountProp("preferredAccountType",e);Xe.activeCaipAddress=void 0,ie.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Bt.removeConnectorId(e)},setIsSwitchingNamespace(t){Xe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Xe.chains.forEach(s=>{Ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Xe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=ie.state.chains.get(t))==null?void 0:e.accountState:wr.state},getNetworkData(t){var n;const e=t||Xe.activeChain;if(e)return(n=ie.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=ie.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Bt.state.filterByNamespace;return(t?[Xe.chains.get(t)]:Array.from(Xe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?ie.getRequestedCaipNetworks(t):ie.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Xe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Xe.lastConnectedSIWECaipNetwork}},ie=Yl(MVe),BVe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Moe=Ht.getBlockchainApiUrl(),Pa=Es({clientId:null,api:new sN({baseUrl:Moe,clientId:null}),supportedChains:{http:[],ws:[]}}),un={state:Pa,async get(t){const{st:e,sv:n}=un.getSdkProperties(),r=wn.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Pa.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=wn.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Pa.supportedChains.http.length||await un.getSupportedNetworks()}catch{return!1}return Pa.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await un.get({path:"v1/supported-chains"});return Pa.supportedChains=t,t}catch{return Pa.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await un.isNetworkSupported(e))return{avatar:"",name:""};const r=xt.getIdentityFromCacheForAddress(t);if(r)return r;const s=await un.get({path:`/v1/identity/${t}`,params:{sender:ie.state.activeCaipAddress?Ht.getPlainAddress(ie.state.activeCaipAddress):void 0}});return xt.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await un.isNetworkSupported((a=ie.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?un.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await un.isNetworkSupported((o=ie.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?un.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await un.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?un.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await un.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Pa.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:wn.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await un.isNetworkSupported((r=ie.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?un.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=un.getSdkProperties();if(!await un.isNetworkSupported((s=ie.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return un.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await un.isNetworkSupported((o=ie.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Pa.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ca.CONVERT_SLIPPAGE_TOLERANCE},projectId:wn.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=un.getSdkProperties();if(!await un.isNetworkSupported((o=ie.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return un.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=un.getSdkProperties();if(!await un.isNetworkSupported((l=ie.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Ag.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=xt.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await un.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return xt.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await un.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?un.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await un.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?un.get({path:`/v1/profile/reverse/${t}`,params:{sender:wr.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await un.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?un.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await un.isNetworkSupported((i=ie.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Pa.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await un.isNetworkSupported((a=ie.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Pa.api.post({path:"/v1/generators/onrampurl",params:{projectId:wn.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await un.isNetworkSupported((e=ie.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await un.get({path:"/v1/onramp/options"})}catch{return BVe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await un.isNetworkSupported((s=ie.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Pa.api.post({path:"/v1/onramp/quote",params:{projectId:wn.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await un.isNetworkSupported((n=ie.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?un.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await un.isNetworkSupported((s=ie.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Pa.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:wn.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Pa.clientId=t,Pa.api=new sN({baseUrl:Moe,clientId:t})}},dM={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Im(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},G4={async getMyTokensWithBalance(t){const e=wr.state.address,n=ie.state.activeCaipNetwork,r=Bt.getConnectorId("eip155")===Ie.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=xt.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===Ie.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await un.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=dM.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Dt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Dt.walletGetAssets({account:t,chainFilter:[s]});if(!dM.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>dM.createBalance(l,e.caipNetworkId));return xt.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},rd=Es({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),UVe={state:rd,replaceState(t){t&&Object.assign(rd,eC(t))},subscribe(t){return ie.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return ie.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){ie.setAccountProp("status",t,e)},getCaipAddress(t){return ie.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Ht.getPlainAddress(t):void 0;e===ie.state.activeChain&&(ie.state.activeCaipAddress=t),ie.setAccountProp("caipAddress",t,e),ie.setAccountProp("address",n,e)},setBalance(t,e,n){ie.setAccountProp("balance",t,n),ie.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){ie.setAccountProp("profileName",t,e)},setProfileImage(t,e){ie.setAccountProp("profileImage",t,e)},setUser(t,e){ie.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){ie.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){ie.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){ie.setAccountProp("currentTab",t,ie.state.activeChain)},setTokenBalance(t,e){t&&ie.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){ie.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=ie.getAccountProp("addressLabels",n)||new Map;r.set(t,e),ie.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=ie.getAccountProp("addressLabels",e)||new Map;n.delete(t),ie.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){ie.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){ie.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&ie.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){ie.setAccountProp("socialWindow",t?eC(t):void 0,e)},setFarcasterUrl(t,e){ie.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;rd.balanceLoading=!0;const e=(i=ie.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=ie.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=ie.state.activeCaipAddress,s=r?Ht.getPlainAddress(r):void 0;if(rd.lastRetry&&!Ht.isAllowedRetry(rd.lastRetry,30*ca.ONE_SEC_MS))return rd.balanceLoading=!1,[];try{if(s&&e&&n){const a=await G4.getMyTokensWithBalance();return wr.setTokenBalance(a,n),rd.lastRetry=void 0,rd.balanceLoading=!1,a}}catch(a){rd.lastRetry=Date.now(),t==null||t(a),Ag.showError("Token Balance Unavailable")}finally{rd.balanceLoading=!1}return[]},resetAccount(t){ie.resetAccount(t)}},wr=Yl(UVe),LVe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=ie.state.activeCaipNetwork,r=gn.state.data;if(t.id===(n==null?void 0:n.id))return;const i=wr.getCaipAddress(ie.state.activeChain),o=t.chainNamespace!==ie.state.activeChain,a=wr.getCaipAddress(t.chainNamespace),l=Bt.getConnectorId(ie.state.activeChain)===Ie.CONNECTOR_ID.AUTH,u=Ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?gn.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?gn.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):gn.push("SwitchNetwork",{...r,network:t})}},Oa=Es({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),$Ve={state:Oa,subscribe(t){return dc(Oa,()=>t(Oa))},subscribeKey(t,e){return Ea(Oa,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=ie.state.activeChain,r=e&&e!==n,s=(i=ie.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(Dt.state.wcBasic?rn.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await rn.prefetch(),Bt.setFilterByNamespace(t==null?void 0:t.namespace),is.setLoading(!0,e),e&&r){const a=((o=ie.getNetworkData(e))==null?void 0:o.caipNetwork)||ie.getRequestedCaipNetworks(e)[0];a&&LVe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=ie.state.noAdapters;wn.state.manualWCControl||a&&!s?Ht.isMobile()?gn.reset("AllWallets"):gn.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?gn.reset(t.view,t.data):s?gn.reset("Account"):gn.reset("Connect")}Oa.open=!0,fv.set({open:!0}),Ps.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=wn.state.enableEmbedded,e=!!ie.state.activeCaipAddress;Oa.open&&Ps.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Oa.open=!1,gn.reset("Connect"),is.clearLoading(),t?e?gn.replace("Account"):gn.push("Connect"):fv.set({open:!1}),Dt.resetUri()},setLoading(t,e){e&&Oa.loadingNamespaceMap.set(e,t),Oa.loading=t,fv.set({loading:t})},clearLoading(){Oa.loadingNamespaceMap.clear(),Oa.loading=!1},shake(){Oa.shake||(Oa.shake=!0,setTimeout(()=>{Oa.shake=!1},500))}},is=Yl($Ve),Iq=2147483648,FVe={convertEVMChainIdToCoinType(t){if(t>=Iq)throw new Error("Invalid chainId");return(Iq|t)>>>0}},cl=Es({suggestions:[],loading:!1}),jVe={state:cl,subscribe(t){return dc(cl,()=>t(cl))},subscribeKey(t,e){return Ea(cl,t,e)},async resolveName(t){var e,n;try{return await un.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await un.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{cl.loading=!0,cl.suggestions=[];const e=await un.getEnsNameSuggestions(t);return cl.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],cl.suggestions}catch(e){const n=TT.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{cl.loading=!1}},async getNamesForAddress(t){try{if(!ie.state.activeCaipNetwork)return[];const n=xt.getEnsFromCacheForAddress(t);if(n)return n;const r=await un.reverseLookupEnsName({address:t});return xt.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=TT.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=ie.state.activeCaipNetwork,n=wr.state.address,r=Bt.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");cl.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});gn.pushTransactionStack({onCancel(){gn.replace("RegisterAccountName")}});const i=await Dt.signMessage(s);cl.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=FVe.convertEVMChainIdToCoinType(Number(o));await un.registerEnsName({coinType:a,address:n,signature:i,message:s}),wr.setProfileName(t,e.chainNamespace),gn.replace("RegisterAccountNameSuccess")}catch(s){const i=TT.parseEnsApiError(s,`Error registering name ${t}`);throw gn.replace("RegisterAccountName"),new Error(i)}finally{cl.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},TT=Yl(jVe);let jm=null;const Dp={getSIWX(){return wn.state.siwx},async initializeIfEnabled(){var i;const t=wn.state.siwx,e=ie.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(ie.checkIfSupportedNetwork(n))try{if(jm&&await jm,(await t.getSessions(`${n}:${r}`,s)).length)return;await is.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Ps.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Dt._getClient())==null?void 0:i.disconnect().catch(console.error)),gn.reset("Connect"),Ag.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=wn.state.siwx,e=Ht.getPlainAddress(ie.getActiveCaipAddress()),n=ie.getActiveCaipNetwork(),r=Dt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Bt.getConnectorId(n.chainNamespace)===Ie.CONNECTOR_ID.AUTH&&gn.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ie.setLastConnectedSIWECaipNetwork(n),is.close(),Ps.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!is.state.open||gn.state.view==="ApproveTransaction")&&await is.open({view:"SIWXSignMessage"}),Ag.showError("Error signing message"),Ps.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=ie.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,Ht.getPlainAddress(ie.getActiveCaipAddress())||""));s&&s.length>0?await ie.switchActiveNetwork(r):await Dt.disconnect()}else await Dt.disconnect()}else is.close();is.close(),Ps.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=ie.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Ht.getPlainAddress(ie.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=wn.state.siwx,e=Ht.getPlainAddress(ie.getActiveCaipAddress()),n=ie.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=gn.state.view==="ApproveTransaction",r=gn.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Dp.getSIWX();if(!i||!s.includes(Ie.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=ie.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Dp.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(jm)return jm;const r=Dp.getSIWX();return r?(jm=r.addSession({data:t,message:e,signature:n}).finally(()=>{jm=null}),jm):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Dp.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=ie.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Ag.showLoading("Authenticating...",{autoClose:!1}),wr.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Ps.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Dp.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Ps.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Dp.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Ag.hide()}}return!0},getSIWXEventProperties(){var e;const t=ie.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=ie.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:th(t)===mo.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},_c={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:Ie.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Dc={ConnectorExplorerIds:{[Ie.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Ie.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Ie.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[Ie.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[Ie.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[_c.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[_c.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[_c.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[_c.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[_c.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[_c.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[_c.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[_c.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[_c.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[_c.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[_c.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Ie.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ie.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Ie.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Ie.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Ie.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Ie.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Ie.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Ie.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Ie.CONNECTOR_ID.COINBASE]:"Coinbase",[Ie.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Ie.CONNECTOR_ID.LEDGER]:"Ledger",[Ie.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[Ie.CONNECTOR_ID.INJECTED]:"INJECTED",[Ie.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[Ie.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[Ie.CONNECTOR_ID.AUTH]:"AUTH",[_c.CONNECTOR_TYPE_AUTH]:"AUTH"}},Ja={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${_c.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=ie.state.activeChain;return Ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Bt.getConnectorId(e)===Ie.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},WVe=new AbortController,mp={EmbeddedWalletAbortController:WVe,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},zVe="rpc.walletconnect.org";function Nq(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const hM=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],a_={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===zVe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Ie.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Ie.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return hM.includes(e)?Nq(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,m;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((m=r==null?void 0:r[i])==null?void 0:m.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Dc.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>a_.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(yg(a.url,a.config))}),hM.includes(t.caipNetworkId)&&r.push(yg(Nq(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(yg(a))}),HR(r)},extendWagmiTransports(t,e,n){if(hM.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return HR([n,yg(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Ie.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=xt.getActiveCaipNetworkId(),n=ie.getAllRequestedCaipNetworks(),r=Array.from(((c=ie.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},xq={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Zi={set(t,e){Td.isClient&&localStorage.setItem(`${_t.STORAGE_KEY}${t}`,e)},get(t){return Td.isClient?localStorage.getItem(`${_t.STORAGE_KEY}${t}`):null},delete(t,e){Td.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${_t.STORAGE_KEY}${t}`))}},Rx=30*1e3,Td={checkIfAllowedToTriggerEmail(){const t=Zi.get(_t.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Rx){const n=Math.ceil((Rx-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Zi.get(_t.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Rx)return Math.ceil((Rx-e)/1e3)}return 0},checkIfRequestExists(t){return mo.NOT_SAFE_RPC_METHODS.includes(t.method)||mo.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(xq.transactionHash))||(t==null?void 0:t.match(xq.signedMessage)))?_t.RPC_RESPONSE_TYPE_TX:_t.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return mo.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Fs=A.object({message:A.string()});function ut(t){return A.literal(_t[t])}const VP=A.object({serializedMessage:A.string().optional(),accountAddress:A.string(),chainId:A.string(),notBefore:A.string().optional(),domain:A.string(),uri:A.string(),version:A.string(),nonce:A.string(),statement:A.string().optional(),resources:A.array(A.string()).optional(),requestId:A.string().optional(),issuedAt:A.string().optional(),expirationTime:A.string().optional()});A.object({accessList:A.array(A.string()),blockHash:A.string().nullable(),blockNumber:A.string().nullable(),chainId:A.string().or(A.number()),from:A.string(),gas:A.string(),hash:A.string(),input:A.string().nullable(),maxFeePerGas:A.string(),maxPriorityFeePerGas:A.string(),nonce:A.string(),r:A.string(),s:A.string(),to:A.string(),transactionIndex:A.string().nullable(),type:A.string(),v:A.string(),value:A.string()});const HVe=A.object({chainId:A.string().or(A.number()),rpcUrl:A.optional(A.string())}),GVe=A.object({email:A.string().email()}),qVe=A.object({otp:A.string()}),VVe=A.object({uri:A.string(),preferredAccountType:A.optional(A.string()),chainId:A.optional(A.string().or(A.number())),siwxMessage:A.optional(VP),rpcUrl:A.optional(A.string())}),KVe=A.object({chainId:A.optional(A.string().or(A.number())),preferredAccountType:A.optional(A.string()),socialUri:A.optional(A.string()),siwxMessage:A.optional(VP),rpcUrl:A.optional(A.string())}),YVe=A.object({provider:A.enum(["google","github","apple","facebook","x","discord"])}),QVe=A.object({email:A.string().email()}),JVe=A.object({otp:A.string()}),ZVe=A.object({otp:A.string()}),XVe=A.object({themeMode:A.optional(A.enum(["light","dark"])),themeVariables:A.optional(A.record(A.string(),A.string().or(A.number()))),w3mThemeVariables:A.optional(A.record(A.string(),A.string()))}),eKe=A.object({metadata:A.object({name:A.string(),description:A.string(),url:A.string(),icons:A.array(A.string())}).optional(),sdkVersion:A.string().optional(),sdkType:A.string().optional(),projectId:A.string()}),tKe=A.object({type:A.string()}),nKe=A.object({action:A.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),rKe=A.object({url:A.string()}),sKe=A.object({userName:A.string()}),iKe=A.object({email:A.string().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),accounts:A.array(A.object({address:A.string(),type:A.enum([mo.ACCOUNT_TYPES.EOA,mo.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:A.string().optional().nullable(),preferredAccountType:A.optional(A.string()),signature:A.string().optional(),message:A.string().optional(),siwxMessage:A.optional(VP)}),oKe=A.object({action:A.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),aKe=A.object({email:A.string().email().optional().nullable(),address:A.string(),chainId:A.string().or(A.number()),smartAccountDeployed:A.optional(A.boolean()),accounts:A.array(A.object({address:A.string(),type:A.enum([mo.ACCOUNT_TYPES.EOA,mo.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:A.optional(A.string()),signature:A.string().optional(),message:A.string().optional(),siwxMessage:A.optional(VP)}),cKe=A.object({uri:A.string()}),lKe=A.object({isConnected:A.boolean()}),uKe=A.object({chainId:A.string().or(A.number())}),dKe=A.object({chainId:A.string().or(A.number())}),hKe=A.object({newEmail:A.string().email()}),fKe=A.object({smartAccountEnabledNetworks:A.array(A.number())});A.object({address:A.string(),isDeployed:A.boolean()});const pKe=A.object({version:A.string().optional()}),gKe=A.object({type:A.string(),address:A.string()}),mKe=A.any(),yKe=A.object({method:A.literal("eth_accounts")}),wKe=A.object({method:A.literal("eth_blockNumber")}),bKe=A.object({method:A.literal("eth_call"),params:A.array(A.any())}),vKe=A.object({method:A.literal("eth_chainId")}),EKe=A.object({method:A.literal("eth_estimateGas"),params:A.array(A.any())}),CKe=A.object({method:A.literal("eth_feeHistory"),params:A.array(A.any())}),_Ke=A.object({method:A.literal("eth_gasPrice")}),AKe=A.object({method:A.literal("eth_getAccount"),params:A.array(A.any())}),SKe=A.object({method:A.literal("eth_getBalance"),params:A.array(A.any())}),IKe=A.object({method:A.literal("eth_getBlockByHash"),params:A.array(A.any())}),NKe=A.object({method:A.literal("eth_getBlockByNumber"),params:A.array(A.any())}),xKe=A.object({method:A.literal("eth_getBlockReceipts"),params:A.array(A.any())}),TKe=A.object({method:A.literal("eth_getBlockTransactionCountByHash"),params:A.array(A.any())}),RKe=A.object({method:A.literal("eth_getBlockTransactionCountByNumber"),params:A.array(A.any())}),kKe=A.object({method:A.literal("eth_getCode"),params:A.array(A.any())}),PKe=A.object({method:A.literal("eth_getFilterChanges"),params:A.array(A.any())}),OKe=A.object({method:A.literal("eth_getFilterLogs"),params:A.array(A.any())}),DKe=A.object({method:A.literal("eth_getLogs"),params:A.array(A.any())}),MKe=A.object({method:A.literal("eth_getProof"),params:A.array(A.any())}),BKe=A.object({method:A.literal("eth_getStorageAt"),params:A.array(A.any())}),UKe=A.object({method:A.literal("eth_getTransactionByBlockHashAndIndex"),params:A.array(A.any())}),LKe=A.object({method:A.literal("eth_getTransactionByBlockNumberAndIndex"),params:A.array(A.any())}),$Ke=A.object({method:A.literal("eth_getTransactionByHash"),params:A.array(A.any())}),FKe=A.object({method:A.literal("eth_getTransactionCount"),params:A.array(A.any())}),jKe=A.object({method:A.literal("eth_getTransactionReceipt"),params:A.array(A.any())}),WKe=A.object({method:A.literal("eth_getUncleCountByBlockHash"),params:A.array(A.any())}),zKe=A.object({method:A.literal("eth_getUncleCountByBlockNumber"),params:A.array(A.any())}),HKe=A.object({method:A.literal("eth_maxPriorityFeePerGas")}),GKe=A.object({method:A.literal("eth_newBlockFilter")}),qKe=A.object({method:A.literal("eth_newFilter"),params:A.array(A.any())}),VKe=A.object({method:A.literal("eth_newPendingTransactionFilter")}),KKe=A.object({method:A.literal("eth_sendRawTransaction"),params:A.array(A.any())}),YKe=A.object({method:A.literal("eth_syncing"),params:A.array(A.any())}),QKe=A.object({method:A.literal("eth_uninstallFilter"),params:A.array(A.any())}),Tq=A.object({method:A.literal("personal_sign"),params:A.array(A.any())}),JKe=A.object({method:A.literal("eth_signTypedData_v4"),params:A.array(A.any())}),ZKe=A.object({method:A.literal("eth_sendTransaction"),params:A.array(A.any())}),XKe=A.object({method:A.literal("solana_signMessage"),params:A.object({message:A.string(),pubkey:A.string()})}),eYe=A.object({method:A.literal("solana_signTransaction"),params:A.object({transaction:A.string()})}),tYe=A.object({method:A.literal("solana_signAllTransactions"),params:A.object({transactions:A.array(A.string())})}),nYe=A.object({method:A.literal("solana_signAndSendTransaction"),params:A.object({transaction:A.string(),options:A.object({skipPreflight:A.boolean().optional(),preflightCommitment:A.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:A.number().optional(),minContextSlot:A.number().optional()}).optional()})}),rYe=A.object({method:A.literal("wallet_sendCalls"),params:A.array(A.object({chainId:A.string().or(A.number()).optional(),from:A.string().optional(),version:A.string().optional(),capabilities:A.any().optional(),calls:A.array(A.object({to:A.string().startsWith("0x"),data:A.string().startsWith("0x").optional(),value:A.string().optional()}))}))}),sYe=A.object({method:A.literal("wallet_getCallsStatus"),params:A.array(A.string())}),iYe=A.object({method:A.literal("wallet_getCapabilities"),params:A.array(A.string().or(A.number()).optional()).optional()}),oYe=A.object({method:A.literal("wallet_grantPermissions"),params:A.array(A.any())}),aYe=A.object({method:A.literal("wallet_revokePermissions"),params:A.any()}),cYe=A.object({method:A.literal("wallet_getAssets"),params:A.any()}),Rq=A.object({token:A.string()}),dt=A.object({id:A.string().optional()}),M1={appEvent:dt.extend({type:ut("APP_SWITCH_NETWORK"),payload:HVe}).or(dt.extend({type:ut("APP_CONNECT_EMAIL"),payload:GVe})).or(dt.extend({type:ut("APP_CONNECT_DEVICE")})).or(dt.extend({type:ut("APP_CONNECT_OTP"),payload:qVe})).or(dt.extend({type:ut("APP_CONNECT_SOCIAL"),payload:VVe})).or(dt.extend({type:ut("APP_GET_FARCASTER_URI")})).or(dt.extend({type:ut("APP_CONNECT_FARCASTER")})).or(dt.extend({type:ut("APP_GET_USER"),payload:A.optional(KVe)})).or(dt.extend({type:ut("APP_GET_SOCIAL_REDIRECT_URI"),payload:YVe})).or(dt.extend({type:ut("APP_SIGN_OUT")})).or(dt.extend({type:ut("APP_IS_CONNECTED"),payload:A.optional(Rq)})).or(dt.extend({type:ut("APP_GET_CHAIN_ID")})).or(dt.extend({type:ut("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(dt.extend({type:ut("APP_INIT_SMART_ACCOUNT")})).or(dt.extend({type:ut("APP_SET_PREFERRED_ACCOUNT"),payload:tKe})).or(dt.extend({type:ut("APP_RPC_REQUEST"),payload:Tq.or(cYe).or(yKe).or(wKe).or(bKe).or(vKe).or(EKe).or(CKe).or(_Ke).or(AKe).or(SKe).or(IKe).or(NKe).or(xKe).or(TKe).or(RKe).or(kKe).or(PKe).or(OKe).or(DKe).or(MKe).or(BKe).or(UKe).or(LKe).or($Ke).or(FKe).or(jKe).or(WKe).or(zKe).or(HKe).or(GKe).or(qKe).or(VKe).or(KKe).or(YKe).or(QKe).or(Tq).or(JKe).or(ZKe).or(XKe).or(eYe).or(tYe).or(nYe).or(sYe).or(rYe).or(iYe).or(oYe).or(aYe).and(A.object({chainId:A.string().or(A.number()).optional(),chainNamespace:A.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:A.string().optional()}))})).or(dt.extend({type:ut("APP_UPDATE_EMAIL"),payload:QVe})).or(dt.extend({type:ut("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:JVe})).or(dt.extend({type:ut("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:ZVe})).or(dt.extend({type:ut("APP_SYNC_THEME"),payload:XVe})).or(dt.extend({type:ut("APP_SYNC_DAPP_DATA"),payload:eKe})).or(dt.extend({type:ut("APP_RELOAD")})).or(dt.extend({type:ut("APP_RPC_ABORT")})),frameEvent:dt.extend({type:ut("FRAME_SWITCH_NETWORK_ERROR"),payload:Fs}).or(dt.extend({type:ut("FRAME_SWITCH_NETWORK_SUCCESS"),payload:dKe})).or(dt.extend({type:ut("FRAME_CONNECT_EMAIL_SUCCESS"),payload:nKe})).or(dt.extend({type:ut("FRAME_CONNECT_EMAIL_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:rKe})).or(dt.extend({type:ut("FRAME_GET_FARCASTER_URI_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:sKe})).or(dt.extend({type:ut("FRAME_CONNECT_FARCASTER_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_CONNECT_OTP_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_CONNECT_OTP_SUCCESS")})).or(dt.extend({type:ut("FRAME_CONNECT_DEVICE_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_CONNECT_DEVICE_SUCCESS")})).or(dt.extend({type:ut("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:iKe})).or(dt.extend({type:ut("FRAME_CONNECT_SOCIAL_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_GET_USER_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_GET_USER_SUCCESS"),payload:aKe})).or(dt.extend({type:ut("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:cKe})).or(dt.extend({type:ut("FRAME_SIGN_OUT_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_SIGN_OUT_SUCCESS")})).or(dt.extend({type:ut("FRAME_IS_CONNECTED_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_IS_CONNECTED_SUCCESS"),payload:lKe})).or(dt.extend({type:ut("FRAME_GET_CHAIN_ID_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_GET_CHAIN_ID_SUCCESS"),payload:uKe})).or(dt.extend({type:ut("FRAME_RPC_REQUEST_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_RPC_REQUEST_SUCCESS"),payload:mKe})).or(dt.extend({type:ut("FRAME_SESSION_UPDATE"),payload:Rq})).or(dt.extend({type:ut("FRAME_UPDATE_EMAIL_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_UPDATE_EMAIL_SUCCESS"),payload:oKe})).or(dt.extend({type:ut("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(dt.extend({type:ut("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:hKe})).or(dt.extend({type:ut("FRAME_SYNC_THEME_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_SYNC_THEME_SUCCESS")})).or(dt.extend({type:ut("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(dt.extend({type:ut("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:fKe})).or(dt.extend({type:ut("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:gKe})).or(dt.extend({type:ut("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_READY"),payload:pKe})).or(dt.extend({type:ut("FRAME_RELOAD_ERROR"),payload:Fs})).or(dt.extend({type:ut("FRAME_RELOAD_SUCCESS")}))};function fM(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function lYe({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=Ie.BLOCKCHAIN_API_RPC_URL}){const i=new URL(fVe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class uYe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=Ie.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!fM(_t.FRAME_EVENT_KEY,u))return;const d=M1.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Td.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Td.isClient&&window.addEventListener("message",({data:a})=>{if(!fM(_t.FRAME_EVENT_KEY,a))return;const c=M1.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Td.isClient&&window.addEventListener("message",({data:a})=>{if(!fM(_t.APP_EVENT_KEY,a))return;const c=M1.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Td.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");M1.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Td.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");M1.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Td.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=lYe({projectId:e,chainId:r,version:gVe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class dYe{constructor(e){var i;const n=gw({level:pVe}),{logger:r,chunkLoggerController:s}=vP({opts:n});this.logger=bo(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class hYe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new dYe(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new uYe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===_t.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Zi.get(_t.EMAIL_LOGIN_USED_KEY)}getEmail(){return Zi.get(_t.EMAIL)}getUsername(){return Zi.get(_t.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:_t.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Td.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:_t.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:_t.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:_t.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:_t.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:_t.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:_t.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:_t.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:_t.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:_t.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:_t.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:_t.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:_t.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:_t.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:_t.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:_t.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:_t.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:_t.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:_t.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:_t.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:_t.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(mo.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:_t.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===_t.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===_t.FRAME_IS_CONNECTED_ERROR&&e(),n.type===_t.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===_t.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===_t.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===_t.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===_t.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:mo.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{mo.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:_t.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[_t.APP_SYNC_DAPP_DATA,_t.APP_SYNC_THEME,_t.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[_t.APP_CONNECT_EMAIL,_t.APP_CONNECT_DEVICE,_t.APP_CONNECT_OTP,_t.APP_CONNECT_SOCIAL,_t.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests=[...this.openRpcRequests,{...m.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(m,y){var w,C,N;m.id===u&&((C=y==null?void 0:(w=y.logger).info)==null||C.call(w,{framEvent:m,id:u},"Received frame response"),m.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&l(new Error(((N=m.payload)==null?void 0:N.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,m=>h(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Zi.set(_t.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Zi.set(_t.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Zi.set(_t.EMAIL,e),Zi.set(_t.EMAIL_LOGIN_USED_KEY,"true"),Zi.delete(_t.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Zi.delete(_t.EMAIL_LOGIN_USED_KEY),Zi.delete(_t.EMAIL),Zi.delete(_t.LAST_USED_CHAIN_KEY),Zi.delete(_t.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Zi.set(_t.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Zi.get(_t.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Zi.set(_t.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=_g.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class pv{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return pv.instance||(pv.instance=new hYe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),pv.instance}}const fYe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},kq={filterOutDuplicatesByRDNS(t){const e=wn.state.enableEIP6963?Bt.state.connectors:[],n=xt.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Ht.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Bt.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=xt.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Bt.state,{featuredWalletIds:n}=wn.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=wn.state.features)==null?void 0:c.connectMethodsOrder),r=e||Bt.state.connectors;if(n)return n;const{injected:s,announced:i}=RT.getConnectorsByType(r,rn.state.recommended,rn.state.featured),o=s.filter(RT.showConnector),a=i.filter(RT.showConnector);return o.length||a.length?["wallet","email","social"]:fYe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&rn.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&rn.state.excludedWallets.some(r=>Ja.isLowerCaseMatch(r.name,t.name));return e||n}},RT={getConnectorsByType(t,e,n){const{customWallets:r}=wn.state,s=xt.getRecentWallets(),i=kq.filterOutDuplicateWallets(e),o=kq.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&rn.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&rn.state.excludedWallets.some(i=>Ja.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Ht.isMobile()||Ht.isMobile()&&!e&&!Dt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(ie.state.chains.values()).some(n=>Bt.getConnectorId(n.namespace)===Ie.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=wn.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:wn.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),f=new Set(h.map(m=>m.type)),p=c.filter(m=>f.has(m)).map(m=>({type:m,isEnabled:!0})),g=h.filter(({type:m})=>!p.some(({type:w})=>w===m));return Array.from(new Set([...p,...g].map(({type:m})=>m)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Ht.isMobile())return{accounts:[],chainId:void 0};if(t.id===Ie.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Dl`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Dl`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Dl`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const kT={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([kT.getAddresses(t),kT.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:kT.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Dc.NetworkImageIds[e.id]]}]})}},cb={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function iN(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const Pq=iN({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),Oq=iN({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});iN({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});iN({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});iN({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const pYe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},f0={getMethodsByChainNamespace(t){return pYe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case Pq.caipNetworkId:u.chains.push(Pq.deprecatedCaipNetworkId);break;case Oq.caipNetworkId:u.chains.push(Oq.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await TT.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=f0.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(f0.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>Ht.isCaipAddress(d)).map(d=>_g.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>_g.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};let gYe=class{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case Ie.CHAIN.EVM:await this.syncEVMConnections(e);break;case Ie.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case Ie.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===Ie.CONNECTOR_ID.WALLET_CONNECT){const c=f0.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await RT.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==Ie.CONNECTOR_ID.AUTH&&a.id!==Ie.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===Ie.CONNECTOR_ID.WALLET_CONNECT){const c=f0.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,m,y;if(a.id===Ie.CONNECTOR_ID.WALLET_CONNECT){const w=f0.getWalletConnectAccounts(r,this.namespace);w.length>0&&i({connectorId:a.id,accounts:w.map(C=>({address:C.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(w=>Ht.createAccount(Ie.CHAIN.BITCOIN,w.address,w.purpose||"payment",w.publicKey,w.path));if(u&&u.length>1&&(u=[{namespace:Ie.CHAIN.BITCOIN,publicKey:((h=u[cb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[cb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[cb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:Ie.CHAIN.BITCOIN,publicKey:((g=u[cb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((m=u[cb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.path)??"",address:((y=u[cb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(w=>w.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(w=>({address:w.address,type:w.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>Ja.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>Ja.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Ja.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Ja.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Ja.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}},Boe=class{constructor({provider:e,namespace:n}){this.id=Ie.CONNECTOR_ID.WALLET_CONNECT,this.name=Dc.ConnectorNamesMap[Ie.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Dc.ConnectorImageIds[Ie.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=ie.getCaipNetworks.bind(ie),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=wn.state.universalProviderConfigOverride,s=f0.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Dp.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:mYe})}};const mYe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],yYe=[Ie.CONNECTOR_ID.AUTH,Ie.CONNECTOR_ID.WALLET_CONNECT];let wYe=class{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>ie.getCaipNetworks(n),this.getConnectorId=n=>Bt.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new gYe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:Ie.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:Ie.CONNECTOR_ID.AUTH,type:"AUTH",name:Ie.CONNECTOR_NAMES.AUTH,provider:e,imageId:Dc.ConnectorImageIds[Ie.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Ja.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){wr.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=th(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Boe);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=Ht.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=Ht.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=Ht.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Ja.isLowerCaseMatch(this.getConnectorId(Ie.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=Ht.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Ja.isLowerCaseMatch(this.getConnectorId(Ie.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?kT.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Ja.isLowerCaseMatch(this.getConnectorId(Ie.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(yYe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}};function bYe(t){let e=[],n,r;function s(a){return wk.parseEvmChainId(a)||1}function i(){var a;return n||(n=pv.getInstance({projectId:t.options.projectId,chainId:(a=ie.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Jm.open(mp.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Jm.open(mp.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Jm.open(mp.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:mp.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>ie.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const m=wk.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=m||y,!l)throw new Error("ChainId not found in provider")}const u=th("eip155"),{address:d,chainId:h,accounts:f}=await Dp.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:Ie.CHAIN.EVM});e=(f==null?void 0:f.map(m=>m.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:Ie.CONNECTOR_ID.AUTH,name:Ie.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:Ie.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=pv.getInstance({projectId:t.options.projectId,chainId:(c=ie.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:mp.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Jm.open(mp.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Jm.open(mp.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Jm.open(mp.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>ie.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=ie.state.activeChain===Ie.CHAIN.EVM;if(Ie.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Bt.getConnectorId(h)===Ie.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Yd(new Error("chain not found on connector."));const d=await this.getProvider(),h=th("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Yd(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(hf)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}q4.type="walletConnect";function q4(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:q4.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=ie.getCaipNetworks(),m=await this.getProvider();if(!m)throw new kp;a||(a=this.onDisplayUri,m.on("display_uri",a));const y=await this.isChainsStale();m.session&&y&&await m.disconnect();const w=wn.state.universalProviderConfigOverride;if(!m.session||y){const M=f0.createNamespaces(g,w);await m.connect({optionalNamespaces:M,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(H=>Number(H.id)))}const C=await this.getAccounts(),N=await this.getChainId(),I=(p=(f=(h=m.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,k=I==null?void 0:I.some(M=>Number(M.split(":")[1])===N);let P=1;k?P=N:I!=null&&I[0]&&(P=Number(I[0].split(":")[1])),a&&(m.removeListener("display_uri",a),a=void 0),o&&(m.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),m.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),m.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),m.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),m.on("session_delete",c));const U=w==null?void 0:w.defaultChain;return m.setDefaultChain(U??`eip155:${P}`),{accounts:C,chainId:P}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new gi(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var m,y,w;const d=await this.getProvider();if(!((m=d==null?void 0:d.session)!=null&&m.namespaces))return[];const h=(w=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[Ie.CHAIN.EVM])==null?void 0:w.accounts,f=(h==null?void 0:h.map(C=>C.split(":")[2]))??[],p=new Set;return f.filter(C=>{const N=C==null?void 0:C.toLowerCase();return p.has(N)?!1:(p.add(N),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=xt.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const m=xt.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],w=y==null?void 0:y.find(C=>C.id===m);w&&w.chainNamespace===Ie.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(w.id)}))}return r},async getChainId(){var g,m,y,w;const d=(g=e.getCaipNetwork(Ie.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(w=(y=(m=(await this.getProvider()).session)==null?void 0:m.namespaces[Ie.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:w[0],p=ie.getCaipNetworks().find(C=>C.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,m,y,w;const f=await this.getProvider();if(!f)throw new kp;const p=ie.getCaipNetworks().find(C=>C.id===h);if(!p)throw new Yd(new KA);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:Rt(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const C=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...C,h]),{...p,id:p.id}}catch(C){const N=C;if(/(?:user rejected)/iu.test(N.message))throw new gi(N);try{let I;d!=null&&d.blockExplorerUrls?I=d.blockExplorerUrls:I=(g=p.blockExplorers)!=null&&g.default.url?[(m=p.blockExplorers)==null?void 0:m.default.url]:[];const k=((w=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:w.http)||[],P={blockExplorerUrls:I,chainId:Rt(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:k};await f.request({method:"wallet_addEthereumChain",params:[P]});const U=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...U,h]),{...p,id:p.id}}catch(I){throw new gi(I)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>hf(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(ie.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[Ie.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(m=>Number.parseInt(m.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const B1=Es({pendingTransactions:0}),Dq={state:B1,subscribeKey(t,e){return Ea(B1,t,e)},increase(t){B1[t]+=1},decrease(t){B1[t]-=1},reset(t){B1[t]=0}};function vYe(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function EYe(t){if(Ht.isSafeApp()){const{safe:e}=await no(async()=>{const{safe:n}=await import("./index-Bd8ytp3u.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function CYe(t){try{const{coinbaseWallet:e}=await no(async()=>{const{coinbaseWallet:n}=await import("./index-Bd8ytp3u.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const _Ye={enable:!1,pollingInterval:3e4};class AYe extends wYe{constructor(e){const n=a_.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=Ie.CHAIN.EVM,this.adapterType=Ie.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={..._Ye,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===Ie.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>Ht.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=cv(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>Ht.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=cv(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===Ie.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=a_.getCaipNetworkId(s);i?n[s.id]=a_.extendWagmiTransports(s,e.projectId,i):n[s.id]=a_.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=E_e({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=n_e(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),Dq.increase("pendingTransactions")}});const e=Dq.subscribeKey("pendingTransactions",n=>{var r;n>=Ie.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){Ste(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),Ite(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===Ie.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:xt.getConnectedSocialProvider(),username:xt.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await CYe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await EYe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(q4(e,n)),e.enableEIP6963!==!1&&r.push(Y2({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(bYe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Dc.ConnectorNamesMap[r.id]??r.name,imageId:Dc.ConnectorImageIds[r.id],type:Dc.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===Ie.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await X1e(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=cv(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await J1e(this.wagmiConfig,s);const i=await Z1e(this.wagmiConfig,s);return await xte(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(wk.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await Tte(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await H1e(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return ICe(e.value,e.decimals)}formatUnits(e){return Im(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===Ie.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===Ie.CONNECTOR_ID.AUTH||e.id===Ie.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Dc.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Dc.ConnectorNamesMap[e.id]??e.name,imageId:Dc.ConnectorImageIds[e.id],type:Dc.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===Ie.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){Nte(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=lu(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(Ht.isSafeApp()&&n===Ie.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await uT(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await uT(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await W5(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,m;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===Ie.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((w,C)=>Ja.isLowerCaseMatch(w,r)?-1:Ja.isLowerCaseMatch(C,r)?1:0);return(m=this.wagmiConfig)==null||m.setState(w=>({...w,connections:new Map(w.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await uT(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await j5(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=xt.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await V1e(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});xt.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=lu(this.wagmiConfig).find(i=>Ja.isLowerCaseMatch(i.connector.id,e.id));return await $5(this.wagmiConfig,{connector:n}),wn.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=lu(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await $5(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await W5(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=lu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=vYe(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=lu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=lu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=lu(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:Ie.CONNECTOR_ID.AUTH,type:"AUTH",name:Ie.CONNECTOR_NAMES.AUTH,provider:e,imageId:Dc.ConnectorImageIds[Ie.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=lu(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(ie.state.activeChain==="eip155")return;j5(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new Boe({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const SYe=Symbol(),Mq=Object.getPrototypeOf,LL=new WeakMap,IYe=t=>t&&(LL.has(t)?LL.get(t):Mq(t)===Object.prototype||Mq(t)===Array.prototype),NYe=t=>IYe(t)&&t[SYe]||null,Bq=(t,e=!0)=>{LL.set(t,e)},vk={},V4=t=>typeof t=="object"&&t!==null,xYe=t=>V4(t)&&!oN.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),Uoe=(t,e)=>{const n=$L.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return Bq(r,!0),$L.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(oN.has(i))Bq(i,!1);else if(gm.has(i)){const[c,l]=gm.get(i);a.value=Uoe(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},TYe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(Uq(l,o)||RS.has(o)&&Uq(l,RS.get(o))))return!0;n(i),V4(o)&&(o=NYe(o)||o);const u=!gm.has(o)&&kYe(o)?Cs(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),gm=new WeakMap,oN=new WeakSet,$L=new WeakMap,c_=[1,1],RS=new WeakMap;let Uq=Object.is,RYe=(t,e)=>new Proxy(t,e),kYe=xYe,PYe=Uoe,OYe=TYe;function Cs(t={}){if(!V4(t))throw new Error("object required");const e=RS.get(t);if(e)return e;let n=c_[0];const r=new Set,s=(m,y=++c_[0])=>{n!==y&&(n=y,r.forEach(w=>w(m,y)))};let i=c_[1];const o=(m=++c_[1])=>(i!==m&&!r.size&&(i=m,c.forEach(([y])=>{const w=y[1](m);w>n&&(n=w)})),n),a=m=>(y,w)=>{const C=[...y];C[1]=[m,...C[1]],s(C,w)},c=new Map,l=(m,y)=>{const w=!oN.has(y)&&gm.get(y);if(w){if((vk?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(r.size){const C=w[2](a(m));c.set(m,[w,C])}else c.set(m,[w])}},u=m=>{var y;const w=c.get(m);w&&(c.delete(m),(y=w[1])==null||y.call(w))},d=m=>(r.add(m),r.size===1&&c.forEach(([w,C],N)=>{if((vk?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const I=w[2](a(N));c.set(N,[w,I])}),()=>{r.delete(m),r.size===0&&c.forEach(([w,C],N)=>{C&&(C(),c.set(N,[w]))})});let h=!0;const f=OYe(()=>h,l,u,s),p=RYe(t,f);RS.set(t,p);const g=[t,o,d];return gm.set(p,g),Reflect.ownKeys(t).forEach(m=>{const y=Object.getOwnPropertyDescriptor(t,m);"value"in y&&y.writable&&(p[m]=t[m])}),h=!1,p}function ya(t,e,n){const r=gm.get(t);(vk?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function kS(t){const e=gm.get(t);(vk?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return PYe(n,r())}function K0(t){return oN.add(t),t}function DYe(){return{proxyStateMap:gm,refSet:oN,snapCache:$L,versionHolder:c_,proxyCache:RS}}function Ca(t,e,n,r){let s=t[e];return ya(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:MYe,snapCache:BYe}=DYe(),kx=t=>MYe.has(t);function UYe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=BYe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return kx(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!kx(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!kx(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!kx(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Cs(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}const U1=Cs({connection:null}),lb={state:U1,subscribeKey(t,e){return Ca(U1,t,e)},subscribe(t){return ya(U1,()=>t(U1))},setConnection(t){U1.connection=K0(t)}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cd=BigInt(0),Yo=BigInt(1),pM=BigInt(2),LYe=BigInt(8),$Ye={zip215:!0};function FYe(t,e,n,r){const s=t.sqr(n),i=t.sqr(r),o=t.add(t.mul(e.a,s),i),a=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,a)}function jYe(t,e={}){const{Fp:n,Fn:r}=gte("edwards",t,e),{h:s,n:i}=t;kI(e,{},{uvRatio:"function"});const o=pM<<BigInt(r.BYTES*8)-Yo,a=g=>n.create(g),c=e.uvRatio||((g,m)=>{try{return{isValid:!0,value:n.sqrt(n.div(g,m))}}catch{return{isValid:!1,value:cd}}});if(!FYe(n,t,t.Gx,t.Gy))throw new Error("bad curve params: generator point");function l(g,m,y=!1){const w=y?Yo:cd;return $b("coordinate "+g,m,w,o),m}function u(g){if(!(g instanceof f))throw new Error("ExtendedPoint expected")}const d=$R((g,m)=>{const{ex:y,ey:w,ez:C}=g,N=g.is0();m==null&&(m=N?LYe:n.inv(C));const I=a(y*m),k=a(w*m),P=a(C*m);if(N)return{x:cd,y:Yo};if(P!==Yo)throw new Error("invZ was invalid");return{x:I,y:k}}),h=$R(g=>{const{a:m,d:y}=t;if(g.is0())throw new Error("bad point: ZERO");const{ex:w,ey:C,ez:N,et:I}=g,k=a(w*w),P=a(C*C),U=a(N*N),M=a(U*U),H=a(k*m),j=a(U*a(H+P)),K=a(M+a(y*a(k*P)));if(j!==K)throw new Error("bad point: equation left != right (1)");const $=a(w*C),v=a(N*I);if($!==v)throw new Error("bad point: equation left != right (2)");return!0});class f{constructor(m,y,w,C){this.ex=l("x",m),this.ey=l("y",y),this.ez=l("z",w,!0),this.et=l("t",C),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof f)throw new Error("extended point not allowed");const{x:y,y:w}=m||{};return l("x",y),l("y",w),new f(y,w,Yo,a(y*w))}static normalizeZ(m){return ute(f,"ez",m)}static msm(m,y){return pte(f,r,m,y)}_setWindowSize(m){this.precompute(m)}precompute(m=8,y=!0){return p.setWindowSize(this,m),y||this.multiply(pM),this}assertValidity(){h(this)}equals(m){u(m);const{ex:y,ey:w,ez:C}=this,{ex:N,ey:I,ez:k}=m,P=a(y*k),U=a(N*C),M=a(w*k),H=a(I*C);return P===U&&M===H}is0(){return this.equals(f.ZERO)}negate(){return new f(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:m}=t,{ex:y,ey:w,ez:C}=this,N=a(y*y),I=a(w*w),k=a(pM*a(C*C)),P=a(m*N),U=y+w,M=a(a(U*U)-N-I),H=P+I,j=H-k,K=P-I,$=a(M*j),v=a(H*K),E=a(M*K),_=a(j*H);return new f($,v,_,E)}add(m){u(m);const{a:y,d:w}=t,{ex:C,ey:N,ez:I,et:k}=this,{ex:P,ey:U,ez:M,et:H}=m,j=a(C*P),K=a(N*U),$=a(k*w*H),v=a(I*M),E=a((C+N)*(P+U)-j-K),_=v-$,D=v+$,x=a(K-y*j),B=a(E*_),W=a(D*x),L=a(E*x),S=a(_*D);return new f(B,W,S,L)}subtract(m){return this.add(m.negate())}multiply(m){const y=m;$b("scalar",y,Yo,i);const{p:w,f:C}=p.wNAFCached(this,y,f.normalizeZ);return f.normalizeZ([w,C])[0]}multiplyUnsafe(m,y=f.ZERO){const w=m;return $b("scalar",w,cd,i),w===cd?f.ZERO:this.is0()||w===Yo?this:p.wNAFCachedUnsafe(this,w,f.normalizeZ,y)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return p.wNAFCachedUnsafe(this,i).is0()}toAffine(m){return d(this,m)}clearCofactor(){return s===Yo?this:this.multiplyUnsafe(s)}static fromBytes(m,y=!1){return jl(m),this.fromHex(m,y)}static fromHex(m,y=!1){const{d:w,a:C}=t,N=n.BYTES;m=Js("pointHex",m,N),k0("zip215",y);const I=m.slice(),k=m[N-1];I[N-1]=k&-129;const P=VA(I),U=y?o:n.ORDER;$b("pointHex.y",P,cd,U);const M=a(P*P),H=a(M-Yo),j=a(w*M-C);let{isValid:K,value:$}=c(H,j);if(!K)throw new Error("Point.fromHex: invalid y coordinate");const v=($&Yo)===Yo,E=(k&128)!==0;if(!y&&$===cd&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==v&&($=a(-$)),f.fromAffine({x:$,y:P})}static fromPrivateScalar(m){return f.BASE.multiply(m)}toBytes(){const{x:m,y}=this.toAffine(),w=F2(y,n.BYTES);return w[w.length-1]|=m&Yo?128:0,w}toRawBytes(){return this.toBytes()}toHex(){return DE(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}f.BASE=new f(t.Gx,t.Gy,Yo,a(t.Gx*t.Gy)),f.ZERO=new f(cd,Yo,Yo,cd),f.Fp=n,f.Fn=r;const p=fte(f,r.BYTES*8);return f}function WYe(t,e){kI(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n,hash:r}=e,{BASE:s,Fp:i,Fn:o}=t,a=o.ORDER,c=e.randomBytes||nX,l=e.adjustScalarBytes||(I=>I),u=e.domain||((I,k,P)=>{if(k0("phflag",P),k.length||P)throw new Error("Contexts/pre-hash are not supported");return I});function d(I){return o.create(I)}function h(I){return d(VA(I))}function f(I){const k=i.BYTES;I=Js("private key",I,k);const P=Js("hashed private key",r(I),2*k),U=l(P.slice(0,k)),M=P.slice(k,2*k),H=h(U);return{head:U,prefix:M,scalar:H}}function p(I){const{head:k,prefix:P,scalar:U}=f(I),M=s.multiply(U),H=M.toBytes();return{head:k,prefix:P,scalar:U,point:M,pointBytes:H}}function g(I){return p(I).pointBytes}function m(I=Uint8Array.of(),...k){const P=df(...k);return h(r(u(P,Js("context",I),!!n)))}function y(I,k,P={}){I=Js("message",I),n&&(I=n(I));const{prefix:U,scalar:M,pointBytes:H}=p(k),j=m(P.context,U,I),K=s.multiply(j).toBytes(),$=m(P.context,K,H,I),v=d(j+$*M);$b("signature.s",v,cd,a);const E=i.BYTES,_=df(K,F2(v,E));return Js("result",_,E*2)}const w=$Ye;function C(I,k,P,U=w){const{context:M,zip215:H}=U,j=i.BYTES;I=Js("signature",I,2*j),k=Js("message",k),P=Js("publicKey",P,j),H!==void 0&&k0("zip215",H),n&&(k=n(k));const K=VA(I.slice(j,2*j));let $,v,E;try{$=t.fromHex(P,H),v=t.fromHex(I.slice(0,j),H),E=s.multiplyUnsafe(K)}catch{return!1}if(!H&&$.isSmallOrder())return!1;const _=m(M,v.toBytes(),$.toBytes(),k);return v.add($.multiplyUnsafe(_)).subtract(E).clearCofactor().is0()}return s.precompute(8),{getPublicKey:g,sign:y,verify:C,utils:{getExtendedPublicKey:p,randomPrivateKey:()=>c(i.BYTES),precompute(I=8,k=t.BASE){return k.precompute(I,!1)}},Point:t}}function zYe(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=RC(e.n,t.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:t.uvRatio},i={hash:t.hash,randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,eddsaOpts:i}}function HYe(t,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:t})}function GYe(t){const{CURVE:e,curveOpts:n,eddsaOpts:r}=zYe(t),s=jYe(e,n),i=WYe(s,r);return HYe(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const qYe=BigInt(1),Lq=BigInt(2);BigInt(3);const VYe=BigInt(5),KYe=BigInt(8),KP={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:KYe,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function YYe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=KP.p,a=t*t%i*t%i,c=Ws(a,Lq,i)*a%i,l=Ws(c,qYe,i)*t%i,u=Ws(l,VYe,i)*l%i,d=Ws(u,e,i)*u%i,h=Ws(d,n,i)*d%i,f=Ws(h,r,i)*h%i,p=Ws(f,s,i)*f%i,g=Ws(p,s,i)*f%i,m=Ws(g,e,i)*u%i;return{pow_p_5_8:Ws(m,Lq,i)*t%i,b2:a}}function QYe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const $q=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function JYe(t,e){const n=KP.p,r=Zs(e*e*e,n),s=Zs(r*r*e,n),i=YYe(t*s).pow_p_5_8;let o=Zs(t*r*i,n);const a=Zs(e*o*o,n),c=o,l=Zs(o*$q,n),u=a===t,d=a===Zs(-t,n),h=a===Zs(-t*$q,n);return u&&(o=c),(d||h)&&(o=l),XCe(o,n)&&(o=Zs(-o,n)),{isValid:u||d,value:o}}const ZYe=RC(KP.p,void 0,!0),XYe={...KP,Fp:ZYe,hash:Kwe,adjustScalarBytes:QYe,uvRatio:JYe},aN=GYe(XYe);var K4={exports:{}};const eQe={},tQe=Object.freeze(Object.defineProperty({__proto__:null,default:eQe},Symbol.toStringTag,{value:"Module"})),nQe=lI(tQe);K4.exports;(function(t){(function(e,n){function r($,v){if(!$)throw new Error(v||"Assertion failed")}function s($,v){$.super_=v;var E=function(){};E.prototype=v.prototype,$.prototype=new E,$.prototype.constructor=$}function i($,v,E){if(i.isBN($))return $;this.negative=0,this.words=null,this.length=0,this.red=null,$!==null&&((v==="le"||v==="be")&&(E=v,v=10),this._init($||0,v||10,E||"be"))}typeof e=="object"?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=nQe.Buffer}catch{}i.isBN=function(v){return v instanceof i?!0:v!==null&&typeof v=="object"&&v.constructor.wordSize===i.wordSize&&Array.isArray(v.words)},i.max=function(v,E){return v.cmp(E)>0?v:E},i.min=function(v,E){return v.cmp(E)<0?v:E},i.prototype._init=function(v,E,_){if(typeof v=="number")return this._initNumber(v,E,_);if(typeof v=="object")return this._initArray(v,E,_);E==="hex"&&(E=16),r(E===(E|0)&&E>=2&&E<=36),v=v.toString().replace(/\s+/g,"");var D=0;v[0]==="-"&&(D++,this.negative=1),D<v.length&&(E===16?this._parseHex(v,D,_):(this._parseBase(v,E,D),_==="le"&&this._initArray(this.toArray(),E,_)))},i.prototype._initNumber=function(v,E,_){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[v&67108863],this.length=1):v<4503599627370496?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(r(v<9007199254740992),this.words=[v&67108863,v/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),E,_)},i.prototype._initArray=function(v,E,_){if(r(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var x,B,W=0;if(_==="be")for(D=v.length-1,x=0;D>=0;D-=3)B=v[D]|v[D-1]<<8|v[D-2]<<16,this.words[x]|=B<<W&67108863,this.words[x+1]=B>>>26-W&67108863,W+=24,W>=26&&(W-=26,x++);else if(_==="le")for(D=0,x=0;D<v.length;D+=3)B=v[D]|v[D+1]<<8|v[D+2]<<16,this.words[x]|=B<<W&67108863,this.words[x+1]=B>>>26-W&67108863,W+=24,W>=26&&(W-=26,x++);return this._strip()};function a($,v){var E=$.charCodeAt(v);if(E>=48&&E<=57)return E-48;if(E>=65&&E<=70)return E-55;if(E>=97&&E<=102)return E-87;r(!1,"Invalid character in "+$)}function c($,v,E){var _=a($,E);return E-1>=v&&(_|=a($,E-1)<<4),_}i.prototype._parseHex=function(v,E,_){this.length=Math.ceil((v.length-E)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var x=0,B=0,W;if(_==="be")for(D=v.length-1;D>=E;D-=2)W=c(v,E,D)<<x,this.words[B]|=W&67108863,x>=18?(x-=18,B+=1,this.words[B]|=W>>>26):x+=8;else{var L=v.length-E;for(D=L%2===0?E+1:E;D<v.length;D+=2)W=c(v,E,D)<<x,this.words[B]|=W&67108863,x>=18?(x-=18,B+=1,this.words[B]|=W>>>26):x+=8}this._strip()};function l($,v,E,_){for(var D=0,x=0,B=Math.min($.length,E),W=v;W<B;W++){var L=$.charCodeAt(W)-48;D*=_,L>=49?x=L-49+10:L>=17?x=L-17+10:x=L,r(L>=0&&x<_,"Invalid character"),D+=x}return D}i.prototype._parseBase=function(v,E,_){this.words=[0],this.length=1;for(var D=0,x=1;x<=67108863;x*=E)D++;D--,x=x/E|0;for(var B=v.length-_,W=B%D,L=Math.min(B,B-W)+_,S=0,F=_;F<L;F+=D)S=l(v,F,F+D,E),this.imuln(x),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S);if(W!==0){var X=1;for(S=l(v,F,v.length,E),F=0;F<W;F++)X*=E;this.imuln(X),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S)}this._strip()},i.prototype.copy=function(v){v.words=new Array(this.length);for(var E=0;E<this.length;E++)v.words[E]=this.words[E];v.length=this.length,v.negative=this.negative,v.red=this.red};function u($,v){$.words=v.words,$.length=v.length,$.negative=v.negative,$.red=v.red}if(i.prototype._move=function(v){u(v,this)},i.prototype.clone=function(){var v=new i(null);return this.copy(v),v},i.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{i.prototype.inspect=d}else i.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(v,E){v=v||10,E=E|0||1;var _;if(v===16||v==="hex"){_="";for(var D=0,x=0,B=0;B<this.length;B++){var W=this.words[B],L=((W<<D|x)&16777215).toString(16);x=W>>>24-D&16777215,D+=2,D>=26&&(D-=26,B--),x!==0||B!==this.length-1?_=h[6-L.length]+L+_:_=L+_}for(x!==0&&(_=x.toString(16)+_);_.length%E!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(v===(v|0)&&v>=2&&v<=36){var S=f[v],F=p[v];_="";var X=this.clone();for(X.negative=0;!X.isZero();){var se=X.modrn(F).toString(v);X=X.idivn(F),X.isZero()?_=se+_:_=h[S-se.length]+se+_}for(this.isZero()&&(_="0"+_);_.length%E!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=this.words[1]*67108864:this.length===3&&this.words[2]===1?v+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(v,E){return this.toArrayLike(o,v,E)}),i.prototype.toArray=function(v,E){return this.toArrayLike(Array,v,E)};var g=function(v,E){return v.allocUnsafe?v.allocUnsafe(E):new v(E)};i.prototype.toArrayLike=function(v,E,_){this._strip();var D=this.byteLength(),x=_||Math.max(1,D);r(D<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0");var B=g(v,x),W=E==="le"?"LE":"BE";return this["_toArrayLike"+W](B,D),B},i.prototype._toArrayLikeLE=function(v,E){for(var _=0,D=0,x=0,B=0;x<this.length;x++){var W=this.words[x]<<B|D;v[_++]=W&255,_<v.length&&(v[_++]=W>>8&255),_<v.length&&(v[_++]=W>>16&255),B===6?(_<v.length&&(v[_++]=W>>24&255),D=0,B=0):(D=W>>>24,B+=2)}if(_<v.length)for(v[_++]=D;_<v.length;)v[_++]=0},i.prototype._toArrayLikeBE=function(v,E){for(var _=v.length-1,D=0,x=0,B=0;x<this.length;x++){var W=this.words[x]<<B|D;v[_--]=W&255,_>=0&&(v[_--]=W>>8&255),_>=0&&(v[_--]=W>>16&255),B===6?(_>=0&&(v[_--]=W>>24&255),D=0,B=0):(D=W>>>24,B+=2)}if(_>=0)for(v[_--]=D;_>=0;)v[_--]=0},Math.clz32?i.prototype._countBits=function(v){return 32-Math.clz32(v)}:i.prototype._countBits=function(v){var E=v,_=0;return E>=4096&&(_+=13,E>>>=13),E>=64&&(_+=7,E>>>=7),E>=8&&(_+=4,E>>>=4),E>=2&&(_+=2,E>>>=2),_+E},i.prototype._zeroBits=function(v){if(v===0)return 26;var E=v,_=0;return E&8191||(_+=13,E>>>=13),E&127||(_+=7,E>>>=7),E&15||(_+=4,E>>>=4),E&3||(_+=2,E>>>=2),E&1||_++,_},i.prototype.bitLength=function(){var v=this.words[this.length-1],E=this._countBits(v);return(this.length-1)*26+E};function m($){for(var v=new Array($.bitLength()),E=0;E<v.length;E++){var _=E/26|0,D=E%26;v[E]=$.words[_]>>>D&1}return v}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,E=0;E<this.length;E++){var _=this._zeroBits(this.words[E]);if(v+=_,_!==26)break}return v},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},i.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var E=0;E<v.length;E++)this.words[E]=this.words[E]|v.words[E];return this._strip()},i.prototype.ior=function(v){return r((this.negative|v.negative)===0),this.iuor(v)},i.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},i.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},i.prototype.iuand=function(v){var E;this.length>v.length?E=v:E=this;for(var _=0;_<E.length;_++)this.words[_]=this.words[_]&v.words[_];return this.length=E.length,this._strip()},i.prototype.iand=function(v){return r((this.negative|v.negative)===0),this.iuand(v)},i.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},i.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},i.prototype.iuxor=function(v){var E,_;this.length>v.length?(E=this,_=v):(E=v,_=this);for(var D=0;D<_.length;D++)this.words[D]=E.words[D]^_.words[D];if(this!==E)for(;D<E.length;D++)this.words[D]=E.words[D];return this.length=E.length,this._strip()},i.prototype.ixor=function(v){return r((this.negative|v.negative)===0),this.iuxor(v)},i.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},i.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},i.prototype.inotn=function(v){r(typeof v=="number"&&v>=0);var E=Math.ceil(v/26)|0,_=v%26;this._expand(E),_>0&&E--;for(var D=0;D<E;D++)this.words[D]=~this.words[D]&67108863;return _>0&&(this.words[D]=~this.words[D]&67108863>>26-_),this._strip()},i.prototype.notn=function(v){return this.clone().inotn(v)},i.prototype.setn=function(v,E){r(typeof v=="number"&&v>=0);var _=v/26|0,D=v%26;return this._expand(_+1),E?this.words[_]=this.words[_]|1<<D:this.words[_]=this.words[_]&~(1<<D),this._strip()},i.prototype.iadd=function(v){var E;if(this.negative!==0&&v.negative===0)return this.negative=0,E=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,E=this.isub(v),v.negative=1,E._normSign();var _,D;this.length>v.length?(_=this,D=v):(_=v,D=this);for(var x=0,B=0;B<D.length;B++)E=(_.words[B]|0)+(D.words[B]|0)+x,this.words[B]=E&67108863,x=E>>>26;for(;x!==0&&B<_.length;B++)E=(_.words[B]|0)+x,this.words[B]=E&67108863,x=E>>>26;if(this.length=_.length,x!==0)this.words[this.length]=x,this.length++;else if(_!==this)for(;B<_.length;B++)this.words[B]=_.words[B];return this},i.prototype.add=function(v){var E;return v.negative!==0&&this.negative===0?(v.negative=0,E=this.sub(v),v.negative^=1,E):v.negative===0&&this.negative!==0?(this.negative=0,E=v.sub(this),this.negative=1,E):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},i.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var E=this.iadd(v);return v.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var _=this.cmp(v);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;var D,x;_>0?(D=this,x=v):(D=v,x=this);for(var B=0,W=0;W<x.length;W++)E=(D.words[W]|0)-(x.words[W]|0)+B,B=E>>26,this.words[W]=E&67108863;for(;B!==0&&W<D.length;W++)E=(D.words[W]|0)+B,B=E>>26,this.words[W]=E&67108863;if(B===0&&W<D.length&&D!==this)for(;W<D.length;W++)this.words[W]=D.words[W];return this.length=Math.max(this.length,W),D!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(v){return this.clone().isub(v)};function y($,v,E){E.negative=v.negative^$.negative;var _=$.length+v.length|0;E.length=_,_=_-1|0;var D=$.words[0]|0,x=v.words[0]|0,B=D*x,W=B&67108863,L=B/67108864|0;E.words[0]=W;for(var S=1;S<_;S++){for(var F=L>>>26,X=L&67108863,se=Math.min(S,v.length-1),ge=Math.max(0,S-$.length+1);ge<=se;ge++){var Ue=S-ge|0;D=$.words[Ue]|0,x=v.words[ge]|0,B=D*x+X,F+=B/67108864|0,X=B&67108863}E.words[S]=X|0,L=F|0}return L!==0?E.words[S]=L|0:E.length--,E._strip()}var w=function(v,E,_){var D=v.words,x=E.words,B=_.words,W=0,L,S,F,X=D[0]|0,se=X&8191,ge=X>>>13,Ue=D[1]|0,Le=Ue&8191,Be=Ue>>>13,Ut=D[2]|0,lt=Ut&8191,st=Ut>>>13,ce=D[3]|0,ae=ce&8191,_e=ce>>>13,Se=D[4]|0,Ce=Se&8191,Qe=Se>>>13,pt=D[5]|0,Ye=pt&8191,it=pt>>>13,vn=D[6]|0,He=vn&8191,Yt=vn>>>13,Qt=D[7]|0,De=Qt&8191,z=Qt>>>13,T=D[8]|0,O=T&8191,Y=T>>>13,te=D[9]|0,he=te&8191,be=te>>>13,cn=x[0]|0,Ft=cn&8191,It=cn>>>13,Fn=x[1]|0,ke=Fn&8191,er=Fn>>>13,Sw=x[2]|0,vr=Sw&8191,Er=Sw>>>13,Iw=x[3]|0,Tr=Iw&8191,us=Iw>>>13,ZC=x[4]|0,sr=ZC&8191,ds=ZC>>>13,lh=x[5]|0,hs=lh&8191,ir=lh>>>13,uh=x[6]|0,fs=uh&8191,_s=uh>>>13,Nw=x[7]|0,or=Nw&8191,ps=Nw>>>13,dh=x[8]|0,Cr=dh&8191,Ur=dh>>>13,qf=x[9]|0,gs=qf&8191,Jr=qf>>>13;_.negative=v.negative^E.negative,_.length=19,L=Math.imul(se,Ft),S=Math.imul(se,It),S=S+Math.imul(ge,Ft)|0,F=Math.imul(ge,It);var Vf=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(Vf>>>26)|0,Vf&=67108863,L=Math.imul(Le,Ft),S=Math.imul(Le,It),S=S+Math.imul(Be,Ft)|0,F=Math.imul(Be,It),L=L+Math.imul(se,ke)|0,S=S+Math.imul(se,er)|0,S=S+Math.imul(ge,ke)|0,F=F+Math.imul(ge,er)|0;var Kf=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(Kf>>>26)|0,Kf&=67108863,L=Math.imul(lt,Ft),S=Math.imul(lt,It),S=S+Math.imul(st,Ft)|0,F=Math.imul(st,It),L=L+Math.imul(Le,ke)|0,S=S+Math.imul(Le,er)|0,S=S+Math.imul(Be,ke)|0,F=F+Math.imul(Be,er)|0,L=L+Math.imul(se,vr)|0,S=S+Math.imul(se,Er)|0,S=S+Math.imul(ge,vr)|0,F=F+Math.imul(ge,Er)|0;var qu=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(qu>>>26)|0,qu&=67108863,L=Math.imul(ae,Ft),S=Math.imul(ae,It),S=S+Math.imul(_e,Ft)|0,F=Math.imul(_e,It),L=L+Math.imul(lt,ke)|0,S=S+Math.imul(lt,er)|0,S=S+Math.imul(st,ke)|0,F=F+Math.imul(st,er)|0,L=L+Math.imul(Le,vr)|0,S=S+Math.imul(Le,Er)|0,S=S+Math.imul(Be,vr)|0,F=F+Math.imul(Be,Er)|0,L=L+Math.imul(se,Tr)|0,S=S+Math.imul(se,us)|0,S=S+Math.imul(ge,Tr)|0,F=F+Math.imul(ge,us)|0;var hh=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(hh>>>26)|0,hh&=67108863,L=Math.imul(Ce,Ft),S=Math.imul(Ce,It),S=S+Math.imul(Qe,Ft)|0,F=Math.imul(Qe,It),L=L+Math.imul(ae,ke)|0,S=S+Math.imul(ae,er)|0,S=S+Math.imul(_e,ke)|0,F=F+Math.imul(_e,er)|0,L=L+Math.imul(lt,vr)|0,S=S+Math.imul(lt,Er)|0,S=S+Math.imul(st,vr)|0,F=F+Math.imul(st,Er)|0,L=L+Math.imul(Le,Tr)|0,S=S+Math.imul(Le,us)|0,S=S+Math.imul(Be,Tr)|0,F=F+Math.imul(Be,us)|0,L=L+Math.imul(se,sr)|0,S=S+Math.imul(se,ds)|0,S=S+Math.imul(ge,sr)|0,F=F+Math.imul(ge,ds)|0;var Vu=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(Vu>>>26)|0,Vu&=67108863,L=Math.imul(Ye,Ft),S=Math.imul(Ye,It),S=S+Math.imul(it,Ft)|0,F=Math.imul(it,It),L=L+Math.imul(Ce,ke)|0,S=S+Math.imul(Ce,er)|0,S=S+Math.imul(Qe,ke)|0,F=F+Math.imul(Qe,er)|0,L=L+Math.imul(ae,vr)|0,S=S+Math.imul(ae,Er)|0,S=S+Math.imul(_e,vr)|0,F=F+Math.imul(_e,Er)|0,L=L+Math.imul(lt,Tr)|0,S=S+Math.imul(lt,us)|0,S=S+Math.imul(st,Tr)|0,F=F+Math.imul(st,us)|0,L=L+Math.imul(Le,sr)|0,S=S+Math.imul(Le,ds)|0,S=S+Math.imul(Be,sr)|0,F=F+Math.imul(Be,ds)|0,L=L+Math.imul(se,hs)|0,S=S+Math.imul(se,ir)|0,S=S+Math.imul(ge,hs)|0,F=F+Math.imul(ge,ir)|0;var Ku=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(Ku>>>26)|0,Ku&=67108863,L=Math.imul(He,Ft),S=Math.imul(He,It),S=S+Math.imul(Yt,Ft)|0,F=Math.imul(Yt,It),L=L+Math.imul(Ye,ke)|0,S=S+Math.imul(Ye,er)|0,S=S+Math.imul(it,ke)|0,F=F+Math.imul(it,er)|0,L=L+Math.imul(Ce,vr)|0,S=S+Math.imul(Ce,Er)|0,S=S+Math.imul(Qe,vr)|0,F=F+Math.imul(Qe,Er)|0,L=L+Math.imul(ae,Tr)|0,S=S+Math.imul(ae,us)|0,S=S+Math.imul(_e,Tr)|0,F=F+Math.imul(_e,us)|0,L=L+Math.imul(lt,sr)|0,S=S+Math.imul(lt,ds)|0,S=S+Math.imul(st,sr)|0,F=F+Math.imul(st,ds)|0,L=L+Math.imul(Le,hs)|0,S=S+Math.imul(Le,ir)|0,S=S+Math.imul(Be,hs)|0,F=F+Math.imul(Be,ir)|0,L=L+Math.imul(se,fs)|0,S=S+Math.imul(se,_s)|0,S=S+Math.imul(ge,fs)|0,F=F+Math.imul(ge,_s)|0;var Tm=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(Tm>>>26)|0,Tm&=67108863,L=Math.imul(De,Ft),S=Math.imul(De,It),S=S+Math.imul(z,Ft)|0,F=Math.imul(z,It),L=L+Math.imul(He,ke)|0,S=S+Math.imul(He,er)|0,S=S+Math.imul(Yt,ke)|0,F=F+Math.imul(Yt,er)|0,L=L+Math.imul(Ye,vr)|0,S=S+Math.imul(Ye,Er)|0,S=S+Math.imul(it,vr)|0,F=F+Math.imul(it,Er)|0,L=L+Math.imul(Ce,Tr)|0,S=S+Math.imul(Ce,us)|0,S=S+Math.imul(Qe,Tr)|0,F=F+Math.imul(Qe,us)|0,L=L+Math.imul(ae,sr)|0,S=S+Math.imul(ae,ds)|0,S=S+Math.imul(_e,sr)|0,F=F+Math.imul(_e,ds)|0,L=L+Math.imul(lt,hs)|0,S=S+Math.imul(lt,ir)|0,S=S+Math.imul(st,hs)|0,F=F+Math.imul(st,ir)|0,L=L+Math.imul(Le,fs)|0,S=S+Math.imul(Le,_s)|0,S=S+Math.imul(Be,fs)|0,F=F+Math.imul(Be,_s)|0,L=L+Math.imul(se,or)|0,S=S+Math.imul(se,ps)|0,S=S+Math.imul(ge,or)|0,F=F+Math.imul(ge,ps)|0;var Ii=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,L=Math.imul(O,Ft),S=Math.imul(O,It),S=S+Math.imul(Y,Ft)|0,F=Math.imul(Y,It),L=L+Math.imul(De,ke)|0,S=S+Math.imul(De,er)|0,S=S+Math.imul(z,ke)|0,F=F+Math.imul(z,er)|0,L=L+Math.imul(He,vr)|0,S=S+Math.imul(He,Er)|0,S=S+Math.imul(Yt,vr)|0,F=F+Math.imul(Yt,Er)|0,L=L+Math.imul(Ye,Tr)|0,S=S+Math.imul(Ye,us)|0,S=S+Math.imul(it,Tr)|0,F=F+Math.imul(it,us)|0,L=L+Math.imul(Ce,sr)|0,S=S+Math.imul(Ce,ds)|0,S=S+Math.imul(Qe,sr)|0,F=F+Math.imul(Qe,ds)|0,L=L+Math.imul(ae,hs)|0,S=S+Math.imul(ae,ir)|0,S=S+Math.imul(_e,hs)|0,F=F+Math.imul(_e,ir)|0,L=L+Math.imul(lt,fs)|0,S=S+Math.imul(lt,_s)|0,S=S+Math.imul(st,fs)|0,F=F+Math.imul(st,_s)|0,L=L+Math.imul(Le,or)|0,S=S+Math.imul(Le,ps)|0,S=S+Math.imul(Be,or)|0,F=F+Math.imul(Be,ps)|0,L=L+Math.imul(se,Cr)|0,S=S+Math.imul(se,Ur)|0,S=S+Math.imul(ge,Cr)|0,F=F+Math.imul(ge,Ur)|0;var Yf=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(Yf>>>26)|0,Yf&=67108863,L=Math.imul(he,Ft),S=Math.imul(he,It),S=S+Math.imul(be,Ft)|0,F=Math.imul(be,It),L=L+Math.imul(O,ke)|0,S=S+Math.imul(O,er)|0,S=S+Math.imul(Y,ke)|0,F=F+Math.imul(Y,er)|0,L=L+Math.imul(De,vr)|0,S=S+Math.imul(De,Er)|0,S=S+Math.imul(z,vr)|0,F=F+Math.imul(z,Er)|0,L=L+Math.imul(He,Tr)|0,S=S+Math.imul(He,us)|0,S=S+Math.imul(Yt,Tr)|0,F=F+Math.imul(Yt,us)|0,L=L+Math.imul(Ye,sr)|0,S=S+Math.imul(Ye,ds)|0,S=S+Math.imul(it,sr)|0,F=F+Math.imul(it,ds)|0,L=L+Math.imul(Ce,hs)|0,S=S+Math.imul(Ce,ir)|0,S=S+Math.imul(Qe,hs)|0,F=F+Math.imul(Qe,ir)|0,L=L+Math.imul(ae,fs)|0,S=S+Math.imul(ae,_s)|0,S=S+Math.imul(_e,fs)|0,F=F+Math.imul(_e,_s)|0,L=L+Math.imul(lt,or)|0,S=S+Math.imul(lt,ps)|0,S=S+Math.imul(st,or)|0,F=F+Math.imul(st,ps)|0,L=L+Math.imul(Le,Cr)|0,S=S+Math.imul(Le,Ur)|0,S=S+Math.imul(Be,Cr)|0,F=F+Math.imul(Be,Ur)|0,L=L+Math.imul(se,gs)|0,S=S+Math.imul(se,Jr)|0,S=S+Math.imul(ge,gs)|0,F=F+Math.imul(ge,Jr)|0;var _a=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(_a>>>26)|0,_a&=67108863,L=Math.imul(he,ke),S=Math.imul(he,er),S=S+Math.imul(be,ke)|0,F=Math.imul(be,er),L=L+Math.imul(O,vr)|0,S=S+Math.imul(O,Er)|0,S=S+Math.imul(Y,vr)|0,F=F+Math.imul(Y,Er)|0,L=L+Math.imul(De,Tr)|0,S=S+Math.imul(De,us)|0,S=S+Math.imul(z,Tr)|0,F=F+Math.imul(z,us)|0,L=L+Math.imul(He,sr)|0,S=S+Math.imul(He,ds)|0,S=S+Math.imul(Yt,sr)|0,F=F+Math.imul(Yt,ds)|0,L=L+Math.imul(Ye,hs)|0,S=S+Math.imul(Ye,ir)|0,S=S+Math.imul(it,hs)|0,F=F+Math.imul(it,ir)|0,L=L+Math.imul(Ce,fs)|0,S=S+Math.imul(Ce,_s)|0,S=S+Math.imul(Qe,fs)|0,F=F+Math.imul(Qe,_s)|0,L=L+Math.imul(ae,or)|0,S=S+Math.imul(ae,ps)|0,S=S+Math.imul(_e,or)|0,F=F+Math.imul(_e,ps)|0,L=L+Math.imul(lt,Cr)|0,S=S+Math.imul(lt,Ur)|0,S=S+Math.imul(st,Cr)|0,F=F+Math.imul(st,Ur)|0,L=L+Math.imul(Le,gs)|0,S=S+Math.imul(Le,Jr)|0,S=S+Math.imul(Be,gs)|0,F=F+Math.imul(Be,Jr)|0;var Qf=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(Qf>>>26)|0,Qf&=67108863,L=Math.imul(he,vr),S=Math.imul(he,Er),S=S+Math.imul(be,vr)|0,F=Math.imul(be,Er),L=L+Math.imul(O,Tr)|0,S=S+Math.imul(O,us)|0,S=S+Math.imul(Y,Tr)|0,F=F+Math.imul(Y,us)|0,L=L+Math.imul(De,sr)|0,S=S+Math.imul(De,ds)|0,S=S+Math.imul(z,sr)|0,F=F+Math.imul(z,ds)|0,L=L+Math.imul(He,hs)|0,S=S+Math.imul(He,ir)|0,S=S+Math.imul(Yt,hs)|0,F=F+Math.imul(Yt,ir)|0,L=L+Math.imul(Ye,fs)|0,S=S+Math.imul(Ye,_s)|0,S=S+Math.imul(it,fs)|0,F=F+Math.imul(it,_s)|0,L=L+Math.imul(Ce,or)|0,S=S+Math.imul(Ce,ps)|0,S=S+Math.imul(Qe,or)|0,F=F+Math.imul(Qe,ps)|0,L=L+Math.imul(ae,Cr)|0,S=S+Math.imul(ae,Ur)|0,S=S+Math.imul(_e,Cr)|0,F=F+Math.imul(_e,Ur)|0,L=L+Math.imul(lt,gs)|0,S=S+Math.imul(lt,Jr)|0,S=S+Math.imul(st,gs)|0,F=F+Math.imul(st,Jr)|0;var Jl=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(Jl>>>26)|0,Jl&=67108863,L=Math.imul(he,Tr),S=Math.imul(he,us),S=S+Math.imul(be,Tr)|0,F=Math.imul(be,us),L=L+Math.imul(O,sr)|0,S=S+Math.imul(O,ds)|0,S=S+Math.imul(Y,sr)|0,F=F+Math.imul(Y,ds)|0,L=L+Math.imul(De,hs)|0,S=S+Math.imul(De,ir)|0,S=S+Math.imul(z,hs)|0,F=F+Math.imul(z,ir)|0,L=L+Math.imul(He,fs)|0,S=S+Math.imul(He,_s)|0,S=S+Math.imul(Yt,fs)|0,F=F+Math.imul(Yt,_s)|0,L=L+Math.imul(Ye,or)|0,S=S+Math.imul(Ye,ps)|0,S=S+Math.imul(it,or)|0,F=F+Math.imul(it,ps)|0,L=L+Math.imul(Ce,Cr)|0,S=S+Math.imul(Ce,Ur)|0,S=S+Math.imul(Qe,Cr)|0,F=F+Math.imul(Qe,Ur)|0,L=L+Math.imul(ae,gs)|0,S=S+Math.imul(ae,Jr)|0,S=S+Math.imul(_e,gs)|0,F=F+Math.imul(_e,Jr)|0;var fh=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(fh>>>26)|0,fh&=67108863,L=Math.imul(he,sr),S=Math.imul(he,ds),S=S+Math.imul(be,sr)|0,F=Math.imul(be,ds),L=L+Math.imul(O,hs)|0,S=S+Math.imul(O,ir)|0,S=S+Math.imul(Y,hs)|0,F=F+Math.imul(Y,ir)|0,L=L+Math.imul(De,fs)|0,S=S+Math.imul(De,_s)|0,S=S+Math.imul(z,fs)|0,F=F+Math.imul(z,_s)|0,L=L+Math.imul(He,or)|0,S=S+Math.imul(He,ps)|0,S=S+Math.imul(Yt,or)|0,F=F+Math.imul(Yt,ps)|0,L=L+Math.imul(Ye,Cr)|0,S=S+Math.imul(Ye,Ur)|0,S=S+Math.imul(it,Cr)|0,F=F+Math.imul(it,Ur)|0,L=L+Math.imul(Ce,gs)|0,S=S+Math.imul(Ce,Jr)|0,S=S+Math.imul(Qe,gs)|0,F=F+Math.imul(Qe,Jr)|0;var Go=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(Go>>>26)|0,Go&=67108863,L=Math.imul(he,hs),S=Math.imul(he,ir),S=S+Math.imul(be,hs)|0,F=Math.imul(be,ir),L=L+Math.imul(O,fs)|0,S=S+Math.imul(O,_s)|0,S=S+Math.imul(Y,fs)|0,F=F+Math.imul(Y,_s)|0,L=L+Math.imul(De,or)|0,S=S+Math.imul(De,ps)|0,S=S+Math.imul(z,or)|0,F=F+Math.imul(z,ps)|0,L=L+Math.imul(He,Cr)|0,S=S+Math.imul(He,Ur)|0,S=S+Math.imul(Yt,Cr)|0,F=F+Math.imul(Yt,Ur)|0,L=L+Math.imul(Ye,gs)|0,S=S+Math.imul(Ye,Jr)|0,S=S+Math.imul(it,gs)|0,F=F+Math.imul(it,Jr)|0;var qo=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(qo>>>26)|0,qo&=67108863,L=Math.imul(he,fs),S=Math.imul(he,_s),S=S+Math.imul(be,fs)|0,F=Math.imul(be,_s),L=L+Math.imul(O,or)|0,S=S+Math.imul(O,ps)|0,S=S+Math.imul(Y,or)|0,F=F+Math.imul(Y,ps)|0,L=L+Math.imul(De,Cr)|0,S=S+Math.imul(De,Ur)|0,S=S+Math.imul(z,Cr)|0,F=F+Math.imul(z,Ur)|0,L=L+Math.imul(He,gs)|0,S=S+Math.imul(He,Jr)|0,S=S+Math.imul(Yt,gs)|0,F=F+Math.imul(Yt,Jr)|0;var ph=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(ph>>>26)|0,ph&=67108863,L=Math.imul(he,or),S=Math.imul(he,ps),S=S+Math.imul(be,or)|0,F=Math.imul(be,ps),L=L+Math.imul(O,Cr)|0,S=S+Math.imul(O,Ur)|0,S=S+Math.imul(Y,Cr)|0,F=F+Math.imul(Y,Ur)|0,L=L+Math.imul(De,gs)|0,S=S+Math.imul(De,Jr)|0,S=S+Math.imul(z,gs)|0,F=F+Math.imul(z,Jr)|0;var gh=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(gh>>>26)|0,gh&=67108863,L=Math.imul(he,Cr),S=Math.imul(he,Ur),S=S+Math.imul(be,Cr)|0,F=Math.imul(be,Ur),L=L+Math.imul(O,gs)|0,S=S+Math.imul(O,Jr)|0,S=S+Math.imul(Y,gs)|0,F=F+Math.imul(Y,Jr)|0;var Yu=(W+L|0)+((S&8191)<<13)|0;W=(F+(S>>>13)|0)+(Yu>>>26)|0,Yu&=67108863,L=Math.imul(he,gs),S=Math.imul(he,Jr),S=S+Math.imul(be,gs)|0,F=Math.imul(be,Jr);var Jf=(W+L|0)+((S&8191)<<13)|0;return W=(F+(S>>>13)|0)+(Jf>>>26)|0,Jf&=67108863,B[0]=Vf,B[1]=Kf,B[2]=qu,B[3]=hh,B[4]=Vu,B[5]=Ku,B[6]=Tm,B[7]=Ii,B[8]=Yf,B[9]=_a,B[10]=Qf,B[11]=Jl,B[12]=fh,B[13]=Go,B[14]=qo,B[15]=ph,B[16]=gh,B[17]=Yu,B[18]=Jf,W!==0&&(B[19]=W,_.length++),_};Math.imul||(w=y);function C($,v,E){E.negative=v.negative^$.negative,E.length=$.length+v.length;for(var _=0,D=0,x=0;x<E.length-1;x++){var B=D;D=0;for(var W=_&67108863,L=Math.min(x,v.length-1),S=Math.max(0,x-$.length+1);S<=L;S++){var F=x-S,X=$.words[F]|0,se=v.words[S]|0,ge=X*se,Ue=ge&67108863;B=B+(ge/67108864|0)|0,Ue=Ue+W|0,W=Ue&67108863,B=B+(Ue>>>26)|0,D+=B>>>26,B&=67108863}E.words[x]=W,_=B,B=D}return _!==0?E.words[x]=_:E.length--,E._strip()}function N($,v,E){return C($,v,E)}i.prototype.mulTo=function(v,E){var _,D=this.length+v.length;return this.length===10&&v.length===10?_=w(this,v,E):D<63?_=y(this,v,E):D<1024?_=C(this,v,E):_=N(this,v,E),_},i.prototype.mul=function(v){var E=new i(null);return E.words=new Array(this.length+v.length),this.mulTo(v,E)},i.prototype.mulf=function(v){var E=new i(null);return E.words=new Array(this.length+v.length),N(this,v,E)},i.prototype.imul=function(v){return this.clone().mulTo(v,this)},i.prototype.imuln=function(v){var E=v<0;E&&(v=-v),r(typeof v=="number"),r(v<67108864);for(var _=0,D=0;D<this.length;D++){var x=(this.words[D]|0)*v,B=(x&67108863)+(_&67108863);_>>=26,_+=x/67108864|0,_+=B>>>26,this.words[D]=B&67108863}return _!==0&&(this.words[D]=_,this.length++),this.length=v===0?1:this.length,E?this.ineg():this},i.prototype.muln=function(v){return this.clone().imuln(v)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(v){var E=m(v);if(E.length===0)return new i(1);for(var _=this,D=0;D<E.length&&E[D]===0;D++,_=_.sqr());if(++D<E.length)for(var x=_.sqr();D<E.length;D++,x=x.sqr())E[D]!==0&&(_=_.mul(x));return _},i.prototype.iushln=function(v){r(typeof v=="number"&&v>=0);var E=v%26,_=(v-E)/26,D=67108863>>>26-E<<26-E,x;if(E!==0){var B=0;for(x=0;x<this.length;x++){var W=this.words[x]&D,L=(this.words[x]|0)-W<<E;this.words[x]=L|B,B=W>>>26-E}B&&(this.words[x]=B,this.length++)}if(_!==0){for(x=this.length-1;x>=0;x--)this.words[x+_]=this.words[x];for(x=0;x<_;x++)this.words[x]=0;this.length+=_}return this._strip()},i.prototype.ishln=function(v){return r(this.negative===0),this.iushln(v)},i.prototype.iushrn=function(v,E,_){r(typeof v=="number"&&v>=0);var D;E?D=(E-E%26)/26:D=0;var x=v%26,B=Math.min((v-x)/26,this.length),W=67108863^67108863>>>x<<x,L=_;if(D-=B,D=Math.max(0,D),L){for(var S=0;S<B;S++)L.words[S]=this.words[S];L.length=B}if(B!==0)if(this.length>B)for(this.length-=B,S=0;S<this.length;S++)this.words[S]=this.words[S+B];else this.words[0]=0,this.length=1;var F=0;for(S=this.length-1;S>=0&&(F!==0||S>=D);S--){var X=this.words[S]|0;this.words[S]=F<<26-x|X>>>x,F=X&W}return L&&F!==0&&(L.words[L.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(v,E,_){return r(this.negative===0),this.iushrn(v,E,_)},i.prototype.shln=function(v){return this.clone().ishln(v)},i.prototype.ushln=function(v){return this.clone().iushln(v)},i.prototype.shrn=function(v){return this.clone().ishrn(v)},i.prototype.ushrn=function(v){return this.clone().iushrn(v)},i.prototype.testn=function(v){r(typeof v=="number"&&v>=0);var E=v%26,_=(v-E)/26,D=1<<E;if(this.length<=_)return!1;var x=this.words[_];return!!(x&D)},i.prototype.imaskn=function(v){r(typeof v=="number"&&v>=0);var E=v%26,_=(v-E)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(E!==0&&_++,this.length=Math.min(_,this.length),E!==0){var D=67108863^67108863>>>E<<E;this.words[this.length-1]&=D}return this._strip()},i.prototype.maskn=function(v){return this.clone().imaskn(v)},i.prototype.iaddn=function(v){return r(typeof v=="number"),r(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(this.words[0]|0)<=v?(this.words[0]=v-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},i.prototype._iaddn=function(v){this.words[0]+=v;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},i.prototype.isubn=function(v){if(r(typeof v=="number"),r(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this._strip()},i.prototype.addn=function(v){return this.clone().iaddn(v)},i.prototype.subn=function(v){return this.clone().isubn(v)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(v,E,_){var D=v.length+_,x;this._expand(D);var B,W=0;for(x=0;x<v.length;x++){B=(this.words[x+_]|0)+W;var L=(v.words[x]|0)*E;B-=L&67108863,W=(B>>26)-(L/67108864|0),this.words[x+_]=B&67108863}for(;x<this.length-_;x++)B=(this.words[x+_]|0)+W,W=B>>26,this.words[x+_]=B&67108863;if(W===0)return this._strip();for(r(W===-1),W=0,x=0;x<this.length;x++)B=-(this.words[x]|0)+W,W=B>>26,this.words[x]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(v,E){var _=this.length-v.length,D=this.clone(),x=v,B=x.words[x.length-1]|0,W=this._countBits(B);_=26-W,_!==0&&(x=x.ushln(_),D.iushln(_),B=x.words[x.length-1]|0);var L=D.length-x.length,S;if(E!=="mod"){S=new i(null),S.length=L+1,S.words=new Array(S.length);for(var F=0;F<S.length;F++)S.words[F]=0}var X=D.clone()._ishlnsubmul(x,1,L);X.negative===0&&(D=X,S&&(S.words[L]=1));for(var se=L-1;se>=0;se--){var ge=(D.words[x.length+se]|0)*67108864+(D.words[x.length+se-1]|0);for(ge=Math.min(ge/B|0,67108863),D._ishlnsubmul(x,ge,se);D.negative!==0;)ge--,D.negative=0,D._ishlnsubmul(x,1,se),D.isZero()||(D.negative^=1);S&&(S.words[se]=ge)}return S&&S._strip(),D._strip(),E!=="div"&&_!==0&&D.iushrn(_),{div:S||null,mod:D}},i.prototype.divmod=function(v,E,_){if(r(!v.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var D,x,B;return this.negative!==0&&v.negative===0?(B=this.neg().divmod(v,E),E!=="mod"&&(D=B.div.neg()),E!=="div"&&(x=B.mod.neg(),_&&x.negative!==0&&x.iadd(v)),{div:D,mod:x}):this.negative===0&&v.negative!==0?(B=this.divmod(v.neg(),E),E!=="mod"&&(D=B.div.neg()),{div:D,mod:B.mod}):this.negative&v.negative?(B=this.neg().divmod(v.neg(),E),E!=="div"&&(x=B.mod.neg(),_&&x.negative!==0&&x.isub(v)),{div:B.div,mod:x}):v.length>this.length||this.cmp(v)<0?{div:new i(0),mod:this}:v.length===1?E==="div"?{div:this.divn(v.words[0]),mod:null}:E==="mod"?{div:null,mod:new i(this.modrn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new i(this.modrn(v.words[0]))}:this._wordDiv(v,E)},i.prototype.div=function(v){return this.divmod(v,"div",!1).div},i.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},i.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},i.prototype.divRound=function(v){var E=this.divmod(v);if(E.mod.isZero())return E.div;var _=E.div.negative!==0?E.mod.isub(v):E.mod,D=v.ushrn(1),x=v.andln(1),B=_.cmp(D);return B<0||x===1&&B===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},i.prototype.modrn=function(v){var E=v<0;E&&(v=-v),r(v<=67108863);for(var _=(1<<26)%v,D=0,x=this.length-1;x>=0;x--)D=(_*D+(this.words[x]|0))%v;return E?-D:D},i.prototype.modn=function(v){return this.modrn(v)},i.prototype.idivn=function(v){var E=v<0;E&&(v=-v),r(v<=67108863);for(var _=0,D=this.length-1;D>=0;D--){var x=(this.words[D]|0)+_*67108864;this.words[D]=x/v|0,_=x%v}return this._strip(),E?this.ineg():this},i.prototype.divn=function(v){return this.clone().idivn(v)},i.prototype.egcd=function(v){r(v.negative===0),r(!v.isZero());var E=this,_=v.clone();E.negative!==0?E=E.umod(v):E=E.clone();for(var D=new i(1),x=new i(0),B=new i(0),W=new i(1),L=0;E.isEven()&&_.isEven();)E.iushrn(1),_.iushrn(1),++L;for(var S=_.clone(),F=E.clone();!E.isZero();){for(var X=0,se=1;!(E.words[0]&se)&&X<26;++X,se<<=1);if(X>0)for(E.iushrn(X);X-- >0;)(D.isOdd()||x.isOdd())&&(D.iadd(S),x.isub(F)),D.iushrn(1),x.iushrn(1);for(var ge=0,Ue=1;!(_.words[0]&Ue)&&ge<26;++ge,Ue<<=1);if(ge>0)for(_.iushrn(ge);ge-- >0;)(B.isOdd()||W.isOdd())&&(B.iadd(S),W.isub(F)),B.iushrn(1),W.iushrn(1);E.cmp(_)>=0?(E.isub(_),D.isub(B),x.isub(W)):(_.isub(E),B.isub(D),W.isub(x))}return{a:B,b:W,gcd:_.iushln(L)}},i.prototype._invmp=function(v){r(v.negative===0),r(!v.isZero());var E=this,_=v.clone();E.negative!==0?E=E.umod(v):E=E.clone();for(var D=new i(1),x=new i(0),B=_.clone();E.cmpn(1)>0&&_.cmpn(1)>0;){for(var W=0,L=1;!(E.words[0]&L)&&W<26;++W,L<<=1);if(W>0)for(E.iushrn(W);W-- >0;)D.isOdd()&&D.iadd(B),D.iushrn(1);for(var S=0,F=1;!(_.words[0]&F)&&S<26;++S,F<<=1);if(S>0)for(_.iushrn(S);S-- >0;)x.isOdd()&&x.iadd(B),x.iushrn(1);E.cmp(_)>=0?(E.isub(_),D.isub(x)):(_.isub(E),x.isub(D))}var X;return E.cmpn(1)===0?X=D:X=x,X.cmpn(0)<0&&X.iadd(v),X},i.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var E=this.clone(),_=v.clone();E.negative=0,_.negative=0;for(var D=0;E.isEven()&&_.isEven();D++)E.iushrn(1),_.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;_.isEven();)_.iushrn(1);var x=E.cmp(_);if(x<0){var B=E;E=_,_=B}else if(x===0||_.cmpn(1)===0)break;E.isub(_)}while(!0);return _.iushln(D)},i.prototype.invm=function(v){return this.egcd(v).a.umod(v)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(v){return this.words[0]&v},i.prototype.bincn=function(v){r(typeof v=="number");var E=v%26,_=(v-E)/26,D=1<<E;if(this.length<=_)return this._expand(_+1),this.words[_]|=D,this;for(var x=D,B=_;x!==0&&B<this.length;B++){var W=this.words[B]|0;W+=x,x=W>>>26,W&=67108863,this.words[B]=W}return x!==0&&(this.words[B]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(v){var E=v<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this._strip();var _;if(this.length>1)_=1;else{E&&(v=-v),r(v<=67108863,"Number is too big");var D=this.words[0]|0;_=D===v?0:D<v?-1:1}return this.negative!==0?-_|0:_},i.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var E=this.ucmp(v);return this.negative!==0?-E|0:E},i.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var E=0,_=this.length-1;_>=0;_--){var D=this.words[_]|0,x=v.words[_]|0;if(D!==x){D<x?E=-1:D>x&&(E=1);break}}return E},i.prototype.gtn=function(v){return this.cmpn(v)===1},i.prototype.gt=function(v){return this.cmp(v)===1},i.prototype.gten=function(v){return this.cmpn(v)>=0},i.prototype.gte=function(v){return this.cmp(v)>=0},i.prototype.ltn=function(v){return this.cmpn(v)===-1},i.prototype.lt=function(v){return this.cmp(v)===-1},i.prototype.lten=function(v){return this.cmpn(v)<=0},i.prototype.lte=function(v){return this.cmp(v)<=0},i.prototype.eqn=function(v){return this.cmpn(v)===0},i.prototype.eq=function(v){return this.cmp(v)===0},i.red=function(v){return new j(v)},i.prototype.toRed=function(v){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(v){return this.red=v,this},i.prototype.forceRed=function(v){return r(!this.red,"Already a number in reduction context"),this._forceRed(v)},i.prototype.redAdd=function(v){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},i.prototype.redIAdd=function(v){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},i.prototype.redSub=function(v){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},i.prototype.redISub=function(v){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},i.prototype.redShl=function(v){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},i.prototype.redMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},i.prototype.redIMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(v){return r(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var I={k256:null,p224:null,p192:null,p25519:null};function k($,v){this.name=$,this.p=new i(v,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var v=new i(null);return v.words=new Array(Math.ceil(this.n/13)),v},k.prototype.ireduce=function(v){var E=v,_;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),_=E.bitLength();while(_>this.n);var D=_<this.n?-1:E.ucmp(this.p);return D===0?(E.words[0]=0,E.length=1):D>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},k.prototype.split=function(v,E){v.iushrn(this.n,0,E)},k.prototype.imulK=function(v){return v.imul(this.k)};function P(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(P,k),P.prototype.split=function(v,E){for(var _=4194303,D=Math.min(v.length,9),x=0;x<D;x++)E.words[x]=v.words[x];if(E.length=D,v.length<=9){v.words[0]=0,v.length=1;return}var B=v.words[9];for(E.words[E.length++]=B&_,x=10;x<v.length;x++){var W=v.words[x]|0;v.words[x-10]=(W&_)<<4|B>>>22,B=W}B>>>=22,v.words[x-10]=B,B===0&&v.length>10?v.length-=10:v.length-=9},P.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var E=0,_=0;_<v.length;_++){var D=v.words[_]|0;E+=D*977,v.words[_]=E&67108863,E=D*64+(E/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v};function U(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(U,k);function M(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(M,k);function H(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(H,k),H.prototype.imulK=function(v){for(var E=0,_=0;_<v.length;_++){var D=(v.words[_]|0)*19+E,x=D&67108863;D>>>=26,v.words[_]=x,E=D}return E!==0&&(v.words[v.length++]=E),v},i._prime=function(v){if(I[v])return I[v];var E;if(v==="k256")E=new P;else if(v==="p224")E=new U;else if(v==="p192")E=new M;else if(v==="p25519")E=new H;else throw new Error("Unknown prime "+v);return I[v]=E,E};function j($){if(typeof $=="string"){var v=i._prime($);this.m=v.p,this.prime=v}else r($.gtn(1),"modulus must be greater than 1"),this.m=$,this.prime=null}j.prototype._verify1=function(v){r(v.negative===0,"red works only with positives"),r(v.red,"red works only with red numbers")},j.prototype._verify2=function(v,E){r((v.negative|E.negative)===0,"red works only with positives"),r(v.red&&v.red===E.red,"red works only with red numbers")},j.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):(u(v,v.umod(this.m)._forceRed(this)),v)},j.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},j.prototype.add=function(v,E){this._verify2(v,E);var _=v.add(E);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},j.prototype.iadd=function(v,E){this._verify2(v,E);var _=v.iadd(E);return _.cmp(this.m)>=0&&_.isub(this.m),_},j.prototype.sub=function(v,E){this._verify2(v,E);var _=v.sub(E);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},j.prototype.isub=function(v,E){this._verify2(v,E);var _=v.isub(E);return _.cmpn(0)<0&&_.iadd(this.m),_},j.prototype.shl=function(v,E){return this._verify1(v),this.imod(v.ushln(E))},j.prototype.imul=function(v,E){return this._verify2(v,E),this.imod(v.imul(E))},j.prototype.mul=function(v,E){return this._verify2(v,E),this.imod(v.mul(E))},j.prototype.isqr=function(v){return this.imul(v,v.clone())},j.prototype.sqr=function(v){return this.mul(v,v)},j.prototype.sqrt=function(v){if(v.isZero())return v.clone();var E=this.m.andln(3);if(r(E%2===1),E===3){var _=this.m.add(new i(1)).iushrn(2);return this.pow(v,_)}for(var D=this.m.subn(1),x=0;!D.isZero()&&D.andln(1)===0;)x++,D.iushrn(1);r(!D.isZero());var B=new i(1).toRed(this),W=B.redNeg(),L=this.m.subn(1).iushrn(1),S=this.m.bitLength();for(S=new i(2*S*S).toRed(this);this.pow(S,L).cmp(W)!==0;)S.redIAdd(W);for(var F=this.pow(S,D),X=this.pow(v,D.addn(1).iushrn(1)),se=this.pow(v,D),ge=x;se.cmp(B)!==0;){for(var Ue=se,Le=0;Ue.cmp(B)!==0;Le++)Ue=Ue.redSqr();r(Le<ge);var Be=this.pow(F,new i(1).iushln(ge-Le-1));X=X.redMul(Be),F=Be.redSqr(),se=se.redMul(F),ge=Le}return X},j.prototype.invm=function(v){var E=v._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},j.prototype.pow=function(v,E){if(E.isZero())return new i(1).toRed(this);if(E.cmpn(1)===0)return v.clone();var _=4,D=new Array(1<<_);D[0]=new i(1).toRed(this),D[1]=v;for(var x=2;x<D.length;x++)D[x]=this.mul(D[x-1],v);var B=D[0],W=0,L=0,S=E.bitLength()%26;for(S===0&&(S=26),x=E.length-1;x>=0;x--){for(var F=E.words[x],X=S-1;X>=0;X--){var se=F>>X&1;if(B!==D[0]&&(B=this.sqr(B)),se===0&&W===0){L=0;continue}W<<=1,W|=se,L++,!(L!==_&&(x!==0||X!==0))&&(B=this.mul(B,D[W]),L=0,W=0)}S=26}return B},j.prototype.convertTo=function(v){var E=v.umod(this.m);return E===v?E.clone():E},j.prototype.convertFrom=function(v){var E=v.clone();return E.red=null,E},i.mont=function(v){return new K(v)};function K($){j.call(this,$),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(K,j),K.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},K.prototype.convertFrom=function(v){var E=this.imod(v.mul(this.rinv));return E.red=null,E},K.prototype.imul=function(v,E){if(v.isZero()||E.isZero())return v.words[0]=0,v.length=1,v;var _=v.imul(E),D=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=_.isub(D).iushrn(this.shift),B=x;return x.cmp(this.m)>=0?B=x.isub(this.m):x.cmpn(0)<0&&(B=x.iadd(this.m)),B._forceRed(this)},K.prototype.mul=function(v,E){if(v.isZero()||E.isZero())return new i(0)._forceRed(this);var _=v.mul(E),D=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=_.isub(D).iushrn(this.shift),B=x;return x.cmp(this.m)>=0?B=x.isub(this.m):x.cmpn(0)<0&&(B=x.iadd(this.m)),B._forceRed(this)},K.prototype.invm=function(v){var E=this.imod(v._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(t,ei)})(K4);var Loe=K4.exports;const Fq=rh(Loe);var FL={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=En,r=n.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=i);function i(o,a,c){return r(o,a,c)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=r(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(FL,FL.exports);var $oe=FL.exports,Px=$oe.Buffer;function rQe(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=Px.from(f)),!Px.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var p=0,g=0,m=0,y=f.length;m!==y&&f[m]===0;)m++,p++;for(var w=(y-m)*l+1>>>0,C=new Uint8Array(w);m!==y;){for(var N=f[m],I=0,k=w-1;(N!==0||I<g)&&k!==-1;k--,I++)N+=256*C[k]>>>0,C[k]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");g=I,m++}for(var P=w-g;P!==w&&C[P]===0;)P++;for(var U=a.repeat(p);P<w;++P)U+=t.charAt(C[P]);return U}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return Px.alloc(0);for(var p=0,g=0,m=0;f[p]===a;)g++,p++;for(var y=(f.length-p)*c+1>>>0,w=new Uint8Array(y);p<f.length;){var C=f.charCodeAt(p);if(C>255)return;var N=e[C];if(N===255)return;for(var I=0,k=y-1;(N!==0||I<m)&&k!==-1;k--,I++)N+=o*w[k]>>>0,w[k]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=I,p++}for(var P=y-m;P!==y&&w[P]===0;)P++;var U=Px.allocUnsafe(g+(y-P));U.fill(0,0,g);for(var M=g;P!==y;)U[M++]=w[P++];return U}function h(f){var p=d(f);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var sQe=rQe,iQe=sQe,oQe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",aQe=iQe(oQe);const co=rh(aQe);var oo={},Ox=$oe.Buffer;function cQe(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var s=t.charAt(r),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=r}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(f){if((Array.isArray(f)||f instanceof Uint8Array)&&(f=Ox.from(f)),!Ox.isBuffer(f))throw new TypeError("Expected Buffer");if(f.length===0)return"";for(var p=0,g=0,m=0,y=f.length;m!==y&&f[m]===0;)m++,p++;for(var w=(y-m)*l+1>>>0,C=new Uint8Array(w);m!==y;){for(var N=f[m],I=0,k=w-1;(N!==0||I<g)&&k!==-1;k--,I++)N+=256*C[k]>>>0,C[k]=N%o>>>0,N=N/o>>>0;if(N!==0)throw new Error("Non-zero carry");g=I,m++}for(var P=w-g;P!==w&&C[P]===0;)P++;for(var U=a.repeat(p);P<w;++P)U+=t.charAt(C[P]);return U}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return Ox.alloc(0);for(var p=0,g=0,m=0;f[p]===a;)g++,p++;for(var y=(f.length-p)*c+1>>>0,w=new Uint8Array(y);p<f.length;){var C=f.charCodeAt(p);if(C>255)return;var N=e[C];if(N===255)return;for(var I=0,k=y-1;(N!==0||I<m)&&k!==-1;k--,I++)N+=o*w[k]>>>0,w[k]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=I,p++}for(var P=y-m;P!==y&&w[P]===0;)P++;var U=Ox.allocUnsafe(g+(y-P));U.fill(0,0,g);for(var M=g;P!==y;)U[M++]=w[P++];return U}function h(f){var p=d(f);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var lQe=cQe,uQe=lQe,dQe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",hQe=uQe(dQe);function sf(t,e,n){return e<=t&&t<=n}function YP(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function fQe(t){for(var e=String(t),n=e.length,r=0,s=[];r<n;){var i=e.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===n-1)s.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),r+=1}else s.push(65533)}r+=1}return s}function pQe(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var Ek=-1;function Y4(t){this.tokens=[].slice.call(t)}Y4.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Ek},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var nC=-1;function gM(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Ck="utf-8";function _k(t,e){if(!(this instanceof _k))return new _k(t,e);if(t=t!==void 0?String(t).toLowerCase():Ck,t!==Ck)throw new Error("Encoding not supported. Only utf-8 is supported");e=YP(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}_k.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=YP(n),this._streaming||(this._decoder=new gQe({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var s=new Y4(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==nC);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===nC)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),pQe(i)}};function Ak(t,e){if(!(this instanceof Ak))return new Ak(t,e);if(t=t!==void 0?String(t).toLowerCase():Ck,t!==Ck)throw new Error("Encoding not supported. Only utf-8 is supported");e=YP(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ak.prototype={encode:function(e,n){e=e?String(e):"",n=YP(n),this._streaming||(this._encoder=new mQe(this._options)),this._streaming=!!n.stream;for(var r=[],s=new Y4(fQe(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==nC);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==nC;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function gQe(t){var e=t.fatal,n=0,r=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===Ek&&s!==0)return s=0,gM(e);if(c===Ek)return nC;if(s===0){if(sf(c,0,127))return c;if(sf(c,194,223))s=1,n=c-192;else if(sf(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,n=c-224;else if(sf(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,n=c-240;else return gM(e);return n=n<<6*s,null}if(!sf(c,i,o))return n=s=r=0,i=128,o=191,a.prepend(c),gM(e);if(i=128,o=191,r+=1,n+=c-128<<6*(s-r),r!==s)return null;var l=n;return n=s=r=0,l}}function mQe(t){t.fatal,this.handler=function(e,n){if(n===Ek)return nC;if(sf(n,0,127))return n;var r,s;sf(n,128,2047)?(r=1,s=192):sf(n,2048,65535)?(r=2,s=224):sf(n,65536,1114111)&&(r=3,s=240);for(var i=[(n>>6*r)+s];r>0;){var o=n>>6*(r-1);i.push(128|o&63),r-=1}return i}}const yQe=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:_k,TextEncoder:Ak},Symbol.toStringTag,{value:"Module"})),wQe=lI(yQe);var bQe=ei&&ei.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),vQe=ei&&ei.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),oh=ei&&ei.__decorate||function(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},EQe=ei&&ei.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&bQe(e,t,n);return vQe(e,t),e},Foe=ei&&ei.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oo,"__esModule",{value:!0});var joe=oo.deserializeUnchecked=Voe=oo.deserialize=qoe=oo.serialize=oo.BinaryReader=oo.BinaryWriter=oo.BorshError=oo.baseDecode=oo.baseEncode=void 0;const Sg=Foe(Loe),Woe=Foe(hQe),CQe=EQe(wQe),_Qe=typeof TextDecoder!="function"?CQe.TextDecoder:TextDecoder,AQe=new _Qe("utf-8",{fatal:!0});function SQe(t){return typeof t=="string"&&(t=Buffer.from(t,"utf8")),Woe.default.encode(Buffer.from(t))}oo.baseEncode=SQe;function IQe(t){return Buffer.from(Woe.default.decode(t))}oo.baseDecode=IQe;const mM=1024;class la extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}oo.BorshError=la;class zoe{constructor(){this.buf=Buffer.alloc(mM),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(mM)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Sg.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Sg.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Sg.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Sg.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(mM)]),this.length+=e.length}writeString(e){this.maybeResize();const n=Buffer.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}}oo.BinaryWriter=zoe;function ah(t,e,n){const r=n.value;n.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new la("Reached the end of buffer when deserializing")}throw i}}}class rl{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new Sg.default(e,"le")}readU128(){const e=this.readBuffer(16);return new Sg.default(e,"le")}readU256(){const e=this.readBuffer(32);return new Sg.default(e,"le")}readU512(){const e=this.readBuffer(64);return new Sg.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new la(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return AQe.decode(n)}catch(r){throw new la(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),r=Array();for(let s=0;s<n;++s)r.push(e());return r}}oh([ah],rl.prototype,"readU8",null);oh([ah],rl.prototype,"readU16",null);oh([ah],rl.prototype,"readU32",null);oh([ah],rl.prototype,"readU64",null);oh([ah],rl.prototype,"readU128",null);oh([ah],rl.prototype,"readU256",null);oh([ah],rl.prototype,"readU512",null);oh([ah],rl.prototype,"readString",null);oh([ah],rl.prototype,"readFixedArray",null);oh([ah],rl.prototype,"readArray",null);oo.BinaryReader=rl;function Hoe(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ay(t,e,n,r,s){try{if(typeof r=="string")s[`write${Hoe(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new la(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);s.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new la(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let i=0;i<r[1];i++)ay(t,null,n[i],r[0],s)}else s.writeArray(n,i=>{ay(t,e,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?s.writeU8(0):(s.writeU8(1),ay(t,e,n,r.type,s));break}case"map":{s.writeU32(n.size),n.forEach((i,o)=>{ay(t,e,o,r.key,s),ay(t,e,i,r.value,s)});break}default:throw new la(`FieldType ${r} unrecognized`)}else Goe(t,n,s)}catch(i){throw i instanceof la&&i.addToFieldPath(e),i}}function Goe(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const r=t.get(e.constructor);if(!r)throw new la(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{ay(t,s,e[s],i,n)});else if(r.kind==="enum"){const s=e[r.field];for(let i=0;i<r.values.length;++i){const[o,a]=r.values[i];if(o===s){n.writeU8(i),ay(t,o,e[o],a,n);break}}}else throw new la(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function NQe(t,e,n=zoe){const r=new n;return Goe(t,e,r),r.toArray()}var qoe=oo.serialize=NQe;function cy(t,e,n,r){try{if(typeof n=="string")return r[`read${Hoe(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){const s=[];for(let i=0;i<n[1];i++)s.push(cy(t,null,n[0],r));return s}else return r.readArray(()=>cy(t,e,n[0],r))}if(n.kind==="option")return r.readU8()?cy(t,e,n.type,r):void 0;if(n.kind==="map"){let s=new Map;const i=r.readU32();for(let o=0;o<i;o++){const a=cy(t,e,n.key,r),c=cy(t,e,n.value,r);s.set(a,c)}return s}return Q4(t,n,r)}catch(s){throw s instanceof la&&s.addToFieldPath(e),s}}function Q4(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const r=t.get(e);if(!r)throw new la(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,o]of t.get(e).fields)s[i]=cy(t,i,o,n);return new e(s)}if(r.kind==="enum"){const s=n.readU8();if(s>=r.values.length)throw new la(`Enum index: ${s} is out of range`);const[i,o]=r.values[s],a=cy(t,i,o,n);return new e({[i]:a})}throw new la(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function xQe(t,e,n,r=rl){const s=new r(n),i=Q4(t,e,s);if(s.offset<n.length)throw new la(`Unexpected ${n.length-s.offset} bytes after deserialized data`);return i}var Voe=oo.deserialize=xQe;function TQe(t,e,n,r=rl){const s=new r(n);return Q4(t,e,s)}joe=oo.deserializeUnchecked=TQe;var me={};Object.defineProperty(me,"__esModule",{value:!0});me.s16=me.s8=me.nu64be=me.u48be=me.u40be=me.u32be=me.u24be=me.u16be=Xi=me.nu64=me.u48=me.u40=Ot=me.u32=me.u24=Nl=me.u16=Hn=me.u8=p0=me.offset=me.greedy=me.Constant=me.UTF8=me.CString=me.Blob=me.Boolean=me.BitField=me.BitStructure=me.VariantLayout=me.Union=me.UnionLayoutDiscriminator=me.UnionDiscriminator=me.Structure=me.Sequence=me.DoubleBE=me.Double=me.FloatBE=me.Float=me.NearInt64BE=me.NearInt64=me.NearUInt64BE=me.NearUInt64=me.IntBE=me.Int=me.UIntBE=me.UInt=me.OffsetLayout=me.GreedyCount=me.ExternalLayout=me.bindConstructorLayout=me.nameWithProperty=me.Layout=me.uint8ArrayToBuffer=me.checkUint8Array=void 0;me.constant=me.utf8=me.cstr=Yr=me.blob=me.unionLayoutDiscriminator=me.union=$o=me.seq=me.bits=At=me.struct=me.f64be=me.f64=me.f32be=me.f32=me.ns64be=me.s48be=me.s40be=me.s32be=me.s24be=me.s16be=Bc=me.ns64=me.s48=me.s40=me.s32=me.s24=void 0;const J4=En;function GC(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}me.checkUint8Array=GC;function mr(t){return GC(t),J4.Buffer.from(t.buffer,t.byteOffset,t.length)}me.uint8ArrayToBuffer=mr;class Mr{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}}me.Layout=Mr;function Z4(t,e){return e.property?t+"["+e.property+"]":t}me.nameWithProperty=Z4;function RQe(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Mr))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,r){return e.encode(this,n,r)},writable:!0}),Object.defineProperty(t,"decode",{value(n,r){return e.decode(n,r)},writable:!0})}me.bindConstructorLayout=RQe;class Za extends Mr{isCount(){throw new Error("ExternalLayout is abstract")}}me.ExternalLayout=Za;class Koe extends Za{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){GC(e);const r=e.length-n;return Math.floor(r/this.elementSpan)}encode(e,n,r){return 0}}me.GreedyCount=Koe;class X4 extends Za{constructor(e,n=0,r){if(!(e instanceof Mr))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof Ml||this.layout instanceof Bu}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,r=0){return this.layout.encode(e,n,r+this.offset)}}me.OffsetLayout=X4;class Ml extends Mr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return mr(e).readUIntLE(n,this.span)}encode(e,n,r=0){return mr(n).writeUIntLE(e,r,this.span),this.span}}me.UInt=Ml;class Bu extends Mr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return mr(e).readUIntBE(n,this.span)}encode(e,n,r=0){return mr(n).writeUIntBE(e,r,this.span),this.span}}me.UIntBE=Bu;class bw extends Mr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return mr(e).readIntLE(n,this.span)}encode(e,n,r=0){return mr(n).writeIntLE(e,r,this.span),this.span}}me.Int=bw;class qC extends Mr{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return mr(e).readIntBE(n,this.span)}encode(e,n,r=0){return mr(n).writeIntBE(e,r,this.span),this.span}}me.IntBE=qC;const jL=Math.pow(2,32);function QP(t){const e=Math.floor(t/jL),n=t-e*jL;return{hi32:e,lo32:n}}function JP(t,e){return t*jL+e}class Yoe extends Mr{constructor(e){super(8,e)}decode(e,n=0){const r=mr(e),s=r.readUInt32LE(n),i=r.readUInt32LE(n+4);return JP(i,s)}encode(e,n,r=0){const s=QP(e),i=mr(n);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}me.NearUInt64=Yoe;class Qoe extends Mr{constructor(e){super(8,e)}decode(e,n=0){const r=mr(e),s=r.readUInt32BE(n),i=r.readUInt32BE(n+4);return JP(s,i)}encode(e,n,r=0){const s=QP(e),i=mr(n);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}me.NearUInt64BE=Qoe;class Joe extends Mr{constructor(e){super(8,e)}decode(e,n=0){const r=mr(e),s=r.readUInt32LE(n),i=r.readInt32LE(n+4);return JP(i,s)}encode(e,n,r=0){const s=QP(e),i=mr(n);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}me.NearInt64=Joe;class Zoe extends Mr{constructor(e){super(8,e)}decode(e,n=0){const r=mr(e),s=r.readInt32BE(n),i=r.readUInt32BE(n+4);return JP(s,i)}encode(e,n,r=0){const s=QP(e),i=mr(n);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}me.NearInt64BE=Zoe;class Xoe extends Mr{constructor(e){super(4,e)}decode(e,n=0){return mr(e).readFloatLE(n)}encode(e,n,r=0){return mr(n).writeFloatLE(e,r),4}}me.Float=Xoe;class eae extends Mr{constructor(e){super(4,e)}decode(e,n=0){return mr(e).readFloatBE(n)}encode(e,n,r=0){return mr(n).writeFloatBE(e,r),4}}me.FloatBE=eae;class tae extends Mr{constructor(e){super(8,e)}decode(e,n=0){return mr(e).readDoubleLE(n)}encode(e,n,r=0){return mr(n).writeDoubleLE(e,r),8}}me.Double=tae;class nae extends Mr{constructor(e){super(8,e)}decode(e,n=0){return mr(e).readDoubleBE(n)}encode(e,n,r=0){return mr(n).writeDoubleBE(e,r),8}}me.DoubleBE=nae;class rae extends Mr{constructor(e,n,r){if(!(e instanceof Mr))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof Za&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(n instanceof Za)&&0<e.span&&(s=n*e.span),super(s,r),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof Za&&(s=s.decode(e,n)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(e,n+r),++i}return r}decode(e,n=0){const r=[];let s=0,i=this.count;for(i instanceof Za&&(i=i.decode(e,n));s<i;)r.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),s+=1;return r}encode(e,n,r=0){const s=this.elementLayout,i=e.reduce((o,a)=>o+s.encode(a,n,r+o),0);return this.count instanceof Za&&this.count.encode(e.length,n,r),i}}me.Sequence=rae;class sae extends Mr{constructor(e,n,r){if(!(Array.isArray(e)&&e.reduce((i,o)=>i&&o instanceof Mr,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&r===void 0&&(r=n,n=void 0);for(const i of e)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,n),this.fields=e,this.decodePrefixes=!!r}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(e,n);return n+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,n=0){GC(e);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(e,n)),n+=s.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return r}encode(e,n,r=0){const s=r;let i=0,o=0;for(const a of this.fields){let c=a.span;if(o=0<c?c:0,a.property!==void 0){const l=e[a.property];l!==void 0&&(o=a.encode(l,n,r),0>c&&(c=a.getSpan(n,r)))}i=r,r+=c}return i+o-s}fromArray(e){const n=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(n[r.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const r of this.fields){if(r.property===e)return n;0>r.span?n=-1:0<=n&&(n+=r.span)}}}me.Structure=sae;class eF{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,r){throw new Error("UnionDiscriminator is abstract")}}me.UnionDiscriminator=eF;class Sk extends eF{constructor(e,n){if(!(e instanceof Za&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,r){return this.layout.encode(e,n,r)}}me.UnionLayoutDiscriminator=Sk;class tF extends Mr{constructor(e,n,r){let s;if(e instanceof Ml||e instanceof Bu)s=new Sk(new X4(e));else if(e instanceof Za&&e.isCount())s=new Sk(e);else if(e instanceof eF)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof Mr))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let i=-1;n&&(i=n.span,0<=i&&(e instanceof Ml||e instanceof Bu)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof Ml||e instanceof Bu,this.defaultLayout=n,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const r=this.getVariant(e,n);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const r=this.registry[n];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,n=0){let r;const s=this.discriminator,i=s.decode(e,n),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[a.property]=a.decode(e,n+c)}else r=o.decode(e,n);return r}encode(e,n,r=0){const s=this.getSourceVariant(e);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],n,r),a+o.encode(e[o.property],n,r+a)}return s.encode(e,n,r)}addVariant(e,n,r){const s=new iae(this,e,n,r);return this.registry[e]=s,s}getVariant(e,n=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,n):r=e,this.registry[r]}}me.Union=tF;class iae extends Mr{constructor(e,n,r,s){if(!(e instanceof tF))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof Mr))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,s),this.union=e,this.variant=n,this.layout=r||null}getSpan(e,n=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,n+r)),r+s}decode(e,n=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,n+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,n,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,r);let i=s;if(this.layout&&(this.layout.encode(e[this.property],n,r+s),i+=this.layout.getSpan(n,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}me.VariantLayout=iae;function Eb(t){return 0>t&&(t+=4294967296),t}class nF extends Mr{constructor(e,n,r){if(!(e instanceof Ml||e instanceof Bu))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&r===void 0&&(r=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!n,this.fields=[];let s=0;this._packedSetValue=function(i){return s=Eb(i),this},this._packedGetValue=function(){return s}}decode(e,n=0){const r=this.makeDestinationObject(),s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(e));return r}encode(e,n,r=0){const s=this.word.decode(n,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=e[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),n,r)}addField(e,n){const r=new rF(this,e,n);return this.fields.push(r),r}addBoolean(e){const n=new oae(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}me.BitStructure=nF;class rF{constructor(e,n,r){if(!(e instanceof nF))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const s=8*e.span,i=e.fields.reduce((o,a)=>o+a.bits,0);if(n+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-n),this.wordMask=Eb(this.valueMask<<this.start),this.property=r}decode(e,n){const r=this.container._packedGetValue();return Eb(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Eb(e&this.valueMask))throw new TypeError(Z4("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),r=Eb(e<<this.start);this.container._packedSetValue(Eb(n&~this.wordMask)|r)}}me.BitField=rF;let oae=class extends rF{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};me.Boolean=oae;let aae=class extends Mr{constructor(e,n){if(!(e instanceof Za&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Za||(r=e),super(r,n),this.length=e}getSpan(e,n){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),r}decode(e,n=0){let r=this.span;return 0>r&&(r=this.length.decode(e,n)),mr(e).slice(n,n+r)}encode(e,n,r){let s=this.length;if(this.length instanceof Za&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(Z4("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>n.length)throw new RangeError("encoding overruns Uint8Array");const i=mr(e);return mr(n).write(i.toString("hex"),r,s,"hex"),this.length instanceof Za&&this.length.encode(s,n,r),s}};me.Blob=aae;class cae extends Mr{constructor(e){super(-1,e)}getSpan(e,n=0){GC(e);let r=n;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-n}decode(e,n=0){const r=this.getSpan(e,n);return mr(e).slice(n,n+r-1).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const s=J4.Buffer.from(e,"utf8"),i=s.length;if(r+i>n.length)throw new RangeError("encoding overruns Buffer");const o=mr(n);return s.copy(o,r),o[r+i]=0,i+1}}me.CString=cae;class lae extends Mr{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return GC(e),e.length-n}decode(e,n=0){const r=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return mr(e).slice(n,n+r).toString("utf-8")}encode(e,n,r=0){typeof e!="string"&&(e=String(e));const s=J4.Buffer.from(e,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>n.length)throw new RangeError("encoding overruns Buffer");return s.copy(mr(n),r),i}}me.UTF8=lae;class uae extends Mr{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,r){return 0}}me.Constant=uae;me.greedy=(t,e)=>new Koe(t,e);var p0=me.offset=(t,e,n)=>new X4(t,e,n),Hn=me.u8=t=>new Ml(1,t),Nl=me.u16=t=>new Ml(2,t);me.u24=t=>new Ml(3,t);var Ot=me.u32=t=>new Ml(4,t);me.u40=t=>new Ml(5,t);me.u48=t=>new Ml(6,t);var Xi=me.nu64=t=>new Yoe(t);me.u16be=t=>new Bu(2,t);me.u24be=t=>new Bu(3,t);me.u32be=t=>new Bu(4,t);me.u40be=t=>new Bu(5,t);me.u48be=t=>new Bu(6,t);me.nu64be=t=>new Qoe(t);me.s8=t=>new bw(1,t);me.s16=t=>new bw(2,t);me.s24=t=>new bw(3,t);me.s32=t=>new bw(4,t);me.s40=t=>new bw(5,t);me.s48=t=>new bw(6,t);var Bc=me.ns64=t=>new Joe(t);me.s16be=t=>new qC(2,t);me.s24be=t=>new qC(3,t);me.s32be=t=>new qC(4,t);me.s40be=t=>new qC(5,t);me.s48be=t=>new qC(6,t);me.ns64be=t=>new Zoe(t);me.f32=t=>new Xoe(t);me.f32be=t=>new eae(t);me.f64=t=>new tae(t);me.f64be=t=>new nae(t);var At=me.struct=(t,e,n)=>new sae(t,e,n);me.bits=(t,e,n)=>new nF(t,e,n);var $o=me.seq=(t,e,n)=>new rae(t,e,n);me.union=(t,e,n)=>new tF(t,e,n);me.unionLayoutDiscriminator=(t,e)=>new Sk(t,e);var Yr=me.blob=(t,e)=>new aae(t,e);me.cstr=t=>new cae(t);me.utf8=(t,e)=>new lae(t,e);me.constant=(t,e)=>new uae(t,e);var kQe=8078e3,PQe=8078001,OQe=8078004,DQe=8078005,MQe=8078006,BQe=8078011;function dae(t){return Array.isArray(t)?"%5B"+t.map(dae).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function UQe([t,e]){return`${t}=${dae(e)}`}function LQe(t){const e=Object.entries(t).map(UQe).join("&");return btoa(e)}function $Qe(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${LQe(e)}'`),`${n}\``}}var gv=class extends Error{constructor(...[e,n]){let r,s;if(n){const{cause:o,...a}=n;o&&(s={cause:o}),Object.keys(a).length>0&&(r=a)}const i=$Qe(e,r);super(i,s);ue(this,"cause",this.cause);ue(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function FQe(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function jQe(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(FQe(e,t));return t.write(e,n,0),n}})}function WQe(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function ub(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function zQe(t,e){if(ub(t)!==ub(e))throw new gv(OQe);if(ub(t)&&ub(e)&&t.fixedSize!==e.fixedSize)throw new gv(DQe,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!ub(t)&&!ub(e)&&t.maxSize!==e.maxSize)throw new gv(MQe,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function HQe(t,e,n=0){if(e.length-n<=0)throw new gv(kQe,{codecDescription:t})}function GQe(t,e,n,r=0){const s=n.length-r;if(s<e)throw new gv(PQe,{bytesLength:s,codecDescription:t,expected:e})}function qQe(t,e,n,r){if(r<e||r>n)throw new gv(BQe,{codecDescription:t,max:n,min:e,value:r})}function hae(t){return(t==null?void 0:t.endian)!==1}function VQe(t){return jQe({fixedSize:t.size,write(e,n,r){t.range&&qQe(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,hae(t.config)),n.set(new Uint8Array(s),r),r+t.size}})}function KQe(t){return WQe({fixedSize:t.size,read(e,n=0){HQe(t.name,e,n),GQe(t.name,t.size,e,n);const r=new DataView(YQe(e,n,t.size));return[t.get(r,hae(t.config)),n+t.size]}})}function YQe(t,e,n){const r=t.byteOffset+(e??0),s=n??t.byteLength;return t.buffer.slice(r,r+s)}var QQe=(t={})=>VQe({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),JQe=(t={})=>KQe({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),ZQe=(t={})=>zQe(QQe(t),JQe(t));class XQe extends TypeError{constructor(e,n){let r;const{message:s,explanation:i,...o}=e,{path:a}=e,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function eJe(t){return cN(t)&&typeof t[Symbol.iterator]=="function"}function cN(t){return typeof t=="object"&&t!=null}function Ik(t){return cN(t)&&!Array.isArray(t)}function ju(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function tJe(t){const{done:e,value:n}=t.next();return e?void 0:n}function nJe(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${ju(r)}\``}=t;return{value:r,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...t,message:c}}function*jq(t,e,n,r){eJe(t)||(t=[t]);for(const s of t){const i=nJe(s,e,n,r);i&&(yield i)}}function*sF(t,e,n={}){const{path:r=[],branch:s=[t],coerce:i=!1,mask:o=!1}=n,a={path:r,branch:s,mask:o};i&&(t=e.coercer(t,a));let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of e.entries(t,a)){const h=sF(u,d,{path:l===void 0?r:[...r,l],branch:l===void 0?s:[...s,u],coerce:i,mask:o,message:n.message});for(const f of h)f[0]?(c=f[0].refinement!=null?"not_refined":"not_valid",yield[f[0],void 0]):i&&(u=f[1],l===void 0?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):cN(t)&&(u!==void 0||l in t)&&(t[l]=u))}if(c!=="not_valid")for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];c==="valid"&&(yield[void 0,t])}let ch=class{constructor(e){const{type:n,schema:r,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,s?this.validator=(c,l)=>{const u=s(c,l);return jq(u,l,this,c)}:this.validator=()=>[],i?this.refiner=(c,l)=>{const u=i(c,l);return jq(u,l,this,c)}:this.refiner=()=>[]}assert(e,n){return rJe(e,this,n)}create(e,n){return Ve(e,this,n)}is(e){return fae(e,this)}mask(e,n){return sJe(e,this,n)}validate(e,n={}){return lN(e,this,n)}};function rJe(t,e,n){const r=lN(t,e,{message:n});if(r[0])throw r[0]}function Ve(t,e,n){const r=lN(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function sJe(t,e,n){const r=lN(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function fae(t,e){return!lN(t,e)[0]}function lN(t,e,n={}){const r=sF(t,e,n),s=tJe(r);return s[0]?[new XQe(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function vw(t,e){return new ch({type:t,schema:null,validator:e})}function iJe(){return vw("any",()=>!0)}function Je(t){return new ch({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${ju(e)}`}})}function nh(){return vw("boolean",t=>typeof t=="boolean")}function iF(t){return vw("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${ju(e)}`)}function ks(t){const e=ju(t),n=typeof t;return new ch({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${ju(r)}`}})}function oJe(){return vw("never",()=>!1)}function tt(t){return new ch({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function pe(){return vw("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${ju(t)}`)}function Kt(t){return new ch({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function pae(t,e){return new ch({type:"record",schema:null,*entries(n){if(cN(n))for(const r in n){const s=n[r];yield[r,r,t],yield[r,s,e]}},validator(n){return Ik(n)||`Expected an object, but received: ${ju(n)}`},coercer(n){return Ik(n)?{...n}:n}})}function Fe(){return vw("string",t=>typeof t=="string"||`Expected a string, but received: ${ju(t)}`)}function oF(t){const e=oJe();return new ch({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let s=0;s<r;s++)yield[s,n[s],t[s]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${ju(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function Te(t){const e=Object.keys(t);return new ch({type:"type",schema:t,*entries(n){if(cN(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return Ik(n)||`Expected an object, but received: ${ju(n)}`},coercer(n){return Ik(n)?{...n}:n}})}function wa(t){const e=t.map(n=>n.type).join(" | ");return new ch({type:"union",schema:null,coercer(n,r){for(const s of t){const[i,o]=s.validate(n,{coerce:!0,mask:r.mask});if(!i)return o}return n},validator(n,r){const s=[];for(const i of t){const[...o]=sF(n,i,r),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${ju(n)}`,...s]}})}function VC(){return vw("unknown",()=>!0)}function uN(t,e,n){return new ch({...t,coercer:(r,s)=>fae(r,e)?t.coercer(n(r,s),s):t.coercer(r,s)})}const gae=lI(kGe),aJe=gae.v4,cJe=function(t,e,n,r){if(typeof t!="string")throw new TypeError(t+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:t};if(s===2&&(i.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");i.params=e}if(typeof n>"u"){const o=typeof r.generator=="function"?r.generator:function(){return aJe()};i.id=o(i,r)}else s===2&&n===null?r.notificationIdNull&&(i.id=null):i.id=n;return i};var lJe=cJe;const uJe=gae.v4,dJe=lJe,PS=function(t,e){if(!(this instanceof PS))return new PS(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return uJe()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var hJe=PS;PS.prototype.request=function(t,e,n,r){const s=this;let i=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")r=e,i=t;else{typeof n=="function"&&(r=n,n=void 0);const l=typeof r=="function";try{i=dJe(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(u){if(l)return r(u);throw u}if(!l)return i}let c;try{c=JSON.stringify(i,this.options.replacer)}catch(l){return r(l)}return this.callServer(c,function(l,u){s._parseResponse(l,u,r)}),i};PS.prototype._parseResponse=function(t,e,n){if(t){n(t);return}if(!e)return n();let r;try{r=JSON.parse(e,this.options.reviver)}catch(s){return n(s)}if(n.length===3)if(Array.isArray(r)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return n(null,r.filter(s),r.filter(i))}else return n(null,r.error,r.result);n(null,r)};const fJe=rh(hJe);var pJe=class extends W${constructor(e,n,r){super();ue(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(e,n,r){const s=r||n;try{this.socket.send(e),s()}catch(i){s(i)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function gJe(t,e){return new pJe(t,e)}var mJe=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},yJe=class extends W${constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},c,l){super();ue(this,"address");ue(this,"rpc_id");ue(this,"queue");ue(this,"options");ue(this,"autoconnect");ue(this,"ready");ue(this,"reconnect");ue(this,"reconnect_timer_id");ue(this,"reconnect_interval");ue(this,"max_reconnects");ue(this,"rest_options");ue(this,"current_reconnects");ue(this,"generate_request_id");ue(this,"socket");ue(this,"webSocketFactory");ue(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new mJe,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),c={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(c),s,l=>{if(l)return o(l);this.queue[a]={promise:[i,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=En.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval)))})}};aN.utils.randomPrivateKey;aN.getPublicKey;function Wq(t){try{return aN.ExtendedPoint.fromHex(t),!0}catch{return!1}}const mae=(t,e)=>aN.sign(t,e.slice(0,32)),wJe=aN.verify,ro=t=>En.Buffer.isBuffer(t)?t:t instanceof Uint8Array?En.Buffer.from(t.buffer,t.byteOffset,t.byteLength):En.Buffer.from(t);class bJe{constructor(e){Object.assign(this,e)}encode(){return En.Buffer.from(qoe(PT,this))}static decode(e){return Voe(PT,this,e)}static decodeUnchecked(e){return joe(PT,this,e)}}const PT=new Map;var yae;const vJe=32,Zg=32;function EJe(t){return t._bn!==void 0}let zq=1;class ot extends bJe{constructor(e){if(super({}),this._bn=void 0,EJe(e))this._bn=e._bn;else{if(typeof e=="string"){const n=co.decode(e);if(n.length!=Zg)throw new Error("Invalid public key input");this._bn=new Fq(n)}else this._bn=new Fq(e);if(this._bn.byteLength()>Zg)throw new Error("Invalid public key input")}}static unique(){const e=new ot(zq);return zq+=1,new ot(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return co.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(En.Buffer);if(e.length===Zg)return e;const n=En.Buffer.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const s=En.Buffer.concat([e.toBuffer(),En.Buffer.from(n),r.toBuffer()]),i=m5(s);return new ot(i)}static createProgramAddressSync(e,n){let r=En.Buffer.alloc(0);e.forEach(function(i){if(i.length>vJe)throw new TypeError("Max seed length exceeded");r=En.Buffer.concat([r,ro(i)])}),r=En.Buffer.concat([r,n.toBuffer(),En.Buffer.from("ProgramDerivedAddress")]);const s=m5(r);if(Wq(s))throw new Error("Invalid seeds, address must fall off the curve");return new ot(s)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,s;for(;r!=0;){try{const i=e.concat(En.Buffer.from([r]));s=this.createProgramAddressSync(i,n)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new ot(e);return Wq(n.toBytes())}}yae=ot;ot.default=new yae("11111111111111111111111111111111");PT.set(ot,{kind:"struct",fields:[["_bn","u256"]]});new ot("BPFLoader1111111111111111111111111111111111");const mv=1232,aF=127,Nk=64;class wae extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(wae.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class bae extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(bae.prototype,"name",{value:"TransactionExpiredTimeoutError"});class l_ extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(l_.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class xk{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Wn=(t="publicKey")=>Yr(32,t),CJe=(t="signature")=>Yr(64,t),Gb=(t="string")=>{const e=At([Ot("length"),Ot("lengthPadding"),Yr(p0(Ot(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(i,o)=>n(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:En.Buffer.from(i,"utf8")};return r(c,o,a)},s.alloc=i=>Ot().span+Ot().span+En.Buffer.from(i,"utf8").length,s},_Je=(t="authorized")=>At([Wn("staker"),Wn("withdrawer")],t),AJe=(t="lockup")=>At([Bc("unixTimestamp"),Bc("epoch"),Wn("custodian")],t),SJe=(t="voteInit")=>At([Wn("nodePubkey"),Wn("authorizedVoter"),Wn("authorizedWithdrawer"),Hn("commission")],t),IJe=(t="voteAuthorizeWithSeedArgs")=>At([Ot("voteAuthorizationType"),Wn("currentAuthorityDerivedKeyOwnerPubkey"),Gb("currentAuthorityDerivedKeySeed"),Wn("newAuthorized")],t);function vae(t,e){const n=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*n(s.elementLayout)}else if("fields"in s)return vae({layout:s},e[s.property]);return 0};let r=0;return t.layout.fields.forEach(s=>{r+=n(s)}),r}function Uc(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,!(r&128))break}return e}function Lc(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Is(t,e){if(!t)throw new Error(e||"Assertion failed")}class ZP{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,s=o=>{const a=o.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},i=s(n);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new ZP(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Is(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,c])=>c.isSigner&&c.isWritable),r=e.filter(([,c])=>c.isSigner&&!c.isWritable),s=e.filter(([,c])=>!c.isSigner&&c.isWritable),i=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Is(n.length>0,"Expected at least one writable signer key");const[c]=n[0];Is(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([c])=>new ot(c)),...r.map(([c])=>new ot(c)),...s.map(([c])=>new ot(c)),...i.map(([c])=>new ot(c))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,n){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(n(o)){const a=new ot(i),c=e.findIndex(l=>l.equals(a));c>=0&&(Is(c<256,"Max lookup table index exceeded"),r.push(c),s.push(a),this.keyMetaMap.delete(i))}return[r,s]}}const Eae="Reached end of buffer unexpectedly";function of(t){if(t.length===0)throw new Error(Eae);return t.shift()}function $c(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(Eae);return t.splice(...e)}class Mf{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new ot(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:co.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new xk(this.staticAccountKeys)}static compile(e){const n=ZP.compile(e.instructions,e.payerKey),[r,s]=n.getMessageComponents(),o=new xk(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:co.encode(a.data)}));return new Mf({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,i=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Lc(n,e);const r=this.instructions.map(d=>{const{accounts:h,programIdIndex:f}=d,p=Array.from(co.decode(d.data));let g=[];Lc(g,h.length);let m=[];return Lc(m,p.length),{programIdIndex:f,keyIndicesCount:En.Buffer.from(g),keyIndices:h,dataLength:En.Buffer.from(m),data:p}});let s=[];Lc(s,r.length);let i=En.Buffer.alloc(mv);En.Buffer.from(s).copy(i);let o=s.length;r.forEach(d=>{const f=At([Hn("programIdIndex"),Yr(d.keyIndicesCount.length,"keyIndicesCount"),$o(Hn("keyIndex"),d.keyIndices.length,"keyIndices"),Yr(d.dataLength.length,"dataLength"),$o(Hn("userdatum"),d.data.length,"data")]).encode(d,i,o);o+=f}),i=i.slice(0,o);const a=At([Yr(1,"numRequiredSignatures"),Yr(1,"numReadonlySignedAccounts"),Yr(1,"numReadonlyUnsignedAccounts"),Yr(n.length,"keyCount"),$o(Wn("key"),e,"keys"),Wn("recentBlockhash")]),c={numRequiredSignatures:En.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:En.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:En.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:En.Buffer.from(n),keys:this.accountKeys.map(d=>ro(d.toBytes())),recentBlockhash:co.decode(this.recentBlockhash)};let l=En.Buffer.alloc(2048);const u=a.encode(c,l);return i.copy(l,u),l.slice(0,u+i.length)}static from(e){let n=[...e];const r=of(n);if(r!==(r&aF))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=of(n),i=of(n),o=Uc(n);let a=[];for(let h=0;h<o;h++){const f=$c(n,0,Zg);a.push(new ot(En.Buffer.from(f)))}const c=$c(n,0,Zg),l=Uc(n);let u=[];for(let h=0;h<l;h++){const f=of(n),p=Uc(n),g=$c(n,0,p),m=Uc(n),y=$c(n,0,m),w=co.encode(En.Buffer.from(y));u.push({programIdIndex:f,accounts:g,data:w})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:co.encode(En.Buffer.from(c)),accountKeys:a,instructions:u};return new Mf(d)}}class OS{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new xk(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=n-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)n.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)n.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=ZP.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const u of i){const d=n.extractTableLookup(u);if(d!==void 0){const[h,{writable:f,readonly:p}]=d;r.push(h),s.writable.push(...f),s.readonly.push(...p)}}const[o,a]=n.getMessageComponents(),l=new xk(a,s).compileInstructions(e.instructions);return new OS({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:l,addressTableLookups:r})}serialize(){const e=Array();Lc(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Lc(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Lc(i,this.addressTableLookups.length);const o=At([Hn("prefix"),At([Hn("numRequiredSignatures"),Hn("numReadonlySignedAccounts"),Hn("numReadonlyUnsignedAccounts")],"header"),Yr(e.length,"staticAccountKeysLength"),$o(Wn(),this.staticAccountKeys.length,"staticAccountKeys"),Wn("recentBlockhash"),Yr(r.length,"instructionsLength"),Yr(n.length,"serializedInstructions"),Yr(i.length,"addressTableLookupsLength"),Yr(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(mv),l=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:co.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,l)}serializeInstructions(){let e=0;const n=new Uint8Array(mv);for(const r of this.compiledInstructions){const s=Array();Lc(s,r.accountKeyIndexes.length);const i=Array();Lc(i,r.data.length);const o=At([Hn("programIdIndex"),Yr(s.length,"encodedAccountKeyIndexesLength"),$o(Hn(),r.accountKeyIndexes.length,"accountKeyIndexes"),Yr(i.length,"encodedDataLength"),Yr(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(mv);for(const r of this.addressTableLookups){const s=Array();Lc(s,r.writableIndexes.length);const i=Array();Lc(i,r.readonlyIndexes.length);const o=At([Wn("accountKey"),Yr(s.length,"encodedWritableIndexesLength"),$o(Hn(),r.writableIndexes.length,"writableIndexes"),Yr(i.length,"encodedReadonlyIndexesLength"),$o(Hn(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=of(n),s=r&aF;Is(r!==s,"Expected versioned message but received legacy message");const i=s;Is(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:of(n),numReadonlySignedAccounts:of(n),numReadonlyUnsignedAccounts:of(n)},a=[],c=Uc(n);for(let p=0;p<c;p++)a.push(new ot($c(n,0,Zg)));const l=co.encode($c(n,0,Zg)),u=Uc(n),d=[];for(let p=0;p<u;p++){const g=of(n),m=Uc(n),y=$c(n,0,m),w=Uc(n),C=new Uint8Array($c(n,0,w));d.push({programIdIndex:g,accountKeyIndexes:y,data:C})}const h=Uc(n),f=[];for(let p=0;p<h;p++){const g=new ot($c(n,0,Zg)),m=Uc(n),y=$c(n,0,m),w=Uc(n),C=$c(n,0,w);f.push({accountKey:g,writableIndexes:y,readonlyIndexes:C})}return new OS({header:o,staticAccountKeys:a,recentBlockhash:l,compiledInstructions:d,addressTableLookups:f})}}const Cae={deserializeMessageVersion(t){const e=t[0],n=e&aF;return n===e?"legacy":n},deserialize:t=>{const e=Cae.deserializeMessageVersion(t);if(e==="legacy")return Mf.from(t);if(e===0)return OS.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let yp=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const NJe=En.Buffer.alloc(Nk).fill(0);class io{constructor(e){this.keys=void 0,this.programId=void 0,this.data=En.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}let Xa=class WL{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new io(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let g=0;g<n.length;g++)if(n[g].programId===void 0)throw new Error(`Transaction instruction index ${g} has undefined program id`);const s=[],i=[];n.forEach(g=>{g.keys.forEach(y=>{i.push({...y})});const m=g.programId.toString();s.includes(m)||s.push(m)}),s.forEach(g=>{i.push({pubkey:new ot(g),isSigner:!1,isWritable:!1})});const o=[];i.forEach(g=>{const m=g.pubkey.toString(),y=o.findIndex(w=>w.pubkey.toString()===m);y>-1?(o[y].isWritable=o[y].isWritable||g.isWritable,o[y].isSigner=o[y].isSigner||g.isSigner):o.push(g)}),o.sort(function(g,m){if(g.isSigner!==m.isSigner)return g.isSigner?-1:1;if(g.isWritable!==m.isWritable)return g.isWritable?-1:1;const y={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return g.pubkey.toBase58().localeCompare(m.pubkey.toBase58(),"en",y)});const a=o.findIndex(g=>g.pubkey.equals(r));if(a>-1){const[g]=o.splice(a,1);g.isSigner=!0,g.isWritable=!0,o.unshift(g)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const g of this.signatures){const m=o.findIndex(y=>y.pubkey.equals(g.publicKey));if(m>-1)o[m].isSigner||(o[m].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${g.publicKey.toString()}`)}let c=0,l=0,u=0;const d=[],h=[];o.forEach(({pubkey:g,isSigner:m,isWritable:y})=>{m?(d.push(g.toString()),c+=1,y||(l+=1)):(h.push(g.toString()),y||(u+=1))});const f=d.concat(h),p=n.map(g=>{const{data:m,programId:y}=g;return{programIdIndex:f.indexOf(y.toString()),accounts:g.keys.map(w=>f.indexOf(w.pubkey.toString())),data:co.encode(m)}});return p.forEach(g=>{Is(g.programIdIndex>=0),g.accounts.forEach(m=>Is(m>=0))}),new Mf({header:{numRequiredSignatures:c,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:u},accountKeys:f,recentBlockhash:e,instructions:p})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((s,i)=>n[i].equals(s.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const s=r.toString();return n.has(s)?!1:(n.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(s=>{const i=mae(r,s.secretKey);this._addSignature(s.publicKey,ro(i))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Is(n.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=En.Buffer.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?n&&(r.missing||(r.missing=[])).push(i):wJe(s,e,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,n);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:n}=this,r=[];Lc(r,n.length);const s=r.length+n.length*64+e.length,i=En.Buffer.alloc(s);return Is(n.length<256),En.Buffer.from(r).copy(i,0),n.forEach(({signature:o},a)=>{o!==null&&(Is(o.length===64,"signature has invalid length"),En.Buffer.from(o).copy(i,r.length+a*64))}),e.copy(i,r.length+n.length*64),Is(i.length<=mv,`Transaction too large: ${i.length} > ${mv}`),i}get keys(){return Is(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Is(this.instructions.length===1),this.instructions[0].programId}get data(){return Is(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Uc(n);let s=[];for(let i=0;i<r;i++){const o=$c(n,0,Nk);s.push(co.encode(En.Buffer.from(o)))}return WL.populate(Mf.from(n),s)}static populate(e,n=[]){const r=new WL;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((s,i)=>{const o={signature:s==co.encode(NJe)?null:co.decode(s),publicKey:e.accountKeys[i]};r.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new io({keys:i,programId:e.accountKeys[s.programIdIndex],data:co.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}};class mm{get version(){return this.message.version}constructor(e,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)Is(n.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const r=[];for(let s=0;s<e.header.numRequiredSignatures;s++)r.push(new Uint8Array(Nk));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),n=Array();Lc(n,this.signatures.length);const r=At([Yr(n.length,"encodedSignaturesLength"),$o(CJe(),this.signatures.length,"signatures"),Yr(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let n=[...e];const r=[],s=Uc(n);for(let o=0;o<s;o++)r.push(new Uint8Array($c(n,0,Nk)));const i=Cae.deserialize(new Uint8Array(n));return new mm(i,r)}sign(e){const n=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=r.findIndex(o=>o.equals(s.publicKey));Is(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=mae(n,s.secretKey)}}addSignature(e,n){Is(n.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Is(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=n}}const xJe=160,TJe=64,RJe=xJe/TJe,kJe=1e3/RJe;new ot("SysvarC1ock11111111111111111111111111111111");new ot("SysvarEpochSchedu1e111111111111111111111111");new ot("Sysvar1nstructions1111111111111111111111111");const yM=new ot("SysvarRecentB1ockHashes11111111111111111111"),Hq=new ot("SysvarRent111111111111111111111111111111111");new ot("SysvarRewards111111111111111111111111111111");new ot("SysvarS1otHashes111111111111111111111111111");new ot("SysvarS1otHistory11111111111111111111111111");new ot("SysvarStakeHistory1111111111111111111111111");class Gq extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,n(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class Pt extends Error{constructor({code:e,message:n,data:r},s){super(s!=null?`${s}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function Cb(t){return new Promise(e=>setTimeout(e,t))}function Bo(t,e){const n=t.layout.span>=0?t.layout.span:vae(t,e),r=En.Buffer.alloc(n),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,r),r}const PJe=Xi("lamportsPerSignature"),_ae=At([Ot("version"),Ot("state"),Wn("authorizedPubkey"),Wn("nonce"),At([PJe],"feeCalculator")]),qq=_ae.span;class cF{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=_ae.decode(ro(e),0);return new cF({authorizedPubkey:new ot(n.authorizedPubkey),nonce:new ot(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function rC(t){const e=Yr(8,t),n=e.decode.bind(e),r=e.encode.bind(e),s=e,i=ZQe();return s.decode=(o,a)=>{const c=n(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const l=i.encode(o);return r(l,a,c)},s}const ll=Object.freeze({Create:{index:0,layout:At([Ot("instruction"),Bc("lamports"),Bc("space"),Wn("programId")])},Assign:{index:1,layout:At([Ot("instruction"),Wn("programId")])},Transfer:{index:2,layout:At([Ot("instruction"),rC("lamports")])},CreateWithSeed:{index:3,layout:At([Ot("instruction"),Wn("base"),Gb("seed"),Bc("lamports"),Bc("space"),Wn("programId")])},AdvanceNonceAccount:{index:4,layout:At([Ot("instruction")])},WithdrawNonceAccount:{index:5,layout:At([Ot("instruction"),Bc("lamports")])},InitializeNonceAccount:{index:6,layout:At([Ot("instruction"),Wn("authorized")])},AuthorizeNonceAccount:{index:7,layout:At([Ot("instruction"),Wn("authorized")])},Allocate:{index:8,layout:At([Ot("instruction"),Bc("space")])},AllocateWithSeed:{index:9,layout:At([Ot("instruction"),Wn("base"),Gb("seed"),Bc("space"),Wn("programId")])},AssignWithSeed:{index:10,layout:At([Ot("instruction"),Wn("base"),Gb("seed"),Wn("programId")])},TransferWithSeed:{index:11,layout:At([Ot("instruction"),rC("lamports"),Gb("seed"),Wn("programId")])},UpgradeNonceAccount:{index:12,layout:At([Ot("instruction")])}});class sC{constructor(){}static createAccount(e){const n=ll.Create,r=Bo(n,{lamports:e.lamports,space:e.space,programId:ro(e.programId.toBuffer())});return new io({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const s=ll.TransferWithSeed;n=Bo(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:ro(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=ll.Transfer;n=Bo(s,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new io({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const s=ll.AssignWithSeed;n=Bo(s,{base:ro(e.basePubkey.toBuffer()),seed:e.seed,programId:ro(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=ll.Assign;n=Bo(s,{programId:ro(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new io({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=ll.CreateWithSeed,r=Bo(n,{base:ro(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:ro(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new io({keys:s,programId:this.programId,data:r})}static createNonceAccount(e){const n=new Xa;"basePubkey"in e&&"seed"in e?n.add(sC.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:qq,programId:this.programId})):n.add(sC.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:qq,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=ll.InitializeNonceAccount,r=Bo(n,{authorized:ro(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:yM,isSigner:!1,isWritable:!1},{pubkey:Hq,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new io(s)}static nonceAdvance(e){const n=ll.AdvanceNonceAccount,r=Bo(n),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:yM,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new io(s)}static nonceWithdraw(e){const n=ll.WithdrawNonceAccount,r=Bo(n,{lamports:e.lamports});return new io({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:yM,isSigner:!1,isWritable:!1},{pubkey:Hq,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=ll.AuthorizeNonceAccount,r=Bo(n,{authorized:ro(e.newAuthorizedPubkey.toBuffer())});return new io({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const s=ll.AllocateWithSeed;n=Bo(s,{base:ro(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:ro(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=ll.Allocate;n=Bo(s,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new io({keys:r,programId:this.programId,data:n})}}sC.programId=new ot("11111111111111111111111111111111");new ot("BPFLoader2111111111111111111111111111111111");function OJe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wM,Vq;function DJe(){if(Vq)return wM;Vq=1;var t=Object.prototype.toString,e=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function n(r,s){var i,o,a,c,l,u,d;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),s);if(d=t.call(r),d==="[object Array]"){for(a="[",o=r.length-1,i=0;i<o;i++)a+=n(r[i],!0)+",";return o>-1&&(a+=n(r[i],!0)),a+"]"}else if(d==="[object Object]"){for(c=e(r).sort(),o=c.length,a="",i=0;i<o;)l=c[i],u=n(r[l],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),i++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return wM=function(r){var s=n(r,!1);if(s!==void 0)return""+s},wM}var MJe=DJe(),Kq=OJe(MJe);const L1=32;function bM(t){let e=0;for(;t>1;)t/=2,e++;return e}function BJe(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class UJe{constructor(e,n,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=bM(BJe(e+L1+1))-bM(L1)-1,r=this.getSlotsInEpoch(n),s=e-(r-L1);return[n,s]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=n%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*L1:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+bM(L1)):this.slotsPerEpoch}}var LJe=globalThis.fetch;class $Je extends yJe{constructor(e,n,r){const s=i=>{const o=gJe(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function FJe(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const Yq=56;class Qq{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=FJe(jJe,e),r=e.length-Yq;Is(r>=0,"lookup table is invalid"),Is(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=At([$o(Wn(),s,"addresses")]).decode(e.slice(Yq));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new ot(n.authority[0]):void 0,addresses:i.map(o=>new ot(o))}}}const jJe={index:1,layout:At([Ot("typeIndex"),rC("deactivationSlot"),Xi("lastExtendedSlot"),Hn("lastExtendedStartIndex"),Hn(),$o(Wn(),p0(Hn(),-1),"authority")])},WJe=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function zJe(t){const e=t.match(WJe);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,s,i]=e,o=t.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${r}${c}${i}`}const Ls=uN(iF(ot),Fe(),t=>new ot(t)),Aae=oF([Fe(),ks("base64")]),lF=uN(iF(En.Buffer),Aae,t=>En.Buffer.from(t[0],"base64")),HJe=30*1e3;function GJe(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function ns(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...s}=t;e=r,n=s}return{commitment:e,config:n}}function Jq(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Sae(t){return wa([Te({jsonrpc:ks("2.0"),id:Fe(),result:t}),Te({jsonrpc:ks("2.0"),id:Fe(),error:Te({code:VC(),message:Fe(),data:Kt(iJe())})})])}const qJe=Sae(VC());function kn(t){return uN(Sae(t),qJe,e=>"error"in e?e:{...e,result:Ve(e.result,t)})}function Qs(t){return kn(Te({context:Te({slot:pe()}),value:t}))}function XP(t){return Te({context:Te({slot:pe()}),value:t})}function vM(t,e){return t===0?new OS({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new ot(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:co.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Mf(e)}const VJe=Te({foundation:pe(),foundationTerm:pe(),initial:pe(),taper:pe(),terminal:pe()}),KJe=kn(Je(tt(Te({epoch:pe(),effectiveSlot:pe(),amount:pe(),postBalance:pe(),commission:Kt(tt(pe()))})))),YJe=Je(Te({slot:pe(),prioritizationFee:pe()})),QJe=Te({total:pe(),validator:pe(),foundation:pe(),epoch:pe()}),JJe=Te({epoch:pe(),slotIndex:pe(),slotsInEpoch:pe(),absoluteSlot:pe(),blockHeight:Kt(pe()),transactionCount:Kt(pe())}),ZJe=Te({slotsPerEpoch:pe(),leaderScheduleSlotOffset:pe(),warmup:nh(),firstNormalEpoch:pe(),firstNormalSlot:pe()}),XJe=pae(Fe(),Je(pe())),Ew=tt(wa([Te({}),Fe()])),eZe=Te({err:Ew}),tZe=ks("receivedSignature"),nZe=Te({"solana-core":Fe(),"feature-set":Kt(pe())}),rZe=Te({program:Fe(),programId:Ls,parsed:VC()}),sZe=Te({programId:Ls,accounts:Je(Ls),data:Fe()}),Zq=Qs(Te({err:tt(wa([Te({}),Fe()])),logs:tt(Je(Fe())),accounts:Kt(tt(Je(tt(Te({executable:nh(),owner:Fe(),lamports:pe(),data:Je(Fe()),rentEpoch:Kt(pe())}))))),unitsConsumed:Kt(pe()),returnData:Kt(tt(Te({programId:Fe(),data:oF([Fe(),ks("base64")])}))),innerInstructions:Kt(tt(Je(Te({index:pe(),instructions:Je(wa([rZe,sZe]))}))))})),iZe=Qs(Te({byIdentity:pae(Fe(),Je(pe())),range:Te({firstSlot:pe(),lastSlot:pe()})}));function oZe(t,e,n,r,s,i){const o=n||LJe;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return r&&(c=async(u,d)=>{const h=await new Promise((f,p)=>{try{r(u,d,(g,m)=>f([g,m]))}catch(g){p(g)}});return await o(...h)}),new fJe(async(u,d)=>{const h={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},oXe)};try{let f=5,p,g=500;for(;c?p=await c(t,h):p=await o(t,h),!(p.status!==429||s===!0||(f-=1,f===0));)console.error(`Server responded with ${p.status} ${p.statusText}.  Retrying after ${g}ms delay...`),await Cb(g),g*=2;const m=await p.text();p.ok?d(null,m):d(new Error(`${p.status} ${p.statusText}: ${m}`))}catch(f){f instanceof Error&&d(f)}},{})}function aZe(t){return(e,n)=>new Promise((r,s)=>{t.request(e,n,(i,o)=>{if(i){s(i);return}r(o)})})}function cZe(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const s=e.map(i=>t.request(i.methodName,i.args));t.request(s,(i,o)=>{if(i){r(i);return}n(o)})})}const lZe=kn(VJe),uZe=kn(QJe),dZe=kn(YJe),hZe=kn(JJe),fZe=kn(ZJe),pZe=kn(XJe),gZe=kn(pe()),mZe=Qs(Te({total:pe(),circulating:pe(),nonCirculating:pe(),nonCirculatingAccounts:Je(Ls)})),zL=Te({amount:Fe(),uiAmount:tt(pe()),decimals:pe(),uiAmountString:Kt(Fe())}),yZe=Qs(Je(Te({address:Ls,amount:Fe(),uiAmount:tt(pe()),decimals:pe(),uiAmountString:Kt(Fe())}))),wZe=Qs(Je(Te({pubkey:Ls,account:Te({executable:nh(),owner:Ls,lamports:pe(),data:lF,rentEpoch:pe()})}))),HL=Te({program:Fe(),parsed:VC(),space:pe()}),bZe=Qs(Je(Te({pubkey:Ls,account:Te({executable:nh(),owner:Ls,lamports:pe(),data:HL,rentEpoch:pe()})}))),vZe=Qs(Je(Te({lamports:pe(),address:Ls}))),DS=Te({executable:nh(),owner:Ls,lamports:pe(),data:lF,rentEpoch:pe()}),EZe=Te({pubkey:Ls,account:DS}),CZe=uN(wa([iF(En.Buffer),HL]),wa([Aae,HL]),t=>Array.isArray(t)?Ve(t,lF):t),GL=Te({executable:nh(),owner:Ls,lamports:pe(),data:CZe,rentEpoch:pe()}),_Ze=Te({pubkey:Ls,account:GL}),AZe=Te({state:wa([ks("active"),ks("inactive"),ks("activating"),ks("deactivating")]),active:pe(),inactive:pe()}),SZe=kn(Je(Te({signature:Fe(),slot:pe(),err:Ew,memo:tt(Fe()),blockTime:Kt(tt(pe()))}))),IZe=kn(Je(Te({signature:Fe(),slot:pe(),err:Ew,memo:tt(Fe()),blockTime:Kt(tt(pe()))}))),NZe=Te({subscription:pe(),result:XP(DS)}),xZe=Te({pubkey:Ls,account:DS}),TZe=Te({subscription:pe(),result:XP(xZe)}),RZe=Te({parent:pe(),slot:pe(),root:pe()}),kZe=Te({subscription:pe(),result:RZe}),PZe=wa([Te({type:wa([ks("firstShredReceived"),ks("completed"),ks("optimisticConfirmation"),ks("root")]),slot:pe(),timestamp:pe()}),Te({type:ks("createdBank"),parent:pe(),slot:pe(),timestamp:pe()}),Te({type:ks("frozen"),slot:pe(),timestamp:pe(),stats:Te({numTransactionEntries:pe(),numSuccessfulTransactions:pe(),numFailedTransactions:pe(),maxTransactionsPerEntry:pe()})}),Te({type:ks("dead"),slot:pe(),timestamp:pe(),err:Fe()})]),OZe=Te({subscription:pe(),result:PZe}),DZe=Te({subscription:pe(),result:XP(wa([eZe,tZe]))}),MZe=Te({subscription:pe(),result:pe()}),BZe=Te({pubkey:Fe(),gossip:tt(Fe()),tpu:tt(Fe()),rpc:tt(Fe()),version:tt(Fe())}),Xq=Te({votePubkey:Fe(),nodePubkey:Fe(),activatedStake:pe(),epochVoteAccount:nh(),epochCredits:Je(oF([pe(),pe(),pe()])),commission:pe(),lastVote:pe(),rootSlot:tt(pe())}),UZe=kn(Te({current:Je(Xq),delinquent:Je(Xq)})),LZe=wa([ks("processed"),ks("confirmed"),ks("finalized")]),$Ze=Te({slot:pe(),confirmations:tt(pe()),err:Ew,confirmationStatus:Kt(LZe)}),FZe=Qs(Je(tt($Ze))),jZe=kn(pe()),Iae=Te({accountKey:Ls,writableIndexes:Je(pe()),readonlyIndexes:Je(pe())}),uF=Te({signatures:Je(Fe()),message:Te({accountKeys:Je(Fe()),header:Te({numRequiredSignatures:pe(),numReadonlySignedAccounts:pe(),numReadonlyUnsignedAccounts:pe()}),instructions:Je(Te({accounts:Je(pe()),data:Fe(),programIdIndex:pe()})),recentBlockhash:Fe(),addressTableLookups:Kt(Je(Iae))})}),Nae=Te({pubkey:Ls,signer:nh(),writable:nh(),source:Kt(wa([ks("transaction"),ks("lookupTable")]))}),xae=Te({accountKeys:Je(Nae),signatures:Je(Fe())}),Tae=Te({parsed:VC(),program:Fe(),programId:Ls}),Rae=Te({accounts:Je(Ls),data:Fe(),programId:Ls}),WZe=wa([Rae,Tae]),zZe=wa([Te({parsed:VC(),program:Fe(),programId:Fe()}),Te({accounts:Je(Fe()),data:Fe(),programId:Fe()})]),kae=uN(WZe,zZe,t=>"accounts"in t?Ve(t,Rae):Ve(t,Tae)),Pae=Te({signatures:Je(Fe()),message:Te({accountKeys:Je(Nae),instructions:Je(kae),recentBlockhash:Fe(),addressTableLookups:Kt(tt(Je(Iae)))})}),Tk=Te({accountIndex:pe(),mint:Fe(),owner:Kt(Fe()),programId:Kt(Fe()),uiTokenAmount:zL}),Oae=Te({writable:Je(Ls),readonly:Je(Ls)}),eO=Te({err:Ew,fee:pe(),innerInstructions:Kt(tt(Je(Te({index:pe(),instructions:Je(Te({accounts:Je(pe()),data:Fe(),programIdIndex:pe()}))})))),preBalances:Je(pe()),postBalances:Je(pe()),logMessages:Kt(tt(Je(Fe()))),preTokenBalances:Kt(tt(Je(Tk))),postTokenBalances:Kt(tt(Je(Tk))),loadedAddresses:Kt(Oae),computeUnitsConsumed:Kt(pe())}),dF=Te({err:Ew,fee:pe(),innerInstructions:Kt(tt(Je(Te({index:pe(),instructions:Je(kae)})))),preBalances:Je(pe()),postBalances:Je(pe()),logMessages:Kt(tt(Je(Fe()))),preTokenBalances:Kt(tt(Je(Tk))),postTokenBalances:Kt(tt(Je(Tk))),loadedAddresses:Kt(Oae),computeUnitsConsumed:Kt(pe())}),KC=wa([ks(0),ks("legacy")]),Cw=Te({pubkey:Fe(),lamports:pe(),postBalance:tt(pe()),rewardType:tt(Fe()),commission:Kt(tt(pe()))}),HZe=kn(tt(Te({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),transactions:Je(Te({transaction:uF,meta:tt(eO),version:Kt(KC)})),rewards:Kt(Je(Cw)),blockTime:tt(pe()),blockHeight:tt(pe())}))),GZe=kn(tt(Te({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),rewards:Kt(Je(Cw)),blockTime:tt(pe()),blockHeight:tt(pe())}))),qZe=kn(tt(Te({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),transactions:Je(Te({transaction:xae,meta:tt(eO),version:Kt(KC)})),rewards:Kt(Je(Cw)),blockTime:tt(pe()),blockHeight:tt(pe())}))),VZe=kn(tt(Te({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),transactions:Je(Te({transaction:Pae,meta:tt(dF),version:Kt(KC)})),rewards:Kt(Je(Cw)),blockTime:tt(pe()),blockHeight:tt(pe())}))),KZe=kn(tt(Te({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),transactions:Je(Te({transaction:xae,meta:tt(dF),version:Kt(KC)})),rewards:Kt(Je(Cw)),blockTime:tt(pe()),blockHeight:tt(pe())}))),YZe=kn(tt(Te({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),rewards:Kt(Je(Cw)),blockTime:tt(pe()),blockHeight:tt(pe())}))),QZe=kn(tt(Te({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),transactions:Je(Te({transaction:uF,meta:tt(eO)})),rewards:Kt(Je(Cw)),blockTime:tt(pe())}))),eV=kn(tt(Te({blockhash:Fe(),previousBlockhash:Fe(),parentSlot:pe(),signatures:Je(Fe()),blockTime:tt(pe())}))),EM=kn(tt(Te({slot:pe(),meta:tt(eO),blockTime:Kt(tt(pe())),transaction:uF,version:Kt(KC)}))),Dx=kn(tt(Te({slot:pe(),transaction:Pae,meta:tt(dF),blockTime:Kt(tt(pe())),version:Kt(KC)}))),JZe=Qs(Te({blockhash:Fe(),lastValidBlockHeight:pe()})),ZZe=Qs(nh()),XZe=Te({slot:pe(),numTransactions:pe(),numSlots:pe(),samplePeriodSecs:pe()}),eXe=kn(Je(XZe)),tXe=Qs(tt(Te({feeCalculator:Te({lamportsPerSignature:pe()})}))),nXe=kn(Fe()),rXe=kn(Fe()),sXe=Te({err:Ew,logs:Je(Fe()),signature:Fe()}),iXe=Te({result:XP(sXe),subscription:pe()}),oXe={"solana-client":"js/1.0.0-maintenance"};class $1{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const l={};return async u=>{const{commitment:d,config:h}=ns(u),f=this._buildArgs([],d,void 0,h),p=Kq(f);return l[p]=l[p]??(async()=>{try{const g=await this._rpcRequest("getBlockHeight",f),m=Ve(g,kn(pe()));if("error"in m)throw new Pt(m.error,"failed to get block height information");return m.result}finally{delete l[p]}})(),await l[p]}})();let r,s,i,o,a,c;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,s=n.httpHeaders,i=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,c=n.httpAgent),this._rpcEndpoint=GJe(e),this._rpcWsEndpoint=r||zJe(e),this._rpcClient=oZe(e,s,i,o,a,c),this._rpcRequest=aZe(this._rpcClient),this._rpcBatchRequest=cZe(this._rpcClient),this._rpcWebSocket=new $Je(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:s}=ns(n),i=this._buildArgs([e.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),a=Ve(o,Qs(pe()));if("error"in a)throw new Pt(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=Ve(n,kn(tt(pe())));if("error"in r)throw new Pt(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=Ve(e,kn(pe()));if("error"in n)throw new Pt(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=Ve(e,gZe);if("error"in n)throw new Pt(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),s=Ve(r,mZe);if("error"in s)throw new Pt(s.error,"failed to get supply");return s.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenSupply",r),i=Ve(s,Qs(zL));if("error"in i)throw new Pt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenAccountBalance",r),i=Ve(s,Qs(zL));if("error"in i)throw new Pt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,n,r){const{commitment:s,config:i}=ns(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),l=Ve(c,wZe);if("error"in l)throw new Pt(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getParsedTokenAccountsByOwner(e,n,r){let s=[e.toBase58()];"mint"in n?s.push({mint:n.mint.toBase58()}):s.push({programId:n.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=Ve(o,bZe);if("error"in a)throw new Pt(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],s=await this._rpcRequest("getLargestAccounts",r),i=Ve(s,vZe);if("error"in i)throw new Pt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenLargestAccounts",r),i=Ve(s,yZe);if("error"in i)throw new Pt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:s}=ns(n),i=this._buildArgs([e.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=Ve(o,Qs(tt(DS)));if("error"in a)throw new Pt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:s}=ns(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=Ve(o,Qs(tt(GL)));if("error"in a)throw new Pt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:s}=ns(n),i=e.map(l=>l.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Ve(a,Qs(Je(tt(GL))));if("error"in c)throw new Pt(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:s}=ns(n),i=e.map(l=>l.toBase58()),o=this._buildArgs([i],r,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Ve(a,Qs(Je(tt(DS))));if("error"in c)throw new Pt(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:s,config:i}=ns(n),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),c=Ve(a,kn(AZe));if("error"in c)throw new Pt(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,n){const{commitment:r,config:s}=ns(n),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:Jq(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),l=Je(EZe),u=o.withContext===!0?Ve(c,Qs(l)):Ve(c,kn(l));if("error"in u)throw new Pt(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:s}=ns(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=Ve(o,kn(Je(_Ze)));if("error"in a)throw new Pt(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var i;let r;if(typeof e=="string")r=e;else{const o=e;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let s;try{s=co.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Is(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,s,i=!1;const o=new Promise((c,l)=>{try{r=this.onSignature(n,(d,h)=>{r=void 0;const f={context:h,value:d};c({__type:yp.PROCESSED,response:f})},e);const u=new Promise(d=>{r==null?d():s=this._onSubscriptionStateChange(r,h=>{h==="subscribed"&&d()})});(async()=>{if(await u,i)return;const d=await this.getSignatureStatus(n);if(i||d==null)return;const{context:h,value:f}=d;if(f!=null)if(f!=null&&f.err)l(f.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(f.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(f.confirmationStatus==="processed"||f.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:yp.PROCESSED,response:{context:h,value:f}})}})()}catch(u){l(u)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(d=>{const h=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let f=await h();if(!i){for(;f<=r;)if(await Cb(1e3),i||(f=await h(),i))return;d({__type:yp.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),l=this.getCancellationPromise(n);let u;try{const d=await Promise.race([l,c,o]);if(d.__type===yp.PROCESSED)u=d.response;else throw new wae(s)}finally{i=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(f=>{let p=i,g=null;const m=async()=>{try{const{context:y,value:w}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return g=y.slot,w==null?void 0:w.nonce}catch{return p}};(async()=>{if(p=await m(),!a)for(;;){if(i!==p){f({__type:yp.NONCE_INVALID,slotInWhichNonceDidAdvance:g});return}if(await Cb(2e3),a||(p=await m(),a))return}})()}),{abortConfirmation:l,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),d=this.getCancellationPromise(n);let h;try{const f=await Promise.race([d,u,c]);if(f.__type===yp.PROCESSED)h=f.response;else{let p;for(;;){const g=await this.getSignatureStatus(o);if(g==null)break;if(g.context.slot<(f.slotInWhichNonceDidAdvance??r)){await Cb(400);continue}p=g;break}if(p!=null&&p.value){const g=e||"finalized",{confirmationStatus:m}=p.value;switch(g){case"processed":case"recent":if(m!=="processed"&&m!=="confirmed"&&m!=="finalized")throw new l_(o);break;case"confirmed":case"single":case"singleGossip":if(m!=="confirmed"&&m!=="finalized")throw new l_(o);break;case"finalized":case"max":case"root":if(m!=="finalized")throw new l_(o);break;default:}h={context:p.context,value:{err:p.value.err}}}else throw new l_(o)}}finally{a=!0,l()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const s=new Promise(c=>{let l=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{l=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>c({__type:yp.TIMED_OUT,timeoutMs:l}),l)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const c=await Promise.race([o,s]);if(c.__type===yp.PROCESSED)a=c.response;else throw new bae(n,c.timeoutMs/1e3)}finally{clearTimeout(r),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=Ve(e,kn(Je(BZe)));if("error"in n)throw new Pt(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),s=Ve(r,UZe);if("error"in s)throw new Pt(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:n,config:r}=ns(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlot",s),o=Ve(i,kn(pe()));if("error"in o)throw new Pt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=ns(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=Ve(i,kn(Fe()));if("error"in o)throw new Pt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],s=await this._rpcRequest("getSlotLeaders",r),i=Ve(s,kn(Je(Ls)));if("error"in i)throw new Pt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,n){const{context:r,value:s}=await this.getSignatureStatuses([e],n);Is(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const s=await this._rpcRequest("getSignatureStatuses",r),i=Ve(s,FZe);if("error"in i)throw new Pt(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:n,config:r}=ns(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=Ve(i,kn(pe()));if("error"in o)throw new Pt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),s=Ve(r,lZe);if("error"in s)throw new Pt(s.error,"failed to get inflation");return s.result}async getInflationReward(e,n,r){const{commitment:s,config:i}=ns(r),o=this._buildArgs([e.map(l=>l.toBase58())],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),c=Ve(a,KJe);if("error"in c)throw new Pt(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=Ve(e,uZe);if("error"in n)throw new Pt(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=ns(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=Ve(i,hZe);if("error"in o)throw new Pt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=Ve(e,fZe);if("error"in n)throw new Pt(n.error,"failed to get epoch schedule");const r=n.result;return new UJe(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=Ve(e,pZe);if("error"in n)throw new Pt(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Ve(s,jZe);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=Ve(n,eXe);if("error"in r)throw new Pt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Ve(s,tXe);if("error"in i)throw new Pt(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=ro(e.serialize()).toString("base64"),s=this._buildArgs([r],n),i=await this._rpcRequest("getFeeForMessage",s),o=Ve(i,Qs(tt(pe())));if("error"in o)throw new Pt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=Ve(s,dZe);if("error"in i)throw new Pt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=ns(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=Ve(i,JZe);if("error"in o)throw new Pt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:s}=ns(n),i=this._buildArgs([e],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=Ve(o,ZZe);if("error"in a)throw new Pt(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=Ve(e,kn(nZe));if("error"in n)throw new Pt(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=Ve(e,kn(Fe()));if("error"in n)throw new Pt(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:s}=ns(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Ve(o,qZe);if("error"in a)throw a.error;return a.result}case"none":{const a=Ve(o,GZe);if("error"in a)throw a.error;return a.result}default:{const a=Ve(o,HZe);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:l,meta:u,version:d})=>({meta:u,transaction:{...l,message:vM(d,l.message)},version:d}))}:null}}}catch(a){throw new Pt(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:s}=ns(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Ve(o,KZe);if("error"in a)throw a.error;return a.result}case"none":{const a=Ve(o,YZe);if("error"in a)throw a.error;return a.result}default:{const a=Ve(o,VZe);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Pt(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...c}=e;r=a,n=c}const s=this._buildArgs([],r,"base64",n),i=await this._rpcRequest("getBlockProduction",s),o=Ve(i,iZe);if("error"in o)throw new Pt(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:s}=ns(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getTransaction",i),a=Ve(o,EM);if("error"in a)throw new Pt(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:vM(c.version,c.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:s}=ns(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=Ve(o,Dx);if("error"in a)throw new Pt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:s}=ns(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const l=Ve(c,Dx);if("error"in l)throw new Pt(l.error,"failed to get transactions");return l.result})}async getTransactions(e,n){const{commitment:r,config:s}=ns(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const l=Ve(c,EM);if("error"in l)throw new Pt(l.error,"failed to get transactions");const u=l.result;return u&&{...u,transaction:{...u.transaction,message:vM(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getBlock",r),i=Ve(s,QZe);if("error"in i)throw new Pt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:l})=>{const u=new Mf(c.message);return{meta:l,transaction:{...c,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:l})=>({meta:l,transaction:Xa.populate(c.message,c.signatures)}))}}async getBlocks(e,n,r){const s=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),i=await this._rpcRequest("getBlocks",s),o=Ve(i,kn(Je(pe())));if("error"in o)throw new Pt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Ve(s,eV);if("error"in i)throw new Pt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Ve(s,eV);if("error"in i)throw new Pt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getTransaction",r),i=Ve(s,EM);if("error"in i)throw new Pt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new Mf(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:Xa.populate(a,c)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=Ve(s,Dx);if("error"in i)throw new Pt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=Ve(o,Dx);if("error"in a)throw new Pt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(n--,!(n<=0||n<i));)try{const c=await this.getConfirmedBlockSignatures(n,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const c=await this.getConfirmedBlockSignatures(r);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Ve(i,SZe);if("error"in o)throw new Pt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getSignaturesForAddress",s),o=Ve(i,IZe);if("error"in o)throw new Pt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=new Qq({key:e,state:Qq.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=cF.fromAccountData(s.data)),{context:r,value:i}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),s=Ve(r,nXe);if("error"in s)throw new Pt(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Cb(100);const r=Date.now()-this._blockhashInfo.lastFetch>=HJe;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Cb(kJe/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=ns(e),s=this._buildArgs([],n,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Ve(i,Qs(pe()));if("error"in o)throw new Pt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const g=e.serialize(),m=En.Buffer.from(g).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const y=n||{};y.encoding="base64","commitment"in y||(y.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(y.innerInstructions=n.innerInstructions);const w=[m,y],C=await this._rpcRequest("simulateTransaction",w),N=Ve(C,Zq);if("error"in N)throw new Error("failed to simulate transaction: "+N.error.message);return N.result}let s;if(e instanceof Xa){let p=e;s=new Xa,s.feePayer=p.feePayer,s.instructions=e.instructions,s.nonceInfo=p.nonceInfo,s.signatures=p.signatures}else s=Xa.populate(e),s._message=s._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(s.nonceInfo&&i)s.sign(...i);else{let p=this._disableBlockhashCaching;for(;;){const g=await this._blockhashWithExpiryBlockHeight(p);if(s.lastValidBlockHeight=g.lastValidBlockHeight,s.recentBlockhash=g.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const m=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(m)&&!this._blockhashInfo.transactionSignatures.includes(m)){this._blockhashInfo.simulatedSignatures.push(m);break}else p=!0}}const o=s._compile(),a=o.serialize(),l=s._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const p=(Array.isArray(r)?r:o.nonProgramIds()).map(g=>g.toBase58());u.accounts={encoding:"base64",addresses:p}}i&&(u.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(u.innerInstructions=n.innerInstructions);const d=[l,u],h=await this._rpcRequest("simulateTransaction",d),f=Ve(h,Zq);if("error"in f){let p;if("data"in f.error&&(p=f.error.data.logs,p&&Array.isArray(p))){const g=`
    `,m=g+p.join(g);console.error(f.error.message,m)}throw new Gq({action:"simulate",signature:"",transactionMessage:f.error.message,logs:p})}return f.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,n){const r=ro(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},s=n&&n.skipPreflight,i=s===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),c=Ve(a,rXe);if("error"in c){let l;throw"data"in c.error&&(l=c.error.data.logs),new Gq({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:l})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var s;const r=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var i;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(n),()=>{s.delete(n),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!n())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...n)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=Ve(e,NZe);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,s=Kq([e.method,n]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Is(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:s,config:i}=ns(r),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=Ve(e,TZe);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,s){const{commitment:i,config:o}=ns(r),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Jq(s)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=Ve(e,iXe);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=Ve(e,kZe);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=Ve(e,OZe);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,s){const i=n||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,s){const i=n||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,s)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=Ve(e,DZe);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,n,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(c,l)=>{n(c,l);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=Ve(e,MZe);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:At([Ot("instruction"),rC("recentSlot"),Hn("bumpSeed")])},FreezeLookupTable:{index:1,layout:At([Ot("instruction")])},ExtendLookupTable:{index:2,layout:At([Ot("instruction"),rC(),$o(Wn(),p0(Ot(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:At([Ot("instruction")])},CloseLookupTable:{index:4,layout:At([Ot("instruction")])}});new ot("AddressLookupTab1e1111111111111111111111111");const Mx=Object.freeze({RequestUnits:{index:0,layout:At([Hn("instruction"),Ot("units"),Ot("additionalFee")])},RequestHeapFrame:{index:1,layout:At([Hn("instruction"),Ot("bytes")])},SetComputeUnitLimit:{index:2,layout:At([Hn("instruction"),Ot("units")])},SetComputeUnitPrice:{index:3,layout:At([Hn("instruction"),rC("microLamports")])}});class MS{constructor(){}static requestUnits(e){const n=Mx.RequestUnits,r=Bo(n,e);return new io({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=Mx.RequestHeapFrame,r=Bo(n,e);return new io({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=Mx.SetComputeUnitLimit,r=Bo(n,e);return new io({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=Mx.SetComputeUnitPrice,r=Bo(n,{microLamports:BigInt(e.microLamports)});return new io({keys:[],programId:this.programId,data:r})}}MS.programId=new ot("ComputeBudget111111111111111111111111111111");At([Hn("numSignatures"),Hn("padding"),Nl("signatureOffset"),Nl("signatureInstructionIndex"),Nl("publicKeyOffset"),Nl("publicKeyInstructionIndex"),Nl("messageDataOffset"),Nl("messageDataSize"),Nl("messageInstructionIndex")]);new ot("Ed25519SigVerify111111111111111111111111111");K2.utils.isValidPrivateKey;K2.getPublicKey;At([Hn("numSignatures"),Nl("signatureOffset"),Hn("signatureInstructionIndex"),Nl("ethAddressOffset"),Hn("ethAddressInstructionIndex"),Nl("messageDataOffset"),Nl("messageDataSize"),Hn("messageInstructionIndex"),Yr(20,"ethAddress"),Yr(64,"signature"),Hn("recoveryId")]);new ot("KeccakSecp256k11111111111111111111111111111");var Dae;new ot("StakeConfig11111111111111111111111111111111");class Mae{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}Dae=Mae;Mae.default=new Dae(0,0,ot.default);Object.freeze({Initialize:{index:0,layout:At([Ot("instruction"),_Je(),AJe()])},Authorize:{index:1,layout:At([Ot("instruction"),Wn("newAuthorized"),Ot("stakeAuthorizationType")])},Delegate:{index:2,layout:At([Ot("instruction")])},Split:{index:3,layout:At([Ot("instruction"),Bc("lamports")])},Withdraw:{index:4,layout:At([Ot("instruction"),Bc("lamports")])},Deactivate:{index:5,layout:At([Ot("instruction")])},Merge:{index:7,layout:At([Ot("instruction")])},AuthorizeWithSeed:{index:8,layout:At([Ot("instruction"),Wn("newAuthorized"),Ot("stakeAuthorizationType"),Gb("authoritySeed"),Wn("authorityOwner")])}});new ot("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:At([Ot("instruction"),SJe()])},Authorize:{index:1,layout:At([Ot("instruction"),Wn("newAuthorized"),Ot("voteAuthorizationType")])},Withdraw:{index:3,layout:At([Ot("instruction"),Bc("lamports")])},UpdateValidatorIdentity:{index:4,layout:At([Ot("instruction")])},AuthorizeWithSeed:{index:10,layout:At([Ot("instruction"),IJe()])}});new ot("Vote111111111111111111111111111111111111111");new ot("Va1idator1nfo111111111111111111111111111111");Te({name:Fe(),website:Kt(Fe()),details:Kt(Fe()),iconUrl:Kt(Fe()),keybaseUsername:Kt(Fe())});new ot("Vote111111111111111111111111111111111111111");At([Wn("nodePubkey"),Wn("authorizedWithdrawer"),Hn("commission"),Xi(),$o(At([Xi("slot"),Ot("confirmationCount")]),p0(Ot(),-8),"votes"),Hn("rootSlotValid"),Xi("rootSlot"),Xi(),$o(At([Xi("epoch"),Wn("authorizedVoter")]),p0(Ot(),-8),"authorizedVoters"),At([$o(At([Wn("authorizedPubkey"),Xi("epochOfLastAuthorizedSwitch"),Xi("targetEpoch")]),32,"buf"),Xi("idx"),Hn("isEmpty")],"priorVoters"),Xi(),$o(At([Xi("epoch"),Xi("credits"),Xi("prevCredits")]),p0(Ot(),-8),"epochCredits"),At([Xi("slot"),Xi("timestamp")],"lastTimestamp")]);const aXe=1e9;var tV={};const Oe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof tV<"u"?tV.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},cXe={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Oe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},lXe={bigNumber(t){return t?new ia(t):new ia(0)},multiply(t,e){if(t===void 0||e===void 0)return new ia(0);const n=new ia(t),r=new ia(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},uXe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],dXe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],hXe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],fXe={getERC20Abi:t=>Oe.USDT_CONTRACT_ADDRESSES.includes(t)?hXe:uXe,getSwapAbi:()=>dXe},Ig={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},fn={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function CM(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const nn={setItem(t,e){u_()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(u_())return localStorage.getItem(t)||void 0},removeItem(t){u_()&&localStorage.removeItem(t)},clear(){u_()&&localStorage.clear()}};function u_(){return typeof window<"u"&&typeof localStorage<"u"}function Rk(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const ou={UNIVERSAL_PROVIDER_RELAY_URL:"wss://relay.walletconnect.org",HASH_PREFIX:"SPL Name Service",ROOT_DOMAIN_ACCOUNT:new ot("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),NAME_PROGRAM_ID:new ot("namesLPneVptA9Z5rqUDD9tMTWEJwofgaYwp8cawRkX"),REVERSE_LOOKUP_CLASS:new ot("33m47vH6Eav6jr5Ry86XjhRft2jRBLDnDgPSHoquXi2Z"),DEFAULT_CHAIN:{id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",chainNamespace:Oe.CHAIN.SOLANA,nativeCurrency:{name:"Solana",decimals:9,symbol:"SOL"},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},rpcUrls:{default:{http:[`${Oe.BLOCKCHAIN_API_RPC_URL}/v1`]}}},CHAIN_IDS:{Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Testnet:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"},LAMPORTS_PER_SOL:1e9},_M={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT_TRANSFER_ONLY:3e5,UNIT_LIMIT_WITH_ATA_CREATION:4e5},ua={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[Oe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Tt={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Tt.getActiveNamespace(),e=Tt.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{nn.setItem(fn.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=nn.getItem(fn.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{nn.removeItem(fn.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{nn.setItem(fn.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{nn.setItem(fn.ACTIVE_CAIP_NETWORK_ID,t),Tt.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return nn.getItem(fn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{nn.removeItem(fn.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=CM(t);nn.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Tt.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),nn.setItem(fn.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=nn.getItem(fn.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=CM(t);nn.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return nn.getItem(fn.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=CM(t);return nn.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{nn.setItem(fn.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return nn.getItem(fn.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{nn.removeItem(fn.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return nn.getItem(fn.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=nn.getItem(fn.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{nn.setItem(fn.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return nn.getItem(fn.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=nn.getItem(fn.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));nn.setItem(fn.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Tt.getConnectedNamespaces();e.includes(t)||(e.push(t),Tt.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Tt.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Tt.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return nn.getItem(fn.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{nn.setItem(fn.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{nn.removeItem(fn.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=nn.getItem(fn.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Tt.getBalanceCache();nn.setItem(fn.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Tt.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Tt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Tt.getBalanceCache();e[t.caipAddress]=t,nn.setItem(fn.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=nn.getItem(fn.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Tt.getBalanceCache();nn.setItem(fn.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Tt.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Tt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Tt.getNativeBalanceCache();e[t.caipAddress]=t,nn.setItem(fn.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=nn.getItem(fn.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Tt.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Tt.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Tt.getEnsCache();e[t.address]=t,nn.setItem(fn.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Tt.getEnsCache();nn.setItem(fn.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=nn.getItem(fn.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Tt.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Tt.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Tt.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},nn.setItem(fn.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Tt.getIdentityCache();nn.setItem(fn.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{nn.removeItem(fn.PORTFOLIO_CACHE),nn.removeItem(fn.NATIVE_BALANCE_CACHE),nn.removeItem(fn.ENS_CACHE),nn.removeItem(fn.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{nn.setItem(fn.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=nn.getItem(fn.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=Tt.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===Oe.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};nn.setItem(fn.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=nn.getItem(fn.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=Tt.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),nn.setItem(fn.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=nn.getItem(fn.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=Tt.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),nn.setItem(fn.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=Tt.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),nn.setItem(fn.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Tt.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Xt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Xt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ua.TEN_SEC_MS:!0},isAllowedRetry(t,e=ua.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Xt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ua.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Xt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Xt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Tt.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Xt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Oe.W3M_API_URL},getBlockchainApiUrl(){return Oe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Oe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?ua.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Oe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function F1(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class dN{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await F1(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await F1(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await F1(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await F1(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await F1(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const pXe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?ua.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Xt.isTelegram()){if(Xt.isIos())return t.filter(e=>e!=="google");if(Xt.isMac())return t.filter(e=>e!=="x");if(Xt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},kt=Cs({features:ua.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ua.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Cn={state:kt,subscribeKey(t,e){return Ca(kt,t,e)},setOptions(t){Object.assign(kt,t)},setRemoteFeatures(t){var n,r;if(!t)return;const e={...kt.remoteFeatures,...t};kt.remoteFeatures=e,(n=kt.remoteFeatures)!=null&&n.socials&&(kt.remoteFeatures.socials=pXe.filterSocialsByPlatform(kt.remoteFeatures.socials)),(r=kt.features)!=null&&r.pay&&(kt.remoteFeatures.email=!1,kt.remoteFeatures.socials=!1)},setFeatures(t){var n;if(!t)return;kt.features||(kt.features=ua.DEFAULT_FEATURES);const e={...kt.features,...t};kt.features=e,(n=kt.features)!=null&&n.pay&&kt.remoteFeatures&&(kt.remoteFeatures.email=!1,kt.remoteFeatures.socials=!1)},setProjectId(t){kt.projectId=t},setCustomRpcUrls(t){kt.customRpcUrls=t},setAllWallets(t){kt.allWallets=t},setIncludeWalletIds(t){kt.includeWalletIds=t},setExcludeWalletIds(t){kt.excludeWalletIds=t},setFeaturedWalletIds(t){kt.featuredWalletIds=t},setTokens(t){kt.tokens=t},setTermsConditionsUrl(t){kt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){kt.privacyPolicyUrl=t},setCustomWallets(t){kt.customWallets=t},setIsSiweEnabled(t){kt.isSiweEnabled=t},setIsUniversalProvider(t){kt.isUniversalProvider=t},setSdkVersion(t){kt.sdkVersion=t},setMetadata(t){kt.metadata=t},setDisableAppend(t){kt.disableAppend=t},setEIP6963Enabled(t){kt.enableEIP6963=t},setDebug(t){kt.debug=t},setEnableWalletConnect(t){kt.enableWalletConnect=t},setEnableWalletGuide(t){kt.enableWalletGuide=t},setEnableAuthLogger(t){kt.enableAuthLogger=t},setEnableWallets(t){kt.enableWallets=t},setPreferUniversalLinks(t){kt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(ua.SIWX_DEFAULTS))t[e]??(t[e]=n);kt.siwx=t},setConnectMethodsOrder(t){kt.features={...kt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){kt.features={...kt.features,walletFeaturesOrder:t}},setSocialsOrder(t){kt.remoteFeatures={...kt.remoteFeatures,socials:t}},setCollapseWallets(t){kt.features={...kt.features,collapseWallets:t}},setEnableEmbedded(t){kt.enableEmbedded=t},setAllowUnsupportedChain(t){kt.allowUnsupportedChain=t},setManualWCControl(t){kt.manualWCControl=t},setEnableNetworkSwitch(t){kt.enableNetworkSwitch=t},setEnableReconnect(t){kt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(kt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){kt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return kt.universalProviderConfigOverride},getSnapshot(){return kS(kt)}},gXe=Object.freeze({enabled:!0,events:[]}),mXe=new dN({baseUrl:Xt.getAnalyticsUrl(),clientId:null}),yXe=5,wXe=60*1e3,wp=Cs({...gXe}),bXe={state:wp,subscribeKey(t,e){return Ca(wp,t,e)},async sendError(t,e){if(!wp.enabled)return;const n=Date.now();if(wp.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<wXe}).length>=yXe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};wp.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Cn.state;await mXe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Xt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){wp.enabled=!0},disable(){wp.enabled=!1},clearEvents(){wp.events=[]}};class iC extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,iC.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,iC):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function nV(t,e){const n=t instanceof iC?t:new iC(t instanceof Error?t.message:String(t),e,t);throw bXe.sendError(n,n.category),n}function Ql(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return nV(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return nV(a,e)}},n[r]=i}else n[r]=s}),n}const g0={ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Rd={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},vXe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Rd.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Rd.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Rd.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Rd.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Oe.CHAIN.SOLANA&&t===Rd.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Rd.COINBASE.url}/dapp?cb_url=${r}`)}},vc=Cs({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),EXe={state:vc,subscribeNetworkImages(t){return ya(vc.networkImages,()=>t(vc.networkImages))},subscribeKey(t,e){return Ca(vc,t,e)},subscribe(t){return ya(vc,()=>t(vc))},setWalletImage(t,e){vc.walletImages[t]=e},setNetworkImage(t,e){vc.networkImages[t]=e},setChainImage(t,e){vc.chainImages[t]=e},setConnectorImage(t,e){vc.connectorImages={...vc.connectorImages,[t]:e}},setTokenImage(t,e){vc.tokenImages[t]=e},setCurrencyImage(t,e){vc.currencyImages[t]=e}},Rl=Ql(EXe),CXe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},AM=Cs({networkImagePromises:{}}),_Xe={async fetchWalletImage(t){if(t)return await sn._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(AM.networkImagePromises[t]||(AM.networkImagePromises[t]=sn._fetchNetworkImage(t)),await AM.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Rl.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Rl.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Rl.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Rl.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Rl.state.connectorImages[t.imageId]},getChainImage(t){return Rl.state.networkImages[CXe[t]]}},bp=Cs({message:"",variant:"info",open:!1}),AXe={state:bp,subscribeKey(t,e){return Ca(bp,t,e)},open(t,e){const{debug:n}=Cn.state,{shortMessage:r,longMessage:s}=t;n&&(bp.message=r,bp.variant=e,bp.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){bp.open=!1,bp.message="",bp.variant="info"}},Bae=Ql(AXe),SXe=Xt.getAnalyticsUrl(),IXe=new dN({baseUrl:SXe,clientId:null}),NXe=["MODAL_CREATED"],Rh=Cs({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Os={state:Rh,subscribe(t){return ya(Rh,()=>t(Rh))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Cn.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=br.state.address;if(NXe.includes(t.data.event)||typeof window>"u")return;await IXe.post({path:"/e",params:Os.getSdkProperties(),body:{eventId:Xt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Rh.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Oe.HTTP_STATUS_CODES.FORBIDDEN&&!Rh.reportedErrors.FORBIDDEN&&(Bae.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${u_()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Rh.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Rh.timestamp=Date.now(),Rh.data=t,((e=Cn.state.features)!=null&&e.analytics||t.event==="INITIALIZE")&&Os._sendAnalyticsEvent(Rh)}},xXe=Xt.getApiUrl(),Da=new dN({baseUrl:xXe,clientId:null}),TXe=40,rV=4,RXe=20,In=Cs({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),sn={state:In,subscribeKey(t,e){return Ca(In,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Cn.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Cn.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Da.baseUrl}/getWalletImage/${t}`,n=await Da.getBlob({path:e,params:sn._getSdkProperties()});Rl.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Da.baseUrl}/public/getAssetImage/${t}`,n=await Da.getBlob({path:e,params:sn._getSdkProperties()});Rl.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Da.baseUrl}/public/getAssetImage/${t}`,n=await Da.getBlob({path:e,params:sn._getSdkProperties()});Rl.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Da.baseUrl}/public/getCurrencyImage/${t}`,n=await Da.getBlob({path:e,params:sn._getSdkProperties()});Rl.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Da.baseUrl}/public/getTokenImage/${t}`,n=await Da.getBlob({path:e,params:sn._getSdkProperties()});Rl.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Xt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Rd.COINBASE.id?!0:le.state.activeChain==="solana"&&(n.id===Rd.SOLFLARE.id||n.id===Rd.PHANTOM.id)):t},async fetchProjectConfig(){return(await Da.get({path:"/appkit/v1/config",params:sn._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Da.get({path:"/projects/v1/origins",params:sn._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===Oe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=Oe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=le.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!_Xe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>sn._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Lt.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>sn._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>sn._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>sn._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];sn._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Rd).map(o=>o.id));const r=await Da.get({path:"/getWallets",params:{...sn._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:sn._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Cn.state;if(t!=null&&t.length){const e={...sn._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??rV,include:t},{data:n}=await sn.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>sn._fetchWalletImage(i))),In.featured=r,In.allFeatured=r}},async fetchRecommendedWallets(){try{In.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=Cn.state,r=[...e??[],...n??[]].filter(Boolean),s=le.getRequestedCaipNetworkIds().join(","),i={page:1,entries:rV,include:t,exclude:r,chains:s},{data:o,count:a}=await sn.fetchWallets(i),c=Tt.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>sn._fetchWalletImage(d))),In.recommended=o,In.allRecommended=o,In.count=a??0}catch{}finally{In.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=Cn.state,s=le.getRequestedCaipNetworkIds().join(","),i=[...In.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:TXe,include:e,exclude:i,chains:s},{data:a,count:c}=await sn.fetchWallets(o),l=a.slice(0,RXe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>sn._fetchWalletImage(u))),In.wallets=Xt.uniqueBy([...In.wallets,...sn._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),In.count=c>In.count?c:In.count,In.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await sn.fetchWallets(e);n&&n.forEach(r=>{In.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=Cn.state,s=le.getRequestedCaipNetworkIds().join(",");In.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await sn.fetchWallets(i);Os.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>sn._fetchWalletImage(c)),Xt.wait(300)]),In.search=sn._filterOutExtensions(o)},initPromise(t,e){const n=In.promises[t];return n||(In.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&sn.initPromise("connectorImages",sn.fetchConnectorImages),e&&sn.initPromise("featuredWallets",sn.fetchFeaturedWallets),n&&sn.initPromise("recommendedWallets",sn.fetchRecommendedWallets),r&&sn.initPromise("networkImages",sn.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=Cn.state.features)!=null&&t.analytics&&sn.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Da.get({path:"/getAnalyticsConfig",params:sn._getSdkProperties()});Cn.setFeatures({analytics:t})}catch{Cn.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){In.featured=In.allFeatured,In.recommended=In.allRecommended;return}const e=le.getRequestedCaipNetworkIds().join(",");In.featured=In.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),In.recommended=In.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),In.filteredWallets=In.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){In.filteredWallets=[]},setFilterByNamespace(t){if(!t){In.featured=In.allFeatured,In.recommended=In.allRecommended;return}const e=le.getRequestedCaipNetworkIds().join(",");In.featured=In.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),In.recommended=In.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),In.filteredWallets=In.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Fr=Cs({view:"Connect",history:["Connect"],transactionStack:[]}),kXe={state:Fr,subscribeKey(t,e){return Ca(Fr,t,e)},pushTransactionStack(t){Fr.transactionStack.push(t)},popTransactionStack(t){const e=Fr.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),mn.goBack();break;case"cancel":s==null||s(),mn.goBack();break}},push(t,e){t!==Fr.view&&(Fr.view=t,Fr.history.push(t),Fr.data=e)},reset(t,e){Fr.view=t,Fr.history=[t],Fr.data=e},replace(t,e){Fr.history.at(-1)===t||(Fr.view=t,Fr.history[Fr.history.length-1]=t,Fr.data=e)},goBack(){var r;const t=le.state.activeCaipAddress,e=mn.state.view==="ConnectingFarcaster",n=!t&&e;if(Fr.history.length>1){Fr.history.pop();const[s]=Fr.history.slice(-1);s&&(t&&s==="Connect"?Fr.view="Account":Fr.view=s)}else os.close();(r=Fr.data)!=null&&r.wallet&&(Fr.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){br.setFarcasterUrl(void 0,le.state.activeChain);const a=Lt.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=kS(Cn.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Fr.history.length>1){Fr.history=Fr.history.slice(0,t+1);const[e]=Fr.history.slice(-1);e&&(Fr.view=e)}},goBackOrCloseModal(){mn.state.history.length>1?mn.goBack():os.close()}},mn=Ql(kXe),kh=Cs({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),qL={state:kh,subscribe(t){return ya(kh,()=>t(kh))},setThemeMode(t){kh.themeMode=t;try{const e=Lt.getAuthConnector();if(e){const n=qL.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Rk(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){kh.themeVariables={...kh.themeVariables,...t};try{const e=Lt.getAuthConnector();if(e){const n=qL.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Rk(kh.themeVariables,kh.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return kS(kh)}},Bx=Ql(qL),Uae={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},dr=Cs({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...Uae},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),PXe={state:dr,subscribe(t){return ya(dr,()=>{t(dr)})},subscribeKey(t,e){return Ca(dr,t,e)},initialize(t){t.forEach(e=>{const n=Tt.getConnectedConnectorId(e);n&&Lt.setConnectorId(n,e)})},setActiveConnector(t){t&&(dr.activeConnector=K0(t))},setConnectors(t){t.filter(s=>!dr.allConnectors.some(i=>i.id===s.id&&Lt.getConnectorName(i.name)===Lt.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&dr.allConnectors.push(K0(s))});const n=Lt.getEnabledNamespaces(),r=Lt.getEnabledConnectors(n);dr.connectors=Lt.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(dr.filterByNamespaceMap).forEach(e=>{dr.filterByNamespaceMap[e]=!1}),t.forEach(e=>{dr.filterByNamespaceMap[e]=!0}),Lt.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){dr.filterByNamespaceMap[t]=e,Lt.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Lt.getEnabledNamespaces(),e=Lt.getEnabledConnectors(t),n=Lt.areAllNamespacesEnabled();dr.connectors=Lt.mergeMultiChainConnectors(e),n?sn.clearFilterByNamespaces():sn.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(dr.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return dr.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(dr.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Lt.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Oe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Lt.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Oe.CONNECTOR_ID.AUTH){const s=t,i=kS(Cn.state),o=Bx.getSnapshot().themeMode,a=Bx.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Rk(a,o)}),Lt.setConnectors([t])}else Lt.setConnectors([t])},getAuthConnector(t){var r;const e=t||le.state.activeChain,n=dr.connectors.find(s=>s.id===Oe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return dr.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return dr.allConnectors.find(e=>e.id===t)},getConnector(t,e){return dr.allConnectors.filter(r=>r.chain===le.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=kS(Cn.state),r=Bx.getSnapshot().themeMode,s=Bx.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Rk(s,r)})},getConnectorsByNamespace(t){const e=dr.allConnectors.filter(n=>n.chain===t);return Lt.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return le.checkIfSmartAccountEnabled()&&Bf(t)===g0.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Lt.getConnector(t.id,t.rdns);vXe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,le.state.activeChain),e?mn.push("ConnectingExternal",{connector:e}):mn.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Lt.getConnectorsByNamespace(t):Lt.mergeMultiChainConnectors(dr.allConnectors)},setFilterByNamespace(t){dr.filterByNamespace=t,dr.connectors=Lt.getConnectors(t),sn.setFilterByNamespace(t)},setConnectorId(t,e){t&&(dr.activeConnectorIds={...dr.activeConnectorIds,[e]:t},Tt.setConnectedConnectorId(e,t))},removeConnectorId(t){dr.activeConnectorIds={...dr.activeConnectorIds,[t]:void 0},Tt.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return dr.activeConnectorIds[t]},isConnected(t){return t?!!dr.activeConnectorIds[t]:Object.values(dr.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){dr.activeConnectorIds={...Uae}}},Lt=Ql(PXe),OXe=1e3,j1={checkNamespaceConnectorId(t,e){return Lt.getConnectorId(t)===e},isSocialProvider(t){return ua.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Lt.setActiveConnector(e),s==null||s(Xt.isMobile()&&t),r){const l=os.subscribeKey("open",u=>{u||(mn.state.view!==r&&mn.replace(r),l(),a(new Error("Modal closed")))})}const c=le.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&os.close(),c(),o(Ig.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=le.subscribeKey("activeCaipAddress",s=>{s&&(os.close(),r(),e(Ig.parseCaipAddress(s)))});Mt.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=br.state.socialWindow,i=br.state.socialProvider,o=!1,a=null;const c=le.subscribeKey("activeCaipAddress",l=>{l&&(e&&os.close(),c())});return new Promise((l,u)=>{async function d(f){var p,g;if((p=f.data)!=null&&p.resultUri)if(f.origin===Oe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const m=Lt.getAuthConnector();if(m&&!o){s&&(s.close(),br.setSocialWindow(void 0,le.state.activeChain),s=br.state.socialWindow),o=!0;const y=f.data.resultUri;if(i&&Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),i){Tt.setConnectedSocialProvider(i),await Mt.connectExternal({id:m.id,type:m.type,socialUri:y},m.chain);const w=le.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(Ig.parseCaipAddress(w)),Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i,caipNetworkId:(g=le.getActiveCaipNetwork())==null?void 0:g.caipNetworkId}})}}}catch{i&&Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(br.setSocialProvider(t,le.state.activeChain),i=br.state.socialProvider,Os.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=os.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Lt.getAuthConnector();if(p&&!br.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();br.setFarcasterUrl(g,le.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Lt.getAuthConnector();a=Xt.returnOpenHref(`${Oe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){br.setSocialWindow(a,le.state.activeChain),s=br.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=os.subscribeKey("open",c=>{c||(mn.state.view!==e&&mn.replace(e),a(),i(new Error("Modal closed")))})}const o=le.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&os.close(),o(),s(Ig.parseCaipAddress(a)))})})},async updateEmail(){const t=Tt.getConnectedConnectorId(le.state.activeChain),e=Lt.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==Oe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return mn.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(os.close(),clearInterval(i),o(),r({email:a}))},OXe),o=os.subscribeKey("open",a=>{a||(mn.state.view!=="Connect"&&mn.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return le.checkIfSmartAccountEnabled()&&Bf(t)===g0.ACCOUNT_TYPES.EOA}};function Lae(){var r,s;const t=((r=le.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=le.state.activeCaipNetwork)==null?void 0:s.id)||1,n=ua.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Bf(t){var n;return(n=le.getAccountData(t))==null?void 0:n.preferredAccountType}const $ae={getConnectionStatus(t,e){const n=Lt.state.activeConnectorIds[e],r=Mt.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=Cn.state.remoteFeatures)!=null&&a.multiWallet),n=Lt.state.activeConnectorIds[t],r=Mt.getConnections(t),i=(Mt.state.recentConnections.get(t)??[]).filter(c=>Lt.getConnectorById(c.connectorId)),o=$ae.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},Xm=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),fi=Cs({...Xm}),DXe={state:fi,subscribeKey(t,e){return Ca(fi,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Xt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){fi.message=Xm.message,fi.variant=Xm.variant,fi.svg=Xm.svg,fi.open=Xm.open,fi.autoClose=Xm.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Xm.autoClose}){fi.open?(fi.open=!1,setTimeout(()=>{fi.message=t,fi.variant=n,fi.svg=e,fi.open=!0,fi.autoClose=r},150)):(fi.message=t,fi.variant=n,fi.svg=e,fi.open=!0,fi.autoClose=r)}},Ng=DXe,As=Cs({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),MXe={state:As,subscribe(t){return ya(As,()=>t(As))},setLastNetworkInView(t){As.lastNetworkInView=t},async fetchTransactions(t){var e;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");As.loading=!0;try{const n=await dn.fetchTransactions({account:t,cursor:As.next,chainId:(e=le.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=OT.filterSpamTransactions(n.data),s=OT.filterByConnectedChain(r),i=[...As.transactions,...s];As.loading=!1,As.transactions=i,As.transactionsByYear=OT.groupTransactionsByYearAndMonth(As.transactionsByYear,s),As.empty=i.length===0,As.next=n.next?n.next:void 0}catch{const r=le.state.activeChain;Os.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Cn.state.projectId,cursor:As.next,isSmartAccount:Bf(r)===g0.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ng.showError("Failed to fetch transactions"),As.loading=!1,As.empty=!0,As.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=le.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){As.next=void 0},resetTransactions(){As.transactions=[],As.transactionsByYear={},As.lastNetworkInView=void 0,As.loading=!1,As.empty=!1,As.next=void 0}},OT=Ql(MXe,"API_ERROR"),Xn=Cs({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Wm;const BXe={state:Xn,subscribe(t){return ya(Xn,()=>t(Xn))},subscribeKey(t,e){return Ca(Xn,t,e)},_getClient(){return Xn._client},setClient(t){Xn._client=K0(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Mt.syncStorageConnections(e)},syncStorageConnections(t){const e=Tt.getConnections(),n=t??Array.from(le.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Xn.recentConnections);i.set(r,s),Xn.recentConnections=i}},getConnections(t){return t?Xn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Mt.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(Xt.isTelegram()||Xt.isSafari()&&Xt.isIos()){if(Wm){await Wm,Wm=void 0;return}if(!Xt.isPairingExpired(Xn==null?void 0:Xn.wcPairingExpiry)){const s=Xn.wcUri;Xn.wcUri=s;return}Wm=(e=(t=Mt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Mt.state.status="connecting",await Wm,Wm=void 0,Xn.wcPairingExpiry=void 0,Mt.state.status="connected"}else await((r=(n=Mt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Mt._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&le.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Mt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||le.state.activeChain;e&&Lt.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;os.setLoading(!0,le.state.activeChain);const n=Lt.getAuthConnector();n&&(br.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Tt.setPreferredAccountTypes(Object.entries(le.state.chains).reduce((s,[i,o])=>{const a=i,c=Bf(a);return c!==void 0&&(s[a]=c),s},{})),await Mt.reconnectExternal(n),os.setLoading(!1,le.state.activeChain),Os.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=le.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Mt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Mt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Mt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Mt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Mt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Mt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Mt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Mt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Mt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Mt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Mt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Mt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Xn.wcUri=void 0,Xn.wcPairingExpiry=void 0,Xn.wcLinking=void 0,Xn.recentWallet=void 0,Xn.status="disconnected",OT.resetTransactions(),Tt.deleteWalletConnectDeepLink()},resetUri(){Xn.wcUri=void 0,Xn.wcPairingExpiry=void 0,Wm=void 0},finalizeWcConnection(){var n,r,s;const{wcLinking:t,recentWallet:e}=Mt.state;t&&Tt.setWalletConnectDeepLink(t),e&&Tt.setAppKitRecent(e),Os.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=mn.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown",caipNetworkId:(s=le.getActiveCaipNetwork())==null?void 0:s.caipNetworkId}})},setWcBasic(t){Xn.wcBasic=t},setUri(t){Xn.wcUri=t,Xn.wcPairingExpiry=Xt.getPairingExpiry()},setWcLinking(t){Xn.wcLinking=t},setWcError(t){Xn.wcError=t,Xn.buffering=!1},setRecentWallet(t){Xn.recentWallet=t},setBuffering(t){Xn.buffering=t},setStatus(t){Xn.status=t},setIsSwitchingConnection(t){Xn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=Mt._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new iC("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Xn.connections);n.set(e,t),Xn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=br.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&j1.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Mt.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Lt.getConnectorById(t.connectorId),s=t.connectorId===Oe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await Mt.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await Mt.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Lt.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===Oe.CONNECTOR_ID.AUTH,a=t.connectorId===Oe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&j1.isSocialProvider(i)){const{address:d}=await j1.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){os.open({view:"ConnectingFarcaster"})},onConnect(){mn.replace("ProfileWallets")}});c=d}else{const{address:d}=await j1.connectEmail({closeModalOnConnect:r,onOpen(){os.open({view:"EmailLogin"})},onConnect(){mn.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await j1.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){os.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){mn.replace("ProfileWallets")}});c=d}else{const d=await Mt.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Mt.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=br.getCaipAddress(n);if(o){const{address:c}=Ig.parseCaipAddress(o);i=c}const a=$ae.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Mt.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Mt.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Mt=Ql(BXe),db=Cs({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),yv={state:db,subscribe(t){return ya(db,()=>t(db))},subscribeOpen(t){return Ca(db,"open",t)},set(t){Object.assign(db,{...db,...t})}},UXe={async getTokenList(){var r;const t=le.state.activeCaipNetwork,e=await dn.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=le.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Mt==null?void 0:Mt.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await dn.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await dn.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Mt.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await hF.getMyTokensWithBalance(t);return br.setTokenBalance(e,le.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Lae(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Pr=Cs({tokenBalances:[],loading:!1}),LXe={state:Pr,subscribe(t){return ya(Pr,()=>t(Pr))},subscribeKey(t,e){return Ca(Pr,t,e)},setToken(t){t&&(Pr.token=K0(t))},setTokenAmount(t){Pr.sendTokenAmount=t},setReceiverAddress(t){Pr.receiverAddress=t},setReceiverProfileImageUrl(t){Pr.receiverProfileImageUrl=t},setReceiverProfileName(t){Pr.receiverProfileName=t},setNetworkBalanceInUsd(t){Pr.networkBalanceInUSD=t},setLoading(t){Pr.loading=t},async sendToken(){var t;try{switch(Sr.setLoading(!0),(t=le.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Sr.sendEvmToken();return;case"solana":await Sr.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Sr.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=le.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Bf(t);if(!Sr.state.sendTokenAmount||!Sr.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Sr.state.token)throw new Error("A token is required");(n=Sr.state.token)!=null&&n.address?(Os.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===g0.ACCOUNT_TYPES.SMART_ACCOUNT,token:Sr.state.token.address,amount:Sr.state.sendTokenAmount,network:((r=le.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Sr.sendERC20Token({receiverAddress:Sr.state.receiverAddress,tokenAddress:Sr.state.token.address,sendTokenAmount:Sr.state.sendTokenAmount,decimals:Sr.state.token.quantity.decimals})):(Os.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===g0.ACCOUNT_TYPES.SMART_ACCOUNT,token:Sr.state.token.symbol||"",amount:Sr.state.sendTokenAmount,network:((s=le.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Sr.sendNativeToken({receiverAddress:Sr.state.receiverAddress,sendTokenAmount:Sr.state.sendTokenAmount,decimals:Sr.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Pr.loading=!0;const e=(i=le.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=le.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=le.state.activeCaipAddress,s=r?Xt.getPlainAddress(r):void 0;if(Pr.lastRetry&&!Xt.isAllowedRetry(Pr.lastRetry,30*ua.ONE_SEC_MS))return Pr.loading=!1,[];try{if(s&&e&&n){const a=await hF.getMyTokensWithBalance();return Pr.tokenBalances=a,Pr.lastRetry=void 0,a}}catch(a){Pr.lastRetry=Date.now(),t==null||t(a),Ng.showError("Token Balance Unavailable")}finally{Pr.loading=!1}return[]},fetchNetworkBalance(){if(Pr.tokenBalances.length===0)return;const t=UXe.mapBalancesToSwapTokens(Pr.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Lae());e&&(Pr.networkBalanceInUSD=e?lXe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;mn.pushTransactionStack({});const e=t.receiverAddress,n=br.state.address,r=Mt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Mt.sendTransaction({chainNamespace:Oe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Os.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Bf("eip155")===g0.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Sr.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=le.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=Mt._getClient())==null||a.updateBalance("eip155"),Sr.resetSend()},async sendERC20Token(t){mn.pushTransactionStack({onSuccess(){mn.replace("Account")}});const e=Mt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(br.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Xt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Mt.writeContract({fromAddress:br.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:fXe.getERC20Abi(n),chainNamespace:Oe.CHAIN.EVM}),Sr.resetSend()}},async sendSolanaToken(){var t;if(!Sr.state.sendTokenAmount||!Sr.state.receiverAddress)throw new Error("An amount and receiver address are required");mn.pushTransactionStack({onSuccess(){mn.replace("Account")}}),await Mt.sendTransaction({chainNamespace:"solana",to:Sr.state.receiverAddress,value:Sr.state.sendTokenAmount}),(t=Mt._getClient())==null||t.updateBalance("solana"),Sr.resetSend()},resetSend(){Pr.token=void 0,Pr.sendTokenAmount=void 0,Pr.receiverAddress=void 0,Pr.receiverProfileImageUrl=void 0,Pr.receiverProfileName=void 0,Pr.loading=!1,Pr.tokenBalances=[]}},Sr=Ql(LXe),SM={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Ux={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},et=Cs({chains:UYe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),$Xe={state:et,subscribe(t){return ya(et,()=>{t(et)})},subscribeKey(t,e){return Ca(et,t,e)},subscribeChainProp(t,e,n){let r;return ya(et.chains,()=>{var i;const s=n||et.activeChain;if(s){const o=(i=et.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Tt.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=Cn.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(et.noAdapters=!0),et.noAdapters||(et.activeChain=a==null?void 0:a.namespace,et.activeCaipNetwork=i,le.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),et.activeChain&&yv.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=Tt.getPreferredAccountTypes()||{},f={...Cn.state.defaultAccountTypes,...h};le.state.chains.set(u,{namespace:u,networkState:Cs({...Ux,caipNetwork:d==null?void 0:d[0]}),accountState:Cs({...SM,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),le.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(et.activeChain===t){const r=Array.from(et.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&le.setActiveCaipNetwork(s)}}et.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");et.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Ux,caipNetwork:r[0]},accountState:SM,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),le.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=et.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),et.chains.set(t.chainNamespace,{...e,caipNetworks:r}),le.setRequestedCaipNetworks(r,t.chainNamespace),Lt.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=et.chains.get(t);if(n){const o=((r=et.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&le.setActiveCaipNetwork(n.caipNetworks[0]),et.chains.set(t,{...n,caipNetworks:a}),le.setRequestedCaipNetworks(a||[],t),a.length===0&&Lt.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=et.chains.get(t);n&&(n.networkState={...n.networkState||Ux,...e},et.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=et.chains.get(t);if(r){const s={...r.accountState||SM,...e};et.chains.set(t,{...r,accountState:s}),(et.chains.size===1||et.activeChain===t)&&(e.caipAddress&&(et.activeCaipAddress=e.caipAddress),br.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=et.chains.get(t);if(n){const r={...n.networkState||Ux,...e};et.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){le.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;et.activeChain=t;const e=t?et.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(et.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,et.activeCaipNetwork=n,le.setChainNetworkData(t,{caipNetwork:n}),Tt.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),yv.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;et.activeChain!==t.chainNamespace&&le.setIsSwitchingNamespace(!0);const e=et.chains.get(t.chainNamespace);et.activeChain=t.chainNamespace,et.activeCaipNetwork=t,le.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?et.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:et.activeCaipAddress=void 0,le.setAccountProp("caipAddress",et.activeCaipAddress,t.chainNamespace),e&&br.replaceState(e.accountState),Sr.resetSend(),yv.set({activeChain:et.activeChain,selectedNetworkId:(i=et.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Tt.setActiveCaipNetworkId(t.caipNetworkId),!le.checkIfSupportedNetwork(t.chainNamespace)&&Cn.state.enableNetworkSwitch&&!Cn.state.allowUnsupportedChain&&!Mt.state.wcBasic&&le.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=et.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==le.state.activeChain,n=(s=le.getNetworkData(t))==null?void 0:s.caipNetwork,r=le.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await le.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=le.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=le.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=et.activeCaipNetwork)==null?void 0:a.id)})),s=le.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&os.close()}catch{mn.goBack()}Os.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||et.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=et.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||et.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=et.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=et.activeChain;if(e&&(n=e),!n)return;const r=(s=et.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=et.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=et.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Xt.sortRequestedNetworks(n,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const t=[];return et.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=le.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){le.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=le.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Lt.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return et.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=le.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=et.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:et.activeCaipNetwork},getActiveCaipAddress(){return et.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=et.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=le.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());le.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||et.activeCaipNetwork,r=le.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!et.activeChain)return!0;const e=le.getRequestedCaipNetworks(et.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){le.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=cXe.caipNetworkIdToNumber((r=et.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=et.activeChain;if(!e||!t)return!1;const n=le.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){os.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=et.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ua.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){le.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=Cn.state.defaultAccountTypes[e],r=le.getAccountProp("preferredAccountType",e);et.activeCaipAddress=void 0,le.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Lt.removeConnectorId(e)},setIsSwitchingNamespace(t){et.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(et.chains.forEach(s=>{Oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=et.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=le.state.chains.get(t))==null?void 0:e.accountState:br.state},getNetworkData(t){var n;const e=t||et.activeChain;if(e)return(n=le.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=le.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Lt.state.filterByNamespace;return(t?[et.chains.get(t)]:Array.from(et.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?le.getRequestedCaipNetworks(t):le.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){et.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return et.lastConnectedSIWECaipNetwork}},le=Ql($Xe),FXe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Fae=Xt.getBlockchainApiUrl(),Ma=Cs({clientId:null,api:new dN({baseUrl:Fae,clientId:null}),supportedChains:{http:[],ws:[]}}),dn={state:Ma,async get(t){const{st:e,sv:n}=dn.getSdkProperties(),r=Cn.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ma.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Cn.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ma.supportedChains.http.length||await dn.getSupportedNetworks()}catch{return!1}return Ma.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await dn.get({path:"v1/supported-chains"});return Ma.supportedChains=t,t}catch{return Ma.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await dn.isNetworkSupported(e))return{avatar:"",name:""};const r=Tt.getIdentityFromCacheForAddress(t);if(r)return r;const s=await dn.get({path:`/v1/identity/${t}`,params:{sender:le.state.activeCaipAddress?Xt.getPlainAddress(le.state.activeCaipAddress):void 0}});return Tt.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){var o;return await dn.isNetworkSupported((o=le.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?dn.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await dn.isNetworkSupported((o=le.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?dn.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await dn.isNetworkSupported((n=le.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dn.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await dn.isNetworkSupported((n=le.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ma.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Cn.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await dn.isNetworkSupported((r=le.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?dn.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=dn.getSdkProperties();if(!await dn.isNetworkSupported((s=le.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return dn.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await dn.isNetworkSupported((o=le.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ma.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ua.CONVERT_SLIPPAGE_TOLERANCE},projectId:Cn.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=dn.getSdkProperties();if(!await dn.isNetworkSupported((o=le.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return dn.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=dn.getSdkProperties();if(!await dn.isNetworkSupported((l=le.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Ng.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Tt.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await dn.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Tt.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await dn.isNetworkSupported((n=le.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dn.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await dn.isNetworkSupported((n=le.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dn.get({path:`/v1/profile/reverse/${t}`,params:{sender:br.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await dn.isNetworkSupported((n=le.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dn.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await dn.isNetworkSupported((i=le.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ma.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await dn.isNetworkSupported((a=le.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ma.api.post({path:"/v1/generators/onrampurl",params:{projectId:Cn.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await dn.isNetworkSupported((e=le.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await dn.get({path:"/v1/onramp/options"})}catch{return FXe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await dn.isNetworkSupported((s=le.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ma.api.post({path:"/v1/onramp/quote",params:{projectId:Cn.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await dn.isNetworkSupported((n=le.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dn.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await dn.isNetworkSupported((s=le.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ma.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Cn.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ma.clientId=t,Ma.api=new dN({baseUrl:Fae,clientId:t})}},IM={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Im(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},hF={async getMyTokensWithBalance(t){const e=br.state.address,n=le.state.activeCaipNetwork,r=Lt.getConnectorId("eip155")===Oe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=Tt.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===Oe.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await dn.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=IM.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Mt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Mt.walletGetAssets({account:t,chainFilter:[s]});if(!IM.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>IM.createBalance(l,e.caipNetworkId));return Tt.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},sd=Cs({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),jXe={state:sd,replaceState(t){t&&Object.assign(sd,K0(t))},subscribe(t){return le.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return le.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){le.setAccountProp("status",t,e)},getCaipAddress(t){return le.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Xt.getPlainAddress(t):void 0;e===le.state.activeChain&&(le.state.activeCaipAddress=t),le.setAccountProp("caipAddress",t,e),le.setAccountProp("address",n,e)},setBalance(t,e,n){le.setAccountProp("balance",t,n),le.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){le.setAccountProp("profileName",t,e)},setProfileImage(t,e){le.setAccountProp("profileImage",t,e)},setUser(t,e){le.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){le.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){le.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){le.setAccountProp("currentTab",t,le.state.activeChain)},setTokenBalance(t,e){t&&le.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){le.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=le.getAccountProp("addressLabels",n)||new Map;r.set(t,e),le.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=le.getAccountProp("addressLabels",e)||new Map;n.delete(t),le.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){le.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){le.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&le.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){le.setAccountProp("socialWindow",t?K0(t):void 0,e)},setFarcasterUrl(t,e){le.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;sd.balanceLoading=!0;const e=(i=le.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=le.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=le.state.activeCaipAddress,s=r?Xt.getPlainAddress(r):void 0;if(sd.lastRetry&&!Xt.isAllowedRetry(sd.lastRetry,30*ua.ONE_SEC_MS))return sd.balanceLoading=!1,[];try{if(s&&e&&n){const a=await hF.getMyTokensWithBalance();return br.setTokenBalance(a,n),sd.lastRetry=void 0,sd.balanceLoading=!1,a}}catch(a){sd.lastRetry=Date.now(),t==null||t(a),Ng.showError("Token Balance Unavailable")}finally{sd.balanceLoading=!1}return[]},resetAccount(t){le.resetAccount(t)}},br=Ql(jXe),WXe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=le.state.activeCaipNetwork,r=mn.state.data;if(t.id===(n==null?void 0:n.id))return;const i=br.getCaipAddress(le.state.activeChain),o=t.chainNamespace!==le.state.activeChain,a=br.getCaipAddress(t.chainNamespace),l=Lt.getConnectorId(le.state.activeChain)===Oe.CONNECTOR_ID.AUTH,u=Oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?mn.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?mn.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):mn.push("SwitchNetwork",{...r,network:t})}},Ba=Cs({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),zXe={state:Ba,subscribe(t){return ya(Ba,()=>t(Ba))},subscribeKey(t,e){return Ca(Ba,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=le.state.activeChain,r=e&&e!==n,s=(i=le.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(Mt.state.wcBasic?sn.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await sn.prefetch(),Lt.setFilterByNamespace(t==null?void 0:t.namespace),os.setLoading(!0,e),e&&r){const a=((o=le.getNetworkData(e))==null?void 0:o.caipNetwork)||le.getRequestedCaipNetworks(e)[0];a&&WXe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=le.state.noAdapters;Cn.state.manualWCControl||a&&!s?Xt.isMobile()?mn.reset("AllWallets"):mn.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?mn.reset(t.view,t.data):s?mn.reset("Account"):mn.reset("Connect")}Ba.open=!0,yv.set({open:!0}),Os.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=Cn.state.enableEmbedded,e=!!le.state.activeCaipAddress;Ba.open&&Os.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ba.open=!1,mn.reset("Connect"),os.clearLoading(),t?e?mn.replace("Account"):mn.push("Connect"):yv.set({open:!1}),Mt.resetUri()},setLoading(t,e){e&&Ba.loadingNamespaceMap.set(e,t),Ba.loading=t,yv.set({loading:t})},clearLoading(){Ba.loadingNamespaceMap.clear(),Ba.loading=!1},shake(){Ba.shake||(Ba.shake=!0,setTimeout(()=>{Ba.shake=!1},500))}},os=Ql(zXe),sV=2147483648,HXe={convertEVMChainIdToCoinType(t){if(t>=sV)throw new Error("Invalid chainId");return(sV|t)>>>0}},ul=Cs({suggestions:[],loading:!1}),GXe={state:ul,subscribe(t){return ya(ul,()=>t(ul))},subscribeKey(t,e){return Ca(ul,t,e)},async resolveName(t){var e,n;try{return await dn.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await dn.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ul.loading=!0,ul.suggestions=[];const e=await dn.getEnsNameSuggestions(t);return ul.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ul.suggestions}catch(e){const n=DT.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ul.loading=!1}},async getNamesForAddress(t){try{if(!le.state.activeCaipNetwork)return[];const n=Tt.getEnsFromCacheForAddress(t);if(n)return n;const r=await dn.reverseLookupEnsName({address:t});return Tt.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=DT.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=le.state.activeCaipNetwork,n=br.state.address,r=Lt.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");ul.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});mn.pushTransactionStack({onCancel(){mn.replace("RegisterAccountName")}});const i=await Mt.signMessage(s);ul.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=HXe.convertEVMChainIdToCoinType(Number(o));await dn.registerEnsName({coinType:a,address:n,signature:i,message:s}),br.setProfileName(t,e.chainNamespace),mn.replace("RegisterAccountNameSuccess")}catch(s){const i=DT.parseEnsApiError(s,`Error registering name ${t}`);throw mn.replace("RegisterAccountName"),new Error(i)}finally{ul.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},DT=Ql(GXe);let zm=null;const Mp={getSIWX(){return Cn.state.siwx},async initializeIfEnabled(){var i;const t=Cn.state.siwx,e=le.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(le.checkIfSupportedNetwork(n))try{if(zm&&await zm,(await t.getSessions(`${n}:${r}`,s)).length)return;await os.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Os.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Mt._getClient())==null?void 0:i.disconnect().catch(console.error)),mn.reset("Connect"),Ng.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Cn.state.siwx,e=Xt.getPlainAddress(le.getActiveCaipAddress()),n=le.getActiveCaipNetwork(),r=Mt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Lt.getConnectorId(n.chainNamespace)===Oe.CONNECTOR_ID.AUTH&&mn.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),le.setLastConnectedSIWECaipNetwork(n),os.close(),Os.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!os.state.open||mn.state.view==="ApproveTransaction")&&await os.open({view:"SIWXSignMessage"}),Ng.showError("Error signing message"),Os.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=le.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,Xt.getPlainAddress(le.getActiveCaipAddress())||""));s&&s.length>0?await le.switchActiveNetwork(r):await Mt.disconnect()}else await Mt.disconnect()}else os.close();os.close(),Os.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=le.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Xt.getPlainAddress(le.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(t){const e=Cn.state.siwx;let n=t==null?void 0:t.address;if(!n){const s=le.getActiveCaipAddress();n=Xt.getPlainAddress(s)}let r=t==null?void 0:t.caipNetworkId;if(!r){const s=le.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=mn.state.view==="ApproveTransaction",r=mn.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Mp.getSIWX();if(!i||!s.includes(Oe.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=le.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Mp.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(zm)return zm;const r=Mp.getSIWX();return r?(zm=r.addSession({data:t,message:e,signature:n}).finally(()=>{zm=null}),zm):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Mp.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=le.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Ng.showLoading("Authenticating...",{autoClose:!1}),br.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Os.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Mp.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Os.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Mp.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Ng.hide()}}return!0},getSIWXEventProperties(){var e;const t=le.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=le.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Bf(t)===g0.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},fl={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:Oe.CHAIN.EVM},Ef={ConnectorExplorerIds:{[Oe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Oe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Oe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[Oe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[Oe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[fl.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[fl.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[fl.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[fl.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[fl.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[fl.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[fl.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[fl.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[fl.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[fl.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[fl.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Oe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Oe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Oe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Oe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Oe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Oe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Oe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Oe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Oe.CONNECTOR_ID.COINBASE]:"Coinbase",[Oe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Oe.CONNECTOR_ID.LEDGER]:"Ledger",[Oe.CONNECTOR_ID.SAFE]:"Safe"}},jc={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${fl.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=le.state.activeChain;return Oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Lt.getConnectorId(e)===Oe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}};new AbortController;const qXe={ALERT_ERRORS:{PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured. Please update your project configurations on dashboard.reown.com."}}},VXe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},iV={filterOutDuplicatesByRDNS(t){const e=Cn.state.enableEIP6963?Lt.state.connectors:[],n=Tt.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Xt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Lt.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Tt.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Lt.state,{featuredWalletIds:n}=Cn.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=Cn.state.features)==null?void 0:c.connectMethodsOrder),r=e||Lt.state.connectors;if(n)return n;const{injected:s,announced:i}=MT.getConnectorsByType(r,sn.state.recommended,sn.state.featured),o=s.filter(MT.showConnector),a=i.filter(MT.showConnector);return o.length||a.length?["wallet","email","social"]:VXe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&sn.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&sn.state.excludedWallets.some(r=>jc.isLowerCaseMatch(r.name,t.name));return e||n}},MT={getConnectorsByType(t,e,n){const{customWallets:r}=Cn.state,s=Tt.getRecentWallets(),i=iV.filterOutDuplicateWallets(e),o=iV.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&sn.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&sn.state.excludedWallets.some(i=>jc.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Xt.isMobile()||Xt.isMobile()&&!e&&!Mt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(le.state.chains.values()).some(n=>Lt.getConnectorId(n.namespace)===Oe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=Cn.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:Cn.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),f=new Set(h.map(m=>m.type)),p=c.filter(m=>f.has(m)).map(m=>({type:m,isEnabled:!0})),g=h.filter(({type:m})=>!p.some(({type:w})=>w===m));return Array.from(new Set([...p,...g].map(({type:m})=>m)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Xt.isMobile())return{accounts:[],chainId:void 0};if(t.id===Oe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Dl`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Dl`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Dl`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const BT={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([BT.getAddresses(t),BT.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:BT.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Ef.NetworkImageIds[e.id]]}]})}},hb={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function hN(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const kk=hN({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),VL=hN({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),KXe=hN({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});hN({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});hN({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const YXe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Xg={getMethodsByChainNamespace(t){return YXe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case kk.caipNetworkId:u.chains.push(kk.deprecatedCaipNetworkId);break;case VL.caipNetworkId:u.chains.push(VL.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await DT.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Xg.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Xg.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>Xt.isCaipAddress(d)).map(d=>Ig.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Ig.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class QXe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case Oe.CHAIN.EVM:await this.syncEVMConnections(e);break;case Oe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case Oe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===Oe.CONNECTOR_ID.WALLET_CONNECT){const c=Xg.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await MT.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==Oe.CONNECTOR_ID.AUTH&&a.id!==Oe.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===Oe.CONNECTOR_ID.WALLET_CONNECT){const c=Xg.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,m,y;if(a.id===Oe.CONNECTOR_ID.WALLET_CONNECT){const w=Xg.getWalletConnectAccounts(r,this.namespace);w.length>0&&i({connectorId:a.id,accounts:w.map(C=>({address:C.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(w=>Xt.createAccount(Oe.CHAIN.BITCOIN,w.address,w.purpose||"payment",w.publicKey,w.path));if(u&&u.length>1&&(u=[{namespace:Oe.CHAIN.BITCOIN,publicKey:((h=u[hb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[hb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[hb.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:Oe.CHAIN.BITCOIN,publicKey:((g=u[hb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((m=u[hb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.path)??"",address:((y=u[hb.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(w=>w.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(w=>({address:w.address,type:w.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>jc.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>jc.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>jc.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>jc.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>jc.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class jae{constructor({provider:e,namespace:n}){this.id=Oe.CONNECTOR_ID.WALLET_CONNECT,this.name=Ef.ConnectorNamesMap[Oe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Ef.ConnectorImageIds[Oe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=le.getCaipNetworks.bind(le),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=Cn.state.universalProviderConfigOverride,s=Xg.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Mp.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:JXe})}}const JXe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],ZXe=[Oe.CONNECTOR_ID.AUTH,Oe.CONNECTOR_ID.WALLET_CONNECT];class XXe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>le.getCaipNetworks(n),this.getConnectorId=n=>Lt.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new QXe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:Oe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:Oe.CONNECTOR_ID.AUTH,type:"AUTH",name:Oe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ef.ConnectorImageIds[Oe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!jc.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){br.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Bf(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof jae);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=Xt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=Xt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=Xt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&jc.isLowerCaseMatch(this.getConnectorId(Oe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=Xt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),jc.isLowerCaseMatch(this.getConnectorId(Oe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?BT.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),jc.isLowerCaseMatch(this.getConnectorId(Oe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(ZXe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}class tO extends Error{constructor(e,n){super(e),this.error=n}}class eet extends tO{constructor(){super(...arguments),this.name="WalletAccountError"}}class tet extends tO{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class oV extends tO{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class net extends tO{constructor(){super(...arguments),this.name="WalletSignMessageError"}}function m0(t){return"version"in t}const Wae="solana:signAndSendTransaction",ret="solana:signMessage",KL="solana:signTransaction",zae="standard:connect",set="standard:disconnect",Hae="standard:events";function iet(t){return zae in t.features&&Hae in t.features&&(Wae in t.features||KL in t.features)}function oet(t){if(typeof t=="string")return`solana:${t}`}class nO{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,n){this.listeners[e].push(n)}removeListener(e,n){this.listeners[e]=this.listeners[e].filter(r=>r!==n)}emit(e,n){this.listeners[e].forEach(r=>r(n))}}class aet extends nO{constructor(e){super(),this.id=Oe.CONNECTOR_ID.AUTH,this.name=Oe.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=Oe.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){var n,r;const e=(r=(n=le.state.chains.get(Oe.CHAIN.SOLANA))==null?void 0:n.accountState)==null?void 0:r.address;return e?new ot(e):void 0}get chains(){const e=this.provider.getAvailableChainIds();return this.requestedChains.filter(n=>e.includes(n.caipNetworkId))}async connect(e={}){var s;const n=e.chainId||((s=this.getActiveChain())==null?void 0:s.id),r=Bf("solana");if(await Mp.authConnectorAuthenticate({authConnector:this.provider,chainId:oet(n),socialUri:e.socialUri,preferredAccountType:r,chainNamespace:Oe.CHAIN.SOLANA}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");const n=await this.provider.request({method:"solana_signMessage",params:{message:Qa.encode(e),pubkey:this.publicKey.toBase58()},chainNamespace:this.chain});return Qa.decode(n.signature)}async signTransaction(e){const n=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)},chainNamespace:this.chain}),r=Qa.decode(n.transaction);return m0(e)?mm.deserialize(r):Xa.from(r)}async signAndSendTransaction(e,n){const r=this.serializeTransaction(e);return(await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:r,options:n},chainNamespace:this.chain})).signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return(await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map(r=>this.serializeTransaction(r))},chainNamespace:this.chain})).transactions.map((r,s)=>{const i=e[s];if(!i)throw new Error("Invalid solana_signAllTransactions response");const o=Qa.decode(r);return m0(i)?mm.deserialize(o):Xa.from(o)})}async request(e){return this.provider.request({method:e.method,params:e.params,chainNamespace:this.chain})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return Qa.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}}class cet extends nO{constructor(e){super(),this.name="Coinbase Wallet",this.id=Ef.ConnectorExplorerIds[Oe.CONNECTOR_ID.COINBASE_SDK],this.explorerId=Ef.ConnectorExplorerIds[Oe.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=Oe.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter(e=>e.id===kk.id)}get publicKey(){return this.coinbase.publicKey}get imageId(){return Ef.ConnectorImageIds[Oe.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();const e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),e}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){return(await this.coinbase.signMessage(e)).signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,n){return(await this.coinbase.signAndSendTransaction(e,n)).signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){const e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){const n=this.coinbase.publicKey;if(e&&!n)throw new Error("Not connected");return n}}class aV extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}}class cV extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}}var uet=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},YL;class lV extends jae{constructor({provider:e,chains:n,getActiveChain:r}){super({caipNetworks:n,namespace:"solana",provider:e}),this.eventEmitter=new nO,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),YL.set(this,"1.0.0"),this.getActiveChain=r}get session(){return this.provider.session}get chains(){return this.sessionChains.map(e=>{let n=e;return n===ou.CHAIN_IDS.Deprecated_Mainnet?n=ou.CHAIN_IDS.Mainnet:n===ou.CHAIN_IDS.Deprecated_Devnet&&(n=ou.CHAIN_IDS.Devnet),this.caipNetworks.find(r=>r.caipNetworkId===n)}).filter(Boolean)}get icon(){return Rl.state.connectorImages[this.id]}get version(){return uet(this,YL,"f")}get publicKey(){const e=this.getAccount(!1);if(e)return new ot(e.publicKey)}async connect(){await super.connectWalletConnect();const e=this.getAccount(!0);return this.emit("connect",new ot(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");const n=await this.internalRequest("solana_signMessage",{message:Qa.encode(e),pubkey:this.getAccount(!0).address});return Qa.decode(n.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");const n=this.serializeTransaction(e),r=await this.internalRequest("solana_signTransaction",{transaction:n,pubkey:this.getAccount(!0).address,...this.getRawRPCParams(e)});if("signature"in r){const i=Qa.decode(r.signature);return e.addSignature(new ot(this.getAccount(!0).publicKey),Buffer.from(i)),e}const s=Buffer.from(r.transaction,"base64");return m0(e)?mm.deserialize(new Uint8Array(s)):Xa.from(s)}async signAndSendTransaction(e,n){this.checkIfMethodIsSupported("solana_signAndSendTransaction");const r=this.serializeTransaction(e),s=await this.internalRequest("solana_signAndSendTransaction",{transaction:r,pubkey:this.getAccount(!0).address,sendOptions:n});return this.emit("pendingTransaction",void 0),s.signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e),i=await n.sendRawTransaction(s.serialize(),r);return this.emit("pendingTransaction",void 0),i}async signAllTransactions(e){try{return this.checkIfMethodIsSupported("solana_signAllTransactions"),(await this.internalRequest("solana_signAllTransactions",{transactions:e.map(r=>this.serializeTransaction(r))})).transactions.map((r,s)=>{const i=e[s];if(!i)throw new Error("Invalid transactions response");const o=Buffer.from(r,"base64");return m0(i)?mm.deserialize(new Uint8Array(o)):(this.emit("pendingTransaction",void 0),Xa.from(o))})}catch(n){if(n instanceof cV){const r=[];for(const s of e)r.push(await this.signTransaction(s));return r}throw n}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){var n,r;const e=((r=(n=this.session)==null?void 0:n.namespaces.solana)==null?void 0:r.accounts)||[];return Promise.resolve(e.map(s=>({namespace:this.chain,address:Ig.parseCaipAddress(s).address,type:"eoa"})))}internalRequest(e,n){var i;const r=this.chains.find(o=>{var a;return((a=this.getActiveChain())==null?void 0:a.id)===o.id});let s=r==null?void 0:r.caipNetworkId;switch(s){case ou.CHAIN_IDS.Mainnet:this.sessionChains.includes(ou.CHAIN_IDS.Mainnet)||(s=ou.CHAIN_IDS.Deprecated_Mainnet);break;case ou.CHAIN_IDS.Devnet:this.sessionChains.includes(ou.CHAIN_IDS.Devnet)||(s=ou.CHAIN_IDS.Deprecated_Devnet);break}return(i=this.provider)==null?void 0:i.request({method:e,params:n},s)}get sessionChains(){var e;return Xg.getChainsFromNamespaces((e=this.session)==null?void 0:e.namespaces)}serializeTransaction(e){return Buffer.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){var s,i;const n=(i=(s=this.session)==null?void 0:s.namespaces.solana)==null?void 0:i.accounts[0];if(!n){if(e)throw new Error("Account not found");return}const r=n.split(":")[2];if(!r){if(e)throw new Error("Address not found");return}return{address:r,publicKey:Qa.decode(r)}}getRawRPCParams(e){var n;return m0(e)?{}:{feePayer:((n=e.feePayer)==null?void 0:n.toBase58())??"",instructions:e.instructions.map(r=>({data:Qa.encode(new Uint8Array(r.data)),keys:r.keys.map(s=>({isWritable:s.isWritable,isSigner:s.isSigner,pubkey:s.pubkey.toBase58()})),programId:r.programId.toBase58()})),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){var n,r;if(!((r=(n=this.session)==null?void 0:n.namespaces.solana)!=null&&r.methods.includes(e)))throw new cV(e)}}YL=new WeakMap;const Hf=new ot("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new ot("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const fF=new ot("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new ot("So11111111111111111111111111111111111111112");new ot("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const pF=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var fN={};Object.defineProperty(fN,"__esModule",{value:!0});function det(t){{const e=Buffer.from(t);e.reverse();const n=e.toString("hex");return n.length===0?BigInt(0):BigInt(`0x${n}`)}}var het=fN.toBigIntLE=det;function fet(t){{const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}fN.toBigIntBE=fet;function pet(t,e){{const n=t.toString(16),r=Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var get=fN.toBufferLE=pet;function met(t,e){{const n=t.toString(16);return Buffer.from(n.padStart(e*2,"0").slice(0,e*2),"hex")}}fN.toBufferBE=met;const yet=t=>e=>{const n=Yr(t,e),{encode:r,decode:s}=pF(n),i=n;return i.decode=(o,a)=>{const c=s(o,a);return het(Buffer.from(c))},i.encode=(o,a,c)=>{const l=get(o,t);return r(l,a,c)},i},Y_=yet(8),Gae=t=>{const e=Hn(t),{encode:n,decode:r}=pF(e),s=e;return s.decode=(i,o)=>!!r(i,o),s.encode=(i,o,a)=>{const c=Number(i);return n(c,o,a)},s},so=t=>{const e=Yr(32,t),{encode:n,decode:r}=pF(e),s=e;return s.decode=(i,o)=>{const a=r(i,o);return new ot(a)},s.encode=(i,o,a)=>{const c=i.toBuffer();return n(c,o,a)},s};class YC extends Error{constructor(e){super(e)}}class Pk extends YC{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class wet extends YC{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class qae extends YC{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class Q_ extends YC{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class bet extends YC{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class vet extends YC{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var QL;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",t[t.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",t[t.PausableExtension=44]="PausableExtension"})(QL||(QL={}));var Ok;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account"})(Ok||(Ok={}));const Vae=1,Eet=At([Hn("m"),Hn("n"),Gae("isInitialized"),so("signer1"),so("signer2"),so("signer3"),so("signer4"),so("signer5"),so("signer6"),so("signer7"),so("signer8"),so("signer9"),so("signer10"),so("signer11")]),Kae=Eet.span;var Dk;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen"})(Dk||(Dk={}));const Yae=At([so("mint"),so("owner"),Y_("amount"),Ot("delegateOption"),so("delegate"),Hn("state"),Ot("isNativeOption"),Y_("isNative"),Y_("delegatedAmount"),Ot("closeAuthorityOption"),so("closeAuthority")]),jp=Yae.span;async function uV(t,e,n,r=Hf){const s=await t.getAccountInfo(e,n);return Cet(e,s,r)}function Cet(t,e,n=Hf){if(!e)throw new Pk;if(!e.owner.equals(n))throw new qae;if(e.data.length<jp)throw new Q_;const r=Yae.decode(e.data.slice(0,jp));let s=Buffer.alloc(0);if(e.data.length>jp){if(e.data.length===Kae)throw new Q_;if(e.data[jp]!=Ok.Account)throw new wet;s=e.data.slice(jp+Vae)}return{address:t,mint:r.mint,owner:r.owner,amount:r.amount,delegate:r.delegateOption?r.delegate:null,delegatedAmount:r.delegatedAmount,isInitialized:r.state!==Dk.Uninitialized,isFrozen:r.state===Dk.Frozen,isNative:!!r.isNativeOption,rentExemptReserve:r.isNativeOption?r.isNative:null,closeAuthority:r.closeAuthorityOption?r.closeAuthority:null,tlvData:s}}function _et(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof ot?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const Qae=At([Ot("mintAuthorityOption"),so("mintAuthority"),Y_("supply"),Hn("decimals"),Gae("isInitialized"),Ot("freezeAuthorityOption"),so("freezeAuthority")]),NM=Qae.span;async function Aet(t,e,n,r=Hf){const s=await t.getAccountInfo(e,n);return Iet(e,s,r)}function Iet(t,e,n=Hf){if(!e)throw new Pk;if(!e.owner.equals(n))throw new qae;if(e.data.length<NM)throw new Q_;const r=Qae.decode(e.data.slice(0,NM));let s=Buffer.alloc(0);if(e.data.length>NM){if(e.data.length<=jp)throw new Q_;if(e.data.length===Kae)throw new Q_;if(e.data[jp]!=Ok.Mint)throw new bet;s=e.data.slice(jp+Vae)}return{address:t,mintAuthority:r.mintAuthorityOption?r.mintAuthority:null,supply:r.supply,decimals:r.decimals,isInitialized:r.isInitialized,freezeAuthority:r.freezeAuthorityOption?r.freezeAuthority:null,tlvData:s}}function dV(t,e,n=!1,r=Hf,s=fF){if(!n&&!ot.isOnCurve(e.toBuffer()))throw new vet;const[i]=ot.findProgramAddressSync([e.toBuffer(),r.toBuffer(),t.toBuffer()],s);return i}function Net(t,e,n,r,s=Hf,i=fF){return xet(t,e,n,r,Buffer.alloc(0),s,i)}function xet(t,e,n,r,s,i=Hf,o=fF){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:sC.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new io({keys:a,programId:o,data:s})}const hV=At([Hn("instruction"),Y_("amount")]);function Tet(t,e,n,r,s=[],i=Hf){const o=_et([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,s),a=Buffer.alloc(hV.span);return hV.encode({instruction:QL.Transfer,amount:BigInt(r)},a),new io({keys:o,programId:i,data:a})}async function Ret({provider:t,to:e,amount:n,tokenMint:r,connection:s}){if(!t.publicKey)throw new Error("No public key found");if(n<=0)throw new Error("Amount must be greater than 0");try{const i=t.publicKey,o=new ot(e),a=new ot(r),l=(await Aet(s,a)).decimals;if(l<0)throw new Error("Invalid token decimals");const u=Math.floor(n*10**l),d=dV(a,i),h=dV(a,o);try{if((await uV(s,d)).amount<BigInt(u))throw new Error("Insufficient token balance")}catch(w){throw w instanceof Pk?new Error("Sender does not have a token account for this mint"):w}let f=!1;try{await uV(s,h)}catch(w){if(w instanceof Pk)f=!0;else throw w}const p=[],g=f?_M.UNIT_LIMIT_WITH_ATA_CREATION:_M.UNIT_LIMIT_TRANSFER_ONLY;p.push(MS.setComputeUnitPrice({microLamports:_M.UNIT_PRICE_MICRO_LAMPORTS}),MS.setComputeUnitLimit({units:g})),f&&p.push(Net(i,h,o,a)),p.push(Tet(d,h,i,u,[],Hf));const{blockhash:m,lastValidBlockHeight:y}=await s.getLatestBlockhash();return new Xa({feePayer:i,blockhash:m,lastValidBlockHeight:y}).add(...p)}catch(i){throw new Error(`Failed to create SPL token transaction: ${i instanceof Error?i.message:"Unknown error"}`)}}const fV={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT:500};async function pV({provider:t,to:e,value:n,connection:r}){if(!t.publicKey)throw Error("No public key found");const s=new ot(e),i=Math.floor(n*aXe),{blockhash:o,lastValidBlockHeight:a}=await r.getLatestBlockhash(),c=[MS.setComputeUnitPrice({microLamports:fV.UNIT_PRICE_MICRO_LAMPORTS}),MS.setComputeUnitLimit({units:fV.UNIT_LIMIT}),sC.transfer({fromPubkey:t.publicKey,toPubkey:s,lamports:i})];return new Xa({feePayer:t.publicKey,blockhash:o,lastValidBlockHeight:a}).add(...c)}var ket=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Pet=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},UT;let W1;const rO=new Set;function Oet(t){J_=void 0,rO.add(t)}function Det(t){J_=void 0,rO.delete(t)}const qb={};function Met(){if(W1||(W1=Object.freeze({register:gV,get:Bet,on:Uet}),typeof window>"u"))return W1;const t=Object.freeze({register:gV});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new Let(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return W1}function gV(...t){var e;return t=t.filter(n=>!rO.has(n)),t.length?(t.forEach(n=>Oet(n)),(e=qb.register)==null||e.forEach(n=>mV(()=>n(...t))),function(){var r;t.forEach(s=>Det(s)),(r=qb.unregister)==null||r.forEach(s=>mV(()=>s(...t)))}):()=>{}}let J_;function Bet(){return J_||(J_=[...rO]),J_}function Uet(t,e){var n;return(n=qb[t])!=null&&n.push(e)||(qb[t]=[e]),function(){var s;qb[t]=(s=qb[t])==null?void 0:s.filter(i=>e!==i)}}function mV(t){try{t()}catch(e){console.error(e)}}class Let extends Event{get detail(){return ket(this,UT,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),UT.set(this,void 0),Pet(this,UT,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}UT=new WeakMap;function $et(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const yV={"solana:mainnet":kk,"solana:testnet":KXe,"solana:devnet":VL};class Fet extends nO{constructor({wallet:e,getActiveChain:n,requestedChains:r}){super(),this.chain=Oe.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=n,this.requestedChains=r,this.bindEvents()}get id(){const e=this.name;return Ef.ConnectorExplorerIds[e]||e}get name(){return this.wallet.name==="Trust"?"Trust Wallet":this.wallet.name}get type(){return"ANNOUNCED"}get explorerId(){return Ef.ConnectorExplorerIds[this.name]}get publicKey(){const e=this.getAccount(!1);if(e)return new ot(e.publicKey)}get imageUrl(){return this.wallet.icon}get chains(){return this.wallet.chains.map(e=>this.requestedChains.find(n=>{var r;return n.id===e||n.id===((r=yV[e])==null?void 0:r.id)})).filter(Boolean)}async connect(){await this.getWalletFeature(zae).connect();const n=this.getAccount(!0),r=new ot(n.publicKey);return this.emit("connect",r),n.address}async disconnect(){await this.getWalletFeature(set).disconnect(),this.emit("disconnect",void 0)}async signMessage(e){const n=this.getWalletFeature(ret),r=this.getAccount(!0),[s]=await n.signMessage({message:e,account:r});if(!s)throw new net("Empty result");return s.signature}async signTransaction(e){const n=this.getWalletFeature(KL),r=this.getAccount(!0),s=this.serializeTransaction(e),[i]=await n.signTransaction({account:r,transaction:new Uint8Array(s),chain:this.getActiveChainName()});if(!i)throw new oV("Empty result");return this.emit("pendingTransaction",void 0),m0(e)?mm.deserialize(i.signedTransaction):Xa.from(i.signedTransaction)}async signAndSendTransaction(e,n){const r=this.getWalletFeature(Wae),s=this.getAccount(!0),[i]=await r.signAndSendTransaction({account:s,transaction:new Uint8Array(this.serializeTransaction(e)),options:{...n,preflightCommitment:$et(n==null?void 0:n.preflightCommitment)},chain:this.getActiveChainName()});if(!i)throw new tet("Empty result");return this.emit("pendingTransaction",void 0),Qa.encode(i.signature)}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){const n=this.getWalletFeature(KL),r=this.getAccount(!0),s=this.getActiveChainName();return(await n.signTransaction(...e.map(o=>({transaction:new Uint8Array(this.serializeTransaction(o)),account:r,chain:s})))).map(({signedTransaction:o},a)=>{const c=e[a];if(!c)throw new oV("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),m0(c)?mm.deserialize(o):Xa.from(o)})}async request(e){return Promise.reject(new aV("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map(e=>({namespace:this.chain,address:e.address,type:"eoa"})))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){const n=this.wallet.accounts[0];if(e&&!n)throw new eet;return n}getWalletFeature(e){if(!(e in this.wallet.features))throw new aV(e);return this.wallet.features[e]}getActiveChainName(){const e=Object.entries(yV).find(([,n])=>{var r;return n.id===((r=this.getActiveChain())==null?void 0:r.id)});if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){this.getWalletFeature(Hae).on("change",n=>{if(n.accounts){const r=n.accounts[0];r&&this.emit("accountsChanged",new ot(r.publicKey))}})}}const{get:jet,on:wV}=Met();let vp=[];function Wet(t,e,n){const r=[wV("register",(...s)=>{vp=[...vp,...bV(s,t,e)],n(...vp)}),wV("unregister",(...s)=>{vp=vp.filter(i=>s.some(o=>o.name===i.wallet.name)),n(...vp)})];return vp=bV(jet(),t,e),n(...vp),()=>r.forEach(s=>s())}function bV(t,e,n){return t.filter(r=>r.name!=="WalletConnect"&&iet(r)).map(r=>new Fet({wallet:r,requestedChains:e,getActiveChain:n}))}const zet=[Oe.CONNECTOR_ID.AUTH,Oe.CONNECTOR_ID.WALLET_CONNECT];class Het extends XXe{constructor(e={}){super({adapterType:Oe.ADAPTER_TYPES.SOLANA,namespace:Oe.CHAIN.SOLANA}),this.balancePromises={},this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets,this.registerWalletStandard=e.registerWalletStandard}construct(e){var i,o;super.construct(e);const n=Tt.getActiveCaipNetworkId(),r=((i=e.networks)==null?void 0:i.find(a=>a.caipNetworkId===n))||((o=e.networks)==null?void 0:o[0]),s=r==null?void 0:r.rpcUrls.default.http[0];s&&lb.setConnection(new $1(s,this.connectionSettings))}setAuthProvider(e){this.addConnector(new aet({w3mFrameProvider:e,getActiveChain:()=>le.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(e,n){e.projectId||Bae.open(qXe.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const r=()=>n.getCaipNetwork(this.namespace);Xt.isClient()&&"coinbaseSolana"in window&&this.addConnector(new cet({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:r})),Wet(this.getCaipNetworks(),r,this.addConnector.bind(this))}async writeContract(){return Promise.resolve({hash:""})}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){const n=this.connectors.find(r=>r.id===e.id);return n?{accounts:await n.getAccounts()}:{accounts:[]}}async signMessage(e){const n=e.provider;if(!n)throw new Error("connectionControllerClient:signMessage - provider is undefined");const r=await n.signMessage(new TextEncoder().encode(e.message));return{signature:Qa.encode(r)}}async estimateGas(e){const n=lb.state.connection;if(!n||!e.provider)throw new Error("Connection is not set");const s=await(await pV({provider:e.provider,connection:n,to:"11111111111111111111111111111111",value:1})).getEstimatedFee(n);return{gas:BigInt(s||0)}}async sendTransaction(e){const n=lb.state.connection;if(!n||!e.provider)throw new Error("Connection is not set");const r=e.provider,s=e.tokenMint?await Ret({provider:r,connection:n,to:e.to,amount:Number(e.value),tokenMint:e.tokenMint}):await pV({provider:r,connection:n,to:e.to,value:Number.isNaN(Number(e.value))?0:Number(e.value)}),i=await r.sendTransaction(s,n);return await new Promise(o=>{const a=setInterval(async()=>{const c=await n.getSignatureStatus(i);c!=null&&c.value&&(clearInterval(a),o())},1e3)}),{hash:i}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){var l,u,d,h,f;const n=this.connectors.find(p=>p.id===e.id);if(!n)throw new Error("Provider not found");const r={...n,...e.id===Oe.CONNECTOR_ID.AUTH?{provider:n}:{}},s=e.rpcUrl||((u=(l=this.getCaipNetworks())==null?void 0:l.find(p=>p.id===e.chainId))==null?void 0:u.rpcUrls.default.http[0]);if(!s)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);const i=(d=this.connectionManager)==null?void 0:d.getConnection({address:e.address,connectorId:n.id,connections:this.connections,connectors:this.connectors});if(i!=null&&i.account)return this.emit("accountChanged",{address:i.account.address,chainId:(h=i.caipNetwork)==null?void 0:h.id,connector:r}),{id:n.id,address:i.account.address,chainId:e.chainId,provider:n,type:n.type};const o=await n.connect({chainId:e.chainId,socialUri:e.socialUri});lb.setConnection(new $1(s,this.connectionSettings)),this.emit("accountChanged",{address:o,chainId:e.chainId,connector:r});const a=n.id===Oe.CONNECTOR_ID.AUTH,c=(f=this.getCaipNetworks())==null?void 0:f.find(p=>p.id===e.chainId);return this.addConnection({connectorId:n.id,accounts:[{address:o}],caipNetwork:c,auth:a?{name:Tt.getConnectedSocialProvider(),username:Tt.getConnectedSocialUsername()}:void 0}),n.id!==Oe.CONNECTOR_ID.WALLET_CONNECT&&this.listenSolanaProviderEvents(n.id,n.provider),{id:n.id,address:o,chainId:e.chainId,provider:n,type:n.type}}async getBalance(e){var c,l,u,d;const n=e.address,r=(c=this.getCaipNetworks())==null?void 0:c.find(h=>h.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"SOL"});const s=new $1((d=(u=(l=r==null?void 0:r.rpcUrls)==null?void 0:l.default)==null?void 0:u.http)==null?void 0:d[0],this.connectionSettings),i=`${r==null?void 0:r.caipNetworkId}:${e.address}`,o=this.balancePromises[i];if(o)return o;const a=Tt.getNativeBalanceCacheForCaipAddress(i);return a?{balance:a.balance,symbol:a.symbol}:(this.balancePromises[i]=new Promise(async h=>{var f,p;try{const m=(await s.getBalance(new ot(n))/ou.LAMPORTS_PER_SOL).toString();if(Tt.updateNativeBalanceCache({caipAddress:i,balance:m,symbol:((f=e.caipNetwork)==null?void 0:f.nativeCurrency.symbol)||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");h({balance:m,symbol:(p=e.caipNetwork)==null?void 0:p.nativeCurrency.symbol})}catch{h({balance:"0.00",symbol:"SOL"})}}).finally(()=>{delete this.balancePromises[i]}),this.balancePromises[i]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){var r,s,i;await super.switchNetwork(e);const{caipNetwork:n}=e;(i=(s=(r=n==null?void 0:n.rpcUrls)==null?void 0:r.default)==null?void 0:s.http)!=null&&i[0]&&lb.setConnection(new $1(n.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(){}listenSolanaProviderEvents(e,n){if(zet.includes(e))return;const r=i=>{this.onAccountsChanged([i.toBase58()],e,!1)},s=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",s),n.on("accountsChanged",r),n.on("connect",r),this.providerHandlers[e]={provider:n,disconnect:s,accountsChanged:r,chainChanged:()=>{}})}async setUniversalProvider(e){this.universalProvider=e;const n=Oe.CONNECTOR_ID.WALLET_CONNECT;Xg.listenWcProvider({universalProvider:e,namespace:Oe.CHAIN.SOLANA,onConnect:s=>this.onConnect(s,n),onDisconnect:()=>this.onDisconnect(n),onAccountsChanged:s=>this.onAccountsChanged(s,n,!1)});const r=new lV({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>le.getCaipNetworkByNamespace(this.namespace)});if(this.registerWalletStandard){const{SolanaWalletConnectStandardWallet:s}=await no(async()=>{const{SolanaWalletConnectStandardWallet:i}=await import("./wallet-standard-BEgUxra4.js");return{SolanaWalletConnectStandardWallet:i}},[]);s.register(e)}return this.addConnector(r),Promise.resolve()}async connectWalletConnect(e){var i,o;const n=await super.connectWalletConnect(e),r=(o=(i=this.getCaipNetworks())==null?void 0:i.find(a=>a.id===e))==null?void 0:o.rpcUrls.default.http[0],s=new $1(r,this.connectionSettings);return lb.setConnection(s),n}async disconnect(e){if(e.id){const n=this.connectors.find(s=>s.id===e.id);if(!n)throw new Error("Provider not found");const r=this.connections.find(s=>jc.isLowerCaseMatch(s.connectorId,e.id));return await n.provider.disconnect(),this.deleteConnection(n.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:r?[r]:[]}}return this.disconnectAll()}async syncConnection(e){return this.connect({...e,type:""})}async syncConnections({connectToFirstConnector:e,caipNetwork:n,getConnectorStorageInfo:r}){var s;await((s=this.connectionManager)==null?void 0:s.syncConnections({connectors:this.connectors,caipNetwork:n,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenSolanaProviderEvents.bind(this),getConnectionStatusInfo:r})),e&&this.emitFirstAvailableConnection()}getWalletConnectProvider(e){return new lV({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>le.getCaipNetworkByNamespace(this.namespace)})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async n=>{const r=this.connectors.find(s=>jc.isLowerCaseMatch(s.id,n.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),n}))}}}const Jae={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},Zae={id:1996,name:"Sanko Mainnet",network:"sanko",nativeCurrency:{decimals:18,name:"DMT",symbol:"DMT"},rpcUrls:{public:{http:["https://mainnet.sanko.xyz"]},default:{http:["https://mainnet.sanko.xyz"]}},blockExplorers:{default:{name:"SankoScan",url:"https://explorer.sanko.xyz"}}},Xae="7c65f27254d6ddd24cf7eedf2685c4fb",Get={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]};new Het;const qet=new AYe({networks:[doe,uoe,Jae,Zae],projectId:Xae,ssr:!1});dGe({networks:[doe,uoe,Jae,Zae,TL,eGe,RL],projectId:Xae,metadata:Get,features:{analytics:!1}});const gF=()=>{if(!uR)throw new Error("[FIREBASE] Database not initialized");return uR},Y0=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,Mk=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=gF(),s=Ic(r,`leaderboard/${t}`),i=await ty(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await C_(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Y0(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},Vet=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Y0(e),redPlayer:Y0(n)}),await Mk(e,t==="blue"?"win":t==="red"?"loss":"draw"),await Mk(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},ece=async(t=20)=>{try{const e=gF(),n=Ic(e,"leaderboard"),r=await ty(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},tce=async()=>{try{const t=gF(),e=Ic(t,"leaderboard/0x0000000000000000000000000000000000000000");return await $Q(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},id=()=>{if(!uR)throw new Error("[FIREBASE] Database not initialized");return uR},Ti={async getGame(t){try{const e=id(),n=Ic(e,`chess_games/${t}`),r=await ty(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=id(),r=Ic(n,`chess_games/${t}`);await C_(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=id(),r=Ic(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=Fj(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=id(),r=Ic(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await C_(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await ty(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=id(),e=Ic(t,"chess_games"),n=await ty(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=id(),e=Ic(t,"chess_games"),n=await ty(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=id(),n=Ic(e,`chess_games/${t}`);await $Q(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=id(),n=Ic(e,`leaderboard/${t.username}`);await C_(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=id(),e=Ic(t,"leaderboard"),n=await ty(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=id(),n=Ic(e,"leaderboard");return Fj(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},Ket="6.15.0";function Yet(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function ta(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function en(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&Yet(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Vb(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Vb(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Vb(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Vb(r,e)}: ${Vb(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function uo(t,e){return t&&t.code===e}function mF(t){return uo(t,"CALL_EXCEPTION")}function Ss(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Vb(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Vb(a))}}i.push(`code=${e}`),i.push(`version=${Ket}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return en(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&en(s,{shortMessage:r}),s}function xe(t,e,n,r){if(!t)throw Ss(e,n,r)}function oe(t,e,n,r){xe(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function nce(t,e,n){n==null&&(n=""),n&&(n=": "+n),xe(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),xe(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function sO(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),xe(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function rce(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}oe(!1,"invalid BytesLike value",e||"value",t)}function Ln(t,e){return rce(t,e,!1)}function oa(t,e){return rce(t,e,!0)}function ls(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function yF(t){return ls(t,!0)||t instanceof Uint8Array}const vV="0123456789abcdef";function rt(t){const e=Ln(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=vV[(s&240)>>4]+vV[s&15]}return n}function Vs(t){return"0x"+t.map(e=>rt(e).substring(2)).join("")}function wv(t){return ls(t,!0)?(t.length-2)/2:Ln(t).length}function zs(t,e,n){const r=Ln(t);return n!=null&&n>r.length&&xe(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),rt(r.slice(e??0,n??r.length))}function sce(t,e,n){const r=Ln(t);xe(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),rt(s)}function Uf(t,e){return sce(t,e,!0)}function Qet(t,e){return sce(t,e,!1)}const iO=BigInt(0),Iu=BigInt(1),Kb=9007199254740991;function Jet(t,e){const n=oO(t,"value"),r=BigInt($n(e,"width"));if(xe(n>>r===iO,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Iu){const s=(Iu<<r)-Iu;return-((~n&s)+Iu)}return n}function ice(t,e){let n=St(t,"value");const r=BigInt($n(e,"width")),s=Iu<<r-Iu;if(n<iO){n=-n,xe(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Iu<<r)-Iu;return(~n&i)+Iu}else xe(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function d_(t,e){const n=oO(t,"value"),r=BigInt($n(e,"bits"));return n&(Iu<<r)-Iu}function St(t,e){switch(typeof t){case"bigint":return t;case"number":return oe(Number.isInteger(t),"underflow",e||"value",t),oe(t>=-Kb&&t<=Kb,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){oe(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}oe(!1,"invalid BigNumberish value",e||"value",t)}function oO(t,e){const n=St(t,e);return xe(n>=iO,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const EV="0123456789abcdef";function wF(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=EV[n>>4],e+=EV[n&15];return BigInt(e)}return St(t)}function $n(t,e){switch(typeof t){case"bigint":return oe(t>=-Kb&&t<=Kb,"overflow",e||"value",t),Number(t);case"number":return oe(Number.isInteger(t),"underflow",e||"value",t),oe(t>=-Kb&&t<=Kb,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return $n(BigInt(t),e)}catch(n){oe(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}oe(!1,"invalid numeric value",e||"value",t)}function Zet(t){return $n(wF(t))}function ym(t,e){let r=oO(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=$n(e,"width");for(xe(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Ci(t){const e=oO(t,"value");if(e===iO)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function Cu(t){let e=rt(yF(t)?t:Ci(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const CV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const _V=BigInt(58);function Xet(t){const e=Ln(t);let n=wF(e),r="";for(;n;)r=CV[Number(n%_V)]+r,n/=_V;for(let s=0;s<e.length&&!e[s];s++)r=CV[0]+r;return r}function ett(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Ln(e)}function ttt(t){const e=Ln(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var Dv;class oce{constructor(e,n,r){ue(this,"filter");ue(this,"emitter");re(this,Dv);q(this,Dv,n),en(this,{emitter:e,filter:r})}async removeListener(){R(this,Dv)!=null&&await this.emitter.off(this.filter,R(this,Dv))}}Dv=new WeakMap;function ntt(t,e,n,r,s){oe(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function ace(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function rtt(t,e,n,r,s){return t==="OVERLONG"?(oe(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),ace(t,e,n))}const stt=Object.freeze({error:ntt,ignore:ace,replace:rtt});function itt(t,e){e==null&&(e=stt.error);const n=Ln(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function Cf(t,e){oe(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);oe(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function ott(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Bk(t,e){return ott(itt(t,e))}function cce(t){async function e(n,r){xe(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();xe(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),xe(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Ss("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=Ss("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const att=12,ctt=250;let AV=cce();const ltt=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),utt=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let xM=!1;async function lce(t,e){try{const n=t.match(ltt);if(!n)throw new Error("invalid data");return new em(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?ett(n[3]):htt(n[3]))}catch{return new em(599,"BAD REQUEST (invalid data: URI)",{},null,new wm(t))}}function uce(t){async function e(n,r){try{const s=n.match(utt);if(!s)throw new Error("invalid link");return new wm(`${t}${s[2]}`)}catch{return new em(599,"BAD REQUEST (invalid IPFS URI)",{},null,new wm(n))}}return e}const Lx={data:lce,ipfs:uce("https://gateway.ipfs.io/ipfs/")},dce=new WeakMap;var $y,Zp;class dtt{constructor(e){re(this,$y);re(this,Zp);q(this,$y,[]),q(this,Zp,!1),dce.set(e,()=>{if(!R(this,Zp)){q(this,Zp,!0);for(const n of R(this,$y))setTimeout(()=>{n()},0);q(this,$y,[])}})}addListener(e){xe(!R(this,Zp),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),R(this,$y).push(e)}get cancelled(){return R(this,Zp)}checkSignal(){xe(!this.cancelled,"cancelled","CANCELLED",{})}}$y=new WeakMap,Zp=new WeakMap;function $x(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Mv,Bv,fu,Gh,Uv,Lv,ki,xc,qh,Fy,jy,Wy,md,pu,Xp,zy,h_;const Kk=class Kk{constructor(e){re(this,zy);re(this,Mv);re(this,Bv);re(this,fu);re(this,Gh);re(this,Uv);re(this,Lv);re(this,ki);re(this,xc);re(this,qh);re(this,Fy);re(this,jy);re(this,Wy);re(this,md);re(this,pu);re(this,Xp);q(this,Lv,String(e)),q(this,Mv,!1),q(this,Bv,!0),q(this,fu,{}),q(this,Gh,""),q(this,Uv,3e5),q(this,pu,{slotInterval:ctt,maxAttempts:att}),q(this,Xp,null)}get url(){return R(this,Lv)}set url(e){q(this,Lv,String(e))}get body(){return R(this,ki)==null?null:new Uint8Array(R(this,ki))}set body(e){if(e==null)q(this,ki,void 0),q(this,xc,void 0);else if(typeof e=="string")q(this,ki,Cf(e)),q(this,xc,"text/plain");else if(e instanceof Uint8Array)q(this,ki,e),q(this,xc,"application/octet-stream");else if(typeof e=="object")q(this,ki,Cf(JSON.stringify(e))),q(this,xc,"application/json");else throw new Error("invalid body")}hasBody(){return R(this,ki)!=null}get method(){return R(this,Gh)?R(this,Gh):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),q(this,Gh,String(e).toUpperCase())}get headers(){const e=Object.assign({},R(this,fu));return R(this,qh)&&(e.authorization=`Basic ${ttt(Cf(R(this,qh)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&R(this,xc)&&(e["content-type"]=R(this,xc)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){R(this,fu)[String(e).toLowerCase()]=String(n)}clearHeaders(){q(this,fu,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return R(this,qh)||null}setCredentials(e,n){oe(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),q(this,qh,`${e}:${n}`)}get allowGzip(){return R(this,Bv)}set allowGzip(e){q(this,Bv,!!e)}get allowInsecureAuthentication(){return!!R(this,Mv)}set allowInsecureAuthentication(e){q(this,Mv,!!e)}get timeout(){return R(this,Uv)}set timeout(e){oe(e>=0,"timeout must be non-zero","timeout",e),q(this,Uv,e)}get preflightFunc(){return R(this,Fy)||null}set preflightFunc(e){q(this,Fy,e)}get processFunc(){return R(this,jy)||null}set processFunc(e){q(this,jy,e)}get retryFunc(){return R(this,Wy)||null}set retryFunc(e){q(this,Wy,e)}get getUrlFunc(){return R(this,Xp)||AV}set getUrlFunc(e){q(this,Xp,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${R(this,ki)?rt(R(this,ki)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(R(this,pu).slotInterval=e.slotInterval),e.maxAttempts!=null&&(R(this,pu).maxAttempts=e.maxAttempts)}send(){return xe(R(this,md)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),q(this,md,new dtt(this)),Ae(this,zy,h_).call(this,0,SV()+this.timeout,0,this,new em(0,"",{},null,this))}cancel(){xe(R(this,md)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=dce.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();xe(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Kk(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,q(s,fu,Object.assign({},R(this,fu))),R(this,ki)&&q(s,ki,new Uint8Array(R(this,ki))),q(s,xc,R(this,xc)),s}clone(){const e=new Kk(this.url);return q(e,Gh,R(this,Gh)),R(this,ki)&&q(e,ki,R(this,ki)),q(e,xc,R(this,xc)),q(e,fu,Object.assign({},R(this,fu))),q(e,qh,R(this,qh)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),q(e,Fy,R(this,Fy)),q(e,jy,R(this,jy)),q(e,Wy,R(this,Wy)),q(e,pu,Object.assign({},R(this,pu))),q(e,Xp,R(this,Xp)),e}static lockConfig(){xM=!0}static getGateway(e){return Lx[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(xM)throw new Error("gateways locked");Lx[e]=n}static registerGetUrl(e){if(xM)throw new Error("gateways locked");AV=e}static createGetUrlFunc(e){return cce(e)}static createDataGateway(){return lce}static createIpfsGatewayFunc(e){return uce(e)}};Mv=new WeakMap,Bv=new WeakMap,fu=new WeakMap,Gh=new WeakMap,Uv=new WeakMap,Lv=new WeakMap,ki=new WeakMap,xc=new WeakMap,qh=new WeakMap,Fy=new WeakMap,jy=new WeakMap,Wy=new WeakMap,md=new WeakMap,pu=new WeakMap,Xp=new WeakMap,zy=new WeakSet,h_=async function(e,n,r,s,i){var u,d,h;if(e>=R(this,pu).maxAttempts)return i.makeServerError("exceeded maximum retry limit");xe(SV()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await ftt(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Lx){const f=await Lx[a](o.url,$x(R(s,md)));if(f instanceof em){let p=f;if(this.processFunc){$x(R(s,md));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,$x(R(s,md)));let l=new em(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return Ae(u=o.redirect(f),zy,h_).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=R(this,pu).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),Ae(d=o.clone(),zy,h_).call(d,e+1,n,p,s,l)}if(this.processFunc){$x(R(s,md));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=R(this,pu).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),Ae(h=o.clone(),zy,h_).call(h,e+1,n,p,s,l)}}return l};let wm=Kk;var JS,ZS,XS,Tc,$v,Hy;const BF=class BF{constructor(e,n,r,s,i){re(this,JS);re(this,ZS);re(this,XS);re(this,Tc);re(this,$v);re(this,Hy);q(this,JS,e),q(this,ZS,n),q(this,XS,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),q(this,Tc,s==null?null:new Uint8Array(s)),q(this,$v,i||null),q(this,Hy,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${R(this,Tc)?rt(R(this,Tc)):"null"}>`}get statusCode(){return R(this,JS)}get statusMessage(){return R(this,ZS)}get headers(){return Object.assign({},R(this,XS))}get body(){return R(this,Tc)==null?null:new Uint8Array(R(this,Tc))}get bodyText(){try{return R(this,Tc)==null?"":Bk(R(this,Tc))}catch{xe(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{xe(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new BF(599,r,this.headers,this.body,R(this,$v)||void 0);return q(s,Hy,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:oe(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw en(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return R(this,Tc)!=null}get request(){return R(this,$v)}ok(){return R(this,Hy).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=R(this,Hy);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{R(this,Tc)&&(s=Bk(R(this,Tc)))}catch{}xe(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};JS=new WeakMap,ZS=new WeakMap,XS=new WeakMap,Tc=new WeakMap,$v=new WeakMap,Hy=new WeakMap;let em=BF;function SV(){return new Date().getTime()}function htt(t){return Cf(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function ftt(t){return new Promise(e=>setTimeout(e,t))}function ptt(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function IV(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function NV(t,e,n,r){const s=[];for(;n<e+1+r;){const i=hce(t,n);s.push(i.result),n+=i.consumed,xe(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function hce(t,e){xe(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{xe(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=IV(t,e+1,r);return n(e+1+r+s),NV(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),NV(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=IV(t,e+1,r);n(e+1+r+s);const i=rt(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=rt(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:ptt(t[e])}}function pN(t){const e=Ln(t,"data"),n=hce(e,0);return oe(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function xV(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function fce(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(fce(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=xV(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Ln(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=xV(e.length);return n.unshift(183+n.length),n.concat(e)}const TV="0123456789abcdef";function bm(t){let e="0x";for(const n of fce(t))e+=TV[n>>4],e+=TV[n&15];return e}const da=32,JL=new Uint8Array(da),gtt=["then"],Fx={},pce=new WeakMap;function ly(t){return pce.get(t)}function RV(t,e){pce.set(t,e)}function z1(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function ZL(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof oC?ZL(ly(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof oC&&(o=ZL(ly(o),o,n)),r[s]=o),r},{})}var Fv;const Yb=class Yb extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==Fx&&(s=n,i=[],o=!1);super(s.length);re(this,Fv);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(RV(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),q(this,Fv,[]),R(this,Fv)==null&&R(this,Fv),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=$n(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&z1(`index ${f}`,p),p}if(gtt.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return RV(c,ly(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&z1(`index ${i}`,s),n&&s instanceof Yb&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=ly(this);return r.reduce((s,i,o)=>(xe(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),ZL(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=ly(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Yb(Fx,i,o)}filter(n,r){const s=ly(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&z1(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Yb(Fx,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&z1(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=ly(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&z1(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Yb(Fx,n,r)}};Fv=new WeakMap;let oC=Yb;function kV(t){let e=Ci(t);return xe(e.length<=da,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:da,offset:e.length}),e.length!==da&&(e=oa(Vs([JL.slice(e.length%da),e]))),e}class Gf{constructor(e,n,r,s){ue(this,"name");ue(this,"type");ue(this,"localName");ue(this,"dynamic");en(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){oe(!1,e,this.localName,n)}}var Vh,Gy,jv,LT;class XL{constructor(){re(this,jv);re(this,Vh);re(this,Gy);q(this,Vh,[]),q(this,Gy,0)}get data(){return Vs(R(this,Vh))}get length(){return R(this,Gy)}appendWriter(e){return Ae(this,jv,LT).call(this,oa(e.data))}writeBytes(e){let n=oa(e);const r=n.length%da;return r&&(n=oa(Vs([n,JL.slice(r)]))),Ae(this,jv,LT).call(this,n)}writeValue(e){return Ae(this,jv,LT).call(this,kV(e))}writeUpdatableValue(){const e=R(this,Vh).length;return R(this,Vh).push(JL),q(this,Gy,R(this,Gy)+da),n=>{R(this,Vh)[e]=kV(n)}}}Vh=new WeakMap,Gy=new WeakMap,jv=new WeakSet,LT=function(e){return R(this,Vh).push(e),q(this,Gy,R(this,Gy)+e.length),e.length};var ja,Rc,qy,Vy,eg,ew,t6,gce;const UF=class UF{constructor(e,n,r){re(this,ew);ue(this,"allowLoose");re(this,ja);re(this,Rc);re(this,qy);re(this,Vy);re(this,eg);en(this,{allowLoose:!!n}),q(this,ja,oa(e)),q(this,qy,0),q(this,Vy,null),q(this,eg,r??1024),q(this,Rc,0)}get data(){return rt(R(this,ja))}get dataLength(){return R(this,ja).length}get consumed(){return R(this,Rc)}get bytes(){return new Uint8Array(R(this,ja))}subReader(e){const n=new UF(R(this,ja).slice(R(this,Rc)+e),this.allowLoose,R(this,eg));return q(n,Vy,this),n}readBytes(e,n){let r=Ae(this,ew,gce).call(this,0,e,!!n);return Ae(this,ew,t6).call(this,e),q(this,Rc,R(this,Rc)+r.length),r.slice(0,e)}readValue(){return wF(this.readBytes(da))}readIndex(){return Zet(this.readBytes(da))}};ja=new WeakMap,Rc=new WeakMap,qy=new WeakMap,Vy=new WeakMap,eg=new WeakMap,ew=new WeakSet,t6=function(e){var n;if(R(this,Vy))return Ae(n=R(this,Vy),ew,t6).call(n,e);q(this,qy,R(this,qy)+e),xe(R(this,eg)<1||R(this,qy)<=R(this,eg)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${R(this,eg)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:oa(R(this,ja)),offset:R(this,Rc),length:e,info:{bytesRead:R(this,qy),dataLength:this.dataLength}})},gce=function(e,n,r){let s=Math.ceil(n/da)*da;return R(this,Rc)+s>R(this,ja).length&&(this.allowLoose&&r&&R(this,Rc)+n<=R(this,ja).length?s=n:xe(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:oa(R(this,ja)),length:R(this,ja).length,offset:R(this,Rc)+s})),R(this,ja).slice(R(this,Rc),R(this,Rc)+s)};let e6=UF;function Uk(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function bF(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function mtt(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Uk(t.outputLen),Uk(t.blockLen)}function aC(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function mce(t,e){bF(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const TM=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yce=t=>t instanceof Uint8Array,ytt=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),RM=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),od=(t,e)=>t<<32-e|t>>>e,wtt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!wtt)throw new Error("Non little-endian hardware is not supported");function btt(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function aO(t){if(typeof t=="string"&&(t=btt(t)),!yce(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function vtt(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!yce(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class vF{clone(){return this._cloneInto()}}function EF(t){const e=r=>t().update(aO(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Ett(t=32){if(TM&&typeof TM.getRandomValues=="function")return TM.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class wce extends vF{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,mtt(e);const r=aO(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return aC(this),this.iHash.update(e),this}digestInto(e){aC(this),bF(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const bce=(t,e,n)=>new wce(t,e).update(n).digest();bce.create=(t,e)=>new wce(t,e);function Ctt(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class vce extends vF{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=RM(this.buffer)}update(e){aC(this);const{view:n,buffer:r,blockLen:s}=this;e=aO(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=RM(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aC(this),mce(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Ctt(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=RM(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const _tt=(t,e,n)=>t&e^~t&n,Att=(t,e,n)=>t&e^t&n^e&n,Stt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ep=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cp=new Uint32Array(64);class Itt extends vce{constructor(){super(64,32,8,!1),this.A=Ep[0]|0,this.B=Ep[1]|0,this.C=Ep[2]|0,this.D=Ep[3]|0,this.E=Ep[4]|0,this.F=Ep[5]|0,this.G=Ep[6]|0,this.H=Ep[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Cp[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Cp[d-15],f=Cp[d-2],p=od(h,7)^od(h,18)^h>>>3,g=od(f,17)^od(f,19)^f>>>10;Cp[d]=g+Cp[d-7]+p+Cp[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=od(a,6)^od(a,11)^od(a,25),f=u+h+_tt(a,c,l)+Stt[d]+Cp[d]|0,g=(od(r,2)^od(r,13)^od(r,22))+Att(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Cp.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ece=EF(()=>new Itt),jx=BigInt(2**32-1),n6=BigInt(32);function Cce(t,e=!1){return e?{h:Number(t&jx),l:Number(t>>n6&jx)}:{h:Number(t>>n6&jx)|0,l:Number(t&jx)|0}}function _ce(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Cce(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Ntt=(t,e)=>BigInt(t>>>0)<<n6|BigInt(e>>>0),xtt=(t,e,n)=>t>>>n,Ttt=(t,e,n)=>t<<32-n|e>>>n,Rtt=(t,e,n)=>t>>>n|e<<32-n,ktt=(t,e,n)=>t<<32-n|e>>>n,Ptt=(t,e,n)=>t<<64-n|e>>>n-32,Ott=(t,e,n)=>t>>>n-32|e<<64-n,Dtt=(t,e)=>e,Mtt=(t,e)=>t,Ace=(t,e,n)=>t<<n|e>>>32-n,Sce=(t,e,n)=>e<<n|t>>>32-n,Ice=(t,e,n)=>e<<n-32|t>>>64-n,Nce=(t,e,n)=>t<<n-32|e>>>64-n;function Btt(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Utt=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Ltt=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,$tt=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ftt=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,jtt=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Wtt=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Rn={fromBig:Cce,split:_ce,toBig:Ntt,shrSH:xtt,shrSL:Ttt,rotrSH:Rtt,rotrSL:ktt,rotrBH:Ptt,rotrBL:Ott,rotr32H:Dtt,rotr32L:Mtt,rotlSH:Ace,rotlSL:Sce,rotlBH:Ice,rotlBL:Nce,add:Btt,add3L:Utt,add3H:Ltt,add4L:$tt,add4H:Ftt,add5H:Wtt,add5L:jtt},[ztt,Htt]=Rn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),_p=new Uint32Array(80),Ap=new Uint32Array(80);class Gtt extends vce{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let C=0;C<16;C++,n+=4)_p[C]=e.getUint32(n),Ap[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const N=_p[C-15]|0,I=Ap[C-15]|0,k=Rn.rotrSH(N,I,1)^Rn.rotrSH(N,I,8)^Rn.shrSH(N,I,7),P=Rn.rotrSL(N,I,1)^Rn.rotrSL(N,I,8)^Rn.shrSL(N,I,7),U=_p[C-2]|0,M=Ap[C-2]|0,H=Rn.rotrSH(U,M,19)^Rn.rotrBH(U,M,61)^Rn.shrSH(U,M,6),j=Rn.rotrSL(U,M,19)^Rn.rotrBL(U,M,61)^Rn.shrSL(U,M,6),K=Rn.add4L(P,j,Ap[C-7],Ap[C-16]),$=Rn.add4H(K,k,H,_p[C-7],_p[C-16]);_p[C]=$|0,Ap[C]=K|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:y,Hl:w}=this;for(let C=0;C<80;C++){const N=Rn.rotrSH(d,h,14)^Rn.rotrSH(d,h,18)^Rn.rotrBH(d,h,41),I=Rn.rotrSL(d,h,14)^Rn.rotrSL(d,h,18)^Rn.rotrBL(d,h,41),k=d&f^~d&g,P=h&p^~h&m,U=Rn.add5L(w,I,P,Htt[C],Ap[C]),M=Rn.add5H(U,y,N,k,ztt[C],_p[C]),H=U|0,j=Rn.rotrSH(r,s,28)^Rn.rotrBH(r,s,34)^Rn.rotrBH(r,s,39),K=Rn.rotrSL(r,s,28)^Rn.rotrBL(r,s,34)^Rn.rotrBL(r,s,39),$=r&i^r&a^i&a,v=s&o^s&c^o&c;y=g|0,w=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=Rn.add(l|0,u|0,M|0,H|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const E=Rn.add3L(H,K,v);r=Rn.add3H(E,M,j,$),s=E|0}({h:r,l:s}=Rn.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Rn.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Rn.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Rn.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Rn.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Rn.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=Rn.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:w}=Rn.add(this.Hh|0,this.Hl|0,y|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,m,y,w)}roundClean(){_p.fill(0),Ap.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const qtt=EF(()=>new Gtt);function Vtt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const PV=Vtt();PV.crypto||PV.msCrypto;function Ktt(t){switch(t){case"sha256":return Ece.create();case"sha512":return qtt.create()}oe(!1,"invalid hashing algorithm name","algorithm",t)}const[xce,Tce,Rce]=[[],[],[]],Ytt=BigInt(0),H1=BigInt(1),Qtt=BigInt(2),Jtt=BigInt(7),Ztt=BigInt(256),Xtt=BigInt(113);for(let t=0,e=H1,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],xce.push(2*(5*r+n)),Tce.push((t+1)*(t+2)/2%64);let s=Ytt;for(let i=0;i<7;i++)e=(e<<H1^(e>>Jtt)*Xtt)%Ztt,e&Qtt&&(s^=H1<<(H1<<BigInt(i))-H1);Rce.push(s)}const[ent,tnt]=_ce(Rce,!0),OV=(t,e,n)=>n>32?Ice(t,e,n):Ace(t,e,n),DV=(t,e,n)=>n>32?Nce(t,e,n):Sce(t,e,n);function nnt(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=OV(l,u,1)^n[a],h=DV(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Tce[o],c=OV(s,i,a),l=DV(s,i,a),u=xce[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=ent[r],t[1]^=tnt[r]}n.fill(0)}class CF extends vF{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Uk(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ytt(this.state)}keccak(){nnt(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){aC(this);const{blockLen:n,state:r}=this;e=aO(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){aC(this,!1),bF(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Uk(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(mce(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new CF(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const rnt=(t,e,n)=>EF(()=>new CF(e,t,n)),snt=rnt(1,136,256/8);let kce=!1;const Pce=function(t){return snt(t)};let Oce=Pce;function li(t){const e=Ln(t,"data");return rt(Oce(e))}li._=Pce;li.lock=function(){kce=!0};li.register=function(t){if(kce)throw new TypeError("keccak256 is locked");Oce=t};Object.freeze(li);const Dce=function(t){return Ktt("sha256").update(t).digest()};let Mce=Dce,Bce=!1;function QC(t){const e=Ln(t,"data");return rt(Mce(e))}QC._=Dce;QC.lock=function(){Bce=!0};QC.register=function(t){if(Bce)throw new Error("sha256 is locked");Mce=t};Object.freeze(QC);Object.freeze(QC);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uce=BigInt(0),cO=BigInt(1),int=BigInt(2),lO=t=>t instanceof Uint8Array,ont=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function cC(t){if(!lO(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=ont[t[n]];return e}function Lce(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function _F(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function lC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function y0(t){return _F(cC(t))}function AF(t){if(!lO(t))throw new Error("Uint8Array expected");return _F(cC(Uint8Array.from(t).reverse()))}function uC(t,e){return lC(t.toString(16).padStart(e*2,"0"))}function SF(t,e){return uC(t,e).reverse()}function ant(t){return lC(Lce(t))}function uu(t,e,n){let r;if(typeof e=="string")try{r=lC(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(lO(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function BS(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!lO(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function cnt(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function lnt(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function unt(t){let e;for(e=0;t>Uce;t>>=cO,e+=1);return e}function dnt(t,e){return t>>BigInt(e)&cO}const hnt=(t,e,n)=>t|(n?cO:Uce)<<BigInt(e),IF=t=>(int<<BigInt(t-1))-cO,kM=t=>new Uint8Array(t),MV=t=>Uint8Array.from(t);function $ce(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=kM(t),s=kM(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=kM())=>{s=a(MV([0]),d),r=a(),d.length!==0&&(s=a(MV([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return BS(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const fnt={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function gN(t,e,n={}){const r=(s,i,o)=>{const a=fnt[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const pnt=Object.freeze(Object.defineProperty({__proto__:null,bitGet:dnt,bitLen:unt,bitMask:IF,bitSet:hnt,bytesToHex:cC,bytesToNumberBE:y0,bytesToNumberLE:AF,concatBytes:BS,createHmacDrbg:$ce,ensureBytes:uu,equalBytes:cnt,hexToBytes:lC,hexToNumber:_F,numberToBytesBE:uC,numberToBytesLE:SF,numberToHexUnpadded:Lce,numberToVarBytesBE:ant,utf8ToBytes:lnt,validateObject:gN},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zi=BigInt(0),si=BigInt(1),uy=BigInt(2),gnt=BigInt(3),r6=BigInt(4),BV=BigInt(5),UV=BigInt(8);BigInt(9);BigInt(16);function Va(t,e){const n=t%e;return n>=zi?n:e+n}function mnt(t,e,n){if(n<=zi||e<zi)throw new Error("Expected power/modulo > 0");if(n===si)return zi;let r=si;for(;e>zi;)e&si&&(r=r*t%n),t=t*t%n,e>>=si;return r}function dl(t,e,n){let r=t;for(;e-- >zi;)r*=r,r%=n;return r}function s6(t,e){if(t===zi||e<=zi)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Va(t,e),r=e,s=zi,i=si;for(;n!==zi;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==si)throw new Error("invert: does not exist");return Va(s,e)}function ynt(t){const e=(t-si)/uy;let n,r,s;for(n=t-si,r=0;n%uy===zi;n/=uy,r++);for(s=uy;s<t&&mnt(s,e,t)!==t-si;s++);if(r===1){const o=(t+si)/r6;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+si)/uy;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,si<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function wnt(t){if(t%r6===gnt){const e=(t+si)/r6;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%UV===BV){const e=(t-BV)/UV;return function(r,s){const i=r.mul(s,uy),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,uy),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return ynt(t)}const bnt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function vnt(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=bnt.reduce((r,s)=>(r[s]="function",r),e);return gN(t,n)}function Ent(t,e,n){if(n<zi)throw new Error("Expected power > 0");if(n===zi)return t.ONE;if(n===si)return e;let r=t.ONE,s=e;for(;n>zi;)n&si&&(r=t.mul(r,s)),s=t.sqr(s),n>>=si;return r}function Cnt(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Fce(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _nt(t,e,n=!1,r={}){if(t<=zi)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Fce(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=wnt(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:IF(s),ZERO:zi,ONE:si,create:c=>Va(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return zi<=c&&c<t},is0:c=>c===zi,isOdd:c=>(c&si)===si,neg:c=>Va(-c,t),eql:(c,l)=>c===l,sqr:c=>Va(c*c,t),add:(c,l)=>Va(c+l,t),sub:(c,l)=>Va(c-l,t),mul:(c,l)=>Va(c*l,t),pow:(c,l)=>Ent(a,c,l),div:(c,l)=>Va(c*s6(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>s6(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>Cnt(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?SF(c,i):uC(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?AF(c):y0(c)}});return Object.freeze(a)}function jce(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Wce(t){const e=jce(t);return e+Math.ceil(e/2)}function Ant(t,e,n=!1){const r=t.length,s=jce(e),i=Wce(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?y0(t):AF(t),a=Va(o,e-si)+si;return n?SF(a,s):uC(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Snt=BigInt(0),PM=BigInt(1);function Int(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>Snt;)i&PM&&(o=o.add(a)),a=a.double(),i>>=PM;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let m=Number(o&d);o>>=f,m>c&&(m-=h,o+=PM);const y=g,w=g+Math.abs(m)-1,C=p%2!==0,N=m<0;m===0?u=u.add(n(C,i[y])):l=l.add(n(N,i[w]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function zce(t){return vnt(t.Fp),gN(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Fce(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Nnt(t){const e=zce(t);gN(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:xnt,hexToBytes:Tnt}=pnt,Ny={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Ny;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:xnt(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Ny,n=typeof t=="string"?Tnt(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Ny._parseInt(n.subarray(2)),{d:o,l:a}=Ny._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},af=BigInt(0),Sl=BigInt(1);BigInt(2);const LV=BigInt(3);BigInt(4);function Rnt(t){const e=Nnt(t),{Fp:n}=e,r=e.toBytes||((p,g,m)=>{const y=g.toAffine();return BS(Uint8Array.from([4]),n.toBytes(y.x),n.toBytes(y.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),m=n.fromBytes(g.subarray(0,n.BYTES)),y=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:m,y}});function i(p){const{a:g,b:m}=e,y=n.sqr(p),w=n.mul(y,p);return n.add(n.add(w,n.mul(p,g)),m)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&af<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:m,wrapPrivateKey:y,n:w}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=cC(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(m*2,"0")}let C;try{C=typeof p=="bigint"?p:y0(uu("private key",p,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof p}`)}return y&&(C=Va(C,w)),a(C),C}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,m,y){if(this.px=g,this.py=m,this.pz=y,g==null||!n.isValid(g))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(y==null||!n.isValid(y))throw new Error("z required")}static fromAffine(g){const{x:m,y}=g||{};if(!g||!n.isValid(m)||!n.isValid(y))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const w=C=>n.eql(C,n.ZERO);return w(m)&&w(y)?d.ZERO:new d(m,y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const m=n.invertBatch(g.map(y=>y.pz));return g.map((y,w)=>y.toAffine(m[w])).map(d.fromAffine)}static fromHex(g){const m=d.fromAffine(s(uu("pointHex",g)));return m.assertValidity(),m}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:m}=this.toAffine();if(!n.isValid(g)||!n.isValid(m))throw new Error("bad point: x or y not FE");const y=n.sqr(m),w=i(g);if(!n.eql(y,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:m,py:y,pz:w}=this,{px:C,py:N,pz:I}=g,k=n.eql(n.mul(m,I),n.mul(C,w)),P=n.eql(n.mul(y,I),n.mul(N,w));return k&&P}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:m}=e,y=n.mul(m,LV),{px:w,py:C,pz:N}=this;let I=n.ZERO,k=n.ZERO,P=n.ZERO,U=n.mul(w,w),M=n.mul(C,C),H=n.mul(N,N),j=n.mul(w,C);return j=n.add(j,j),P=n.mul(w,N),P=n.add(P,P),I=n.mul(g,P),k=n.mul(y,H),k=n.add(I,k),I=n.sub(M,k),k=n.add(M,k),k=n.mul(I,k),I=n.mul(j,I),P=n.mul(y,P),H=n.mul(g,H),j=n.sub(U,H),j=n.mul(g,j),j=n.add(j,P),P=n.add(U,U),U=n.add(P,U),U=n.add(U,H),U=n.mul(U,j),k=n.add(k,U),H=n.mul(C,N),H=n.add(H,H),U=n.mul(H,j),I=n.sub(I,U),P=n.mul(H,M),P=n.add(P,P),P=n.add(P,P),new d(I,k,P)}add(g){u(g);const{px:m,py:y,pz:w}=this,{px:C,py:N,pz:I}=g;let k=n.ZERO,P=n.ZERO,U=n.ZERO;const M=e.a,H=n.mul(e.b,LV);let j=n.mul(m,C),K=n.mul(y,N),$=n.mul(w,I),v=n.add(m,y),E=n.add(C,N);v=n.mul(v,E),E=n.add(j,K),v=n.sub(v,E),E=n.add(m,w);let _=n.add(C,I);return E=n.mul(E,_),_=n.add(j,$),E=n.sub(E,_),_=n.add(y,w),k=n.add(N,I),_=n.mul(_,k),k=n.add(K,$),_=n.sub(_,k),U=n.mul(M,E),k=n.mul(H,$),U=n.add(k,U),k=n.sub(K,U),U=n.add(K,U),P=n.mul(k,U),K=n.add(j,j),K=n.add(K,j),$=n.mul(M,$),E=n.mul(H,E),K=n.add(K,$),$=n.sub(j,$),$=n.mul(M,$),E=n.add(E,$),j=n.mul(K,E),P=n.add(P,j),j=n.mul(_,E),k=n.mul(v,k),k=n.sub(k,j),j=n.mul(v,K),U=n.mul(_,U),U=n.add(U,j),new d(k,P,U)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,m=>{const y=n.invertBatch(m.map(w=>w.pz));return m.map((w,C)=>w.toAffine(y[C])).map(d.fromAffine)})}multiplyUnsafe(g){const m=d.ZERO;if(g===af)return m;if(a(g),g===Sl)return this;const{endo:y}=e;if(!y)return f.unsafeLadder(this,g);let{k1neg:w,k1:C,k2neg:N,k2:I}=y.splitScalar(g),k=m,P=m,U=this;for(;C>af||I>af;)C&Sl&&(k=k.add(U)),I&Sl&&(P=P.add(U)),U=U.double(),C>>=Sl,I>>=Sl;return w&&(k=k.negate()),N&&(P=P.negate()),P=new d(n.mul(P.px,y.beta),P.py,P.pz),k.add(P)}multiply(g){a(g);let m=g,y,w;const{endo:C}=e;if(C){const{k1neg:N,k1:I,k2neg:k,k2:P}=C.splitScalar(m);let{p:U,f:M}=this.wNAF(I),{p:H,f:j}=this.wNAF(P);U=f.constTimeNegate(N,U),H=f.constTimeNegate(k,H),H=new d(n.mul(H.px,C.beta),H.py,H.pz),y=U.add(H),w=M.add(j)}else{const{p:N,f:I}=this.wNAF(m);y=N,w=I}return d.normalizeZ([y,w])[0]}multiplyAndAddUnsafe(g,m,y){const w=d.BASE,C=(I,k)=>k===af||k===Sl||!I.equals(w)?I.multiplyUnsafe(k):I.multiply(k),N=C(this,m).add(C(g,y));return N.is0()?void 0:N}toAffine(g){const{px:m,py:y,pz:w}=this,C=this.is0();g==null&&(g=C?n.ONE:n.inv(w));const N=n.mul(m,g),I=n.mul(y,g),k=n.mul(w,g);if(C)return{x:n.ZERO,y:n.ZERO};if(!n.eql(k,n.ONE))throw new Error("invZ was invalid");return{x:N,y:I}}isTorsionFree(){const{h:g,isTorsionFree:m}=e;if(g===Sl)return!0;if(m)return m(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:m}=e;return g===Sl?this:m?m(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return cC(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=Int(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function knt(t){const e=zce(t);return gN(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Pnt(t){const e=knt(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(E){return af<E&&E<n.ORDER}function a(E){return Va(E,r)}function c(E){return s6(E,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=Rnt({...e,toBytes(E,_,D){const x=_.toAffine(),B=n.toBytes(x.x),W=BS;return D?W(Uint8Array.from([_.hasEvenY()?2:3]),B):W(Uint8Array.from([4]),B,n.toBytes(x.y))},fromBytes(E){const _=E.length,D=E[0],x=E.subarray(1);if(_===s&&(D===2||D===3)){const B=y0(x);if(!o(B))throw new Error("Point is not on curve");const W=d(B);let L=n.sqrt(W);const S=(L&Sl)===Sl;return(D&1)===1!==S&&(L=n.neg(L)),{x:B,y:L}}else if(_===i&&D===4){const B=n.fromBytes(x.subarray(0,n.BYTES)),W=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:B,y:W}}else throw new Error(`Point of length ${_} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=E=>cC(uC(E,e.nByteLength));function p(E){const _=r>>Sl;return E>_}function g(E){return p(E)?a(-E):E}const m=(E,_,D)=>y0(E.slice(_,D));class y{constructor(_,D,x){this.r=_,this.s=D,this.recovery=x,this.assertValidity()}static fromCompact(_){const D=e.nByteLength;return _=uu("compactSignature",_,D*2),new y(m(_,0,D),m(_,D,2*D))}static fromDER(_){const{r:D,s:x}=Ny.toSig(uu("DER",_));return new y(D,x)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(_){return new y(this.r,this.s,_)}recoverPublicKey(_){const{r:D,s:x,recovery:B}=this,W=P(uu("msgHash",_));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const L=B===2||B===3?D+e.n:D;if(L>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const S=B&1?"03":"02",F=l.fromHex(S+f(L)),X=c(L),se=a(-W*X),ge=a(x*X),Ue=l.BASE.multiplyAndAddUnsafe(F,se,ge);if(!Ue)throw new Error("point at infinify");return Ue.assertValidity(),Ue}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return lC(this.toDERHex())}toDERHex(){return Ny.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return lC(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const w={isValidPrivateKey(E){try{return u(E),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const E=Wce(e.n);return Ant(e.randomBytes(E),e.n)},precompute(E=8,_=l.BASE){return _._setWindowSize(E),_.multiply(BigInt(3)),_}};function C(E,_=!0){return l.fromPrivateKey(E).toRawBytes(_)}function N(E){const _=E instanceof Uint8Array,D=typeof E=="string",x=(_||D)&&E.length;return _?x===s||x===i:D?x===2*s||x===2*i:E instanceof l}function I(E,_,D=!0){if(N(E))throw new Error("first arg must be private key");if(!N(_))throw new Error("second arg must be public key");return l.fromHex(_).multiply(u(E)).toRawBytes(D)}const k=e.bits2int||function(E){const _=y0(E),D=E.length*8-e.nBitLength;return D>0?_>>BigInt(D):_},P=e.bits2int_modN||function(E){return a(k(E))},U=IF(e.nBitLength);function M(E){if(typeof E!="bigint")throw new Error("bigint expected");if(!(af<=E&&E<U))throw new Error(`bigint expected < 2^${e.nBitLength}`);return uC(E,e.nByteLength)}function H(E,_,D=j){if(["recovered","canonical"].some(Be=>Be in D))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:B}=e;let{lowS:W,prehash:L,extraEntropy:S}=D;W==null&&(W=!0),E=uu("msgHash",E),L&&(E=uu("prehashed msgHash",x(E)));const F=P(E),X=u(_),se=[M(X),M(F)];if(S!=null){const Be=S===!0?B(n.BYTES):S;se.push(uu("extraEntropy",Be))}const ge=BS(...se),Ue=F;function Le(Be){const Ut=k(Be);if(!h(Ut))return;const lt=c(Ut),st=l.BASE.multiply(Ut).toAffine(),ce=a(st.x);if(ce===af)return;const ae=a(lt*a(Ue+ce*X));if(ae===af)return;let _e=(st.x===ce?0:2)|Number(st.y&Sl),Se=ae;return W&&p(ae)&&(Se=g(ae),_e^=1),new y(ce,Se,_e)}return{seed:ge,k2sig:Le}}const j={lowS:e.lowS,prehash:!1},K={lowS:e.lowS,prehash:!1};function $(E,_,D=j){const{seed:x,k2sig:B}=H(E,_,D),W=e;return $ce(W.hash.outputLen,W.nByteLength,W.hmac)(x,B)}l.BASE._setWindowSize(8);function v(E,_,D,x=K){var st;const B=E;if(_=uu("msgHash",_),D=uu("publicKey",D),"strict"in x)throw new Error("options.strict was renamed to lowS");const{lowS:W,prehash:L}=x;let S,F;try{if(typeof B=="string"||B instanceof Uint8Array)try{S=y.fromDER(B)}catch(ce){if(!(ce instanceof Ny.Err))throw ce;S=y.fromCompact(B)}else if(typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint"){const{r:ce,s:ae}=B;S=new y(ce,ae)}else throw new Error("PARSE");F=l.fromHex(D)}catch(ce){if(ce.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(W&&S.hasHighS())return!1;L&&(_=e.hash(_));const{r:X,s:se}=S,ge=P(_),Ue=c(se),Le=a(ge*Ue),Be=a(X*Ue),Ut=(st=l.BASE.multiplyAndAddUnsafe(F,Le,Be))==null?void 0:st.toAffine();return Ut?a(Ut.x)===X:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:I,sign:$,verify:v,ProjectivePoint:l,Signature:y,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ont(t){return{hash:t,hmac:(e,...n)=>bce(t,e,vtt(...n)),randomBytes:Ett}}function Dnt(t,e){const n=r=>Pnt({...t,...Ont(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hce=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),$V=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Mnt=BigInt(1),i6=BigInt(2),FV=(t,e)=>(t+e/i6)/e;function Bnt(t){const e=Hce,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=dl(u,n,e)*u%e,h=dl(d,n,e)*u%e,f=dl(h,i6,e)*l%e,p=dl(f,s,e)*f%e,g=dl(p,i,e)*p%e,m=dl(g,a,e)*g%e,y=dl(m,c,e)*m%e,w=dl(y,a,e)*g%e,C=dl(w,n,e)*u%e,N=dl(C,o,e)*p%e,I=dl(N,r,e)*l%e,k=dl(I,i6,e);if(!o6.eql(o6.sqr(k),t))throw new Error("Cannot find square root");return k}const o6=_nt(Hce,void 0,void 0,{sqrt:Bnt}),xp=Dnt({a:BigInt(0),b:BigInt(7),Fp:o6,n:$V,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=$V,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Mnt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=FV(i*t,e),c=FV(-r*t,e);let l=Va(t-a*n-c*s,e),u=Va(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Ece);BigInt(0);xp.ProjectivePoint;const US="0x0000000000000000000000000000000000000000",jV="0x0000000000000000000000000000000000000000000000000000000000000000",WV=BigInt(0),zV=BigInt(1),HV=BigInt(2),GV=BigInt(27),qV=BigInt(28),Wx=BigInt(35),fb={};function VV(t){return Uf(Ci(t),32)}var Wv,yd,zv,Ky;const au=class au{constructor(e,n,r,s){re(this,Wv);re(this,yd);re(this,zv);re(this,Ky);sO(e,fb,"Signature"),q(this,Wv,n),q(this,yd,r),q(this,zv,s),q(this,Ky,null)}get r(){return R(this,Wv)}set r(e){oe(wv(e)===32,"invalid r","value",e),q(this,Wv,rt(e))}get s(){return oe(parseInt(R(this,yd).substring(0,3))<8,"non-canonical s; use ._s","s",R(this,yd)),R(this,yd)}set s(e){oe(wv(e)===32,"invalid s","value",e),q(this,yd,rt(e))}get _s(){return R(this,yd)}isValid(){return parseInt(R(this,yd).substring(0,3))<8}get v(){return R(this,zv)}set v(e){const n=$n(e,"value");oe(n===27||n===28,"invalid v","v",e),q(this,zv,n)}get networkV(){return R(this,Ky)}get legacyChainId(){const e=this.networkV;return e==null?null:au.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Ln(this.s);return this.yParity&&(e[0]|=128),rt(e)}get compactSerialized(){return Vs([this.r,this.yParityAndS])}get serialized(){return Vs([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new au(fb,this.r,this._s,this.v);return this.networkV&&q(e,Ky,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=St(e,"v");return n==GV||n==qV?WV:(oe(n>=Wx,"invalid EIP-155 v","v",e),(n-Wx)/HV)}static getChainIdV(e,n){return St(e)*HV+BigInt(35+n-27)}static getNormalizedV(e){const n=St(e);return n===WV||n===GV?27:n===zV||n===qV?28:(oe(n>=Wx,"invalid v","v",e),n&zV?27:28)}static from(e){function n(l,u){oe(l,u,"signature",e)}if(e==null)return new au(fb,jV,jV,27);if(typeof e=="string"){const l=Ln(e,"signature");if(l.length===64){const u=rt(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new au(fb,u,rt(d),h)}if(l.length===65){const u=rt(l.slice(0,32)),d=rt(l.slice(32,64)),h=au.getNormalizedV(l[64]);return new au(fb,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof au)return e.clone();const r=e.r;n(r!=null,"missing r");const s=VV(r),i=function(l,u){if(l!=null)return VV(l);if(u!=null){n(ls(u,32),"invalid yParityAndS");const d=Ln(u);return d[0]&=127,rt(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=St(l);return{networkV:h>=Wx?h:void 0,v:au.getNormalizedV(h)}}if(u!=null)return n(ls(u,32),"invalid yParityAndS"),{v:Ln(u)[0]&128?28:27};if(d!=null){switch($n(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new au(fb,s,i,a);return o&&q(c,Ky,o),n(e.yParity==null||$n(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};Wv=new WeakMap,yd=new WeakMap,zv=new WeakMap,Ky=new WeakMap;let lc=au;var Kh;const dy=class dy{constructor(e){re(this,Kh);oe(wv(e)===32,"invalid private key","privateKey","[REDACTED]"),q(this,Kh,rt(e))}get privateKey(){return R(this,Kh)}get publicKey(){return dy.computePublicKey(R(this,Kh))}get compressedPublicKey(){return dy.computePublicKey(R(this,Kh),!0)}sign(e){oe(wv(e)===32,"invalid digest length","digest",e);const n=xp.sign(oa(e),oa(R(this,Kh)),{lowS:!0});return lc.from({r:ym(n.r,32),s:ym(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=dy.computePublicKey(e);return rt(xp.getSharedSecret(oa(R(this,Kh)),Ln(n),!1))}static computePublicKey(e,n){let r=Ln(e,"key");if(r.length===32){const i=xp.getPublicKey(r,!!n);return rt(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=xp.ProjectivePoint.fromHex(r);return rt(s.toRawBytes(n))}static recoverPublicKey(e,n){oe(wv(e)===32,"invalid digest length","digest",e);const r=lc.from(n);let s=xp.Signature.fromCompact(oa(Vs([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(oa(e));return oe(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=xp.ProjectivePoint.fromHex(dy.computePublicKey(e).substring(2)),i=xp.ProjectivePoint.fromHex(dy.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Kh=new WeakMap;let LS=dy;const Unt=BigInt(0),Lnt=BigInt(36);function KV(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Ln(li(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const NF={};for(let t=0;t<10;t++)NF[String(t)]=String(t);for(let t=0;t<26;t++)NF[String.fromCharCode(65+t)]=String(10+t);const YV=15;function $nt(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>NF[r]).join("");for(;e.length>=YV;){let r=e.substring(0,YV);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const Fnt=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function jnt(t){t=t.toLowerCase();let e=Unt;for(let n=0;n<t.length;n++)e=e*Lnt+Fnt[t[n]];return e}function Nr(t){if(oe(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=KV(t);return oe(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){oe(t.substring(2,4)===$nt(t),"bad icap checksum","address",t);let e=jnt(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return KV("0x"+e)}oe(!1,"invalid address","address",t)}function Wnt(t){const e=Nr(t.from);let r=St(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Nr(zs(li(bm([e,r])),12))}function Gce(t){return t&&typeof t.getAddress=="function"}async function OM(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(xe(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),oe(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Nr(n)}function ha(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Nr(t):(xe(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),OM(t,e.resolveName(t)));if(Gce(t))return OM(t,t.getAddress());if(t&&typeof t.then=="function")return OM(t,t);oe(!1,"unsupported addressable value","target",t)}const Uh={};function wt(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Fo(Uh,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function hr(t,e){return new Fo(Uh,`bytes${e||""}`,t,{size:e})}const QV=Symbol.for("_ethers_typed");var Yy;const Lh=class Lh{constructor(e,n,r,s){ue(this,"type");ue(this,"value");re(this,Yy);ue(this,"_typedSymbol");s==null&&(s=null),sO(Uh,e,"Typed"),en(this,{_typedSymbol:QV,type:n,value:r}),q(this,Yy,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return R(this,Yy)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return R(this,Yy)===!0?-1:R(this,Yy)===!1?this.value.length:null}static from(e,n){return new Lh(Uh,e,n)}static uint8(e){return wt(e,8)}static uint16(e){return wt(e,16)}static uint24(e){return wt(e,24)}static uint32(e){return wt(e,32)}static uint40(e){return wt(e,40)}static uint48(e){return wt(e,48)}static uint56(e){return wt(e,56)}static uint64(e){return wt(e,64)}static uint72(e){return wt(e,72)}static uint80(e){return wt(e,80)}static uint88(e){return wt(e,88)}static uint96(e){return wt(e,96)}static uint104(e){return wt(e,104)}static uint112(e){return wt(e,112)}static uint120(e){return wt(e,120)}static uint128(e){return wt(e,128)}static uint136(e){return wt(e,136)}static uint144(e){return wt(e,144)}static uint152(e){return wt(e,152)}static uint160(e){return wt(e,160)}static uint168(e){return wt(e,168)}static uint176(e){return wt(e,176)}static uint184(e){return wt(e,184)}static uint192(e){return wt(e,192)}static uint200(e){return wt(e,200)}static uint208(e){return wt(e,208)}static uint216(e){return wt(e,216)}static uint224(e){return wt(e,224)}static uint232(e){return wt(e,232)}static uint240(e){return wt(e,240)}static uint248(e){return wt(e,248)}static uint256(e){return wt(e,256)}static uint(e){return wt(e,256)}static int8(e){return wt(e,-8)}static int16(e){return wt(e,-16)}static int24(e){return wt(e,-24)}static int32(e){return wt(e,-32)}static int40(e){return wt(e,-40)}static int48(e){return wt(e,-48)}static int56(e){return wt(e,-56)}static int64(e){return wt(e,-64)}static int72(e){return wt(e,-72)}static int80(e){return wt(e,-80)}static int88(e){return wt(e,-88)}static int96(e){return wt(e,-96)}static int104(e){return wt(e,-104)}static int112(e){return wt(e,-112)}static int120(e){return wt(e,-120)}static int128(e){return wt(e,-128)}static int136(e){return wt(e,-136)}static int144(e){return wt(e,-144)}static int152(e){return wt(e,-152)}static int160(e){return wt(e,-160)}static int168(e){return wt(e,-168)}static int176(e){return wt(e,-176)}static int184(e){return wt(e,-184)}static int192(e){return wt(e,-192)}static int200(e){return wt(e,-200)}static int208(e){return wt(e,-208)}static int216(e){return wt(e,-216)}static int224(e){return wt(e,-224)}static int232(e){return wt(e,-232)}static int240(e){return wt(e,-240)}static int248(e){return wt(e,-248)}static int256(e){return wt(e,-256)}static int(e){return wt(e,-256)}static bytes1(e){return hr(e,1)}static bytes2(e){return hr(e,2)}static bytes3(e){return hr(e,3)}static bytes4(e){return hr(e,4)}static bytes5(e){return hr(e,5)}static bytes6(e){return hr(e,6)}static bytes7(e){return hr(e,7)}static bytes8(e){return hr(e,8)}static bytes9(e){return hr(e,9)}static bytes10(e){return hr(e,10)}static bytes11(e){return hr(e,11)}static bytes12(e){return hr(e,12)}static bytes13(e){return hr(e,13)}static bytes14(e){return hr(e,14)}static bytes15(e){return hr(e,15)}static bytes16(e){return hr(e,16)}static bytes17(e){return hr(e,17)}static bytes18(e){return hr(e,18)}static bytes19(e){return hr(e,19)}static bytes20(e){return hr(e,20)}static bytes21(e){return hr(e,21)}static bytes22(e){return hr(e,22)}static bytes23(e){return hr(e,23)}static bytes24(e){return hr(e,24)}static bytes25(e){return hr(e,25)}static bytes26(e){return hr(e,26)}static bytes27(e){return hr(e,27)}static bytes28(e){return hr(e,28)}static bytes29(e){return hr(e,29)}static bytes30(e){return hr(e,30)}static bytes31(e){return hr(e,31)}static bytes32(e){return hr(e,32)}static address(e){return new Lh(Uh,"address",e)}static bool(e){return new Lh(Uh,"bool",!!e)}static bytes(e){return new Lh(Uh,"bytes",e)}static string(e){return new Lh(Uh,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Lh(Uh,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===QV}static dereference(e,n){if(Lh.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Yy=new WeakMap;let Fo=Lh;class znt extends Gf{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Fo.dereference(n,"string");try{r=Nr(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return Nr(ym(e.readValue(),20))}}class Hnt extends Gf{constructor(n){super(n.name,n.type,"_",n.dynamic);ue(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function qce(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return xe(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),xe(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else oe(!1,"invalid tuple value","tuple",n);oe(e.length===r.length,"types/value length mismatch","tuple",n);let s=new XL,i=new XL,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Vce(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(uo(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(uo(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),oC.fromItems(n,r)}class Gnt extends Gf{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);ue(this,"coder");ue(this,"length");en(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=Fo.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),nce(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return qce(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),xe(r*da<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*da,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new Hnt(this.coder));return Vce(n,s)}}class qnt extends Gf{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Fo.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Kce extends Gf{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=oa(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class Vnt extends Kce{constructor(e){super("bytes",e)}decode(e){return rt(super.decode(e))}}class Knt extends Gf{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);ue(this,"size");en(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=oa(Fo.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return rt(n.readBytes(this.size))}}const Ynt=new Uint8Array([]);class Qnt extends Gf{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(Ynt)}decode(e){return e.readBytes(0),null}}const Jnt=BigInt(0),Znt=BigInt(1),Xnt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class ert extends Gf{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);ue(this,"size");ue(this,"signed");en(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=St(Fo.dereference(r,this.type)),i=d_(Xnt,da*8);if(this.signed){let o=d_(i,this.size*8-1);(s>o||s<-(o+Znt))&&this._throwError("value out-of-bounds",r),s=ice(s,8*da)}else(s<Jnt||s>d_(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=d_(n.readValue(),this.size*8);return this.signed&&(r=Jet(r,this.size*8)),r}}class trt extends Kce{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,Cf(Fo.dereference(n,"string")))}decode(e){return Bk(super.decode(e))}}class zx extends Gf{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);ue(this,"coders");en(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=Fo.dereference(r,"tuple");return qce(n,this.coders,s)}decode(n){return Vce(n,this.coders)}}function DM(t,e){return{address:Nr(t),storageKeys:e.map((n,r)=>(oe(ls(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function _w(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(oe(n.length===2,"invalid slot set",`value[${r}]`,n),DM(n[0],n[1])):(oe(n!=null&&typeof n=="object","invalid address-slot set","value",t),DM(n.address,n.storageKeys)));oe(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return DM(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Yce(t){return{address:Nr(t.address),nonce:St(t.nonce!=null?t.nonce:0),chainId:St(t.chainId!=null?t.chainId:0),signature:lc.from(t.signature)}}function nrt(t){let e;return typeof t=="string"?e=LS.computePublicKey(t,!1):e=t.publicKey,Nr(li("0x"+e.substring(4)).substring(26))}function rrt(t,e){return nrt(LS.recoverPublicKey(t,e))}const Bi=BigInt(0),srt=BigInt(2),irt=BigInt(27),ort=BigInt(28),art=BigInt(35),crt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),MM=4096*32;function lrt(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Ln(t.blobToKzgCommitment(rt(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Ln(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Ln(t.blobToKZGCommitment(rt(r)));oe(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Ln(t.computeBlobProof(rt(r),rt(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Ln(t.computeBlobKZGProof(rt(r),rt(s)));oe(!1,"unsupported KZG library","kzg",t)}}}function JV(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=QC(e).substring(4),"0x"+n}function JC(t){return t==="0x"?null:Nr(t)}function uO(t,e){try{return _w(t)}catch(n){oe(!1,n.message,e,t)}}function urt(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:JC(s[1]),nonce:Hr(s[2],"nonce"),chainId:Hr(s[0],"chainId"),signature:lc.from({yParity:Aw(s[3],"yParity"),r:Uf(s[4],32),s:Uf(s[5],32)})})}return n}catch(n){oe(!1,n.message,e,t)}}function Aw(t,e){return t==="0x"?0:$n(t,e)}function Hr(t,e){if(t==="0x")return Bi;const n=St(t,e);return oe(n<=crt,"value exceeds uint size",e,n),n}function Jn(t,e){const n=St(t,"value"),r=Ci(n);return oe(r.length<=32,"value too large",`tx.${e}`,n),r}function dO(t){return _w(t).map(e=>[e.address,e.storageKeys])}function drt(t){return t.map(e=>[Jn(e.chainId,"chainId"),e.address,Jn(e.nonce,"nonce"),Jn(e.signature.yParity,"yParity"),Ci(e.signature.r),Ci(e.signature.s)])}function hrt(t,e){oe(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)oe(ls(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function frt(t){const e=pN(t);oe(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Aw(e[0],"nonce"),gasPrice:Hr(e[1],"gasPrice"),gasLimit:Hr(e[2],"gasLimit"),to:JC(e[3]),value:Hr(e[4],"value"),data:rt(e[5]),chainId:Bi};if(e.length===6)return n;const r=Hr(e[6],"v"),s=Hr(e[7],"r"),i=Hr(e[8],"s");if(s===Bi&&i===Bi)n.chainId=r;else{let o=(r-art)/srt;o<Bi&&(o=Bi),n.chainId=o,oe(o!==Bi||r===irt||r===ort,"non-canonical legacy v","v",e[6]),n.signature=lc.from({r:Uf(e[7],32),s:Uf(e[8],32),v:r})}return n}function prt(t,e){const n=[Jn(t.nonce,"nonce"),Jn(t.gasPrice||0,"gasPrice"),Jn(t.gasLimit,"gasLimit"),t.to||"0x",Jn(t.value,"value"),t.data];let r=Bi;if(t.chainId!=Bi)r=St(t.chainId,"tx.chainId"),oe(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==Bi&&(n.push(Ci(r)),n.push("0x"),n.push("0x")),bm(n);let s=BigInt(27+e.yParity);return r!==Bi?s=lc.getChainIdV(r,e.v):BigInt(e.v)!==s&&oe(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Ci(s)),n.push(Ci(e.r)),n.push(Ci(e.s)),bm(n)}function hO(t,e){let n;try{if(n=Aw(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{oe(!1,"invalid yParity","yParity",e[0])}const r=Uf(e[1],32),s=Uf(e[2],32),i=lc.from({r,s,yParity:n});t.signature=i}function grt(t){const e=pN(Ln(t).slice(1));oe(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",rt(t));const n={type:2,chainId:Hr(e[0],"chainId"),nonce:Aw(e[1],"nonce"),maxPriorityFeePerGas:Hr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Hr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Hr(e[4],"gasLimit"),to:JC(e[5]),value:Hr(e[6],"value"),data:rt(e[7]),accessList:uO(e[8],"accessList")};return e.length===9||hO(n,e.slice(9)),n}function mrt(t,e){const n=[Jn(t.chainId,"chainId"),Jn(t.nonce,"nonce"),Jn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Jn(t.maxFeePerGas||0,"maxFeePerGas"),Jn(t.gasLimit,"gasLimit"),t.to||"0x",Jn(t.value,"value"),t.data,dO(t.accessList||[])];return e&&(n.push(Jn(e.yParity,"yParity")),n.push(Ci(e.r)),n.push(Ci(e.s))),Vs(["0x02",bm(n)])}function yrt(t){const e=pN(Ln(t).slice(1));oe(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",rt(t));const n={type:1,chainId:Hr(e[0],"chainId"),nonce:Aw(e[1],"nonce"),gasPrice:Hr(e[2],"gasPrice"),gasLimit:Hr(e[3],"gasLimit"),to:JC(e[4]),value:Hr(e[5],"value"),data:rt(e[6]),accessList:uO(e[7],"accessList")};return e.length===8||hO(n,e.slice(8)),n}function wrt(t,e){const n=[Jn(t.chainId,"chainId"),Jn(t.nonce,"nonce"),Jn(t.gasPrice||0,"gasPrice"),Jn(t.gasLimit,"gasLimit"),t.to||"0x",Jn(t.value,"value"),t.data,dO(t.accessList||[])];return e&&(n.push(Jn(e.yParity,"recoveryParam")),n.push(Ci(e.r)),n.push(Ci(e.s))),Vs(["0x01",bm(n)])}function brt(t){let e=pN(Ln(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];oe(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),oe(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),oe(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),oe(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),oe(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}oe(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",rt(t));const s={type:3,chainId:Hr(e[0],"chainId"),nonce:Aw(e[1],"nonce"),maxPriorityFeePerGas:Hr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Hr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Hr(e[4],"gasLimit"),to:JC(e[5]),value:Hr(e[6],"value"),data:rt(e[7]),accessList:uO(e[8],"accessList"),maxFeePerBlobGas:Hr(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),oe(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),oe(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)oe(ls(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||hO(s,e.slice(11)),s}function vrt(t,e,n){const r=[Jn(t.chainId,"chainId"),Jn(t.nonce,"nonce"),Jn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Jn(t.maxFeePerGas||0,"maxFeePerGas"),Jn(t.gasLimit,"gasLimit"),t.to||US,Jn(t.value,"value"),t.data,dO(t.accessList||[]),Jn(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),hrt(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(Jn(e.yParity,"yParity")),r.push(Ci(e.r)),r.push(Ci(e.s)),n)?Vs(["0x03",bm([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Vs(["0x03",bm(r)])}function Ert(t){const e=pN(Ln(t).slice(1));oe(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",rt(t));const n={type:4,chainId:Hr(e[0],"chainId"),nonce:Aw(e[1],"nonce"),maxPriorityFeePerGas:Hr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Hr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Hr(e[4],"gasLimit"),to:JC(e[5]),value:Hr(e[6],"value"),data:rt(e[7]),accessList:uO(e[8],"accessList"),authorizationList:urt(e[9],"authorizationList")};return e.length===10||hO(n,e.slice(10)),n}function Crt(t,e){const n=[Jn(t.chainId,"chainId"),Jn(t.nonce,"nonce"),Jn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Jn(t.maxFeePerGas||0,"maxFeePerGas"),Jn(t.gasLimit,"gasLimit"),t.to||"0x",Jn(t.value,"value"),t.data,dO(t.accessList||[]),drt(t.authorizationList||[])];return e&&(n.push(Jn(e.yParity,"yParity")),n.push(Ci(e.r)),n.push(Ci(e.s))),Vs(["0x04",bm(n)])}var gu,Hv,Gv,qv,Vv,Kv,Yv,Qv,Jv,Zv,Xv,eE,Qy,tg,wd,ng,tE,nE,$T;const hd=class hd{constructor(){re(this,nE);re(this,gu);re(this,Hv);re(this,Gv);re(this,qv);re(this,Vv);re(this,Kv);re(this,Yv);re(this,Qv);re(this,Jv);re(this,Zv);re(this,Xv);re(this,eE);re(this,Qy);re(this,tg);re(this,wd);re(this,ng);re(this,tE);q(this,gu,null),q(this,Hv,null),q(this,qv,0),q(this,Vv,Bi),q(this,Kv,null),q(this,Yv,null),q(this,Qv,null),q(this,Gv,"0x"),q(this,Jv,Bi),q(this,Zv,Bi),q(this,Xv,null),q(this,eE,null),q(this,Qy,null),q(this,tg,null),q(this,wd,null),q(this,ng,null),q(this,tE,null)}get type(){return R(this,gu)}set type(e){switch(e){case null:q(this,gu,null);break;case 0:case"legacy":q(this,gu,0);break;case 1:case"berlin":case"eip-2930":q(this,gu,1);break;case 2:case"london":case"eip-1559":q(this,gu,2);break;case 3:case"cancun":case"eip-4844":q(this,gu,3);break;case 4:case"pectra":case"eip-7702":q(this,gu,4);break;default:oe(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=R(this,Hv);return e==null&&this.type===3?US:e}set to(e){q(this,Hv,e==null?null:Nr(e))}get nonce(){return R(this,qv)}set nonce(e){q(this,qv,$n(e,"value"))}get gasLimit(){return R(this,Vv)}set gasLimit(e){q(this,Vv,St(e))}get gasPrice(){const e=R(this,Kv);return e==null&&(this.type===0||this.type===1)?Bi:e}set gasPrice(e){q(this,Kv,e==null?null:St(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=R(this,Yv);return e??(this.type===2||this.type===3?Bi:null)}set maxPriorityFeePerGas(e){q(this,Yv,e==null?null:St(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=R(this,Qv);return e??(this.type===2||this.type===3?Bi:null)}set maxFeePerGas(e){q(this,Qv,e==null?null:St(e,"maxFeePerGas"))}get data(){return R(this,Gv)}set data(e){q(this,Gv,rt(e))}get value(){return R(this,Jv)}set value(e){q(this,Jv,St(e,"value"))}get chainId(){return R(this,Zv)}set chainId(e){q(this,Zv,St(e))}get signature(){return R(this,Xv)||null}set signature(e){q(this,Xv,e==null?null:lc.from(e))}get accessList(){const e=R(this,eE)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){q(this,eE,e==null?null:_w(e))}get authorizationList(){const e=R(this,tE)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){q(this,tE,e==null?null:e.map(n=>Yce(n)))}get maxFeePerBlobGas(){const e=R(this,Qy);return e==null&&this.type===3?Bi:e}set maxFeePerBlobGas(e){q(this,Qy,e==null?null:St(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=R(this,tg);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){oe(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)oe(ls(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}q(this,tg,e)}get blobs(){return R(this,ng)==null?null:R(this,ng).map(e=>Object.assign({},e))}set blobs(e){if(e==null){q(this,ng,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(yF(i)){xe(R(this,wd),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Ln(i);if(oe(o.length<=MM,"blob is too large",`blobs[${s}]`,i),o.length!==MM){const l=new Uint8Array(MM);l.set(o),o=l}const a=R(this,wd).blobToKzgCommitment(o),c=rt(R(this,wd).computeBlobKzgProof(o,a));n.push({data:rt(o),commitment:rt(a),proof:c}),r.push(JV(1,a))}else{const o=rt(i.commitment);n.push({data:rt(i.data),commitment:o,proof:rt(i.proof)}),r.push(JV(1,o))}}q(this,ng,n),q(this,tg,r)}get kzg(){return R(this,wd)}set kzg(e){e==null?q(this,wd,null):q(this,wd,lrt(e))}get hash(){return this.signature==null?null:li(Ae(this,nE,$T).call(this,!0,!1))}get unsignedHash(){return li(this.unsignedSerialized)}get from(){return this.signature==null?null:rrt(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:LS.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return Ae(this,nE,$T).call(this,!0,!0)}get unsignedSerialized(){return Ae(this,nE,$T).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=R(this,Qy)!=null||R(this,tg);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&xe(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),xe(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),xe(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return hd.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new hd;if(typeof e=="string"){const r=Ln(e);if(r[0]>=127)return hd.from(frt(r));switch(r[0]){case 1:return hd.from(yrt(r));case 2:return hd.from(grt(r));case 3:return hd.from(brt(r));case 4:return hd.from(Ert(r))}xe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new hd;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=lc.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(oe(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),oe(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(oe(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),oe(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};gu=new WeakMap,Hv=new WeakMap,Gv=new WeakMap,qv=new WeakMap,Vv=new WeakMap,Kv=new WeakMap,Yv=new WeakMap,Qv=new WeakMap,Jv=new WeakMap,Zv=new WeakMap,Xv=new WeakMap,eE=new WeakMap,Qy=new WeakMap,tg=new WeakMap,wd=new WeakMap,ng=new WeakMap,tE=new WeakMap,nE=new WeakSet,$T=function(e,n){xe(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return prt(this,r);case 1:return wrt(this,r);case 2:return mrt(this,r);case 3:return vrt(this,r,n?this.blobs:null);case 4:return Crt(this,r)}xe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let Lk=hd;function Q0(t){return li(Cf(t))}var _rt="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const ZV=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),XV=4;function Art(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let I=1;I<r;I++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let m=0;for(let I=0;I<d;I++)m=m<<1|u();let y=[],w=0,C=h;for(;;){let I=Math.floor(((m-w+1)*s-1)/C),k=0,P=r;for(;P-k>1;){let H=k+P>>>1;I<i[H]?P=H:k=H}if(k==0)break;y.push(k);let U=w+Math.floor(C*i[k]/s),M=w+Math.floor(C*i[k+1]/s)-1;for(;!((U^M)&f);)m=m<<1&g|u(),U=U<<1&g,M=M<<1&g|1;for(;U&~M&p;)m=m&f|m<<1&g>>>1|u(),U=U<<1^f,M=(M^f)<<1|f|1;w=U,C=1+M-U}let N=r-4;return y.map(I=>{switch(I-N){case 3:return N+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return N+256+(t[a++]<<8|t[a++]);case 1:return N+t[a++];default:return I-1}})}function Srt(t){let e=0;return()=>t[e++]}function Qce(t){return Srt(Art(Irt(t)))}function Irt(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function Nrt(t){return t&1?~t>>1:t>>1}function xrt(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=Nrt(e());return n}function $S(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Jce(t){return FS(()=>{let e=$S(t);if(e.length)return e})}function Zce(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(Trt(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(Rrt(n,t))}return e.flat()}function FS(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Xce(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)xrt(t,n).forEach((i,o)=>r[o].push(i));return r}function Trt(t,e){let n=1+e(),r=e(),s=FS(e);return Xce(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function Rrt(t,e){let n=1+e();return Xce(n,1+t,e).map(s=>[s[0],s.slice(1)])}function krt(t){let e=[],n=$S(t);return s(r([]),[]),e;function r(i){let o=t(),a=FS(()=>{let c=$S(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function Prt(t){return t.toString(16).toUpperCase().padStart(2,"0")}function ele(t){return`{${Prt(t)}}`}function Ort(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function dC(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function Drt(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var Mrt="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const jS=44032,$k=4352,Fk=4449,jk=4519,tle=19,nle=21,hC=28,Wk=nle*hC,Brt=tle*Wk,Urt=jS+Brt,Lrt=$k+tle,$rt=Fk+nle,Frt=jk+hC;function f_(t){return t>>24&255}function rle(t){return t&16777215}let a6,eK,c6,FT;function jrt(){let t=Qce(Mrt);a6=new Map(Jce(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),eK=new Set($S(t)),c6=new Map,FT=new Map;for(let[e,n]of Zce(t)){if(!eK.has(e)&&n.length==2){let[r,s]=n,i=FT.get(r);i||(i=new Map,FT.set(r,i)),i.set(s,e)}c6.set(e,n.reverse())}}function sle(t){return t>=jS&&t<Urt}function Wrt(t,e){if(t>=$k&&t<Lrt&&e>=Fk&&e<$rt)return jS+(t-$k)*Wk+(e-Fk)*hC;if(sle(t)&&e>jk&&e<Frt&&(t-jS)%hC==0)return t+(e-jk);{let n=FT.get(t);return n&&(n=n.get(e),n)?n:-1}}function ile(t){a6||jrt();let e=[],n=[],r=!1;function s(i){let o=a6.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(sle(i)){let o=i-jS,a=o/Wk|0,c=o%Wk/hC|0,l=o%hC;s($k+a),s(Fk+c),l>0&&s(jk+l)}else{let o=c6.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=f_(e[0]);for(let o=1;o<e.length;o++){let a=f_(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=f_(e[--c]),i<=a))break}i=f_(e[o])}}return e}function zrt(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=f_(i),a=rle(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=Wrt(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function ole(t){return ile(t).map(rle)}function Hrt(t){return zrt(ile(t))}const tK=45,ale=".",cle=65039,lle=1,zk=t=>Array.from(t);function WS(t,e){return t.P.has(e)||t.Q.has(e)}class Grt extends Array{get is_emoji(){return!0}}let l6,ule,xy,u6,dle,bv,BM,_b,ey,nK,d6;function xF(){if(l6)return;let t=Qce(_rt);const e=()=>$S(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));l6=new Map(Zce(t)),ule=n(),xy=e(),u6=new Set(e().map(u=>xy[u])),xy=new Set(xy),dle=n(),n();let s=Jce(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};bv=FS(u=>{let d=FS(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=dC(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),BM=n(),_b=new Map;let a=e().concat(zk(BM)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),BM.has(u)||_b.set(u,f)});for(let{V:u,M:d}of new Set(_b.values())){let h=[];for(let p of u){let g=bv.filter(y=>WS(y,p)),m=h.find(({G:y})=>g.some(w=>y.has(w)));m||(m={G:new Set,V:[]},h.push(m)),m.V.push(p),r(m.G,g)}let f=h.flatMap(p=>zk(p.G));for(let{G:p,V:g}of h){let m=new Set(f.filter(y=>!p.has(y)));for(let y of g)d.set(y,m)}}ey=new Set;let c=new Set;const l=u=>ey.has(u)?c.add(u):ey.add(u);for(let u of bv){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of ey)!_b.has(u)&&!c.has(u)&&_b.set(u,lle);r(ey,ole(ey)),nK=krt(t).map(u=>Grt.from(u)).sort(Drt),d6=new Map;for(let u of nK){let d=[d6];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===cle?d.push(...f):d=f}for(let h of d)h.V=u}}function TF(t){return(hle(t)?"":`${RF(fO([t]))} `)+ele(t)}function RF(t){return`"${t}"`}function qrt(t){if(t.length>=4&&t[2]==tK&&t[3]==tK)throw new Error(`invalid label extension: "${dC(t.slice(0,4))}"`)}function Vrt(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function Krt(t){let e=t[0],n=ZV.get(e);if(n)throw Z_(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=ZV.get(e);if(o){if(s==i)throw Z_(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw Z_(`trailing ${n}`)}function fO(t,e=1/0,n=ele){let r=[];Yrt(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];hle(a)&&(r.push(dC(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(dC(t.slice(s,i))),r.join("")}function Yrt(t){return xF(),xy.has(t)}function hle(t){return xF(),dle.has(t)}function Qrt(t){return est(Jrt(t,Hrt,rst))}function Jrt(t,e,n){if(!t)return[];xF();let r=0;return t.split(ale).map(s=>{let i=Ort(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=nst(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(Vrt(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))qrt(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(xy.has(u[0]))throw Z_("leading combining mark");for(let g=1;g<c;g++){let m=a[g];if(!m.is_emoji&&xy.has(m[0]))throw Z_(`emoji + combining mark: "${dC(a[g-1])} + ${fO([m[0]])}"`)}Krt(u);let f=zk(new Set(h)),[p]=Xrt(f);tst(p,h),Zrt(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function Zrt(t,e){let n,r=[];for(let s of e){let i=_b.get(s);if(i===lle)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):zk(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>WS(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function Xrt(t){let e=bv;for(let n of t){let r=e.filter(s=>WS(s,n));if(!r.length)throw bv.some(s=>WS(s,n))?ple(e[0],n):fle(n);if(e=r,r.length==1)break}return e}function est(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${RF(fO(e,63))}: ${s}`)}return dC(r)}).join(ale)}function fle(t){return new Error(`disallowed character: ${TF(t)}`)}function ple(t,e){let n=TF(e),r=bv.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function Z_(t){return new Error(`illegal placement: ${t}`)}function tst(t,e){for(let n of e)if(!WS(t,n))throw ple(t,n);if(t.M){let n=ole(e);for(let r=1,s=n.length;r<s;r++)if(u6.has(n[r])){let i=r+1;for(let o;i<s&&u6.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${TF(o)}`);if(i-r>XV)throw new Error(`excessive non-spacing marks: ${RF(fO(n.slice(r-1,i)))} (${i-r}/${XV})`);r=i}}}function nst(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=sst(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(ey.has(o))s.push(o);else{let a=l6.get(o);if(a)s.push(...a);else if(!ule.has(o))throw fle(o)}}}return s.length&&r.push(e(s)),r}function rst(t){return t.filter(e=>e!=cle)}function sst(t,e){let n=d6,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const gle=new Uint8Array(32);gle.fill(0);function rK(t){return oe(t.length!==0,"invalid ENS name; empty component","comp",t),t}function mle(t){const e=Cf(ist(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(rK(e.slice(r,s))),r=s+1);return oe(r<e.length,"invalid ENS name; empty component","name",t),n.push(rK(e.slice(r))),n}function ist(t){try{if(t.length===0)throw new Error("empty label");return Qrt(t)}catch(e){oe(!1,`invalid ENS name (${e.message})`,"name",t)}}function h6(t){oe(typeof t=="string","invalid ENS name; not a string","name",t),oe(t.length,"invalid ENS name (empty label)","name",t);let e=gle;const n=mle(t);for(;n.length;)e=li(Vs([e,li(n.pop())]));return rt(e)}function ost(t,e){const n=e;return oe(n<=255,"DNS encoded label cannot exceed 255","length",n),rt(Vs(mle(t).map(r=>{oe(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const yle=new Uint8Array(32);yle.fill(0);const ast=BigInt(-1),wle=BigInt(0),ble=BigInt(1),cst=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function lst(t){const e=Ln(t),n=e.length%32;return n?Vs([e,yle.slice(n)]):rt(e)}const ust=ym(ble,32),dst=ym(wle,32),sK={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},UM=["name","version","chainId","verifyingContract","salt"];function iK(t){return function(e){return oe(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const hst={name:iK("name"),version:iK("version"),chainId:function(t){const e=St(t,"domain.chainId");return oe(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Cu(e)},verifyingContract:function(t){try{return Nr(t).toLowerCase()}catch{}oe(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Ln(t,"domain.salt");return oe(e.length===32,'invalid domain value "salt"',"domain.salt",t),rt(e)}};function LM(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);oe(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=d_(cst,n?r-1:r),i=n?(s+ble)*ast:wle;return function(o){const a=St(o,"value");return oe(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),ym(n?ice(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return oe(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Ln(r);return oe(s.length===n,`invalid length for ${t}`,"value",r),lst(r)}}}switch(t){case"address":return function(e){return Uf(Nr(e),32)};case"bool":return function(e){return e?ust:dst};case"bytes":return function(e){return li(e)};case"string":return function(e){return Q0(e)}}return null}function oK(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function Hx(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var eI,Yh,rE,Yk,vle;const ml=class ml{constructor(e){re(this,Yk);ue(this,"primaryType");re(this,eI);re(this,Yh);re(this,rE);q(this,Yh,new Map),q(this,rE,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=Hx(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),q(this,eI,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){oe(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=Hx(u.type).base;oe(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!LM(d)&&(oe(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);oe(o.length!==0,"missing primary type","types",e),oe(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),en(this,{primaryType:o[0]});function a(c,l){oe(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),R(this,Yh).set(c,oK(c,i[c])+u.map(d=>oK(d,i[d])).join(""))}}get types(){return JSON.parse(R(this,eI))}getEncoder(e){let n=R(this,rE).get(e);return n||(n=Ae(this,Yk,vle).call(this,e),R(this,rE).set(e,n)),n}encodeType(e){const n=R(this,Yh).get(e);return oe(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return li(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(LM(e))return r(e,n);const s=Hx(e).array;if(s)return oe(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});oe(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new ml(e)}static getPrimaryType(e){return ml.from(e).primaryType}static hashStruct(e,n,r){return ml.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=sK[r];oe(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>UM.indexOf(r.name)-UM.indexOf(s.name)),ml.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Vs(["0x1901",ml.hashDomain(e),ml.from(n).hash(r)])}static hash(e,n,r){return li(ml.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!ls(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=ml.from(n);o.visit(r,(a,c)=>(a==="address"&&!ls(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){ml.hashDomain(e);const s={},i=[];UM.forEach(c=>{const l=e[c];l!=null&&(s[c]=hst[c](l),i.push({name:c,type:sK[c]}))});const o=ml.from(n);n=o.types;const a=Object.assign({},n);return oe(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return rt(Ln(l));if(c.match(/^u?int/))return St(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return oe(typeof l=="string","invalid string","value",l),l}oe(!1,"unsupported type","type",c)})}}};eI=new WeakMap,Yh=new WeakMap,rE=new WeakMap,Yk=new WeakSet,vle=function(e){{const s=LM(e);if(s)return s}const n=Hx(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{oe(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return R(this,Yh).has(s)&&(a=a.map(li)),li(Vs(a))}}const r=this.types[e];if(r){const s=Q0(R(this,Yh).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return R(this,Yh).has(c)?li(l):l});return o.unshift(s),Vs(o)}}oe(!1,`unknown type: ${e}`,"type",e)};let Hk=ml;function fa(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const fst="external public payable override",pst=fa(fst.split(" ")),Ele="constant external internal payable private public pure view override",gst=fa(Ele.split(" ")),Cle="constructor error event fallback function receive struct",_le=fa(Cle.split(" ")),Ale="calldata memory storage payable indexed",mst=fa(Ale.split(" ")),yst="tuple returns",wst=[Cle,Ale,yst,Ele].join(" "),bst=fa(wst.split(" ")),vst={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Est=new RegExp("^(\\s*)"),Cst=new RegExp("^([0-9]+)"),_st=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Sle=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Ile=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var eo,mu,tI,f6;const Qk=class Qk{constructor(e){re(this,tI);re(this,eo);re(this,mu);q(this,eo,0),q(this,mu,e.slice())}get offset(){return R(this,eo)}get length(){return R(this,mu).length-R(this,eo)}clone(){return new Qk(R(this,mu))}reset(){q(this,eo,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=Ae(this,tI,f6).call(this,R(this,eo)+1,e.match+1);return q(this,eo,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;R(this,eo)<e.match-1;){const r=this.peek().linkNext;n.push(Ae(this,tI,f6).call(this,R(this,eo)+1,r)),q(this,eo,r)}return q(this,eo,e.match+1),n}peek(){if(R(this,eo)>=R(this,mu).length)throw new Error("out-of-bounds");return R(this,mu)[R(this,eo)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Zf(this,eo)._++,e}toString(){const e=[];for(let n=R(this,eo);n<R(this,mu).length;n++){const r=R(this,mu)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};eo=new WeakMap,mu=new WeakMap,tI=new WeakSet,f6=function(e=0,n=0){return new Qk(R(this,mu).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Wu=Qk;function xm(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(Est);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=vst[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=$n(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(_st),a){if(c.text=a[1],i+=c.text.length,bst.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Ile)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(Cst),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Wu(e.map(o=>Object.freeze(o)))}function aK(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function pO(t,e){if(e.peekKeyword(_le)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function Lf(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Nle(t){let e=Lf(t,gst);return aK(e,fa("constant payable nonpayable".split(" "))),aK(e,fa("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function _f(t,e){return t.popParams().map(n=>yo.from(n,e))}function xle(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return St(t.pop().text);throw new Error("invalid gas")}return null}function J0(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const Ast=new RegExp(/^(.*)\[([0-9]*)\]$/);function cK(t){const e=t.match(Ile);if(oe(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);oe(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);oe(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const Ds={},hc=Symbol.for("_ethers_internal"),lK="_ParamTypeInternal",uK="_ErrorInternal",dK="_EventInternal",hK="_ConstructorInternal",fK="_FallbackInternal",pK="_FunctionInternal",gK="_StructInternal";var sE,jT;const yl=class yl{constructor(e,n,r,s,i,o,a,c){re(this,sE);ue(this,"name");ue(this,"type");ue(this,"baseType");ue(this,"indexed");ue(this,"components");ue(this,"arrayLength");ue(this,"arrayChildren");if(sO(e,Ds,"ParamType"),Object.defineProperty(this,hc,{value:lK}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");en(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return Ae(this,sE,jT).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(yl.isParamType(e))return e;if(typeof e=="string")try{return yl.from(xm(e),n)}catch{oe(!1,"invalid param type","obj",e)}else if(e instanceof Wu){let a="",c="",l=null;Lf(e,fa(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>yl.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=cK(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new yl(Ds,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(Lf(e,mst).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new yl(Ds,p,a,c,h,l,d,u)}const r=e.name;oe(!r||typeof r=="string"&&r.match(Sle),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(oe(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(Ast);if(o){const a=parseInt(o[2]||"-1"),c=yl.from({type:o[1],components:e.components});return new yl(Ds,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>yl.from(l)):null;return new yl(Ds,r||"",i,"tuple",s,a,null,null)}return i=cK(e.type),new yl(Ds,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[hc]===lK}};sE=new WeakSet,jT=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;Ae(u=o,sE,jT).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;Ae(u=o[l],sE,jT).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let yo=yl;class Z0{constructor(e,n,r){ue(this,"type");ue(this,"inputs");sO(e,Ds,"Fragment"),r=Object.freeze(r.slice()),en(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Z0.from(JSON.parse(e))}catch{}return Z0.from(xm(e))}if(e instanceof Wu)switch(e.peekKeyword(_le)){case"constructor":return pf.from(e);case"error":return Ya.from(e);case"event":return Md.from(e);case"fallback":case"receive":return Wh.from(e);case"function":return Bd.from(e);case"struct":return w0.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return pf.from(e);case"error":return Ya.from(e);case"event":return Md.from(e);case"fallback":case"receive":return Wh.from(e);case"function":return Bd.from(e);case"struct":return w0.from(e)}xe(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}oe(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return pf.isFragment(e)}static isError(e){return Ya.isFragment(e)}static isEvent(e){return Md.isFragment(e)}static isFunction(e){return Bd.isFragment(e)}static isStruct(e){return w0.isFragment(e)}}class gO extends Z0{constructor(n,r,s,i){super(n,r,i);ue(this,"name");oe(typeof s=="string"&&s.match(Sle),"invalid identifier","name",s),i=Object.freeze(i.slice()),en(this,{name:s})}}function zS(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Ya extends gO{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,hc,{value:uK})}get selector(){return Q0(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+zS(e,this.inputs)),n.join(" ")}static from(e){if(Ya.isFragment(e))return e;if(typeof e=="string")return Ya.from(xm(e));if(e instanceof Wu){const n=pO("error",e),r=_f(e);return J0(e),new Ya(Ds,n,r)}return new Ya(Ds,e.name,e.inputs?e.inputs.map(yo.from):[])}static isFragment(e){return e&&e[hc]===uK}}class Md extends gO{constructor(n,r,s,i){super(n,"event",r,s);ue(this,"anonymous");Object.defineProperty(this,hc,{value:dK}),en(this,{anonymous:i})}get topicHash(){return Q0(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+zS(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>yo.from(i)),new Md(Ds,n,r,!1).topicHash}static from(n){if(Md.isFragment(n))return n;if(typeof n=="string")try{return Md.from(xm(n))}catch{oe(!1,"invalid event fragment","obj",n)}else if(n instanceof Wu){const r=pO("event",n),s=_f(n,!0),i=!!Lf(n,fa(["anonymous"])).has("anonymous");return J0(n),new Md(Ds,r,s,i)}return new Md(Ds,n.name,n.inputs?n.inputs.map(r=>yo.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[hc]===dK}}class pf extends Z0{constructor(n,r,s,i,o){super(n,r,s);ue(this,"payable");ue(this,"gas");Object.defineProperty(this,hc,{value:hK}),en(this,{payable:i,gas:o})}format(n){if(xe(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${zS(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(pf.isFragment(n))return n;if(typeof n=="string")try{return pf.from(xm(n))}catch{oe(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Wu){Lf(n,fa(["constructor"]));const r=_f(n),s=!!Lf(n,pst).has("payable"),i=xle(n);return J0(n),new pf(Ds,"constructor",r,s,i)}return new pf(Ds,"constructor",n.inputs?n.inputs.map(yo.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[hc]===hK}}class Wh extends Z0{constructor(n,r,s){super(n,"fallback",r);ue(this,"payable");Object.defineProperty(this,hc,{value:fK}),en(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Wh.isFragment(n))return n;if(typeof n=="string")try{return Wh.from(xm(n))}catch{oe(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Wu){const r=n.toString(),s=n.peekKeyword(fa(["fallback","receive"]));if(oe(s,"type must be fallback or receive","obj",r),n.popKeyword(fa(["fallback","receive"]))==="receive"){const c=_f(n);return oe(c.length===0,"receive cannot have arguments","obj.inputs",c),Lf(n,fa(["payable"])),J0(n),new Wh(Ds,[],!0)}let o=_f(n);o.length?oe(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[yo.from("bytes")];const a=Nle(n);if(oe(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Lf(n,fa(["returns"])).has("returns")){const c=_f(n);oe(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return J0(n),new Wh(Ds,o,a==="payable")}if(n.type==="receive")return new Wh(Ds,[],!0);if(n.type==="fallback"){const r=[yo.from("bytes")],s=n.stateMutability==="payable";return new Wh(Ds,r,s)}oe(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[hc]===fK}}class Bd extends gO{constructor(n,r,s,i,o,a){super(n,"function",r,i);ue(this,"constant");ue(this,"outputs");ue(this,"stateMutability");ue(this,"payable");ue(this,"gas");Object.defineProperty(this,hc,{value:pK}),o=Object.freeze(o.slice()),en(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Q0(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+zS(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(zS(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>yo.from(i)),new Bd(Ds,n,"view",r,[],null).selector}static from(n){if(Bd.isFragment(n))return n;if(typeof n=="string")try{return Bd.from(xm(n))}catch{oe(!1,"invalid function fragment","obj",n)}else if(n instanceof Wu){const s=pO("function",n),i=_f(n),o=Nle(n);let a=[];Lf(n,fa(["returns"])).has("returns")&&(a=_f(n));const c=xle(n);return J0(n),new Bd(Ds,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Bd(Ds,n.name,r,n.inputs?n.inputs.map(yo.from):[],n.outputs?n.outputs.map(yo.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[hc]===pK}}class w0 extends gO{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,hc,{value:gK})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return w0.from(xm(e))}catch{oe(!1,"invalid struct fragment","obj",e)}else if(e instanceof Wu){const n=pO("struct",e),r=_f(e);return J0(e),new w0(Ds,n,r)}return new w0(Ds,e.name,e.inputs?e.inputs.map(yo.from):[])}static isFragment(e){return e&&e[hc]===gK}}const Gu=new Map;Gu.set(0,"GENERIC_PANIC");Gu.set(1,"ASSERT_FALSE");Gu.set(17,"OVERFLOW");Gu.set(18,"DIVIDE_BY_ZERO");Gu.set(33,"ENUM_RANGE_ERROR");Gu.set(34,"BAD_STORAGE_DATA");Gu.set(49,"STACK_UNDERFLOW");Gu.set(50,"ARRAY_RANGE_ERROR");Gu.set(65,"OUT_OF_MEMORY");Gu.set(81,"UNINITIALIZED_FUNCTION_CALL");const Sst=new RegExp(/^bytes([0-9]*)$/),Ist=new RegExp(/^(u?int)([0-9]*)$/);let $M=null,mK=1024;function Nst(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Ln(n);if(n=rt(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(rt(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(rt(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Gu.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?Nr(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Nr(e.from)),Ss(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var rg,Ab;const Jk=class Jk{constructor(){re(this,rg)}getDefaultValue(e){const n=e.map(s=>Ae(this,rg,Ab).call(this,yo.from(s)));return new zx(n,"_").defaultValue()}encode(e,n){nce(n.length,e.length,"types/values length mismatch");const r=e.map(o=>Ae(this,rg,Ab).call(this,yo.from(o))),s=new zx(r,"_"),i=new XL;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>Ae(this,rg,Ab).call(this,yo.from(o)));return new zx(s,"_").decode(new e6(n,r,mK))}static _setDefaultMaxInflation(e){oe(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),mK=e}static defaultAbiCoder(){return $M==null&&($M=new Jk),$M}static getBuiltinCallException(e,n,r){return Nst(e,n,r,Jk.defaultAbiCoder())}};rg=new WeakSet,Ab=function(e){if(e.isArray())return new Gnt(Ae(this,rg,Ab).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new zx(e.components.map(r=>Ae(this,rg,Ab).call(this,r)),e.name);switch(e.baseType){case"address":return new znt(e.name);case"bool":return new qnt(e.name);case"string":return new trt(e.name);case"bytes":return new Vnt(e.name);case"":return new Qnt(e.name)}let n=e.type.match(Ist);if(n){let r=parseInt(n[2]||"256");return oe(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new ert(r/8,n[1]==="int",e.name)}if(n=e.type.match(Sst),n){let r=parseInt(n[1]);return oe(r!==0&&r<=32,"invalid bytes length","param",e),new Knt(r,e.name)}oe(!1,"invalid type","type",e.type)};let HS=Jk;class xst{constructor(e,n,r){ue(this,"fragment");ue(this,"name");ue(this,"signature");ue(this,"topic");ue(this,"args");const s=e.name,i=e.format();en(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class Tst{constructor(e,n,r,s){ue(this,"fragment");ue(this,"name");ue(this,"args");ue(this,"signature");ue(this,"selector");ue(this,"value");const i=e.name,o=e.format();en(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class Rst{constructor(e,n,r){ue(this,"fragment");ue(this,"name");ue(this,"args");ue(this,"signature");ue(this,"selector");const s=e.name,i=e.format();en(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class yK{constructor(e){ue(this,"hash");ue(this,"_isIndexed");en(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const wK={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},bK={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&wK[t.toString()]&&(e=wK[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var bd,vd,Ed,Oo,qd,WT,zT;const hy=class hy{constructor(e){re(this,qd);ue(this,"fragments");ue(this,"deploy");ue(this,"fallback");ue(this,"receive");re(this,bd);re(this,vd);re(this,Ed);re(this,Oo);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,q(this,Ed,new Map),q(this,bd,new Map),q(this,vd,new Map);const r=[];for(const o of n)try{r.push(Z0.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}en(this,{fragments:Object.freeze(r)});let s=null,i=!1;q(this,Oo,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}en(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(oe(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=R(this,Ed);break;case"event":c=R(this,vd);break;case"error":c=R(this,bd);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||en(this,{deploy:pf.from("constructor()")}),en(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return HS.defaultAbiCoder()}getFunctionName(e){const n=Ae(this,qd,WT).call(this,e,null,!1);return oe(n,"no matching function","key",e),n.name}hasFunction(e){return!!Ae(this,qd,WT).call(this,e,null,!1)}getFunction(e,n){return Ae(this,qd,WT).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(R(this,Ed).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(R(this,Ed).get(s),r)}}getEventName(e){const n=Ae(this,qd,zT).call(this,e,null,!1);return oe(n,"no matching event","key",e),n.name}hasEvent(e){return!!Ae(this,qd,zT).call(this,e,null,!1)}getEvent(e,n){return Ae(this,qd,zT).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(R(this,vd).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(R(this,vd).get(s),r)}}getError(e,n){if(ls(e)){const s=e.toLowerCase();if(bK[s])return Ya.from(bK[s].signature);for(const i of R(this,bd).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of R(this,bd))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Ya.from("error Error(string)"):e==="Panic"?Ya.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");oe(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Ya.from(e).format(),e==="Error(string)")return Ya.from("error Error(string)");if(e==="Panic(uint256)")return Ya.from("error Panic(uint256)");const r=R(this,bd).get(e);return r||null}forEachError(e){const n=Array.from(R(this,bd).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(R(this,bd).get(s),r)}}_decodeParams(e,n){return R(this,Oo).decode(e,n)}_encodeParams(e,n){return R(this,Oo).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);oe(r,"unknown error","fragment",e),e=r}return oe(zs(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,zs(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);oe(r,"unknown error","fragment",e),e=r}return Vs([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);oe(r,"unknown function","fragment",e),e=r}return oe(zs(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,zs(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);oe(r,"unknown function","fragment",e),e=r}return Vs([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);oe(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=oa(n);if(s.length%32===0)try{return R(this,Oo).decode(e.outputs,s)}catch{r="could not decode result data"}xe(!1,r,"BAD_DATA",{value:rt(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Ln(e,"data"),s=HS.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=rt(r.slice(0,4)),c=this.getError(a);if(c)try{const l=R(this,Oo).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);oe(r,"unknown function","fragment",e),e=r}return rt(R(this,Oo).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);oe(i,"unknown event","eventFragment",e),e=i}xe(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Q0(o):i.type==="bytes"?li(rt(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=ym(o):i.type.match(/^bytes/)?o=Qet(o,32):i.type==="address"&&R(this,Oo).encode(["address"],[o]),Uf(rt(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){oe(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?oe(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);oe(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),oe(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Q0(c));else if(o.type==="bytes")r.push(li(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(R(this,Oo).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:R(this,Oo).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);oe(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;oe(ls(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(yo.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?R(this,Oo).decode(s,Vs(r)):null,c=R(this,Oo).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new yK(null);else if(o[p])g=new yK(a[h++]);else try{g=a[h++]}catch(m){g=m}else try{g=c[d++]}catch(m){g=m}l.push(g),u.push(f.name||null)}),oC.fromItems(l,u)}parseTransaction(e){const n=Ln(e.data,"tx.data"),r=St(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(rt(n.slice(0,4)));if(!s)return null;const i=R(this,Oo).decode(s.inputs,n.slice(4));return new Tst(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new xst(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=rt(e),r=this.getError(zs(n,0,4));if(!r)return null;const s=R(this,Oo).decode(r.inputs,zs(n,4));return new Rst(r,r.selector,s)}static from(e){return e instanceof hy?e:typeof e=="string"?new hy(JSON.parse(e)):typeof e.formatJson=="function"?new hy(e.formatJson()):typeof e.format=="function"?new hy(e.format("json")):new hy(e)}};bd=new WeakMap,vd=new WeakMap,Ed=new WeakMap,Oo=new WeakMap,qd=new WeakSet,WT=function(e,n,r){if(ls(e)){const i=e.toLowerCase();for(const o of R(this,Ed).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of R(this,Ed))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;Fo.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(Fo.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");oe(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=R(this,Ed).get(Bd.from(e).format());return s||null},zT=function(e,n,r){if(ls(e)){const i=e.toLowerCase();for(const o of R(this,vd).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of R(this,vd))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(Fo.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");oe(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=R(this,vd).get(Md.from(e).format());return s||null};let p6=hy;const Tle=BigInt(0);function vv(t){return t??null}function Xs(t){return t==null?null:t.toString()}class vK{constructor(e,n,r){ue(this,"gasPrice");ue(this,"maxFeePerGas");ue(this,"maxPriorityFeePerGas");en(this,{gasPrice:vv(e),maxFeePerGas:vv(n),maxPriorityFeePerGas:vv(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Xs(e),maxFeePerGas:Xs(n),maxPriorityFeePerGas:Xs(r)}}}function Gk(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=rt(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=St(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=$n(t[s],`request.${s}`));return t.accessList&&(e.accessList=_w(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>yF(s)?rt(s):Object.assign({},s))),e}var Qh;class kst{constructor(e,n){ue(this,"provider");ue(this,"number");ue(this,"hash");ue(this,"timestamp");ue(this,"parentHash");ue(this,"parentBeaconBlockRoot");ue(this,"nonce");ue(this,"difficulty");ue(this,"gasLimit");ue(this,"gasUsed");ue(this,"stateRoot");ue(this,"receiptsRoot");ue(this,"blobGasUsed");ue(this,"excessBlobGas");ue(this,"miner");ue(this,"prevRandao");ue(this,"extraData");ue(this,"baseFeePerGas");re(this,Qh);q(this,Qh,e.transactions.map(r=>typeof r!="string"?new GS(r,n):r)),en(this,{provider:n,hash:vv(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:vv(e.prevRandao),extraData:e.extraData,baseFeePerGas:vv(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return R(this,Qh).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=R(this,Qh).slice();return e.length===0?[]:(xe(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:m}=this;return{_type:"Block",baseFeePerGas:Xs(e),difficulty:Xs(n),extraData:r,gasLimit:Xs(s),gasUsed:Xs(i),blobGasUsed:Xs(this.blobGasUsed),excessBlobGas:Xs(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:m}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return R(this,Qh).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=R(this,Qh)[e];else{const r=e.toLowerCase();for(const s of R(this,Qh))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;oe(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return Pst(this)}}Qh=new WeakMap;class mN{constructor(e,n){ue(this,"provider");ue(this,"transactionHash");ue(this,"blockHash");ue(this,"blockNumber");ue(this,"removed");ue(this,"address");ue(this,"data");ue(this,"topics");ue(this,"index");ue(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());en(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return xe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return xe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return xe(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return Ost(this)}}var nI;class Rle{constructor(e,n){ue(this,"provider");ue(this,"to");ue(this,"from");ue(this,"contractAddress");ue(this,"hash");ue(this,"index");ue(this,"blockHash");ue(this,"blockNumber");ue(this,"logsBloom");ue(this,"gasUsed");ue(this,"blobGasUsed");ue(this,"cumulativeGasUsed");ue(this,"gasPrice");ue(this,"blobGasPrice");ue(this,"type");ue(this,"status");ue(this,"root");re(this,nI);q(this,nI,Object.freeze(e.logs.map(s=>new mN(s,n))));let r=Tle;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),en(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return R(this,nI)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Xs(this.cumulativeGasUsed),from:n,gasPrice:Xs(this.gasPrice),blobGasUsed:Xs(this.blobGasUsed),blobGasPrice:Xs(this.blobGasPrice),gasUsed:Xs(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Ple(this)}reorderedEvent(e){return xe(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),kle(this,e)}}nI=new WeakMap;var sg;const LF=class LF{constructor(e,n){ue(this,"provider");ue(this,"blockNumber");ue(this,"blockHash");ue(this,"index");ue(this,"hash");ue(this,"type");ue(this,"to");ue(this,"from");ue(this,"nonce");ue(this,"gasLimit");ue(this,"gasPrice");ue(this,"maxPriorityFeePerGas");ue(this,"maxFeePerGas");ue(this,"maxFeePerBlobGas");ue(this,"data");ue(this,"value");ue(this,"chainId");ue(this,"signature");ue(this,"accessList");ue(this,"blobVersionedHashes");ue(this,"authorizationList");re(this,sg);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,q(this,sg,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Xs(this.chainId),data:l,from:a,gasLimit:Xs(this.gasLimit),gasPrice:Xs(this.gasPrice),hash:s,maxFeePerGas:Xs(this.maxFeePerGas),maxPriorityFeePerGas:Xs(this.maxPriorityFeePerGas),maxFeePerBlobGas:Xs(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Xs(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await ta({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=R(this,sg),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await ta({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<R(this,sg)&&(o=R(this,sg)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const m of g)if(m===this.hash)return;for(let m=0;m<g.length;m++){const y=await g.getTransaction(m);if(y.from===this.from&&y.nonce===this.nonce){if(a)return null;const w=await this.provider.getTransactionReceipt(y.hash);if(w==null||h-w.blockNumber+1<r)return;let C="replaced";y.data===this.data&&y.to===this.to&&y.value===this.value?C="repriced":y.data==="0x"&&y.from===y.to&&y.value===Tle&&(C="cancelled"),xe(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:y.replaceableTransaction(i),hash:y.hash,receipt:w})}}o++}},l=h=>{if(h==null||h.status!==0)return h;xe(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(y=>y())};if(p.push(()=>{a=!0}),s>0){const y=setTimeout(()=>{g(),f(Ss("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(y)})}const m=async y=>{if(await y.confirmations()>=r){g();try{h(l(y))}catch(w){f(w)}}};if(p.push(()=>{this.provider.off(this.hash,m)}),this.provider.on(this.hash,m),i>=0){const y=async()=>{try{await c()}catch(w){if(uo(w,"TRANSACTION_REPLACED")){g(),f(w);return}}a||this.provider.once("block",y)};p.push(()=>{this.provider.off("block",y)}),this.provider.once("block",y)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return xe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ple(this)}reorderedEvent(e){return xe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),xe(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),kle(this,e)}replaceableTransaction(e){oe(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new LF(this,this.provider);return q(n,sg,e),n}};sg=new WeakMap;let GS=LF;function Pst(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function kle(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Ple(t){return{orphan:"drop-transaction",tx:t}}function Ost(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class kF extends mN{constructor(n,r,s){super(n,n.provider);ue(this,"interface");ue(this,"fragment");ue(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);en(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Ole extends mN{constructor(n,r){super(n,n.provider);ue(this,"error");en(this,{error:r})}}var iE;class Dst extends Rle{constructor(n,r,s){super(s,r);re(this,iE);q(this,iE,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?R(this,iE).getEvent(n.topics[0]):null;if(r)try{return new kF(n,R(this,iE),r)}catch(s){return new Ole(n,s)}return n})}}iE=new WeakMap;var rI;class PF extends GS{constructor(n,r,s){super(s,r);re(this,rI);q(this,rI,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new Dst(R(this,rI),this.provider,s)}}rI=new WeakMap;class Dle extends oce{constructor(n,r,s,i){super(n,r,s);ue(this,"log");en(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Mst extends Dle{constructor(e,n,r,s,i){super(e,n,r,new kF(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);en(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const EK=BigInt(0);function Mle(t){return t&&typeof t.call=="function"}function Ble(t){return t&&typeof t.estimateGas=="function"}function mO(t){return t&&typeof t.resolveName=="function"}function Ule(t){return t&&typeof t.sendTransaction=="function"}function Lle(t){if(t!=null){if(mO(t))return t;if(t.provider)return t.provider}}var sI;class Bst{constructor(e,n,r){re(this,sI);ue(this,"fragment");if(en(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=X0(e.runner,"resolveName"),i=mO(s)?s:null;q(this,sI,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>ha(h,i))):ha(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return R(this,sI)}}sI=new WeakMap;function X0(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Ty(t){return t==null?null:t.provider||null}async function $le(t,e){const n=Fo.dereference(t,"overrides");oe(typeof n=="object","invalid overrides parameter","overrides",t);const r=Gk(n);return oe(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),oe(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function Ust(t,e,n){const r=X0(t,"resolveName"),s=mO(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=Fo.dereference(c,a),a==="address"?ha(c,s):c))))}function Lst(t){const e=async function(o){const a=await $le(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await ha(a.from,Lle(t.runner)));const c=t.interface,l=St(a.value||EK,"overrides.value")===EK,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&oe(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),oe(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return oe(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),oe(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=X0(t.runner,"call");xe(Mle(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw mF(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;xe(Ule(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Ty(t.runner);return new PF(t.interface,l,c)},s=async function(o){const a=X0(t.runner,"estimateGas");return xe(Ble(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return en(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function $st(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return xe(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await $le(l.pop()),d.from&&(d.from=await ha(d.from,Lle(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await Ust(t.runner,u.inputs,l);return Object.assign({},d,await ta({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;xe(Ule(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Ty(t.runner);return new PF(t.interface,h,d)},o=async function(...l){const u=X0(t.runner,"estimateGas");return xe(Ble(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=X0(t.runner,"call");xe(Mle(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw mF(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return en(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return xe(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function Fst(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return xe(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new Bst(t,n(...s),s)};return en(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return xe(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const qk=Symbol.for("_ethersInternal_contract"),Fle=new WeakMap;function jst(t,e){Fle.set(t[qk],e)}function Nc(t){return Fle.get(t[qk])}function Wst(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function OF(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(ls(o,32))return o;const a=t.interface.getEvent(o);return oe(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?ls(e,32)?n=[e]:(r=t.interface.getEvent(e),oe(r,"unknown fragment","event",e),n=[r.topicHash]):Wst(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):oe(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function p_(t,e){const{subs:n}=Nc(t);return n.get((await OF(t,e)).tag)||null}async function CK(t,e,n){const r=Ty(t.runner);xe(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await OF(t,n),{addr:a,subs:c}=Nc(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=m=>{let y=s;if(y==null)try{y=t.interface.getEvent(m.topics[0])}catch{}if(y){const w=y,C=s?t.interface.decodeEventLog(s,m.data,m.topics):[];m6(t,n,C,N=>new Mst(t,N,n,w,m))}else m6(t,n,[],w=>new Dle(t,w,n,m))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let m=f;f=[],await Promise.all(m),r.off(d,h)}},c.set(i,l)}return l}let g6=Promise.resolve();async function zst(t,e,n,r){await g6;const s=await p_(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Nc(t).subs.delete(s.tag)),i>0}async function m6(t,e,n,r){try{await g6}catch{}const s=zst(t,e,n,r);return g6=s,await s}const Gx=["then"];var VK;VK=qk;const X_=class X_{constructor(e,n,r,s){ue(this,"target");ue(this,"interface");ue(this,"runner");ue(this,"filters");ue(this,VK);ue(this,"fallback");oe(typeof e=="string"||Gce(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=p6.from(n);en(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,qk,{value:{}});let o,a=null,c=null;if(s){const d=Ty(r);c=new PF(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(ls(e))a=e,o=Promise.resolve(e);else{const d=X0(r,"resolveName");if(!mO(d))throw Ss("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw Ss("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Nc(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Nc(this).addr=d,d});jst(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||Gx.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!uo(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>Gx.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return en(this,{filters:u}),en(this,{fallback:i.receive||i.fallback?Lst(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||Gx.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!uo(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||Gx.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new X_(this.target,this.interface,e)}attach(e){return new X_(e,this.interface,this.runner)}async getAddress(){return await Nc(this).addrPromise}async getDeployedCode(){const e=Ty(this.runner);xe(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Ty(this.runner);return xe(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Nc(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),$st(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),Fst(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Nc(this),o=s||await i,{fragment:a,topics:c}=await OF(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Ty(this.runner);return xe(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new kF(d,this.interface,h)}catch(f){return new Ole(d,f)}return new mN(d,u)})}async on(e,n){const r=await CK(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await CK(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await m6(this,e,n,null)}async listenerCount(e){if(e){const s=await p_(this,e);return s?s.listeners.length:0}const{subs:n}=Nc(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await p_(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Nc(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await p_(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Nc(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await p_(this,e);if(!n)return this;n.stop(),Nc(this).subs.delete(n.tag)}else{const{subs:n}=Nc(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends X_{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let y6=X_;function Hst(){return y6}class Ev extends Hst(){}function FM(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):oe(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class Gst{constructor(e){ue(this,"name");en(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const jle=new RegExp("^(ipfs)://(.*)$","i"),_K=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),jle,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ig,Jy,og,Sb,Zk,Wle;const Qb=class Qb{constructor(e,n,r){re(this,og);ue(this,"provider");ue(this,"address");ue(this,"name");re(this,ig);re(this,Jy);en(this,{provider:e,address:n,name:r}),q(this,ig,null),q(this,Jy,new Ev(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return R(this,ig)==null&&q(this,ig,(async()=>{try{return await R(this,Jy).supportsInterface("0x9061b923")}catch(e){if(uo(e,"CALL_EXCEPTION"))return!1;throw q(this,ig,null),e}})()),await R(this,ig)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await Ae(this,og,Sb).call(this,"addr(bytes32)");return i==null||i===US?null:i}catch(i){if(uo(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await Ae(this,og,Sb).call(this,"addr(bytes32,uint)",[i]);if(ls(o,20))return Nr(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof Gst&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await Ae(this,og,Sb).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;xe(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await Ae(this,og,Sb).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await Ae(this,og,Sb).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${Xet("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;xe(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<_K.length;r++){const s=n.match(_K[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=FM(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new Ev(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",ym(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=FM(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new wm(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const y=f.body;return y&&e.push({type:"!metadata",value:rt(y)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(jle)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=FM(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return xe(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await Ae(s=Qb,Zk,Wle).call(s,e,r);if(i!=null){const o=new Qb(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};ig=new WeakMap,Jy=new WeakMap,og=new WeakSet,Sb=async function(e,n){n=(n||[]).slice();const r=R(this,Jy).interface;n.unshift(h6(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),xe(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[ost(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await R(this,Jy)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!uo(i,"CALL_EXCEPTION"))throw i}return null},Zk=new WeakSet,Wle=async function(e,n){const r=await Qb.getEnsAddress(e);try{const i=await new Ev(r,["function resolver(bytes32) view returns (address)"],e).resolver(h6(n),{enableCcipRead:!0});return i===US?null:i}catch(s){throw s}return null},re(Qb,Zk);let Vk=Qb;const AK=BigInt(0);function Qn(t,e){return function(n){return n==null?e:t(n)}}function qS(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function yN(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";xe(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function qst(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}oe(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function fC(t){return oe(ls(t,!0),"invalid data","value",t),t}function lo(t){return oe(ls(t,32),"invalid hash","value",t),t}const Vst=yN({address:Nr,blockHash:lo,blockNumber:$n,data:fC,index:$n,removed:Qn(qst,!1),topics:qS(lo),transactionHash:lo,transactionIndex:$n},{index:["logIndex"]});function Kst(t){return Vst(t)}const Yst=yN({hash:Qn(lo),parentHash:lo,parentBeaconBlockRoot:Qn(lo,null),number:$n,timestamp:$n,nonce:Qn(fC),difficulty:St,gasLimit:St,gasUsed:St,stateRoot:Qn(lo,null),receiptsRoot:Qn(lo,null),blobGasUsed:Qn(St,null),excessBlobGas:Qn(St,null),miner:Qn(Nr),prevRandao:Qn(lo,null),extraData:fC,baseFeePerGas:Qn(St)},{prevRandao:["mixHash"]});function Qst(t){const e=Yst(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:zle(n)),e}const Jst=yN({transactionIndex:$n,blockNumber:$n,transactionHash:lo,address:Nr,topics:qS(lo),data:fC,index:$n,blockHash:lo},{index:["logIndex"]});function Zst(t){return Jst(t)}const Xst=yN({to:Qn(Nr,null),from:Qn(Nr,null),contractAddress:Qn(Nr,null),index:$n,root:Qn(rt),gasUsed:St,blobGasUsed:Qn(St,null),logsBloom:Qn(fC),blockHash:lo,hash:lo,logs:qS(Zst),blockNumber:$n,cumulativeGasUsed:St,effectiveGasPrice:Qn(St),blobGasPrice:Qn(St,null),status:Qn($n),type:Qn($n,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function eit(t){return Xst(t)}function zle(t){t.to&&St(t.to)===AK&&(t.to="0x0000000000000000000000000000000000000000");const e=yN({hash:lo,index:Qn($n,void 0),type:n=>n==="0x"||n==null?0:$n(n),accessList:Qn(_w,null),blobVersionedHashes:Qn(qS(lo,!0),null),authorizationList:Qn(qS(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:Nr(n.address),chainId:St(n.chainId),nonce:St(n.nonce),signature:lc.from(r)}},!1),null),blockHash:Qn(lo,null),blockNumber:Qn($n,null),transactionIndex:Qn($n,null),from:Nr,gasPrice:Qn(St),maxPriorityFeePerGas:Qn(St),maxFeePerGas:Qn(St),maxFeePerBlobGas:Qn(St,null),gasLimit:St,to:Qn(Nr,null),value:St,nonce:$n,data:fC,creates:Qn(Nr,null),chainId:Qn(St,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=Wnt(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=lc.from(t.signature):e.signature=lc.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&St(e.blockHash)===AK&&(e.blockHash=null),e}const tit="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class wN{constructor(e){ue(this,"name");en(this,{name:e})}clone(){return new wN(this.name)}}class yO extends wN{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);ue(this,"effectiveBlock");ue(this,"txBase");ue(this,"txCreate");ue(this,"txDataZero");ue(this,"txDataNonzero");ue(this,"txAccessListStorageKey");ue(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),oe(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),en(this,s)}clone(){return new yO(this.effectiveBlock,this)}}class wO extends wN{constructor(n,r){super("org.ethers.plugins.network.Ens");ue(this,"address");ue(this,"targetNetwork");en(this,{address:n||tit,targetNetwork:r??1})}clone(){return new wO(this.address,this.targetNetwork)}}var iI,oI;class nit extends wN{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");re(this,iI);re(this,oI);q(this,iI,n),q(this,oI,r)}get url(){return R(this,iI)}get processFunc(){return R(this,oI)}clone(){return this}}iI=new WeakMap,oI=new WeakMap;const jM=new Map;var oE,aE,ag;const Jb=class Jb{constructor(e,n){re(this,oE);re(this,aE);re(this,ag);q(this,oE,e),q(this,aE,St(n)),q(this,ag,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return R(this,oE)}set name(e){q(this,oE,e)}get chainId(){return R(this,aE)}set chainId(e){q(this,aE,St(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===St(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===St(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===St(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(R(this,ag).values())}attachPlugin(e){if(R(this,ag).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return R(this,ag).set(e.name,e.clone()),this}getPlugin(e){return R(this,ag).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Jb(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new yO;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=_w(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(rit(),e==null)return Jb.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=jM.get(e);if(n)return n();if(typeof e=="bigint")return new Jb("unknown",e);oe(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){oe(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Jb(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new wO(e.ensAddress,e.ensNetwork)),n}oe(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=jM.get(e);r&&oe(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),jM.set(e,n)}};oE=new WeakMap,aE=new WeakMap,ag=new WeakMap;let Ld=Jb;function SK(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function IK(t){return new nit(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:SK(a.maxFee,9),maxPriorityFeePerGas:SK(a.maxPriorityFee,9)}}catch(i){xe(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let NK=!1;function rit(){if(NK)return;NK=!0;function t(e,n,r){const s=function(){const i=new Ld(e,n);return r.ensNetwork!=null&&i.attachPlugin(new wO(null,r.ensNetwork)),i.attachPlugin(new yO),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Ld.register(e,s),Ld.register(n,s),r.altNames&&r.altNames.forEach(i=>{Ld.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[IK("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[IK("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function w6(t){return JSON.parse(JSON.stringify(t))}var Jh,vl,cg,Cd,cE,HT;class sit{constructor(e){re(this,cE);re(this,Jh);re(this,vl);re(this,cg);re(this,Cd);q(this,Jh,e),q(this,vl,null),q(this,cg,4e3),q(this,Cd,-2)}get pollingInterval(){return R(this,cg)}set pollingInterval(e){q(this,cg,e)}start(){R(this,vl)||(q(this,vl,R(this,Jh)._setTimeout(Ae(this,cE,HT).bind(this),R(this,cg))),Ae(this,cE,HT).call(this))}stop(){R(this,vl)&&(R(this,Jh)._clearTimeout(R(this,vl)),q(this,vl,null))}pause(e){this.stop(),e&&q(this,Cd,-2)}resume(){this.start()}}Jh=new WeakMap,vl=new WeakMap,cg=new WeakMap,Cd=new WeakMap,cE=new WeakSet,HT=async function(){try{const e=await R(this,Jh).getBlockNumber();if(R(this,Cd)===-2){q(this,Cd,e);return}if(e!==R(this,Cd)){for(let n=R(this,Cd)+1;n<=e;n++){if(R(this,vl)==null)return;await R(this,Jh).emit("block",n)}q(this,Cd,e)}}catch{}R(this,vl)!=null&&q(this,vl,R(this,Jh)._setTimeout(Ae(this,cE,HT).bind(this),R(this,cg)))};var Zy,Xy,lg;class DF{constructor(e){re(this,Zy);re(this,Xy);re(this,lg);q(this,Zy,e),q(this,lg,!1),q(this,Xy,n=>{this._poll(n,R(this,Zy))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){R(this,lg)||(q(this,lg,!0),R(this,Xy).call(this,-2),R(this,Zy).on("block",R(this,Xy)))}stop(){R(this,lg)&&(q(this,lg,!1),R(this,Zy).off("block",R(this,Xy)))}pause(e){this.stop()}resume(){this.start()}}Zy=new WeakMap,Xy=new WeakMap,lg=new WeakMap;var lE,Zh;class iit extends DF{constructor(n,r){super(n);re(this,lE);re(this,Zh);q(this,lE,r),q(this,Zh,-2)}pause(n){n&&q(this,Zh,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(R(this,lE));s!=null&&(R(this,Zh)===-2?q(this,Zh,s.number):s.number>R(this,Zh)&&(r.emit(R(this,lE),s.number),q(this,Zh,s.number)))}}lE=new WeakMap,Zh=new WeakMap;var Xk;class oit extends DF{constructor(n,r){super(n);re(this,Xk);q(this,Xk,w6(r))}async _poll(n,r){throw new Error("@TODO")}}Xk=new WeakMap;var uE;class ait extends DF{constructor(n,r){super(n);re(this,uE);q(this,uE,r)}async _poll(n,r){const s=await r.getTransactionReceipt(R(this,uE));s&&r.emit(R(this,uE),s)}}uE=new WeakMap;var Xh,dE,hE,ug,El,e2,Hle;class MF{constructor(e,n){re(this,e2);re(this,Xh);re(this,dE);re(this,hE);re(this,ug);re(this,El);q(this,Xh,e),q(this,dE,w6(n)),q(this,hE,Ae(this,e2,Hle).bind(this)),q(this,ug,!1),q(this,El,-2)}start(){R(this,ug)||(q(this,ug,!0),R(this,El)===-2&&R(this,Xh).getBlockNumber().then(e=>{q(this,El,e)}),R(this,Xh).on("block",R(this,hE)))}stop(){R(this,ug)&&(q(this,ug,!1),R(this,Xh).off("block",R(this,hE)))}pause(e){this.stop(),e&&q(this,El,-2)}resume(){this.start()}}Xh=new WeakMap,dE=new WeakMap,hE=new WeakMap,ug=new WeakMap,El=new WeakMap,e2=new WeakSet,Hle=async function(e){if(R(this,El)===-2)return;const n=w6(R(this,dE));n.fromBlock=R(this,El)+1,n.toBlock=e;const r=await R(this,Xh).getLogs(n);if(r.length===0){R(this,El)<e-60&&q(this,El,e-60);return}for(const s of r)R(this,Xh).emit(R(this,dE),s),q(this,El,s.blockNumber)};const cit=BigInt(2),lit=10;function qx(t){return t&&typeof t.then=="function"}function GT(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class Gle{constructor(e){ue(this,"name");en(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function uit(t){return JSON.parse(JSON.stringify(t))}function b6(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function WM(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(ls(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:GT("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:GT("orphan",n),filter:uit(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?b6(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{ls(a)?s.push(a):i.push((async()=>{s.push(await ha(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=b6(s.map(a=>a.toLowerCase()))}return{filter:r,tag:GT("event",r),type:"event"}}oe(!1,"unknown ProviderEvent","event",t)}function zM(){return new Date().getTime()}const dit={cacheTimeout:250,pollingInterval:4e3};var Do,dg,Mo,fE,kc,e0,hg,ef,aI,Cl,pE,gE,Mn,Ac,v6,E6,g_,C6,m_,qT;class hit{constructor(e,n){re(this,Mn);re(this,Do);re(this,dg);re(this,Mo);re(this,fE);re(this,kc);re(this,e0);re(this,hg);re(this,ef);re(this,aI);re(this,Cl);re(this,pE);re(this,gE);if(q(this,gE,Object.assign({},dit,n||{})),e==="any")q(this,e0,!0),q(this,kc,null);else if(e){const r=Ld.from(e);q(this,e0,!1),q(this,kc,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else q(this,e0,!1),q(this,kc,null);q(this,ef,-1),q(this,hg,new Map),q(this,Do,new Map),q(this,dg,new Map),q(this,Mo,null),q(this,fE,!1),q(this,aI,1),q(this,Cl,new Map),q(this,pE,!1)}get pollingInterval(){return R(this,gE).pollingInterval}get provider(){return this}get plugins(){return Array.from(R(this,dg).values())}attachPlugin(e){if(R(this,dg).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return R(this,dg).set(e.name,e.connect(this)),this}getPlugin(e){return R(this,dg).get(e)||null}get disableCcipRead(){return R(this,pE)}set disableCcipRead(e){q(this,pE,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new wm(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}xe(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}xe(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new kst(Qst(e),this)}_wrapLog(e,n){return new mN(Kst(e),this)}_wrapTransactionReceipt(e,n){return new Rle(eit(e),this)}_wrapTransactionResponse(e,n){return new GS(zle(e),this)}_detectNetwork(){xe(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){xe(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=$n(await Ae(this,Mn,Ac).call(this,{method:"getBlockNumber"}),"%response");return R(this,ef)>=0&&q(this,ef,e),e}_getAddress(e){return ha(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(ls(e))return ls(e,32)?e:Cu(e);if(typeof e=="bigint"&&(e=$n(e,"blockTag")),typeof e=="number")return e>=0?Cu(e):R(this,ef)>=0?Cu(R(this,ef)+e):this.getBlockNumber().then(n=>Cu(n+e));oe(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?b6(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=Gk(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=ha(n[s],this);qx(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);qx(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(R(this,kc)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw R(this,kc)===s&&q(this,kc,null),i}})();return q(this,kc,s),(await s).clone()}const e=R(this,kc),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(R(this,e0)?(this.emit("network",r,n),R(this,kc)===e&&q(this,kc,Promise.resolve(r))):xe(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await ta({_block:Ae(this,Mn,C6).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await Ae(this,Mn,Ac).call(this,{method:"getGasPrice"});return St(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await Ae(this,Mn,Ac).call(this,{method:"getPriorityFee"});return St(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*cit+c),new vK(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new wm(r.url),i=await r.processFunc(n,this,s);return new vK(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return qx(n)&&(n=await n),St(await Ae(this,Mn,Ac).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await ta({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await Ae(this,Mn,E6).call(this,Ae(this,Mn,v6).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return St(await Ae(this,Mn,g_).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return $n(await Ae(this,Mn,g_).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return rt(await Ae(this,Mn,g_).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=St(n,"position");return rt(await Ae(this,Mn,g_).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await ta({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=Lk.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await ta({network:this.getNetwork(),params:Ae(this,Mn,C6).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await ta({network:this.getNetwork(),params:Ae(this,Mn,Ac).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await ta({network:this.getNetwork(),params:Ae(this,Mn,Ac).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await Ae(this,Mn,Ac).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await ta({network:this.getNetwork(),result:Ae(this,Mn,Ac).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:rt(n)}async getLogs(e){let n=this._getFilter(e);qx(n)&&(n=await n);const{network:r,params:s}=await ta({network:this.getNetwork(),params:Ae(this,Mn,Ac).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){xe(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Vk.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Nr(e);const n=h6(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await Vk.getEnsAddress(this),i=await new Ev(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===US)return null;const a=await new Ev(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(uo(r,"BAD_DATA")&&r.value==="0x"||uo(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Ss("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){xe(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=R(this,Cl).get(e);n&&(n.timer&&clearTimeout(n.timer),R(this,Cl).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Zf(this,aI)._++,s=()=>{R(this,Cl).delete(r),e()};if(this.paused)R(this,Cl).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);R(this,Cl).set(r,{timer:i,func:s,time:zM()})}return r}_forEachSubscriber(e){for(const n of R(this,Do).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Gle(e.type);case"block":{const n=new sit(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new iit(this,e.type);case"event":return new MF(this,e.filter);case"transaction":return new ait(this,e.hash);case"orphan":return new oit(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of R(this,Do).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),R(this,Mo)!=null&&n.pause(R(this,Mo));break}}async on(e,n){const r=await Ae(this,Mn,qT).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,R(this,Mo)!=null&&r.subscriber.pause(R(this,Mo))),this}async once(e,n){const r=await Ae(this,Mn,qT).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,R(this,Mo)!=null&&r.subscriber.pause(R(this,Mo))),this}async emit(e,...n){const r=await Ae(this,Mn,m_).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new oce(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),R(this,Do).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await Ae(this,Mn,m_).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of R(this,Do).values())n+=r.length;return n}async listeners(e){if(e){const r=await Ae(this,Mn,m_).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of R(this,Do).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await Ae(this,Mn,m_).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),R(this,Do).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await Ae(this,Mn,qT).call(this,e);r&&s.stop(),R(this,Do).delete(n)}else for(const[n,{started:r,subscriber:s}]of R(this,Do))r&&s.stop(),R(this,Do).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return R(this,fE)}destroy(){this.removeAllListeners();for(const e of R(this,Cl).keys())this._clearTimeout(e);q(this,fE,!0)}get paused(){return R(this,Mo)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(q(this,ef,-1),R(this,Mo)!=null){if(R(this,Mo)==!!e)return;xe(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),q(this,Mo,!!e);for(const n of R(this,Cl).values())n.timer&&clearTimeout(n.timer),n.time=zM()-n.time}resume(){if(R(this,Mo)!=null){this._forEachSubscriber(e=>e.resume()),q(this,Mo,null);for(const e of R(this,Cl).values()){let n=e.time;n<0&&(n=0),e.time=zM(),setTimeout(e.func,n)}}}}Do=new WeakMap,dg=new WeakMap,Mo=new WeakMap,fE=new WeakMap,kc=new WeakMap,e0=new WeakMap,hg=new WeakMap,ef=new WeakMap,aI=new WeakMap,Cl=new WeakMap,pE=new WeakMap,gE=new WeakMap,Mn=new WeakSet,Ac=async function(e){const n=R(this,gE).cacheTimeout;if(n<0)return await this._perform(e);const r=GT(e.method,e);let s=R(this,hg).get(r);return s||(s=this._perform(e),R(this,hg).set(r,s),setTimeout(()=>{R(this,hg).get(r)===s&&R(this,hg).delete(r)},n)),await s},v6=async function(e,n,r){xe(r<lit,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=Gk(e);try{return rt(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&mF(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&zs(i.data,0,4)==="0x556f1830"){const o=i.data,a=await ha(s.to,this);let c;try{c=yit(zs(i.data,4))}catch(d){xe(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}xe(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);xe(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Vs([c.selector,mit([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await Ae(this,Mn,v6).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},E6=async function(e){const{value:n}=await ta({network:this.getNetwork(),value:e});return n},g_=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await Ae(this,Mn,E6).call(this,Ae(this,Mn,Ac).call(this,Object.assign(e,{address:s,blockTag:i})))},C6=async function(e,n){if(ls(e,32))return await Ae(this,Mn,Ac).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await Ae(this,Mn,Ac).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},m_=async function(e,n){let r=await WM(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await WM({orphan:"drop-log",log:n[0]},this)),R(this,Do).get(r.tag)||null},qT=async function(e){const n=await WM(e,this),r=n.tag;let s=R(this,Do).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},R(this,Do).set(r,s)),s};function fit(t,e){try{const n=_6(t,e);if(n)return Bk(n)}catch{}return null}function _6(t,e){if(t==="0x")return null;try{const n=$n(zs(t,e,e+32)),r=$n(zs(t,n,n+32));return zs(t,n+32,n+32+r)}catch{}return null}function xK(t){const e=Ci(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function pit(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const git=new Uint8Array([]);function mit(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(git),n+=32;for(let r=0;r<t.length;r++){const s=Ln(t[r]);e[r]=xK(n),e.push(xK(s.length)),e.push(pit(s)),n+=32+Math.ceil(s.length/32)*32}return Vs(e)}const TK="0x0000000000000000000000000000000000000000000000000000000000000000";function yit(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};xe(wv(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=zs(t,0,32);xe(zs(n,0,12)===zs(TK,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=zs(n,12);try{const r=[],s=$n(zs(t,32,64)),i=$n(zs(t,s,s+32)),o=zs(t,s+32);for(let a=0;a<i;a++){const c=fit(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{xe(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=_6(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{xe(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}xe(zs(t,100,128)===zs(TK,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=zs(t,96,100);try{const r=_6(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{xe(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Hm(t,e){if(t.provider)return t.provider;xe(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function RK(t,e){let n=Gk(e);if(n.to!=null&&(n.to=ha(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),ha(r,t)]).then(([s,i])=>(oe(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await ta(n)}class wit{constructor(e){ue(this,"provider");en(this,{provider:e||null})}async getNonce(e){return Hm(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await RK(this,e)}async populateTransaction(e){const n=Hm(this,"populateTransaction"),r=await RK(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=St(r.chainId);oe(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?oe(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&oe(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();xe(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(xe(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):xe(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await ta(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Hm(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Hm(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Hm(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Hm(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Hm(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=Lk.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){xe(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function bit(t){return JSON.parse(JSON.stringify(t))}var Xo,_d,t0,fg,n0,mE,vm,A6,S6;class qle{constructor(e){re(this,vm);re(this,Xo);re(this,_d);re(this,t0);re(this,fg);re(this,n0);re(this,mE);q(this,Xo,e),q(this,_d,null),q(this,t0,Ae(this,vm,A6).bind(this)),q(this,fg,!1),q(this,n0,null),q(this,mE,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){R(this,fg)||(q(this,fg,!0),Ae(this,vm,A6).call(this,-2))}stop(){R(this,fg)&&(q(this,fg,!1),q(this,mE,!0),Ae(this,vm,S6).call(this),R(this,Xo).off("block",R(this,t0)))}pause(e){e&&Ae(this,vm,S6).call(this),R(this,Xo).off("block",R(this,t0))}resume(){this.start()}}Xo=new WeakMap,_d=new WeakMap,t0=new WeakMap,fg=new WeakMap,n0=new WeakMap,mE=new WeakMap,vm=new WeakSet,A6=async function(e){try{R(this,_d)==null&&q(this,_d,this._subscribe(R(this,Xo)));let n=null;try{n=await R(this,_d)}catch(i){if(!uo(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){q(this,_d,null),R(this,Xo)._recoverSubscriber(this,this._recover(R(this,Xo)));return}const r=await R(this,Xo).getNetwork();if(R(this,n0)||q(this,n0,r),R(this,n0).chainId!==r.chainId)throw new Error("chaid changed");if(R(this,mE))return;const s=await R(this,Xo).send("eth_getFilterChanges",[n]);await this._emitResults(R(this,Xo),s)}catch(n){console.log("@TODO",n)}R(this,Xo).once("block",R(this,t0))},S6=function(){const e=R(this,_d);e&&(q(this,_d,null),e.then(n=>{R(this,Xo).destroyed||R(this,Xo).send("eth_uninstallFilter",[n])}))};var r0;class vit extends qle{constructor(n,r){super(n);re(this,r0);q(this,r0,bit(r))}_recover(n){return new MF(n,R(this,r0))}async _subscribe(n){return await n.send("eth_newFilter",[R(this,r0)])}async _emitResults(n,r){for(const s of r)n.emit(R(this,r0),n._wrapLog(s,n._network))}}r0=new WeakMap;class Eit extends qle{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const Cit="bigint,boolean,function,number,string,symbol".split(/,/g);function VT(t){if(t==null||Cit.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(VT);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function _it(t){return new Promise(e=>{setTimeout(e,t)})}function pb(t){return t&&t.toLowerCase()}function kK(t){return t&&typeof t.pollingInterval=="number"}const Vle={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class HM extends wit{constructor(n,r){super(n);ue(this,"address");r=Nr(r),en(this,{address:r})}connect(n){xe(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=VT(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await ha(o,this.provider);oe(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await ha(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(uo(u,"CANCELLED")||uo(u,"BAD_DATA")||uo(u,"NETWORK_ERROR")||uo(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(uo(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",Ss("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=VT(n);if(r.from){const i=await ha(r.from,this.provider);oe(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?Cf(n):n;return await this.provider.send("personal_sign",[rt(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=VT(s),o=await Hk.resolveNames(n,r,i,async a=>{const c=await ha(a);return oe(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Hk.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?Cf(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),rt(r)])}}var s0,yE,tf,Ad,yu,_l,Wa,cI,I6;class Ait extends hit{constructor(n,r){super(n,r);re(this,cI);re(this,s0);re(this,yE);re(this,tf);re(this,Ad);re(this,yu);re(this,_l);re(this,Wa);q(this,yE,1),q(this,s0,Object.assign({},Vle,r||{})),q(this,tf,[]),q(this,Ad,null),q(this,_l,null),q(this,Wa,null);{let i=null;const o=new Promise(a=>{i=a});q(this,yu,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(oe(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&q(this,_l,Ld.from(n))):s&&(oe(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),q(this,_l,s))}_getOption(n){return R(this,s0)[n]}get _network(){return xe(R(this,_l),"network is not available yet","NETWORK_ERROR"),R(this,_l)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&St(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(R(this,_l))return R(this,_l)}else return n;return R(this,Wa)?await R(this,Wa):this.ready?(q(this,Wa,(async()=>{try{const r=Ld.from(St(await this.send("eth_chainId",[])));return q(this,Wa,null),r}catch(r){throw q(this,Wa,null),r}})()),await R(this,Wa)):(q(this,Wa,(async()=>{const r={id:Zf(this,yE)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],q(this,Wa,null)}catch(i){throw q(this,Wa,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Ld.from(St(s.result));throw this.getRpcError(r,s)})()),await R(this,Wa))}_start(){R(this,yu)==null||R(this,yu).resolve==null||(R(this,yu).resolve(),q(this,yu,null),(async()=>{for(;R(this,_l)==null&&!this.destroyed;)try{q(this,_l,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Ss("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await _it(1e3)}Ae(this,cI,I6).call(this)})())}async _waitUntilReady(){if(R(this,yu)!=null)return await R(this,yu).promise}_getSubscriber(n){return n.type==="pending"?new Eit(this):n.type==="event"?this._getOption("polling")?new MF(this,n.filter):new vit(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Gle("orphan"):super._getSubscriber(n)}get ready(){return R(this,yu)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Cu(St(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=rt(n[s]))}),n.accessList&&(r.accessList=_w(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Yce(s);return{address:i.address,nonce:Cu(i.nonce),chainId:Cu(i.chainId),yParity:Cu(i.signature.yParity),r:Cu(i.signature.r),s:Cu(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[pb(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[pb(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[pb(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[pb(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(pb):n.filter.address=pb(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Ss("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return Ss("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=N6(i),l=HS.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(Iit(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return Ss("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Ss("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return Ss("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Ss("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return Ss("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?Ss("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):Ss("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(Ss("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=Zf(this,yE)._++,i=new Promise((o,a)=>{R(this,tf).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return Ae(this,cI,I6).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new HM(this,i[n])}const{accounts:s}=await ta({network:this.getNetwork(),accounts:r});n=Nr(n);for(const i of s)if(Nr(i)===n)return new HM(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new HM(this,r))}destroy(){R(this,Ad)&&(clearTimeout(R(this,Ad)),q(this,Ad,null));for(const{payload:n,reject:r}of R(this,tf))r(Ss("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));q(this,tf,[]),super.destroy()}}s0=new WeakMap,yE=new WeakMap,tf=new WeakMap,Ad=new WeakMap,yu=new WeakMap,_l=new WeakMap,Wa=new WeakMap,cI=new WeakSet,I6=function(){if(R(this,Ad))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");q(this,Ad,setTimeout(()=>{q(this,Ad,null);const r=R(this,tf);for(q(this,tf,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==R(this,s0).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>R(this,s0).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(Ss("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=Ss("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var pg;class Sit extends Ait{constructor(n,r){super(n,r);re(this,pg);let s=this._getOption("pollingInterval");s==null&&(s=Vle.pollingInterval),q(this,pg,s)}_getSubscriber(n){const r=super._getSubscriber(n);return kK(r)&&(r.pollingInterval=R(this,pg)),r}get pollingInterval(){return R(this,pg)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");q(this,pg,n),this._forEachSubscriber(r=>{kK(r)&&(r.pollingInterval=R(this,pg))})}}pg=new WeakMap;function N6(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&ls(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=N6(t[e]);if(n)return n}return null}if(typeof t=="string")try{return N6(JSON.parse(t))}catch{}return null}function x6(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)x6(t[n],e);if(typeof t=="string")try{return x6(JSON.parse(t),e)}catch{}}}function Iit(t){const e=[];return x6(t,e),e}var wE,bE;const fy=class fy extends Sit{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});oe(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);re(this,wE);re(this,bE);q(this,bE,null),s&&s.providerInfo&&q(this,bE,s.providerInfo),q(this,wE,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return R(this,bE)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){oe(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await R(this,wE).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await R(this,wE).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new fy(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new fy(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof fy)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new fy(p,void 0,{providerInfo:g}))}else a(Ss("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new fy(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};wE=new WeakMap,bE=new WeakMap;let T6=fy;const xg={DMT:{symbol:"DMT",name:"DMT",address:"0x754cDAd6f5821077d6915004Be2cE05f93d176f8",decimals:18,logo:"/images/dmt-logo.png"},GOLD:{symbol:"GOLD",name:"GOLD",address:"0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D",decimals:18,logo:"/images/gold-logo.png"},LAWB:{symbol:"LAWB",name:"LAWB",address:"0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F",decimals:18,logo:"/images/lawb-logo.png"},MOSS:{symbol:"MOSS",name:"MOSS",address:"0xeA240b96A9621e67159c59941B9d588eb290ef09",decimals:18,logo:"/images/moss-logo.png"}},PK={testnet:{chess:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"},mainnet:{chess:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"}},Kle={testnet:{chainId:1992},mainnet:{chainId:1996}},Nit=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Mh=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"minWager",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxWager",type:"uint256"}],name:"TokenLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"DMT_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"GOLD_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LAWB_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MOSS_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"wagerToken",type:"address"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"createGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"},{internalType:"address",name:"wagerToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_house",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"supportedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMaxWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMinWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minWager",type:"uint256"},{internalType:"uint256",name:"maxWager",type:"uint256"}],name:"updateTokenLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawTokens",outputs:[],stateMutability:"nonpayable",type:"function"}];function xit(t,e){const n=xg[t],{data:r,isLoading:s,error:i}=sU({address:n.address,abi:Nit,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:!!e}});return{balance:r?Number(r)/Math.pow(10,n.decimals):0,balanceWei:r||BigInt(0),isLoading:s,error:i}}const Tit=({selectedToken:t,onTokenSelect:e,wagerAmount:n,onWagerChange:r,disabled:s=!1})=>{const{address:i}=kC(),{balance:o}=xit(t,i),[a,c]=G.useState(!1),l=u=>{e(u),c(!1)};return b.jsxs("div",{style:{marginBottom:"10px"},children:[b.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[b.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Token:"}),b.jsxs("div",{style:{position:"relative"},children:[b.jsxs("button",{type:"button",onClick:()=>c(!a),disabled:s,style:{padding:"5px 10px",border:"2px outset #fff",background:"#c0c0c0",cursor:s?"not-allowed":"pointer",minWidth:"100px",textAlign:"left"},children:[xg[t].symbol,b.jsx("span",{style:{float:"right"},children:""})]}),a&&!s&&b.jsx("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",zIndex:10,minWidth:"100px"},children:Object.entries(xg).map(([u,d])=>b.jsx("div",{onClick:()=>l(u),style:{padding:"5px 10px",cursor:"pointer",borderBottom:"1px solid #eee"},onMouseEnter:h=>h.currentTarget.style.background="#f0f0f0",onMouseLeave:h=>h.currentTarget.style.background="#fff",children:d.symbol},u))})]})]}),b.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[b.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Amount:"}),b.jsx("input",{type:"number",value:n,onChange:u=>r(Number(u.target.value)),disabled:s,min:"0.1",max:"1000",step:"0.1",style:{padding:"5px",border:"2px inset #fff",background:"#fff",width:"100px"}}),b.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["Balance: ",o.toFixed(2)," ",xg[t].symbol]})]}),n>o&&b.jsxs("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:["Insufficient balance. You have ",o.toFixed(2)," ",xg[t].symbol]})]})},Rit=t=>t===Kle.testnet.chainId?PK.testnet.chess:PK.mainnet.chess,_r={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},GM={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},Ph=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],kit=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function Pit(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function Oit(t,e){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const n=new T6(window.ethereum);return await new Ev(e,Mh,n).playerToGame(t)}catch(n){return console.error("Error fetching invite code from contract:",n),null}}const Yle=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s,chainId:i}=kC(),o=Rit(i||Kle.mainnet.chainId),[a,c]=G.useState(""),[l,u]=G.useState(""),[d,h]=G.useState(!1),[f,p]=G.useState(!1),[g,m]=G.useState(!1),[y,w]=G.useState(!1),{writeContract:C,isPending:N,data:I}=JN(),{writeContract:k,isPending:P,data:U,error:M}=JN(),{writeContract:H,isPending:j,data:K}=JN(),{writeContract:$,isPending:v,data:E}=JN(),_=GAe(),{isLoading:D}=QN({hash:I}),{isLoading:x,data:B}=QN({hash:U}),{isLoading:W}=QN({hash:K}),{isLoading:L}=QN({hash:E});G.useEffect(()=>{E&&!L&&(console.log("[REFUND] Transaction completed successfully"),He("Game refunded successfully! Your wager has been returned."),Qt(_r.LOBBY),se(""),z(null),Ue(0,"refund completed"),O(null),Aa())},[E,L]);const{data:S}=sU({address:o,abi:Mh,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:F}=sU({address:o,abi:Mh,functionName:"games",args:S?[S]:void 0,query:{enabled:!!S&&S!=="0x000000000000"}}),[X,se]=G.useState(""),ge=(V,Z)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${V}" from ${Z}`),X&&!V&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${X}" to "${V}" from ${Z}`),se(V)},Ue=(V,Z)=>{console.log(`[WAGER_DEBUG] Setting wager to ${V} TDMT from ${Z}`),Y!==V&&console.log(`[WAGER_DEBUG] Wager changed from ${Y} to ${V} TDMT`),te(V)},[Le,Be]=G.useState("moves"),Ut=async()=>{if(!X||!r){alert("No game to refund or wallet not connected");return}try{console.log("[REFUND] Attempting to refund game:",X);const V=await Ti.getGame(X);if(!V||V.blue_player!==r){alert("Only the game creator can refund the game");return}if(V.red_player&&V.red_player!=="0x0000000000000000000000000000000000000000"){alert("Cannot refund game after opponent has joined");return}await $({address:o,abi:Mh,functionName:"cancelGame",args:[X]}),console.log("[REFUND] Cancel game transaction submitted")}catch(V){console.error("[REFUND] Error refunding game:",V),alert("Failed to refund game. Please try again.")}},lt=async()=>{if(!r||!De){console.error("[CLAIM] Missing required data for claiming winnings");return}let V=X;if(!V&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const Z=await Oit(r,o);Z&&Z!=="0x000000000000"&&(V=Z,console.log("[CLAIM] Retrieved invite code from contract:",V))}catch(Z){console.error("[CLAIM] Error getting invite code from contract:",Z)}}if(!V){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{m(!0),console.log("[CLAIM] Claiming winnings for game:",V,"Player:",De,"Address:",r);const Z=await Ti.getGame(V);if(!Z){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",Z);let Q=null;if(Z.winner&&(Z.blue_player||Z.red_player)&&(Q=Z.winner==="blue"?Z.blue_player:Z.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:Z.winner,winnerAddress:Q})),!Q&&F)if(Z.winner&&(Z.winner==="blue"||Z.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let ve,Ze,ze,at,Gt,Dn;if(Array.isArray(F))[ve,Ze,ze,at,Gt,Dn]=F;else{console.error("[CLAIM] Unexpected contract data format:",F),alert("Failed to verify winner. Please try again.");return}Q=Z.winner==="blue"?ve:Ze,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:Z.winner,winnerAddress:Q,player1:ve,player2:Ze})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",F);let ve,Ze,ze,at,Gt,Dn;if(Array.isArray(F))[ve,Ze,ze,at,Gt,Dn]=F;else{console.error("[CLAIM] Unexpected contract data format:",F),alert("Failed to verify winner. Please try again.");return}const ln=String(at);if(ln.startsWith("0x"))Q=ln;else if(ln==="blue"||ln==="red")Q=ln==="blue"?ve:Ze;else if(ln==="1"||ln==="2")Q=ln==="1"?ve:Ze;else{console.error("[CLAIM] Unknown winner format:",at,"as string:",ln),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:at,winnerAddress:Q,player1:ve,player2:Ze,winnerType:typeof at,winnerValue:at,address:r,addressType:typeof r})}if(!Q){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:Q,address:r,playerColor:De,winnerAddressType:typeof Q,addressType:typeof r,addressesMatch:Q===r,winnerAddressLength:Q==null?void 0:Q.length,addressLength:r==null?void 0:r.length}),Q!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:Q,address:r,playerColor:De}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM]  Winner verification passed! Proceeding with contract call...");let de=V;if(!de&&F){console.log("[CLAIM] Using invite code from contract data as fallback");let ve,Ze,ze,at,Gt,Dn;if(Array.isArray(F))[ve,Ze,ze,at,Gt,Dn]=F,de=Gt;else{console.error("[CLAIM] Unexpected contract data format for invite code:",F),alert("Failed to get invite code. Please try again.");return}}if(!de||typeof de!="string"||!de.startsWith("0x")||de.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",de),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:de,winner:Q,functionName:"endGame",inviteCodeSource:Z.invite_code?"Firebase":"Contract"}),H({address:o,abi:Mh,functionName:"endGame",args:[de,Q]}),console.log("[CLAIM] Contract call initiated successfully"),j?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:j,endGameHash:K})}catch(Z){console.error("[CLAIM] Error claiming winnings:",Z),alert("Failed to claim winnings. Please try again.")}finally{m(!1)}},[st,ce]=G.useState(Ph),[ae,_e]=G.useState("blue"),[Se,Ce]=G.useState(null),[Qe,pt]=G.useState([]),[Ye,it]=G.useState([]),[vn,He]=G.useState("Waiting for opponent..."),[Yt,Qt]=G.useState(_r.LOBBY),[De,z]=G.useState(null),[T,O]=G.useState(null),[Y,te]=G.useState(0),[he,be]=G.useState([]),[cn,Ft]=G.useState(!1),[It,Fn]=G.useState(null),[ke,er]=G.useState(null),[Sw,vr]=G.useState(""),[Er,Iw]=G.useState(0),[Tr,us]=G.useState("DMT"),[ZC]=G.useState(!0),[sr,ds]=G.useState(null),[lh,hs]=G.useState(0),[ir,uh]=G.useState(Date.now()),fs=36e5;G.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const[_s,Nw]=G.useState(!1),[or,ps]=G.useState(null),[dh,Cr]=G.useState(!1),[Ur,qf]=G.useState(null),[gs,Jr]=G.useState(!1),[Vf,Kf]=G.useState(!0),[qu,hh]=G.useState(null),Vu=G.useCallback(()=>{sr&&clearTimeout(sr);const V=setTimeout(()=>{console.log("[TIMEOUT] 60-minute timeout reached, ending game"),Tm()},fs);ds(V),uh(Date.now())},[sr]),Ku=G.useCallback(()=>{sr&&(clearTimeout(sr),ds(null))},[sr]),Tm=async()=>{if(!X||!De)return;console.log("[TIMEOUT] Handling timeout for game:",X);const V=ae==="blue"?"red":"blue",Z=V==="blue"?F==null?void 0:F[0]:F==null?void 0:F[1];Z&&(console.log("[TIMEOUT] Ending game with winner:",Z),H({address:o,abi:Mh,functionName:"endGame",args:[X,Z]}),He(`Game ended due to timeout. ${V==="red"?"Red":"Blue"} wins!`),Qt(_r.FINISHED))},[Ii,Yf]=G.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[_a,Qf]=G.useState([]),[Jl,fh]=G.useState(null),Go=G.useRef(null),qo=G.useRef(null),ph=G.useRef(r);G.useEffect(()=>{ph.current=r},[r]),G.useEffect(()=>{console.log("[JOIN RECEIPT DEBUG] - joinGameHash:",U),console.log("[JOIN RECEIPT DEBUG] - isWaitingForJoinReceipt:",x),console.log("[JOIN RECEIPT DEBUG] - pendingJoinGameData:",ke),console.log("[JOIN RECEIPT DEBUG] - condition:",U&&!x&&ke),U&&!x&&ke&&(console.log("[CONTRACT] Join transaction confirmed:",U),r===ke.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),z("red"),O(ke.gameData.blue_player)),Ti.updateGame(ke.inviteCode,{...ke.gameData,red_player:ke.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),Qt(_r.ACTIVE),He("Game started!"),Nt(ke.inviteCode),console.log("[CONTRACT] Clearing pending join data"),er(null)}).catch(V=>{console.error("Error updating game in database:",V),He("Joined game on contract but failed to update database"),er(null)}))},[U,x,ke,r]),G.useEffect(()=>{K&&!W&&(console.log("[CLAIM] End game transaction confirmed:",K),He("Winnings claimed successfully! Transaction hash: "+K.slice(0,10)+"..."),m(!1))},[K,W]),G.useEffect(()=>{j===!1&&g&&!K&&(console.log("[CLAIM] End game transaction rejected or failed"),He("Claim transaction was rejected. Please try again."),m(!1))},[j,g,K]),G.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",I),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",D),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",It),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",X),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",I&&!D&&It&&!X),console.log("[CREATE DEBUG] Transaction receipt handler - individual conditions:"),console.log("[CREATE DEBUG] - createGameHash exists:",!!I),console.log("[CREATE DEBUG] - not waiting for receipt:",!D),console.log("[CREATE DEBUG] - pendingGameData exists:",!!It),console.log("[CREATE DEBUG] - no inviteCode set:",!X),I&&!D&&It&&!X?(console.log("[CONTRACT] Create game transaction confirmed:",I),Ti.createGame(It).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),se(It.invite_code),z("blue"),Ue(Er,"create game success"),Qt(_r.WAITING),He("Waiting for opponent to join..."),Nt(It.invite_code),setTimeout(()=>{Aa()},1e3),Fn(null),Ft(!1)}).catch(V=>{console.error("[FIREBASE] Error creating game after transaction:",V),He("Transaction confirmed but failed to create game in database"),Fn(null),Ft(!1)})):I&&!D&&(console.log("[CREATE DEBUG] Transaction confirmed but conditions not met for Firebase update:"),console.log("[CREATE DEBUG] - pendingGameData missing:",!It),console.log("[CREATE DEBUG] - inviteCode already set:",!!X))},[I,D,It,Er]),G.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",It)},[It]),G.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",ke),ke){const V=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),er(null)},3e4);return()=>clearTimeout(V)}},[ke]),G.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",N),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",It),console.log("[CREATE REJECTION DEBUG] - createGameHash:",I),console.log("[CREATE REJECTION DEBUG] - condition:",N===!1&&It&&!I),N===!1&&It&&!I&&(console.log("[CONTRACT] Create game transaction rejected or failed"),He("Transaction was rejected. Please try again."),Fn(null),Ft(!1))},[N,It,I]),G.useEffect(()=>{P===!1&&ke&&!U&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",P),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",ke),console.log("[CONTRACT] Rejection details - joinGameHash:",U),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",S),He("Transaction was rejected. Please try again."),ge("","join transaction rejection"),z(null),Ue(0,"join transaction rejection"),O(null),Qt(_r.LOBBY),He(""),er(null))},[P,ke,U,r,S]),G.useEffect(()=>{r&&S!==void 0&&(y||(S!=="0x000000000000"&&F||S==="0x000000000000")&&gh())},[r,S,F,y]),G.useEffect(()=>{w(!1)},[r]),G.useEffect(()=>{Yt===_r.ACTIVE&&De?(console.log("[TIMEOUT] Starting timeout timer for active game"),Vu()):Ku()},[Yt,De,Vu,Ku]),G.useEffect(()=>{Yt===_r.ACTIVE&&Ye.length>0&&(console.log("[TIMEOUT] Move made, resetting timeout timer"),Vu())},[Ye,Yt,Vu]),G.useEffect(()=>{if(Yt===_r.ACTIVE&&sr){const V=setInterval(()=>{const Z=Date.now()-ir,Q=Math.max(0,fs-Z);hs(Math.ceil(Q/1e3))},1e3);return()=>clearInterval(V)}},[Yt,sr,ir]),G.useEffect(()=>()=>{Ke(),Ku(),Go.current&&Go.current(),qo.current&&clearTimeout(qo.current)},[Ku]);const gh=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),S&&S!=="0x000000000000"&&!F){console.log("[GAME_STATE] Waiting for contract data...");return}if(S&&S!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",S),F)){let Q,de,ve,Ze,ze,at;if(Array.isArray(F))[Q,de,ve,Ze,ze,at]=F;else{console.error("[GAME_STATE] Unexpected contract data format:",F);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:Q,player2:de,isActive:ve,winner:Ze,inviteCode:ze,wagerAmount:at}),!ze){console.error("[GAME_STATE] Invalid invite code:",ze);return}const Gt=Q===r?"blue":"red",Dn=Q===r?de:Q;console.log("[GAME_STATE] Player is",Gt,"opponent is",Dn),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",Q),console.log("[DEBUG] - player2 (red):",de),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",Q===r),console.log("[DEBUG] - player2 === address:",de===r);const ln=await Ti.getGame(ze);if(ln){if(console.log("[GAME_STATE] Found game in Firebase:",ln),se(ze),z(Gt),Ue(parseFloat(ln.bet_amount)/1e18,"checkPlayerGameState Firebase"),O(Dn),ln.game_state==="waiting")Qt(_r.WAITING),He("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(ln.game_state==="active"||ln.game_state==="test_update"){if(Qt(_r.ACTIVE),He("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",ln.game_state,")"),ln.board){const ui=ln.board;ce(qn(ui)),_e(ln.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",ln.game_state,"- treating as active"),Qt(_r.ACTIVE),He("Game in progress"),ln.board){const ui=ln.board;ce(qn(ui)),_e(ln.current_player||"blue")}Nt(ze),w(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",Yt),console.log("[GAME_STATE] Game state from Firebase:",ln.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const ui={invite_code:ze,game_title:`Game ${ze.slice(-6)}`,bet_amount:at?at.toString():"0",blue_player:Q,red_player:de,game_state:ve?"active":"waiting",board:{positions:jn(Ph),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0};if(await Ti.createGame(ui),console.log("[GAME_STATE] Successfully synced game to Firebase:",ui),se(ze),z(Gt),Ue(parseFloat(ui.bet_amount)/1e18,"checkPlayerGameState sync"),O(Dn),ve?(Qt(_r.ACTIVE),He("Game in progress")):(Qt(_r.WAITING),He("Waiting for opponent to join...")),ui.board){const vue=ui.board;ce(qn(vue)),_e(ui.current_player||"blue")}Nt(ze),w(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const Z=(await Ti.getActiveGames()).filter(Q=>Q.chain==="sanko"&&(Q.blue_player===r||Q.red_player===r)&&["waiting","active"].includes(Q.game_state));if(Z&&Z.length>0){const Q=Z[0];if(console.log("[GAME_STATE] Found active game in Firebase:",Q),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",Q.blue_player),console.log("[DEBUG] - red_player:",Q.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",Q.blue_player===r),console.log("[DEBUG] - red_player === address:",Q.red_player===r),se(Q.invite_code),z(Q.blue_player===r?"blue":"red"),Ue(parseFloat(Q.bet_amount)/1e18,"checkPlayerGameState fallback"),O(Q.blue_player===r?Q.red_player:Q.blue_player),Q.game_state==="waiting")Qt(_r.WAITING),He("Waiting for opponent to join...");else if(Q.game_state==="active"||Q.game_state==="test_update"){if(Qt(_r.ACTIVE),He("Game in progress"),Q.board){const de=Q.board;ce(qn(de)),_e(Q.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",Q.game_state,"- treating as active"),Qt(_r.ACTIVE),He("Game in progress"),Q.board){const de=Q.board;ce(qn(de)),_e(Q.current_player||"blue")}Nt(Q.invite_code),w(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),Qt(_r.LOBBY),Ft(!1),w(!0)}catch(V){console.error("[GAME_STATE] Error in checkPlayerGameState:",V)}},Yu=async()=>{try{await tce();const V=await ece(20);Qf(V)}catch(V){console.error("Error loading leaderboard:",V)}},Jf=async V=>{if(console.log("[SCORE] updateScore called with:",V,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Y0(r)),await Mk(r,V)?console.log("[SCORE] Successfully updated score for:",Y0(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(Z){console.error("[SCORE] Error updating score:",Z)}},Rm=async(V,Z,Q)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:V,bluePlayer:Z,redPlayer:Q}),!Z||!Q){console.error("[SCORE] Missing player addresses from contract");return}await Vet(V,Z,Q)?(console.log("[SCORE] Successfully updated both players scores"),await Yu()):console.error("[SCORE] Failed to update both players scores")}catch(de){console.error("[SCORE] Error updating both players scores:",de)}},Aa=async()=>{try{const V=await Ti.getOpenGames();console.log("[FIREBASE] Loaded open games:",V),await km(V),be(V)}catch(V){console.error("Error loading open games:",V)}},km=async V=>{if(console.log("[CLEANUP] Checking for ghost games..."),!_){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const Z of V)try{const Q=Z.invite_code;if(!Q||typeof Q!="string"||!Q.startsWith("0x")||Q.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",Z.invite_code,Q);continue}const de=await _.readContract({address:o,abi:Mh,functionName:"games",args:[Q]});(!de||Array.isArray(de)&&de[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",Z.invite_code,"- removing from Firebase"),await Ti.deleteGame(Z.invite_code),console.log("[CLEANUP] Ghost game removed:",Z.invite_code))}catch(Q){console.error("[CLEANUP] Error checking game:",Z.invite_code,Q)}},bO=async()=>{if(!(!r||Er<=0)){console.log("[CREATE] Starting game creation - address:",r,"wager:",Er),Ft(!0);try{const V=Pit();console.log("[CREATE] Generated invite code:",V);const Z=xg[Tr].address,Q=BigInt(Math.floor(Er*Math.pow(10,xg[Tr].decimals))),de={invite_code:V,game_title:`Chess Game ${V.slice(-6)}`,bet_amount:Q.toString(),bet_token:Tr,blue_player:r,game_state:"waiting",board:{positions:jn(Ph),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",de),console.log("[CREATE] Calling contract with args:",[V,Z,Q]),C({address:o,abi:Mh,functionName:"createGame",args:[V,Z,Q]}),console.log("[CREATE] Contract call initiated, setting pending data"),console.log("[CREATE] Pending game data being set:",de),Fn(de),He("Creating game... Please confirm transaction in your wallet.")}catch(V){console.error("[CREATE] Error creating game:",V),He("Failed to create game. Please try again.")}finally{Ft(!1)}}},vO=async V=>{if(r)try{const Z=await Ti.getGame(V);if(!Z||Z.game_state!=="waiting"){He("Game not found or already full");return}const de=parseFloat(Z.bet_amount)/1e18;if(se(V),z("red"),Ue(de,"joinGame"),O(Z.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:V,playerColor:"red",wagerAmountTDMT:de,opponent:Z.blue_player,address:r}),r===Z.blue_player){console.error("[JOIN] Player cannot join their own game"),He("You cannot join your own game");return}if(S&&S!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",S),He("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const ve=await window.ethereum.request({method:"eth_chainId"}),Ze=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",ve),console.log("[JOIN] Wallet state check - connectedAccounts:",Ze),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(ve){console.error("[JOIN] Error checking wallet state:",ve)}console.log("[JOIN] Contract call parameters - contractAddress:",o),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[V]),He("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",o),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[V]),k({address:o,abi:Mh,functionName:"joinGame",args:[V]}),console.log("[JOIN] writeJoinGame called, setting pending data..."),er({inviteCode:V,gameData:Z,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(Z){console.error("[JOIN] Error joining game:",Z),He("Failed to join game. Please try again."),ge("","join game error"),z(null),Ue(0,"join game error"),O(null)}},[ee,ne]=G.useState(null),[we,ye]=G.useState(""),[fe,qe]=G.useState(!0),Ke=()=>{console.log("[FIREBASE] No fallback to stop")},Nt=V=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",V),Go.current&&(console.log("[FIREBASE] Removing existing subscription"),Go.current());const Z=Ti.subscribeToGame(V,Q=>{const de=ph.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",de),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",Q),console.log("[DEBUG] Blue player from Firebase:",Q==null?void 0:Q.blue_player),console.log("[DEBUG] Red player from Firebase:",Q==null?void 0:Q.red_player),console.log("[DEBUG] Blue player type:",typeof(Q==null?void 0:Q.blue_player)),console.log("[DEBUG] Red player type:",typeof(Q==null?void 0:Q.red_player)),console.log("[DEBUG] Current address type:",typeof de),console.log("[DEBUG] Current playerColor state:",De),console.log("[DEBUG] Pending join game data:",!!ke),!Q){console.log("[DEBUG] No game data received");return}if(ke&&de===ke.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",De),Q.game_state==="active"&&(console.log("[AUTO-CLEAR] Game is active, clearing pending join data"),er(null)),Q.blue_player&&Q.red_player&&Q.red_player!=="0x0000000000000000000000000000000000000000"&&O(Q.blue_player===de?Q.red_player:Q.blue_player);else if(de&&Q.blue_player&&Q.red_player&&Q.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const Ze=de.toLowerCase()===Q.blue_player.toLowerCase(),ze=de.toLowerCase()===Q.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",Ze),console.log("[DEBUG] Red player match:",ze),console.log("[DEBUG] Blue comparison:",`${de.toLowerCase()} === ${Q.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${de.toLowerCase()} === ${Q.red_player.toLowerCase()}`),Ze&&De!=="blue"?(console.log("[DEBUG] Setting player color to BLUE"),z("blue"),O(Q.red_player)):ze&&De!=="red"?(console.log("[DEBUG] Setting player color to RED"),z("red"),O(Q.blue_player)):!Ze&&!ze&&De!==null?(console.log("[DEBUG] No address match found - setting playerColor to null"),z(null),O(null)):console.log("[DEBUG] Player color already correctly set to:",De)}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!de),console.log("[DEBUG] - blue_player:",!!Q.blue_player),console.log("[DEBUG] - red_player:",Q==null?void 0:Q.red_player),console.log("[DEBUG] - Current playerColor state:",De),console.log("[DEBUG] - Contract game data available:",!!F),De&&(De==="blue"||De==="red")){console.log("[DEBUG] Preserving existing valid playerColor:",De);return}else if(F&&Array.isArray(F)&&de){const[Ze,ze]=F;if(Ze&&ze){const at=Ze.toLowerCase()===de.toLowerCase()?"blue":"red",Gt=Ze.toLowerCase()===de.toLowerCase()?ze:Ze;console.log("[DEBUG] Setting playerColor from contract fallback:",at),z(at),O(Gt)}}else console.log("[DEBUG] No valid data available, but preserving existing playerColor if valid"),(!De||De!=="blue"&&De!=="red")&&(console.log("[DEBUG] Setting playerColor to null"),z(null));Q.blue_player&&Q.red_player&&Q.red_player!=="0x0000000000000000000000000000000000000000"&&O(Q.blue_player===de?Q.red_player:Q.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",Q.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof Q.bet_amount),console.log("[WAGER DEBUG] Full gameData:",Q),console.log("[WAGER DEBUG] parsed value:",Q.bet_amount?parseFloat(Q.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",Q.bet_amount?parseFloat(Q.bet_amount)/1e18:"null");let ve=0;Q.bet_amount&&!isNaN(parseFloat(Q.bet_amount))?(ve=parseFloat(Q.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",ve)):F&&Array.isArray(F)&&F[5]?(ve=parseFloat(F[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",ve)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),Ue(ve,"Firebase subscription"),Q.board&&ce(qn(Q.board)),Q.current_player&&_e(Q.current_player),Q.game_state==="active"?(Qt(_r.ACTIVE),He("Game in progress")):Q.game_state==="finished"?(Qt(_r.FINISHED),He("Game finished")):Q.game_state==="waiting"&&(Qt(_r.WAITING),He("Waiting for opponent to join..."))});Go.current=Z,console.log("[FIREBASE] Firebase subscription setup complete for game:",V)};G.useEffect(()=>(X&&Nt(X),()=>{Go.current&&Go.current()}),[X,r]),G.useEffect(()=>{if(F&&!De&&r){console.log("[FALLBACK] Setting playerColor from contract data");let V,Z,Q,de,ve,Ze;if(Array.isArray(F))[V,Z,Q,de,ve,Ze]=F;else{console.error("[FALLBACK] Unexpected contract data format:",F);return}const ze=V===r?"blue":"red",at=V===r?Z:V;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",V),console.log("[FALLBACK] - player2 (red):",Z),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",ze),console.log("[FALLBACK] - opponent:",at),console.log("[FALLBACK] - inviteCode from contract:",ve),z(ze),O(at),!X&&ve&&(console.log("[FALLBACK] Setting missing inviteCode:",ve),se(ve)),X&&Ti.getGame(X).then(Gt=>{Gt&&(!Gt.blue_player||!Gt.red_player)&&(console.log("[AUTO-FIX] Detected missing player data, attempting to fix..."),uue()),Gt&&Gt.game_state==="active"&&ke&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),er(null))}).catch(Gt=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",Gt)})}},[F,De,r,X]),G.useEffect(()=>{if(B&&ke){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",B.transactionHash),console.log("[RECEIPT] Pending data:",ke);const{inviteCode:V,gameData:Z,address:Q}=ke;Ti.updateGame(V,{red_player:Q,blue_player:Z.blue_player,bet_amount:Z.bet_amount,game_state:"active",last_move:null,board:{positions:jn(Ph),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),He("Game started! You are the red player."),Qt(_r.ACTIVE),er(null)}).catch(de=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",de),He("Game joined but failed to update game state. Please refresh.")})}},[B,ke]),G.useEffect(()=>{M&&(console.error("[ERROR] Join transaction failed:",M),He(`Failed to join game: ${M.message||"Transaction rejected"}`),ge("","join game error effect"),z(null),Ue(0,"join game error effect"),O(null),er(null))},[M]);const jn=V=>{const Z={};return V.forEach((Q,de)=>{Q.forEach((ve,Ze)=>{Z[`${de}_${Ze}`]=ve})}),Z},qn=V=>{if(!V||!V.positions)return console.warn("[BOARD] No board data available, using initial board"),Ph;if(console.log("[BOARD] Attempting to reconstruct board from:",V),console.log("[BOARD] Positions type:",typeof V.positions),console.log("[BOARD] Positions is array:",Array.isArray(V.positions)),console.log("[BOARD] Positions value:",V.positions),typeof V.positions=="object"&&!Array.isArray(V.positions)){const Z=V.positions,Q=V.rows||8,de=V.cols||8,ve=Array(Q).fill(null).map(()=>Array(de).fill(null));for(let Ze=0;Ze<Q;Ze++)for(let ze=0;ze<de;ze++){const at=`${Ze}_${ze}`;ve[Ze][ze]=Z[at]||null}return console.log("[BOARD] Reconstructed from flat structure:",ve),ve}return Array.isArray(V.positions)?(console.log("[BOARD] Found array structure, length:",V.positions.length),V.positions.length===8?V.positions.every((Q,de)=>{const ve=Array.isArray(Q)&&Q.length===8;return ve||console.warn(`[BOARD] Row ${de} is invalid:`,Q,"Type:",typeof Q,"Length:",Q==null?void 0:Q.length),ve})?(console.log("[BOARD] Using legacy array structure"),V.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),Ph):(console.warn("[BOARD] Array has wrong length:",V.positions.length,"expected 8"),Ph)):(console.warn("[BOARD] Unknown board structure, using initial board:",V),Ph)},Zr=V=>`${V.slice(0,6)}...${V.slice(-4)}`,yn=V=>V&&V===V.toUpperCase()?"red":"blue",xw=(V,Z)=>V>=0&&V<8&&Z>=0&&Z<8,XC=(V,Z)=>{const Q=Z==="red"?"K":"k";let de=-1,ve=-1;for(let ze=0;ze<8;ze++){for(let at=0;at<8;at++)if(V[ze][at]===Q){de=ze,ve=at;break}if(de!==-1)break}return de===-1?!1:Qle(de,ve,Z==="red"?"blue":"red",V)},Qle=(V,Z,Q,de)=>{if(!de||!Array.isArray(de)||de.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",de),!1;for(let ve=0;ve<8;ve++){if(!de[ve]||!Array.isArray(de[ve])||de[ve].length!==8)return console.warn("[SAFETY] Invalid board row structure:",de[ve]),!1;for(let Ze=0;Ze<8;Ze++){const ze=de[ve][Ze];if(ze&&yn(ze)===Q&&Tw(ze,ve,Ze,V,Z,!1,Q,de,!0))return!0}}return!1},Jle=(V,Z,Q,de,ve,Ze=st)=>{const ze=Ze[V][Z];if(!ze)return!1;const at=Ze.map(Gt=>[...Gt]);return at[Q][de]=ze,at[V][Z]=null,XC(at,ve)},Zle=(V,Z,Q,de,ve,Ze)=>{const ze=V==="blue"?-1:1,at=V==="blue"?6:1;if(!xw(de,ve)||V==="blue"&&de>=Z||V==="red"&&de<=Z)return!1;if(Q===ve&&de===Z+ze)return Ze[de][ve]===null;if(Q===ve&&Z===at&&de===Z+2*ze)return Ze[Z+ze][Q]===null&&Ze[de][ve]===null;if(Math.abs(Q-ve)===1&&de===Z+ze){const Gt=Ze[de][ve];if(Gt!==null&&yn(Gt)!==V)return!0;if(Gt===null&&Ii.lastPawnDoubleMove){const{row:Dn,col:ln}=Ii.lastPawnDoubleMove;if(Dn===Z&&ln===ve){const ui=Ze[Z][ve];if(ui&&ui.toLowerCase()==="p"&&yn(ui)!==V)return!0}}}return!1},$F=(V,Z,Q,de,ve)=>V===Q||Z===de,Xle=(V,Z,Q,de)=>{const ve=Math.abs(V-Q),Ze=Math.abs(Z-de);return ve===2&&Ze===1||ve===1&&Ze===2},FF=(V,Z,Q,de,ve)=>Math.abs(V-Q)===Math.abs(Z-de),eue=(V,Z,Q,de,ve)=>$F(V,Z,Q,de)||FF(V,Z,Q,de),tue=(V,Z,Q,de,ve)=>{const Ze=Math.abs(Z-de),ze=Math.abs(Q-ve);if(Ze<=1&&ze<=1)return!0;if(Ze===0&&ze===2){if(V==="blue"&&!Ii.blueKingMoved){if(ve===6&&!Ii.blueRooksMove.right||ve===2&&!Ii.blueRooksMove.left)return!0}else if(V==="red"&&!Ii.redKingMoved&&(ve===6&&!Ii.redRooksMove.right||ve===2&&!Ii.redRooksMove.left))return!0}return!1},EO=(V,Z,Q,de,ve)=>{const Ze=V===Q?0:(Q-V)/Math.abs(Q-V),ze=Z===de?0:(de-Z)/Math.abs(de-Z);let at=V+Ze,Gt=Z+ze;for(;at!==Q||Gt!==de;){if(ve[at][Gt]!==null)return!1;at+=Ze,Gt+=ze}return!0},Tw=(V,Z,Q,de,ve,Ze=!0,ze=yn(V),at=st,Gt=!1)=>{if(!V||!xw(de,ve))return!1;const Dn=at[de][ve];if(Dn&&yn(Dn)===ze)return!1;let ln=!1;switch(V.toUpperCase()){case"P":ln=Zle(ze,Z,Q,de,ve,at);break;case"R":ln=$F(Z,Q,de,ve)&&EO(Z,Q,de,ve,at);break;case"N":ln=Xle(Z,Q,de,ve);break;case"B":ln=FF(Z,Q,de,ve)&&EO(Z,Q,de,ve,at);break;case"Q":ln=eue(Z,Q,de,ve)&&EO(Z,Q,de,ve,at);break;case"K":ln=tue(ze,Z,Q,de,ve);break}return!(!ln||Ze&&Jle(Z,Q,de,ve,ze,at))},CO=(V,Z=st,Q=ae)=>{const de=[],ve=Z[V.row][V.col];if(!ve||yn(ve)!==Q)return de;const Ze=ve.toLowerCase();if(Ze==="p"){const ze=Q==="blue"?-1:1,at=Q==="blue"?6:1,Gt=V.row+ze;if(Gt>=0&&Gt<8&&Tw(ve,V.row,V.col,Gt,V.col,!0,Q,Z,!0)&&de.push({row:Gt,col:V.col}),V.row===at){const Dn=V.row+2*ze;Dn>=0&&Dn<8&&Tw(ve,V.row,V.col,Dn,V.col,!0,Q,Z,!0)&&de.push({row:Dn,col:V.col})}for(const Dn of[-1,1]){const ln=V.col+Dn,ui=V.row+ze;ln>=0&&ln<8&&ui>=0&&ui<8&&Tw(ve,V.row,V.col,ui,ln,!0,Q,Z,!0)&&de.push({row:ui,col:ln})}}else if(Ze==="n"){const ze=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[at,Gt]of ze){const Dn=V.row+at,ln=V.col+Gt;Dn>=0&&Dn<8&&ln>=0&&ln<8&&Tw(ve,V.row,V.col,Dn,ln,!0,Q,Z,!0)&&de.push({row:Dn,col:ln})}}else for(let ze=0;ze<8;ze++)for(let at=0;at<8;at++)Tw(ve,V.row,V.col,ze,at,!0,Q,Z,!0)&&de.push({row:ze,col:at});return de},nue=(V,Z=st)=>{if(!XC(Z,V))return!1;for(let Q=0;Q<8;Q++)for(let de=0;de<8;de++){const ve=Z[Q][de];if(ve&&yn(ve)===V&&CO({row:Q,col:de},Z,V).length>0)return!1}return!0},rue=(V,Z=st)=>{if(XC(Z,V))return!1;for(let Q=0;Q<8;Q++)for(let de=0;de<8;de++){const ve=Z[Q][de];if(ve&&yn(ve)===V&&CO({row:Q,col:de},Z,V).length>0)return!1}return!0},jF=(V,Z)=>{if(console.log("[CLICK] Square clicked:",{row:V,col:Z}),console.log("[CLICK] Game mode:",Yt,"Player color:",De),console.log("[CLICK] Current player:",ae,"Player color:",De),Yt!==_r.ACTIVE||!De){console.log("[CLICK] Game not active or no player color");return}const Q=st[V][Z],de=Q?yn(Q):null;if(console.log("[CLICK] Piece at square:",Q,"Piece color:",de),ae!==De){console.log("[CLICK] Not player's turn. Current:",ae,"Player:",De);return}if(Q&&de===De){Ce({row:V,col:Z});const ve=CO({row:V,col:Z});pt(ve);return}if(Se&&Qe.some(ve=>ve.row===V&&ve.col===Z)){sue(Se,{row:V,col:Z}),Ce(null),pt([]);return}Ce(null),pt([])},sue=async(V,Z)=>{if(console.log("[PROMOTION DEBUG] makeMove called with:",{from:V,to:Z,playerColor:De,currentPlayer:ae}),!De||ae!==De){console.log("[PROMOTION DEBUG] Early return - playerColor:",De,"currentPlayer:",ae);return}const Q=st[V.row][V.col];if(!Q){console.log("[PROMOTION DEBUG] No piece at position:",V);return}if(console.log("[PROMOTION DEBUG] Piece:",Q,"isPawn:",Q.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] Current player:",ae,"to.row:",Z.row),console.log("[PROMOTION DEBUG] Player color:",De),console.log("[PROMOTION DEBUG] Promotion condition check:"),console.log("[PROMOTION DEBUG] - piece.toUpperCase() === P:",Q.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - currentPlayer === red && to.row === 7:",ae==="red"&&Z.row===7),console.log("[PROMOTION DEBUG] - currentPlayer === blue && to.row === 0:",ae==="blue"&&Z.row===0),console.log("[PROMOTION DEBUG] - Full condition:",Q.toUpperCase()==="P"&&(ae==="red"&&Z.row===7||ae==="blue"&&Z.row===0)),Q.toUpperCase()==="P"&&(ae==="red"&&Z.row===7||ae==="blue"&&Z.row===0)){console.log("[PROMOTION] Showing promotion dialog for piece:",Q,"at position:",Z),qf({from:V,to:Z}),Cr(!0);return}await WF(V,Z)},WF=async(V,Z,Q="q")=>{if(!De||ae!==De||!st[V.row][V.col])return;const Ze=st[Z.row][Z.col]!==null;if(Pm(Ze?"capture":"move"),Ze){hh({row:Z.row,col:Z.col,show:!0}),setTimeout(()=>{zF(V,Z,Q),hh(null)},500);return}zF(V,Z,Q)},zF=async(V,Z,Q="q")=>{if(!De||ae!==De)return;const de=st[V.row][V.col];if(!de)return;const ve=st.map(Dn=>[...Dn]);let Ze=de;console.log("[PROMOTION DEBUG] executeMoveAfterAnimation - checking promotion:"),console.log("[PROMOTION DEBUG] - piece:",de,"isPawn:",de.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - playerColor:",De,"to.row:",Z.row),console.log("[PROMOTION DEBUG] - promotion condition:",de.toUpperCase()==="P"&&(De==="red"&&Z.row===7||De==="blue"&&Z.row===0)),console.log("[PROMOTION DEBUG] - promotionPiece:",Q),de.toUpperCase()==="P"&&(De==="red"&&Z.row===7||De==="blue"&&Z.row===0)&&(Ze=De==="red"?Q.toUpperCase():Q.toLowerCase(),console.log("[PROMOTION DEBUG] - Promoting pawn to:",Ze)),oue(ve,V,Z,de),ve[Z.row][Z.col]=Ze,ve[V.row][V.col]=null,aue(V,Z,de);const ze=ae==="blue"?"red":"blue";XC(ve,ze)&&Pm("check");let at="active",Gt=null;if(nue(ze,ve))at="finished",Gt=ae,He(`${ae==="red"?"Red":"Blue"} wins by checkmate!`),Pm(ae===De?"victory":"loser"),iue(),console.log("[SCORE] Updating scores - Winner:",ae,"Loser:",ze),console.log("[SCORE] Contract game data:",F),console.log("[SCORE] Player game invite code:",S),F&&F.length>=2?(console.log("[SCORE] Using contract data for both players update"),await Rm(ae,F[0],F[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await Jf(ae===De?"win":"loss"),await Yu()),Gt===De&&(console.log("[CONTRACT] Triggering automatic payout for winner:",Gt),setTimeout(()=>{lt()},2e3));else if(rue(ze,ve)){const Dn=ae;at="finished",He(`${Dn==="red"?"Red":"Blue"} wins by stalemate!`),Pm(Dn===De?"victory":"loser"),console.log("[SCORE] Updating scores - Stalemate winner:",Dn,"Loser:",ze),console.log("[SCORE] Contract game data:",F),console.log("[SCORE] Player game invite code:",S),F&&F.length>=2?(console.log("[SCORE] Using contract data for both players update"),await Rm(Dn,F[0],F[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await Jf(Dn===De?"win":"loss"),await Yu()),Dn===De&&(console.log("[CONTRACT] Triggering automatic payout for stalemate winner:",Dn),setTimeout(()=>{lt()},2e3))}try{if(!X){console.error("[BUG] inviteCode is missing when trying to update game!"),He("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",X,"gameData:",{board:{positions:ve},current_player:ze,game_state:at,winner:Gt,last_move:{from:V,to:Z}});const ln={...await Ti.getGame(X),board:{positions:jn(ve),rows:8,cols:8},current_player:ze,game_state:at,winner:Gt,last_move:{from:V,to:Z}};console.log("[FIREBASE] Storing data in Firebase:",ln),await Ti.updateGame(X,ln),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(Dn){console.error("[DATABASE] Error updating game:",Dn)}ce(ve),_e(ze),fh({from:V,to:Z}),Cr(!1),qf(null)},iue=()=>{Jr(!0);for(let V=0;V<50;V++)setTimeout(()=>{const Z=document.createElement("div");Z.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(Z),setTimeout(()=>Z.remove(),300)},V*100);qo.current&&clearTimeout(qo.current),qo.current=setTimeout(()=>{Jr(!1)},5e3)},oue=(V,Z,Q,de)=>{if(de.toLowerCase()==="k"&&Math.abs(Z.col-Q.col)===2){if(Q.col===6)V[Z.row][7]=null,V[Z.row][5]=yn(de)==="blue"?"r":"R";else if(Q.col===2){const ve=V[Z.row][3];V[Z.row][0]=null,V[Z.row][3]=yn(de)==="blue"?"r":"R",ve&&ve.toLowerCase()==="q"&&(V[Z.row][4]=ve)}}de.toLowerCase()==="p"&&Math.abs(Z.col-Q.col)===1&&V[Q.row][Q.col]===null&&Ii.lastPawnDoubleMove&&Ii.lastPawnDoubleMove.row===Z.row&&Ii.lastPawnDoubleMove.col===Q.col&&(V[Z.row][Q.col]=null)},aue=(V,Z,Q)=>{const de={...Ii};Q.toLowerCase()==="k"?yn(Q)==="blue"?de.blueKingMoved=!0:de.redKingMoved=!0:Q.toLowerCase()==="r"&&(yn(Q)==="blue"?(V.col===0&&(de.blueRooksMove.left=!0),V.col===7&&(de.blueRooksMove.right=!0)):(V.col===0&&(de.redRooksMove.left=!0),V.col===7&&(de.redRooksMove.right=!0))),Q.toLowerCase()==="p"&&Math.abs(V.row-Z.row)===2?de.lastPawnDoubleMove={row:Z.row,col:Z.col}:de.lastPawnDoubleMove=null,Yf(de)},Pm=V=>{if(!Vf)return;let Z="";switch(V){case"move":Z="/images/move.mp3";break;case"capture":Z="/images/capture.mp3";break;case"check":Z="/images/play.mp3";break;case"checkmate":Z="/images/victory.mp3";break;case"victory":Z="/images/victory.mp3";break;case"loser":Z="/images/loser.mp3";break;case"upgrade":Z="/images/upgrade.mp3";break;default:Z="/images/move.mp3"}try{const Q=new Audio(Z);Q.volume=.3,Q.play().catch(de=>console.warn("Audio play failed:",de))}catch(Q){console.warn("Sound play failed:",Q)}},cue=async()=>{if(X)try{console.log("[RESET] Resetting corrupted game data for:",X);const V={board:{positions:jn(Ph),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await Ti.updateGame(X,V),console.log("[RESET] Successfully reset game data"),He("Game reset successfully. You can now make moves.")}catch(V){console.error("[RESET] Error resetting game data:",V),He("Failed to reset game. Please try again.")}},lue=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(V){console.error("Error checking stuck games:",V)}},uue=async()=>{if(console.log("[FIX] Attempting to fix missing player data..."),!X||!r){console.log("[FIX] Missing inviteCode or address");return}try{const V=await Ti.getGame(X);if(!V){console.log("[FIX] No game data found");return}if(console.log("[FIX] Current game data:",V),F&&Array.isArray(F)){const[Z,Q,de,ve,Ze,ze]=F;console.log("[FIX] Contract data for fixing:"),console.log("[FIX] - Contract player1 (blue):",Z),console.log("[FIX] - Contract player2 (red):",Q),console.log("[FIX] - Contract isActive:",de),console.log("[FIX] - Firebase blue_player:",V.blue_player),console.log("[FIX] - Firebase red_player:",V.red_player),console.log("[FIX] - Firebase game_state:",V.game_state);let at=!1;const Gt={};Q&&Q!=="0x0000000000000000000000000000000000000000"&&(!V.red_player||V.red_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing red player address in Firebase"),Gt.red_player=Q,at=!0),Z&&Z!=="0x0000000000000000000000000000000000000000"&&(!V.blue_player||V.blue_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing blue player address in Firebase"),Gt.blue_player=Z,at=!0),Z&&Q&&Z!=="0x0000000000000000000000000000000000000000"&&Q!=="0x0000000000000000000000000000000000000000"&&(V.game_state==="waiting"||!V.game_state)&&(console.log("[FIX] Activating game in Firebase"),Gt.game_state="active",Gt.current_player="blue",at=!0),de&&V.game_state!=="active"&&(console.log("[FIX] Syncing game state to active"),Gt.game_state="active",at=!0),at?(console.log("[FIX] Updating Firebase with:",Gt),await Ti.updateGame(X,Gt),console.log("[FIX] Firebase updated successfully")):console.log("[FIX] No missing player data to fix")}else console.log("[FIX] No contract data available for fixing")}catch(V){console.error("[FIX] Error fixing missing player data:",V)}},due=(V,Z)=>{if(!st||!Array.isArray(st)||st.length!==8||!st[V]||!Array.isArray(st[V])||st[V].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:V,col:Z,board:st}),b.jsx("div",{className:"square error",children:b.jsx("div",{className:"error-indicator",children:"!"})},`${V}-${Z}`);const Q=st[V][Z],de=(Se==null?void 0:Se.row)===V&&(Se==null?void 0:Se.col)===Z,ve=Qe.some(at=>at.row===V&&at.col===Z),Ze=Jl&&(Jl.from.row===V&&Jl.from.col===Z||Jl.to.row===V&&Jl.to.col===Z),ze=Q&&Q.toUpperCase()==="K"&&XC(st,yn(Q));return b.jsxs("div",{className:`square ${de?"selected":""} ${ve?"legal-move":""} ${Ze?"last-move":""} ${ze?"square-in-check":""}`,onClick:()=>jF(V,Z),onTouchStart:at=>wue(V,Z,at),onTouchMove:bue,children:[Q&&b.jsx("div",{className:"piece",style:{backgroundImage:GM[Q]?`url(${GM[Q]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ve&&b.jsx("div",{className:"legal-move-indicator"})]},`${V}-${Z}`)},hue=()=>{if(console.log("[PROMOTION DEBUG] renderPromotionDialog called - showPromotion:",dh,"promotionMove:",Ur),!dh||!Ur)return console.log("[PROMOTION DEBUG] Not rendering dialog - showPromotion:",dh,"promotionMove:",Ur),null;const V=ae==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:V.map(Z=>b.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",Z),WF(Ur.from,Ur.to,Z),Cr(!1),qf(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:b.jsx("img",{src:GM[Z],alt:Z,style:{width:"40px",height:"40px"}})},Z))})]})})},fue=()=>b.jsxs("div",{className:"piece-gallery",children:[b.jsx("h3",{children:"Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:kit.map(V=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{ps(or===V.key?null:V.key)},children:[b.jsx("img",{src:V.img,alt:V.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:V.name}),or===V.key&&b.jsx("div",{className:"piece-gallery-desc",children:V.desc})]},V.key))})]}),HF=()=>b.jsxs("div",{className:"chess-multiplayer-lobby",children:[b.jsx("h2",{children:"PvP Chess Lawby"}),s?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"status-bar",children:["Connected: ",Zr(r)]}),b.jsxs("div",{className:"lobby-content",children:[b.jsxs("div",{className:"open-games",children:[b.jsx("h3",{children:"Open Games"}),b.jsxs("div",{className:"games-list",children:[he.map(V=>b.jsxs("div",{className:"game-item",children:[b.jsxs("div",{className:"game-info",children:[b.jsx("div",{className:"game-id",children:V.game_title||"Untitled Game"}),b.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat(V.bet_amount)/Math.pow(10,xg[V.bet_token||"DMT"].decimals)).toFixed(2)," ",V.bet_token||"DMT"]}),b.jsxs("div",{className:"title",children:["Created by: ",Zr(V.blue_player)]})]}),b.jsx("button",{className:"join-btn",onClick:()=>vO(V.invite_code),children:"Join Game"})]},V.invite_code)),he.length===0&&b.jsx("div",{className:"no-games",children:"No open games available"})]})]}),b.jsxs("div",{className:"actions",children:[b.jsx("button",{className:"create-btn",onClick:()=>Ft(!0),disabled:cn,children:"Create New Game"}),b.jsx("button",{onClick:Aa,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"8px 16px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Refresh Lobby"}),b.jsx("button",{onClick:()=>window.location.href="/chess",style:{marginTop:"10px",background:"rgba(255, 193, 7, 0.1)",border:"2px solid #ffc107",color:"#ffc107",padding:"12px 24px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Back to Chess Home"})]}),cn&&b.jsxs("div",{className:"create-form",children:[b.jsx("h3",{children:"Create New Game"}),b.jsx(Tit,{selectedToken:Tr,onTokenSelect:us,wagerAmount:Er,onWagerChange:Iw,disabled:cn}),b.jsxs("div",{className:"form-actions",children:[b.jsx("button",{className:"create-confirm-btn",onClick:bO,disabled:Er<=0,children:"Create Game"}),b.jsx("button",{className:"cancel-btn",onClick:()=>Ft(!1),children:"Cancel"})]})]})]})]}):b.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),pue=()=>b.jsxs("div",{className:"chess-multiplayer-waiting",children:[b.jsx("h2",{children:"Waiting for Opponent"}),b.jsxs("div",{className:"game-code",children:["Invite Code: ",b.jsx("strong",{children:X})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("p",{children:["Wager: ",Y," ",Tr]}),b.jsx("p",{children:"Share this invite code with your opponent"})]}),b.jsxs("div",{className:"waiting-actions",children:[b.jsx("button",{onClick:Ut,disabled:v||L,className:"refund-game-btn",children:v||L?" Refunding...":" Refund Game"}),b.jsx("p",{className:"refund-note",children:"You can refund your wager anytime before an opponent joins"})]})]}),gue=()=>b.jsxs("div",{className:"chess-game",children:[b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:" Multiplayer Chess"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),b.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:""})]})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("div",{className:"game-status-section",children:[b.jsx("span",{className:`status ${vn.includes("Check")?"check-status":""}`,children:vn}),b.jsxs("span",{className:`current-player ${ae==="red"?"red-turn":"blue-turn"}`,children:["Current: ",ae==="red"?" Red":" Blue"]})]}),b.jsxs("div",{className:"game-details-section",children:[b.jsxs("span",{className:"wager-display",children:[" ",Y," ",Tr]}),T&&b.jsxs("span",{className:"opponent-info",children:["vs ",Zr(T)]}),Yt===_r.ACTIVE&&lh>0&&b.jsxs("span",{className:"timeout-countdown",style:{color:lh<300?"#ff0000":"#00ff00",fontWeight:"bold",textShadow:"0 0 6px currentColor"},children:[" ",Math.floor(lh/60),":",(lh%60).toString().padStart(2,"0")]})]}),Yt===_r.FINISHED&&b.jsxs("div",{className:"game-finished-actions",children:[b.jsx("button",{onClick:lt,disabled:g,className:"claim-winnings-btn",children:g?" Claiming...":" Claim Winnings"}),b.jsx("button",{onClick:()=>window.location.href="/chess",className:"back-to-chess-btn",children:" Back to Chess Home"})]})]}),b.jsxs("div",{className:"game-stable-layout",children:[b.jsxs("div",{className:"left-sidebar",children:[b.jsxs("div",{className:"sidebar-tabs",children:[b.jsx("button",{className:`tab-button ${Le==="moves"?"active":""}`,onClick:()=>Be("moves"),children:" Moves"}),b.jsx("button",{className:`tab-button ${Le==="leaderboard"?"active":""}`,onClick:()=>Be("leaderboard"),children:" Leaderboard"})]}),Le==="moves"&&b.jsxs("div",{className:"move-history",children:[b.jsx("h4",{children:"Move History"}),b.jsx("div",{className:"moves",children:Ye.slice().reverse().map((V,Z)=>b.jsx("div",{className:"move",children:V},Ye.length-1-Z))})]}),Le==="leaderboard"&&b.jsxs("div",{className:"leaderboard",children:[b.jsx("h4",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"#"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"W"}),b.jsx("th",{children:"L"}),b.jsx("th",{children:"D"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:_a.map((V,Z)=>b.jsxs("tr",{children:[b.jsx("td",{children:Z+1}),b.jsx("td",{children:V.username}),b.jsx("td",{children:V.wins}),b.jsx("td",{children:V.losses}),b.jsx("td",{children:V.draws}),b.jsx("td",{children:V.points})]},V.username))})]})})]})]}),b.jsxs("div",{className:"center-area",children:[b.jsxs("div",{className:"chessboard-container",children:[b.jsx("div",{className:"chessboard",children:Array.from({length:8},(V,Z)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(Q,de)=>due(Z,de))},Z))}),qu&&qu.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${qu.row*12.5}%`,left:`${qu.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:b.jsx("div",{className:"explosion-effect",children:""})})]}),b.jsxs("div",{className:"game-controls",children:[b.jsx("div",{className:"control-section",children:vn.includes("corrupted")&&b.jsx("button",{className:"reset-game-btn",onClick:cue,children:" Reset Game"})}),b.jsx("div",{className:"settings-section",children:b.jsxs("div",{className:"sound-controls",children:[b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"sound-toggle",checked:Vf,onChange:V=>Kf(V.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:" Sound Effects"})]}),b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"victory-toggle",checked:gs,onChange:V=>Jr(V.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:" Victory Celebration"})]})]})}),f&&b.jsx("button",{className:"claim-winnings-btn",onClick:lt,disabled:g||j||W,children:g||j||W?" Claiming...":" Claim Winnings"})]})]}),b.jsx("div",{className:"right-sidebar"})]}),_s&&b.jsx("div",{className:"piece-gallery-panel",children:fue()}),hue(),gs&&b.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[b.jsx("div",{className:"balloons-container"}),b.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),b.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[b.jsx("button",{onClick:()=>Qt(_r.LOBBY),children:"Back to Lobby"}),b.jsx("button",{onClick:()=>window.location.reload(),children:"New Game"})]})]})]}),mue=()=>null;G.useEffect(()=>{Yu(),Aa(),lue();const V=setInterval(Aa,3e4);return()=>{clearInterval(V),Go.current&&Go.current(),qo.current&&clearTimeout(qo.current)}},[]),console.log("[RENDER] Current game mode:",Yt,"Game ID:",X);const yue=(()=>{switch(Yt){case _r.LOBBY:return HF();case _r.WAITING:return pue();case _r.ACTIVE:case _r.FINISHED:return gue();default:return HF()}})(),wue=(V,Z,Q)=>{Q.preventDefault(),jF(V,Z)},bue=V=>{V.preventDefault()};return b.jsxs(b.Fragment,{children:[yue,mue()]})},qM={AI:"ai"},Dit=1992,Vx={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},OK=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],Mit=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],Bit=()=>{const[t,e]=G.useState(!1),n=G.useRef(null),r=G.useRef(!1);G.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=G.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=G.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},Uit=()=>{const[t,e]=G.useState(null),[n,r]=G.useState(!1),s=G.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=G.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},Lit=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=kC(),i=BI();qAe();const{open:o}=nN(),[a,c]=G.useState(qM.AI),[l,u]=G.useState(()=>JSON.parse(JSON.stringify(OK))),[d,h]=G.useState("blue"),[f,p]=G.useState(null),[g,m]=G.useState("active"),[y,w]=G.useState("hard"),[C,N]=G.useState("Connect wallet to play"),[I,k]=G.useState([]),[P,U]=G.useState([]),[M,H]=G.useState([]),[j,K]=G.useState(null),[$,v]=G.useState(!1),[E,_]=G.useState(!1),[D,x]=G.useState(null),[B,W]=G.useState(null),[L]=G.useState(""),[S]=G.useState(.1),[F,X]=G.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),se=G.useRef(null),ge=G.useRef(!1),Ue=G.useRef(l),Le=G.useRef(null),Be=G.useRef(null),Ut=G.useRef(!1),lt=G.useRef(!1),[st,ce]=G.useState(!1),[ae,_e]=G.useState(!1),[Se,Ce]=G.useState(!1),[Qe]=G.useState(!0);G.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const{stockfishReady:pt}=Bit(),{getOpeningData:Ye}=Uit(),[it,vn]=G.useState("loading"),[He,Yt]=G.useState(!1),[Qt,De]=G.useState([]),[z,T]=G.useState(!1),[O,Y]=G.useState(()=>{const ee=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],ne=Math.floor(Math.random()*ee.length),we=ee[ne];return console.log("[DEBUG] Initial random chessboard selected:",we,"(index:",ne,")"),we}),[te,he]=G.useState(!0),[be,cn]=G.useState(!1);G.useEffect(()=>{!s||!r?(N("Connect wallet to play"),v(!1),ce(!1),o()):i!==Dit?(N("Switch to Sanko Testnet to play"),v(!1),ce(!1),o()):N("Select game mode")},[s,r,i,o]);const Ft=()=>{const ee=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],ne=Math.floor(Math.random()*ee.length),we=ee[ne];return console.log("[DEBUG] Random chessboard selected:",we,"(index:",ne,")"),we};G.useEffect(()=>{if(pt)vn("ready");else{const ee=window.setTimeout(()=>{pt||(vn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(ee)}},[pt]),G.useEffect(()=>{Ue.current=l},[l]),G.useEffect(()=>(!se.current&&typeof Worker<"u"&&(se.current=new Worker("/aiWorker.js"),se.current.onmessage=ee=>{console.log("[DEBUG] AI worker response received:",ee.data);const{move:ne,nodes:we}=ee.data;ne&&ge.current&&g==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",ne),console.log("[DEBUG] AI searched",we,"nodes"),ge.current=!1,Be.current&&(window.clearTimeout(Be.current),Be.current=null),Le.current&&Le.current(ne.from,ne.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},se.current.onerror=ee=>{console.error("[DEBUG] AI worker error:",ee),N("AI worker error - using fallback mode"),ge.current=!1}),()=>{se.current&&(se.current.terminate(),se.current=null),Be.current&&(window.clearTimeout(Be.current),Be.current=null)}),[]),G.useEffect(()=>{It()},[]);const It=async()=>{try{await tce();const ee=await ece(20);U(ee),console.log("Leaderboard data loaded:",ee)}catch(ee){N("Failed to load leaderboard"),console.error("Leaderboard error:",ee)}},Fn=async ee=>{if(console.log("[DEBUG] updateScore called with:",ee),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Y0(r)),await Mk(r,ee)?(console.log("[DEBUG] Successfully updated score for:",Y0(r)),await It()):console.error("[DEBUG] Failed to update score")}catch(ne){console.error("[DEBUG] Error in updateScore:",ne)}},ke=ee=>ee&&ee===ee.toUpperCase()?"red":"blue",er=(ee,ne)=>ee>=0&&ee<8&&ne>=0&&ne<8,Sw=(ee,ne)=>`${String.fromCharCode(97+ne)}${8-ee}`,vr=(ee,ne)=>{const we=ne==="blue"?"k":"K";let ye=null;for(let Ke=0;Ke<8;Ke++){for(let Nt=0;Nt<8;Nt++)if(ee[Ke][Nt]===we){ye={row:Ke,col:Nt};break}if(ye)break}if(!ye)return console.log(`King not found for ${ne}`),!1;const fe=ne==="blue"?"red":"blue",qe=Er(ye.row,ye.col,fe,ee);return console.log(`${ne} king at ${ye.row},${ye.col} under attack: ${qe}`),qe},Er=(ee,ne,we,ye)=>{for(let fe=0;fe<8;fe++)for(let qe=0;qe<8;qe++){const Ke=ye[fe][qe];if(Ke&&ke(Ke)===we&&ir(Ke,fe,qe,ee,ne,!1,we,ye,!0))return!0}return!1},Iw=(ee,ne,we,ye,fe,qe=l)=>{const Ke=qe.map(jn=>[...jn]),Nt=Ke[ee][ne];return Ke[we][ye]=Nt,Ke[ee][ne]=null,vr(Ke,fe)},Tr=(ee,ne,we,ye,fe,qe)=>{const Ke=ee==="blue"?-1:1,Nt=ee==="blue"?6:1;if(!er(ye,fe)||ee==="blue"&&ye>=ne||ee==="red"&&ye<=ne)return!1;const jn=Math.abs(ye-ne),qn=Math.abs(fe-we);if((jn===1&&qn===0||jn===2&&qn===0&&ne===Nt||jn===1&&qn===1)&&jn<=2&&qn<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:ee,from:`${ne},${we}`,to:`${ye},${fe}`}),we===fe&&ye===ne+Ke)return qe[ye][fe]===null;if(we===fe&&ne===Nt&&ye===ne+2*Ke)return qe[ne+Ke][we]===null&&qe[ye][fe]===null;if(Math.abs(we-fe)===1&&ye===ne+Ke){const yn=qe[ye][fe];return yn!==null&&ke(yn)!==ee}if(Math.abs(we-fe)===1&&ye===ne+Ke){const yn=qe[ne][fe];if(yn&&ke(yn)!==ee&&yn.toLowerCase()==="p"&&F.lastPawnDoubleMove&&F.lastPawnDoubleMove.row===ne&&F.lastPawnDoubleMove.col===fe)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},us=(ee,ne,we,ye,fe)=>ee!==we&&ne!==ye?!1:hs(ee,ne,we,ye,fe),ZC=(ee,ne,we,ye)=>{const fe=Math.abs(ee-we),qe=Math.abs(ne-ye);return fe===2&&qe===1||fe===1&&qe===2},sr=(ee,ne,we,ye,fe)=>Math.abs(ee-we)!==Math.abs(ne-ye)?!1:hs(ee,ne,we,ye,fe),ds=(ee,ne,we,ye,fe)=>us(ee,ne,we,ye,fe)||sr(ee,ne,we,ye,fe),lh=(ee,ne,we,ye,fe)=>{const qe=Math.abs(ne-ye),Ke=Math.abs(we-fe);if(qe<=1&&Ke<=1)return!0;if(qe===0&&Ke===2){if(ee==="blue"&&!F.blueKingMoved){if(fe===6&&!F.blueRooksMove.right||fe===2&&!F.blueRooksMove.left)return!0}else if(ee==="red"&&!F.redKingMoved&&(fe===6&&!F.redRooksMove.right||fe===2&&!F.redRooksMove.left))return!0}return!1},hs=(ee,ne,we,ye,fe)=>{const qe=ee===we?0:(we-ee)/Math.abs(we-ee),Ke=ne===ye?0:(ye-ne)/Math.abs(ye-ne);let Nt=ee+qe,jn=ne+Ke;for(;Nt!==we||jn!==ye;){if(fe[Nt][jn]!==null)return!1;Nt+=qe,jn+=Ke}return!0},ir=(ee,ne,we,ye,fe,qe=!0,Ke=ke(ee),Nt=l,jn=!1)=>{if(!er(ye,fe))return jn||console.log("[ILLEGAL MOVE] Out of board:",{piece:ee,startRow:ne,startCol:we,endRow:ye,endCol:fe}),!1;const qn=Nt[ye][fe];if(qn&&ke(qn)===Ke)return jn||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:ee,startRow:ne,startCol:we,endRow:ye,endCol:fe}),!1;const Zr=ee.toLowerCase();let yn=!1;switch(Zr){case"p":yn=Tr(Ke,ne,we,ye,fe,Nt);break;case"r":yn=us(ne,we,ye,fe,Nt);break;case"n":yn=ZC(ne,we,ye,fe);break;case"b":yn=sr(ne,we,ye,fe,Nt);break;case"q":yn=ds(ne,we,ye,fe,Nt);break;case"k":yn=lh(Ke,ne,we,ye,fe);break}return yn?yn&&qe&&Iw(ne,we,ye,fe,Ke,Nt)?(jn||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:ee,startRow:ne,startCol:we,endRow:ye,endCol:fe}),!1):yn:(jn||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:ee,startRow:ne,startCol:we,endRow:ye,endCol:fe,playerColor:Ke,pieceType:Zr,targetPiece:Nt[ye][fe],targetPieceColor:Nt[ye][fe]?ke(Nt[ye][fe]):null}),!1)},uh=(ee,ne=l,we=d)=>{const ye=[],fe=ne[ee.row][ee.col];if(!fe||ke(fe)!==we)return ye;const qe=fe.toLowerCase();if(qe==="p"){const Ke=we==="blue"?-1:1,Nt=we==="blue"?6:1,jn=ee.row+Ke;if(jn>=0&&jn<8&&ir(fe,ee.row,ee.col,jn,ee.col,!0,we,ne,!0)&&ye.push({row:jn,col:ee.col}),ee.row===Nt){const qn=ee.row+2*Ke;qn>=0&&qn<8&&ir(fe,ee.row,ee.col,qn,ee.col,!0,we,ne,!0)&&ye.push({row:qn,col:ee.col})}for(const qn of[-1,1]){const Zr=ee.col+qn,yn=ee.row+Ke;Zr>=0&&Zr<8&&yn>=0&&yn<8&&ir(fe,ee.row,ee.col,yn,Zr,!0,we,ne,!0)&&ye.push({row:yn,col:Zr})}}else if(qe==="n"){const Ke=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Nt,jn]of Ke){const qn=ee.row+Nt,Zr=ee.col+jn;qn>=0&&qn<8&&Zr>=0&&Zr<8&&ir(fe,ee.row,ee.col,qn,Zr,!0,we,ne,!0)&&ye.push({row:qn,col:Zr})}}else for(let Ke=0;Ke<8;Ke++)for(let Nt=0;Nt<8;Nt++)ir(fe,ee.row,ee.col,Ke,Nt,!0,we,ne,!0)&&ye.push({row:Ke,col:Nt});return ye},fs=(ee,ne=l)=>{if(!vr(ne,ee))return!1;for(let we=0;we<8;we++)for(let ye=0;ye<8;ye++){const fe=ne[we][ye];if(fe&&ke(fe)===ee&&uh({row:we,col:ye},ne,ee).length>0)return!1}return!0},_s=(ee,ne=l)=>{if(vr(ne,ee))return!1;for(let we=0;we<8;we++)for(let ye=0;ye<8;ye++){const fe=ne[we][ye];if(fe&&ke(fe)===ee&&uh({row:we,col:ye},ne,ee).length>0)return!1}return!0},Nw=(ee,ne)=>{if(g!=="active"||ge.current)return;const we=l[ee][ne],ye=we?ke(we):null;if(f&&M.some(fe=>fe.row===ee&&fe.col===ne)){or(f,{row:ee,col:ne});return}if(we&&ye===d){const fe=uh({row:ee,col:ne});p({row:ee,col:ne}),H(fe);return}p(null),H([])},or=(ee,ne,we=!1)=>{const ye=l[ee.row][ee.col];if(console.log("[MOVE ATTEMPT]",{from:ee,to:ne,piece:ye,isAIMove:we,board:JSON.parse(JSON.stringify(l)),moveHistory:I}),!!ye){if(ye.toLowerCase()==="p"&&(ke(ye)==="blue"&&ne.row===0||ke(ye)==="red"&&ne.row===7)){x({from:ee,to:ne}),_(!0);return}Yf(ee,ne,"q",we)}};Le.current=or;const ps=G.useCallback((ee,ne,we=!1)=>{T(!0);const ye=l.map(Ke=>[...Ke]),fe=ye[ee.row][ee.col];if(!fe)return;ye[ne.row][ne.col]=fe,ye[ee.row][ee.col]=null,Ku(ye,ee,ne,fe);const qe=Tm(ee,ne);if(k(Ke=>{const Nt=[...Ke,qe];return console.log("[MOVE HISTORY UPDATED]",Nt),Nt}),K({from:ee,to:ne}),p(null),H([]),I.length<10&&!we){const Ke=DK(ye,d==="blue"?"red":"blue");Ye(Ke).then(Nt=>{Nt&&Nt.moves&&Nt.moves.length>0&&(De(Nt.moves.slice(0,3)),Yt(!0),setTimeout(()=>Yt(!1),5e3))})}Ii(ee,ne,fe),h(Ke=>{const Nt=Ke==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",Nt),dh(ye,Nt),Nt}),dh(ye,d==="blue"?"red":"blue"),u(ye),ge.current=!1,Ut.current=!1,lt.current=!1,T(!1)},[l,d,I,Ye]);G.useEffect(()=>{if(!ge.current&&a==="ai"&&d==="red"&&!Ut.current&&!z)if(ge.current=!0,y==="easy")setTimeout(()=>{const ee=Cr(l);ee?or(ee.from,ee.to,!0):ge.current=!1},600);else{N("AI is calculating...");const ee=DK(l,d);if(lt.current)return;lt.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:ee,difficulty:y,movetime:3e3})}).then(we=>{if(we.ok)return we.json();throw new Error("API call failed")}).then(we=>{console.log("[DEBUG] Stockfish API response:",we);const ye=we.bestmove||we.move;if(ye&&ye!=="(none)"&&ye.length===4){const fe=ye.charCodeAt(0)-97,qe=parseInt(ye[1]),Ke=ye.charCodeAt(2)-97,Nt=parseInt(ye[3]),jn=8-qe,qn=8-Nt;if(console.log("[DEBUG] Parsed move:",{fromCol:fe,fromRowStockfish:qe,toCol:Ke,toRowStockfish:Nt,fromRow:jn,toRow:qn}),fe>=0&&fe<8&&jn>=0&&jn<8&&Ke>=0&&Ke<8&&qn>=0&&qn<8){const Zr={from:{row:jn,col:fe},to:{row:qn,col:Ke}},yn=l[jn][fe];if(console.log("[DEBUG] Move validation:",{piece:yn,moveObj:Zr,isValid:yn&&ke(yn)==="red"&&ir(yn,jn,fe,qn,Ke,!0,"red",l)}),yn&&ke(yn)==="red"&&ir(yn,jn,fe,qn,Ke,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",Zr),or(Zr.from,Zr.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const xw=Cr(l);xw&&or(xw.from,xw.to,!0),ge.current=!1,lt.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const Zr=Cr(l);Zr&&or(Zr.from,Zr.to,!0),ge.current=!1,lt.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const fe=Cr(l);fe&&or(fe.from,fe.to,!0),ge.current=!1,lt.current=!1}}).catch(we=>{console.error("[DEBUG] Stockfish API error:",we),N("AI error. Falling back to random moves.");const ye=Cr(l);ye&&or(ye.from,ye.to,!0),ge.current=!1,lt.current=!1})}},[d,a,y,l,F,pt]);const dh=(ee,ne)=>{console.log("Checking game end for player:",ne);const we=ee.some(fe=>fe.some(qe=>qe==="k")),ye=ee.some(fe=>fe.some(qe=>qe==="K"));if(!we)return console.log("[GAME END] KING CAPTURED - Red wins!"),m("checkmate"),N("King captured! Red wins!"),Fn("loss"),Ce(!0),setTimeout(()=>Ce(!1),3e3),"checkmate";if(!ye)return console.log("[GAME END] KING CAPTURED - Blue wins!"),m("checkmate"),N("King captured! You win!"),Fn("win"),Ce(!0),setTimeout(()=>Ce(!1),3e3),"checkmate";if(console.log("Is king in check:",vr(ee,ne)),fs(ne,ee)){console.log("[GAME END] CHECKMATE",{winner:ne==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(ee)),moveHistory:I}),m("checkmate");const fe=ne==="blue"?"red":"blue";return fe==="blue"?(N("Checkmate! You win!"),_a("victory"),fh(!0),cn(!0),Qf(),Fn("win"),Ce(!0),setTimeout(()=>Ce(!1),3e3)):(N(`Checkmate! ${fe==="red"?"AI":"Opponent"} wins!`),_a("loser"),qo(!0),Fn("loss"),Ce(!0),setTimeout(()=>Ce(!1),3e3)),"checkmate"}if(_s(ne,ee)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(ee)),moveHistory:I}),m("stalemate");const fe=ne==="blue"?"red":"blue";return fe==="blue"?(N("Stalemate! You win!"),_a("victory"),fh(!0),cn(!0),Qf(),Fn("win"),Ce(!0),setTimeout(()=>Ce(!1),3e3)):(N(`Stalemate! ${fe==="red"?"AI":"Opponent"} wins!`),_a("loser"),qo(!0),Fn("loss"),Ce(!0),setTimeout(()=>Ce(!1),3e3)),"stalemate"}return vr(ee,ne)?(console.log("CHECK detected!"),_a("check"),N(`${ne==="blue"?"Blue":"Red"} is in check!`)):N("Your turn"),null},Cr=ee=>{const ne=[];for(let fe=0;fe<8;fe++)for(let qe=0;qe<8;qe++){const Ke=ee[fe][qe];Ke&&ke(Ke)==="red"&&ne.push({row:fe,col:qe})}for(let fe=ne.length-1;fe>0;fe--){const qe=Math.floor(Math.random()*(fe+1));[ne[fe],ne[qe]]=[ne[qe],ne[fe]]}const we=[],ye=[];for(const fe of ne){const qe=uh(fe,ee,"red");for(const Ke of qe){const Nt=ee[Ke.row][Ke.col];if(Nt&&ke(Nt)==="blue"){const qn={p:100,n:320,b:330,r:500,q:900,k:2e4}[Nt.toLowerCase()]||0;we.push({from:fe,to:Ke,value:qn})}else ye.push({from:fe,to:Ke})}}if(we.length>0&&Math.random()<.3){we.sort((fe,qe)=>fe.value-qe.value);for(const fe of we){const qe=ee.map(Nt=>[...Nt]),Ke=qe[fe.from.row][fe.from.col];if(qe[fe.to.row][fe.to.col]=Ke,qe[fe.from.row][fe.from.col]=null,!vr(qe,"red"))return{from:fe.from,to:fe.to}}}for(const fe of ye){const qe=ee.map(Nt=>[...Nt]),Ke=qe[fe.from.row][fe.from.col];if(qe[fe.to.row][fe.to.col]=Ke,qe[fe.from.row][fe.from.col]=null,!vr(qe,"red"))return fe}we.sort((fe,qe)=>fe.value-qe.value);for(const fe of we){const qe=ee.map(Nt=>[...Nt]),Ke=qe[fe.from.row][fe.from.col];if(qe[fe.to.row][fe.to.col]=Ke,qe[fe.from.row][fe.from.col]=null,!vr(qe,"red"))return{from:fe.from,to:fe.to}}return null},Ur=()=>{u(JSON.parse(JSON.stringify(OK))),h("blue"),p(null),m("active"),k([]),H([]),K(null),v(!1),N("Select game mode"),X({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ge.current&&(ge.current=!1)},qf=()=>{if(Jf(),console.log("[DEBUG] startGame called, difficulty:",y,"gameMode:",a),a==="online"){v(!1),ce(!1);return}v(!0),ce(!1),N("Game started! Your turn");const ee=Ft();Y(ee),console.log("[DEBUG] Game started with chessboard:",ee)},gs=ee=>`${ee.slice(0,6)}...${ee.slice(-4)}`,Jr=(ee,ne)=>{const we=l[ee][ne],ye=(f==null?void 0:f.row)===ee&&(f==null?void 0:f.col)===ne,fe=M.some(Ke=>Ke.row===ee&&Ke.col===ne),qe=j&&(j.from.row===ee&&j.from.col===ne||j.to.row===ee&&j.to.col===ne);return b.jsxs("div",{className:`square ${ye?"selected":""} ${fe?"legal-move":""} ${qe?"last-move":""}`,onClick:()=>Nw(ee,ne),onTouchStart:Ke=>bO(ee,ne,Ke),onTouchMove:vO,children:[we&&b.jsx("div",{className:"piece",style:{backgroundImage:Vx[we]?`url(${Vx[we]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),fe&&b.jsx("div",{className:"legal-move-indicator"})]},`${ee}-${ne}`)},Vf=()=>{if(!E||!D)return null;const ee=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",children:ee.map(ne=>b.jsx("div",{className:"promotion-piece",onClick:()=>{Yf(D.from,D.to,ne),_(!1),x(null)},style:{backgroundImage:Vx[ne]?`url(${Vx[ne]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},ne))})]})})},[Kf,qu]=G.useState(null),hh=(ee=!1,ne="Click a piece to learn more about it.")=>b.jsxs("div",{className:`piece-gallery${ee?" piece-gallery-sm":""}`,children:[b.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:Mit.map(we=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{qu(Kf===we.key?null:we.key)},children:[b.jsx("img",{src:we.img,alt:we.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:we.name}),Kf===we.key&&b.jsx("div",{className:"piece-gallery-desc",children:we.desc})]},we.key))}),b.jsx("div",{className:"piece-gallery-tip",children:ne})]}),Vu=()=>b.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:b.jsx("div",{className:"difficulty-controls-col",children:b.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[b.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),b.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[b.jsx("button",{className:`difficulty-btn${y==="easy"?" selected":""}`,style:{background:y==="easy"?"#00ff00":"transparent",color:y==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>w("easy"),children:"Easy"}),b.jsx("button",{className:`difficulty-btn${y==="hard"?" selected":""}`,style:{background:y==="hard"?"#00ff00":"transparent",color:y==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>w("hard"),children:"Hard"})]}),b.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{qf()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[b.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),Ku=(ee,ne,we,ye)=>{if(ye.toLowerCase()==="p"&&(ke(ye)==="blue"&&we.row===0||ke(ye)==="red"&&we.row===7)){const fe=ke(ye)==="blue"?"q":"Q";ee[we.row][we.col]=fe}if(ye.toLowerCase()==="k"&&Math.abs(ne.col-we.col)===2){if(we.col===6)ee[ne.row][7]=null,ee[ne.row][5]=ke(ye)==="blue"?"r":"R";else if(we.col===2){const fe=ee[ne.row][3];ee[ne.row][0]=null,ee[ne.row][3]=ke(ye)==="blue"?"r":"R",fe&&fe.toLowerCase()==="q"&&(ee[ne.row][4]=fe)}}},Tm=(ee,ne,we,ye)=>{const fe=Sw(ee.row,ee.col),qe=Sw(ne.row,ne.col);return`${fe}-${qe}`},Ii=(ee,ne,we)=>{const ye={...F};we.toLowerCase()==="k"?ke(we)==="blue"?ye.blueKingMoved=!0:ye.redKingMoved=!0:we.toLowerCase()==="r"&&(ke(we)==="blue"?(ee.col===0&&(ye.blueRooksMove.left=!0),ee.col===7&&(ye.blueRooksMove.right=!0)):(ee.col===0&&(ye.redRooksMove.left=!0),ee.col===7&&(ye.redRooksMove.right=!0))),we.toLowerCase()==="p"&&Math.abs(ee.row-ne.row)===2?ye.lastPawnDoubleMove={row:ne.row,col:ne.col}:ye.lastPawnDoubleMove=null,X(ye)},Yf=(ee,ne,we="q",ye=!1)=>{l[ee.row][ee.col];const qe=l[ne.row][ne.col]!==null;if(_a(qe?"capture":"move"),qe){W({row:ne.row,col:ne.col,show:!0}),setTimeout(()=>{ps(ee,ne,ye),W(null)},500);return}ps(ee,ne,ye)},_a=ee=>{if(!te)return;let ne="";switch(ee){case"move":ne="/images/move.mp3";break;case"capture":ne="/images/capture.mp3";break;case"check":ne="/images/play.mp3";break;case"checkmate":ne="/images/victory.mp3";break;case"victory":ne="/images/victory.mp3";break;case"loser":ne="/images/loser.mp3";break;case"upgrade":ne="/images/upgrade.mp3";break;default:ne="/images/move.mp3"}new Audio(ne).play().catch(()=>{})},Qf=()=>{_a("victory");for(let ee=0;ee<50;ee++)setTimeout(()=>{const ne=document.createElement("div");ne.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(ne),setTimeout(()=>ne.remove(),3e3)},ee*100);for(let ee=0;ee<15;ee++)setTimeout(()=>{const ne=document.createElement("div"),we=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],ye=we[Math.floor(Math.random()*we.length)];ne.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${ye};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(ne),setTimeout(()=>ne.remove(),6e3)},ee*200);setTimeout(()=>cn(!1),5e3)},[Jl,fh]=G.useState(!1),[Go,qo]=G.useState(!1),ph=()=>{fh(!1),qo(!1)},gh=()=>{ph(),Ur()},Yu=()=>{ph(),v(!1)},Jf=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Rm=a==="online",[Aa,km]=G.useState("leaderboard"),bO=(ee,ne,we)=>{we.preventDefault(),Nw(ee,ne)},vO=ee=>{ee.preventDefault()};return b.jsxs("div",{className:`chess-game${n?" fullscreen":""}${Qe?" chess-dark-mode":""}${$?" game-active":""}`,children:[b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:"LAWB CHESS TESTNET BETA 3000"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,children:"_"}),b.jsx("button",{onClick:t,children:""})]})]}),b.jsx("div",{className:"game-stable-layout",children:b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"left-sidebar",children:[Aa==="leaderboard"&&b.jsxs("div",{className:"leaderboard-compact",children:[b.jsx("h3",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table-compact",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"Rank"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:Array.isArray(P)&&P.slice(0,8).map((ee,ne)=>{if(typeof ee=="object"&&ee!==null&&"username"in ee&&"wins"in ee&&"losses"in ee&&"draws"in ee&&"points"in ee){const we=ee;return b.jsxs("tr",{children:[b.jsx("td",{children:ne+1}),b.jsx("td",{children:gs(we.username)}),b.jsx("td",{children:we.points})]},we.username)}return null})})]})})]}),Aa==="moves"&&$&&b.jsxs("div",{className:"move-history-compact",children:[b.jsx("div",{className:"move-history-title",children:"Moves"}),b.jsx("ul",{className:"move-history-list-compact",children:I.slice().reverse().map((ee,ne)=>b.jsx("li",{children:ee},I.length-1-ne))})]}),Aa==="gallery"&&b.jsx("div",{className:"piece-gallery-compact",children:hh(!0,"Click pieces to learn more")})]}),b.jsxs("div",{className:"center-area",children:[$&&b.jsxs("div",{className:"game-info-compact",children:[b.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===qM.AI&&b.jsxs("span",{className:"mode-play",children:[y==="easy"?"Easy":"Hard"," AI"]}),Rm&&b.jsxs("span",{className:"wager-display",children:["Wager: ",S," tDMT"]})]}),$?b.jsxs("div",{className:"chess-main-area",children:[b.jsx("div",{className:"chessboard-container",children:b.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${O})`},children:[Array.from({length:8},(ee,ne)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(we,ye)=>Jr(ne,ye))},ne)),B&&B.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${B.row*12.5}%`,left:`${B.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:b.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),b.jsxs("div",{className:"game-controls-compact",children:[b.jsxs("div",{className:"sidebar-toggle-group",children:[b.jsx("button",{className:Aa==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>km("leaderboard"),children:"Leaderboard"}),b.jsx("button",{className:Aa==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>km("moves"),children:"Moves"}),b.jsx("button",{className:Aa==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>km("gallery"),children:"Gallery"})]}),b.jsx("button",{onClick:gh,children:"New Game"}),b.jsx("button",{onClick:Yu,children:"Menu"})]})]}):st?Vu():Rm?b.jsx(Yle,{onClose:t,onMinimize:e,fullscreen:n}):b.jsxs("div",{className:"game-mode-panel-streamlined",children:[b.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:b.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),b.jsxs("div",{className:"mode-selection-compact",children:[b.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),b.jsx("button",{className:`mode-btn-compact ${Rm?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===qM.AI&&b.jsx("button",{className:"start-btn-compact",onClick:()=>ce(!0),children:"Start Game"}),Rm&&b.jsxs("div",{className:"pvp-info",children:[b.jsx("p",{children:"Challenge other players with tDMT wagers"}),b.jsx("p",{children:"Create or join games instantly"})]}),b.jsxs("div",{className:"help-section-compact",children:[b.jsx("h4",{children:"How to Play"}),b.jsxs("div",{className:"help-content",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),b.jsx("p",{children:b.jsx("strong",{children:"Piece Movements:"})}),b.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),b.jsx("p",{children:b.jsx("strong",{children:"Special Rules:"})}),b.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),b.jsx("p",{children:b.jsx("strong",{children:"Game Modes:"})}),b.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Multiplayer:"})," wage tDMT and challenge other players on Sanko testnet. Winner takes the pot minus 5% house fee."]})]}),b.jsx("p",{children:b.jsx("strong",{children:"Multiplayer Flow:"})}),b.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[b.jsx("li",{children:"Connect your wallet to Sanko testnet"}),b.jsx("li",{children:"Create a game and set your wager amount in tDMT"}),b.jsx("li",{children:"Share your invite code with an opponent"}),b.jsx("li",{children:"Opponent joins and matches your wager"}),b.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),b.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Lawb Chess Testnet Contract:"})," ",b.jsx("a",{href:"https://testnet.sankoscan.io/address/0x3112AF5728520F52FD1C6710dD7bD52285a68e47?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"})]}),b.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"Network Name:"})," Sanko Testnet"]}),b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"RPC URL:"})," https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}),b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"Chain ID:"})," 1992"]}),b.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[b.jsx("strong",{children:"Currency Symbol:"})," tDMT"]})]})]})]}),b.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:b.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),b.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[b.jsx("button",{className:Aa==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>km("leaderboard"),children:"Leaderboard"}),b.jsx("button",{className:Aa==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>km("gallery"),children:"Gallery"})]})]})]})]})}),ae&&hh(!0),E&&Vf(),Se&&b.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),Jl&&b.jsxs("div",{className:"victory-overlay",children:[b.jsx("div",{className:"balloons-container"}),b.jsx("div",{className:"victory-modal",children:b.jsxs("div",{className:"victory-content",children:[b.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),b.jsx("div",{children:"Victory!"}),b.jsx("button",{onClick:gh,children:"New Game"})]})})]}),Go&&b.jsxs("div",{className:"defeat-overlay",children:[b.jsx("div",{className:"blood-overlay"}),b.jsx("div",{className:"victory-modal",children:b.jsxs("div",{className:"victory-content",children:[b.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),b.jsx("div",{children:"Defeat!"}),b.jsx("button",{onClick:gh,children:"Try Again"})]})})]})]})};function DK(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const MK=()=>{const[t,e]=G.useState("singleplayer"),n=()=>{window.location.href="/"};return b.jsx("div",{className:"chess-page",children:b.jsx("div",{className:"chess-content",children:t==="singleplayer"?b.jsx(Lit,{onClose:n}):b.jsx(Yle,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},$it=new lAe,Fit=typeof window<"u"&&window.location.hostname.startsWith("chess."),jit=()=>jqe("(max-width: 768px)")?b.jsx(Fqe,{}):b.jsx(Pqe,{});hB.createRoot(document.getElementById("root")).render(b.jsx(Hc.StrictMode,{children:b.jsx(A_e,{config:qet.wagmiConfig,children:b.jsx(TAe,{client:$it,children:b.jsx(Rqe,{children:b.jsx(Nqe,{children:Fit?b.jsx(xT,{path:"/*",element:b.jsx(MK,{})}):b.jsxs(b.Fragment,{children:[b.jsx(xT,{path:"/",element:b.jsx(jit,{})}),b.jsx(xT,{path:"/chess",element:b.jsx(MK,{})})]})})})})})}));export{AT as $,Et as A,Jt as B,ht as C,nl as D,$_ as E,vs as F,KW as G,Ho as H,Wo as I,jt as J,PU as K,e_ as L,Fi as M,Dke as N,Pe as O,Ig as P,vu as Q,mn as R,ou as S,Xa as T,ap as U,Qa as V,go as W,Lke as X,jr as Y,vat as Z,NL as _,ot as a,g2e as a0,W_ as a1,gat as a2,$i as a3,rh as a4,ei as a5,yat as a6,roe as a7,xL as a8,ZE as a9,B6e as aA,V6e as aB,sat as aC,nat as aD,kP as aE,aat as aF,iat as aG,lI as aH,eot as aI,DE as aJ,m5 as aK,W$ as aL,Loe as aM,$oe as aN,ql as aO,En as aP,nQe as aQ,Gl as aR,Gee as aS,gCe as aT,no as aa,uot as ab,hf as ac,Yd as ad,KA as ae,Rt as af,gi as ag,kp as ah,Lee as ai,Y2 as aj,Ne as ak,g$ as al,_i as am,ave as an,z2 as ao,I$ as ap,hve as aq,PI as ar,Fl as as,Sm as at,P_ as au,Kd as av,q6e as aw,rat as ax,dH as ay,Dse as az,mm as b,IT as c,Ha as d,zr as e,ft as f,ff as g,$t as h,Dl as i,J as j,xs as k,Su as l,Pn as m,bat as n,Fc as o,Zt as p,Ga as q,wat as r,RLe as s,Od as t,MHe as u,Ct as v,Id as w,pat as x,yr as y,dre as z};
