const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-CjV8Ytjg.js","assets/if-defined-DQ37JYJF.js","assets/index-CVdE1_BN.js","assets/index-BLiBw8NK.js","assets/ref-kjawNTam.js","assets/index-CfB5tJTw.js","assets/index-D_G-oGbT.js","assets/index-CrKxZYKa.js","assets/index-9390mAgA.js","assets/index-BGt_IKTi.js","assets/index-DQ4qW3QO.js","assets/index-CRcPSwfK.js","assets/email-CO3zVOx-.js","assets/index-CtyQKKHf.js","assets/socials-BwsxQ3eD.js","assets/index-igz9c0qR.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-CyiU_c4d.js","assets/index-DbEcjJhJ.js","assets/index-BvEYfMXR.js","assets/index-BjgG08Zl.js","assets/swaps-CVVMp0P-.js","assets/index-DT6EDLSM.js","assets/index-B7W_L5Nu.js","assets/index-Dxq-byUI.js","assets/send-DtPYvXLs.js","assets/index-B7_gSG4z.js","assets/index-BpA_3i_x.js","assets/receive-lgI95kTQ.js","assets/index-J2No2gPg.js","assets/onramp-D1PlR3_Z.js","assets/index-BE_2Ke4y.js","assets/index-Btl9JgwB.js","assets/index-dYuaQS3p.js","assets/transactions-CITcWOMI.js","assets/index-BpLy15k5.js","assets/index-DT67Hgi9.js","assets/index-CEaIhT1s.js","assets/index-B89xne8U.js","assets/index-DQftNDkG.js","assets/w3m-modal-DgufLofD.js"])))=>i.map(i=>d[i]);
var une=Object.defineProperty;var n$=t=>{throw TypeError(t)};var dne=(t,e,n)=>e in t?une(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>dne(t,typeof e!="symbol"?e+"":e,n),BT=(t,e,n)=>e.has(t)||n$("Cannot "+n);var _=(t,e,n)=>(BT(t,e,"read from private field"),n?n.call(t):e.get(t)),K=(t,e,n)=>e.has(t)?n$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),U=(t,e,n,r)=>(BT(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),fe=(t,e,n)=>(BT(t,e,"access private method"),n);var md=(t,e,n,r)=>({set _(s){U(t,e,s,n)},get _(){return _(t,e,r)}});function hne(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function vz(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Ez={exports:{}},Sx={},_z={exports:{}},Ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC=Symbol.for("react.element"),fne=Symbol.for("react.portal"),pne=Symbol.for("react.fragment"),gne=Symbol.for("react.strict_mode"),mne=Symbol.for("react.profiler"),yne=Symbol.for("react.provider"),wne=Symbol.for("react.context"),bne=Symbol.for("react.forward_ref"),vne=Symbol.for("react.suspense"),Ene=Symbol.for("react.memo"),_ne=Symbol.for("react.lazy"),r$=Symbol.iterator;function Cne(t){return t===null||typeof t!="object"?null:(t=r$&&t[r$]||t["@@iterator"],typeof t=="function"?t:null)}var Cz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Az=Object.assign,Sz={};function B0(t,e,n){this.props=t,this.context=e,this.refs=Sz,this.updater=n||Cz}B0.prototype.isReactComponent={};B0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};B0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Iz(){}Iz.prototype=B0.prototype;function c5(t,e,n){this.props=t,this.context=e,this.refs=Sz,this.updater=n||Cz}var l5=c5.prototype=new Iz;l5.constructor=c5;Az(l5,B0.prototype);l5.isPureReactComponent=!0;var s$=Array.isArray,xz=Object.prototype.hasOwnProperty,u5={current:null},Nz={key:!0,ref:!0,__self:!0,__source:!0};function Tz(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)xz.call(e,r)&&!Nz.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:hC,type:t,key:i,ref:o,props:s,_owner:u5.current}}function Ane(t,e){return{$$typeof:hC,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function d5(t){return typeof t=="object"&&t!==null&&t.$$typeof===hC}function Sne(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var i$=/\/+/g;function FT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Sne(""+t.key):e.toString(36)}function BA(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hC:case fne:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+FT(o,0):r,s$(s)?(n="",t!=null&&(n=t.replace(i$,"$&/")+"/"),BA(s,e,n,"",function(l){return l})):s!=null&&(d5(s)&&(s=Ane(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(i$,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",s$(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+FT(i,a);o+=BA(i,e,n,c,s)}else if(c=Cne(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+FT(i,a++),o+=BA(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function E1(t,e,n){if(t==null)return t;var r=[],s=0;return BA(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Ine(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ci={current:null},FA={transition:null},xne={ReactCurrentDispatcher:Ci,ReactCurrentBatchConfig:FA,ReactCurrentOwner:u5};function Rz(){throw Error("act(...) is not supported in production builds of React.")}Ht.Children={map:E1,forEach:function(t,e,n){E1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return E1(t,function(){e++}),e},toArray:function(t){return E1(t,function(e){return e})||[]},only:function(t){if(!d5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ht.Component=B0;Ht.Fragment=pne;Ht.Profiler=mne;Ht.PureComponent=c5;Ht.StrictMode=gne;Ht.Suspense=vne;Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xne;Ht.act=Rz;Ht.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Az({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=u5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)xz.call(e,c)&&!Nz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:hC,type:t.type,key:s,ref:i,props:r,_owner:o}};Ht.createContext=function(t){return t={$$typeof:wne,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yne,_context:t},t.Consumer=t};Ht.createElement=Tz;Ht.createFactory=function(t){var e=Tz.bind(null,t);return e.type=t,e};Ht.createRef=function(){return{current:null}};Ht.forwardRef=function(t){return{$$typeof:bne,render:t}};Ht.isValidElement=d5;Ht.lazy=function(t){return{$$typeof:_ne,_payload:{_status:-1,_result:t},_init:Ine}};Ht.memo=function(t,e){return{$$typeof:Ene,type:t,compare:e===void 0?null:e}};Ht.startTransition=function(t){var e=FA.transition;FA.transition={};try{t()}finally{FA.transition=e}};Ht.unstable_act=Rz;Ht.useCallback=function(t,e){return Ci.current.useCallback(t,e)};Ht.useContext=function(t){return Ci.current.useContext(t)};Ht.useDebugValue=function(){};Ht.useDeferredValue=function(t){return Ci.current.useDeferredValue(t)};Ht.useEffect=function(t,e){return Ci.current.useEffect(t,e)};Ht.useId=function(){return Ci.current.useId()};Ht.useImperativeHandle=function(t,e,n){return Ci.current.useImperativeHandle(t,e,n)};Ht.useInsertionEffect=function(t,e){return Ci.current.useInsertionEffect(t,e)};Ht.useLayoutEffect=function(t,e){return Ci.current.useLayoutEffect(t,e)};Ht.useMemo=function(t,e){return Ci.current.useMemo(t,e)};Ht.useReducer=function(t,e,n){return Ci.current.useReducer(t,e,n)};Ht.useRef=function(t){return Ci.current.useRef(t)};Ht.useState=function(t){return Ci.current.useState(t)};Ht.useSyncExternalStore=function(t,e,n){return Ci.current.useSyncExternalStore(t,e,n)};Ht.useTransition=function(){return Ci.current.useTransition()};Ht.version="18.3.1";_z.exports=Ht;var D=_z.exports;const Lo=Hg(D),Nne=hne({__proto__:null,default:Lo},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tne=D,Rne=Symbol.for("react.element"),Pne=Symbol.for("react.fragment"),One=Object.prototype.hasOwnProperty,kne=Tne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dne={key:!0,ref:!0,__self:!0,__source:!0};function Pz(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)One.call(e,r)&&!Dne.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Rne,type:t,key:i,ref:o,props:s,_owner:kne.current}}Sx.Fragment=Pne;Sx.jsx=Pz;Sx.jsxs=Pz;Ez.exports=Sx;var b=Ez.exports,o$={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne=function(t,e){if(!t)throw F0(e)},F0=function(t){return new Error("Firebase Database ("+Oz.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Lne=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},h5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Lne(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Mne;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Mne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dz=function(t){const e=kz(t);return h5.encodeByteArray(e,!0)},kS=function(t){return Dz(t).replace(/\./g,"")},GO=function(t){try{return h5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Une(t){return Lz(void 0,t)}function Lz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!$ne(n)||(t[n]=Lz(t[n],e[n]));return t}function $ne(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fne=()=>Bne().__FIREBASE_DEFAULTS__,jne=()=>{if(typeof process>"u"||typeof o$>"u")return;const t=o$.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zne=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&GO(t[1]);return e&&JSON.parse(e)},Mz=()=>{try{return Fne()||jne()||zne()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Wne=t=>{var e,n;return(n=(e=Mz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Hne=t=>{const e=Wne(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Uz=()=>{var t;return(t=Mz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gne(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kS(JSON.stringify(n)),kS(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qne(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qne())}function Vne(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kne(){return Oz.NODE_ADMIN===!0}function Yne(){try{return typeof indexedDB=="object"}catch{return!1}}function Qne(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jne="FirebaseError";class fC extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Jne,Object.setPrototypeOf(this,fC.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bz.prototype.create)}}class Bz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Zne(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new fC(s,a,r)}}function Zne(t,e){return t.replace(Xne,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Xne=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t){return JSON.parse(t)}function Gr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=lE(GO(i[0])||""),n=lE(GO(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},ere=function(t){const e=Fz(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},tre=function(t){const e=Fz(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Kw(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function a$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function DS(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function qO(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(c$(i)&&c$(o)){if(!qO(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function c$(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nre(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rre{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function f5(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sre=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Ne(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},xx=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t){return t&&t._delegate?t._delegate:t}class uE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ire{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ix;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(are(e))try{this.getOrInitializeService({instanceIdentifier:Bf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Bf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bf){return this.instances.has(e)}getOptions(e=Bf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ore(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bf){return this.component?this.component.multipleInstances?e:Bf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ore(t){return t===Bf?void 0:t}function are(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ire(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gn||(Gn={}));const lre={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},ure=Gn.INFO,dre={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},hre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=dre[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jz{constructor(e){this.name=e,this._logLevel=ure,this._logHandler=hre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...e),this._logHandler(this,Gn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...e),this._logHandler(this,Gn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...e),this._logHandler(this,Gn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...e),this._logHandler(this,Gn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...e),this._logHandler(this,Gn.ERROR,...e)}}const fre=(t,e)=>e.some(n=>t instanceof n);let l$,u$;function pre(){return l$||(l$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gre(){return u$||(u$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zz=new WeakMap,VO=new WeakMap,Wz=new WeakMap,jT=new WeakMap,p5=new WeakMap;function mre(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Dh(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zz.set(n,t)}).catch(()=>{}),p5.set(e,t),e}function yre(t){if(VO.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});VO.set(t,e)}let KO={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return VO.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wre(t){KO=t(KO)}function bre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zT(this),e,...n);return Wz.set(r,e.sort?e.sort():[e]),Dh(r)}:gre().includes(t)?function(...e){return t.apply(zT(this),e),Dh(zz.get(this))}:function(...e){return Dh(t.apply(zT(this),e))}}function vre(t){return typeof t=="function"?bre(t):(t instanceof IDBTransaction&&yre(t),fre(t,pre())?new Proxy(t,KO):t)}function Dh(t){if(t instanceof IDBRequest)return mre(t);if(jT.has(t))return jT.get(t);const e=vre(t);return e!==t&&(jT.set(t,e),p5.set(e,t)),e}const zT=t=>p5.get(t);function Ere(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Dh(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Dh(o.result),c.oldVersion,c.newVersion,Dh(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const _re=["get","getKey","getAll","getAllKeys","count"],Cre=["put","add","delete","clear"],WT=new Map;function d$(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(WT.get(e))return WT.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Cre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||_re.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return WT.set(e,i),i}wre(t=>({...t,get:(e,n,r)=>d$(e,n)||t.get(e,n,r),has:(e,n)=>!!d$(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Are{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Sre(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Sre(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const YO="@firebase/app",h$="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new jz("@firebase/app"),Ire="@firebase/app-compat",xre="@firebase/analytics-compat",Nre="@firebase/analytics",Tre="@firebase/app-check-compat",Rre="@firebase/app-check",Pre="@firebase/auth",Ore="@firebase/auth-compat",kre="@firebase/database",Dre="@firebase/data-connect",Lre="@firebase/database-compat",Mre="@firebase/functions",Ure="@firebase/functions-compat",$re="@firebase/installations",Bre="@firebase/installations-compat",Fre="@firebase/messaging",jre="@firebase/messaging-compat",zre="@firebase/performance",Wre="@firebase/performance-compat",Hre="@firebase/remote-config",Gre="@firebase/remote-config-compat",qre="@firebase/storage",Vre="@firebase/storage-compat",Kre="@firebase/firestore",Yre="@firebase/vertexai-preview",Qre="@firebase/firestore-compat",Jre="firebase",Zre="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="[DEFAULT]",Xre={[YO]:"fire-core",[Ire]:"fire-core-compat",[Nre]:"fire-analytics",[xre]:"fire-analytics-compat",[Rre]:"fire-app-check",[Tre]:"fire-app-check-compat",[Pre]:"fire-auth",[Ore]:"fire-auth-compat",[kre]:"fire-rtdb",[Dre]:"fire-data-connect",[Lre]:"fire-rtdb-compat",[Mre]:"fire-fn",[Ure]:"fire-fn-compat",[$re]:"fire-iid",[Bre]:"fire-iid-compat",[Fre]:"fire-fcm",[jre]:"fire-fcm-compat",[zre]:"fire-perf",[Wre]:"fire-perf-compat",[Hre]:"fire-rc",[Gre]:"fire-rc-compat",[qre]:"fire-gcs",[Vre]:"fire-gcs-compat",[Kre]:"fire-fst",[Qre]:"fire-fst-compat",[Yre]:"fire-vertex","fire-js":"fire-js",[Jre]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=new Map,ese=new Map,JO=new Map;function f$(t,e){try{t.container.addComponent(e)}catch(n){Yu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function LS(t){const e=t.name;if(JO.has(e))return Yu.debug(`There were multiple attempts to register component ${e}.`),!1;JO.set(e,t);for(const n of dE.values())f$(n,t);for(const n of ese.values())f$(n,t);return!0}function tse(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nse={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lh=new Bz("app","Firebase",nse);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rse{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sse=Zre;function Hz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:QO,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Lh.create("bad-app-name",{appName:String(s)});if(n||(n=Uz()),!n)throw Lh.create("no-options");const i=dE.get(s);if(i){if(qO(n,i.options)&&qO(r,i.config))return i;throw Lh.create("duplicate-app",{appName:s})}const o=new cre(s);for(const c of JO.values())o.addComponent(c);const a=new rse(n,r,o);return dE.set(s,a),a}function Gz(t=QO){const e=dE.get(t);if(!e&&t===QO&&Uz())return Hz();if(!e)throw Lh.create("no-app",{appName:t});return e}function ise(){return Array.from(dE.values())}function Ty(t,e,n){var r;let s=(r=Xre[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yu.warn(a.join(" "));return}LS(new uE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ose="firebase-heartbeat-database",ase=1,hE="firebase-heartbeat-store";let HT=null;function qz(){return HT||(HT=Ere(ose,ase,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hE)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lh.create("idb-open",{originalErrorMessage:t.message})})),HT}async function cse(t){try{const n=(await qz()).transaction(hE),r=await n.objectStore(hE).get(Vz(t));return await n.done,r}catch(e){if(e instanceof fC)Yu.warn(e.message);else{const n=Lh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yu.warn(n.message)}}}async function p$(t,e){try{const r=(await qz()).transaction(hE,"readwrite");await r.objectStore(hE).put(e,Vz(t)),await r.done}catch(n){if(n instanceof fC)Yu.warn(n.message);else{const r=Lh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yu.warn(r.message)}}}function Vz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lse=1024,use=30*24*60*60*1e3;class dse{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fse(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=g$();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=use}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yu.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=g$(),{heartbeatsToSend:r,unsentEntries:s}=hse(this._heartbeatsCache.heartbeats),i=kS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Yu.warn(n),""}}}function g$(){return new Date().toISOString().substring(0,10)}function hse(t,e=lse){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),m$(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),m$(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yne()?Qne().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cse(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return p$(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return p$(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function m$(t){return kS(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pse(t){LS(new uE("platform-logger",e=>new Are(e),"PRIVATE")),LS(new uE("heartbeat",e=>new dse(e),"PRIVATE")),Ty(YO,h$,t),Ty(YO,h$,"esm2017"),Ty("fire-js","")}pse("");var gse="firebase",mse="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ty(gse,mse,"app");var y$={};const w$="@firebase/database",b$="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kz="";function yse(t){Kz=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wse{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Gr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:lE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bse{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ad(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wse(e)}}catch{}return new bse},op=Yz("localStorage"),vse=Yz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=new jz("@firebase/database"),Ese=function(){let t=1;return function(){return t++}}(),Qz=function(t){const e=sre(t),n=new rre;n.update(e);const r=n.digest();return h5.encodeByteArray(r)},pC=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=pC.apply(null,r):typeof r=="object"?e+=Gr(r):e+=r,e+=" "}return e};let Tv=null,v$=!0;const _se=function(t,e){Ne(!0,"Can't turn on custom loggers persistently."),Ry.logLevel=Gn.VERBOSE,Tv=Ry.log.bind(Ry)},Ys=function(...t){if(v$===!0&&(v$=!1,Tv===null&&vse.get("logging_enabled")===!0&&_se()),Tv){const e=pC.apply(null,t);Tv(e)}},gC=function(t){return function(...e){Ys(t,...e)}},ZO=function(...t){const e="FIREBASE INTERNAL ERROR: "+pC(...t);Ry.error(e)},Qu=function(...t){const e=`FIREBASE FATAL ERROR: ${pC(...t)}`;throw Ry.error(e),new Error(e)},eo=function(...t){const e="FIREBASE WARNING: "+pC(...t);Ry.warn(e)},Cse=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&eo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Jz=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Ase=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Yw="[MIN_NAME]",lg="[MAX_NAME]",z0=function(t,e){if(t===e)return 0;if(t===Yw||e===lg)return-1;if(e===Yw||t===lg)return 1;{const n=E$(t),r=E$(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Sse=function(t,e){return t===e?0:t<e?-1:1},Eb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Gr(e))},g5=function(t){if(typeof t!="object"||t===null)return Gr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Gr(e[r]),n+=":",n+=g5(t[e[r]]);return n+="}",n},Zz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function ao(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Xz=function(t){Ne(!Jz(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Ise=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xse=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Nse(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Tse=new RegExp("^-?(0*)\\d{1,10}$"),Rse=-2147483648,Pse=2147483647,E$=function(t){if(Tse.test(t)){const e=Number(t);if(e>=Rse&&e<=Pse)return e}return null},W0=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw eo("Exception was thrown by user callback.",n),e},Math.floor(0))}},Ose=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Rv=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kse{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){eo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dse{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ys("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',eo(e)}}class jA{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}jA.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5="5",eW="v",tW="s",nW="r",rW="f",sW=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,iW="ls",oW="p",XO="ac",aW="websocket",cW="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=op.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&op.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Lse(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function uW(t,e,n){Ne(typeof e=="string","typeof type must == string"),Ne(typeof n=="object","typeof params must == object");let r;if(e===aW)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===cW)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Lse(t)&&(n.ns=t.namespace);const s=[];return ao(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mse{constructor(){this.counters_={}}incrementCounter(e,n=1){ad(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Une(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT={},qT={};function y5(t){const e=t.toString();return GT[e]||(GT[e]=new Mse),GT[e]}function Use(t,e){const n=t.toString();return qT[n]||(qT[n]=e()),qT[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $se{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&W0(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$="start",Bse="close",Fse="pLPCommand",jse="pRTLPCB",dW="id",hW="pw",fW="ser",zse="cb",Wse="seg",Hse="ts",Gse="d",qse="dframe",pW=1870,gW=30,Vse=pW-gW,Kse=25e3,Yse=3e4;class oy{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gC(e),this.stats_=y5(n),this.urlFn=c=>(this.appCheckToken&&(c[XO]=this.appCheckToken),uW(n,cW,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new $se(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Yse)),Ase(()=>{if(this.isClosed_)return;this.scriptTagHolder=new w5((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===_$)this.id=a,this.password=c;else if(o===Bse)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[_$]="t",r[fW]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[zse]=this.scriptTagHolder.uniqueCallbackIdentifier),r[eW]=m5,this.transportSessionId&&(r[tW]=this.transportSessionId),this.lastSessionId&&(r[iW]=this.lastSessionId),this.applicationId&&(r[oW]=this.applicationId),this.appCheckToken&&(r[XO]=this.appCheckToken),typeof location<"u"&&location.hostname&&sW.test(location.hostname)&&(r[nW]=rW);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){oy.forceAllow_=!0}static forceDisallow(){oy.forceDisallow_=!0}static isAvailable(){return oy.forceAllow_?!0:!oy.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ise()&&!xse()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Gr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Dz(n),s=Zz(r,Vse);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[qse]="t",r[dW]=e,r[hW]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Gr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class w5{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Ese(),window[Fse+this.uniqueCallbackIdentifier]=e,window[jse+this.uniqueCallbackIdentifier]=n,this.myIFrame=w5.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ys("frame writing exception"),a.stack&&Ys(a.stack),Ys(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ys("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[dW]=this.myID,e[hW]=this.myPW,e[fW]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gW+r.length<=pW;){const o=this.pendingSegs.shift();r=r+"&"+Wse+s+"="+o.seg+"&"+Hse+s+"="+o.ts+"&"+Gse+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Kse)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ys("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qse=16384,Jse=45e3;let MS=null;typeof MozWebSocket<"u"?MS=MozWebSocket:typeof WebSocket<"u"&&(MS=WebSocket);class hc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gC(this.connId),this.stats_=y5(n),this.connURL=hc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[eW]=m5,typeof location<"u"&&location.hostname&&sW.test(location.hostname)&&(o[nW]=rW),n&&(o[tW]=n),r&&(o[iW]=r),s&&(o[XO]=s),i&&(o[oW]=i),uW(e,aW,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,op.set("previous_websocket_failure",!0);try{let r;Kne(),this.mySock=new MS(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){hc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&MS!==null&&!hc.forceDisallow_}static previouslyFailed(){return op.isInMemoryStorage||op.get("previous_websocket_failure")===!0}markConnectionHealthy(){op.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=lE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Gr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Zz(n,Qse);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Jse))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hc.responsesRequiredToBeHealthy=2;hc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[oy,hc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=hc&&hc.isAvailable();let r=n&&!hc.previouslyFailed();if(e.webSocketOnly&&(n||eo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hc];else{const s=this.transports_=[];for(const i of fE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);fE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}fE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zse=6e4,Xse=5e3,eie=10*1024,tie=100*1024,VT="t",C$="d",nie="s",A$="r",rie="e",S$="o",I$="a",x$="n",N$="p",sie="h";class iie{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gC("c:"+this.id+":"),this.transportManager_=new fE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Rv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>tie?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>eie?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(VT in e){const n=e[VT];n===I$?this.upgradeIfSecondaryHealthy_():n===A$?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===S$&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Eb("t",e),r=Eb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:N$,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:I$,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:x$,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Eb("t",e),r=Eb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Eb(VT,e);if(C$ in e){const r=e[C$];if(n===sie){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===x$){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===nie?this.onConnectionShutdown_(r):n===A$?this.onReset_(r):n===rie?ZO("Server Error: "+r):n===S$?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ZO("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),m5!==r&&eo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Rv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Zse))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Rv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Xse))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:N$,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(op.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yW=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US extends yW{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!$z()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new US}getInitialEvent(e){return Ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$=32,R$=768;class Bn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function hn(){return new Bn("")}function Bt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function sf(t){return t.pieces_.length-t.pieceNum_}function Vn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Bn(t.pieces_,e)}function wW(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function oie(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function bW(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function vW(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Bn(e,0)}function qr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Bn(n,0)}function Wt(t){return t.pieceNum_>=t.pieces_.length}function pi(t,e){const n=Bt(t),r=Bt(e);if(n===null)return e;if(n===r)return pi(Vn(t),Vn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function b5(t,e){if(sf(t)!==sf(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function mc(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(sf(t)>sf(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class aie{constructor(e,n){this.errorPrefix_=n,this.parts_=bW(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=xx(this.parts_[r]);EW(this)}}function cie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=xx(e),EW(t)}function lie(t){const e=t.parts_.pop();t.byteLength_-=xx(e),t.parts_.length>0&&(t.byteLength_-=1)}function EW(t){if(t.byteLength_>R$)throw new Error(t.errorPrefix_+"has a key path longer than "+R$+" bytes ("+t.byteLength_+").");if(t.parts_.length>T$)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+T$+") or object contains a cycle "+Ff(t))}function Ff(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5 extends yW{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new v5}getInitialEvent(e){return Ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=1e3,uie=60*5*1e3,P$=30*1e3,die=1.3,hie=3e4,fie="server_kill",O$=3;class Bu extends mW{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Bu.nextPersistentConnectionId_++,this.log_=gC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_b,this.maxReconnectDelay_=uie,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");v5.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&US.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Gr(i)),Ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Ix,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ne(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Bu.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ad(e,"w")){const r=Kw(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();eo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||tre(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=P$)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=ere(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Gr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):ZO("Unrecognized action received from server: "+Gr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_b,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=_b,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hie&&(this.reconnectDelay_=_b),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*die)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Bu.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Ne(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Ys("getToken() completed but was canceled"):(Ys("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new iie(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{eo(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(fie)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&eo(d),c())}}}interrupt(e){Ys("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ys("Resuming connection for reason: "+e),delete this.interruptReasons_[e],a$(this.interruptReasons_)&&(this.reconnectDelay_=_b,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>g5(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Bn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ys("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=O$&&(this.reconnectDelay_=P$,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ys("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=O$&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Kz.replace(/\./g,"-")]=1,$z()?e["framework.cordova"]=1:Vne()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=US.getInstance().currentlyOnline();return a$(this.interruptReasons_)&&e}}Bu.nextPersistentConnectionId_=0;Bu.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ft(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ft(Yw,e),s=new Ft(Yw,n);return this.compare(r,s)!==0}minPost(){return Ft.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _1;class _W extends Nx{static get __EMPTY_NODE(){return _1}static set __EMPTY_NODE(e){_1=e}compare(e,n){return z0(e.name,n.name)}isDefinedOn(e){throw F0("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ft.MIN}maxPost(){return new Ft(lg,_1)}makePost(e,n){return Ne(typeof e=="string","KeyIndex indexValue must always be a string."),new Ft(e,_1)}toString(){return".key"}}const Py=new _W;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ss{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ss.RED,this.left=s??Ji.EMPTY_NODE,this.right=i??Ji.EMPTY_NODE}copy(e,n,r,s,i){return new ss(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ji.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ji.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ss.RED=!0;ss.BLACK=!1;class pie{copy(e,n,r,s,i){return this}insert(e,n,r){return new ss(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ji{constructor(e,n=Ji.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ji(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ss.BLACK,null,null))}remove(e){return new Ji(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ss.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new C1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new C1(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new C1(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new C1(this.root_,null,this.comparator_,!0,e)}}Ji.EMPTY_NODE=new pie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gie(t,e){return z0(t.name,e.name)}function E5(t,e){return z0(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e2;function mie(t){e2=t}const CW=function(t){return typeof t=="number"?"number:"+Xz(t):"string:"+t},AW=function(t){if(t.isLeafNode()){const e=t.val();Ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ad(e,".sv"),"Priority must be a string or number.")}else Ne(t===e2||t.isEmpty(),"priority of unexpected type.");Ne(t===e2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k$;class rs{constructor(e,n=rs.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),AW(this.priorityNode_)}static set __childrenNodeConstructor(e){k$=e}static get __childrenNodeConstructor(){return k$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new rs(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:rs.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Wt(e)?this:Bt(e)===".priority"?this.priorityNode_:rs.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:rs.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Bt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ne(r!==".priority"||sf(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,rs.__childrenNodeConstructor.EMPTY_NODE.updateChild(Vn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+CW(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Xz(this.value_):e+=this.value_,this.lazyHash_=Qz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===rs.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof rs.__childrenNodeConstructor?-1:(Ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=rs.VALUE_TYPE_ORDER.indexOf(n),i=rs.VALUE_TYPE_ORDER.indexOf(r);return Ne(s>=0,"Unknown leaf type: "+n),Ne(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}rs.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SW,IW;function yie(t){SW=t}function wie(t){IW=t}class bie extends Nx{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?z0(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ft.MIN}maxPost(){return new Ft(lg,new rs("[PRIORITY-POST]",IW))}makePost(e,n){const r=SW(e);return new Ft(n,new rs("[PRIORITY-POST]",r))}toString(){return".priority"}}const vr=new bie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vie=Math.log(2);class Eie{constructor(e){const n=i=>parseInt(Math.log(i)/vie,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $S=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new ss(h,d.node,ss.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new ss(h,d.node,ss.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const y=d-p,m=d;d-=p;const w=s(y+1,m),v=t[y],A=n?n(v):v;f(new ss(A,v.node,g,null,w))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));g?h(y,ss.BLACK):(h(y,ss.BLACK),h(y,ss.RED))}return u},o=new Eie(t.length),a=i(o);return new Ji(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KT;const bm={};class ku{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ne(bm&&vr,"ChildrenNode.ts has not been loaded"),KT=KT||new ku({".priority":bm},{".priority":vr}),KT}get(e){const n=Kw(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ji?n:null}hasIndex(e){return ad(this.indexSet_,e.toString())}addIndex(e,n){Ne(e!==Py,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Ft.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=$S(r,e.getCompare()):a=bm;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new ku(u,l)}addToIndexes(e,n){const r=DS(this.indexes_,(s,i)=>{const o=Kw(this.indexSet_,i);if(Ne(o,"Missing index implementation for "+i),s===bm)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Ft.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),$S(a,o.getCompare())}else return bm;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Ft(e.name,a))),c.insert(e,e.node)}});return new ku(r,this.indexSet_)}removeFromIndexes(e,n){const r=DS(this.indexes_,s=>{if(s===bm)return s;{const i=n.get(e.name);return i?s.remove(new Ft(e.name,i)):s}});return new ku(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cb;class bt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&AW(this.priorityNode_),this.children_.isEmpty()&&Ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Cb||(Cb=new bt(new Ji(E5),null,ku.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Cb}updatePriority(e){return this.children_.isEmpty()?this:new bt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Cb:n}}getChild(e){const n=Bt(e);return n===null?this:this.getImmediateChild(n).getChild(Vn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ft(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Cb:this.priorityNode_;return new bt(s,o,i)}}updateChild(e,n){const r=Bt(e);if(r===null)return n;{Ne(Bt(e)!==".priority"||sf(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Vn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(vr,(o,a)=>{n[o]=a.val(e),r++,i&&bt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+CW(this.getPriority().val())+":"),this.forEachChild(vr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Qz(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Ft(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ft(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ft(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Ft.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Ft.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===mC?-1:0}withIndex(e){if(e===Py||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new bt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Py||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(vr),s=n.getIterator(vr);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Py?null:this.indexMap_.get(e.toString())}}bt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class _ie extends bt{constructor(){super(new Ji(E5),bt.EMPTY_NODE,ku.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return bt.EMPTY_NODE}isEmpty(){return!1}}const mC=new _ie;Object.defineProperties(Ft,{MIN:{value:new Ft(Yw,bt.EMPTY_NODE)},MAX:{value:new Ft(lg,mC)}});_W.__EMPTY_NODE=bt.EMPTY_NODE;rs.__childrenNodeConstructor=bt;mie(mC);wie(mC);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cie=!0;function as(t,e=null){if(t===null)return bt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new rs(n,as(e))}if(!(t instanceof Array)&&Cie){const n=[];let r=!1;if(ao(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=as(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Ft(o,c)))}}),n.length===0)return bt.EMPTY_NODE;const i=$S(n,gie,o=>o.name,E5);if(r){const o=$S(n,vr.getCompare());return new bt(i,as(e),new ku({".priority":o},{".priority":vr}))}else return new bt(i,as(e),ku.Default)}else{let n=bt.EMPTY_NODE;return ao(t,(r,s)=>{if(ad(t,r)&&r.substring(0,1)!=="."){const i=as(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(as(e))}}yie(as);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aie extends Nx{constructor(e){super(),this.indexPath_=e,Ne(!Wt(e)&&Bt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?z0(e.name,n.name):i}makePost(e,n){const r=as(e),s=bt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ft(n,s)}maxPost(){const e=bt.EMPTY_NODE.updateChild(this.indexPath_,mC);return new Ft(lg,e)}toString(){return bW(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sie extends Nx{compare(e,n){const r=e.node.compareTo(n.node);return r===0?z0(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ft.MIN}maxPost(){return Ft.MAX}makePost(e,n){const r=as(e);return new Ft(n,r)}toString(){return".value"}}const Iie=new Sie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xW(t){return{type:"value",snapshotNode:t}}function Qw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function pE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function gE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function xie(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(pE(n,a)):Ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Qw(n,r)):o.trackChildChange(gE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(vr,(s,i)=>{n.hasChild(s)||r.trackChildChange(pE(s,i))}),n.isLeafNode()||n.forEachChild(vr,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(gE(s,i,o))}else r.trackChildChange(Qw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?bt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){this.indexedFilter_=new _5(e.getIndex()),this.index_=e.getIndex(),this.startPost_=mE.getStartPost_(e),this.endPost_=mE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Ft(n,r))||(r=bt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=bt.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(bt.EMPTY_NODE);const i=this;return n.forEachChild(vr,(o,a)=>{i.matches(new Ft(o,a))||(s=s.updateImmediateChild(o,bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new mE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Ft(n,r))||(r=bt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=bt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=bt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(bt.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Ne(a.numChildren()===this.limit_,"");const c=new Ft(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(gE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(pE(n,d));const g=a.updateImmediateChild(n,bt.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(Qw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(pE(l.name,l.node)),i.trackChildChange(Qw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,bt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yw}hasEnd(){return this.endSet_}getIndexEndValue(){return Ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vr}copy(){const e=new C5;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Tie(t){return t.loadsAllData()?new _5(t.getIndex()):t.hasLimit()?new Nie(t):new mE(t)}function D$(t){const e={};if(t.isDefault())return e;let n;if(t.index_===vr?n="$priority":t.index_===Iie?n="$value":t.index_===Py?n="$key":(Ne(t.index_ instanceof Aie,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Gr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Gr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Gr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Gr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Gr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function L$(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==vr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS extends mW{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=gC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=BS.getListenId_(e,r),a={};this.listens_[o]=a;const c=D$(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),Kw(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=BS.getListenId_(e,n);delete this.listens_[r]}get(e){const n=D$(e._queryParams),r=e._path.toString(),s=new Ix;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+nre(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=lE(a.responseText)}catch{eo("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&eo("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rie{constructor(){this.rootNode_=bt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return{value:null,children:new Map}}function NW(t,e,n){if(Wt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Bt(e);t.children.has(r)||t.children.set(r,FS());const s=t.children.get(r);e=Vn(e),NW(s,e,n)}}function t2(t,e,n){t.value!==null?n(e,t.value):Pie(t,(r,s)=>{const i=new Bn(e.toString()+"/"+r);t2(s,i,n)})}function Pie(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ao(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$=10*1e3,kie=30*1e3,Die=5*60*1e3;class Lie{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Oie(e);const r=M$+(kie-M$)*Math.random();Rv(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ao(e,(s,i)=>{i>0&&ad(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Rv(this.reportStats_.bind(this),Math.floor(Math.random()*2*Die))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(yc||(yc={}));function TW(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function A5(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function S5(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=yc.ACK_USER_WRITE,this.source=TW()}operationForChild(e){if(Wt(this.path)){if(this.affectedTree.value!=null)return Ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Bn(e));return new jS(hn(),n,this.revert)}}else return Ne(Bt(this.path)===e,"operationForChild called for unrelated child."),new jS(Vn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n){this.source=e,this.path=n,this.type=yc.LISTEN_COMPLETE}operationForChild(e){return Wt(this.path)?new yE(this.source,hn()):new yE(this.source,Vn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=yc.OVERWRITE}operationForChild(e){return Wt(this.path)?new ug(this.source,hn(),this.snap.getImmediateChild(e)):new ug(this.source,Vn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=yc.MERGE}operationForChild(e){if(Wt(this.path)){const n=this.children.subtree(new Bn(e));return n.isEmpty()?null:n.value?new ug(this.source,hn(),n.value):new wE(this.source,hn(),n)}else return Ne(Bt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new wE(this.source,Vn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Wt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Bt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Uie(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(xie(o.childName,o.snapshotNode))}),Ab(t,s,"child_removed",e,r,n),Ab(t,s,"child_added",e,r,n),Ab(t,s,"child_moved",i,r,n),Ab(t,s,"child_changed",e,r,n),Ab(t,s,"value",e,r,n),s}function Ab(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Bie(t,a,c)),o.forEach(a=>{const c=$ie(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function $ie(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Bie(t,e,n){if(e.childName==null||n.childName==null)throw F0("Should only compare child_ events.");const r=new Ft(e.childName,e.snapshotNode),s=new Ft(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e){return{eventCache:t,serverCache:e}}function Pv(t,e,n,r){return Tx(new of(e,n,r),t.serverCache)}function RW(t,e,n,r){return Tx(t.eventCache,new of(e,n,r))}function zS(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function dg(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YT;const Fie=()=>(YT||(YT=new Ji(Sse)),YT);class Zn{constructor(e,n=Fie()){this.value=e,this.children=n}static fromObject(e){let n=new Zn(null);return ao(e,(r,s)=>{n=n.set(new Bn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:hn(),value:this.value};if(Wt(e))return null;{const r=Bt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Vn(e),n);return i!=null?{path:qr(new Bn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Wt(e))return this;{const n=Bt(e),r=this.children.get(n);return r!==null?r.subtree(Vn(e)):new Zn(null)}}set(e,n){if(Wt(e))return new Zn(n,this.children);{const r=Bt(e),i=(this.children.get(r)||new Zn(null)).set(Vn(e),n),o=this.children.insert(r,i);return new Zn(this.value,o)}}remove(e){if(Wt(e))return this.children.isEmpty()?new Zn(null):new Zn(null,this.children);{const n=Bt(e),r=this.children.get(n);if(r){const s=r.remove(Vn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Zn(null):new Zn(this.value,i)}else return this}}get(e){if(Wt(e))return this.value;{const n=Bt(e),r=this.children.get(n);return r?r.get(Vn(e)):null}}setTree(e,n){if(Wt(e))return n;{const r=Bt(e),i=(this.children.get(r)||new Zn(null)).setTree(Vn(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Zn(this.value,o)}}fold(e){return this.fold_(hn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(qr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,hn(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Wt(e))return null;{const i=Bt(e),o=this.children.get(i);return o?o.findOnPath_(Vn(e),qr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,hn(),n)}foreachOnPath_(e,n,r){if(Wt(e))return this;{this.value&&r(n,this.value);const s=Bt(e),i=this.children.get(s);return i?i.foreachOnPath_(Vn(e),qr(n,s),r):new Zn(null)}}foreach(e){this.foreach_(hn(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(qr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this.writeTree_=e}static empty(){return new vc(new Zn(null))}}function Ov(t,e,n){if(Wt(e))return new vc(new Zn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=pi(s,e);return i=i.updateChild(o,n),new vc(t.writeTree_.set(s,i))}else{const s=new Zn(n),i=t.writeTree_.setTree(e,s);return new vc(i)}}}function U$(t,e,n){let r=t;return ao(n,(s,i)=>{r=Ov(r,qr(e,s),i)}),r}function $$(t,e){if(Wt(e))return vc.empty();{const n=t.writeTree_.setTree(e,new Zn(null));return new vc(n)}}function n2(t,e){return Gg(t,e)!=null}function Gg(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(pi(n.path,e)):null}function B$(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(vr,(r,s)=>{e.push(new Ft(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Ft(r,s.value))}),e}function Mh(t,e){if(Wt(e))return t;{const n=Gg(t,e);return n!=null?new vc(new Zn(n)):new vc(t.writeTree_.subtree(e))}}function r2(t){return t.writeTree_.isEmpty()}function Jw(t,e){return PW(hn(),t.writeTree_,e)}function PW(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Ne(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=PW(qr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(qr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t,e){return LW(e,t)}function jie(t,e,n,r,s){Ne(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Ov(t.visibleWrites,e,n)),t.lastWriteId=r}function zie(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Wie(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ne(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Hie(a,r.path)?s=!1:mc(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Gie(t),!0;if(r.snap)t.visibleWrites=$$(t.visibleWrites,r.path);else{const a=r.children;ao(a,c=>{t.visibleWrites=$$(t.visibleWrites,qr(r.path,c))})}return!0}else return!1}function Hie(t,e){if(t.snap)return mc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&mc(qr(t.path,n),e))return!0;return!1}function Gie(t){t.visibleWrites=OW(t.allWrites,qie,hn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function qie(t){return t.visible}function OW(t,e,n){let r=vc.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)mc(n,o)?(a=pi(n,o),r=Ov(r,a,i.snap)):mc(o,n)&&(a=pi(o,n),r=Ov(r,hn(),i.snap.getChild(a)));else if(i.children){if(mc(n,o))a=pi(n,o),r=U$(r,a,i.children);else if(mc(o,n))if(a=pi(o,n),Wt(a))r=U$(r,hn(),i.children);else{const c=Kw(i.children,Bt(a));if(c){const l=c.getChild(Vn(a));r=Ov(r,hn(),l)}}}else throw F0("WriteRecord should have .snap or .children")}}return r}function kW(t,e,n,r,s){if(!r&&!s){const i=Gg(t.visibleWrites,e);if(i!=null)return i;{const o=Mh(t.visibleWrites,e);if(r2(o))return n;if(n==null&&!n2(o,hn()))return null;{const a=n||bt.EMPTY_NODE;return Jw(o,a)}}}else{const i=Mh(t.visibleWrites,e);if(!s&&r2(i))return n;if(!s&&n==null&&!n2(i,hn()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(mc(l.path,e)||mc(e,l.path))},a=OW(t.allWrites,o,e),c=n||bt.EMPTY_NODE;return Jw(a,c)}}}function Vie(t,e,n){let r=bt.EMPTY_NODE;const s=Gg(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(vr,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Mh(t.visibleWrites,e);return n.forEachChild(vr,(o,a)=>{const c=Jw(Mh(i,new Bn(o)),a);r=r.updateImmediateChild(o,c)}),B$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Mh(t.visibleWrites,e);return B$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Kie(t,e,n,r,s){Ne(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=qr(e,n);if(n2(t.visibleWrites,i))return null;{const o=Mh(t.visibleWrites,i);return r2(o)?s.getChild(n):Jw(o,s.getChild(n))}}function Yie(t,e,n,r){const s=qr(e,n),i=Gg(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Mh(t.visibleWrites,s);return Jw(o,r.getNode().getImmediateChild(n))}else return null}function Qie(t,e){return Gg(t.visibleWrites,e)}function Jie(t,e,n,r,s,i,o){let a;const c=Mh(t.visibleWrites,e),l=Gg(c,hn());if(l!=null)a=l;else if(n!=null)a=Jw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Zie(){return{visibleWrites:vc.empty(),allWrites:[],lastWriteId:-1}}function WS(t,e,n,r){return kW(t.writeTree,t.treePath,e,n,r)}function I5(t,e){return Vie(t.writeTree,t.treePath,e)}function F$(t,e,n,r){return Kie(t.writeTree,t.treePath,e,n,r)}function HS(t,e){return Qie(t.writeTree,qr(t.treePath,e))}function Xie(t,e,n,r,s,i){return Jie(t.writeTree,t.treePath,e,n,r,s,i)}function x5(t,e,n){return Yie(t.writeTree,t.treePath,e,n)}function DW(t,e){return LW(qr(t.treePath,e),t.writeTree)}function LW(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eoe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ne(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,gE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,pE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Qw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,gE(r,e.snapshotNode,s.oldSnap));else throw F0("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class toe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const MW=new toe;class N5{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new of(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return x5(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:dg(this.viewCache_),i=Xie(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noe(t){return{filter:t}}function roe(t,e){Ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function soe(t,e,n,r,s){const i=new eoe;let o,a;if(n.type===yc.OVERWRITE){const l=n;l.source.fromUser?o=s2(t,e,l.path,l.snap,r,s,i):(Ne(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Wt(l.path),o=GS(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===yc.MERGE){const l=n;l.source.fromUser?o=ooe(t,e,l.path,l.children,r,s,i):(Ne(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=i2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===yc.ACK_USER_WRITE){const l=n;l.revert?o=loe(t,e,l.path,r,s,i):o=aoe(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===yc.LISTEN_COMPLETE)o=coe(t,e,n.path,r,i);else throw F0("Unknown operation type: "+n.type);const c=i.getChanges();return ioe(e,o,c),{viewCache:o,changes:c}}function ioe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=zS(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(xW(zS(e)))}}function UW(t,e,n,r,s,i){const o=e.eventCache;if(HS(r,n)!=null)return e;{let a,c;if(Wt(n))if(Ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=dg(e),u=l instanceof bt?l:bt.EMPTY_NODE,d=I5(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=WS(r,dg(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Bt(n);if(l===".priority"){Ne(sf(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=F$(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Vn(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=F$(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=x5(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return Pv(e,a,o.isFullyInitialized()||Wt(n),t.filter.filtersNodes())}}function GS(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Wt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Bt(n);if(!c.isCompleteForPath(n)&&sf(n)>1)return e;const p=Vn(n),y=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),f,y,p,MW,null)}const d=RW(e,l,c.isFullyInitialized()||Wt(n),u.filtersNodes()),h=new N5(s,d,i);return UW(t,d,n,s,h,a)}function s2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new N5(s,e,i);if(Wt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Pv(e,l,!0,t.filter.filtersNodes());else{const d=Bt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Pv(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=Vn(n),f=a.getNode().getImmediateChild(d);let p;if(Wt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?wW(h)===".priority"&&g.getChild(vW(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=bt.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=Pv(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function j$(t,e){return t.eventCache.isCompleteForChild(e)}function ooe(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=qr(n,c);j$(e,Bt(u))&&(a=s2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=qr(n,c);j$(e,Bt(u))||(a=s2(t,a,u,l,s,i,o))}),a}function z$(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function i2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Wt(n)?l=r:l=new Zn(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=z$(t,f,h);c=GS(t,c,new Bn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=z$(t,p,h);c=GS(t,c,new Bn(d),g,s,i,o,a)}}),c}function aoe(t,e,n,r,s,i,o){if(HS(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Wt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return GS(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Wt(n)){let l=new Zn(null);return c.getNode().forEachChild(Py,(u,d)=>{l=l.set(new Bn(u),d)}),i2(t,e,n,l,s,i,a,o)}else return e}else{let l=new Zn(null);return r.foreach((u,d)=>{const h=qr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),i2(t,e,n,l,s,i,a,o)}}function coe(t,e,n,r,s){const i=e.serverCache,o=RW(e,i.getNode(),i.isFullyInitialized()||Wt(n),i.isFiltered());return UW(t,o,n,r,MW,s)}function loe(t,e,n,r,s,i){let o;if(HS(r,n)!=null)return e;{const a=new N5(r,e,s),c=e.eventCache.getNode();let l;if(Wt(n)||Bt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=WS(r,dg(e));else{const d=e.serverCache.getNode();Ne(d instanceof bt,"serverChildren would be complete if leaf node"),u=I5(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Bt(n);let d=x5(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Vn(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,bt.EMPTY_NODE,Vn(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=WS(r,dg(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||HS(r,hn())!=null,Pv(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uoe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new _5(r.getIndex()),i=Tie(r);this.processor_=noe(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(bt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(bt.EMPTY_NODE,a.getNode(),null),u=new of(c,o.isFullyInitialized(),s.filtersNodes()),d=new of(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Tx(d,u),this.eventGenerator_=new Mie(this.query_)}get query(){return this.query_}}function doe(t){return t.viewCache_.serverCache.getNode()}function hoe(t){return zS(t.viewCache_)}function foe(t,e){const n=dg(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Wt(e)&&!n.getImmediateChild(Bt(e)).isEmpty())?n.getChild(e):null}function W$(t){return t.eventRegistrations_.length===0}function poe(t,e){t.eventRegistrations_.push(e)}function H$(t,e,n){const r=[];if(n){Ne(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function G$(t,e,n,r){e.type===yc.MERGE&&e.source.queryId!==null&&(Ne(dg(t.viewCache_),"We should always have a full cache before handling merges"),Ne(zS(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=soe(t.processor_,s,e,n,r);return roe(t.processor_,i.viewCache),Ne(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,$W(t,i.changes,i.viewCache.eventCache.getNode(),null)}function goe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(vr,(i,o)=>{r.push(Qw(i,o))}),n.isFullyInitialized()&&r.push(xW(n.getNode())),$W(t,r,n.getNode(),e)}function $W(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Uie(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qS;class BW{constructor(){this.views=new Map}}function moe(t){Ne(!qS,"__referenceConstructor has already been defined"),qS=t}function yoe(){return Ne(qS,"Reference.ts has not been loaded"),qS}function woe(t){return t.views.size===0}function T5(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Ne(i!=null,"SyncTree gave us an op for an invalid query."),G$(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(G$(o,e,n,r));return i}}function FW(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=WS(n,s?r:null),c=!1;a?c=!0:r instanceof bt?(a=I5(n,r),c=!1):(a=bt.EMPTY_NODE,c=!1);const l=Tx(new of(a,c,!1),new of(r,s,!1));return new uoe(e,l)}return o}function boe(t,e,n,r,s,i){const o=FW(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),poe(o,n),goe(o,n)}function voe(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=af(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(H$(l,n,r)),W$(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(H$(c,n,r)),W$(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!af(t)&&i.push(new(yoe())(e._repo,e._path)),{removed:i,events:o}}function jW(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Uh(t,e){let n=null;for(const r of t.views.values())n=n||foe(r,e);return n}function zW(t,e){if(e._queryParams.loadsAllData())return Px(t);{const r=e._queryIdentifier;return t.views.get(r)}}function WW(t,e){return zW(t,e)!=null}function af(t){return Px(t)!=null}function Px(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VS;function Eoe(t){Ne(!VS,"__referenceConstructor has already been defined"),VS=t}function _oe(){return Ne(VS,"Reference.ts has not been loaded"),VS}let Coe=1;class q${constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zn(null),this.pendingWriteTree_=Zie(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function HW(t,e,n,r,s){return jie(t.pendingWriteTree_,e,n,r,s),s?wC(t,new ug(TW(),e,n)):[]}function ap(t,e,n=!1){const r=zie(t.pendingWriteTree_,e);if(Wie(t.pendingWriteTree_,e)){let i=new Zn(null);return r.snap!=null?i=i.set(hn(),!0):ao(r.children,o=>{i=i.set(new Bn(o),!0)}),wC(t,new jS(r.path,i,n))}else return[]}function yC(t,e,n){return wC(t,new ug(A5(),e,n))}function Aoe(t,e,n){const r=Zn.fromObject(n);return wC(t,new wE(A5(),e,r))}function Soe(t,e){return wC(t,new yE(A5(),e))}function Ioe(t,e,n){const r=P5(t,n);if(r){const s=O5(r),i=s.path,o=s.queryId,a=pi(i,e),c=new yE(S5(o),a);return k5(t,i,c)}else return[]}function KS(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||WW(o,e))){const c=voe(o,e,n,r);woe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>af(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=Toe(h);for(let p=0;p<f.length;++p){const g=f[p],y=g.query,m=KW(t,g);t.listenProvider_.startListening(kv(y),bE(t,y),m.hashFn,m.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(kv(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(Ox(h));t.listenProvider_.stopListening(kv(h),f)}))}Roe(t,l)}return a}function GW(t,e,n,r){const s=P5(t,r);if(s!=null){const i=O5(s),o=i.path,a=i.queryId,c=pi(o,e),l=new ug(S5(a),c,n);return k5(t,o,l)}else return[]}function xoe(t,e,n,r){const s=P5(t,r);if(s){const i=O5(s),o=i.path,a=i.queryId,c=pi(o,e),l=Zn.fromObject(n),u=new wE(S5(a),c,l);return k5(t,o,u)}else return[]}function o2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=pi(h,s);i=i||Uh(f,p),o=o||af(f)});let a=t.syncPointTree_.get(s);a?(o=o||af(a),i=i||Uh(a,hn())):(a=new BW,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=bt.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Uh(p,hn());g&&(i=i.updateImmediateChild(f,g))}));const l=WW(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=Ox(e);Ne(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Poe();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=Rx(t.pendingWriteTree_,s);let d=boe(a,e,n,u,i,c);if(!l&&!o&&!r){const h=zW(a,e);d=d.concat(Ooe(t,e,h))}return d}function R5(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=pi(o,e),l=Uh(a,c);if(l)return l});return kW(s,e,i,n,!0)}function Noe(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=pi(l,n);r=r||Uh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Uh(s,hn()):(s=new BW,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new of(r,!0,!1):null,a=Rx(t.pendingWriteTree_,e._path),c=FW(s,e,a,i?o.getNode():bt.EMPTY_NODE,i);return hoe(c)}function wC(t,e){return qW(e,t.syncPointTree_,null,Rx(t.pendingWriteTree_,hn()))}function qW(t,e,n,r){if(Wt(t.path))return VW(t,e,n,r);{const s=e.get(hn());n==null&&s!=null&&(n=Uh(s,hn()));let i=[];const o=Bt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=DW(r,o);i=i.concat(qW(a,c,l,u))}return s&&(i=i.concat(T5(s,t,r,n))),i}}function VW(t,e,n,r){const s=e.get(hn());n==null&&s!=null&&(n=Uh(s,hn()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=DW(r,o),u=t.operationForChild(o);u&&(i=i.concat(VW(u,a,c,l)))}),s&&(i=i.concat(T5(s,t,r,n))),i}function KW(t,e){const n=e.query,r=bE(t,n);return{hashFn:()=>(doe(e)||bt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Ioe(t,n._path,r):Soe(t,n._path);{const i=Nse(s,n);return KS(t,n,null,i)}}}}function bE(t,e){const n=Ox(e);return t.queryToTagMap.get(n)}function Ox(t){return t._path.toString()+"$"+t._queryIdentifier}function P5(t,e){return t.tagToQueryMap.get(e)}function O5(t){const e=t.indexOf("$");return Ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Bn(t.substr(0,e))}}function k5(t,e,n){const r=t.syncPointTree_.get(e);Ne(r,"Missing sync point for query tag that we're tracking");const s=Rx(t.pendingWriteTree_,e);return T5(r,n,s,null)}function Toe(t){return t.fold((e,n,r)=>{if(n&&af(n))return[Px(n)];{let s=[];return n&&(s=jW(n)),ao(r,(i,o)=>{s=s.concat(o)}),s}})}function kv(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(_oe())(t._repo,t._path):t}function Roe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Ox(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Poe(){return Coe++}function Ooe(t,e,n){const r=e._path,s=bE(t,e),i=KW(t,n),o=t.listenProvider_.startListening(kv(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Ne(!af(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Wt(l)&&u&&af(u))return[Px(u).query];{let h=[];return u&&(h=h.concat(jW(u).map(f=>f.query))),ao(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(kv(u),bE(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new D5(n)}node(){return this.node_}}class L5{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=qr(this.path_,e);return new L5(this.syncTree_,n)}node(){return R5(this.syncTree_,this.path_)}}const koe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},V$=function(t,e,n){if(!t||typeof t!="object")return t;if(Ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Doe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Loe(t[".sv"],e);Ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Doe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ne(!1,"Unexpected server value: "+t)}},Loe=function(t,e,n){t.hasOwnProperty("increment")||Ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ne(!1,"Unexpected increment value: "+r);const s=e.node();if(Ne(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},Moe=function(t,e,n,r){return M5(e,new L5(n,t),r)},YW=function(t,e,n){return M5(t,new D5(e),n)};function M5(t,e,n){const r=t.getPriority().val(),s=V$(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=V$(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new rs(a,as(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new rs(s))),o.forEachChild(vr,(a,c)=>{const l=M5(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function $5(t,e){let n=e instanceof Bn?e:new Bn(e),r=t,s=Bt(n);for(;s!==null;){const i=Kw(r.node.children,s)||{children:{},childCount:0};r=new U5(s,r,i),n=Vn(n),s=Bt(n)}return r}function H0(t){return t.node.value}function QW(t,e){t.node.value=e,a2(t)}function JW(t){return t.node.childCount>0}function Uoe(t){return H0(t)===void 0&&!JW(t)}function kx(t,e){ao(t.node.children,(n,r)=>{e(new U5(n,t,r))})}function ZW(t,e,n,r){n&&e(t),kx(t,s=>{ZW(s,e,!0)})}function $oe(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function bC(t){return new Bn(t.parent===null?t.name:bC(t.parent)+"/"+t.name)}function a2(t){t.parent!==null&&Boe(t.parent,t.name,t)}function Boe(t,e,n){const r=Uoe(n),s=ad(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,a2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,a2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Foe=/[\[\].#$\/\u0000-\u001F\u007F]/,joe=/[\[\].#$\u0000-\u001F\u007F]/,QT=10*1024*1024,XW=function(t){return typeof t=="string"&&t.length!==0&&!Foe.test(t)},eH=function(t){return typeof t=="string"&&t.length!==0&&!joe.test(t)},zoe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),eH(t)},Woe=function(t,e,n,r){B5(f5(t,"value"),e,n)},B5=function(t,e,n){const r=n instanceof Bn?new aie(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ff(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ff(r)+" with contents = "+e.toString());if(Jz(e))throw new Error(t+"contains "+e.toString()+" "+Ff(r));if(typeof e=="string"&&e.length>QT/3&&xx(e)>QT)throw new Error(t+"contains a string greater than "+QT+" utf8 bytes "+Ff(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(ao(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!XW(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ff(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cie(r,o),B5(t,a,r),lie(r)}),s&&i)throw new Error(t+' contains ".value" child '+Ff(r)+" in addition to actual children.")}},tH=function(t,e,n,r){if(!eH(n))throw new Error(f5(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Hoe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),tH(t,e,n)},nH=function(t,e){if(Bt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Goe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!XW(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!zoe(n))throw new Error(f5(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qoe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function F5(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!b5(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function rH(t,e,n){F5(t,n),sH(t,r=>b5(r,e))}function Pl(t,e,n){F5(t,n),sH(t,r=>mc(r,e)||mc(e,r))}function sH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Voe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Voe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Tv&&Ys("event: "+n.toString()),W0(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Koe="repo_interrupt",Yoe=25;class Qoe{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qoe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=FS(),this.transactionQueueTree_=new U5,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Joe(t,e,n){if(t.stats_=y5(t.repoInfo_),t.forceRestClient_||Ose())t.server_=new BS(t.repoInfo_,(r,s,i,o)=>{K$(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Y$(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Gr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Bu(t.repoInfo_,e,(r,s,i,o)=>{K$(t,r,s,i,o)},r=>{Y$(t,r)},r=>{Xoe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Use(t.repoInfo_,()=>new Lie(t.stats_,t.server_)),t.infoData_=new Rie,t.infoSyncTree_=new q$({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=yC(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),z5(t,"connected",!1),t.serverSyncTree_=new q$({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Pl(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Zoe(t){const n=t.infoData_.getNode(new Bn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function j5(t){return koe({timestamp:Zoe(t)})}function K$(t,e,n,r,s){t.dataUpdateCount++;const i=new Bn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=DS(n,l=>as(l));o=xoe(t.serverSyncTree_,i,c,s)}else{const c=as(n);o=GW(t.serverSyncTree_,i,c,s)}else if(r){const c=DS(n,l=>as(l));o=Aoe(t.serverSyncTree_,i,c)}else{const c=as(n);o=yC(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=Lx(t,i)),Pl(t.eventQueue_,a,o)}function Y$(t,e){z5(t,"connected",e),e===!1&&nae(t)}function Xoe(t,e){ao(e,(n,r)=>{z5(t,n,r)})}function z5(t,e,n){const r=new Bn("/.info/"+e),s=as(n);t.infoData_.updateSnapshot(r,s);const i=yC(t.infoSyncTree_,r,s);Pl(t.eventQueue_,r,i)}function iH(t){return t.nextWriteId_++}function eae(t,e,n){const r=Noe(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=as(s).withIndex(e._queryParams.getIndex());o2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=yC(t.serverSyncTree_,e._path,i);else{const a=bE(t.serverSyncTree_,e);o=GW(t.serverSyncTree_,e._path,i,a)}return Pl(t.eventQueue_,e._path,o),KS(t.serverSyncTree_,e,n,null,!0),i},s=>(Dx(t,"get for query "+Gr(e)+" failed: "+s),Promise.reject(new Error(s))))}function tae(t,e,n,r,s){Dx(t,"set",{path:e.toString(),value:n,priority:r});const i=j5(t),o=as(n,r),a=R5(t.serverSyncTree_,e),c=YW(o,a,i),l=iH(t),u=HW(t.serverSyncTree_,e,c,l,!0);F5(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||eo("set at "+e+" failed: "+h);const g=ap(t.serverSyncTree_,l,!p);Pl(t.eventQueue_,e,g),oae(t,s,h,f)});const d=uH(t,e);Lx(t,d),Pl(t.eventQueue_,d,[])}function nae(t){Dx(t,"onDisconnectEvents");const e=j5(t),n=FS();t2(t.onDisconnect_,hn(),(s,i)=>{const o=Moe(s,i,t.serverSyncTree_,e);NW(n,s,o)});let r=[];t2(n,hn(),(s,i)=>{r=r.concat(yC(t.serverSyncTree_,s,i));const o=uH(t,s);Lx(t,o)}),t.onDisconnect_=FS(),Pl(t.eventQueue_,hn(),r)}function rae(t,e,n){let r;Bt(e._path)===".info"?r=o2(t.infoSyncTree_,e,n):r=o2(t.serverSyncTree_,e,n),rH(t.eventQueue_,e._path,r)}function sae(t,e,n){let r;Bt(e._path)===".info"?r=KS(t.infoSyncTree_,e,n):r=KS(t.serverSyncTree_,e,n),rH(t.eventQueue_,e._path,r)}function iae(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Koe)}function Dx(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ys(n,...e)}function oae(t,e,n,r){e&&W0(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function oH(t,e,n){return R5(t.serverSyncTree_,e,n)||bt.EMPTY_NODE}function W5(t,e=t.transactionQueueTree_){if(e||Mx(t,e),H0(e)){const n=cH(t,e);Ne(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&aae(t,bC(e),n)}else JW(e)&&kx(e,n=>{W5(t,n)})}function aae(t,e,n){const r=n.map(l=>l.currentWriteId),s=oH(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Ne(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=pi(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Dx(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(ap(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Mx(t,$5(t.transactionQueueTree_,e)),W5(t,t.transactionQueueTree_),Pl(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)W0(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{eo("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Lx(t,e)}},o)}function Lx(t,e){const n=aH(t,e),r=bC(n),s=cH(t,n);return cae(t,s,r),r}function cae(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=pi(n,c.path);let u=!1,d;if(Ne(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(ap(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Yoe)u=!0,d="maxretry",s=s.concat(ap(t.serverSyncTree_,c.currentWriteId,!0));else{const h=oH(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){B5("transaction failed: Data returned ",f,c.path);let p=as(f);typeof f=="object"&&f!=null&&ad(f,".priority")||(p=p.updatePriority(h.getPriority()));const y=c.currentWriteId,m=j5(t),w=YW(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=w,c.currentWriteId=iH(t),o.splice(o.indexOf(y),1),s=s.concat(HW(t.serverSyncTree_,c.path,w,c.currentWriteId,c.applyLocally)),s=s.concat(ap(t.serverSyncTree_,y,!0))}else u=!0,d="nodata",s=s.concat(ap(t.serverSyncTree_,c.currentWriteId,!0))}Pl(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Mx(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)W0(r[a]);W5(t,t.transactionQueueTree_)}function aH(t,e){let n,r=t.transactionQueueTree_;for(n=Bt(e);n!==null&&H0(r)===void 0;)r=$5(r,n),e=Vn(e),n=Bt(e);return r}function cH(t,e){const n=[];return lH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function lH(t,e,n){const r=H0(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);kx(e,s=>{lH(t,s,n)})}function Mx(t,e){const n=H0(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,QW(e,n.length>0?n:void 0)}kx(e,r=>{Mx(t,r)})}function uH(t,e){const n=bC(aH(t,e)),r=$5(t.transactionQueueTree_,e);return $oe(r,s=>{JT(t,s)}),JT(t,r),ZW(r,s=>{JT(t,s)}),n}function JT(t,e){const n=H0(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ne(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ne(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(ap(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?QW(e,void 0):n.length=i+1,Pl(t.eventQueue_,bC(e),s);for(let o=0;o<r.length;o++)W0(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lae(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function uae(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):eo(`Invalid query segment '${n}' in query '${t}'`)}return e}const Q$=function(t,e){const n=dae(t),r=n.namespace;n.domain==="firebase.com"&&Qu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Qu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Cse();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new lW(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Bn(n.pathString)}},dae=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=lae(t.substring(u,d)));const h=uae(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Gr(this.snapshot.exportVal())}}class fae{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Wt(this._path)?null:wW(this._path)}get ref(){return new cd(this._repo,this._path)}get _queryIdentifier(){const e=L$(this._queryParams),n=g5(e);return n==="{}"?"default":n}get _queryObject(){return L$(this._queryParams)}isEqual(e){if(e=j0(e),!(e instanceof H5))return!1;const n=this._repo===e._repo,r=b5(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+oie(this._path)}}class cd extends H5{constructor(e,n){super(e,n,new C5,!1)}get parent(){const e=vW(this._path);return e===null?null:new cd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class vE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Bn(e),r=c2(this.ref,e);return new vE(this._node.getChild(n),r,vr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new vE(s,c2(this.ref,r),vr)))}hasChild(e){const n=new Bn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function _o(t,e){return t=j0(t),t._checkNotDeleted("ref"),e!==void 0?c2(t._root,e):t._root}function c2(t,e){return t=j0(t),Bt(t._path)===null?Hoe("child","path",e):tH("child","path",e),new cd(t._repo,qr(t._path,e))}function hH(t){return nH("remove",t._path),Dv(t,null)}function Dv(t,e){t=j0(t),nH("set",t._path),Woe("set",e,t._path);const n=new Ix;return tae(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Yf(t){t=j0(t);const e=new dH(()=>{}),n=new Ux(e);return eae(t._repo,t,n).then(r=>new vE(r,new cd(t._repo,t._path),t._queryParams.getIndex()))}class Ux{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new hae("value",this,new vE(e.snapshotNode,new cd(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new fae(this,e,n):null}matches(e){return e instanceof Ux?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function pae(t,e,n,r,s){const i=new dH(n,void 0),o=new Ux(i);return rae(t._repo,t,o),()=>sae(t._repo,t,o)}function J$(t,e,n,r){return pae(t,"value",e)}moe(cd);Eoe(cd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gae="FIREBASE_DATABASE_EMULATOR_HOST",l2={};let mae=!1;function yae(t,e,n,r){t.repoInfo_=new lW(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function wae(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Qu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ys("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Q$(i,s),a=o.repoInfo,c;typeof process<"u"&&y$&&(c=y$[gae]),c?(i=`http://${c}?ns=${a.namespace}`,o=Q$(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Dse(t.name,t.options,e);Goe("Invalid Firebase Database URL",o),Wt(o.path)||Qu("Database URL must point to the root of a Firebase Database (not including a child path).");const u=vae(a,t,l,new kse(t.name,n));return new Eae(u,t)}function bae(t,e){const n=l2[e];(!n||n[t.key]!==t)&&Qu(`Database ${e}(${t.repoInfo_}) has already been deleted.`),iae(t),delete n[t.key]}function vae(t,e,n,r){let s=l2[e.name];s||(s={},l2[e.name]=s);let i=s[t.toURLString()];return i&&Qu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Qoe(t,mae,n,r),s[t.toURLString()]=i,i}class Eae{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Joe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cd(this._repo,hn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(bae(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qu("Cannot call "+e+" on a deleted database.")}}function _ae(t=Gz(),e){const n=tse(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Hne("database");r&&Cae(n,...r)}return n}function Cae(t,e,n,r={}){t=j0(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Qu("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Qu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new jA(jA.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Gne(r.mockUserToken,t.app.options.projectId);i=new jA(o)}yae(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aae(t){yse(sse),LS(new uE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return wae(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Ty(w$,b$,t),Ty(w$,b$,"esm2017")}Bu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Bu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Aae();const Sae={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},Iae=ise().length?Gz():Hz(Sae),YS=_ae(Iae);var u2={},fH={exports:{}},zo={},pH={exports:{}},gH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,L){var j=P.length;P.push(L);e:for(;0<j;){var q=j-1>>>1,ne=P[q];if(0<s(ne,L))P[q]=L,P[j]=ne,j=q;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var L=P[0],j=P.pop();if(j!==L){P[0]=j;e:for(var q=0,ne=P.length,le=ne>>>1;q<le;){var oe=2*(q+1)-1,se=P[oe],ye=oe+1,Z=P[ye];if(0>s(se,j))ye<ne&&0>s(Z,se)?(P[q]=Z,P[ye]=j,q=ye):(P[q]=se,P[oe]=j,q=oe);else if(ye<ne&&0>s(Z,j))P[q]=Z,P[ye]=j,q=ye;else break e}}return L}function s(P,L){var j=P.sortIndex-L.sortIndex;return j!==0?j:P.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var L=n(l);L!==null;){if(L.callback===null)r(l);else if(L.startTime<=P)r(l),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(l)}}function A(P){if(g=!1,v(P),!p)if(n(c)!==null)p=!0,N(C);else{var L=n(l);L!==null&&M(A,L.startTime-P)}}function C(P,L){p=!1,g&&(g=!1,m(T),T=-1),f=!0;var j=h;try{for(v(L),d=n(c);d!==null&&(!(d.expirationTime>L)||P&&!O());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var ne=q(d.expirationTime<=L);L=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(c)&&r(c),v(L)}else r(c);d=n(c)}if(d!==null)var le=!0;else{var oe=n(l);oe!==null&&M(A,oe.startTime-L),le=!1}return le}finally{d=null,h=j,f=!1}}var S=!1,x=null,T=-1,I=5,k=-1;function O(){return!(t.unstable_now()-k<I)}function B(){if(x!==null){var P=t.unstable_now();k=P;var L=!0;try{L=x(!0,P)}finally{L?G():(S=!1,x=null)}}else S=!1}var G;if(typeof w=="function")G=function(){w(B)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,R=W.port2;W.port1.onmessage=B,G=function(){R.postMessage(null)}}else G=function(){y(B,0)};function N(P){x=P,S||(S=!0,G())}function M(P,L){T=y(function(){P(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var j=h;h=L;try{return P()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,L){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var j=h;h=P;try{return L()}finally{h=j}},t.unstable_scheduleCallback=function(P,L,j){var q=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?q+j:q):j=q,P){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=j+ne,P={id:u++,callback:L,priorityLevel:P,startTime:j,expirationTime:ne,sortIndex:-1},j>q?(P.sortIndex=j,e(l,P),n(c)===null&&P===n(l)&&(g?(m(T),T=-1):g=!0,M(A,j-q))):(P.sortIndex=ne,e(c,P),p||f||(p=!0,N(C))),P},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(P){var L=h;return function(){var j=h;h=L;try{return P.apply(this,arguments)}finally{h=j}}}})(gH);pH.exports=gH;var xae=pH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nae=D,Bo=xae;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mH=new Set,EE={};function qg(t,e){Zw(t,e),Zw(t+"Capture",e)}function Zw(t,e){for(EE[t]=e,t=0;t<e.length;t++)mH.add(e[t])}var Ju=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d2=Object.prototype.hasOwnProperty,Tae=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z$={},X$={};function Rae(t){return d2.call(X$,t)?!0:d2.call(Z$,t)?!1:Tae.test(t)?X$[t]=!0:(Z$[t]=!0,!1)}function Pae(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Oae(t,e,n,r){if(e===null||typeof e>"u"||Pae(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ai(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ds={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ds[t]=new Ai(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ds[e]=new Ai(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ds[t]=new Ai(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ds[t]=new Ai(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ds[t]=new Ai(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ds[t]=new Ai(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ds[t]=new Ai(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ds[t]=new Ai(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ds[t]=new Ai(t,5,!1,t.toLowerCase(),null,!1,!1)});var G5=/[\-:]([a-z])/g;function q5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(G5,q5);Ds[e]=new Ai(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(G5,q5);Ds[e]=new Ai(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(G5,q5);Ds[e]=new Ai(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ds[t]=new Ai(t,1,!1,t.toLowerCase(),null,!1,!1)});Ds.xlinkHref=new Ai("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ds[t]=new Ai(t,1,!1,t.toLowerCase(),null,!0,!0)});function V5(t,e,n,r){var s=Ds.hasOwnProperty(e)?Ds[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Oae(e,n,s,r)&&(n=null),r||s===null?Rae(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ld=Nae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A1=Symbol.for("react.element"),ay=Symbol.for("react.portal"),cy=Symbol.for("react.fragment"),K5=Symbol.for("react.strict_mode"),h2=Symbol.for("react.profiler"),yH=Symbol.for("react.provider"),wH=Symbol.for("react.context"),Y5=Symbol.for("react.forward_ref"),f2=Symbol.for("react.suspense"),p2=Symbol.for("react.suspense_list"),Q5=Symbol.for("react.memo"),jd=Symbol.for("react.lazy"),bH=Symbol.for("react.offscreen"),eB=Symbol.iterator;function Sb(t){return t===null||typeof t!="object"?null:(t=eB&&t[eB]||t["@@iterator"],typeof t=="function"?t:null)}var fr=Object.assign,ZT;function ov(t){if(ZT===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ZT=e&&e[1]||""}return`
`+ZT+t}var XT=!1;function eR(t,e){if(!t||XT)return"";XT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{XT=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ov(t):""}function kae(t){switch(t.tag){case 5:return ov(t.type);case 16:return ov("Lazy");case 13:return ov("Suspense");case 19:return ov("SuspenseList");case 0:case 2:case 15:return t=eR(t.type,!1),t;case 11:return t=eR(t.type.render,!1),t;case 1:return t=eR(t.type,!0),t;default:return""}}function g2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cy:return"Fragment";case ay:return"Portal";case h2:return"Profiler";case K5:return"StrictMode";case f2:return"Suspense";case p2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wH:return(t.displayName||"Context")+".Consumer";case yH:return(t._context.displayName||"Context")+".Provider";case Y5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q5:return e=t.displayName||null,e!==null?e:g2(t.type)||"Memo";case jd:e=t._payload,t=t._init;try{return g2(t(e))}catch{}}return null}function Dae(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return g2(e);case 8:return e===K5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Lae(t){var e=vH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function S1(t){t._valueTracker||(t._valueTracker=Lae(t))}function EH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function QS(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function m2(t,e){var n=e.checked;return fr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _H(t,e){e=e.checked,e!=null&&V5(t,"checked",e,!1)}function y2(t,e){_H(t,e);var n=cf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?w2(t,e.type,n):e.hasOwnProperty("defaultValue")&&w2(t,e.type,cf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function w2(t,e,n){(e!=="number"||QS(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var av=Array.isArray;function Oy(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cf(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function b2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return fr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(av(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cf(n)}}function CH(t,e){var n=cf(e.value),r=cf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function AH(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function v2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?AH(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var I1,SH=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(I1=I1||document.createElement("div"),I1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=I1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _E(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Lv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mae=["Webkit","ms","Moz","O"];Object.keys(Lv).forEach(function(t){Mae.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Lv[e]=Lv[t]})});function IH(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Lv.hasOwnProperty(t)&&Lv[t]?(""+e).trim():e+"px"}function xH(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=IH(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Uae=fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E2(t,e){if(e){if(Uae[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function _2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C2=null;function J5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var A2=null,ky=null,Dy=null;function iB(t){if(t=_C(t)){if(typeof A2!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=zx(e),A2(t.stateNode,t.type,e))}}function NH(t){ky?Dy?Dy.push(t):Dy=[t]:ky=t}function TH(){if(ky){var t=ky,e=Dy;if(Dy=ky=null,iB(t),e)for(t=0;t<e.length;t++)iB(e[t])}}function RH(t,e){return t(e)}function PH(){}var tR=!1;function OH(t,e,n){if(tR)return t(e,n);tR=!0;try{return RH(t,e,n)}finally{tR=!1,(ky!==null||Dy!==null)&&(PH(),TH())}}function CE(t,e){var n=t.stateNode;if(n===null)return null;var r=zx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var S2=!1;if(Ju)try{var Ib={};Object.defineProperty(Ib,"passive",{get:function(){S2=!0}}),window.addEventListener("test",Ib,Ib),window.removeEventListener("test",Ib,Ib)}catch{S2=!1}function $ae(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Mv=!1,JS=null,ZS=!1,I2=null,Bae={onError:function(t){Mv=!0,JS=t}};function Fae(t,e,n,r,s,i,o,a,c){Mv=!1,JS=null,$ae.apply(Bae,arguments)}function jae(t,e,n,r,s,i,o,a,c){if(Fae.apply(this,arguments),Mv){if(Mv){var l=JS;Mv=!1,JS=null}else throw Error(Ee(198));ZS||(ZS=!0,I2=l)}}function Vg(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kH(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oB(t){if(Vg(t)!==t)throw Error(Ee(188))}function zae(t){var e=t.alternate;if(!e){if(e=Vg(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return oB(s),t;if(i===r)return oB(s),e;i=i.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function DH(t){return t=zae(t),t!==null?LH(t):null}function LH(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LH(t);if(e!==null)return e;t=t.sibling}return null}var MH=Bo.unstable_scheduleCallback,aB=Bo.unstable_cancelCallback,Wae=Bo.unstable_shouldYield,Hae=Bo.unstable_requestPaint,xr=Bo.unstable_now,Gae=Bo.unstable_getCurrentPriorityLevel,Z5=Bo.unstable_ImmediatePriority,UH=Bo.unstable_UserBlockingPriority,XS=Bo.unstable_NormalPriority,qae=Bo.unstable_LowPriority,$H=Bo.unstable_IdlePriority,$x=null,Cl=null;function Vae(t){if(Cl&&typeof Cl.onCommitFiberRoot=="function")try{Cl.onCommitFiberRoot($x,t,void 0,(t.current.flags&128)===128)}catch{}}var Ec=Math.clz32?Math.clz32:Qae,Kae=Math.log,Yae=Math.LN2;function Qae(t){return t>>>=0,t===0?32:31-(Kae(t)/Yae|0)|0}var x1=64,N1=4194304;function cv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function eI(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=cv(a):(i&=o,i!==0&&(r=cv(i)))}else o=n&~s,o!==0?r=cv(o):i!==0&&(r=cv(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ec(e),s=1<<n,r|=t[n],e&=~s;return r}function Jae(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zae(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ec(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Jae(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function x2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BH(){var t=x1;return x1<<=1,!(x1&4194240)&&(x1=64),t}function nR(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vC(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ec(e),t[e]=n}function Xae(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ec(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function X5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ec(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var An=0;function FH(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jH,eL,zH,WH,HH,N2=!1,T1=[],$h=null,Bh=null,Fh=null,AE=new Map,SE=new Map,Vd=[],ece="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cB(t,e){switch(t){case"focusin":case"focusout":$h=null;break;case"dragenter":case"dragleave":Bh=null;break;case"mouseover":case"mouseout":Fh=null;break;case"pointerover":case"pointerout":AE.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":SE.delete(e.pointerId)}}function xb(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=_C(e),e!==null&&eL(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function tce(t,e,n,r,s){switch(e){case"focusin":return $h=xb($h,t,e,n,r,s),!0;case"dragenter":return Bh=xb(Bh,t,e,n,r,s),!0;case"mouseover":return Fh=xb(Fh,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return AE.set(i,xb(AE.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,SE.set(i,xb(SE.get(i)||null,t,e,n,r,s)),!0}return!1}function GH(t){var e=cp(t.target);if(e!==null){var n=Vg(e);if(n!==null){if(e=n.tag,e===13){if(e=kH(n),e!==null){t.blockedOn=e,HH(t.priority,function(){zH(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zA(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=T2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);C2=r,n.target.dispatchEvent(r),C2=null}else return e=_C(n),e!==null&&eL(e),t.blockedOn=n,!1;e.shift()}return!0}function lB(t,e,n){zA(t)&&n.delete(e)}function nce(){N2=!1,$h!==null&&zA($h)&&($h=null),Bh!==null&&zA(Bh)&&(Bh=null),Fh!==null&&zA(Fh)&&(Fh=null),AE.forEach(lB),SE.forEach(lB)}function Nb(t,e){t.blockedOn===e&&(t.blockedOn=null,N2||(N2=!0,Bo.unstable_scheduleCallback(Bo.unstable_NormalPriority,nce)))}function IE(t){function e(s){return Nb(s,t)}if(0<T1.length){Nb(T1[0],t);for(var n=1;n<T1.length;n++){var r=T1[n];r.blockedOn===t&&(r.blockedOn=null)}}for($h!==null&&Nb($h,t),Bh!==null&&Nb(Bh,t),Fh!==null&&Nb(Fh,t),AE.forEach(e),SE.forEach(e),n=0;n<Vd.length;n++)r=Vd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vd.length&&(n=Vd[0],n.blockedOn===null);)GH(n),n.blockedOn===null&&Vd.shift()}var Ly=ld.ReactCurrentBatchConfig,tI=!0;function rce(t,e,n,r){var s=An,i=Ly.transition;Ly.transition=null;try{An=1,tL(t,e,n,r)}finally{An=s,Ly.transition=i}}function sce(t,e,n,r){var s=An,i=Ly.transition;Ly.transition=null;try{An=4,tL(t,e,n,r)}finally{An=s,Ly.transition=i}}function tL(t,e,n,r){if(tI){var s=T2(t,e,n,r);if(s===null)hR(t,e,r,nI,n),cB(t,r);else if(tce(s,t,e,n,r))r.stopPropagation();else if(cB(t,r),e&4&&-1<ece.indexOf(t)){for(;s!==null;){var i=_C(s);if(i!==null&&jH(i),i=T2(t,e,n,r),i===null&&hR(t,e,r,nI,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else hR(t,e,r,null,n)}}var nI=null;function T2(t,e,n,r){if(nI=null,t=J5(r),t=cp(t),t!==null)if(e=Vg(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kH(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nI=t,null}function qH(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gae()){case Z5:return 1;case UH:return 4;case XS:case qae:return 16;case $H:return 536870912;default:return 16}default:return 16}}var Sh=null,nL=null,WA=null;function VH(){if(WA)return WA;var t,e=nL,n=e.length,r,s="value"in Sh?Sh.value:Sh.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return WA=s.slice(t,1<r?1-r:void 0)}function HA(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function R1(){return!0}function uB(){return!1}function Wo(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?R1:uB,this.isPropagationStopped=uB,this}return fr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=R1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=R1)},persist:function(){},isPersistent:R1}),e}var G0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rL=Wo(G0),EC=fr({},G0,{view:0,detail:0}),ice=Wo(EC),rR,sR,Tb,Bx=fr({},EC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sL,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tb&&(Tb&&t.type==="mousemove"?(rR=t.screenX-Tb.screenX,sR=t.screenY-Tb.screenY):sR=rR=0,Tb=t),rR)},movementY:function(t){return"movementY"in t?t.movementY:sR}}),dB=Wo(Bx),oce=fr({},Bx,{dataTransfer:0}),ace=Wo(oce),cce=fr({},EC,{relatedTarget:0}),iR=Wo(cce),lce=fr({},G0,{animationName:0,elapsedTime:0,pseudoElement:0}),uce=Wo(lce),dce=fr({},G0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hce=Wo(dce),fce=fr({},G0,{data:0}),hB=Wo(fce),pce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yce(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mce[t])?!!e[t]:!1}function sL(){return yce}var wce=fr({},EC,{key:function(t){if(t.key){var e=pce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=HA(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sL,charCode:function(t){return t.type==="keypress"?HA(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?HA(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bce=Wo(wce),vce=fr({},Bx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fB=Wo(vce),Ece=fr({},EC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sL}),_ce=Wo(Ece),Cce=fr({},G0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ace=Wo(Cce),Sce=fr({},Bx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ice=Wo(Sce),xce=[9,13,27,32],iL=Ju&&"CompositionEvent"in window,Uv=null;Ju&&"documentMode"in document&&(Uv=document.documentMode);var Nce=Ju&&"TextEvent"in window&&!Uv,KH=Ju&&(!iL||Uv&&8<Uv&&11>=Uv),pB=" ",gB=!1;function YH(t,e){switch(t){case"keyup":return xce.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QH(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ly=!1;function Tce(t,e){switch(t){case"compositionend":return QH(e);case"keypress":return e.which!==32?null:(gB=!0,pB);case"textInput":return t=e.data,t===pB&&gB?null:t;default:return null}}function Rce(t,e){if(ly)return t==="compositionend"||!iL&&YH(t,e)?(t=VH(),WA=nL=Sh=null,ly=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KH&&e.locale!=="ko"?null:e.data;default:return null}}var Pce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Pce[t.type]:e==="textarea"}function JH(t,e,n,r){NH(r),e=rI(e,"onChange"),0<e.length&&(n=new rL("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $v=null,xE=null;function Oce(t){cG(t,0)}function Fx(t){var e=hy(t);if(EH(e))return t}function kce(t,e){if(t==="change")return e}var ZH=!1;if(Ju){var oR;if(Ju){var aR="oninput"in document;if(!aR){var yB=document.createElement("div");yB.setAttribute("oninput","return;"),aR=typeof yB.oninput=="function"}oR=aR}else oR=!1;ZH=oR&&(!document.documentMode||9<document.documentMode)}function wB(){$v&&($v.detachEvent("onpropertychange",XH),xE=$v=null)}function XH(t){if(t.propertyName==="value"&&Fx(xE)){var e=[];JH(e,xE,t,J5(t)),OH(Oce,e)}}function Dce(t,e,n){t==="focusin"?(wB(),$v=e,xE=n,$v.attachEvent("onpropertychange",XH)):t==="focusout"&&wB()}function Lce(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fx(xE)}function Mce(t,e){if(t==="click")return Fx(e)}function Uce(t,e){if(t==="input"||t==="change")return Fx(e)}function $ce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sc=typeof Object.is=="function"?Object.is:$ce;function NE(t,e){if(Sc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d2.call(e,s)||!Sc(t[s],e[s]))return!1}return!0}function bB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vB(t,e){var n=bB(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bB(n)}}function eG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tG(){for(var t=window,e=QS();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=QS(t.document)}return e}function oL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bce(t){var e=tG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eG(n.ownerDocument.documentElement,n)){if(r!==null&&oL(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vB(n,i);var o=vB(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fce=Ju&&"documentMode"in document&&11>=document.documentMode,uy=null,R2=null,Bv=null,P2=!1;function EB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;P2||uy==null||uy!==QS(r)||(r=uy,"selectionStart"in r&&oL(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bv&&NE(Bv,r)||(Bv=r,r=rI(R2,"onSelect"),0<r.length&&(e=new rL("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=uy)))}function P1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var dy={animationend:P1("Animation","AnimationEnd"),animationiteration:P1("Animation","AnimationIteration"),animationstart:P1("Animation","AnimationStart"),transitionend:P1("Transition","TransitionEnd")},cR={},nG={};Ju&&(nG=document.createElement("div").style,"AnimationEvent"in window||(delete dy.animationend.animation,delete dy.animationiteration.animation,delete dy.animationstart.animation),"TransitionEvent"in window||delete dy.transitionend.transition);function jx(t){if(cR[t])return cR[t];if(!dy[t])return t;var e=dy[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nG)return cR[t]=e[n];return t}var rG=jx("animationend"),sG=jx("animationiteration"),iG=jx("animationstart"),oG=jx("transitionend"),aG=new Map,_B="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ef(t,e){aG.set(t,e),qg(e,[t])}for(var lR=0;lR<_B.length;lR++){var uR=_B[lR],jce=uR.toLowerCase(),zce=uR[0].toUpperCase()+uR.slice(1);Ef(jce,"on"+zce)}Ef(rG,"onAnimationEnd");Ef(sG,"onAnimationIteration");Ef(iG,"onAnimationStart");Ef("dblclick","onDoubleClick");Ef("focusin","onFocus");Ef("focusout","onBlur");Ef(oG,"onTransitionEnd");Zw("onMouseEnter",["mouseout","mouseover"]);Zw("onMouseLeave",["mouseout","mouseover"]);Zw("onPointerEnter",["pointerout","pointerover"]);Zw("onPointerLeave",["pointerout","pointerover"]);qg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qg("onBeforeInput",["compositionend","keypress","textInput","paste"]);qg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wce=new Set("cancel close invalid load scroll toggle".split(" ").concat(lv));function CB(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jae(r,e,void 0,t),t.currentTarget=null}function cG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;CB(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;CB(s,a,l),i=c}}}if(ZS)throw t=I2,ZS=!1,I2=null,t}function Qn(t,e){var n=e[M2];n===void 0&&(n=e[M2]=new Set);var r=t+"__bubble";n.has(r)||(lG(e,t,2,!1),n.add(r))}function dR(t,e,n){var r=0;e&&(r|=4),lG(n,t,r,e)}var O1="_reactListening"+Math.random().toString(36).slice(2);function TE(t){if(!t[O1]){t[O1]=!0,mH.forEach(function(n){n!=="selectionchange"&&(Wce.has(n)||dR(n,!1,t),dR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[O1]||(e[O1]=!0,dR("selectionchange",!1,e))}}function lG(t,e,n,r){switch(qH(e)){case 1:var s=rce;break;case 4:s=sce;break;default:s=tL}n=s.bind(null,e,n,t),s=void 0,!S2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function hR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=cp(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}OH(function(){var l=i,u=J5(n),d=[];e:{var h=aG.get(t);if(h!==void 0){var f=rL,p=t;switch(t){case"keypress":if(HA(n)===0)break e;case"keydown":case"keyup":f=bce;break;case"focusin":p="focus",f=iR;break;case"focusout":p="blur",f=iR;break;case"beforeblur":case"afterblur":f=iR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=dB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=ace;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=_ce;break;case rG:case sG:case iG:f=uce;break;case oG:f=Ace;break;case"scroll":f=ice;break;case"wheel":f=Ice;break;case"copy":case"cut":case"paste":f=hce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=fB}var g=(e&4)!==0,y=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var w=l,v;w!==null;){v=w;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,m!==null&&(A=CE(w,m),A!=null&&g.push(RE(w,A,v)))),y)break;w=w.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==C2&&(p=n.relatedTarget||n.fromElement)&&(cp(p)||p[Zu]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?cp(p):null,p!==null&&(y=Vg(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=dB,A="onMouseLeave",m="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=fB,A="onPointerLeave",m="onPointerEnter",w="pointer"),y=f==null?h:hy(f),v=p==null?h:hy(p),h=new g(A,w+"leave",f,n,u),h.target=y,h.relatedTarget=v,A=null,cp(u)===l&&(g=new g(m,w+"enter",p,n,u),g.target=v,g.relatedTarget=y,A=g),y=A,f&&p)t:{for(g=f,m=p,w=0,v=g;v;v=vm(v))w++;for(v=0,A=m;A;A=vm(A))v++;for(;0<w-v;)g=vm(g),w--;for(;0<v-w;)m=vm(m),v--;for(;w--;){if(g===m||m!==null&&g===m.alternate)break t;g=vm(g),m=vm(m)}g=null}else g=null;f!==null&&AB(d,h,f,g,!1),p!==null&&y!==null&&AB(d,y,p,g,!0)}}e:{if(h=l?hy(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=kce;else if(mB(h))if(ZH)C=Uce;else{C=Lce;var S=Dce}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=Mce);if(C&&(C=C(t,l))){JH(d,C,n,u);break e}S&&S(t,h,l),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&w2(h,"number",h.value)}switch(S=l?hy(l):window,t){case"focusin":(mB(S)||S.contentEditable==="true")&&(uy=S,R2=l,Bv=null);break;case"focusout":Bv=R2=uy=null;break;case"mousedown":P2=!0;break;case"contextmenu":case"mouseup":case"dragend":P2=!1,EB(d,n,u);break;case"selectionchange":if(Fce)break;case"keydown":case"keyup":EB(d,n,u)}var x;if(iL)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ly?YH(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(KH&&n.locale!=="ko"&&(ly||T!=="onCompositionStart"?T==="onCompositionEnd"&&ly&&(x=VH()):(Sh=u,nL="value"in Sh?Sh.value:Sh.textContent,ly=!0)),S=rI(l,T),0<S.length&&(T=new hB(T,t,null,n,u),d.push({event:T,listeners:S}),x?T.data=x:(x=QH(n),x!==null&&(T.data=x)))),(x=Nce?Tce(t,n):Rce(t,n))&&(l=rI(l,"onBeforeInput"),0<l.length&&(u=new hB("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}cG(d,e)})}function RE(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rI(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=CE(t,n),i!=null&&r.unshift(RE(t,i,s)),i=CE(t,e),i!=null&&r.push(RE(t,i,s))),t=t.return}return r}function vm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function AB(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=CE(n,i),c!=null&&o.unshift(RE(n,c,a))):s||(c=CE(n,i),c!=null&&o.push(RE(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Hce=/\r\n?/g,Gce=/\u0000|\uFFFD/g;function SB(t){return(typeof t=="string"?t:""+t).replace(Hce,`
`).replace(Gce,"")}function k1(t,e,n){if(e=SB(e),SB(t)!==e&&n)throw Error(Ee(425))}function sI(){}var O2=null,k2=null;function D2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var L2=typeof setTimeout=="function"?setTimeout:void 0,qce=typeof clearTimeout=="function"?clearTimeout:void 0,IB=typeof Promise=="function"?Promise:void 0,Vce=typeof queueMicrotask=="function"?queueMicrotask:typeof IB<"u"?function(t){return IB.resolve(null).then(t).catch(Kce)}:L2;function Kce(t){setTimeout(function(){throw t})}function fR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),IE(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);IE(e)}function jh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xB(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var q0=Math.random().toString(36).slice(2),gl="__reactFiber$"+q0,PE="__reactProps$"+q0,Zu="__reactContainer$"+q0,M2="__reactEvents$"+q0,Yce="__reactListeners$"+q0,Qce="__reactHandles$"+q0;function cp(t){var e=t[gl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zu]||n[gl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xB(t);t!==null;){if(n=t[gl])return n;t=xB(t)}return e}t=n,n=t.parentNode}return null}function _C(t){return t=t[gl]||t[Zu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function zx(t){return t[PE]||null}var U2=[],fy=-1;function _f(t){return{current:t}}function Xn(t){0>fy||(t.current=U2[fy],U2[fy]=null,fy--)}function Kn(t,e){fy++,U2[fy]=t.current,t.current=e}var lf={},Zs=_f(lf),to=_f(!1),hg=lf;function Xw(t,e){var n=t.type.contextTypes;if(!n)return lf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function no(t){return t=t.childContextTypes,t!=null}function iI(){Xn(to),Xn(Zs)}function NB(t,e,n){if(Zs.current!==lf)throw Error(Ee(168));Kn(Zs,e),Kn(to,n)}function uG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ee(108,Dae(t)||"Unknown",s));return fr({},n,r)}function oI(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||lf,hg=Zs.current,Kn(Zs,t),Kn(to,to.current),!0}function TB(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=uG(t,e,hg),r.__reactInternalMemoizedMergedChildContext=t,Xn(to),Xn(Zs),Kn(Zs,t)):Xn(to),Kn(to,n)}var fu=null,Wx=!1,pR=!1;function dG(t){fu===null?fu=[t]:fu.push(t)}function Jce(t){Wx=!0,dG(t)}function Cf(){if(!pR&&fu!==null){pR=!0;var t=0,e=An;try{var n=fu;for(An=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fu=null,Wx=!1}catch(s){throw fu!==null&&(fu=fu.slice(t+1)),MH(Z5,Cf),s}finally{An=e,pR=!1}}return null}var py=[],gy=0,aI=null,cI=0,wa=[],ba=0,fg=null,Du=1,Lu="";function jf(t,e){py[gy++]=cI,py[gy++]=aI,aI=t,cI=e}function hG(t,e,n){wa[ba++]=Du,wa[ba++]=Lu,wa[ba++]=fg,fg=t;var r=Du;t=Lu;var s=32-Ec(r)-1;r&=~(1<<s),n+=1;var i=32-Ec(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Du=1<<32-Ec(e)+s|n<<s|r,Lu=i+t}else Du=1<<i|n<<s|r,Lu=t}function aL(t){t.return!==null&&(jf(t,1),hG(t,1,0))}function cL(t){for(;t===aI;)aI=py[--gy],py[gy]=null,cI=py[--gy],py[gy]=null;for(;t===fg;)fg=wa[--ba],wa[ba]=null,Lu=wa[--ba],wa[ba]=null,Du=wa[--ba],wa[ba]=null}var Mo=null,ko=null,ir=!1,cc=null;function fG(t,e){var n=va(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function RB(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mo=t,ko=jh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mo=t,ko=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fg!==null?{id:Du,overflow:Lu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=va(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mo=t,ko=null,!0):!1;default:return!1}}function $2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function B2(t){if(ir){var e=ko;if(e){var n=e;if(!RB(t,e)){if($2(t))throw Error(Ee(418));e=jh(n.nextSibling);var r=Mo;e&&RB(t,e)?fG(r,n):(t.flags=t.flags&-4097|2,ir=!1,Mo=t)}}else{if($2(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,ir=!1,Mo=t}}}function PB(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mo=t}function D1(t){if(t!==Mo)return!1;if(!ir)return PB(t),ir=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!D2(t.type,t.memoizedProps)),e&&(e=ko)){if($2(t))throw pG(),Error(Ee(418));for(;e;)fG(t,e),e=jh(e.nextSibling)}if(PB(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ko=jh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ko=null}}else ko=Mo?jh(t.stateNode.nextSibling):null;return!0}function pG(){for(var t=ko;t;)t=jh(t.nextSibling)}function e0(){ko=Mo=null,ir=!1}function lL(t){cc===null?cc=[t]:cc.push(t)}var Zce=ld.ReactCurrentBatchConfig;function Rb(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function L1(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function OB(t){var e=t._init;return e(t._payload)}function gG(t){function e(m,w){if(t){var v=m.deletions;v===null?(m.deletions=[w],m.flags|=16):v.push(w)}}function n(m,w){if(!t)return null;for(;w!==null;)e(m,w),w=w.sibling;return null}function r(m,w){for(m=new Map;w!==null;)w.key!==null?m.set(w.key,w):m.set(w.index,w),w=w.sibling;return m}function s(m,w){return m=Gh(m,w),m.index=0,m.sibling=null,m}function i(m,w,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<w?(m.flags|=2,w):v):(m.flags|=2,w)):(m.flags|=1048576,w)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,w,v,A){return w===null||w.tag!==6?(w=ER(v,m.mode,A),w.return=m,w):(w=s(w,v),w.return=m,w)}function c(m,w,v,A){var C=v.type;return C===cy?u(m,w,v.props.children,A,v.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===jd&&OB(C)===w.type)?(A=s(w,v.props),A.ref=Rb(m,w,v),A.return=m,A):(A=JA(v.type,v.key,v.props,null,m.mode,A),A.ref=Rb(m,w,v),A.return=m,A)}function l(m,w,v,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=_R(v,m.mode,A),w.return=m,w):(w=s(w,v.children||[]),w.return=m,w)}function u(m,w,v,A,C){return w===null||w.tag!==7?(w=Xp(v,m.mode,A,C),w.return=m,w):(w=s(w,v),w.return=m,w)}function d(m,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ER(""+w,m.mode,v),w.return=m,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case A1:return v=JA(w.type,w.key,w.props,null,m.mode,v),v.ref=Rb(m,null,w),v.return=m,v;case ay:return w=_R(w,m.mode,v),w.return=m,w;case jd:var A=w._init;return d(m,A(w._payload),v)}if(av(w)||Sb(w))return w=Xp(w,m.mode,v,null),w.return=m,w;L1(m,w)}return null}function h(m,w,v,A){var C=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(m,w,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case A1:return v.key===C?c(m,w,v,A):null;case ay:return v.key===C?l(m,w,v,A):null;case jd:return C=v._init,h(m,w,C(v._payload),A)}if(av(v)||Sb(v))return C!==null?null:u(m,w,v,A,null);L1(m,v)}return null}function f(m,w,v,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return m=m.get(v)||null,a(w,m,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case A1:return m=m.get(A.key===null?v:A.key)||null,c(w,m,A,C);case ay:return m=m.get(A.key===null?v:A.key)||null,l(w,m,A,C);case jd:var S=A._init;return f(m,w,v,S(A._payload),C)}if(av(A)||Sb(A))return m=m.get(v)||null,u(w,m,A,C,null);L1(w,A)}return null}function p(m,w,v,A){for(var C=null,S=null,x=w,T=w=0,I=null;x!==null&&T<v.length;T++){x.index>T?(I=x,x=null):I=x.sibling;var k=h(m,x,v[T],A);if(k===null){x===null&&(x=I);break}t&&x&&k.alternate===null&&e(m,x),w=i(k,w,T),S===null?C=k:S.sibling=k,S=k,x=I}if(T===v.length)return n(m,x),ir&&jf(m,T),C;if(x===null){for(;T<v.length;T++)x=d(m,v[T],A),x!==null&&(w=i(x,w,T),S===null?C=x:S.sibling=x,S=x);return ir&&jf(m,T),C}for(x=r(m,x);T<v.length;T++)I=f(x,m,T,v[T],A),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?T:I.key),w=i(I,w,T),S===null?C=I:S.sibling=I,S=I);return t&&x.forEach(function(O){return e(m,O)}),ir&&jf(m,T),C}function g(m,w,v,A){var C=Sb(v);if(typeof C!="function")throw Error(Ee(150));if(v=C.call(v),v==null)throw Error(Ee(151));for(var S=C=null,x=w,T=w=0,I=null,k=v.next();x!==null&&!k.done;T++,k=v.next()){x.index>T?(I=x,x=null):I=x.sibling;var O=h(m,x,k.value,A);if(O===null){x===null&&(x=I);break}t&&x&&O.alternate===null&&e(m,x),w=i(O,w,T),S===null?C=O:S.sibling=O,S=O,x=I}if(k.done)return n(m,x),ir&&jf(m,T),C;if(x===null){for(;!k.done;T++,k=v.next())k=d(m,k.value,A),k!==null&&(w=i(k,w,T),S===null?C=k:S.sibling=k,S=k);return ir&&jf(m,T),C}for(x=r(m,x);!k.done;T++,k=v.next())k=f(x,m,T,k.value,A),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?T:k.key),w=i(k,w,T),S===null?C=k:S.sibling=k,S=k);return t&&x.forEach(function(B){return e(m,B)}),ir&&jf(m,T),C}function y(m,w,v,A){if(typeof v=="object"&&v!==null&&v.type===cy&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case A1:e:{for(var C=v.key,S=w;S!==null;){if(S.key===C){if(C=v.type,C===cy){if(S.tag===7){n(m,S.sibling),w=s(S,v.props.children),w.return=m,m=w;break e}}else if(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===jd&&OB(C)===S.type){n(m,S.sibling),w=s(S,v.props),w.ref=Rb(m,S,v),w.return=m,m=w;break e}n(m,S);break}else e(m,S);S=S.sibling}v.type===cy?(w=Xp(v.props.children,m.mode,A,v.key),w.return=m,m=w):(A=JA(v.type,v.key,v.props,null,m.mode,A),A.ref=Rb(m,w,v),A.return=m,m=A)}return o(m);case ay:e:{for(S=v.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(m,w.sibling),w=s(w,v.children||[]),w.return=m,m=w;break e}else{n(m,w);break}else e(m,w);w=w.sibling}w=_R(v,m.mode,A),w.return=m,m=w}return o(m);case jd:return S=v._init,y(m,w,S(v._payload),A)}if(av(v))return p(m,w,v,A);if(Sb(v))return g(m,w,v,A);L1(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(m,w.sibling),w=s(w,v),w.return=m,m=w):(n(m,w),w=ER(v,m.mode,A),w.return=m,m=w),o(m)):n(m,w)}return y}var t0=gG(!0),mG=gG(!1),lI=_f(null),uI=null,my=null,uL=null;function dL(){uL=my=uI=null}function hL(t){var e=lI.current;Xn(lI),t._currentValue=e}function F2(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function My(t,e){uI=t,uL=my=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zi=!0),t.firstContext=null)}function Ca(t){var e=t._currentValue;if(uL!==t)if(t={context:t,memoizedValue:e,next:null},my===null){if(uI===null)throw Error(Ee(308));my=t,uI.dependencies={lanes:0,firstContext:t}}else my=my.next=t;return e}var lp=null;function fL(t){lp===null?lp=[t]:lp.push(t)}function yG(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,fL(e)):(n.next=s.next,s.next=n),e.interleaved=n,Xu(t,r)}function Xu(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zd=!1;function pL(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,sn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xu(t,n)}return s=r.interleaved,s===null?(e.next=e,fL(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xu(t,n)}function GA(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,X5(t,n)}}function kB(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dI(t,e,n,r){var s=t.updateQueue;zd=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=fr({},d,h);break e;case 2:zd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);gg|=o,t.lanes=o,t.memoizedState=d}}function DB(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ee(191,s));s.call(r)}}}var CC={},Al=_f(CC),OE=_f(CC),kE=_f(CC);function up(t){if(t===CC)throw Error(Ee(174));return t}function gL(t,e){switch(Kn(kE,e),Kn(OE,t),Kn(Al,CC),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:v2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=v2(e,t)}Xn(Al),Kn(Al,e)}function n0(){Xn(Al),Xn(OE),Xn(kE)}function bG(t){up(kE.current);var e=up(Al.current),n=v2(e,t.type);e!==n&&(Kn(OE,t),Kn(Al,n))}function mL(t){OE.current===t&&(Xn(Al),Xn(OE))}var cr=_f(0);function hI(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gR=[];function yL(){for(var t=0;t<gR.length;t++)gR[t]._workInProgressVersionPrimary=null;gR.length=0}var qA=ld.ReactCurrentDispatcher,mR=ld.ReactCurrentBatchConfig,pg=0,hr=null,zr=null,is=null,fI=!1,Fv=!1,DE=0,Xce=0;function Fs(){throw Error(Ee(321))}function wL(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sc(t[n],e[n]))return!1;return!0}function bL(t,e,n,r,s,i){if(pg=i,hr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qA.current=t===null||t.memoizedState===null?rle:sle,t=n(r,s),Fv){i=0;do{if(Fv=!1,DE=0,25<=i)throw Error(Ee(301));i+=1,is=zr=null,e.updateQueue=null,qA.current=ile,t=n(r,s)}while(Fv)}if(qA.current=pI,e=zr!==null&&zr.next!==null,pg=0,is=zr=hr=null,fI=!1,e)throw Error(Ee(300));return t}function vL(){var t=DE!==0;return DE=0,t}function Vc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return is===null?hr.memoizedState=is=t:is=is.next=t,is}function Aa(){if(zr===null){var t=hr.alternate;t=t!==null?t.memoizedState:null}else t=zr.next;var e=is===null?hr.memoizedState:is.next;if(e!==null)is=e,zr=t;else{if(t===null)throw Error(Ee(310));zr=t,t={memoizedState:zr.memoizedState,baseState:zr.baseState,baseQueue:zr.baseQueue,queue:zr.queue,next:null},is===null?hr.memoizedState=is=t:is=is.next=t}return is}function LE(t,e){return typeof e=="function"?e(t):e}function yR(t){var e=Aa(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=zr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((pg&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,hr.lanes|=u,gg|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Sc(r,e.memoizedState)||(Zi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,hr.lanes|=i,gg|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wR(t){var e=Aa(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Sc(i,e.memoizedState)||(Zi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function vG(){}function EG(t,e){var n=hr,r=Aa(),s=e(),i=!Sc(r.memoizedState,s);if(i&&(r.memoizedState=s,Zi=!0),r=r.queue,EL(AG.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||is!==null&&is.memoizedState.tag&1){if(n.flags|=2048,ME(9,CG.bind(null,n,r,s,e),void 0,null),ps===null)throw Error(Ee(349));pg&30||_G(n,e,s)}return s}function _G(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function CG(t,e,n,r){e.value=n,e.getSnapshot=r,SG(e)&&IG(t)}function AG(t,e,n){return n(function(){SG(e)&&IG(t)})}function SG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sc(t,n)}catch{return!0}}function IG(t){var e=Xu(t,1);e!==null&&_c(e,t,1,-1)}function LB(t){var e=Vc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:LE,lastRenderedState:t},e.queue=t,t=t.dispatch=nle.bind(null,hr,t),[e.memoizedState,t]}function ME(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xG(){return Aa().memoizedState}function VA(t,e,n,r){var s=Vc();hr.flags|=t,s.memoizedState=ME(1|e,n,void 0,r===void 0?null:r)}function Hx(t,e,n,r){var s=Aa();r=r===void 0?null:r;var i=void 0;if(zr!==null){var o=zr.memoizedState;if(i=o.destroy,r!==null&&wL(r,o.deps)){s.memoizedState=ME(e,n,i,r);return}}hr.flags|=t,s.memoizedState=ME(1|e,n,i,r)}function MB(t,e){return VA(8390656,8,t,e)}function EL(t,e){return Hx(2048,8,t,e)}function NG(t,e){return Hx(4,2,t,e)}function TG(t,e){return Hx(4,4,t,e)}function RG(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function PG(t,e,n){return n=n!=null?n.concat([t]):null,Hx(4,4,RG.bind(null,e,t),n)}function _L(){}function OG(t,e){var n=Aa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wL(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kG(t,e){var n=Aa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wL(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function DG(t,e,n){return pg&21?(Sc(n,e)||(n=BH(),hr.lanes|=n,gg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zi=!0),t.memoizedState=n)}function ele(t,e){var n=An;An=n!==0&&4>n?n:4,t(!0);var r=mR.transition;mR.transition={};try{t(!1),e()}finally{An=n,mR.transition=r}}function LG(){return Aa().memoizedState}function tle(t,e,n){var r=Hh(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},MG(t))UG(e,n);else if(n=yG(t,e,n,r),n!==null){var s=bi();_c(n,t,r,s),$G(n,e,r)}}function nle(t,e,n){var r=Hh(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(MG(t))UG(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Sc(a,o)){var c=e.interleaved;c===null?(s.next=s,fL(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=yG(t,e,s,r),n!==null&&(s=bi(),_c(n,t,r,s),$G(n,e,r))}}function MG(t){var e=t.alternate;return t===hr||e!==null&&e===hr}function UG(t,e){Fv=fI=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $G(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,X5(t,n)}}var pI={readContext:Ca,useCallback:Fs,useContext:Fs,useEffect:Fs,useImperativeHandle:Fs,useInsertionEffect:Fs,useLayoutEffect:Fs,useMemo:Fs,useReducer:Fs,useRef:Fs,useState:Fs,useDebugValue:Fs,useDeferredValue:Fs,useTransition:Fs,useMutableSource:Fs,useSyncExternalStore:Fs,useId:Fs,unstable_isNewReconciler:!1},rle={readContext:Ca,useCallback:function(t,e){return Vc().memoizedState=[t,e===void 0?null:e],t},useContext:Ca,useEffect:MB,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,VA(4194308,4,RG.bind(null,e,t),n)},useLayoutEffect:function(t,e){return VA(4194308,4,t,e)},useInsertionEffect:function(t,e){return VA(4,2,t,e)},useMemo:function(t,e){var n=Vc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tle.bind(null,hr,t),[r.memoizedState,t]},useRef:function(t){var e=Vc();return t={current:t},e.memoizedState=t},useState:LB,useDebugValue:_L,useDeferredValue:function(t){return Vc().memoizedState=t},useTransition:function(){var t=LB(!1),e=t[0];return t=ele.bind(null,t[1]),Vc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=hr,s=Vc();if(ir){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),ps===null)throw Error(Ee(349));pg&30||_G(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,MB(AG.bind(null,r,i,t),[t]),r.flags|=2048,ME(9,CG.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Vc(),e=ps.identifierPrefix;if(ir){var n=Lu,r=Du;n=(r&~(1<<32-Ec(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=DE++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Xce++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sle={readContext:Ca,useCallback:OG,useContext:Ca,useEffect:EL,useImperativeHandle:PG,useInsertionEffect:NG,useLayoutEffect:TG,useMemo:kG,useReducer:yR,useRef:xG,useState:function(){return yR(LE)},useDebugValue:_L,useDeferredValue:function(t){var e=Aa();return DG(e,zr.memoizedState,t)},useTransition:function(){var t=yR(LE)[0],e=Aa().memoizedState;return[t,e]},useMutableSource:vG,useSyncExternalStore:EG,useId:LG,unstable_isNewReconciler:!1},ile={readContext:Ca,useCallback:OG,useContext:Ca,useEffect:EL,useImperativeHandle:PG,useInsertionEffect:NG,useLayoutEffect:TG,useMemo:kG,useReducer:wR,useRef:xG,useState:function(){return wR(LE)},useDebugValue:_L,useDeferredValue:function(t){var e=Aa();return zr===null?e.memoizedState=t:DG(e,zr.memoizedState,t)},useTransition:function(){var t=wR(LE)[0],e=Aa().memoizedState;return[t,e]},useMutableSource:vG,useSyncExternalStore:EG,useId:LG,unstable_isNewReconciler:!1};function Ja(t,e){if(t&&t.defaultProps){e=fr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function j2(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:fr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gx={isMounted:function(t){return(t=t._reactInternals)?Vg(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bi(),s=Hh(t),i=Fu(r,s);i.payload=e,n!=null&&(i.callback=n),e=zh(t,i,s),e!==null&&(_c(e,t,s,r),GA(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bi(),s=Hh(t),i=Fu(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zh(t,i,s),e!==null&&(_c(e,t,s,r),GA(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bi(),r=Hh(t),s=Fu(n,r);s.tag=2,e!=null&&(s.callback=e),e=zh(t,s,r),e!==null&&(_c(e,t,r,n),GA(e,t,r))}};function UB(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!NE(n,r)||!NE(s,i):!0}function BG(t,e,n){var r=!1,s=lf,i=e.contextType;return typeof i=="object"&&i!==null?i=Ca(i):(s=no(e)?hg:Zs.current,r=e.contextTypes,i=(r=r!=null)?Xw(t,s):lf),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $B(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gx.enqueueReplaceState(e,e.state,null)}function z2(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},pL(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ca(i):(i=no(e)?hg:Zs.current,s.context=Xw(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(j2(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Gx.enqueueReplaceState(s,s.state,null),dI(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function r0(t,e){try{var n="",r=e;do n+=kae(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bR(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function W2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ole=typeof WeakMap=="function"?WeakMap:Map;function FG(t,e,n){n=Fu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mI||(mI=!0,X2=r),W2(t,e)},n}function jG(t,e,n){n=Fu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){W2(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){W2(t,e),typeof r!="function"&&(Wh===null?Wh=new Set([this]):Wh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function BB(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ole;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=vle.bind(null,t,e,n),e.then(t,t))}function FB(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jB(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fu(-1,1),e.tag=2,zh(n,e,1))),n.lanes|=1),t)}var ale=ld.ReactCurrentOwner,Zi=!1;function ci(t,e,n,r){e.child=t===null?mG(e,null,n,r):t0(e,t.child,n,r)}function zB(t,e,n,r,s){n=n.render;var i=e.ref;return My(e,s),r=bL(t,e,n,r,i,s),n=vL(),t!==null&&!Zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ed(t,e,s)):(ir&&n&&aL(e),e.flags|=1,ci(t,e,r,s),e.child)}function WB(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!RL(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,zG(t,e,i,r,s)):(t=JA(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:NE,n(o,r)&&t.ref===e.ref)return ed(t,e,s)}return e.flags|=1,t=Gh(i,r),t.ref=e.ref,t.return=e,e.child=t}function zG(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(NE(i,r)&&t.ref===e.ref)if(Zi=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Zi=!0);else return e.lanes=t.lanes,ed(t,e,s)}return H2(t,e,n,r,s)}function WG(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kn(wy,No),No|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Kn(wy,No),No|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Kn(wy,No),No|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Kn(wy,No),No|=r;return ci(t,e,s,n),e.child}function HG(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function H2(t,e,n,r,s){var i=no(n)?hg:Zs.current;return i=Xw(e,i),My(e,s),n=bL(t,e,n,r,i,s),r=vL(),t!==null&&!Zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ed(t,e,s)):(ir&&r&&aL(e),e.flags|=1,ci(t,e,n,s),e.child)}function HB(t,e,n,r,s){if(no(n)){var i=!0;oI(e)}else i=!1;if(My(e,s),e.stateNode===null)KA(t,e),BG(e,n,r),z2(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ca(l):(l=no(n)?hg:Zs.current,l=Xw(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&$B(e,o,r,l),zd=!1;var h=e.memoizedState;o.state=h,dI(e,r,o,s),c=e.memoizedState,a!==r||h!==c||to.current||zd?(typeof u=="function"&&(j2(e,n,u,r),c=e.memoizedState),(a=zd||UB(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wG(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Ja(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ca(c):(c=no(n)?hg:Zs.current,c=Xw(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&$B(e,o,r,c),zd=!1,h=e.memoizedState,o.state=h,dI(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||to.current||zd?(typeof f=="function"&&(j2(e,n,f,r),p=e.memoizedState),(l=zd||UB(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return G2(t,e,n,r,i,s)}function G2(t,e,n,r,s,i){HG(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&TB(e,n,!1),ed(t,e,i);r=e.stateNode,ale.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=t0(e,t.child,null,i),e.child=t0(e,null,a,i)):ci(t,e,a,i),e.memoizedState=r.state,s&&TB(e,n,!0),e.child}function GG(t){var e=t.stateNode;e.pendingContext?NB(t,e.pendingContext,e.pendingContext!==e.context):e.context&&NB(t,e.context,!1),gL(t,e.containerInfo)}function GB(t,e,n,r,s){return e0(),lL(s),e.flags|=256,ci(t,e,n,r),e.child}var q2={dehydrated:null,treeContext:null,retryLane:0};function V2(t){return{baseLanes:t,cachePool:null,transitions:null}}function qG(t,e,n){var r=e.pendingProps,s=cr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Kn(cr,s&1),t===null)return B2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Kx(o,r,0,null),t=Xp(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=V2(n),e.memoizedState=q2,t):CL(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return cle(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Gh(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Gh(a,i):(i=Xp(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?V2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=q2,r}return i=t.child,t=i.sibling,r=Gh(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function CL(t,e){return e=Kx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function M1(t,e,n,r){return r!==null&&lL(r),t0(e,t.child,null,n),t=CL(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cle(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=bR(Error(Ee(422))),M1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Kx({mode:"visible",children:r.children},s,0,null),i=Xp(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&t0(e,t.child,null,o),e.child.memoizedState=V2(o),e.memoizedState=q2,i);if(!(e.mode&1))return M1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ee(419)),r=bR(i,r,void 0),M1(t,e,o,r)}if(a=(o&t.childLanes)!==0,Zi||a){if(r=ps,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xu(t,s),_c(r,t,s,-1))}return TL(),r=bR(Error(Ee(421))),M1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ele.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ko=jh(s.nextSibling),Mo=e,ir=!0,cc=null,t!==null&&(wa[ba++]=Du,wa[ba++]=Lu,wa[ba++]=fg,Du=t.id,Lu=t.overflow,fg=e),e=CL(e,r.children),e.flags|=4096,e)}function qB(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),F2(t.return,e,n)}function vR(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function VG(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ci(t,e,r.children,n),r=cr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qB(t,n,e);else if(t.tag===19)qB(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Kn(cr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&hI(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vR(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&hI(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vR(e,!0,n,null,i);break;case"together":vR(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function KA(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ed(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=Gh(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gh(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lle(t,e,n){switch(e.tag){case 3:GG(e),e0();break;case 5:bG(e);break;case 1:no(e.type)&&oI(e);break;case 4:gL(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Kn(lI,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Kn(cr,cr.current&1),e.flags|=128,null):n&e.child.childLanes?qG(t,e,n):(Kn(cr,cr.current&1),t=ed(t,e,n),t!==null?t.sibling:null);Kn(cr,cr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return VG(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Kn(cr,cr.current),r)break;return null;case 22:case 23:return e.lanes=0,WG(t,e,n)}return ed(t,e,n)}var KG,K2,YG,QG;KG=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};K2=function(){};YG=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,up(Al.current);var i=null;switch(n){case"input":s=m2(t,s),r=m2(t,r),i=[];break;case"select":s=fr({},s,{value:void 0}),r=fr({},r,{value:void 0}),i=[];break;case"textarea":s=b2(t,s),r=b2(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sI)}E2(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(EE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(EE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Qn("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};QG=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pb(t,e){if(!ir)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function js(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ule(t,e,n){var r=e.pendingProps;switch(cL(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return js(e),null;case 1:return no(e.type)&&iI(),js(e),null;case 3:return r=e.stateNode,n0(),Xn(to),Xn(Zs),yL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(D1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cc!==null&&(nk(cc),cc=null))),K2(t,e),js(e),null;case 5:mL(e);var s=up(kE.current);if(n=e.type,t!==null&&e.stateNode!=null)YG(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return js(e),null}if(t=up(Al.current),D1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[gl]=e,r[PE]=i,t=(e.mode&1)!==0,n){case"dialog":Qn("cancel",r),Qn("close",r);break;case"iframe":case"object":case"embed":Qn("load",r);break;case"video":case"audio":for(s=0;s<lv.length;s++)Qn(lv[s],r);break;case"source":Qn("error",r);break;case"img":case"image":case"link":Qn("error",r),Qn("load",r);break;case"details":Qn("toggle",r);break;case"input":tB(r,i),Qn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Qn("invalid",r);break;case"textarea":rB(r,i),Qn("invalid",r)}E2(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&k1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&k1(r.textContent,a,t),s=["children",""+a]):EE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qn("scroll",r)}switch(n){case"input":S1(r),nB(r,i,!0);break;case"textarea":S1(r),sB(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=sI)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=AH(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gl]=e,t[PE]=r,KG(t,e,!1,!1),e.stateNode=t;e:{switch(o=_2(n,r),n){case"dialog":Qn("cancel",t),Qn("close",t),s=r;break;case"iframe":case"object":case"embed":Qn("load",t),s=r;break;case"video":case"audio":for(s=0;s<lv.length;s++)Qn(lv[s],t);s=r;break;case"source":Qn("error",t),s=r;break;case"img":case"image":case"link":Qn("error",t),Qn("load",t),s=r;break;case"details":Qn("toggle",t),s=r;break;case"input":tB(t,r),s=m2(t,r),Qn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=fr({},r,{value:void 0}),Qn("invalid",t);break;case"textarea":rB(t,r),s=b2(t,r),Qn("invalid",t);break;default:s=r}E2(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?xH(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&SH(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_E(t,c):typeof c=="number"&&_E(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(EE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Qn("scroll",t):c!=null&&V5(t,i,c,o))}switch(n){case"input":S1(t),nB(t,r,!1);break;case"textarea":S1(t),sB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cf(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Oy(t,!!r.multiple,i,!1):r.defaultValue!=null&&Oy(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=sI)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return js(e),null;case 6:if(t&&e.stateNode!=null)QG(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=up(kE.current),up(Al.current),D1(e)){if(r=e.stateNode,n=e.memoizedProps,r[gl]=e,(i=r.nodeValue!==n)&&(t=Mo,t!==null))switch(t.tag){case 3:k1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&k1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gl]=e,e.stateNode=r}return js(e),null;case 13:if(Xn(cr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ir&&ko!==null&&e.mode&1&&!(e.flags&128))pG(),e0(),e.flags|=98560,i=!1;else if(i=D1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[gl]=e}else e0(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;js(e),i=!1}else cc!==null&&(nk(cc),cc=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||cr.current&1?Vr===0&&(Vr=3):TL())),e.updateQueue!==null&&(e.flags|=4),js(e),null);case 4:return n0(),K2(t,e),t===null&&TE(e.stateNode.containerInfo),js(e),null;case 10:return hL(e.type._context),js(e),null;case 17:return no(e.type)&&iI(),js(e),null;case 19:if(Xn(cr),i=e.memoizedState,i===null)return js(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Pb(i,!1);else{if(Vr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hI(t),o!==null){for(e.flags|=128,Pb(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Kn(cr,cr.current&1|2),e.child}t=t.sibling}i.tail!==null&&xr()>s0&&(e.flags|=128,r=!0,Pb(i,!1),e.lanes=4194304)}else{if(!r)if(t=hI(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pb(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ir)return js(e),null}else 2*xr()-i.renderingStartTime>s0&&n!==1073741824&&(e.flags|=128,r=!0,Pb(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xr(),e.sibling=null,n=cr.current,Kn(cr,r?n&1|2:n&1),e):(js(e),null);case 22:case 23:return NL(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?No&1073741824&&(js(e),e.subtreeFlags&6&&(e.flags|=8192)):js(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function dle(t,e){switch(cL(e),e.tag){case 1:return no(e.type)&&iI(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return n0(),Xn(to),Xn(Zs),yL(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mL(e),null;case 13:if(Xn(cr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));e0()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xn(cr),null;case 4:return n0(),null;case 10:return hL(e.type._context),null;case 22:case 23:return NL(),null;case 24:return null;default:return null}}var U1=!1,Qs=!1,hle=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function yy(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){br(t,e,r)}else n.current=null}function Y2(t,e,n){try{n()}catch(r){br(t,e,r)}}var VB=!1;function fle(t,e){if(O2=tI,t=tG(),oL(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(k2={focusedElem:t,selectionRange:n},tI=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){e=Ke;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,m=e.stateNode,w=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ja(e.type,g),y);m.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(A){br(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}return p=VB,VB=!1,p}function jv(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Y2(e,n,i)}s=s.next}while(s!==r)}}function qx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Q2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JG(t){var e=t.alternate;e!==null&&(t.alternate=null,JG(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gl],delete e[PE],delete e[M2],delete e[Yce],delete e[Qce])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZG(t){return t.tag===5||t.tag===3||t.tag===4}function KB(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZG(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function J2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sI));else if(r!==4&&(t=t.child,t!==null))for(J2(t,e,n),t=t.sibling;t!==null;)J2(t,e,n),t=t.sibling}function Z2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Z2(t,e,n),t=t.sibling;t!==null;)Z2(t,e,n),t=t.sibling}var Ss=null,ac=!1;function yd(t,e,n){for(n=n.child;n!==null;)XG(t,e,n),n=n.sibling}function XG(t,e,n){if(Cl&&typeof Cl.onCommitFiberUnmount=="function")try{Cl.onCommitFiberUnmount($x,n)}catch{}switch(n.tag){case 5:Qs||yy(n,e);case 6:var r=Ss,s=ac;Ss=null,yd(t,e,n),Ss=r,ac=s,Ss!==null&&(ac?(t=Ss,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ss.removeChild(n.stateNode));break;case 18:Ss!==null&&(ac?(t=Ss,n=n.stateNode,t.nodeType===8?fR(t.parentNode,n):t.nodeType===1&&fR(t,n),IE(t)):fR(Ss,n.stateNode));break;case 4:r=Ss,s=ac,Ss=n.stateNode.containerInfo,ac=!0,yd(t,e,n),Ss=r,ac=s;break;case 0:case 11:case 14:case 15:if(!Qs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Y2(n,e,o),s=s.next}while(s!==r)}yd(t,e,n);break;case 1:if(!Qs&&(yy(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){br(n,e,a)}yd(t,e,n);break;case 21:yd(t,e,n);break;case 22:n.mode&1?(Qs=(r=Qs)||n.memoizedState!==null,yd(t,e,n),Qs=r):yd(t,e,n);break;default:yd(t,e,n)}}function YB(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hle),e.forEach(function(r){var s=_le.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ja(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ss=a.stateNode,ac=!1;break e;case 3:Ss=a.stateNode.containerInfo,ac=!0;break e;case 4:Ss=a.stateNode.containerInfo,ac=!0;break e}a=a.return}if(Ss===null)throw Error(Ee(160));XG(i,o,s),Ss=null,ac=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){br(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eq(e,t),e=e.sibling}function eq(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ja(e,t),Mc(t),r&4){try{jv(3,t,t.return),qx(3,t)}catch(g){br(t,t.return,g)}try{jv(5,t,t.return)}catch(g){br(t,t.return,g)}}break;case 1:ja(e,t),Mc(t),r&512&&n!==null&&yy(n,n.return);break;case 5:if(ja(e,t),Mc(t),r&512&&n!==null&&yy(n,n.return),t.flags&32){var s=t.stateNode;try{_E(s,"")}catch(g){br(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&_H(s,i),_2(a,o);var l=_2(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?xH(s,d):u==="dangerouslySetInnerHTML"?SH(s,d):u==="children"?_E(s,d):V5(s,u,d,l)}switch(a){case"input":y2(s,i);break;case"textarea":CH(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Oy(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Oy(s,!!i.multiple,i.defaultValue,!0):Oy(s,!!i.multiple,i.multiple?[]:"",!1))}s[PE]=i}catch(g){br(t,t.return,g)}}break;case 6:if(ja(e,t),Mc(t),r&4){if(t.stateNode===null)throw Error(Ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){br(t,t.return,g)}}break;case 3:if(ja(e,t),Mc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{IE(e.containerInfo)}catch(g){br(t,t.return,g)}break;case 4:ja(e,t),Mc(t);break;case 13:ja(e,t),Mc(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(IL=xr())),r&4&&YB(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Qs=(l=Qs)||u,ja(e,t),Qs=l):ja(e,t),Mc(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ke=t,u=t.child;u!==null;){for(d=Ke=u;Ke!==null;){switch(h=Ke,f=h.child,h.tag){case 0:case 11:case 14:case 15:jv(4,h,h.return);break;case 1:yy(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){br(r,n,g)}}break;case 5:yy(h,h.return);break;case 22:if(h.memoizedState!==null){JB(d);continue}}f!==null?(f.return=h,Ke=f):JB(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=IH("display",o))}catch(g){br(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){br(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ja(e,t),Mc(t),r&4&&YB(t);break;case 21:break;default:ja(e,t),Mc(t)}}function Mc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ZG(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_E(s,""),r.flags&=-33);var i=KB(t);Z2(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=KB(t);J2(t,a,o);break;default:throw Error(Ee(161))}}catch(c){br(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ple(t,e,n){Ke=t,tq(t)}function tq(t,e,n){for(var r=(t.mode&1)!==0;Ke!==null;){var s=Ke,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||U1;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Qs;a=U1;var l=Qs;if(U1=o,(Qs=c)&&!l)for(Ke=s;Ke!==null;)o=Ke,c=o.child,o.tag===22&&o.memoizedState!==null?ZB(s):c!==null?(c.return=o,Ke=c):ZB(s);for(;i!==null;)Ke=i,tq(i),i=i.sibling;Ke=s,U1=a,Qs=l}QB(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ke=i):QB(t)}}function QB(t){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qs||qx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qs)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ja(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&DB(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}DB(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&IE(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}Qs||e.flags&512&&Q2(e)}catch(h){br(e,e.return,h)}}if(e===t){Ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function JB(t){for(;Ke!==null;){var e=Ke;if(e===t){Ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function ZB(t){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qx(4,e)}catch(c){br(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){br(e,s,c)}}var i=e.return;try{Q2(e)}catch(c){br(e,i,c)}break;case 5:var o=e.return;try{Q2(e)}catch(c){br(e,o,c)}}}catch(c){br(e,e.return,c)}if(e===t){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var gle=Math.ceil,gI=ld.ReactCurrentDispatcher,AL=ld.ReactCurrentOwner,_a=ld.ReactCurrentBatchConfig,sn=0,ps=null,Dr=null,Rs=0,No=0,wy=_f(0),Vr=0,UE=null,gg=0,Vx=0,SL=0,zv=null,Ki=null,IL=0,s0=1/0,uu=null,mI=!1,X2=null,Wh=null,$1=!1,Ih=null,yI=0,Wv=0,ek=null,YA=-1,QA=0;function bi(){return sn&6?xr():YA!==-1?YA:YA=xr()}function Hh(t){return t.mode&1?sn&2&&Rs!==0?Rs&-Rs:Zce.transition!==null?(QA===0&&(QA=BH()),QA):(t=An,t!==0||(t=window.event,t=t===void 0?16:qH(t.type)),t):1}function _c(t,e,n,r){if(50<Wv)throw Wv=0,ek=null,Error(Ee(185));vC(t,n,r),(!(sn&2)||t!==ps)&&(t===ps&&(!(sn&2)&&(Vx|=n),Vr===4&&Kd(t,Rs)),ro(t,r),n===1&&sn===0&&!(e.mode&1)&&(s0=xr()+500,Wx&&Cf()))}function ro(t,e){var n=t.callbackNode;Zae(t,e);var r=eI(t,t===ps?Rs:0);if(r===0)n!==null&&aB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&aB(n),e===1)t.tag===0?Jce(XB.bind(null,t)):dG(XB.bind(null,t)),Vce(function(){!(sn&6)&&Cf()}),n=null;else{switch(FH(r)){case 1:n=Z5;break;case 4:n=UH;break;case 16:n=XS;break;case 536870912:n=$H;break;default:n=XS}n=lq(n,nq.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nq(t,e){if(YA=-1,QA=0,sn&6)throw Error(Ee(327));var n=t.callbackNode;if(Uy()&&t.callbackNode!==n)return null;var r=eI(t,t===ps?Rs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wI(t,r);else{e=r;var s=sn;sn|=2;var i=sq();(ps!==t||Rs!==e)&&(uu=null,s0=xr()+500,Zp(t,e));do try{wle();break}catch(a){rq(t,a)}while(!0);dL(),gI.current=i,sn=s,Dr!==null?e=0:(ps=null,Rs=0,e=Vr)}if(e!==0){if(e===2&&(s=x2(t),s!==0&&(r=s,e=tk(t,s))),e===1)throw n=UE,Zp(t,0),Kd(t,r),ro(t,xr()),n;if(e===6)Kd(t,r);else{if(s=t.current.alternate,!(r&30)&&!mle(s)&&(e=wI(t,r),e===2&&(i=x2(t),i!==0&&(r=i,e=tk(t,i))),e===1))throw n=UE,Zp(t,0),Kd(t,r),ro(t,xr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:zf(t,Ki,uu);break;case 3:if(Kd(t,r),(r&130023424)===r&&(e=IL+500-xr(),10<e)){if(eI(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bi(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=L2(zf.bind(null,t,Ki,uu),e);break}zf(t,Ki,uu);break;case 4:if(Kd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ec(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=xr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gle(r/1960))-r,10<r){t.timeoutHandle=L2(zf.bind(null,t,Ki,uu),r);break}zf(t,Ki,uu);break;case 5:zf(t,Ki,uu);break;default:throw Error(Ee(329))}}}return ro(t,xr()),t.callbackNode===n?nq.bind(null,t):null}function tk(t,e){var n=zv;return t.current.memoizedState.isDehydrated&&(Zp(t,e).flags|=256),t=wI(t,e),t!==2&&(e=Ki,Ki=n,e!==null&&nk(e)),t}function nk(t){Ki===null?Ki=t:Ki.push.apply(Ki,t)}function mle(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Sc(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kd(t,e){for(e&=~SL,e&=~Vx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ec(e),r=1<<n;t[n]=-1,e&=~r}}function XB(t){if(sn&6)throw Error(Ee(327));Uy();var e=eI(t,0);if(!(e&1))return ro(t,xr()),null;var n=wI(t,e);if(t.tag!==0&&n===2){var r=x2(t);r!==0&&(e=r,n=tk(t,r))}if(n===1)throw n=UE,Zp(t,0),Kd(t,e),ro(t,xr()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zf(t,Ki,uu),ro(t,xr()),null}function xL(t,e){var n=sn;sn|=1;try{return t(e)}finally{sn=n,sn===0&&(s0=xr()+500,Wx&&Cf())}}function mg(t){Ih!==null&&Ih.tag===0&&!(sn&6)&&Uy();var e=sn;sn|=1;var n=_a.transition,r=An;try{if(_a.transition=null,An=1,t)return t()}finally{An=r,_a.transition=n,sn=e,!(sn&6)&&Cf()}}function NL(){No=wy.current,Xn(wy)}function Zp(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qce(n)),Dr!==null)for(n=Dr.return;n!==null;){var r=n;switch(cL(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&iI();break;case 3:n0(),Xn(to),Xn(Zs),yL();break;case 5:mL(r);break;case 4:n0();break;case 13:Xn(cr);break;case 19:Xn(cr);break;case 10:hL(r.type._context);break;case 22:case 23:NL()}n=n.return}if(ps=t,Dr=t=Gh(t.current,null),Rs=No=e,Vr=0,UE=null,SL=Vx=gg=0,Ki=zv=null,lp!==null){for(e=0;e<lp.length;e++)if(n=lp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}lp=null}return t}function rq(t,e){do{var n=Dr;try{if(dL(),qA.current=pI,fI){for(var r=hr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}fI=!1}if(pg=0,is=zr=hr=null,Fv=!1,DE=0,AL.current=null,n===null||n.return===null){Vr=1,UE=e,Dr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Rs,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=FB(o);if(f!==null){f.flags&=-257,jB(f,o,a,i,e),f.mode&1&&BB(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){BB(i,l,e),TL();break e}c=Error(Ee(426))}}else if(ir&&a.mode&1){var y=FB(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),jB(y,o,a,i,e),lL(r0(c,a));break e}}i=c=r0(c,a),Vr!==4&&(Vr=2),zv===null?zv=[i]:zv.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=FG(i,c,e);kB(i,m);break e;case 1:a=c;var w=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Wh===null||!Wh.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=jG(i,a,e);kB(i,A);break e}}i=i.return}while(i!==null)}oq(n)}catch(C){e=C,Dr===n&&n!==null&&(Dr=n=n.return);continue}break}while(!0)}function sq(){var t=gI.current;return gI.current=pI,t===null?pI:t}function TL(){(Vr===0||Vr===3||Vr===2)&&(Vr=4),ps===null||!(gg&268435455)&&!(Vx&268435455)||Kd(ps,Rs)}function wI(t,e){var n=sn;sn|=2;var r=sq();(ps!==t||Rs!==e)&&(uu=null,Zp(t,e));do try{yle();break}catch(s){rq(t,s)}while(!0);if(dL(),sn=n,gI.current=r,Dr!==null)throw Error(Ee(261));return ps=null,Rs=0,Vr}function yle(){for(;Dr!==null;)iq(Dr)}function wle(){for(;Dr!==null&&!Wae();)iq(Dr)}function iq(t){var e=cq(t.alternate,t,No);t.memoizedProps=t.pendingProps,e===null?oq(t):Dr=e,AL.current=null}function oq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dle(n,e),n!==null){n.flags&=32767,Dr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vr=6,Dr=null;return}}else if(n=ule(n,e,No),n!==null){Dr=n;return}if(e=e.sibling,e!==null){Dr=e;return}Dr=e=t}while(e!==null);Vr===0&&(Vr=5)}function zf(t,e,n){var r=An,s=_a.transition;try{_a.transition=null,An=1,ble(t,e,n,r)}finally{_a.transition=s,An=r}return null}function ble(t,e,n,r){do Uy();while(Ih!==null);if(sn&6)throw Error(Ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Xae(t,i),t===ps&&(Dr=ps=null,Rs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$1||($1=!0,lq(XS,function(){return Uy(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=_a.transition,_a.transition=null;var o=An;An=1;var a=sn;sn|=4,AL.current=null,fle(t,n),eq(n,t),Bce(k2),tI=!!O2,k2=O2=null,t.current=n,ple(n),Hae(),sn=a,An=o,_a.transition=i}else t.current=n;if($1&&($1=!1,Ih=t,yI=s),i=t.pendingLanes,i===0&&(Wh=null),Vae(n.stateNode),ro(t,xr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(mI)throw mI=!1,t=X2,X2=null,t;return yI&1&&t.tag!==0&&Uy(),i=t.pendingLanes,i&1?t===ek?Wv++:(Wv=0,ek=t):Wv=0,Cf(),null}function Uy(){if(Ih!==null){var t=FH(yI),e=_a.transition,n=An;try{if(_a.transition=null,An=16>t?16:t,Ih===null)var r=!1;else{if(t=Ih,Ih=null,yI=0,sn&6)throw Error(Ee(331));var s=sn;for(sn|=4,Ke=t.current;Ke!==null;){var i=Ke,o=i.child;if(Ke.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ke=l;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:jv(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ke=d;else for(;Ke!==null;){u=Ke;var h=u.sibling,f=u.return;if(JG(u),u===l){Ke=null;break}if(h!==null){h.return=f,Ke=h;break}Ke=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ke=o;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:jv(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,Ke=m;break e}Ke=i.return}}var w=t.current;for(Ke=w;Ke!==null;){o=Ke;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ke=v;else e:for(o=w;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qx(9,a)}}catch(C){br(a,a.return,C)}if(a===o){Ke=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ke=A;break e}Ke=a.return}}if(sn=s,Cf(),Cl&&typeof Cl.onPostCommitFiberRoot=="function")try{Cl.onPostCommitFiberRoot($x,t)}catch{}r=!0}return r}finally{An=n,_a.transition=e}}return!1}function e6(t,e,n){e=r0(n,e),e=FG(t,e,1),t=zh(t,e,1),e=bi(),t!==null&&(vC(t,1,e),ro(t,e))}function br(t,e,n){if(t.tag===3)e6(t,t,n);else for(;e!==null;){if(e.tag===3){e6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wh===null||!Wh.has(r))){t=r0(n,t),t=jG(e,t,1),e=zh(e,t,1),t=bi(),e!==null&&(vC(e,1,t),ro(e,t));break}}e=e.return}}function vle(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bi(),t.pingedLanes|=t.suspendedLanes&n,ps===t&&(Rs&n)===n&&(Vr===4||Vr===3&&(Rs&130023424)===Rs&&500>xr()-IL?Zp(t,0):SL|=n),ro(t,e)}function aq(t,e){e===0&&(t.mode&1?(e=N1,N1<<=1,!(N1&130023424)&&(N1=4194304)):e=1);var n=bi();t=Xu(t,e),t!==null&&(vC(t,e,n),ro(t,n))}function Ele(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),aq(t,n)}function _le(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),aq(t,n)}var cq;cq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||to.current)Zi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zi=!1,lle(t,e,n);Zi=!!(t.flags&131072)}else Zi=!1,ir&&e.flags&1048576&&hG(e,cI,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;KA(t,e),t=e.pendingProps;var s=Xw(e,Zs.current);My(e,n),s=bL(null,e,r,t,s,n);var i=vL();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,no(r)?(i=!0,oI(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pL(e),s.updater=Gx,e.stateNode=s,s._reactInternals=e,z2(e,r,t,n),e=G2(null,e,r,!0,i,n)):(e.tag=0,ir&&i&&aL(e),ci(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(KA(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Ale(r),t=Ja(r,t),s){case 0:e=H2(null,e,r,t,n);break e;case 1:e=HB(null,e,r,t,n);break e;case 11:e=zB(null,e,r,t,n);break e;case 14:e=WB(null,e,r,Ja(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ja(r,s),H2(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ja(r,s),HB(t,e,r,s,n);case 3:e:{if(GG(e),t===null)throw Error(Ee(387));r=e.pendingProps,i=e.memoizedState,s=i.element,wG(t,e),dI(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=r0(Error(Ee(423)),e),e=GB(t,e,r,n,s);break e}else if(r!==s){s=r0(Error(Ee(424)),e),e=GB(t,e,r,n,s);break e}else for(ko=jh(e.stateNode.containerInfo.firstChild),Mo=e,ir=!0,cc=null,n=mG(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(e0(),r===s){e=ed(t,e,n);break e}ci(t,e,r,n)}e=e.child}return e;case 5:return bG(e),t===null&&B2(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,D2(r,s)?o=null:i!==null&&D2(r,i)&&(e.flags|=32),HG(t,e),ci(t,e,o,n),e.child;case 6:return t===null&&B2(e),null;case 13:return qG(t,e,n);case 4:return gL(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=t0(e,null,r,n):ci(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ja(r,s),zB(t,e,r,s,n);case 7:return ci(t,e,e.pendingProps,n),e.child;case 8:return ci(t,e,e.pendingProps.children,n),e.child;case 12:return ci(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Kn(lI,r._currentValue),r._currentValue=o,i!==null)if(Sc(i.value,o)){if(i.children===s.children&&!to.current){e=ed(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Fu(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),F2(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),F2(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ci(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,My(e,n),s=Ca(s),r=r(s),e.flags|=1,ci(t,e,r,n),e.child;case 14:return r=e.type,s=Ja(r,e.pendingProps),s=Ja(r.type,s),WB(t,e,r,s,n);case 15:return zG(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ja(r,s),KA(t,e),e.tag=1,no(r)?(t=!0,oI(e)):t=!1,My(e,n),BG(e,r,s),z2(e,r,s,n),G2(null,e,r,!0,t,n);case 19:return VG(t,e,n);case 22:return WG(t,e,n)}throw Error(Ee(156,e.tag))};function lq(t,e){return MH(t,e)}function Cle(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function va(t,e,n,r){return new Cle(t,e,n,r)}function RL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ale(t){if(typeof t=="function")return RL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Y5)return 11;if(t===Q5)return 14}return 2}function Gh(t,e){var n=t.alternate;return n===null?(n=va(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function JA(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")RL(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case cy:return Xp(n.children,s,i,e);case K5:o=8,s|=8;break;case h2:return t=va(12,n,e,s|2),t.elementType=h2,t.lanes=i,t;case f2:return t=va(13,n,e,s),t.elementType=f2,t.lanes=i,t;case p2:return t=va(19,n,e,s),t.elementType=p2,t.lanes=i,t;case bH:return Kx(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yH:o=10;break e;case wH:o=9;break e;case Y5:o=11;break e;case Q5:o=14;break e;case jd:o=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=va(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xp(t,e,n,r){return t=va(7,t,r,e),t.lanes=n,t}function Kx(t,e,n,r){return t=va(22,t,r,e),t.elementType=bH,t.lanes=n,t.stateNode={isHidden:!1},t}function ER(t,e,n){return t=va(6,t,null,e),t.lanes=n,t}function _R(t,e,n){return e=va(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Sle(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nR(0),this.expirationTimes=nR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nR(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function PL(t,e,n,r,s,i,o,a,c){return t=new Sle(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=va(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pL(i),t}function Ile(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ay,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function uq(t){if(!t)return lf;t=t._reactInternals;e:{if(Vg(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(no(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(no(n))return uG(t,n,e)}return e}function dq(t,e,n,r,s,i,o,a,c){return t=PL(n,r,!0,t,s,i,o,a,c),t.context=uq(null),n=t.current,r=bi(),s=Hh(n),i=Fu(r,s),i.callback=e??null,zh(n,i,s),t.current.lanes=s,vC(t,s,r),ro(t,r),t}function Yx(t,e,n,r){var s=e.current,i=bi(),o=Hh(s);return n=uq(n),e.context===null?e.context=n:e.pendingContext=n,e=Fu(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zh(s,e,o),t!==null&&(_c(t,s,o,i),GA(t,s,o)),o}function bI(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function t6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function OL(t,e){t6(t,e),(t=t.alternate)&&t6(t,e)}function xle(){return null}var hq=typeof reportError=="function"?reportError:function(t){console.error(t)};function kL(t){this._internalRoot=t}Qx.prototype.render=kL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));Yx(t,e,null,null)};Qx.prototype.unmount=kL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mg(function(){Yx(null,t,null,null)}),e[Zu]=null}};function Qx(t){this._internalRoot=t}Qx.prototype.unstable_scheduleHydration=function(t){if(t){var e=WH();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vd.length&&e!==0&&e<Vd[n].priority;n++);Vd.splice(n,0,t),n===0&&GH(t)}};function DL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function n6(){}function Nle(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=bI(o);i.call(l)}}var o=dq(e,r,t,0,null,!1,!1,"",n6);return t._reactRootContainer=o,t[Zu]=o.current,TE(t.nodeType===8?t.parentNode:t),mg(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=bI(c);a.call(l)}}var c=PL(t,0,!1,null,null,!1,!1,"",n6);return t._reactRootContainer=c,t[Zu]=c.current,TE(t.nodeType===8?t.parentNode:t),mg(function(){Yx(e,c,n,r)}),c}function Zx(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=bI(o);a.call(c)}}Yx(e,o,t,s)}else o=Nle(n,e,t,s,r);return bI(o)}jH=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=cv(e.pendingLanes);n!==0&&(X5(e,n|1),ro(e,xr()),!(sn&6)&&(s0=xr()+500,Cf()))}break;case 13:mg(function(){var r=Xu(t,1);if(r!==null){var s=bi();_c(r,t,1,s)}}),OL(t,1)}};eL=function(t){if(t.tag===13){var e=Xu(t,134217728);if(e!==null){var n=bi();_c(e,t,134217728,n)}OL(t,134217728)}};zH=function(t){if(t.tag===13){var e=Hh(t),n=Xu(t,e);if(n!==null){var r=bi();_c(n,t,e,r)}OL(t,e)}};WH=function(){return An};HH=function(t,e){var n=An;try{return An=t,e()}finally{An=n}};A2=function(t,e,n){switch(e){case"input":if(y2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=zx(r);if(!s)throw Error(Ee(90));EH(r),y2(r,s)}}}break;case"textarea":CH(t,n);break;case"select":e=n.value,e!=null&&Oy(t,!!n.multiple,e,!1)}};RH=xL;PH=mg;var Tle={usingClientEntryPoint:!1,Events:[_C,hy,zx,NH,TH,xL]},Ob={findFiberByHostInstance:cp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rle={bundleType:Ob.bundleType,version:Ob.version,rendererPackageName:Ob.rendererPackageName,rendererConfig:Ob.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ld.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DH(t),t===null?null:t.stateNode},findFiberByHostInstance:Ob.findFiberByHostInstance||xle,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var B1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!B1.isDisabled&&B1.supportsFiber)try{$x=B1.inject(Rle),Cl=B1}catch{}}zo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tle;zo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!DL(e))throw Error(Ee(200));return Ile(t,e,null,n)};zo.createRoot=function(t,e){if(!DL(t))throw Error(Ee(299));var n=!1,r="",s=hq;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=PL(t,1,!1,null,null,n,!1,r,s),t[Zu]=e.current,TE(t.nodeType===8?t.parentNode:t),new kL(e)};zo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=DH(e),t=t===null?null:t.stateNode,t};zo.flushSync=function(t){return mg(t)};zo.hydrate=function(t,e,n){if(!Jx(e))throw Error(Ee(200));return Zx(null,t,e,!0,n)};zo.hydrateRoot=function(t,e,n){if(!DL(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=hq;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dq(e,null,t,1,n??null,s,!1,i,o),t[Zu]=e.current,TE(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Qx(e)};zo.render=function(t,e,n){if(!Jx(e))throw Error(Ee(200));return Zx(null,t,e,!1,n)};zo.unmountComponentAtNode=function(t){if(!Jx(t))throw Error(Ee(40));return t._reactRootContainer?(mg(function(){Zx(null,null,t,!1,function(){t._reactRootContainer=null,t[Zu]=null})}),!0):!1};zo.unstable_batchedUpdates=xL;zo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jx(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return Zx(t,e,n,!1,r)};zo.version="18.3.1-next-f1338f8080-20240426";function fq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fq)}catch(t){console.error(t)}}fq(),fH.exports=zo;var LL=fH.exports,r6=LL;u2.createRoot=r6.createRoot,u2.hydrateRoot=r6.hydrateRoot;const pq="2.31.7";let kb={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${pq}`},ge=class rk extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof rk?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof rk&&n.cause.docsPath||n.docsPath,i=(a=kb.getDocsUrl)==null?void 0:a.call(kb,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...kb.version?[`Version: ${kb.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=pq}walk(e){return gq(this,e)}};function gq(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?gq(t.cause,e):e?null:t}let mq=class extends ge{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class Ple extends ge{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Ole extends ge{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let kle=class extends ge{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},yq=class extends ge{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},wq=class extends ge{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class s6 extends ge{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function V0(t,{dir:e,size:n=32}={}){return typeof t=="string"?qh(t,{dir:e,size:n}):Dle(t,{dir:e,size:n})}function qh(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new wq({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Dle(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new wq({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Ol(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Er(t){return Ol(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Sl(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const Lle=new TextEncoder;function K0(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ule(t,e):typeof t=="boolean"?Mle(t,e):Ol(t)?Sa(t,e):eg(t,e)}function Mle(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ra(n,{size:e.size}),V0(n,{size:e.size})):n}const Kl={zero:48,nine:57,A:65,F:70,a:97,f:102};function i6(t){if(t>=Kl.zero&&t<=Kl.nine)return t-Kl.zero;if(t>=Kl.A&&t<=Kl.F)return t-(Kl.A-10);if(t>=Kl.a&&t<=Kl.f)return t-(Kl.a-10)}function Sa(t,e={}){let n=t;e.size&&(Ra(n,{size:e.size}),n=V0(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=i6(r.charCodeAt(a++)),l=i6(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ge(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Ule(t,e){const n=nt(t,e);return Sa(n)}function eg(t,e={}){const n=Lle.encode(t);return typeof e.size=="number"?(Ra(n,{size:e.size}),V0(n,{dir:"right",size:e.size})):n}function Ra(t,{size:e}){if(Er(t)>e)throw new kle({givenSize:Er(t),maxSize:e})}function Fo(t,e={}){const{signed:n}=e;e.size&&Ra(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function $le(t,e={}){let n=t;if(e.size&&(Ra(n,{size:e.size}),n=Sl(n)),Sl(n)==="0x00")return!1;if(Sl(n)==="0x01")return!0;throw new Ole(n)}function Ic(t,e={}){return Number(Fo(t,e))}function bq(t,e={}){let n=Sa(t);return e.size&&(Ra(n,{size:e.size}),n=Sl(n,{dir:"right"})),new TextDecoder().decode(n)}const Ble=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ia(t,e={}){return typeof t=="number"||typeof t=="bigint"?nt(t,e):typeof t=="string"?i0(t,e):typeof t=="boolean"?vq(t,e):Jr(t,e)}function vq(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ra(n,{size:e.size}),V0(n,{size:e.size})):n}function Jr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Ble[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ra(r,{size:e.size}),V0(r,{dir:"right",size:e.size})):r}function nt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new mq({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?V0(a,{size:r}):a}const Fle=new TextEncoder;function i0(t,e={}){const n=Fle.encode(t);return Jr(n,e)}async function jle(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:nt(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function xc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new eue(t.type);return`${t.name}(${Xx(t.inputs,{includeName:e})})`}function Xx(t,{includeName:e=!1}={}){return t?t.map(n=>zle(n,{includeName:e})).join(e?", ":","):""}function zle(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Xx(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class Wle extends ge{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class o6 extends ge{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class Eq extends ge{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Xx(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class AC extends ge{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Hle extends ge{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Gle extends ge{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Er(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class qle extends ge{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Vle extends ge{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class a6 extends ge{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class _q extends ge{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Kle extends ge{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class Cq extends ge{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class c6 extends ge{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class o0 extends ge{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Aq extends ge{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Yle extends ge{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class Qle extends ge{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${xc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${xc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Jle=class extends ge{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class $E extends ge{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Xx(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class eN extends ge{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${xc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Zle extends ge{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Xle extends ge{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Sq=class extends ge{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class eue extends ge{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function xa(t){return typeof t[0]=="string"?Y0(t):tue(t)}function tue(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Y0(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let uf=class extends ge{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},tN=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const F1=BigInt(2**32-1),l6=BigInt(32);function nue(t,e=!1){return e?{h:Number(t&F1),l:Number(t>>l6&F1)}:{h:Number(t>>l6&F1)|0,l:Number(t&F1)|0}}function rue(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=nue(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const sue=(t,e,n)=>t<<n|e>>>32-n,iue=(t,e,n)=>e<<n|t>>>32-n,oue=(t,e,n)=>e<<n-32|t>>>64-n,aue=(t,e,n)=>t<<n-32|e>>>64-n,Em=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ML(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function BE(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Nc(t,...e){if(!ML(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function cue(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");BE(t.outputLen),BE(t.blockLen)}function a0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Iq(t,e){Nc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function lue(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function c0(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function CR(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Uc(t,e){return t<<32-e|t>>>e}const uue=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function due(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function hue(t){for(let e=0;e<t.length;e++)t[e]=due(t[e]);return t}const u6=uue?t=>t:hue,xq=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",fue=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function FE(t){if(Nc(t),xq)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=fue[t[n]];return e}const Yl={_0:48,_9:57,A:65,F:70,a:97,f:102};function d6(t){if(t>=Yl._0&&t<=Yl._9)return t-Yl._0;if(t>=Yl.A&&t<=Yl.F)return t-(Yl.A-10);if(t>=Yl.a&&t<=Yl.f)return t-(Yl.a-10)}function UL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(xq)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=d6(t.charCodeAt(i)),a=d6(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function pue(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function SC(t){return typeof t=="string"&&(t=pue(t)),Nc(t),t}function dp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Nc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let $L=class{};function Nq(t){const e=r=>t().update(SC(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function gue(t){const e=(r,s)=>t(s).update(SC(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function mue(t=32){if(Em&&typeof Em.getRandomValues=="function")return Em.getRandomValues(new Uint8Array(t));if(Em&&typeof Em.randomBytes=="function")return Uint8Array.from(Em.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const yue=BigInt(0),Db=BigInt(1),wue=BigInt(2),bue=BigInt(7),vue=BigInt(256),Eue=BigInt(113),Tq=[],Rq=[],Pq=[];for(let t=0,e=Db,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Tq.push(2*(5*r+n)),Rq.push((t+1)*(t+2)/2%64);let s=yue;for(let i=0;i<7;i++)e=(e<<Db^(e>>bue)*Eue)%vue,e&wue&&(s^=Db<<(Db<<BigInt(i))-Db);Pq.push(s)}const Oq=rue(Pq,!0),_ue=Oq[0],Cue=Oq[1],h6=(t,e,n)=>n>32?oue(t,e,n):sue(t,e,n),f6=(t,e,n)=>n>32?aue(t,e,n):iue(t,e,n);function kq(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=h6(l,u,1)^n[a],h=f6(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Rq[o],c=h6(s,i,a),l=f6(s,i,a),u=Tq[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=_ue[r],t[1]^=Cue[r]}c0(n)}let BL=class Dq extends $L{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,BE(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=lue(this.state)}clone(){return this._cloneInto()}keccak(){u6(this.state32),kq(this.state32,this.rounds),u6(this.state32),this.posOut=0,this.pos=0}update(e){a0(this),e=SC(e),Nc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){a0(this,!1),Nc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return BE(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Iq(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,c0(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Dq(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Af=(t,e,n)=>Nq(()=>new BL(e,t,n)),Aue=Af(6,144,224/8),Sue=Af(6,136,256/8),Iue=Af(6,104,384/8),xue=Af(6,72,512/8),Nue=Af(1,144,224/8),FL=Af(1,136,256/8),Tue=Af(1,104,384/8),Rue=Af(1,72,512/8),Lq=(t,e,n)=>gue((r={})=>new BL(e,t,r.dkLen===void 0?n:r.dkLen,!0)),Pue=Lq(31,168,128/8),Oue=Lq(31,136,256/8),GGe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:BL,keccakP:kq,keccak_224:Nue,keccak_256:FL,keccak_384:Tue,keccak_512:Rue,sha3_224:Aue,sha3_256:Sue,sha3_384:Iue,sha3_512:xue,shake128:Pue,shake256:Oue},Symbol.toStringTag,{value:"Module"}));function Ts(t,e){const n=e||"hex",r=FL(Ol(t,{strict:!1})?K0(t):t);return n==="bytes"?r:Ia(r)}const AR=new tN(8192);function IC(t,e){if(AR.has(`${t}.${e}`))return AR.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Ts(eg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return AR.set(`${t}.${e}`,i),i}function Mu(t,e){if(!Na(t,{strict:!1}))throw new uf({address:t});return IC(t,e)}const kue=/^0x[a-fA-F0-9]{40}$/,SR=new tN(8192);function Na(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(SR.has(r))return SR.get(r);const s=kue.test(t)?t.toLowerCase()===t?!0:n?IC(t)===t:!0:!1;return SR.set(r,s),s}function l0(t,e,n,{strict:r}={}){return Ol(t,{strict:!1})?vI(t,e,n,{strict:r}):$q(t,e,n,{strict:r})}function Mq(t,e){if(typeof e=="number"&&e>0&&e>Er(t)-1)throw new yq({offset:e,position:"start",size:Er(t)})}function Uq(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Er(t)!==n-e)throw new yq({offset:n,position:"end",size:Er(t)})}function $q(t,e,n,{strict:r}={}){Mq(t,e);const s=t.slice(e,n);return r&&Uq(s,e,n),s}function vI(t,e,n,{strict:r}={}){Mq(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&Uq(s,e,n),s}const Due=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Bq=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Sf(t,e){if(t.length!==e.length)throw new qle({expectedLength:t.length,givenLength:e.length});const n=Lue({params:t,values:e}),r=zL(n);return r.length===0?"0x":r}function Lue({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(jL({param:t[r],value:e[r]}));return n}function jL({param:t,value:e}){const n=WL(t.type);if(n){const[r,s]=n;return Uue(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return zue(e,{param:t});if(t.type==="address")return Mue(e);if(t.type==="bool")return Bue(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Bq.exec(t.type)??[];return Fue(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return $ue(e,{param:t});if(t.type==="string")return jue(e);throw new Zle(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function zL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Er(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(nt(e+s,{size:32})),r.push(a),s+=Er(a)):n.push(a)}return xa([...n,...r])}function Mue(t){if(!Na(t))throw new uf({address:t});return{dynamic:!1,encoded:qh(t.toLowerCase())}}function Uue(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new Sq(t);if(!r&&t.length!==e)throw new Hle({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=jL({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=zL(i);if(r){const a=nt(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?xa([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:xa(i.map(({encoded:o})=>o))}}function $ue(t,{param:e}){const[,n]=e.type.split("bytes"),r=Er(t);if(!n){let s=t;return r%32!==0&&(s=qh(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:xa([qh(nt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Gle({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:qh(t,{dir:"right"})}}function Bue(t){if(typeof t!="boolean")throw new ge(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:qh(vq(t))}}function Fue(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new mq({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:nt(t,{size:32,signed:e})}}function jue(t){const e=i0(t),n=Math.ceil(Er(e)/32),r=[];for(let s=0;s<n;s++)r.push(qh(l0(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:xa([qh(nt(Er(e),{size:32})),...r])}}function zue(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=jL({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?zL(r):xa(r.map(({encoded:s})=>s))}}function WL(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const IR="/docs/contract/encodeDeployData";function nN(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new Wle({docsPath:IR});if(!("inputs"in s))throw new o6({docsPath:IR});if(!s.inputs||s.inputs.length===0)throw new o6({docsPath:IR});const i=Sf(s.inputs,n);return Y0([r,i])}function Cr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Kg extends ge{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class ZA extends ge{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function Wue(t){const e=Ts(`0x${t.substring(4)}`).substring(26);return IC(`0x${e}`)}const Hue="modulepreload",Gue=function(t){return"/"+t},p6={},Ks=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Gue(c),c in p6)return;p6[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Hue,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function que({hash:t,signature:e}){const n=Ol(t)?t:Ia(t),{secp256k1:r}=await Ks(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>lme);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=g6(f);return new r.Signature(Fo(l),Fo(u)).addRecoveryBit(p)}const o=Ol(e)?e:Ia(e);if(Er(o)!==65)throw new Error("invalid signature length");const a=Ic(`0x${o.slice(130)}`),c=g6(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function g6(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Fq({hash:t,signature:e}){return Wue(await que({hash:t,signature:e}))}class m6 extends ge{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class jq extends ge{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Vue extends ge{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Kue={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Vue({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new jq({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new m6({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new m6({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function HL(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(Kue);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function Yue(t,e="hex"){const n=zq(t),r=HL(new Uint8Array(n.length));return n.encode(r),e==="hex"?Jr(r.bytes):r.bytes}function zq(t){return Array.isArray(t)?Que(t.map(e=>zq(e))):Jue(t)}function Que(t){const e=t.reduce((s,i)=>s+i.length,0),n=Wq(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function Jue(t){const e=typeof t=="string"?Sa(t):t,n=Wq(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function Wq(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ge("Length is too large.")}function Zue(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Ts(Y0(["0x05",Yue([e?nt(e):"0x",s,n?nt(n):"0x"])]));return r==="bytes"?Sa(i):i}async function Hq(t){const{authorization:e,signature:n}=t;return Fq({hash:Zue(e),signature:n??e})}class sk extends ge{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Xue extends ge{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class ede extends ge{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class Gq extends ge{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function qq({chain:t,currentChainId:e}){if(!t)throw new ede;if(e!==t.id)throw new Xue({chain:t,currentChainId:e})}const tde={gwei:9,wei:18},nde={ether:-9,wei:9},rde={ether:-18,gwei:-9};function Yg(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function so(t,e="wei"){return Yg(t,nde[e])}class hp extends ge{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(hp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class EI extends ge{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${so(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(EI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class ik extends ge{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${so(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(ik,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class ok extends ge{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(ok,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class ak extends ge{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(ak,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class ck extends ge{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(ck,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class lk extends ge{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(lk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class uk extends ge{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(uk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class dk extends ge{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(dk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class hk extends ge{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(hk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class _I extends ge{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${so(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${so(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(_I,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class xC extends ge{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function GL(t,e="wei"){return Yg(t,tde[e])}function NC(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class sde extends ge{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class ide extends ge{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",NC(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class ode extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=NC({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${GL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${so(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${so(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${so(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Vq extends ge{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class Kq extends ge{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class ade extends ge{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Yr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),cde=t=>t,qL=t=>t;class Hv extends ge{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${qL(o)}`,e&&`Request body: ${Yr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class VL extends ge{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${qL(r)}`,`Request body: ${Yr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class y6 extends ge{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${qL(n)}`,`Request body: ${Yr(e)}`],name:"TimeoutError"})}}const lde=-1;class uo extends ge{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof VL?e.code:n??lde}}class Ho extends uo{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class jE extends uo{constructor(e){super(e,{code:jE.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(jE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class zE extends uo{constructor(e){super(e,{code:zE.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(zE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class WE extends uo{constructor(e,{method:n}={}){super(e,{code:WE.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(WE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class HE extends uo{constructor(e){super(e,{code:HE.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(HE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class yg extends uo{constructor(e){super(e,{code:yg.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(yg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class wg extends uo{constructor(e){super(e,{code:wg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(wg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class GE extends uo{constructor(e){super(e,{code:GE.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(GE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Vh extends uo{constructor(e){super(e,{code:Vh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Vh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class u0 extends uo{constructor(e){super(e,{code:u0.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(u0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class fp extends uo{constructor(e,{method:n}={}){super(e,{code:fp.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(fp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class d0 extends uo{constructor(e){super(e,{code:d0.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(d0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class qE extends uo{constructor(e){super(e,{code:qE.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(qE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class jr extends Ho{constructor(e){super(e,{code:jr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(jr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class VE extends Ho{constructor(e){super(e,{code:VE.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(VE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class KE extends Ho{constructor(e,{method:n}={}){super(e,{code:KE.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(KE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class YE extends Ho{constructor(e){super(e,{code:YE.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(YE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class QE extends Ho{constructor(e){super(e,{code:QE.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(QE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class kl extends Ho{constructor(e){super(e,{code:kl.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(kl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class h0 extends Ho{constructor(e){super(e,{code:h0.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(h0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class JE extends Ho{constructor(e){super(e,{code:JE.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(JE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class ZE extends Ho{constructor(e){super(e,{code:ZE.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(ZE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class XE extends Ho{constructor(e){super(e,{code:XE.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(XE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class e_ extends Ho{constructor(e){super(e,{code:e_.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(e_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class t_ extends Ho{constructor(e){super(e,{code:t_.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(t_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class f0 extends Ho{constructor(e){super(e,{code:f0.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(f0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class ude extends uo{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function rN(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ge?t.walk(s=>(s==null?void 0:s.code)===hp.code):t;return r instanceof ge?new hp({cause:t,message:r.details}):hp.nodeMessage.test(n)?new hp({cause:t,message:t.details}):EI.nodeMessage.test(n)?new EI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):ik.nodeMessage.test(n)?new ik({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):ok.nodeMessage.test(n)?new ok({cause:t,nonce:e==null?void 0:e.nonce}):ak.nodeMessage.test(n)?new ak({cause:t,nonce:e==null?void 0:e.nonce}):ck.nodeMessage.test(n)?new ck({cause:t,nonce:e==null?void 0:e.nonce}):lk.nodeMessage.test(n)?new lk({cause:t}):uk.nodeMessage.test(n)?new uk({cause:t,gas:e==null?void 0:e.gas}):dk.nodeMessage.test(n)?new dk({cause:t,gas:e==null?void 0:e.gas}):hk.nodeMessage.test(n)?new hk({cause:t}):_I.nodeMessage.test(n)?new _I({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new xC({cause:t})}function Yq(t,{docsPath:e,...n}){const r=(()=>{const s=rN(t,n);return s instanceof xC?t:s})();return new ode(r,{docsPath:e,...n})}function sN(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const dde={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Q0(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=hde(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Jr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=nt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=nt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=nt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=nt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=nt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=nt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=dde[t.type]),typeof t.value<"u"&&(e.value=nt(t.value)),e}function hde(t){return t.map(e=>({address:e.address,r:e.r?nt(BigInt(e.r)):e.r,s:e.s?nt(BigInt(e.s)):e.s,chainId:nt(e.chainId),nonce:nt(e.nonce),...typeof e.yParity<"u"?{yParity:nt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:nt(e.v)}:{}}))}function lt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const fde=2n**256n-1n;function Qg(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Cr(e):void 0;if(o&&!Na(o.address))throw new uf({address:o.address});if(i&&!Na(i))throw new uf({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new sde;if(r&&r>fde)throw new EI({maxFeePerGas:r});if(s&&r&&s>r)throw new _I({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function J0(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Ic(e)}class pde extends ge{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class KL extends ge{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class gde extends ge{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${so(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Qq extends ge{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Jq={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Zq(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Ic(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Ic(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?Jq[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=mde(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function mde(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function Xq(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:Zq(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function El(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?nt(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new Qq({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||Xq)(c)}async function YL(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function yde(t,e){return eV(t,e)}async function eV(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await lt(t,El,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Fo(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):lt(t,El,"getBlock")({}),lt(t,YL,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new KL;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function wde(t,e){return fk(t,e)}async function fk(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new pde;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await lt(t,El,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new KL;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await eV(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await lt(t,YL,"getGasPrice")({}))}}class bde extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=NC({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${GL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${so(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${so(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${so(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function vde(t,{docsPath:e,...n}){const r=(()=>{const s=rN(t,n);return s instanceof xC?t:s})();return new bde(r,{docsPath:e,...n})}class Ede extends ge{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class _de extends ge{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function w6(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function Cde(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=w6(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=w6(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function b6(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new s6({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new s6({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Ade(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=nt(e)),n!==void 0&&(o.nonce=nt(n)),r!==void 0&&(o.state=b6(r)),s!==void 0){if(o.state)throw new _de;o.stateDiff=b6(s)}return o}function QL(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Na(n,{strict:!1}))throw new uf({address:n});if(e[n])throw new Ede({address:n});e[n]=Ade(r)}return e}async function JL(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?nt(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function iN(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Cr(n):void 0;try{let W=function(N){const{block:M,request:P,rpcStateOverride:L}=N;return t.request({method:"eth_estimateGas",params:L?[P,M??"latest",L]:M?[P,M]:[P]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,value:A,stateOverride:C,...S}=await TC(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?nt(d):void 0)||h,I=QL(C),k=await(async()=>{if(S.to)return S.to;if(c&&c.length>0)return await Hq({authorization:c[0]}).catch(()=>{throw new ge("`to` is required. Could not infer from `authorizationList`")})})();Qg(e);const O=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,G=(O||Q0)({...sN(S,{format:O}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,to:k,value:A});let R=BigInt(await W({block:T,request:G,rpcStateOverride:I}));if(c){const N=await JL(t,{address:G.from}),M=await Promise.all(c.map(async P=>{const{address:L}=P,j=await W({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:L,value:nt(N)},rpcStateOverride:I}).catch(()=>100000n);return 2n*BigInt(j)}));R+=M.reduce((P,L)=>P+L,0n)}return R}catch(a){throw vde(a,{...e,account:r,chain:t.chain})}}async function ZL(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?nt(r):n]},{dedupe:!!r});return Ic(s)}function tV(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Sa(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Jr(i))}function nV(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Sa(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Sa(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Jr(o))}function Sde(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Ide(t,e,n){return t&e^~t&n}function xde(t,e,n){return t&e^t&n^e&n}class Nde extends $L{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=CR(this.buffer)}update(e){a0(this),e=SC(e),Nc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=CR(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){a0(this),Iq(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,c0(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Sde(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=CR(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const wd=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Tde=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bd=new Uint32Array(64);let Rde=class extends Nde{constructor(e=32){super(64,e,8,!1),this.A=wd[0]|0,this.B=wd[1]|0,this.C=wd[2]|0,this.D=wd[3]|0,this.E=wd[4]|0,this.F=wd[5]|0,this.G=wd[6]|0,this.H=wd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)bd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=bd[d-15],f=bd[d-2],p=Uc(h,7)^Uc(h,18)^h>>>3,g=Uc(f,17)^Uc(f,19)^f>>>10;bd[d]=g+bd[d-7]+p+bd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Uc(a,6)^Uc(a,11)^Uc(a,25),f=u+h+Ide(a,c,l)+Tde[d]+bd[d]|0,g=(Uc(r,2)^Uc(r,13)^Uc(r,22))+xde(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){c0(bd)}destroy(){this.set(0,0,0,0,0,0,0,0),c0(this.buffer)}};const rV=Nq(()=>new Rde),Pde=rV;function Ode(t,e){return Pde(Ol(t,{strict:!1})?K0(t):t)}function kde(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Ode(e);return s.set([n],0),r==="bytes"?s:Jr(s)}function Dde(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(kde({commitment:i,to:r,version:n}));return s}const v6=6,sV=32,XL=4096,iV=sV*XL,E6=iV*v6-1-1*XL*v6;class Lde extends ge{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Mde extends ge{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Ude(t){const e=typeof t.data=="string"?Sa(t.data):t.data,n=Er(e);if(!n)throw new Mde;if(n>E6)throw new Lde({maxSize:E6,size:n});const r=[];let s=!0,i=0;for(;s;){const o=HL(new Uint8Array(iV));let a=0;for(;a<XL;){const c=e.slice(i,i+(sV-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Jr(o.bytes))}function $de(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Ude({data:e}),i=t.commitments??tV({blobs:s,kzg:n,to:r}),o=t.proofs??nV({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Bde(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new ide({transaction:t})}const oV=["blobVersionedHashes","chainId","fees","gas","nonce","type"],_6=new Map;async function TC(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=oV,type:u}=e,d=n&&Cr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await lt(t,El,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await lt(t,J0,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const m=await y();h.nonce=await c.consume({address:d.address,chainId:m,client:t})}else h.nonce=await lt(t,ZL,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const m=tV({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const w=Dde({commitments:m,to:"hex"});h.blobVersionedHashes=w}if(l.includes("sidecars")){const w=nV({blobs:r,commitments:m,kzg:o}),v=$de({blobs:r,commitments:m,proofs:w,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=Bde(h)}catch{let m=_6.get(t.uid);if(typeof m>"u"){const w=await p();m=typeof(w==null?void 0:w.baseFeePerGas)=="bigint",_6.set(t.uid,m)}h.type=m?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const m=await p(),{maxFeePerGas:w,maxPriorityFeePerGas:v}=await fk(t,{block:m,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new gde({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=w}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new KL;if(typeof e.gasPrice>"u"){const m=await p(),{gasPrice:w}=await fk(t,{block:m,chain:s,request:h,type:"legacy"});h.gasPrice=w}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await lt(t,iN,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Qg(h),delete h.parameters,h}async function eM(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const xR=new tN(128);async function RC(t,e){var w,v,A,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...y}=e;if(typeof n>"u")throw new Kg({docsPath:"/docs/actions/wallet/sendTransaction"});const m=n?Cr(n):null;try{Qg(e);const S=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await Hq({authorization:i[0]}).catch(()=>{throw new ge("`to` is required. Could not infer from `authorizationList`.")})})();if((m==null?void 0:m.type)==="json-rpc"||m===null){let x;r!==null&&(x=await lt(t,J0,"getChainId")({}),qq({currentChainId:x,chain:r}));const T=(A=(v=(w=t.chain)==null?void 0:w.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,k=(T||Q0)({...sN(y,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:m==null?void 0:m.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:S,type:p,value:g}),O=xR.get(t.uid),B=O?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:B,params:[k]},{retryCount:0})}catch(G){if(O===!1)throw G;const W=G;if(W.name==="InvalidInputRpcError"||W.name==="InvalidParamsRpcError"||W.name==="MethodNotFoundRpcError"||W.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(R=>(xR.set(t.uid,!0),R)).catch(R=>{const N=R;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(xR.set(t.uid,!1),W):N});throw W}}if((m==null?void 0:m.type)==="local"){const x=await lt(t,TC,"prepareTransactionRequest")({account:m,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:m.nonceManager,parameters:[...oV,"sidecars"],type:p,value:g,...y,to:S}),T=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,I=await m.signTransaction(x,{serializer:T});return await lt(t,eM,"sendRawTransaction")({serializedTransaction:I})}throw(m==null?void 0:m.type)==="smart"?new ZA({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ZA({docsPath:"/docs/actions/wallet/sendTransaction",type:m==null?void 0:m.type})}catch(S){throw S instanceof ZA?S:Yq(S,{...e,account:m,chain:e.chain||void 0})}}function Fde(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=nN({abi:n,args:r,bytecode:s});return RC(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const pk=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],gk=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],aV=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],cV=[...aV,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],jde=[...aV,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],C6=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],A6=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],S6=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function zde(t,e={}){typeof e.size<"u"&&Ra(t,{size:e.size});const n=Jr(t,e);return Fo(n,e)}function Wde(t,e={}){let n=t;if(typeof e.size<"u"&&(Ra(n,{size:e.size}),n=Sl(n)),n.length>1||n[0]>1)throw new Ple(n);return!!n[0]}function ju(t,e={}){typeof e.size<"u"&&Ra(t,{size:e.size});const n=Jr(t,e);return Ic(n,e)}function Hde(t,e={}){let n=t;return typeof e.size<"u"&&(Ra(n,{size:e.size}),n=Sl(n,{dir:"right"})),new TextDecoder().decode(n)}function PC(t,e){const n=typeof e=="string"?Sa(e):e,r=HL(n);if(Er(n)===0&&t.length>0)throw new AC;if(Er(e)&&Er(e)<32)throw new Eq({data:typeof e=="string"?e:Jr(e),params:t,size:Er(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=$y(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function $y(t,e,{staticPosition:n}){const r=WL(e.type);if(r){const[s,i]=r;return qde(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Qde(t,e,{staticPosition:n});if(e.type==="address")return Gde(t);if(e.type==="bool")return Vde(t);if(e.type.startsWith("bytes"))return Kde(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Yde(t,e);if(e.type==="string")return Jde(t,{staticPosition:n});throw new Xle(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const I6=32,mk=32;function Gde(t){const e=t.readBytes(32);return[IC(Jr($q(e,-20))),32]}function qde(t,e,{length:n,staticPosition:r}){if(!n){const o=ju(t.readBytes(mk)),a=r+o,c=a+I6;t.setPosition(a);const l=ju(t.readBytes(I6)),u=n_(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=$y(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(n_(e)){const o=ju(t.readBytes(mk)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=$y(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=$y(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Vde(t){return[Wde(t.readBytes(32),{size:32}),32]}function Kde(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=ju(t.readBytes(32));t.setPosition(n+o);const a=ju(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Jr(c),32]}return[Jr(t.readBytes(Number.parseInt(s),32)),32]}function Yde(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?zde(s,{signed:n}):ju(s,{signed:n}),32]}function Qde(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(n_(e)){const o=ju(t.readBytes(mk)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=$y(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=$y(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Jde(t,{staticPosition:e}){const n=ju(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ju(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Hde(Sl(i));return t.setPosition(e+32),[o,32]}function n_(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(n_);const n=WL(t.type);return!!(n&&n_({...t,type:n[1]}))}const Zde=t=>Ts(K0(t));function Xde(t){return Zde(t)}const ehe="1.0.8";let Go=class yk extends Error{constructor(e,n={}){var o;const r=n.cause instanceof yk?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof yk&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${ehe}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function ud(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const lV=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,uV=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,dV=/^\(.+?\).*?$/,x6=/^tuple(?<array>(\[(\d*)\])*)$/;function wk(t){let e=t.type;if(x6.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=wk(i),s<n-1&&(e+=", ")}const r=ud(x6,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,wk({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Lb(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=wk(s),r!==n-1&&(e+=", ")}return e}function CI(t){var e;return t.type==="function"?`function ${t.name}(${Lb(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Lb(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Lb(t.inputs)})`:t.type==="error"?`error ${t.name}(${Lb(t.inputs)})`:t.type==="constructor"?`constructor(${Lb(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const hV=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function the(t){return hV.test(t)}function nhe(t){return ud(hV,t)}const fV=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function rhe(t){return fV.test(t)}function she(t){return ud(fV,t)}const pV=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function ihe(t){return pV.test(t)}function ohe(t){return ud(pV,t)}const gV=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function tM(t){return gV.test(t)}function ahe(t){return ud(gV,t)}const mV=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function che(t){return mV.test(t)}function lhe(t){return ud(mV,t)}const yV=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function uhe(t){return yV.test(t)}function dhe(t){return ud(yV,t)}const hhe=/^receive\(\) external payable$/;function fhe(t){return hhe.test(t)}const phe=new Set(["indexed"]),bk=new Set(["calldata","memory","storage"]);class ghe extends Go{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class mhe extends Go{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class yhe extends Go{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class whe extends Go{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class bhe extends Go{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class vhe extends Go{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Ehe extends Go{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class _he extends Go{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Z0 extends Go{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Che extends Go{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Ahe extends Go{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class She extends Go{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Ihe extends Go{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function xhe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const NR=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function vk(t,e={}){if(ihe(t))return Nhe(t,e);if(rhe(t))return The(t,e);if(the(t))return Rhe(t,e);if(che(t))return Phe(t,e);if(uhe(t))return Ohe(t);if(fhe(t))return{type:"receive",stateMutability:"payable"};throw new Che({signature:t})}function Nhe(t,e={}){const n=ohe(t);if(!n)throw new Z0({signature:t,type:"function"});const r=fc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(bg(r[a],{modifiers:bk,structs:e,type:"function"}));const o=[];if(n.returns){const a=fc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(bg(a[l],{modifiers:bk,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function The(t,e={}){const n=she(t);if(!n)throw new Z0({signature:t,type:"event"});const r=fc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(bg(r[o],{modifiers:phe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Rhe(t,e={}){const n=nhe(t);if(!n)throw new Z0({signature:t,type:"error"});const r=fc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(bg(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Phe(t,e={}){const n=lhe(t);if(!n)throw new Z0({signature:t,type:"constructor"});const r=fc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(bg(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Ohe(t){const e=dhe(t);if(!e)throw new Z0({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const khe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Dhe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Lhe=/^u?int$/;function bg(t,e){var d,h;const n=xhe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(NR.has(n))return NR.get(n);const r=dV.test(t),s=ud(r?Dhe:khe,t);if(!s)throw new whe({param:t});if(s.name&&Uhe(s.name))throw new bhe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=fc(s.type),p=[],g=f.length;for(let y=0;y<g;y++)p.push(bg(f[y],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Lhe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!wV(c))throw new yhe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new vhe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(bk.has(s.modifier)&&!$he(c,!!s.array))throw new Ehe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return NR.set(n,u),u}function fc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?fc(a,[...e,n.trim()]):fc(a,e,`${n}${o}`,r);case"(":return fc(a,e,`${n}${o}`,r+1);case")":return fc(a,e,`${n}${o}`,r-1);default:return fc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new Ihe({current:n,depth:r});return e.push(n.trim()),e}function wV(t){return t==="address"||t==="bool"||t==="function"||t==="string"||lV.test(t)||uV.test(t)}const Mhe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Uhe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||lV.test(t)||uV.test(t)||Mhe.test(t)}function $he(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function bV(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!tM(a))continue;const c=ahe(a);if(!c)throw new Z0({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=bg(p,{type:"struct"});u.push(g)}if(!u.length)throw new Ahe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=vV(c,e)}return r}const Bhe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function vV(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(dV.test(o.type))r.push(o);else{const c=ud(Bhe,o.type);if(!(c!=null&&c.type))throw new _he({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new She({type:u});r.push({...o,type:`tuple${l??""}`,components:vV(e[u]??[],e,new Set([...n,u]))})}else if(wV(u))r.push(o);else throw new mhe({type:u})}}return r}function EV(t){const e=bV(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];tM(i)||n.push(vk(i,e))}return n}function N6(t){let e;if(typeof t=="string")e=vk(t);else{const n=bV(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!tM(i)){e=vk(i,n);break}}}if(!e)throw new ghe({signature:t});return e}function Fhe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ge("Unable to normalize signature.");return s}const jhe=t=>{const e=typeof t=="string"?t:CI(t);return Fhe(e)};function _V(t){return Xde(jhe(t))}const oN=_V,OC=t=>l0(_V(t),0,4);function Jg(t){const{abi:e,args:n=[],name:r}=t,s=Ol(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?OC(a)===r:a.type==="event"?oN(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?Ek(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=CV(a.inputs,o.inputs,n);if(l)throw new Qle({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function Ek(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Na(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Ek(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Ek(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function CV(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return CV(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Na(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Na(n[r],{strict:!1}):!1)return o}}const TR="/docs/contract/decodeFunctionResult";function Zg(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Jg({abi:e,args:n,name:r});if(!a)throw new o0(r,{docsPath:TR});i=a}if(i.type!=="function")throw new o0(void 0,{docsPath:TR});if(!i.outputs)throw new Aq(i.name,{docsPath:TR});const o=PC(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const T6="/docs/contract/encodeFunctionData";function zhe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Jg({abi:e,args:n,name:r});if(!i)throw new o0(r,{docsPath:T6});s=i}if(s.type!=="function")throw new o0(void 0,{docsPath:T6});return{abi:[s],functionName:OC(xc(s))}}function Pa(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:zhe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Sf(s.inputs,e??[]):void 0;return Y0([i,o??"0x"])}function X0({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new sk({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new sk({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const AV={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},SV={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Whe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Hhe(t){const{abi:e,data:n}=t,r=l0(n,0,4);if(r==="0x")throw new AC;const i=[...e||[],SV,Whe].find(o=>o.type==="error"&&r===OC(xc(o)));if(!i)throw new _q(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?PC(i.inputs,l0(n,4)):void 0,errorName:i.name}}function IV({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Yr(e[i]):e[i]}`).join(", ")})`}class xV extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var y;const p=n?Cr(n):void 0;let g=NC({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${GL(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${so(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${so(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${so(l)} gwei`,nonce:u});f&&(g+=`
${Cde(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class NV extends ge{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Jg({abi:n,args:r,name:o}),l=c?IV({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?xc(c,{includeName:!0}):void 0,d=NC({address:s&&cde(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class _k extends ge{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Hhe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=AV[f]}else{const f=u?xc(u,{includeName:!0}):void 0,p=u&&h?IV({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof _q&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class Ghe extends ge{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class qhe extends ge{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class aN extends ge{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function nM(t,e){var r,s,i,o,a,c;if(!(t instanceof ge))return!1;const n=t.walk(l=>l instanceof _k);return n instanceof _k?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===AV[50]):!1}function Vhe(t){const{abi:e,data:n}=t,r=l0(n,0,4),s=e.find(i=>i.type==="function"&&r===OC(xc(i)));if(!s)throw new Yle(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?PC(s.inputs,l0(n,4)):void 0}}const RR="/docs/contract/encodeErrorResult";function R6(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=Jg({abi:e,args:r,name:n});if(!c)throw new a6(n,{docsPath:RR});s=c}if(s.type!=="error")throw new a6(void 0,{docsPath:RR});const i=xc(s),o=OC(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Vle(s.name,{docsPath:RR});a=Sf(s.inputs,r)}return Y0([o,a])}const PR="/docs/contract/encodeFunctionResult";function Khe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=Jg({abi:e,name:n});if(!o)throw new o0(n,{docsPath:PR});s=o}if(s.type!=="function")throw new o0(void 0,{docsPath:PR});if(!s.outputs)throw new Aq(s.name,{docsPath:PR});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Sq(r)})();return Sf(s.outputs,i)}const rM="x-batch-gateway:true";async function Yhe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=Vhe({abi:gk,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(rM)?await Yhe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=Qhe(c)}})),Khe({abi:gk,functionName:"query",result:[s,i]})}function Qhe(t){return t.name==="HttpRequestError"&&t.status?R6({abi:gk,errorName:"HttpError",args:[t.status,t.shortMessage]}):R6({abi:[SV],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function TV(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Ol(e)?e:null}function XA(t){let e=new Uint8Array(32).fill(0);if(!t)return Jr(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=TV(n[r]),i=s?K0(s):Ts(eg(n[r]),"bytes");e=Ts(xa([e,i]),"bytes")}return Jr(e)}function Jhe(t){return`[${t.slice(2)}]`}function Zhe(t){const e=new Uint8Array(32).fill(0);return t?TV(t)||Ts(eg(t)):Jr(e)}function cN(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(eg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=eg(s[i]);o.byteLength>255&&(o=eg(Jhe(Zhe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Xhe=3;function vg(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof aN?t:t instanceof ge?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof AC?new Ghe({functionName:i}):[Xhe,yg.code].includes(c)&&(l||u||d||h)?new _k({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof VL?u:h??d}):t;return new NV(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sM=BigInt(0),Ck=BigInt(1);function AI(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function j1(t){const e=t.toString(16);return e.length&1?"0"+e:e}function RV(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?sM:BigInt("0x"+t)}function lN(t){return RV(FE(t))}function PV(t){return Nc(t),RV(FE(Uint8Array.from(t).reverse()))}function iM(t,e){return UL(t.toString(16).padStart(e*2,"0"))}function OV(t,e){return iM(t,e).reverse()}function ca(t,e,n){let r;if(typeof e=="string")try{r=UL(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(ML(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const OR=t=>typeof t=="bigint"&&sM<=t;function efe(t,e,n){return OR(t)&&OR(e)&&OR(n)&&e<=t&&t<n}function tfe(t,e,n,r){if(!efe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function nfe(t){let e;for(e=0;t>sM;t>>=Ck,e+=1);return e}const uN=t=>(Ck<<BigInt(t))-Ck;function rfe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return dp(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function oM(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function P6(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const sfe="0.1.1";function ife(){return sfe}let Pr=class Ak extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof Ak){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Ak&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${ife()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return kV(this,e)}};function kV(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?kV(t.cause,e):e?null:t}const ofe="#__bigint";function afe(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+ofe:s,n)}function cfe(t,e){if(k6(t)>e)throw new wfe({givenSize:k6(t),maxSize:e})}const Ql={zero:48,nine:57,A:65,F:70,a:97,f:102};function O6(t){if(t>=Ql.zero&&t<=Ql.nine)return t-Ql.zero;if(t>=Ql.A&&t<=Ql.F)return t-(Ql.A-10);if(t>=Ql.a&&t<=Ql.f)return t-(Ql.a-10)}function lfe(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new bfe({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function aM(t,e){if(Ta(t)>e)throw new Afe({givenSize:Ta(t),maxSize:e})}function ufe(t,e){if(typeof e=="number"&&e>0&&e>Ta(t)-1)throw new $V({offset:e,position:"start",size:Ta(t)})}function dfe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ta(t)!==n-e)throw new $V({offset:n,position:"end",size:Ta(t)})}function DV(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Sfe({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const hfe=new TextEncoder;function ffe(t){return t instanceof Uint8Array?t:typeof t=="string"?gfe(t):pfe(t)}function pfe(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function gfe(t,e={}){const{size:n}=e;let r=t;n&&(aM(t,n),r=_g(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=O6(s.charCodeAt(c++)),u=O6(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Pr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function mfe(t,e={}){const{size:n}=e,r=hfe.encode(t);return typeof n=="number"?(cfe(r,n),yfe(r,n)):r}function yfe(t,e){return lfe(t,{dir:"right",size:e})}function k6(t){return t.length}let wfe=class extends Pr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},bfe=class extends Pr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const vfe=new TextEncoder,Efe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _fe(t,e={}){const{strict:n=!1}=e;if(!t)throw new D6(t);if(typeof t!="string")throw new D6(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new L6(t);if(!t.startsWith("0x"))throw new L6(t)}function Dl(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function LV(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(aM(n,e.size),Eg(n,e.size)):n}function MV(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Efe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(aM(r,e.size),_g(r,e.size)):r}function di(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new UV({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Eg(c,r):c}function cM(t,e={}){return MV(vfe.encode(t),e)}function Eg(t,e){return DV(t,{dir:"left",size:e})}function _g(t,e){return DV(t,{dir:"right",size:e})}function lM(t,e,n,r={}){const{strict:s}=r;ufe(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&dfe(i,e,n),i}function Ta(t){return Math.ceil((t.length-2)/2)}function Cfe(t,e={}){const{strict:n=!1}=e;try{return _fe(t,{strict:n}),!0}catch{return!1}}let UV=class extends Pr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class D6 extends Pr{constructor(e){super(`Value \`${typeof e=="object"?afe(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class L6 extends Pr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Afe=class extends Pr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class $V extends Pr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Sfe=class extends Pr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Ife(t){return{address:t.address,amount:di(t.amount),index:di(t.index),validatorIndex:di(t.validatorIndex)}}function BV(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:di(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:di(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:di(t.gasLimit)},...typeof t.number=="bigint"&&{number:di(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:di(t.prevRandao)},...typeof t.time=="bigint"&&{time:di(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Ife)}}}const xfe="0x82ad56cb",FV="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Nfe="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Tfe="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function jV(t,{docsPath:e,...n}){const r=(()=>{const s=rN(t,n);return s instanceof xC?t:s})();return new xV(r,{docsPath:e,...n})}function uM(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const kR=new Map;function zV({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>kR.delete(e),a=()=>c().map(({args:u})=>u),c=()=>kR.get(e)||[],l=u=>kR.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=uM();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function kC(t,e){var G,W,R,N;const{account:n=t.account,authorizationList:r,batch:s=!!((G=t.batch)!=null&&G.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,to:A,value:C,stateOverride:S,...x}=e,T=n?Cr(n):void 0;if(u&&(h||f))throw new ge("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new ge("Cannot provide both `code` & `to` as parameters.");const I=u&&d,k=h&&f&&A&&d,O=I||k,B=I?Ofe({code:u,data:d}):k?kfe({data:d,factory:h,factoryData:f,to:A}):d;try{Qg(e);const P=(typeof i=="bigint"?nt(i):void 0)||o,L=l?BV(l):void 0,j=QL(S),q=(N=(R=(W=t.chain)==null?void 0:W.formatters)==null?void 0:R.transactionRequest)==null?void 0:N.format,le=(q||Q0)({...sN(x,{format:q}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:B,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:w,nonce:v,to:O?void 0:A,value:C});if(s&&Rfe({request:le})&&!j&&!L)try{return await Pfe(t,{...le,blockNumber:i,blockTag:o})}catch(ye){if(!(ye instanceof Gq)&&!(ye instanceof sk))throw ye}const oe=(()=>{const ye=[le,P];return j&&L?[...ye,j,L]:j?[...ye,j]:L?[...ye,{},L]:ye})(),se=await t.request({method:"eth_call",params:oe});return se==="0x"?{data:void 0}:{data:se}}catch(M){const P=Dfe(M),{offchainLookup:L,offchainLookupSignature:j}=await Ks(async()=>{const{offchainLookup:q,offchainLookupSignature:ne}=await import("./ccip-Hv-MgcYg.js");return{offchainLookup:q,offchainLookupSignature:ne}},[]);if(t.ccipRead!==!1&&(P==null?void 0:P.slice(0,10))===j&&A)return{data:await L(t,{data:P,to:A})};throw O&&(P==null?void 0:P.slice(0,10))==="0x101bb98d"?new qhe({factory:h}):jV(M,{...e,account:T,chain:t.chain})}}function Rfe({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(xfe)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Pfe(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new Gq;l=X0({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?nt(s):void 0)||i,{schedule:h}=zV({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(y){return y.reduce((w,{data:v})=>w+(v.length-2),0)>n*2},fn:async y=>{const m=y.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),w=Pa({abi:pk,args:[m],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:w,to:l},d]});return Zg({abi:pk,args:[m],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new aN({data:f});return f==="0x"?{data:void 0}:{data:f}}function Ofe(t){const{code:e,data:n}=t;return nN({abi:EV(["constructor(bytes, bytes)"]),bytecode:FV,args:[e,n]})}function kfe(t){const{data:e,factory:n,factoryData:r,to:s}=t;return nN({abi:EV(["constructor(address, bytes, address, bytes)"]),bytecode:Nfe,args:[s,e,n,r]})}function Dfe(t){var n;if(!(t instanceof ge))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Ll(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Pa({abi:n,args:s,functionName:i});try{const{data:c}=await lt(t,kC,"call")({...o,data:a,to:r});return Zg({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw vg(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Lfe(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return X0({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Pa({abi:A6,functionName:"addr",...s!=null?{args:[XA(i),BigInt(s)]}:{args:[XA(i)]}}),h={address:l,abi:cV,functionName:"resolve",args:[Ia(cN(i)),d,o??[rM]],blockNumber:n,blockTag:r},p=await lt(t,Ll,"readContract")(h);if(p[0]==="0x")return null;const g=Zg({abi:A6,args:s!=null?[XA(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Sl(g)==="0x00"?null:g}catch(d){if(a)throw d;if(nM(d,"resolve"))return null;throw d}}class Mfe extends ge{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Mb extends ge{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class dM extends ge{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Ufe extends ge{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const $fe=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Bfe=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Ffe=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,jfe=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function zfe(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function M6(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function WV({uri:t,gatewayUrls:e}){const n=Ffe.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=M6(e==null?void 0:e.ipfs,"https://ipfs.io"),s=M6(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match($fe),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||Bfe.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(jfe,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new dM({uri:t})}function HV(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Mfe({data:t});return t.image||t.image_url||t.image_data}async function Wfe({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await hM({gatewayUrls:t,uri:HV(n)})}catch{throw new dM({uri:e})}}async function hM({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=WV({uri:e,gatewayUrls:t});if(r||await zfe(n))return n;throw new dM({uri:e})}function Hfe(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Mb({reason:"Only EIP-155 supported"});if(!o)throw new Mb({reason:"Chain ID not found"});if(!c)throw new Mb({reason:"Contract address not found"});if(!s)throw new Mb({reason:"Token ID not found"});if(!a)throw new Mb({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function Gfe(t,{nft:e}){if(e.namespace==="erc721")return Ll(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Ll(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Ufe({namespace:e.namespace})}async function qfe(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Vfe(t,{gatewayUrls:e,record:n}):hM({uri:n,gatewayUrls:e})}async function Vfe(t,{gatewayUrls:e,record:n}){const r=Hfe(n),s=await Gfe(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=WV({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return hM({uri:HV(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Wfe({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function GV(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return X0({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:cV,functionName:"resolve",args:[Ia(cN(i)),Pa({abi:C6,functionName:"text",args:[XA(i),s]}),o??[rM]],blockNumber:n,blockTag:r},f=await lt(t,Ll,"readContract")(d);if(f[0]==="0x")return null;const p=Zg({abi:C6,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(nM(d,"resolve"))return null;throw d}}async function Kfe(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await lt(t,GV,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await qfe(t,{record:c,gatewayUrls:r})}catch{return null}}async function qV(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=X0({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:jde,functionName:"reverse",args:[Ia(cN(c))],blockNumber:n,blockTag:r},u=lt(t,Ll,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(nM(l,"reverse"))return null;throw l}}async function Yfe(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return X0({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await lt(t,Ll,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ia(cN(s))],blockNumber:n,blockTag:r});return c}async function VV(t,e){var y,m,w;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Cr(n):void 0;try{Qg(e);const A=(typeof r=="bigint"?nt(r):void 0)||s,C=(w=(m=(y=t.chain)==null?void 0:y.formatters)==null?void 0:m.transactionRequest)==null?void 0:w.format,x=(C||Q0)({...sN(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),T=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:T.accessList,gasUsed:BigInt(T.gasUsed)}}catch(v){throw jV(v,{...e,account:g,chain:t.chain})}}function dN(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function Qfe(t){const e=dN(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class Jfe extends ge{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const U6="/docs/contract/encodeEventTopics";function DC(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=Jg({abi:e,name:n});if(!l)throw new c6(n,{docsPath:U6});s=l}if(s.type!=="event")throw new c6(void 0,{docsPath:U6});const i=xc(s),o=oN(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>$6({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?$6({param:d,value:u[h]}):null))??[])}return[o,...a]}function $6({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Ts(K0(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Jfe(t.type);return Sf([t],[e])}async function KV(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=dN(t,{method:"eth_newFilter"}),u=i?DC({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?nt(o):o,toBlock:typeof c=="bigint"?nt(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function YV(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=dN(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>DC({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?nt(i):i,toBlock:typeof a=="bigint"?nt(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function QV(t){const e=dN(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Zfe(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Pa({abi:n,args:s,functionName:i});try{return await lt(t,iN,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Cr(a.account):void 0;throw vg(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function Xfe(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const epe=new Map,tpe=new Map;function npe(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,epe),r=e(t,tpe);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function rpe(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=npe(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const spe=t=>`blockNumber.${t}`;async function LC(t,{cacheTime:e=t.cacheTime}={}){const n=await rpe(()=>t.request({method:"eth_blockNumber"}),{cacheKey:spe(t.uid),cacheTime:e});return BigInt(n)}async function ipe(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?nt(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Ic(i)}async function B6(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?nt(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function hN(t,e){if(!Na(t,{strict:!1}))throw new uf({address:t});if(!Na(e,{strict:!1}))throw new uf({address:e});return t.toLowerCase()===e.toLowerCase()}const F6="/docs/contract/decodeEventLog";function fM(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Kle({docsPath:F6});const c=e.find(g=>g.type==="event"&&o===oN(xc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new Cq(o,{docsPath:F6});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,m]=f[g],w=a[g];if(!w)throw new eN({abiItem:c,param:y});h[d?m:y.name||m]=ope({param:y,value:w})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=PC(p,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<p.length;y++)h[p[y].name]=g[y]}catch(g){if(i)throw g instanceof Eq||g instanceof jq?new $E({abiItem:c,data:n,params:p,size:Er(n)}):g}else if(i)throw new $E({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function ope({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(PC([t],e)||[])[0]}function pM(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===oN(u));if(!c)return null;const l=fM({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!ape({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof Cq)return null;if(c instanceof $E||c instanceof eN){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function ape(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?hN(o,a):i.type==="string"||i.type==="bytes"?Ts(K0(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function td(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function gM(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>DC({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?nt(r):r,toBlock:typeof s=="bigint"?nt(s):s}]});const f=h.map(p=>td(p));return u?pM({abi:u,args:a,logs:f,strict:l}):f}async function JV(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?Jg({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return lt(t,gM,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class cpe extends ge{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function lpe(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await lt(t,Ll,"readContract")({abi:upe,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new cpe({address:n}):o}}const upe=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function dpe(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function hpe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?nt(n):void 0,o=await t.request({method:"eth_feeHistory",params:[nt(e),i||r,s]},{dedupe:!!i});return dpe(o)}async function fN(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>td(i));return!("abi"in e)||!e.abi?s:pM({abi:e.abi,logs:s,strict:n})}async function fpe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>td(i));return e.abi?pM({abi:e.abi,logs:s,strict:n}):s}async function ppe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?nt(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function pN(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?nt(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,nt(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,nt(i)]},{dedupe:!!a}),!c)throw new Vq({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||Zq)(c)}async function gpe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([lt(t,LC,"getBlockNumber")({}),e?lt(t,pN,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const ZV={"0x0":"reverted","0x1":"success"};function mpe(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>td(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Ic(t.transactionIndex):null,status:t.status?ZV[t.status]:null,type:t.type?Jq[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function Sk(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new Kq({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||mpe)(n)}async function XV(t,e){var m;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((m=t.batch)==null?void 0:m.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=X0({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let w=0;w<l.length;w++){const{abi:v,address:A,args:C,functionName:S}=l[w];try{const x=Pa({abi:v,args:C,functionName:S});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const T=vg(x,{abi:v,address:A,args:C,docsPath:"/docs/contract/multicall",functionName:S,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(w=>lt(t,Ll,"readContract")({abi:pk,account:n,address:d,args:[w],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let w=0;w<g.length;w++){const v=g[w];if(v.status==="rejected"){if(!r)throw v.reason;for(let C=0;C<h[w].length;C++)y.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let C=0;C<A.length;C++){const{returnData:S,success:x}=A[C],{callData:T}=h[w][C],{abi:I,address:k,functionName:O,args:B}=l[y.length];try{if(T==="0x")throw new AC;if(!x)throw new aN({data:S});const G=Zg({abi:I,args:B,data:S,functionName:O});y.push(r?{result:G,status:"success"}:G)}catch(G){const W=vg(G,{abi:I,address:k,args:B,docsPath:"/docs/contract/multicall",functionName:O});if(!r)throw W;y.push({error:W,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new ge("multicall results mismatch");return y}async function Ik(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?BV(h.blockOverrides):void 0,p=h.calls.map(y=>{const m=y,w=m.account?Cr(m.account):void 0,v=m.abi?Pa(m):m.data,A={...m,data:m.dataSuffix?xa([v||"0x",m.dataSuffix]):v,from:m.from??(w==null?void 0:w.address)};return Qg(A),Q0(A)}),g=h.stateOverrides?QL(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?nt(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...Xq(h),calls:h.calls.map((p,g)=>{var k,O;const{abi:y,args:m,functionName:w,to:v}=s[f].calls[g],A=((k=p.error)==null?void 0:k.data)??p.returnData,C=BigInt(p.gasUsed),S=(O=p.logs)==null?void 0:O.map(B=>td(B)),x=p.status==="0x1"?"success":"failure",T=y&&x==="success"&&A!=="0x"?Zg({abi:y,data:A,functionName:w}):null,I=(()=>{var G;if(x==="success")return;let B;if(((G=p.error)==null?void 0:G.data)==="0x"?B=new AC:p.error&&(B=new aN(p.error)),!!B)return vg(B,{abi:y??[],address:v??"0x",args:m,functionName:w??"<unknown>"})})();return{data:A,gasUsed:C,logs:S,status:x,...x==="success"?{result:T}:{error:I}}})}))}catch(c){const l=c,u=rN(l,{});throw u instanceof xC?l:u}}function eK(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=FL(ffe(t));return n==="Bytes"?r:MV(r)}let ype=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const wpe={checksum:new ype(8192)},DR=wpe.checksum,bpe=/^0x[a-fA-F0-9]{40}$/;function gN(t,e={}){const{strict:n=!0}=e;if(!bpe.test(t))throw new j6({address:t,cause:new Epe});if(n){if(t.toLowerCase()===t)return;if(vpe(t)!==t)throw new j6({address:t,cause:new _pe})}}function vpe(t){if(DR.has(t))return DR.get(t);gN(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=eK(mfe(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return DR.set(t,s),s}function xk(t,e={}){const{strict:n=!0}=e??{};try{return gN(t,{strict:n}),!0}catch{return!1}}class j6 extends Pr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Epe extends Pr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class _pe extends Pr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function Nk(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Pr("Unable to normalize signature.");return s}function Tk(t,e){const n=typeof t,r=e.type;switch(r){case"address":return xk(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Tk(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Tk(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function tK(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return tK(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?xk(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?xk(n[r],{strict:!1}):!1)return o}}function nK(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?N6(t):t;return{...r,...n?{hash:by(r)}:{}}}function Cpe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=Cfe(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?rK(l)===lM(e,0,4):l.type==="event"?by(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new Rk({name:e});if(o.length===1)return{...o[0],...s?{hash:by(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:by(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?Tk(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=tK(l.inputs,a.inputs,r);if(d)throw new Spe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new Rk({name:e});return{...c,...s?{hash:by(c)}:{}}}function rK(t){return lM(by(t),0,4)}function Ape(t){const e=typeof t=="string"?t:CI(t);return Nk(e)}function by(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:eK(cM(Ape(t)))}class Spe extends Pr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Nk(CI(e.abiItem))}\`, and`,`\`${n.type}\` in \`${Nk(CI(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Rk extends Pr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const Ipe=/^(.*)\[([0-9]*)\]$/,xpe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,sK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Npe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(mM({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function mM({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=Mpe(r.type);if(s){const[i,o]=s;return Rpe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return Lpe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return Tpe(n,{checksum:t});if(r.type==="bool")return Ope(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=sK.exec(r.type)??[];return kpe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return Ppe(n,{type:r.type});if(r.type==="string")return Dpe(n);throw new cK(r.type)}function yM(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Ta(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(di(e+s,{size:32})),r.push(a),s+=Ta(a)):n.push(a)}return Dl(...n,...r)}function Tpe(t,e){const{checksum:n=!1}=e;return gN(t,{strict:n}),{dynamic:!1,encoded:Eg(t.toLowerCase())}}function Rpe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new $pe(t);if(!i&&t.length!==r)throw new Upe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=mM({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=yM(a);if(i){const l=di(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Dl(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Dl(...a.map(({encoded:c})=>c))}}function Ppe(t,{type:e}){const[,n]=e.split("bytes"),r=Ta(t);if(!n){let s=t;return r%32!==0&&(s=_g(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Dl(Eg(di(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new oK({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:_g(t)}}function Ope(t){if(typeof t!="boolean")throw new Pr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Eg(LV(t))}}function kpe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new UV({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:di(t,{size:32,signed:e})}}function Dpe(t){const e=cM(t),n=Math.ceil(Ta(e)/32),r=[];for(let s=0;s<n;s++)r.push(_g(lM(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Dl(_g(di(Ta(e),{size:32})),...r)}}function Lpe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=mM({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?yM(i):Dl(...i.map(({encoded:o})=>o))}}function Mpe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function iK(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new aK({expectedLength:t.length,givenLength:e.length});const s=Npe({checksumAddress:r,parameters:t,values:e}),i=yM(s);return i.length===0?"0x":i}function Pk(t,e){if(t.length!==e.length)throw new aK({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(Pk.encode(s,i))}return Dl(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return gN(c),Eg(c.toLowerCase(),s?32:0)}if(n==="string")return cM(r);if(n==="bytes")return r;if(n==="bool")return Eg(LV(r),s?32:1);const i=n.match(sK);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return di(r,{size:s?32:d,signed:l==="int"})}const o=n.match(xpe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new oK({expectedSize:Number.parseInt(l),value:r});return _g(r,s?32:0)}const a=n.match(Ipe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Dl(...u)}throw new cK(n)}t.encode=e})(Pk||(Pk={}));class Upe extends Pr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class oK extends Pr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ta(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class aK extends Pr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class $pe extends Pr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class cK extends Pr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function Bpe(t,e){var s;const{bytecode:n,args:r}=e;return Dl(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?iK(t.inputs,r):"0x")}function Fpe(t){return nK(t)}function jpe(t,...e){const{overloads:n}=t,r=n?zpe([t,...n],t.name,{args:e[0]}):t,s=Wpe(r),i=e.length>0?iK(r.inputs,e[0]):void 0;return i?Dl(s,i):s}function _m(t,e={}){return nK(t,e)}function zpe(t,e,n){const r=Cpe(t,e,n);if(r.type!=="function")throw new Rk({name:e,type:"function"});return r}function Wpe(t){return rK(t)}const Hpe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",$c="0x0000000000000000000000000000000000000000",z1=new tN(8192);function Gpe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(z1.get(n))return z1.get(n);const r=t().finally(()=>z1.delete(n));return z1.set(n,r),r}async function SI(t){return new Promise(e=>setTimeout(e,t))}function II(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await SI(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function qpe(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new fp(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new fp(new Error("method not supported"),{method:l});const u=s?i0(`${c}.${Yr(n)}`):void 0;return Gpe(()=>II(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case jE.code:throw new jE(f);case zE.code:throw new zE(f);case WE.code:throw new WE(f,{method:n.method});case HE.code:throw new HE(f);case yg.code:throw new yg(f);case wg.code:throw new wg(f);case GE.code:throw new GE(f);case Vh.code:throw new Vh(f);case u0.code:throw new u0(f);case fp.code:throw new fp(f,{method:n.method});case d0.code:throw new d0(f);case qE.code:throw new qE(f);case jr.code:throw new jr(f);case VE.code:throw new VE(f);case KE.code:throw new KE(f);case YE.code:throw new YE(f);case QE.code:throw new QE(f);case kl.code:throw new kl(f);case h0.code:throw new h0(f);case JE.code:throw new JE(f);case ZE.code:throw new ZE(f);case XE.code:throw new XE(f);case e_.code:throw new e_(f);case t_.code:throw new t_(f);case f0.code:throw new f0(f);case 5e3:throw new jr(f);default:throw h instanceof ge?h:new ude(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof Hv){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>Vpe(h)}),{enabled:s,id:u})}}function Vpe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===d0.code||t.code===yg.code:t instanceof Hv&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Kpe(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function lK(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function Ype(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const z6=Ype();function Qpe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await lK(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Yr(r.map(v=>({jsonrpc:"2.0",id:v.id??z6.take(),...v}))):Yr({jsonrpc:"2.0",id:r.id??z6.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(t,g),m=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(m.url??t,m)},{errorInstance:new y6({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new Hv({body:r,details:Yr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof Hv||h instanceof y6?h:new Hv({body:r,cause:h,url:t})}}}}class Jpe extends ge{constructor({domain:e}){super(`Invalid domain "${Yr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Zpe extends ge{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Xpe extends ge{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function ege(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:gK({domain:e}),...t.types};pK({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(tge({domain:e,types:s})),r!=="EIP712Domain"&&i.push(uK({data:n,primaryType:r,types:s})),Ts(xa(i))}function tge({domain:t,types:e}){return uK({data:t,primaryType:"EIP712Domain",types:e})}function uK({data:t,primaryType:e,types:n}){const r=dK({data:t,primaryType:e,types:n});return Ts(r)}function dK({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[nge({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=fK({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Sf(r,s)}function nge({primaryType:t,types:e}){const n=Ia(rge({primaryType:t,types:e}));return Ts(n)}function rge({primaryType:t,types:e}){let n="";const r=hK({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function hK({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])hK({primaryType:i.type,types:e},n);return n}function fK({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Ts(dK({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Ts(r)];if(n==="string")return[{type:"bytes32"},Ts(Ia(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>fK({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Ts(Sf(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function sge(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Yr({domain:o,message:a,primaryType:r,types:s})}function pK(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(Bq);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,y,m]=h;nt(d,{signed:y==="int",size:Number.parseInt(m)/8})}if(u==="address"&&typeof d=="string"&&!Na(d))throw new uf({address:d});const f=u.match(Due);if(f){const[g,y]=f;if(y&&Er(d)!==Number.parseInt(y))throw new Jle({expectedSize:Number.parseInt(y),givenSize:Er(d)})}const p=s[u];p&&(ige(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Jpe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Zpe({primaryType:r,types:s})}function gK({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function ige(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Xpe({type:t})}const oge=`Ethereum Signed Message:
`;function age(t){const e=typeof t=="string"?i0(t):typeof t.raw=="string"?t.raw:Jr(t.raw),n=i0(`${oge}${Er(e)}`);return xa([n,e])}function mK(t,e){return Ts(age(t),e)}const yK="0x6492649264926492649264926492649264926492649264926492649264926492";function cge(t){return vI(t,-32)===yK}function lge(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=Y0([Sf([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),yK]);return s==="hex"?i:Sa(i)}class uge extends ge{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function dge(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new uge({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const hge="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function fge(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Cr(e.account):void 0;if(o&&!l)throw new ge("`account` is required when `traceAssetChanges` is true");const u=l?Bpe(Fpe("constructor(bytes, bytes)"),{bytecode:FV,args:[hge,jpe(_m("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async P=>{if(!P.data&&!P.abi)return;const{accessList:L}=await VV(t,{account:l.address,...P,data:P.abi?Pa(P):P.data});return L.map(({address:j,storageKeys:q})=>q.length>0?j:null)})).then(P=>P.flat().filter(Boolean)):[],h=await Ik(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((P,L)=>({abi:[_m("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:P,from:$c,nonce:L})),stateOverrides:[{address:$c,nonce:0}]}]:[],{calls:[...s,{}].map(P=>({...P,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((P,L)=>({abi:[_m("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:P,from:$c,nonce:L})),stateOverrides:[{address:$c,nonce:0}]},{calls:d.map((P,L)=>({to:P,abi:[_m("function decimals() returns (uint256)")],functionName:"decimals",from:$c,nonce:L})),stateOverrides:[{address:$c,nonce:0}]},{calls:d.map((P,L)=>({to:P,abi:[_m("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:$c,nonce:L})),stateOverrides:[{address:$c,nonce:0}]},{calls:d.map((P,L)=>({to:P,abi:[_m("function symbol() returns (string)")],functionName:"symbol",from:$c,nonce:L})),stateOverrides:[{address:$c,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,y,m,w,v,A]=o?h:[],{calls:C,...S}=f,x=C.slice(0,-1)??[],T=(p==null?void 0:p.calls)??[],I=(g==null?void 0:g.calls)??[],k=[...T,...I].map(P=>P.status==="success"?Fo(P.data):null),O=(y==null?void 0:y.calls)??[],B=(m==null?void 0:m.calls)??[],G=[...O,...B].map(P=>P.status==="success"?Fo(P.data):null),W=((w==null?void 0:w.calls)??[]).map(P=>P.status==="success"?P.result:null),R=((A==null?void 0:A.calls)??[]).map(P=>P.status==="success"?P.result:null),N=((v==null?void 0:v.calls)??[]).map(P=>P.status==="success"?P.result:null),M=[];for(const[P,L]of G.entries()){const j=k[P];if(typeof L!="bigint"||typeof j!="bigint")continue;const q=W[P-1],ne=R[P-1],le=N[P-1],oe=P===0?{address:Hpe,decimals:18,symbol:"ETH"}:{address:d[P-1],decimals:le||q?Number(q??1):void 0,symbol:ne??void 0};M.some(se=>se.token.address===oe.address)||M.push({token:oe,value:{pre:j,post:L,diff:L-j}})}return{assetChanges:M,block:S,results:x}}const LR=new Map,W6=new Map;let pge=0;function nd(t,e,n){const r=++pge,s=()=>LR.get(t)||[],i=()=>{const u=s();LR.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=W6.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(LR.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&W6.set(t,l),o}function eb(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await SI(c);const l=async()=>{s&&(await t({unpoll:i}),await SI(r),l())};l()})(),i}function gge(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=Yr(["watchBlocks",t.uid,e,n,r,u,c]);return nd(p,{onBlock:s,onError:i},g=>eb(async()=>{var y;try{const m=await lt(t,El,"getBlock")({blockTag:e,includeTransactions:u});if(m.number!==null&&(d==null?void 0:d.number)!=null){if(m.number===d.number)return;if(m.number-d.number>1&&n)for(let w=(d==null?void 0:d.number)+1n;w<m.number;w++){const v=await lt(t,El,"getBlock")({blockNumber:w,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(m==null?void 0:m.number)==null||m.number!==null&&m.number>d.number)&&(g.onBlock(m,d),d=m)}catch(m){(y=g.onError)==null||y.call(g,m)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,y=()=>p=!1;return(async()=>{try{r&&lt(t,El,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const m=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:w}=await m.subscribe({params:["newHeads"],async onData(v){var C;if(!p)return;const A=await lt(t,El,"getBlock")({blockNumber:(C=v.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});y=w,p||y()}catch(m){i==null||i(m)}})(),()=>y()})()}function wK(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Yr(["watchBlockNumber",t.uid,e,n,o]);return nd(d,{onBlockNumber:r,onError:s},h=>eb(async()=>{var f;try{const p=await lt(t,LC,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Yr(["watchBlockNumber",t.uid,e,n]);return nd(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const m=t.transport.transports.find(w=>w.config.type==="webSocket"||w.config.type==="ipc");return m?m.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(m){var v;if(!f)return;const w=Fo((v=m.result)==null?void 0:v.number);h.onBlockNumber(w,c),c=w},onError(m){var w;(w=h.onError)==null||w.call(h,m)}});p=y,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function mN(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function mge(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const y=Yr(["watchEvent",e,n,r,t.uid,s,u,o]);return nd(y,{onLogs:c,onError:a},m=>{let w;o!==void 0&&(w=o-1n);let v,A=!1;const C=eb(async()=>{var S;if(!A){try{v=await lt(t,YV,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await lt(t,fN,"getFilterChanges")({filter:v});else{const T=await lt(t,LC,"getBlockNumber")({});w&&w!==T?x=await lt(t,gM,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:w+1n,toBlock:T}):x=[],w=T}if(x.length===0)return;if(r)m.onLogs(x);else for(const T of x)m.onLogs([T])}catch(x){v&&x instanceof wg&&(A=!1),(S=m.onError)==null||S.call(m,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await lt(t,mN,"uninstallFilter")({filter:v}),C()}})})():(()=>{let y=!0,m=()=>y=!1;return(async()=>{try{const w=(()=>{if(t.transport.type==="fallback"){const S=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return S?S.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>DC({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:C}=await w.subscribe({params:["logs",{address:e,topics:A}],onData(S){var T;if(!y)return;const x=S.result;try{const{eventName:I,args:k}=fM({abi:v??[],data:x.data,topics:x.topics,strict:f}),O=td(x,{args:k,eventName:I});c([O])}catch(I){let k,O;if(I instanceof $E||I instanceof eN){if(d)return;k=I.abiItem.name,O=(T=I.abiItem.inputs)==null?void 0:T.some(G=>!("name"in G&&G.name))}const B=td(x,{args:O?[]:{},eventName:k});c([B])}},onError(S){a==null||a(S)}});m=C,y||m()}catch(w){a==null||a(w)}})(),()=>m()})()}function bK(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Yr(["watchPendingTransactions",t.uid,e,i]);return nd(l,{onTransactions:r,onError:n},u=>{let d;const h=eb(async()=>{var f;try{if(!d)try{d=await lt(t,QV,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await lt(t,fN,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await lt(t,mN,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function yge(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>IC(r))}async function wge(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function bge(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Cr(n):void 0,i=r?[s==null?void 0:s.address,[nt(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const vK="0x5792579257925792579257925792579257925792579257925792579257925792",EK=nt(0,{size:32});async function vge(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Cr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Pa({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?xa([p,f.dataSuffix]):p,to:f.to,value:f.value?nt(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:nt(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(w=>!w.optional)){const w="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new h0(new ge(w,{details:w}))}if(a&&d.length>1){const m="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new f0(new ge(m,{details:m}))}const p=[];for(const m of d){const w=RC(t,{account:u,chain:s,data:m.data,to:m.to,value:m.value?Fo(m.value):void 0});p.push(w),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(m=>m.status==="rejected"))throw g[0].reason;const y=g.map(m=>m.status==="fulfilled"?m.value:EK);return{id:xa([...y,nt(s.id,{size:32}),vK])}}throw Yq(h,{...e,account:u,chain:e.chain})}}async function _K(t,e){async function n(u){if(u.endsWith(vK.slice(2))){const h=Sl(vI(u,-64,-32)),f=vI(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(y=>EK.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:Ic(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Ic(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Fo(u.blockNumber),gasUsed:Fo(u.gasUsed),status:ZV[u.status]})))??[],statusCode:l,status:c,version:o}}async function Ege(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function _ge(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Yr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=uM();let u;const d=nd(o,{resolve:c,reject:l},h=>{const f=eb(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await _K(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new Cge({id:n}))},i):void 0,await a}class Cge extends ge{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function Age(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function Sge(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Ic(t.nonce):void 0,storageProof:t.storageProof?Age(t.storageProof):void 0}}async function Ige(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?nt(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return Sge(a)}async function CK(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Yr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:y,reject:m}=uM(),w=a?setTimeout(()=>{p(),f(),m(new ade({hash:n}))},a):void 0;return f=nd(c,{onReplaced:r,resolve:y,reject:m},v=>{p=lt(t,wK,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const C=x=>{clearTimeout(w),p(),x(),f()};let S=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;C(()=>v.resolve(d));return}if(l||(h=!0,await II(async()=>{l=await lt(t,pN,"getTransaction")({hash:n}),l.blockNumber&&(S=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await lt(t,Sk,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;C(()=>v.resolve(d))}catch(x){if(x instanceof Vq||x instanceof Kq){if(!l){h=!1;return}try{u=l,h=!0;const T=await II(()=>lt(t,El,"getBlock")({blockNumber:S,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:O})=>O instanceof Qq});h=!1;const I=T.transactions.find(({from:O,nonce:B})=>O===u.from&&B===u.nonce);if(!I||(d=await lt(t,Sk,"getTransactionReceipt")({hash:I.hash}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e)))return;let k="replaced";I.to===u.to&&I.value===u.value&&I.input===u.input?k="repriced":I.from===I.to&&I.value===0n&&(k="cancelled"),C(()=>{var O;(O=v.onReplaced)==null||O.call(v,{reason:k,replacedTransaction:u,transaction:I,transactionReceipt:d}),v.resolve(d)})}catch(T){C(()=>v.reject(T))}}else C(()=>v.reject(x))}}})}),g}async function xge(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Mu(n))}async function Nge(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function AK(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Kg({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Cr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Cr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await lt(t,J0,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await lt(t,ZL,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&hN(o.address,i.address))&&(a.nonce+=1)),a}async function Tge(t,e){const{account:n=t.account}=e;if(!n)throw new Kg({docsPath:"/docs/eip7702/signAuthorization"});const r=Cr(n);if(!r.signAuthorization)throw new ZA({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await AK(t,e);return r.signAuthorization(s)}async function Rge(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Kg({docsPath:"/docs/actions/wallet/signTransaction"});const i=Cr(n);Qg({account:i,...e});const o=await lt(t,J0,"getChainId")({});r!==null&&qq({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||Q0;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:nt(o),from:i.address}]},{retryCount:0})}async function SK(t,{account:e=t.account,message:n}){if(!e)throw new Kg({docsPath:"/docs/actions/wallet/signMessage"});const r=Cr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?i0(n):n.raw instanceof Uint8Array?Ia(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Pge(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Kg({docsPath:"/docs/actions/wallet/signTypedData"});const o=Cr(n),a={EIP712Domain:gK({domain:r}),...e.types};if(pK({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=sge({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function Oge(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Cr(a.account):t.account,l=Pa({abi:n,args:s,functionName:o});try{const{data:u}=await lt(t,kC,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=Zg({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw vg(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function kge(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(e)}]},{retryCount:0})}let IK=class extends $L{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,cue(e);const r=SC(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),c0(i)}update(e){return a0(this),this.iHash.update(e),this}digestInto(e){a0(this),Nc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const xK=(t,e,n)=>new IK(t,e).update(n).digest();xK.create=(t,e)=>new IK(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xi=BigInt(0),vi=BigInt(1),pp=BigInt(2),Dge=BigInt(3),NK=BigInt(4),TK=BigInt(5),RK=BigInt(8);function ma(t,e){const n=t%e;return n>=Xi?n:e+n}function Qo(t,e,n){let r=t;for(;e-- >Xi;)r*=r,r%=n;return r}function H6(t,e){if(t===Xi)throw new Error("invert: expected non-zero number");if(e<=Xi)throw new Error("invert: expected positive modulus, got "+e);let n=ma(t,e),r=e,s=Xi,i=vi;for(;n!==Xi;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==vi)throw new Error("invert: does not exist");return ma(s,e)}function PK(t,e){const n=(t.ORDER+vi)/NK,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Lge(t,e){const n=(t.ORDER-TK)/RK,r=t.mul(e,pp),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,pp),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Mge(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-vi,n=0;for(;e%pp===Xi;)e/=pp,n++;let r=pp;const s=yN(t);for(;G6(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return PK;let i=s.pow(r,e);const o=(e+vi)/pp;return function(c,l){if(c.is0(l))return l;if(G6(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const y=vi<<BigInt(u-p-1),m=c.pow(d,y);u=p,d=c.sqr(m),h=c.mul(h,d),f=c.mul(f,m)}return f}}function Uge(t){return t%NK===Dge?PK:t%RK===TK?Lge:Mge(t)}const $ge=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Bge(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=$ge.reduce((r,s)=>(r[s]="function",r),e);return oM(t,n),t}function Fge(t,e,n){if(n<Xi)throw new Error("invalid exponent, negatives unsupported");if(n===Xi)return t.ONE;if(n===vi)return e;let r=t.ONE,s=e;for(;n>Xi;)n&vi&&(r=t.mul(r,s)),s=t.sqr(s),n>>=vi;return r}function OK(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function G6(t,e){const n=(t.ORDER-vi)/pp,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function jge(t,e){e!==void 0&&BE(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function yN(t,e,n=!1,r={}){if(t<=Xi)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=jge(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:uN(o),ZERO:Xi,ONE:vi,create:u=>ma(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Xi<=u&&u<t},is0:u=>u===Xi,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&vi)===vi,neg:u=>ma(-u,t),eql:(u,d)=>u===d,sqr:u=>ma(u*u,t),add:(u,d)=>ma(u+d,t),sub:(u,d)=>ma(u-d,t),mul:(u,d)=>ma(u*d,t),pow:(u,d)=>Fge(l,u,d),div:(u,d)=>ma(u*H6(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>H6(u,t),sqrt:i||(u=>(c||(c=Uge(t)),c(l,u))),toBytes:u=>n?OV(u,a):iM(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?PV(u):lN(u)},invertBatch:u=>OK(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function kK(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function DK(t){const e=kK(t);return e+Math.ceil(e/2)}function zge(t,e,n=!1){const r=t.length,s=kK(e),i=DK(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?PV(t):lN(t),a=ma(o,e-vi)+vi;return n?OV(a,s):iM(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const p0=BigInt(0),gp=BigInt(1);function Gv(t,e){const n=e.negate();return t?n:e}function Wge(t,e,n){const r=o=>o.pz,s=OK(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function LK(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function MR(t,e){LK(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=uN(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function q6(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=gp);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function Hge(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Gge(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const UR=new WeakMap,MK=new WeakMap;function $R(t){return MK.get(t)||1}function V6(t){if(t!==p0)throw new Error("invalid wNAF")}function qge(t,e){return{constTimeNegate:Gv,hasPrecomputes(n){return $R(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>p0;)r&gp&&(s=s.add(i)),i=i.double(),r>>=gp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=MR(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=MR(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=q6(s,c,a);s=l,d?o=o.add(Gv(f,r[p])):i=i.add(Gv(h,r[u]))}return V6(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=MR(n,e);for(let a=0;a<o.windows&&s!==p0;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=q6(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return V6(s),i},getPrecomputes(n,r,s){let i=UR.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),UR.set(r,i))),i},wNAFCached(n,r,s){const i=$R(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=$R(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){LK(r,e),MK.set(n,r),UR.delete(n)}}}function Vge(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>p0||r>p0;)n&gp&&(i=i.add(s)),r&gp&&(o=o.add(s)),s=s.double(),n>>=gp,r>>=gp;return{p1:i,p2:o}}function Kge(t,e,n,r){Hge(n,t),Gge(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=nfe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=uN(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],m=Number(y>>BigInt(f)&l);u[m]=u[m].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function K6(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Bge(e),e}else return yN(t)}function Yge(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>p0))throw new Error(`CURVE.${a} must be positive bigint`)}const r=K6(e.p,n.Fp),s=K6(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Y6(t){t.lowS!==void 0&&AI("lowS",t.lowS),t.prehash!==void 0&&AI("prehash",t.prehash)}class Qge extends Error{constructor(e=""){super(e)}}const pu={Err:Qge,_tlv:{encode:(t,e)=>{const{Err:n}=pu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=j1(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?j1(s.length/2|128):"";return j1(t)+i+s+e},decode(t,e){const{Err:n}=pu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=pu;if(t<qv)throw new e("integer: negative integers are not allowed");let n=j1(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=pu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return lN(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=pu,s=ca("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=pu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},qv=BigInt(0),Vv=BigInt(1),Jge=BigInt(2),W1=BigInt(3),Zge=BigInt(4);function Xge(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function UK(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=ca("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function eme(t,e={}){const{Fp:n,Fn:r}=Yge("weierstrass",t,e),{h:s,n:i}=t;oM(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,I,k){const{x:O,y:B}=I.toAffine(),G=n.toBytes(O);if(AI("isCompressed",k),k){a();const W=!n.isOdd(B);return dp($K(W),G)}else return dp(Uint8Array.of(4),G,n.toBytes(B))}function l(T){Nc(T);const I=n.BYTES,k=I+1,O=2*I+1,B=T.length,G=T[0],W=T.subarray(1);if(B===k&&(G===2||G===3)){const R=n.fromBytes(W);if(!n.isValid(R))throw new Error("bad point: is not on curve, wrong x");const N=h(R);let M;try{M=n.sqrt(N)}catch(j){const q=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+q)}a();const P=n.isOdd(M);return(G&1)===1!==P&&(M=n.neg(M)),{x:R,y:M}}else if(B===O&&G===4){const R=n.fromBytes(W.subarray(I*0,I*1)),N=n.fromBytes(W.subarray(I*1,I*2));if(!f(R,N))throw new Error("bad point: is not on curve");return{x:R,y:N}}else throw new Error(`bad point: got length ${B}, expected compressed=${k} or uncompressed=${O}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Xge(n,t.a,t.b);function f(T,I){const k=n.sqr(I),O=h(T);return n.eql(k,O)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,W1),Zge),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(T,I,k=!1){if(!n.isValid(I)||k&&n.is0(I))throw new Error(`bad point coordinate ${T}`);return I}function m(T){if(!(T instanceof C))throw new Error("ProjectivePoint expected")}const w=P6((T,I)=>{const{px:k,py:O,pz:B}=T;if(n.eql(B,n.ONE))return{x:k,y:O};const G=T.is0();I==null&&(I=G?n.ONE:n.inv(B));const W=n.mul(k,I),R=n.mul(O,I),N=n.mul(B,I);if(G)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:W,y:R}}),v=P6(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:I,y:k}=T.toAffine();if(!n.isValid(I)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!f(I,k))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(T,I,k,O,B){return k=new C(n.mul(k.px,T),k.py,k.pz),I=Gv(O,I),k=Gv(B,k),I.add(k)}class C{constructor(I,k,O){this.px=y("x",I),this.py=y("y",k,!0),this.pz=y("z",O),Object.freeze(this)}static fromAffine(I){const{x:k,y:O}=I||{};if(!I||!n.isValid(k)||!n.isValid(O))throw new Error("invalid affine point");if(I instanceof C)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(O)?C.ZERO:new C(k,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){return Wge(C,"pz",I)}static fromBytes(I){return Nc(I),C.fromHex(I)}static fromHex(I){const k=C.fromAffine(d(ca("pointHex",I)));return k.assertValidity(),k}static fromPrivateKey(I){const k=UK(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(k(I))}static msm(I,k){return Kge(C,r,I,k)}precompute(I=8,k=!0){return x.setWindowSize(this,I),k||this.multiply(W1),this}_setWindowSize(I){this.precompute(I)}assertValidity(){v(this)}hasEvenY(){const{y:I}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(I)}equals(I){m(I);const{px:k,py:O,pz:B}=this,{px:G,py:W,pz:R}=I,N=n.eql(n.mul(k,R),n.mul(G,B)),M=n.eql(n.mul(O,R),n.mul(W,B));return N&&M}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:I,b:k}=t,O=n.mul(k,W1),{px:B,py:G,pz:W}=this;let R=n.ZERO,N=n.ZERO,M=n.ZERO,P=n.mul(B,B),L=n.mul(G,G),j=n.mul(W,W),q=n.mul(B,G);return q=n.add(q,q),M=n.mul(B,W),M=n.add(M,M),R=n.mul(I,M),N=n.mul(O,j),N=n.add(R,N),R=n.sub(L,N),N=n.add(L,N),N=n.mul(R,N),R=n.mul(q,R),M=n.mul(O,M),j=n.mul(I,j),q=n.sub(P,j),q=n.mul(I,q),q=n.add(q,M),M=n.add(P,P),P=n.add(M,P),P=n.add(P,j),P=n.mul(P,q),N=n.add(N,P),j=n.mul(G,W),j=n.add(j,j),P=n.mul(j,q),R=n.sub(R,P),M=n.mul(j,L),M=n.add(M,M),M=n.add(M,M),new C(R,N,M)}add(I){m(I);const{px:k,py:O,pz:B}=this,{px:G,py:W,pz:R}=I;let N=n.ZERO,M=n.ZERO,P=n.ZERO;const L=t.a,j=n.mul(t.b,W1);let q=n.mul(k,G),ne=n.mul(O,W),le=n.mul(B,R),oe=n.add(k,O),se=n.add(G,W);oe=n.mul(oe,se),se=n.add(q,ne),oe=n.sub(oe,se),se=n.add(k,B);let ye=n.add(G,R);return se=n.mul(se,ye),ye=n.add(q,le),se=n.sub(se,ye),ye=n.add(O,B),N=n.add(W,R),ye=n.mul(ye,N),N=n.add(ne,le),ye=n.sub(ye,N),P=n.mul(L,se),N=n.mul(j,le),P=n.add(N,P),N=n.sub(ne,P),P=n.add(ne,P),M=n.mul(N,P),ne=n.add(q,q),ne=n.add(ne,q),le=n.mul(L,le),se=n.mul(j,se),ne=n.add(ne,le),le=n.sub(q,le),le=n.mul(L,le),se=n.add(se,le),q=n.mul(ne,se),M=n.add(M,q),q=n.mul(ye,se),N=n.mul(oe,N),N=n.sub(N,q),q=n.mul(oe,ne),P=n.mul(ye,P),P=n.add(P,q),new C(N,M,P)}subtract(I){return this.add(I.negate())}is0(){return this.equals(C.ZERO)}multiply(I){const{endo:k}=e;if(!r.isValidNot0(I))throw new Error("invalid scalar: out of range");let O,B;const G=W=>x.wNAFCached(this,W,C.normalizeZ);if(k){const{k1neg:W,k1:R,k2neg:N,k2:M}=k.splitScalar(I),{p:P,f:L}=G(R),{p:j,f:q}=G(M);B=L.add(q),O=A(k.beta,P,j,W,N)}else{const{p:W,f:R}=G(I);O=W,B=R}return C.normalizeZ([O,B])[0]}multiplyUnsafe(I){const{endo:k}=e,O=this;if(!r.isValid(I))throw new Error("invalid scalar: out of range");if(I===qv||O.is0())return C.ZERO;if(I===Vv)return O;if(x.hasPrecomputes(this))return this.multiply(I);if(k){const{k1neg:B,k1:G,k2neg:W,k2:R}=k.splitScalar(I),{p1:N,p2:M}=Vge(C,O,G,R);return A(k.beta,N,M,B,W)}else return x.wNAFCachedUnsafe(O,I)}multiplyAndAddUnsafe(I,k,O){const B=this.multiplyUnsafe(k).add(I.multiplyUnsafe(O));return B.is0()?void 0:B}toAffine(I){return w(this,I)}isTorsionFree(){const{isTorsionFree:I}=e;return s===Vv?!0:I?I(C,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:I}=e;return s===Vv?this:I?I(C,this):this.multiplyUnsafe(s)}toBytes(I=!0){return AI("isCompressed",I),this.assertValidity(),u(C,this,I)}toRawBytes(I=!0){return this.toBytes(I)}toHex(I=!0){return FE(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const S=r.BITS,x=qge(C,e.endo?Math.ceil(S/2):S);return C}function $K(t){return Uint8Array.of(t?2:3)}function tme(t,e,n={}){oM(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||mue,s=e.hmac||((O,...B)=>xK(e.hash,O,dp(...B))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(O){const B=a>>Vv;return O>B}function u(O){return l(O)?o.neg(O):O}function d(O,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${O}: out of range 1..CURVE.n`)}class h{constructor(B,G,W){d("r",B),d("s",G),this.r=B,this.s=G,W!=null&&(this.recovery=W),Object.freeze(this)}static fromCompact(B){const G=o.BYTES,W=ca("compactSignature",B,G*2);return new h(o.fromBytes(W.subarray(0,G)),o.fromBytes(W.subarray(G,G*2)))}static fromDER(B){const{r:G,s:W}=pu.toSig(ca("DER",B));return new h(G,W)}assertValidity(){}addRecoveryBit(B){return new h(this.r,this.s,B)}recoverPublicKey(B){const G=i.ORDER,{r:W,s:R,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*Jge<G&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const P=N===2||N===3?W+a:W;if(!i.isValid(P))throw new Error("recovery id 2 or 3 invalid");const L=i.toBytes(P),j=t.fromHex(dp($K((N&1)===0),L)),q=o.inv(P),ne=v(ca("msgHash",B)),le=o.create(-ne*q),oe=o.create(R*q),se=t.BASE.multiplyUnsafe(le).add(j.multiplyUnsafe(oe));if(se.is0())throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return dp(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return UL(pu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return FE(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return FE(this.toBytes("compact"))}}const f=UK(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(O){try{return f(O),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const O=a;return zge(r(DK(O)),O)},precompute(O=8,B=t.BASE){return B.precompute(O,!1)}};function g(O,B=!0){return t.fromPrivateKey(O).toBytes(B)}function y(O){if(typeof O=="bigint")return!1;if(O instanceof t)return!0;const G=ca("key",O).length,W=i.BYTES,R=W+1,N=2*W+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===R))return G===R||G===N}function m(O,B,G=!0){if(y(O)===!0)throw new Error("first arg must be private key");if(y(B)===!1)throw new Error("second arg must be public key");return t.fromHex(B).multiply(f(O)).toBytes(G)}const w=e.bits2int||function(O){if(O.length>8192)throw new Error("input is too large");const B=lN(O),G=O.length*8-c;return G>0?B>>BigInt(G):B},v=e.bits2int_modN||function(O){return o.create(w(O))},A=uN(c);function C(O){return tfe("num < 2^"+c,O,qv,A),o.toBytes(O)}function S(O,B,G=x){if(["recovered","canonical"].some(oe=>oe in G))throw new Error("sign() legacy options not supported");const{hash:W}=e;let{lowS:R,prehash:N,extraEntropy:M}=G;R==null&&(R=!0),O=ca("msgHash",O),Y6(G),N&&(O=ca("prehashed msgHash",W(O)));const P=v(O),L=f(B),j=[C(L),C(P)];if(M!=null&&M!==!1){const oe=M===!0?r(i.BYTES):M;j.push(ca("extraEntropy",oe))}const q=dp(...j),ne=P;function le(oe){const se=w(oe);if(!o.isValidNot0(se))return;const ye=o.inv(se),Z=t.BASE.multiply(se).toAffine(),ae=o.create(Z.x);if(ae===qv)return;const he=o.create(ye*o.create(ne+ae*L));if(he===qv)return;let de=(Z.x===ae?0:2)|Number(Z.y&Vv),be=he;return R&&l(he)&&(be=u(he),de^=1),new h(ae,be,de)}return{seed:q,k2sig:le}}const x={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function I(O,B,G=x){const{seed:W,k2sig:R}=S(O,B,G);return rfe(e.hash.outputLen,o.BYTES,s)(W,R)}t.BASE.precompute(8);function k(O,B,G,W=T){const R=O;B=ca("msgHash",B),G=ca("publicKey",G),Y6(W);const{lowS:N,prehash:M,format:P}=W;if("strict"in W)throw new Error("options.strict was renamed to lowS");if(P!==void 0&&!["compact","der","js"].includes(P))throw new Error('format must be "compact", "der" or "js"');const L=typeof R=="string"||ML(R),j=!L&&!P&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!L&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,ne;try{if(j)if(P===void 0||P==="js")q=new h(R.r,R.s);else throw new Error("invalid format");if(L){try{P!=="compact"&&(q=h.fromDER(R))}catch(be){if(!(be instanceof pu.Err))throw be}!q&&P!=="der"&&(q=h.fromCompact(R))}ne=t.fromHex(G)}catch{return!1}if(!q||N&&q.hasHighS())return!1;M&&(B=e.hash(B));const{r:le,s:oe}=q,se=v(B),ye=o.inv(oe),Z=o.create(se*ye),ae=o.create(le*ye),he=t.BASE.multiplyUnsafe(Z).add(ne.multiplyUnsafe(ae));return he.is0()?!1:o.create(he.x)===le}return Object.freeze({getPublicKey:g,getSharedSecret:m,sign:I,verify:k,utils:p,Point:t,Signature:h})}function nme(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=yN(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function rme(t){const{CURVE:e,curveOpts:n}=nme(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function sme(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function ime(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=rme(t),s=eme(e,n),i=tme(s,r,n);return sme(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ome(t,e){const n=r=>ime({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const ame=BigInt(1),Ok=BigInt(2),Q6=(t,e)=>(t+e/Ok)/e;function cme(t){const e=xI.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Qo(u,n,e)*u%e,h=Qo(d,n,e)*u%e,f=Qo(h,Ok,e)*l%e,p=Qo(f,s,e)*f%e,g=Qo(p,i,e)*p%e,y=Qo(g,a,e)*g%e,m=Qo(y,c,e)*y%e,w=Qo(m,a,e)*g%e,v=Qo(w,n,e)*u%e,A=Qo(v,o,e)*p%e,C=Qo(A,r,e)*l%e,S=Qo(C,Ok,e);if(!kk.eql(kk.sqr(S),t))throw new Error("Cannot find square root");return S}const kk=yN(xI.p,void 0,void 0,{sqrt:cme}),BK=ome({...xI,Fp:kk,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=xI.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ame*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Q6(i*t,e),c=Q6(-r*t,e);let l=ma(t-a*n-c*s,e),u=ma(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},rV),lme=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:BK},Symbol.toStringTag,{value:"Module"}));function ume({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new BK.Signature(Fo(t),Fo(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Sa(o)}async function wM(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Ol(o)?o:typeof o=="object"&&"r"in o&&"s"in o?ume(o):Jr(o),u=await(async()=>!r&&!s||cge(l)?l:lge({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Pa({abi:S6,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:nN({abi:S6,args:[n,i,u],bytecode:Tfe}),...c},{data:g}=await lt(t,kC,"call")(p);return $le(g??"0x0")}catch(p){try{if(hN(Mu(n),await Fq({hash:i,signature:o})))return!0}catch{}if(p instanceof xV)return!1;throw p}}async function dme(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=mK(n);return wM(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function hme(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=ege({message:o,primaryType:a,types:c,domain:l});return wM(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function fme(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function pme(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const y=h??!1,m=Yr(["watchContractEvent",r,s,i,t.uid,o,d,y,a]);return nd(m,{onLogs:l,onError:c},w=>{let v;a!==void 0&&(v=a-1n);let A,C=!1;const S=eb(async()=>{var x;if(!C){try{A=await lt(t,KV,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:y,fromBlock:a})}catch{}C=!0;return}try{let T;if(A)T=await lt(t,fN,"getFilterChanges")({filter:A});else{const I=await lt(t,LC,"getBlockNumber")({});v&&v<I?T=await lt(t,JV,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:I,strict:y}):T=[],v=I}if(T.length===0)return;if(i)w.onLogs(T);else for(const I of T)w.onLogs([I])}catch(T){A&&T instanceof wg&&(C=!1),(x=w.onError)==null||x.call(w,T)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await lt(t,mN,"uninstallFilter")({filter:A}),S()}})})():(()=>{const y=h??!1,m=Yr(["watchContractEvent",r,s,i,t.uid,o,d,y]);let w=!0,v=()=>w=!1;return nd(m,{onLogs:l,onError:c},A=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const T=t.transport.transports.find(I=>I.config.type==="webSocket"||I.config.type==="ipc");return T?T.value:t.transport}return t.transport})(),S=o?DC({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await C.subscribe({params:["logs",{address:r,topics:S}],onData(T){var k;if(!w)return;const I=T.result;try{const{eventName:O,args:B}=fM({abi:n,data:I.data,topics:I.topics,strict:h}),G=td(I,{args:B,eventName:O});A.onLogs([G])}catch(O){let B,G;if(O instanceof $E||O instanceof eN){if(h)return;B=O.abiItem.name,G=(k=O.abiItem.inputs)==null?void 0:k.some(R=>!("name"in R&&R.name))}const W=td(I,{args:G?[]:{},eventName:B});A.onLogs([W])}},onError(T){var I;(I=A.onError)==null||I.call(A,T)}});v=x,w||v()}catch(C){c==null||c(C)}})(),()=>v()))})()}async function FK(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Kg({docsPath:"/docs/contract/writeContract"});const l=r?Cr(r):null,u=Pa({abi:n,args:i,functionName:a});try{return await lt(t,RC,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw vg(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function Uo(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const eS="2.17.3",gme=()=>`@wagmi/core@${eS}`;var jK=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},NI,zK;let dd=class Dk extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return gme()}constructor(e,n={}){var i;super(),NI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof Dk?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof Dk&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return jK(this,NI,"m",zK).call(this,this,e)}};NI=new WeakSet,zK=function t(e,n){return n!=null&&n(e)?e:e.cause?jK(this,NI,"m",t).call(this,e.cause,n):e};class r_ extends dd{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class mme extends dd{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class yme extends dd{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class wme extends dd{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class bme extends dd{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class vme extends dd{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function tS(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new mme;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const Lk=256;let H1=Lk,G1;function WK(t=11){if(!G1||H1+t>Lk*2){G1="",H1=0;for(let e=0;e<Lk;e++)G1+=(256+Math.random()*256|0).toString(16).substring(1)}return G1.substring(H1,H1+++t)}function HK(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Cr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},y={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:WK()};function m(w){return v=>{const A=v(w);for(const S in y)delete A[S];const C={...w,...A};return Object.assign(C,{extend:m(C)})}}return Object.assign(y,{extend:m(y)})}function bM({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=WK();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:qpe(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Eme(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>bM({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function TI(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=_me,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=bM({key:n,name:r,async request({method:g,params:y}){let m;const w=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const C=await A.request({method:g,params:y});return f({method:g,params:y,response:C,transport:A,status:"success"}),C}catch(C){if(f({error:C,method:g,params:y,transport:A,status:"error"}),i(C)||v===h.length-1||(m??(m=h.slice(v+1).some(S=>{const{include:x,exclude:T}=S({chain:c}).config.methods||{};return x?x.includes(g):T?!T.includes(g):!0})),!m))throw C;return w(v+1)}};return w()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};Cme({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function _me(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===u0.code||t.code===jr.code||hp.nodeMessage.test(t.message)||t.code===5e3))}function Cme({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),m=Date.now();let w,v;try{await(r?r({transport:y}):y.request({method:"net_listening"})),v=1}catch{v=0}finally{w=Date.now()}return{latency:w-m,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const m=u.map(S=>S[y].latency),v=1-m.reduce((S,x)=>S+x,0)/m.length/f,A=u.map(S=>S[y].success),C=A.reduce((S,x)=>S+x,0)/A.length;return C===0?[0,y]:[l*v+c*C,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await SI(e),d()};d()}class Ame extends ge{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function xh(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,m=f??e.timeout??1e4,w=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!w)throw new Ame;const v=Qpe(w,{fetchOptions:r,onRequest:a,onResponse:c,timeout:m});return bM({key:s,methods:i,name:o,async request({method:A,params:C}){const S={method:A,params:C},{schedule:x}=zV({id:w,wait:g,shouldSplitBatch(O){return O.length>p},fn:O=>v.request({body:O}),sort:(O,B)=>O.id-B.id}),T=async O=>n?x(O):[await v.request({body:O})],[{error:I,result:k}]=await T(S);if(u)return{error:I,result:k};if(I)throw new VL({body:S,error:I,url:w});return k},retryCount:y,retryDelay:l,timeout:m,type:"http"},{fetchOptions:r,url:w})}}function Sme(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(Ime))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(xme))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const Ime=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,xme=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Nme(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Na(r.address,{strict:!1})||e&&!hN(r.address,e))return!1}catch{return!1}return!0}async function Tme(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=Sme(s);if(!u.address||!Nme({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=mK(s);return wM(t,{address:u.address,hash:h,signature:a,...l})}function Rme(t){return{call:e=>kC(t,e),createAccessList:e=>VV(t,e),createBlockFilter:()=>Qfe(t),createContractEventFilter:e=>KV(t,e),createEventFilter:e=>YV(t,e),createPendingTransactionFilter:()=>QV(t),estimateContractGas:e=>Zfe(t,e),estimateGas:e=>iN(t,e),getBalance:e=>JL(t,e),getBlobBaseFee:()=>Xfe(t),getBlock:e=>El(t,e),getBlockNumber:e=>LC(t,e),getBlockTransactionCount:e=>ipe(t,e),getBytecode:e=>B6(t,e),getChainId:()=>J0(t),getCode:e=>B6(t,e),getContractEvents:e=>JV(t,e),getEip712Domain:e=>lpe(t,e),getEnsAddress:e=>Lfe(t,e),getEnsAvatar:e=>Kfe(t,e),getEnsName:e=>qV(t,e),getEnsResolver:e=>Yfe(t,e),getEnsText:e=>GV(t,e),getFeeHistory:e=>hpe(t,e),estimateFeesPerGas:e=>wde(t,e),getFilterChanges:e=>fN(t,e),getFilterLogs:e=>fpe(t,e),getGasPrice:()=>YL(t),getLogs:e=>gM(t,e),getProof:e=>Ige(t,e),estimateMaxPriorityFeePerGas:e=>yde(t,e),getStorageAt:e=>ppe(t,e),getTransaction:e=>pN(t,e),getTransactionConfirmations:e=>gpe(t,e),getTransactionCount:e=>ZL(t,e),getTransactionReceipt:e=>Sk(t,e),multicall:e=>XV(t,e),prepareTransactionRequest:e=>TC(t,e),readContract:e=>Ll(t,e),sendRawTransaction:e=>eM(t,e),simulate:e=>Ik(t,e),simulateBlocks:e=>Ik(t,e),simulateCalls:e=>fge(t,e),simulateContract:e=>Oge(t,e),verifyMessage:e=>dme(t,e),verifySiweMessage:e=>Tme(t,e),verifyTypedData:e=>hme(t,e),uninstallFilter:e=>mN(t,e),waitForTransactionReceipt:e=>CK(t,e),watchBlocks:e=>gge(t,e),watchBlockNumber:e=>wK(t,e),watchContractEvent:e=>pme(t,e),watchEvent:e=>mge(t,e),watchPendingTransactions:e=>bK(t,e)}}function Pme(t){return{addChain:e=>jle(t,e),deployContract:e=>Fde(t,e),getAddresses:()=>yge(t),getCallsStatus:e=>_K(t,e),getCapabilities:e=>bge(t,e),getChainId:()=>J0(t),getPermissions:()=>wge(t),prepareAuthorization:e=>AK(t,e),prepareTransactionRequest:e=>TC(t,e),requestAddresses:()=>xge(t),requestPermissions:e=>Nge(t,e),sendCalls:e=>vge(t,e),sendRawTransaction:e=>eM(t,e),sendTransaction:e=>RC(t,e),showCallsStatus:e=>Ege(t,e),signAuthorization:e=>Tge(t,e),signMessage:e=>SK(t,e),signTransaction:e=>Rge(t,e),signTypedData:e=>Pge(t,e),switchChain:e=>kge(t,e),waitForCallsStatus:e=>_ge(t,e),watchAsset:e=>fme(t,e),writeContract:e=>FK(t,e)}}async function MC(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new vme({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new yme;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new bme({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Cr(e.account??n.accounts[0]);if(o&&(o.address=Mu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new wme({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return HK({account:o,chain:a,name:"Connector Client",transport:l=>Eme(c)({...l,retryCount:0})})}async function Mk(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function Ome(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await MC(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Uo(o,iN,"estimateGas")({...s,account:i})}function GK(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(rde[t])}function By(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function kme(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Uo(o,XV,"multicall")({allowFailure:n,contracts:s,...i})}function qK(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Uo(s,Ll,"readContract")(r)}async function Dme(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>kme(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof NV)throw c;const l=()=>o.map(u=>qK(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Lme(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await J6(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await J6(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=bq(Sl(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Uo(c,JL,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Yg(u,GK(a)),symbol:d.nativeCurrency.symbol,value:u}}async function J6(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await Dme(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Yg(c??"0",GK(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function Z6(t){return t.state.chainId}function Cg(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Cg(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Cg(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Mme(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let q1=[];function Za(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Cg(q1,e)?q1:(q1=e,e)}let BR=[];function X6(t){const e=t.connectors;return Cg(BR,e)?BR:(BR=e,e)}function Ume(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Uo(s,qV,"getEnsName")(r)}function Uk(t,e={}){const n=Mme(t,e);return n==null?void 0:n.extend(Rme)}async function $me(t,e={}){return(await MC(t,e)).extend(Pme)}async function Bme(t,e){const{account:n,chainId:r,...s}=e,i=n??By(t).address,o=t.getClient({chainId:r});return Uo(o,TC,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let FR=!1;async function $k(t,e={}){var l,u;if(FR)return[];FR=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),FR=!1,a}async function Fme(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await MC(t,{account:n??void 0,chainId:r,connector:s}),await Uo(o,RC,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function jme(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await MC(t,{account:n,connector:r}),Uo(i,SK,"signMessage")({...s,...n?{account:n}:{}})}class Wd extends dd{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class zme extends dd{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function e8(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new zme({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new r_;return t.setState(a=>({...a,chainId:r})),i}function VK(t,e){const{onChange:n}=e;return t.subscribe(()=>By(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Cg(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Wme(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function KK(t,e){const{onChange:n}=e;return t.subscribe(()=>Za(t),n,{equalityFn:Cg})}function YK(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function Hme(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Uo(l,bK,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function Gme(t,e){const{onChange:n}=e;return t.subscribe(()=>Uk(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function QK(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Uo(i,CK,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Uo(i,pN,"getTransaction")({hash:a.transactionHash}),d=await Uo(i,kC,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?bq(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function JK(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await MC(t,{account:n??void 0,chainId:r,connector:s}),await Uo(o,FK,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function eqe(t){return t}wN.type="injected";function wN(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...qme[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:wN.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,y,m,w;const d=await this.getProvider();if(!d)throw new Wd;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(A=>Mu(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===jr.code)throw new jr(A);if(A.code===Vh.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>Mu(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(C=>{if(C.code===jr.code)throw C;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((m=c.storage)==null?void 0:m.removeItem(`${this.id}.disconnected`)),t.target||await((w=c.storage)==null?void 0:w.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===jr.code?new jr(A):A.code===Vh.code?new Vh(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Wd;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await lK(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Wd;return(await l.request({method:"eth_accounts"})).map(d=>Mu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Wd;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=nS(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(m=>window.addEventListener("ethereum#initialized",()=>m(p()),{once:!0}))]:[],new Promise(m=>setTimeout(()=>m(p()),g))]))return!0}throw new Wd}return!!(await II(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,y,m;const d=await this.getProvider();if(!d)throw new Wd;const h=c.chains.find(w=>w.id===u);if(!h)throw new kl(new r_);const f=new Promise(w=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),w())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(w){const v=w;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,...C}=h.blockExplorers??{};let S;l!=null&&l.blockExplorerUrls?S=l.blockExplorerUrls:A&&(S=[A.url,...Object.values(C).map(I=>I.url)]);let x;(y=l==null?void 0:l.rpcUrls)!=null&&y.length?x=l.rpcUrls:x=[((m=h.rpcUrls.default)==null?void 0:m.http[0])??""];const T={blockExplorerUrls:S,chainId:nt(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new jr(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new jr(A)}throw v.code===jr.code?new jr(v):new kl(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Mu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const qme={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:nS(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return nS(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:nS(t,"isPhantom")}}};function nS(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Vme(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Kme(){const t=new Set;let e=[];const n=()=>Vme(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Yme=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Qme=Yme;function Jme(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Bk=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Bk(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Bk(r)(n)}}}},Zme=(t,e)=>(n,r,s)=>{let i={storage:Jme(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,y;if(!l)return;o=!1,a.forEach(w=>{var v;return w((v=r())!=null?v:h)});const m=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return Bk(l.getItem.bind(l))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return[!0,i.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var v;const[A,C]=w;if(f=i.merge(C,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{m==null||m(f,void 0),f=r(),o=!0,c.forEach(w=>w(f))}).catch(w=>{m==null||m(void 0,w)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Xme=Zme,t8=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},jR=t=>t?t8(t):t8;var ZK={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],m=arguments.length,w,v;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),m){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(v=1,w=new Array(m-1);v<m;v++)w[v-1]=arguments[v];y.fn.apply(y.context,w)}else{var A=y.length,C;for(v=0;v<A;v++)switch(y[v].once&&this.removeListener(l,y[v].fn,void 0,!0),m){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,u);break;case 3:y[v].fn.call(y[v].context,u,d);break;case 4:y[v].fn.call(y[v].context,u,d,h);break;default:if(!w)for(C=1,w=new Array(m-1);C<m;C++)w[C-1]=arguments[C];y[v].fn.apply(y[v].context,w)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,y=[],m=p.length;g<m;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(ZK);var eye=ZK.exports;const tye=Hg(eye);class nye{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new tye})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function rye(t){return new nye(t)}function sye(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function n8(t,e){return t.slice(0,e).join(".")||"."}function r8(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function iye(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=r8(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=r8(s,c);if(u!==0)return r?e.call(this,a,c,n8(i,u)):`[ref=${n8(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function oye(t,e,n,r){return JSON.stringify(t,iye((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function aye(t){const{deserialize:e=sye,key:n="wagmi",serialize:r=oye,storage:s=XK}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const XK={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function cye(){const t=typeof window<"u"&&window.localStorage?window.localStorage:XK;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const Fk=256;let V1=Fk,K1;function lye(t=11){if(!K1||V1+t>Fk*2){K1="",V1=0;for(let e=0;e<Fk;e++)K1+=(256+Math.random()*256|0).toString(16).substring(1)}return K1.substring(V1,V1+++t)}function uye(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=aye({storage:cye()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Kme():void 0,a=jR(()=>i.chains),c=jR(()=>{const C=[],S=new Set;for(const x of i.connectors??[]){const T=l(x);if(C.push(T),!s&&T.rdns){const I=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const k of I)S.add(k)}}if(!s&&o){const x=o.getProviders();for(const T of x)S.has(T.info.rdns)||C.push(l(u(T)))}return C});function l(C){var T;const S=rye(lye()),x={...C({emitter:S,chains:a.getState(),storage:n,transports:i.transports}),emitter:S,uid:S.uid};return S.on("connect",v),(T=x.setup)==null||T.call(x),x}function u(C){const{info:S}=C,x=C.provider;return wN({target:{...S,id:S.rdns,provider:x}})}const d=new Map;function h(C={}){const S=C.chainId??y.getState().chainId,x=a.getState().find(I=>I.id===S);if(C.chainId&&!x)throw new r_;{const I=d.get(y.getState().chainId);if(I&&!x)return I;if(!x)throw new r_}{const I=d.get(S);if(I)return I}let T;if(i.client)T=i.client({chain:x});else{const I=x.id,k=a.getState().map(G=>G.id),O={},B=Object.entries(i);for(const[G,W]of B)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof W=="object")if(I in W)O[G]=W[I];else{if(k.some(N=>N in W))continue;O[G]=W}else O[G]=W;T=HK({...O,chain:x,batch:O.batch??{multicall:!0},transport:G=>i.transports[I]({...G,connectors:c})})}return d.set(S,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";eS.startsWith(g)?p=Number.parseInt(eS.replace(g,"")):p=Number.parseInt(eS.split(".")[0]??"0");const y=jR(Qme(n?Xme(f,{migrate(C,S){if(S===p)return C;const x=f(),T=m(C,x.chainId);return{...x,chainId:T}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([S,x])=>{const{id:T,name:I,type:k,uid:O}=x.connector;return[S,{...x,connector:{id:T,name:I,type:k,uid:O}}]})},chainId:C.chainId,current:C.current}},merge(C,S){typeof C=="object"&&C&&"status"in C&&delete C.status;const x=m(C,S.chainId);return{...S,...C,chainId:x}},skipHydration:s,storage:n,version:p}):f));y.setState(f());function m(C,S){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(x=>x.id===C.chainId)?C.chainId:S}r&&y.subscribe(({connections:C,current:S})=>{var x;return S?(x=C.get(S))==null?void 0:x.chainId:void 0},C=>{if(a.getState().some(x=>x.id===C))return y.setState(x=>({...x,chainId:C??x.chainId}))}),o==null||o.subscribe(C=>{const S=new Set,x=new Set;for(const I of c.getState())if(S.add(I.id),I.rdns){const k=typeof I.rdns=="string"?[I.rdns]:I.rdns;for(const O of k)x.add(O)}const T=[];for(const I of C){if(x.has(I.info.rdns))continue;const k=l(u(I));S.has(k.id)||T.push(k)}n&&!y.persist.hasHydrated()||c.setState(I=>[...I,...T],!0)});function w(C){y.setState(S=>{const x=S.connections.get(C.uid);return x?{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts??x.accounts,chainId:C.chainId??x.chainId,connector:x.connector})}:S})}function v(C){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(S=>{const x=c.getState().find(T=>T.uid===C.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",w),x.emitter.listenerCount("change")||x.emitter.on("change",w),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:x}),current:C.uid,status:"connected"}):S})}function A(C){y.setState(S=>{const x=S.connections.get(C.uid);if(x){const I=x.connector;I.emitter.listenerCount("change")&&x.connector.emitter.off("change",w),I.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),I.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(S.connections.delete(C.uid),S.connections.size===0)return{...S,connections:new Map,current:null,status:"disconnected"};const T=S.connections.values().next().value;return{...S,connections:new Map(S.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(C){let S;typeof C=="function"?S=C(y.getState()):S=C;const x=f();typeof S!="object"&&(S=x),Object.keys(x).some(I=>!(I in S))&&(S=x),y.setState(S,!0)},subscribe(C,S,x){return y.subscribe(C,S,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const S=typeof C=="function"?C(a.getState()):C;if(S.length!==0)return a.setState(S,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:w,connect:v,disconnect:A}}}}function dye(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?$k(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function hye(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=dye(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const eY=D.createContext(void 0);function fye(t){const{children:e,config:n}=t,r={value:n};return D.createElement(hye,t,D.createElement(eY.Provider,r,e))}const pye="2.15.6",gye=()=>`wagmi@${pye}`;let mye=class extends dd{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return gye()}};class yye extends mye{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Oa(t={}){const e=t.config??D.useContext(eY);if(!e)throw new yye;return e}var tY={exports:{}},nY={},rY={exports:{}},sY={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0=D;function wye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bye=typeof Object.is=="function"?Object.is:wye,vye=g0.useState,Eye=g0.useEffect,_ye=g0.useLayoutEffect,Cye=g0.useDebugValue;function Aye(t,e){var n=e(),r=vye({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return _ye(function(){s.value=n,s.getSnapshot=e,zR(s)&&i({inst:s})},[t,n,e]),Eye(function(){return zR(s)&&i({inst:s}),t(function(){zR(s)&&i({inst:s})})},[t]),Cye(n),n}function zR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bye(t,n)}catch{return!0}}function Sye(t,e){return e()}var Iye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Sye:Aye;sY.useSyncExternalStore=g0.useSyncExternalStore!==void 0?g0.useSyncExternalStore:Iye;rY.exports=sY;var iY=rY.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bN=D,xye=iY;function Nye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tye=typeof Object.is=="function"?Object.is:Nye,Rye=xye.useSyncExternalStore,Pye=bN.useRef,Oye=bN.useEffect,kye=bN.useMemo,Dye=bN.useDebugValue;nY.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Pye(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=kye(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,Tye(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=Rye(t,i[0],i[1]);return Oye(function(){o.hasValue=!0,o.value=a},[a]),Dye(a),a};tY.exports=nY;var oY=tY.exports;const WR=t=>typeof t=="object"&&!Array.isArray(t);function Lye(t,e,n=e,r=Cg){const s=D.useRef([]),i=oY.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(WR(o)&&WR(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(WR(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function UC(t={}){const e=Oa(t);return Lye(n=>VK(e,{onChange:n}),()=>By(e))}var tb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ag=typeof window>"u"||"Deno"in globalThis;function ui(){}function Mye(t,e){return typeof t=="function"?t(e):t}function jk(t){return typeof t=="number"&&t>=0&&t!==1/0}function aY(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Kh(t,e){return typeof t=="function"?t(e):t}function ya(t,e){return typeof t=="function"?t(e):t}function s8(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==vM(o,e.options))return!1}else if(!s_(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function i8(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Sg(e.options.mutationKey)!==Sg(i))return!1}else if(!s_(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function vM(t,e){return((e==null?void 0:e.queryKeyHashFn)||Sg)(t)}function Sg(t){return JSON.stringify(t,(e,n)=>zk(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function s_(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>s_(t[n],e[n])):!1}function EM(t,e){if(t===e)return t;const n=o8(t)&&o8(e);if(n||zk(t)&&zk(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=EM(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function RI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function o8(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function zk(t){if(!a8(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!a8(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function a8(t){return Object.prototype.toString.call(t)==="[object Object]"}function Uye(t){return new Promise(e=>{setTimeout(e,t)})}function Wk(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?EM(t,e):e}function $ye(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Bye(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var _M=Symbol();function cY(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===_M?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function lY(t,e){return typeof t=="function"?t(...e):!!t}var Cp,Zd,Qy,cz,Fye=(cz=class extends tb{constructor(){super();K(this,Cp);K(this,Zd);K(this,Qy);U(this,Qy,e=>{if(!Ag&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){_(this,Zd)||this.setEventListener(_(this,Qy))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,Zd))==null||e.call(this),U(this,Zd,void 0))}setEventListener(e){var n;U(this,Qy,e),(n=_(this,Zd))==null||n.call(this),U(this,Zd,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){_(this,Cp)!==e&&(U(this,Cp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof _(this,Cp)=="boolean"?_(this,Cp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Cp=new WeakMap,Zd=new WeakMap,Qy=new WeakMap,cz),CM=new Fye,Jy,Xd,Zy,lz,jye=(lz=class extends tb{constructor(){super();K(this,Jy,!0);K(this,Xd);K(this,Zy);U(this,Zy,e=>{if(!Ag&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){_(this,Xd)||this.setEventListener(_(this,Zy))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,Xd))==null||e.call(this),U(this,Xd,void 0))}setEventListener(e){var n;U(this,Zy,e),(n=_(this,Xd))==null||n.call(this),U(this,Xd,e(this.setOnline.bind(this)))}setOnline(e){_(this,Jy)!==e&&(U(this,Jy,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return _(this,Jy)}},Jy=new WeakMap,Xd=new WeakMap,Zy=new WeakMap,lz),PI=new jye;function Hk(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function zye(t){return Math.min(1e3*2**t,3e4)}function uY(t){return(t??"online")==="online"?PI.isOnline():!0}var dY=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function HR(t){return t instanceof dY}function hY(t){let e=!1,n=0,r=!1,s;const i=Hk(),o=g=>{var y;r||(h(new dY(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>CM.isFocused()&&(t.networkMode==="always"||PI.isOnline())&&t.canRun(),u=()=>uY(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var y;s=m=>{(r||l())&&g(m)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(d).catch(m=>{var S;if(r)return;const w=t.retry??(Ag?0:3),v=t.retryDelay??zye,A=typeof v=="function"?v(n,m):v,C=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,m);if(e||!C){h(m);return}n++,(S=t.onFail)==null||S.call(t,n,m),Uye(A).then(()=>l()?void 0:f()).then(()=>{e?h(m):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var Wye=t=>setTimeout(t,0);function Hye(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Wye;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Hr=Hye(),Ap,uz,fY=(uz=class{constructor(){K(this,Ap)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jk(this.gcTime)&&U(this,Ap,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ag?1/0:5*60*1e3))}clearGcTimeout(){_(this,Ap)&&(clearTimeout(_(this,Ap)),U(this,Ap,void 0))}},Ap=new WeakMap,uz),Xy,Sp,la,Ip,Hs,Q_,xp,ec,cu,dz,Gye=(dz=class extends fY{constructor(e){super();K(this,ec);K(this,Xy);K(this,Sp);K(this,la);K(this,Ip);K(this,Hs);K(this,Q_);K(this,xp);U(this,xp,!1),U(this,Q_,e.defaultOptions),this.setOptions(e.options),this.observers=[],U(this,Ip,e.client),U(this,la,_(this,Ip).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,U(this,Xy,qye(this.options)),this.state=e.state??_(this,Xy),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,Hs))==null?void 0:e.promise}setOptions(e){this.options={..._(this,Q_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,la).remove(this)}setData(e,n){const r=Wk(this.state.data,e,this.options);return fe(this,ec,cu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){fe(this,ec,cu).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=_(this,Hs))==null?void 0:r.promise;return(s=_(this,Hs))==null||s.cancel(e),n?n.then(ui).catch(ui):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,Xy))}isActive(){return this.observers.some(e=>ya(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_M||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Kh(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!aY(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Hs))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Hs))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,la).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(_(this,Hs)&&(_(this,xp)?_(this,Hs).cancel({revert:!0}):_(this,Hs).cancelRetry()),this.scheduleGc()),_(this,la).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||fe(this,ec,cu).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(_(this,Hs))return _(this,Hs).continueRetry(),_(this,Hs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(U(this,xp,!0),r.signal)})},i=()=>{const h=cY(this.options,n),p=(()=>{const g={client:_(this,Ip),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return U(this,xp,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:_(this,Ip),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),U(this,Sp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&fe(this,ec,cu).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,y;HR(h)&&h.silent||fe(this,ec,cu).call(this,{type:"error",error:h}),HR(h)||((p=(f=_(this,la).config).onError)==null||p.call(f,h,this),(y=(g=_(this,la).config).onSettled)==null||y.call(g,this.state.data,h,this)),this.scheduleGc()};return U(this,Hs,hY({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(m){c(m);return}(p=(f=_(this,la).config).onSuccess)==null||p.call(f,h,this),(y=(g=_(this,la).config).onSettled)==null||y.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{fe(this,ec,cu).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{fe(this,ec,cu).call(this,{type:"pause"})},onContinue:()=>{fe(this,ec,cu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),_(this,Hs).start()}},Xy=new WeakMap,Sp=new WeakMap,la=new WeakMap,Ip=new WeakMap,Hs=new WeakMap,Q_=new WeakMap,xp=new WeakMap,ec=new WeakSet,cu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...pY(r.data,this.options),fetchMeta:e.meta??null};case"success":return U(this,Sp,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return HR(s)&&s.revert&&_(this,Sp)?{..._(this,Sp),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Hr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),_(this,la).notify({query:this,type:"updated",action:e})})},dz);function pY(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uY(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function qye(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Jc,hz,Vye=(hz=class extends tb{constructor(e={}){super();K(this,Jc);this.config=e,U(this,Jc,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??vM(s,n);let o=this.get(i);return o||(o=new Gye({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){_(this,Jc).has(e.queryHash)||(_(this,Jc).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=_(this,Jc).get(e.queryHash);n&&(e.destroy(),n===e&&_(this,Jc).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Hr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,Jc).get(e)}getAll(){return[..._(this,Jc).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>s8(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>s8(e,r)):n}notify(e){Hr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Hr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Hr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Jc=new WeakMap,hz),Zc,ii,Np,Xc,Ud,fz,Kye=(fz=class extends fY{constructor(e){super();K(this,Xc);K(this,Zc);K(this,ii);K(this,Np);this.mutationId=e.mutationId,U(this,ii,e.mutationCache),U(this,Zc,[]),this.state=e.state||gY(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,Zc).includes(e)||(_(this,Zc).push(e),this.clearGcTimeout(),_(this,ii).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){U(this,Zc,_(this,Zc).filter(n=>n!==e)),this.scheduleGc(),_(this,ii).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,Zc).length||(this.state.status==="pending"?this.scheduleGc():_(this,ii).remove(this))}continue(){var e;return((e=_(this,Np))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,y,m,w,v,A,C,S,x,T;const n=()=>{fe(this,Xc,Ud).call(this,{type:"continue"})};U(this,Np,hY({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(I,k)=>{fe(this,Xc,Ud).call(this,{type:"failed",failureCount:I,error:k})},onPause:()=>{fe(this,Xc,Ud).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,ii).canRun(this)}));const r=this.state.status==="pending",s=!_(this,Np).canStart();try{if(r)n();else{fe(this,Xc,Ud).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=_(this,ii).config).onMutate)==null?void 0:o.call(i,e,this));const k=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));k!==this.state.context&&fe(this,Xc,Ud).call(this,{type:"pending",context:k,variables:e,isPaused:s})}const I=await _(this,Np).start();return await((u=(l=_(this,ii).config).onSuccess)==null?void 0:u.call(l,I,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,I,e,this.state.context)),await((p=(f=_(this,ii).config).onSettled)==null?void 0:p.call(f,I,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,I,null,e,this.state.context)),fe(this,Xc,Ud).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(m=_(this,ii).config).onError)==null?void 0:w.call(m,I,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,I,e,this.state.context)),await((S=(C=_(this,ii).config).onSettled)==null?void 0:S.call(C,void 0,I,this.state.variables,this.state.context,this)),await((T=(x=this.options).onSettled)==null?void 0:T.call(x,void 0,I,e,this.state.context)),I}finally{fe(this,Xc,Ud).call(this,{type:"error",error:I})}}finally{_(this,ii).runNext(this)}}},Zc=new WeakMap,ii=new WeakMap,Np=new WeakMap,Xc=new WeakSet,Ud=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Hr.batch(()=>{_(this,Zc).forEach(r=>{r.onMutationUpdate(e)}),_(this,ii).notify({mutation:this,type:"updated",action:e})})},fz);function gY(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yu,tc,J_,pz,Yye=(pz=class extends tb{constructor(e={}){super();K(this,yu);K(this,tc);K(this,J_);this.config=e,U(this,yu,new Set),U(this,tc,new Map),U(this,J_,0)}build(e,n,r){const s=new Kye({mutationCache:this,mutationId:++md(this,J_)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){_(this,yu).add(e);const n=Y1(e);if(typeof n=="string"){const r=_(this,tc).get(n);r?r.push(e):_(this,tc).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_(this,yu).delete(e)){const n=Y1(e);if(typeof n=="string"){const r=_(this,tc).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&_(this,tc).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Y1(e);if(typeof n=="string"){const r=_(this,tc).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Y1(e);if(typeof n=="string"){const s=(r=_(this,tc).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Hr.batch(()=>{_(this,yu).forEach(e=>{this.notify({type:"removed",mutation:e})}),_(this,yu).clear(),_(this,tc).clear()})}getAll(){return Array.from(_(this,yu))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>i8(n,r))}findAll(e={}){return this.getAll().filter(n=>i8(e,n))}notify(e){Hr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Hr.batch(()=>Promise.all(e.map(n=>n.continue().catch(ui))))}},yu=new WeakMap,tc=new WeakMap,J_=new WeakMap,pz);function Y1(t){var e;return(e=t.options.scope)==null?void 0:e.id}function c8(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},m=cY(e.options,e.fetchOptions),w=async(v,A,C)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:A,direction:C?"backward":"forward",meta:e.options.meta};return y(O),O})(),T=await m(x),{maxPages:I}=e.options,k=C?Bye:$ye;return{pages:k(v.pages,T,I),pageParams:k(v.pageParams,A,I)}};if(s&&i.length){const v=s==="backward",A=v?Qye:l8,C={pages:i,pageParams:o},S=A(r,C);a=await w(C,S,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:l8(r,a);if(c>0&&A==null)break;a=await w(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function l8(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Qye(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var yr,eh,th,ew,tw,nh,nw,rw,gz,Jye=(gz=class{constructor(t={}){K(this,yr);K(this,eh);K(this,th);K(this,ew);K(this,tw);K(this,nh);K(this,nw);K(this,rw);U(this,yr,t.queryCache||new Vye),U(this,eh,t.mutationCache||new Yye),U(this,th,t.defaultOptions||{}),U(this,ew,new Map),U(this,tw,new Map),U(this,nh,0)}mount(){md(this,nh)._++,_(this,nh)===1&&(U(this,nw,CM.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,yr).onFocus())})),U(this,rw,PI.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,yr).onOnline())})))}unmount(){var t,e;md(this,nh)._--,_(this,nh)===0&&((t=_(this,nw))==null||t.call(this),U(this,nw,void 0),(e=_(this,rw))==null||e.call(this),U(this,rw,void 0))}isFetching(t){return _(this,yr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _(this,eh).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,yr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=_(this,yr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Kh(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return _(this,yr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=_(this,yr).get(r.queryHash),i=s==null?void 0:s.state.data,o=Mye(e,i);if(o!==void 0)return _(this,yr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Hr.batch(()=>_(this,yr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,yr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=_(this,yr);Hr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=_(this,yr);return Hr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Hr.batch(()=>_(this,yr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ui).catch(ui)}invalidateQueries(t,e={}){return Hr.batch(()=>(_(this,yr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Hr.batch(()=>_(this,yr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ui)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ui)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=_(this,yr).build(this,e);return n.isStaleByTime(Kh(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ui).catch(ui)}fetchInfiniteQuery(t){return t.behavior=c8(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ui).catch(ui)}ensureInfiniteQueryData(t){return t.behavior=c8(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return PI.isOnline()?_(this,eh).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,yr)}getMutationCache(){return _(this,eh)}getDefaultOptions(){return _(this,th)}setDefaultOptions(t){U(this,th,t)}setQueryDefaults(t,e){_(this,ew).set(Sg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._(this,ew).values()],n={};return e.forEach(r=>{s_(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){_(this,tw).set(Sg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._(this,tw).values()],n={};return e.forEach(r=>{s_(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._(this,th).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=vM(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===_M&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._(this,th).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_(this,yr).clear(),_(this,eh).clear()}},yr=new WeakMap,eh=new WeakMap,th=new WeakMap,ew=new WeakMap,tw=new WeakMap,nh=new WeakMap,nw=new WeakMap,rw=new WeakMap,gz),Bi,Qt,Z_,oi,Tp,sw,rh,sh,X_,iw,ow,Rp,Pp,ih,aw,En,uv,Gk,qk,Vk,Kk,Yk,Qk,Jk,mY,mz,Zye=(mz=class extends tb{constructor(e,n){super();K(this,En);K(this,Bi);K(this,Qt);K(this,Z_);K(this,oi);K(this,Tp);K(this,sw);K(this,rh);K(this,sh);K(this,X_);K(this,iw);K(this,ow);K(this,Rp);K(this,Pp);K(this,ih);K(this,aw,new Set);this.options=n,U(this,Bi,e),U(this,sh,null),U(this,rh,Hk()),this.options.experimental_prefetchInRender||_(this,rh).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,Qt).addObserver(this),u8(_(this,Qt),this.options)?fe(this,En,uv).call(this):this.updateResult(),fe(this,En,Kk).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Zk(_(this,Qt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Zk(_(this,Qt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,fe(this,En,Yk).call(this),fe(this,En,Qk).call(this),_(this,Qt).removeObserver(this)}setOptions(e){const n=this.options,r=_(this,Qt);if(this.options=_(this,Bi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ya(this.options.enabled,_(this,Qt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");fe(this,En,Jk).call(this),_(this,Qt).setOptions(this.options),n._defaulted&&!RI(this.options,n)&&_(this,Bi).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,Qt),observer:this});const s=this.hasListeners();s&&d8(_(this,Qt),r,this.options,n)&&fe(this,En,uv).call(this),this.updateResult(),s&&(_(this,Qt)!==r||ya(this.options.enabled,_(this,Qt))!==ya(n.enabled,_(this,Qt))||Kh(this.options.staleTime,_(this,Qt))!==Kh(n.staleTime,_(this,Qt)))&&fe(this,En,Gk).call(this);const i=fe(this,En,qk).call(this);s&&(_(this,Qt)!==r||ya(this.options.enabled,_(this,Qt))!==ya(n.enabled,_(this,Qt))||i!==_(this,ih))&&fe(this,En,Vk).call(this,i)}getOptimisticResult(e){const n=_(this,Bi).getQueryCache().build(_(this,Bi),e),r=this.createResult(n,e);return ewe(this,r)&&(U(this,oi,r),U(this,sw,this.options),U(this,Tp,_(this,Qt).state)),r}getCurrentResult(){return _(this,oi)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){_(this,aw).add(e)}getCurrentQuery(){return _(this,Qt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=_(this,Bi).defaultQueryOptions(e),r=_(this,Bi).getQueryCache().build(_(this,Bi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return fe(this,En,uv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,oi)))}createResult(e,n){var I;const r=_(this,Qt),s=this.options,i=_(this,oi),o=_(this,Tp),a=_(this,sw),l=e!==r?e.state:_(this,Z_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const k=this.hasListeners(),O=!k&&u8(e,n),B=k&&d8(e,r,n,s);(O||B)&&(d={...d,...pY(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;f=d.data;let m=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(k=i.data,m=!0):k=typeof n.placeholderData=="function"?n.placeholderData((I=_(this,ow))==null?void 0:I.state.data,_(this,ow)):n.placeholderData,k!==void 0&&(y="success",f=Wk(i==null?void 0:i.data,k,n),h=!0)}if(n.select&&f!==void 0&&!m)if(i&&f===(o==null?void 0:o.data)&&n.select===_(this,X_))f=_(this,iw);else try{U(this,X_,n.select),f=n.select(f),f=Wk(i==null?void 0:i.data,f,n),U(this,iw,f),U(this,sh,null)}catch(k){U(this,sh,k)}_(this,sh)&&(p=_(this,sh),f=_(this,iw),g=Date.now(),y="error");const w=d.fetchStatus==="fetching",v=y==="pending",A=y==="error",C=v&&w,S=f!==void 0,T={status:y,fetchStatus:d.fetchStatus,isPending:v,isSuccess:y==="success",isError:A,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!v,isLoadingError:A&&!S,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&S,isStale:AM(e,n),refetch:this.refetch,promise:_(this,rh),isEnabled:ya(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=G=>{T.status==="error"?G.reject(T.error):T.data!==void 0&&G.resolve(T.data)},O=()=>{const G=U(this,rh,T.promise=Hk());k(G)},B=_(this,rh);switch(B.status){case"pending":e.queryHash===r.queryHash&&k(B);break;case"fulfilled":(T.status==="error"||T.data!==B.value)&&O();break;case"rejected":(T.status!=="error"||T.error!==B.reason)&&O();break}}return T}updateResult(){const e=_(this,oi),n=this.createResult(_(this,Qt),this.options);if(U(this,Tp,_(this,Qt).state),U(this,sw,this.options),_(this,Tp).data!==void 0&&U(this,ow,_(this,Qt)),RI(n,e))return;U(this,oi,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!_(this,aw).size)return!0;const o=new Set(i??_(this,aw));return this.options.throwOnError&&o.add("error"),Object.keys(_(this,oi)).some(a=>{const c=a;return _(this,oi)[c]!==e[c]&&o.has(c)})};fe(this,En,mY).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&fe(this,En,Kk).call(this)}},Bi=new WeakMap,Qt=new WeakMap,Z_=new WeakMap,oi=new WeakMap,Tp=new WeakMap,sw=new WeakMap,rh=new WeakMap,sh=new WeakMap,X_=new WeakMap,iw=new WeakMap,ow=new WeakMap,Rp=new WeakMap,Pp=new WeakMap,ih=new WeakMap,aw=new WeakMap,En=new WeakSet,uv=function(e){fe(this,En,Jk).call(this);let n=_(this,Qt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(ui)),n},Gk=function(){fe(this,En,Yk).call(this);const e=Kh(this.options.staleTime,_(this,Qt));if(Ag||_(this,oi).isStale||!jk(e))return;const r=aY(_(this,oi).dataUpdatedAt,e)+1;U(this,Rp,setTimeout(()=>{_(this,oi).isStale||this.updateResult()},r))},qk=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,Qt)):this.options.refetchInterval)??!1},Vk=function(e){fe(this,En,Qk).call(this),U(this,ih,e),!(Ag||ya(this.options.enabled,_(this,Qt))===!1||!jk(_(this,ih))||_(this,ih)===0)&&U(this,Pp,setInterval(()=>{(this.options.refetchIntervalInBackground||CM.isFocused())&&fe(this,En,uv).call(this)},_(this,ih)))},Kk=function(){fe(this,En,Gk).call(this),fe(this,En,Vk).call(this,fe(this,En,qk).call(this))},Yk=function(){_(this,Rp)&&(clearTimeout(_(this,Rp)),U(this,Rp,void 0))},Qk=function(){_(this,Pp)&&(clearInterval(_(this,Pp)),U(this,Pp,void 0))},Jk=function(){const e=_(this,Bi).getQueryCache().build(_(this,Bi),this.options);if(e===_(this,Qt))return;const n=_(this,Qt);U(this,Qt,e),U(this,Z_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},mY=function(e){Hr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(_(this,oi))}),_(this,Bi).getQueryCache().notify({query:_(this,Qt),type:"observerResultsUpdated"})})},mz);function Xye(t,e){return ya(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function u8(t,e){return Xye(t,e)||t.state.data!==void 0&&Zk(t,e,e.refetchOnMount)}function Zk(t,e,n){if(ya(e.enabled,t)!==!1&&Kh(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&AM(t,e)}return!1}function d8(t,e,n,r){return(t!==e||ya(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&AM(t,n)}function AM(t,e){return ya(e.enabled,t)!==!1&&t.isStaleByTime(Kh(e.staleTime,t))}function ewe(t,e){return!RI(t.getCurrentResult(),e)}var oh,ah,Fi,wu,Ku,rS,Xk,yz,twe=(yz=class extends tb{constructor(n,r){super();K(this,Ku);K(this,oh);K(this,ah);K(this,Fi);K(this,wu);U(this,oh,n),this.setOptions(r),this.bindMethods(),fe(this,Ku,rS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=_(this,oh).defaultMutationOptions(n),RI(this.options,r)||_(this,oh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,Fi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Sg(r.mutationKey)!==Sg(this.options.mutationKey)?this.reset():((s=_(this,Fi))==null?void 0:s.state.status)==="pending"&&_(this,Fi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=_(this,Fi))==null||n.removeObserver(this)}onMutationUpdate(n){fe(this,Ku,rS).call(this),fe(this,Ku,Xk).call(this,n)}getCurrentResult(){return _(this,ah)}reset(){var n;(n=_(this,Fi))==null||n.removeObserver(this),U(this,Fi,void 0),fe(this,Ku,rS).call(this),fe(this,Ku,Xk).call(this)}mutate(n,r){var s;return U(this,wu,r),(s=_(this,Fi))==null||s.removeObserver(this),U(this,Fi,_(this,oh).getMutationCache().build(_(this,oh),this.options)),_(this,Fi).addObserver(this),_(this,Fi).execute(n)}},oh=new WeakMap,ah=new WeakMap,Fi=new WeakMap,wu=new WeakMap,Ku=new WeakSet,rS=function(){var r;const n=((r=_(this,Fi))==null?void 0:r.state)??gY();U(this,ah,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Xk=function(n){Hr.batch(()=>{var r,s,i,o,a,c,l,u;if(_(this,wu)&&this.hasListeners()){const d=_(this,ah).variables,h=_(this,ah).context;(n==null?void 0:n.type)==="success"?((s=(r=_(this,wu)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=_(this,wu)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=_(this,wu)).onError)==null||c.call(a,n.error,d,h),(u=(l=_(this,wu)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(_(this,ah))})})},yz);function nwe(t,e){return EM(t,e)}function rwe(t){return JSON.stringify(t,(e,n)=>swe(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function swe(t){if(!h8(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!h8(n)||!n.hasOwnProperty("isPrototypeOf"))}function h8(t){return Object.prototype.toString.call(t)==="[object Object]"}function vN(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:m,initialPageParam:w,_optimisticResults:v,enabled:A,notifyOnChangeProps:C,placeholderData:S,refetchInterval:x,refetchIntervalInBackground:T,refetchOnMount:I,refetchOnReconnect:k,refetchOnWindowFocus:O,retryOnMount:B,select:G,staleTime:W,suspense:R,throwOnError:N,config:M,connector:P,query:L,...j}=t;return j}function iwe(t){return{mutationFn(e){return tS(t,e)},mutationKey:["connect"]}}function owe(t){return{mutationFn(e){return Mk(t,e)},mutationKey:["disconnect"]}}function awe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return Ume(t,{...i,address:r})},queryKey:cwe(e)}}function cwe(t={}){return["ensName",vN(t)]}function lwe(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return $me(t,{...o,connector:r})},queryKey:uwe(e)}}function uwe(t={}){const{connector:e,...n}=t;return["walletClient",{...vN(n),connectorUid:e==null?void 0:e.uid}]}function dwe(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return qK(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:hwe(e)}}function hwe(t={}){const{abi:e,...n}=t;return["readContract",vN(n)]}function fwe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return QK(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:pwe(e)}}function pwe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",vN(n)]}function gwe(t){return{mutationFn(e){return JK(t,e)},mutationKey:["writeContract"]}}var yY=D.createContext(void 0),SM=t=>{const e=D.useContext(yY);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},mwe=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),b.jsx(yY.Provider,{value:t,children:e})),wY=D.createContext(!1),ywe=()=>D.useContext(wY);wY.Provider;function wwe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var bwe=D.createContext(wwe()),vwe=()=>D.useContext(bwe),Ewe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},_we=t=>{D.useEffect(()=>{t.clearReset()},[t])},Cwe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||lY(n,[t.error,r])),Awe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Swe=(t,e)=>t.isLoading&&t.isFetching&&!e,Iwe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,f8=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function xwe(t,e,n){var d,h,f,p,g;const r=ywe(),s=vwe(),i=SM(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",Awe(o),Ewe(o,s),_we(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(y=>{const m=u?c.subscribe(Hr.batchCalls(y)):ui;return c.updateResult(),m},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),Iwe(o,l))throw f8(o,c,s);if(Cwe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Ag&&Swe(l,r)){const y=a?f8(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(ui).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function Nwe(t,e){return xwe(t,Zye)}function IM(t,e){const n=SM(),[r]=D.useState(()=>new twe(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(Hr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(ui)},[r]);if(s.error&&lY(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function EN(t){const e=Nwe({...t,queryKeyHashFn:rwe});return e.queryKey=t.queryKey,e}function _N(t={}){const e=Oa(t);return D.useSyncExternalStore(n=>Wme(e,{onChange:n}),()=>Z6(e),()=>Z6(e))}function Twe(t={}){const e=Oa(t);return D.useSyncExternalStore(n=>YK(e,{onChange:n}),()=>X6(e),()=>X6(e))}function bY(t={}){const{mutation:e}=t,n=Oa(t),r=iwe(n),{mutate:s,mutateAsync:i,...o}=IM({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:Twe({config:n})}}function Rwe(t={}){const e=Oa(t);return D.useSyncExternalStore(n=>KK(e,{onChange:n}),()=>Za(e),()=>Za(e))}function vY(t={}){const{mutation:e}=t,n=Oa(t),r=owe(n),{mutate:s,mutateAsync:i,...o}=IM({...e,...r});return{...o,connectors:Rwe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function EY(t={}){const{address:e,query:n={}}=t,r=Oa(t),s=_N({config:r}),i=awe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return EN({...n,...i,enabled:o})}function Pwe(t={}){const e=Oa(t);return oY.useSyncExternalStoreWithSelector(n=>Gme(e,{onChange:n}),()=>Uk(e,t),()=>Uk(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function p8(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=Oa(t),a=_N({config:o}),c=dwe(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return EN({...s,...c,enabled:l,structuralSharing:s.structuralSharing??nwe})}function _Y(t={}){const{query:e={},...n}=t,r=Oa(n),s=SM(),{address:i,connector:o,status:a}=UC({config:r}),c=_N({config:r}),l=t.connector??o,{queryKey:u,...d}=lwe(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),EN({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function GR(t={}){const{hash:e,query:n={}}=t,r=Oa(t),s=_N({config:r}),i=fwe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return EN({...n,...i,enabled:o})}function qR(t={}){const{mutation:e}=t,n=Oa(t),r=gwe(n),{mutate:s,mutateAsync:i,...o}=IM({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const Owe="_verified_lvyh0_1",xM={verified:Owe},kwe=()=>b.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:xM.verified,children:b.jsx("g",{children:b.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Dwe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:xM.verified,children:b.jsxs("g",{children:[b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[b.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),b.jsx("stop",{offset:".539",stopColor:"#cd8105"}),b.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),b.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),b.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),b.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[b.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),b.jsx("stop",{offset:".406",stopColor:"#e2b719"}),b.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),b.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[b.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),b.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),b.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Lwe=()=>b.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:xM.verified,children:b.jsx("g",{children:b.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function CY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=CY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Yh(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=CY(t))&&(r&&(r+=" "),r+=e);return r}const Mwe="_root_98iqw_1",Uwe="_article_98iqw_21",g8={root:Mwe,article:Uwe},NM=({className:t,children:e})=>b.jsx("div",{className:Yh("react-tweet-theme",g8.root,t),children:b.jsx("article",{className:g8.article,children:e})}),AY=t=>b.jsx("img",{...t}),$we="_header_nqq4j_1",Bwe="_avatar_nqq4j_11",Fwe="_avatarOverflow_nqq4j_16",jwe="_avatarSquare_nqq4j_23",zwe="_avatarShadow_nqq4j_26",Wwe="_author_nqq4j_37",Hwe="_authorLink_nqq4j_44",Gwe="_authorVerified_nqq4j_53",qwe="_authorLinkText_nqq4j_56",Vwe="_authorMeta_nqq4j_63",Kwe="_authorFollow_nqq4j_66",Ywe="_username_nqq4j_69",Qwe="_follow_nqq4j_74",Jwe="_separator_nqq4j_82",Zwe="_brand_nqq4j_86",Xwe="_twitterIcon_nqq4j_90",ms={header:$we,avatar:Bwe,avatarOverflow:Fwe,avatarSquare:jwe,avatarShadow:zwe,author:Wwe,authorLink:Hwe,authorVerified:Gwe,authorLinkText:qwe,authorMeta:Vwe,authorFollow:Kwe,username:Ywe,follow:Qwe,separator:Jwe,brand:Zwe,twitterIcon:Xwe},e0e="_verifiedOld_lcna5_1",t0e="_verifiedBlue_lcna5_4",n0e="_verifiedGovernment_lcna5_7",VR={verifiedOld:e0e,verifiedBlue:t0e,verifiedGovernment:n0e},SY=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=b.jsx(kwe,{}),s=VR.verifiedBlue;if(n)switch(t.is_blue_verified||(s=VR.verifiedOld),t.verified_type){case"Government":r=b.jsx(Lwe,{}),s=VR.verifiedGovernment;break;case"Business":r=b.jsx(Dwe,{}),s=null;break}return n?b.jsx("div",{className:Yh(e,s),children:r}):null},r0e=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:AY,{user:s}=t;return b.jsxs("div",{className:ms.header,children:[b.jsxs("a",{href:t.url,className:ms.avatar,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:Yh(ms.avatarOverflow,s.profile_image_shape==="Square"&&ms.avatarSquare),children:b.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),b.jsx("div",{className:ms.avatarOverflow,children:b.jsx("div",{className:ms.avatarShadow})})]}),b.jsxs("div",{className:ms.author,children:[b.jsxs("a",{href:t.url,className:ms.authorLink,target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:ms.authorLinkText,children:b.jsx("span",{title:s.name,children:s.name})}),b.jsx(SY,{user:s,className:ms.authorVerified})]}),b.jsxs("div",{className:ms.authorMeta,children:[b.jsx("a",{href:t.url,className:ms.username,target:"_blank",rel:"noopener noreferrer",children:b.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),b.jsxs("div",{className:ms.authorFollow,children:[b.jsx("span",{className:ms.separator,children:"·"}),b.jsx("a",{href:s.follow_url,className:ms.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),b.jsx("a",{href:t.url,className:ms.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:ms.twitterIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},s0e="_root_1ec15_1",i0e={root:s0e},o0e=({tweet:t})=>b.jsxs("a",{href:t.in_reply_to_url,className:i0e.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),a0e="_root_eihfa_1",c0e={root:a0e},l0e=({href:t,children:e})=>b.jsx("a",{href:t,className:c0e.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),u0e="_root_1xq52_1",d0e={root:u0e},h0e=({tweet:t})=>b.jsx("p",{className:d0e.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return b.jsx(l0e,{href:e.href,children:e.text},n);case"media":return;default:return b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),m8=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,IY=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,f0e=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,p0e=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,g0e=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,m0e=t=>`https://x.com/hashtag/${t.text}`,y0e=t=>`https://x.com/search?q=%24${t.text}`,w0e=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,xY=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},b0e=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},v0e=t=>{const e=b0e(t);return e.length>1?e[1]:e[0]},eD=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function y8(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Ub(n,"hashtag",t.entities.hashtags),Ub(n,"mention",t.entities.user_mentions),Ub(n,"url",t.entities.urls),Ub(n,"symbol",t.entities.symbols),t.entities.media&&Ub(n,"media",t.entities.media),E0e(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:m0e(r),text:s});case"mention":return Object.assign(r,{href:IY(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:y0e(r),text:s});default:return Object.assign(r,{text:s})}})}function Ub(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function E0e(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const _0e=t=>({...t,url:m8(t),user:{...t.user,url:IY(t),follow_url:g0e(t)},like_url:f0e(t),reply_url:p0e(t),in_reply_to_url:t.in_reply_to_screen_name?w0e(t):void 0,entities:y8(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:m8(t.quoted_tweet),entities:y8(t.quoted_tweet)}:void 0}),C0e="_root_g9tkv_1",A0e="_rounded_g9tkv_6",S0e="_mediaWrapper_g9tkv_10",I0e="_grid2Columns_g9tkv_17",x0e="_grid3_g9tkv_20",N0e="_grid2x2_g9tkv_23",T0e="_mediaContainer_g9tkv_26",R0e="_mediaLink_g9tkv_34",P0e="_skeleton_g9tkv_38",O0e="_image_g9tkv_43",yo={root:C0e,rounded:A0e,mediaWrapper:S0e,grid2Columns:I0e,grid3:x0e,grid2x2:N0e,mediaContainer:T0e,mediaLink:R0e,skeleton:P0e,image:O0e},k0e="_anchor_fp31d_1",D0e="_videoButton_fp31d_17",L0e="_videoButtonIcon_fp31d_35",M0e="_watchOnTwitter_fp31d_44",U0e="_viewReplies_fp31d_60",Cm={anchor:k0e,videoButton:D0e,videoButtonIcon:L0e,watchOnTwitter:M0e,viewReplies:U0e},$0e=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=v0e(e);let l=0;return b.jsxs(b.Fragment,{children:[b.jsx("video",{className:yo.image,poster:xY(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:b.jsx("source",{src:c.url,type:c.content_type})}),n&&b.jsx("button",{type:"button",className:Cm.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:b.jsx("svg",{viewBox:"0 0 24 24",className:Cm.videoButtonIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&b.jsx("div",{className:Cm.watchOnTwitter,children:b.jsx("a",{href:t.url,className:Cm.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&b.jsx("a",{href:t.url,className:Yh(Cm.anchor,Cm.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},B0e=t=>b.jsx("img",{...t}),w8=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},NY=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:B0e;return b.jsx("div",{className:Yh(yo.root,!n&&yo.rounded),children:b.jsx("div",{className:Yh(yo.mediaWrapper,o>1&&yo.grid2Columns,o===3&&yo.grid3,o>4&&yo.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>b.jsx(D.Fragment,{children:l.type==="photo"?b.jsxs("a",{href:t.url,className:Yh(yo.mediaContainer,yo.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[b.jsx("div",{className:yo.skeleton,style:w8(l,o)}),b.jsx(c,{src:xY(l,"small"),alt:l.ext_alt_text||"Image",className:yo.image,draggable:!0})]},l.media_url_https):b.jsxs("div",{className:yo.mediaContainer,children:[b.jsx("div",{className:yo.skeleton,style:w8(l,o)}),b.jsx($0e,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},F0e={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},j0e=new Intl.DateTimeFormat("en-US",F0e),z0e=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},W0e=t=>{const e=z0e(j0e.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},H0e="_root_i24yn_1",G0e={root:H0e},q0e=({tweet:t})=>{const e=new Date(t.created_at),n=W0e(e);return b.jsx("a",{className:G0e.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:b.jsx("time",{dateTime:e.toISOString(),children:n})})},V0e="_info_19qcj_1",K0e="_infoLink_19qcj_10",Y0e="_infoIcon_19qcj_30",KR={info:V0e,infoLink:K0e,infoIcon:Y0e},Q0e=({tweet:t})=>b.jsxs("div",{className:KR.info,children:[b.jsx(q0e,{tweet:t}),b.jsx("a",{className:KR.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:b.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:KR.infoIcon,children:b.jsx("g",{children:b.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),J0e="_actions_n2anf_1",Z0e="_like_n2anf_13",X0e="_reply_n2anf_14",ebe="_copy_n2anf_15",tbe="_likeIconWrapper_n2anf_27",nbe="_likeCount_n2anf_30",rbe="_replyIconWrapper_n2anf_35",sbe="_copyIconWrapper_n2anf_36",ibe="_likeIcon_n2anf_27",obe="_replyIcon_n2anf_35",abe="_copyIcon_n2anf_36",cbe="_replyText_n2anf_56",lbe="_copyText_n2anf_57",Wi={actions:J0e,like:Z0e,reply:X0e,copy:ebe,likeIconWrapper:tbe,likeCount:nbe,replyIconWrapper:rbe,copyIconWrapper:sbe,likeIcon:ibe,replyIcon:obe,copyIcon:abe,replyText:cbe,copyText:lbe},ube=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),b.jsxs("button",{type:"button",className:Wi.copy,"aria-label":"Copy link",onClick:r,children:[b.jsx("div",{className:Wi.copyIconWrapper,children:e?b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.copyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),b.jsx("span",{className:Wi.copyText,children:e?"Copied!":"Copy link"})]})},dbe=({tweet:t})=>{const e=eD(t.favorite_count);return b.jsxs("div",{className:Wi.actions,children:[b.jsxs("a",{className:Wi.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[b.jsx("div",{className:Wi.likeIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.likeIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),b.jsx("span",{className:Wi.likeCount,children:e})]}),b.jsxs("a",{className:Wi.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[b.jsx("div",{className:Wi.replyIconWrapper,children:b.jsx("svg",{viewBox:"0 0 24 24",className:Wi.replyIcon,"aria-hidden":"true",children:b.jsx("g",{children:b.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),b.jsx("span",{className:Wi.replyText,children:"Reply"})]}),b.jsx(ube,{tweet:t})]})},hbe="_replies_1cutb_1",fbe="_link_1cutb_4",pbe="_text_1cutb_23",YR={replies:hbe,link:fbe,text:pbe},gbe=({tweet:t})=>b.jsx("div",{className:YR.replies,children:b.jsx("a",{className:YR.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:b.jsx("span",{className:YR.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${eD(t.conversation_count)} reply`:`Read ${eD(t.conversation_count)} replies`})})}),mbe="_root_q5799_1",ybe="_article_q5799_16",b8={root:mbe,article:ybe},wbe=({tweet:t,children:e})=>b.jsx("div",{className:b8.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:b.jsx("article",{className:b8.article,children:e})}),bbe="_header_r31i5_1",vbe="_avatar_r31i5_11",Ebe="_avatarSquare_r31i5_17",_be="_author_r31i5_21",Cbe="_authorText_r31i5_26",Abe="_username_r31i5_33",Tf={header:bbe,avatar:vbe,avatarSquare:Ebe,author:_be,authorText:Cbe,username:Abe},Sbe=({tweet:t})=>{const{user:e}=t;return b.jsxs("div",{className:Tf.header,children:[b.jsx("a",{href:t.url,className:Tf.avatar,target:"_blank",rel:"noopener noreferrer",children:b.jsx("div",{className:Yh(Tf.avatarOverflow,e.profile_image_shape==="Square"&&Tf.avatarSquare),children:b.jsx(AY,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),b.jsxs("div",{className:Tf.author,children:[b.jsx("div",{className:Tf.authorText,children:b.jsx("span",{title:e.name,children:e.name})}),b.jsx(SY,{user:e}),b.jsx("div",{className:Tf.username,children:b.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},Ibe="_root_175ot_1",xbe={root:Ibe},Nbe=({tweet:t})=>b.jsx("p",{className:xbe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>b.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Tbe=({tweet:t})=>{var e;return b.jsxs(wbe,{tweet:t,children:[b.jsx(Sbe,{tweet:t}),b.jsx(Nbe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?b.jsx(NY,{quoted:!0,tweet:t}):null]})},Rbe=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>_0e(t),[t]);return b.jsxs(NM,{children:[b.jsx(r0e,{tweet:r,components:e}),r.in_reply_to_status_id_str&&b.jsx(o0e,{tweet:r}),b.jsx(h0e,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?b.jsx(NY,{tweet:r,components:e}):null,r.quoted_tweet&&b.jsx(Tbe,{tweet:r.quoted_tweet}),b.jsx(Q0e,{tweet:r}),b.jsx(dbe,{tweet:r}),b.jsx(gbe,{tweet:r})]})},Pbe="_root_16yxa_1",Obe={root:Pbe},kbe=t=>b.jsx(NM,{children:b.jsxs("div",{className:Obe.root,children:[b.jsx("h3",{children:"Tweet not found"}),b.jsx("p",{children:"The embedded tweet could not be found…"})]})}),Dbe="_skeleton_oi7hr_1",Lbe={skeleton:Dbe},Q1=({style:t})=>b.jsx("span",{className:Lbe.skeleton,style:t}),Mbe="_root_17qqv_1",Ube={root:Mbe},$be=()=>b.jsxs(NM,{className:Ube.root,children:[b.jsx(Q1,{style:{height:"3rem",marginBottom:"0.75rem"}}),b.jsx(Q1,{style:{height:"6rem",margin:"0.5rem 0"}}),b.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),b.jsx(Q1,{style:{height:"2rem"}}),b.jsx(Q1,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),TY=0,RY=1,PY=2,v8=3;var E8=Object.prototype.hasOwnProperty;function tD(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&tD(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(E8.call(t,n)&&++r&&!E8.call(e,n)||!(n in e)||!tD(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Ru=new WeakMap,Nh=()=>{},hi=Nh(),nD=Object,rn=t=>t===hi,ml=t=>typeof t=="function",df=(t,e)=>({...t,...e}),OY=t=>ml(t.then),QR={},J1={},TM="undefined",$C=typeof window!=TM,rD=typeof document!=TM,Bbe=$C&&"Deno"in window,Fbe=()=>$C&&typeof window.requestAnimationFrame!=TM,kY=(t,e)=>{const n=Ru.get(t);return[()=>!rn(e)&&t.get(e)||QR,r=>{if(!rn(e)){const s=t.get(e);e in J1||(J1[e]=s),n[5](e,df(s,r),s||QR)}},n[6],()=>!rn(e)&&e in J1?J1[e]:!rn(e)&&t.get(e)||QR]};let sD=!0;const jbe=()=>sD,[iD,oD]=$C&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Nh,Nh],zbe=()=>{const t=rD&&document.visibilityState;return rn(t)||t!=="hidden"},Wbe=t=>(rD&&document.addEventListener("visibilitychange",t),iD("focus",t),()=>{rD&&document.removeEventListener("visibilitychange",t),oD("focus",t)}),Hbe=t=>{const e=()=>{sD=!0,t()},n=()=>{sD=!1};return iD("online",e),iD("offline",n),()=>{oD("online",e),oD("offline",n)}},Gbe={isOnline:jbe,isVisible:zbe},qbe={initFocus:Wbe,initReconnect:Hbe},_8=!Lo.useId,i_=!$C||Bbe,Vbe=t=>Fbe()?window.requestAnimationFrame(t):setTimeout(t,1),JR=i_?D.useEffect:D.useLayoutEffect,ZR=typeof navigator<"u"&&navigator.connection,C8=!i_&&ZR&&(["slow-2g","2g"].includes(ZR.effectiveType)||ZR.saveData),Z1=new WeakMap,Kbe=t=>nD.prototype.toString.call(t),XR=(t,e)=>t===`[object ${e}]`;let Ybe=0;const aD=t=>{const e=typeof t,n=Kbe(t),r=XR(n,"Date"),s=XR(n,"RegExp"),i=XR(n,"Object");let o,a;if(nD(t)===t&&!r&&!s){if(o=Z1.get(t),o)return o;if(o=++Ybe+"~",Z1.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=aD(t[a])+",";Z1.set(t,o)}if(i){o="#";const c=nD.keys(t).sort();for(;!rn(a=c.pop());)rn(t[a])||(o+=a+":"+aD(t[a])+",");Z1.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},RM=t=>{if(ml(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?aD(t):"",[t,e]};let Qbe=0;const cD=()=>++Qbe;async function DY(...t){const[e,n,r,s]=t,i=df({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(ml(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=RM(h);if(!f)return;const[p,g]=kY(e,f),[y,m,w,v]=Ru.get(e),A=()=>{const W=y[f];return(ml(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete w[f],delete v[f],W&&W[0])?W[0](PY).then(()=>p().data):p().data};if(t.length<3)return A();let C=r,S,x=!1;const T=cD();m[f]=[T,0];const I=!rn(c),k=p(),O=k.data,B=k._c,G=rn(B)?O:B;if(I&&(c=ml(c)?c(G,O):c,g({data:c,_c:G})),ml(C))try{C=C(G)}catch(W){S=W,x=!0}if(C&&OY(C))if(C=await C.catch(W=>{S=W,x=!0}),T!==m[f][0]){if(x)throw S;return C}else x&&I&&l(S)&&(o=!0,g({data:G,_c:hi}));if(o&&!x)if(ml(o)){const W=o(C,G);g({data:W,error:hi,_c:hi})}else g({data:C,error:hi,_c:hi});if(m[f][1]=cD(),Promise.resolve(A()).then(()=>{g({_c:hi})}),x){if(u)throw S;return}return C}}const A8=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Jbe=(t,e)=>{if(!Ru.has(t)){const n=df(qbe,e),r=Object.create(null),s=DY.bind(hi,t);let i=Nh;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Ru.has(t)&&(Ru.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!i_)){const u=n.initFocus(setTimeout.bind(hi,A8.bind(hi,r,TY))),d=n.initReconnect(setTimeout.bind(hi,A8.bind(hi,r,RY)));i=()=>{u&&u(),d&&d(),Ru.delete(t)}}};return l(),[t,s,l,i]}return[t,Ru.get(t)[4]]},Zbe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!rn(i)&&o>i||setTimeout(r,a,s)},Xbe=tD,[LY,eve]=Jbe(new Map),tve=df({onLoadingSlow:Nh,onSuccess:Nh,onError:Nh,onErrorRetry:Zbe,onDiscarded:Nh,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:C8?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:C8?5e3:3e3,compare:Xbe,isPaused:()=>!1,cache:LY,mutate:eve,fallback:{}},Gbe),nve=(t,e)=>{const n=df(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=df(s,o))}return n},rve=D.createContext({}),sve="$inf$",MY=$C&&window.__SWR_DEVTOOLS_USE__,ive=MY?window.__SWR_DEVTOOLS_USE__:[],ove=()=>{MY&&(window.__SWR_DEVTOOLS_REACT__=Lo)},ave=t=>ml(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],cve=()=>df(tve,D.useContext(rve)),lve=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=RM(e),[,,,a]=Ru.get(LY);if(o.startsWith(sve))return n(...i);const c=a[o];return rn(c)?n(...i):(delete a[o],c)}),r),uve=ive.concat(lve),dve=t=>function(...n){const r=cve(),[s,i,o]=ave(n),a=nve(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(uve);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},hve=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};ove();const eP=Lo.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),tP={dedupe:!0},fve=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,y]=Ru.get(r),[m,w]=RM(t),v=D.useRef(!1),A=D.useRef(!1),C=D.useRef(m),S=D.useRef(e),x=D.useRef(n),T=()=>x.current,I=()=>T().isVisible()&&T().isOnline(),[k,O,B,G]=kY(r,m),W=D.useRef({}).current,R=rn(o)?rn(n.fallback)?hi:n.fallback[m]:o,N=(_e,Ae)=>{for(const tt in W){const Se=tt;if(Se==="data"){if(!s(_e[Se],Ae[Se])&&(!rn(_e[Se])||!s(se,Ae[Se])))return!1}else if(Ae[Se]!==_e[Se])return!1}return!0},M=D.useMemo(()=>{const _e=!m||!e?!1:rn(a)?T().isPaused()||i?!1:c!==!1:a,Ae=kt=>{const nr=df(kt);return delete nr._k,_e?{isValidating:!0,isLoading:!0,...nr}:nr},tt=k(),Se=G(),Gt=Ae(tt),en=tt===Se?Gt:Ae(Se);let Me=Gt;return[()=>{const kt=Ae(k());return N(kt,Me)?(Me.data=kt.data,Me.isLoading=kt.isLoading,Me.isValidating=kt.isValidating,Me.error=kt.error,Me):(Me=kt,kt)},()=>en]},[r,m]),P=iY.useSyncExternalStore(D.useCallback(_e=>B(m,(Ae,tt)=>{N(tt,Ae)||_e()}),[r,m]),M[0],M[1]),L=!v.current,j=f[m]&&f[m].length>0,q=P.data,ne=rn(q)?R&&OY(R)?eP(R):R:q,le=P.error,oe=D.useRef(ne),se=h?rn(q)?rn(oe.current)?ne:oe.current:q:ne,ye=j&&!rn(le)?!1:L&&!rn(a)?a:T().isPaused()?!1:i?rn(ne)?!1:c:rn(ne)||c,Z=!!(m&&e&&L&&ye),ae=rn(P.isValidating)?Z:P.isValidating,he=rn(P.isLoading)?Z:P.isLoading,de=D.useCallback(async _e=>{const Ae=S.current;if(!m||!Ae||A.current||T().isPaused())return!1;let tt,Se,Gt=!0;const en=_e||{},Me=!g[m]||!en.dedupe,kt=()=>_8?!A.current&&m===C.current&&v.current:m===C.current,nr={isValidating:!1,isLoading:!1},Dn=()=>{O(nr)},Ko=()=>{const Sr=g[m];Sr&&Sr[1]===Se&&delete g[m]},zl={isValidating:!0};rn(k().data)&&(zl.isLoading=!0);try{if(Me&&(O(zl),n.loadingTimeout&&rn(k().data)&&setTimeout(()=>{Gt&&kt()&&T().onLoadingSlow(m,n)},n.loadingTimeout),g[m]=[Ae(w),cD()]),[tt,Se]=g[m],tt=await tt,Me&&setTimeout(Ko,n.dedupingInterval),!g[m]||g[m][1]!==Se)return Me&&kt()&&T().onDiscarded(m),!1;nr.error=hi;const Sr=p[m];if(!rn(Sr)&&(Se<=Sr[0]||Se<=Sr[1]||Sr[1]===0))return Dn(),Me&&kt()&&T().onDiscarded(m),!1;const Bs=k().data;nr.data=s(Bs,tt)?Bs:tt,Me&&kt()&&T().onSuccess(tt,m,n)}catch(Sr){Ko();const Bs=T(),{shouldRetryOnError:Ua}=Bs;Bs.isPaused()||(nr.error=Sr,Me&&kt()&&(Bs.onError(Sr,m,Bs),(Ua===!0||ml(Ua)&&Ua(Sr))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||I())&&Bs.onErrorRetry(Sr,m,Bs,Ii=>{const pr=f[m];pr&&pr[0]&&pr[0](v8,Ii)},{retryCount:(en.retryCount||0)+1,dedupe:!0})))}return Gt=!1,Dn(),!0},[m,r]),be=D.useCallback((..._e)=>DY(r,C.current,..._e),[]);if(JR(()=>{S.current=e,x.current=n,rn(q)||(oe.current=q)}),JR(()=>{if(!m)return;const _e=de.bind(hi,tP);let Ae=0;T().revalidateOnFocus&&(Ae=Date.now()+T().focusThrottleInterval);const Se=hve(m,f,(Gt,en={})=>{if(Gt==TY){const Me=Date.now();T().revalidateOnFocus&&Me>Ae&&I()&&(Ae=Me+T().focusThrottleInterval,_e())}else if(Gt==RY)T().revalidateOnReconnect&&I()&&_e();else{if(Gt==PY)return de();if(Gt==v8)return de(en)}});return A.current=!1,C.current=m,v.current=!0,O({_k:w}),ye&&(g[m]||(rn(ne)||i_?_e():Vbe(_e))),()=>{A.current=!0,Se()}},[m]),JR(()=>{let _e;function Ae(){const Se=ml(l)?l(k().data):l;Se&&_e!==-1&&(_e=setTimeout(tt,Se))}function tt(){!k().error&&(u||T().isVisible())&&(d||T().isOnline())?de(tP).then(Ae):Ae()}return Ae(),()=>{_e&&(clearTimeout(_e),_e=-1)}},[l,u,d,m]),D.useDebugValue(se),i&&rn(ne)&&m){if(!_8&&i_)throw new Error("Fallback data is required when using Suspense in SSR.");S.current=e,x.current=n,A.current=!1;const _e=y[m];if(!rn(_e)){const Ae=be(_e);eP(Ae)}if(rn(le)){const Ae=de(tP);rn(se)||(Ae.status="fulfilled",Ae.value=!0),eP(Ae)}else throw le}return{mutate:be,get data(){return W.data=!0,se},get error(){return W.error=!0,le},get isValidating(){return W.isValidating=!0,ae},get isLoading(){return W.isLoading=!0,he}}},S8=dve(fve);class pve extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const gve=S8.default||S8,mve="https://react-tweet.vercel.app";async function yve([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new pve({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const wve=(t,e,n)=>{const{isLoading:r,data:s,error:i}=gve(()=>e||t?[e||t&&`${mve}/api/tweet/${t}`,n]:null,yve,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},bve=({id:t,apiUrl:e,fallback:n=b.jsx($be,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=wve(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||kbe;return b.jsx(l,{error:i?i(a):a})}return b.jsx(Rbe,{tweet:o,components:r})};var CN={exports:{}},UY={},$Y={exports:{}},vve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Eve=vve,_ve=Eve;function BY(){}function FY(){}FY.resetWarningCache=BY;var Cve=function(){function t(r,s,i,o,a,c){if(c!==_ve){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:FY,resetWarningCache:BY};return n.PropTypes=n,n};$Y.exports=Cve();var jY=$Y.exports,lD={exports:{}};function zY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=zY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function I8(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=zY(t))&&(r&&(r+=" "),r+=e);return r}lD.exports=I8,lD.exports.clsx=I8;var Ave=lD.exports,Ar={},Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.dontSetMe=Tve;Fl.findInArray=Sve;Fl.int=Nve;Fl.isFunction=Ive;Fl.isNum=xve;function Sve(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Ive(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function xve(t){return typeof t=="number"&&!isNaN(t)}function Nve(t){return parseInt(t,10)}function Tve(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Xg={};Object.defineProperty(Xg,"__esModule",{value:!0});Xg.browserPrefixToKey=HY;Xg.browserPrefixToStyle=Rve;Xg.default=void 0;Xg.getPrefix=WY;const nP=["Moz","Webkit","O","ms"];function WY(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<nP.length;s++)if(HY(t,nP[s])in e)return nP[s];return""}function HY(t,e){return e?`${e}${Pve(t)}`:t}function Rve(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Pve(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Xg.default=WY();Object.defineProperty(Ar,"__esModule",{value:!0});Ar.addClassName=VY;Ar.addEvent=kve;Ar.addUserSelectStyles=Hve;Ar.createCSSTransform=Fve;Ar.createSVGTransform=jve;Ar.getTouch=zve;Ar.getTouchIdentifier=Wve;Ar.getTranslation=PM;Ar.innerHeight=Uve;Ar.innerWidth=$ve;Ar.matchesSelector=qY;Ar.matchesSelectorAndParentsTo=Ove;Ar.offsetXYFromParent=Bve;Ar.outerHeight=Lve;Ar.outerWidth=Mve;Ar.removeClassName=KY;Ar.removeEvent=Dve;Ar.scheduleRemoveUserSelectStyles=Gve;var $o=Fl,x8=GY(Xg);function GY(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(GY=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let X1="";function qY(t,e){return X1||(X1=(0,$o.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,$o.isFunction)(t[n])})),(0,$o.isFunction)(t[X1])?t[X1](e):!1}function Ove(t,e,n){let r=t;do{if(qY(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function kve(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Dve(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Lve(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,$o.int)(n.borderTopWidth),e+=(0,$o.int)(n.borderBottomWidth),e}function Mve(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,$o.int)(n.borderLeftWidth),e+=(0,$o.int)(n.borderRightWidth),e}function Uve(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,$o.int)(n.paddingTop),e-=(0,$o.int)(n.paddingBottom),e}function $ve(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,$o.int)(n.paddingLeft),e-=(0,$o.int)(n.paddingRight),e}function Bve(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Fve(t,e){const n=PM(t,e,"px");return{[(0,x8.browserPrefixToKey)("transform",x8.default)]:n}}function jve(t,e){return PM(t,e,"")}function PM(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function zve(t,e){return t.targetTouches&&(0,$o.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,$o.findInArray)(t.changedTouches,n=>e===n.identifier)}function Wve(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Hve(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&VY(t.body,"react-draggable-transparent-selection")}function Gve(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{N8(t)}):N8(t)}function N8(t){if(t)try{if(t.body&&KY(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function VY(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function KY(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.canDragX=Kve;jl.canDragY=Yve;jl.createCoreData=Jve;jl.createDraggableData=Zve;jl.getBoundPosition=qve;jl.getControlPosition=Qve;jl.snapToGrid=Vve;var wo=Fl,vy=Ar;function qve(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Xve(r);const s=OM(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,wo.int)(u.paddingLeft)+(0,wo.int)(l.marginLeft),top:-s.offsetTop+(0,wo.int)(u.paddingTop)+(0,wo.int)(l.marginTop),right:(0,vy.innerWidth)(c)-(0,vy.outerWidth)(s)-s.offsetLeft+(0,wo.int)(u.paddingRight)-(0,wo.int)(l.marginRight),bottom:(0,vy.innerHeight)(c)-(0,vy.outerHeight)(s)-s.offsetTop+(0,wo.int)(u.paddingBottom)-(0,wo.int)(l.marginBottom)}}return(0,wo.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,wo.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,wo.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,wo.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Vve(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Kve(t){return t.props.axis==="both"||t.props.axis==="x"}function Yve(t){return t.props.axis==="both"||t.props.axis==="y"}function Qve(t,e,n){const r=typeof e=="number"?(0,vy.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=OM(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,vy.offsetXYFromParent)(r||t,i,n.props.scale)}function Jve(t,e,n){const r=!(0,wo.isNum)(t.lastX),s=OM(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Zve(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Xve(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function OM(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var AN={},SN={};Object.defineProperty(SN,"__esModule",{value:!0});SN.default=eEe;function eEe(){}Object.defineProperty(AN,"__esModule",{value:!0});AN.default=void 0;var rP=YY(D),ni=kM(jY),tEe=kM(LL),zs=Ar,vd=jl,sP=Fl,$b=kM(SN);function kM(t){return t&&t.__esModule?t:{default:t}}function YY(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(YY=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function si(t,e,n){return(e=nEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nEe(t){var e=rEe(t,"string");return typeof e=="symbol"?e:e+""}function rEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const qa={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Ed=qa.mouse,IN=class extends rP.Component{constructor(){super(...arguments),si(this,"dragging",!1),si(this,"lastX",NaN),si(this,"lastY",NaN),si(this,"touchIdentifier",null),si(this,"mounted",!1),si(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,zs.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,zs.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,zs.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,vd.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,vd.createCoreData)(this,o,a);(0,$b.default)("DraggableCore: handleDragStart: %j",c),(0,$b.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,zs.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,zs.addEvent)(r,Ed.move,this.handleDrag),(0,zs.addEvent)(r,Ed.stop,this.handleDragStop))}),si(this,"handleDrag",e=>{const n=(0,vd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,vd.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,vd.createCoreData)(this,r,s);if((0,$b.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),si(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,vd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,vd.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,vd.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,zs.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,$b.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,$b.default)("DraggableCore: Removing handlers"),(0,zs.removeEvent)(a.ownerDocument,Ed.move,this.handleDrag),(0,zs.removeEvent)(a.ownerDocument,Ed.stop,this.handleDragStop))}),si(this,"onMouseDown",e=>(Ed=qa.mouse,this.handleDragStart(e))),si(this,"onMouseUp",e=>(Ed=qa.mouse,this.handleDragStop(e))),si(this,"onTouchStart",e=>(Ed=qa.touch,this.handleDragStart(e))),si(this,"onTouchEnd",e=>(Ed=qa.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,zs.addEvent)(e,qa.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,zs.removeEvent)(n,qa.mouse.move,this.handleDrag),(0,zs.removeEvent)(n,qa.touch.move,this.handleDrag),(0,zs.removeEvent)(n,qa.mouse.stop,this.handleDragStop),(0,zs.removeEvent)(n,qa.touch.stop,this.handleDragStop),(0,zs.removeEvent)(e,qa.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,zs.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:tEe.default.findDOMNode(this)}render(){return rP.cloneElement(rP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};AN.default=IN;si(IN,"displayName","DraggableCore");si(IN,"propTypes",{allowAnyClick:ni.default.bool,allowMobileScroll:ni.default.bool,children:ni.default.node.isRequired,disabled:ni.default.bool,enableUserSelectHack:ni.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:ni.default.arrayOf(ni.default.number),handle:ni.default.string,cancel:ni.default.string,nodeRef:ni.default.object,onStart:ni.default.func,onDrag:ni.default.func,onStop:ni.default.func,onMouseDown:ni.default.func,scale:ni.default.number,className:sP.dontSetMe,style:sP.dontSetMe,transform:sP.dontSetMe});si(IN,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(D),n=u(jY),r=u(LL),s=Ave,i=Ar,o=jl,a=Fl,c=u(AN),l=u(SN);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,w){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(C,S){if(!S&&C&&C.__esModule)return C;var x,T,I={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return I;if(x=S?A:v){if(x.has(C))return x.get(C);x.set(C,I)}for(const k in C)k!=="default"&&{}.hasOwnProperty.call(C,k)&&((T=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,k))&&(T.get||T.set)?x(I,k,T):I[k]=C[k]);return I})(m,w)}function h(){return h=Object.assign?Object.assign.bind():function(m){for(var w=1;w<arguments.length;w++){var v=arguments[w];for(var A in v)({}).hasOwnProperty.call(v,A)&&(m[A]=v[A])}return m},h.apply(null,arguments)}function f(m,w,v){return(w=p(w))in m?Object.defineProperty(m,w,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[w]=v,m}function p(m){var w=g(m,"string");return typeof w=="symbol"?w:w+""}function g(m,w){if(typeof m!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var A=v.call(m,w);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(m)}class y extends e.Component{static getDerivedStateFromProps(w,v){let{position:A}=w,{prevPropsPosition:C}=v;return A&&(!C||A.x!==C.x||A.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:C}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(w){super(w),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const C=(0,o.createDraggableData)(this,A),S={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:I}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[k,O]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=k,S.y=O,S.slackX=this.state.slackX+(T-S.x),S.slackY=this.state.slackY+(I-S.y),C.x=S.x,C.y=S.y,C.deltaX=S.x-this.state.x,C.deltaY=S.y-this.state.y}if(this.props.onDrag(v,C)===!1)return!1;this.setState(S)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:I}=this.props.position;S.x=T,S.y=I}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var w,v;return((v=(w=this.props)==null?void 0:w.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:w,bounds:v,children:A,defaultPosition:C,defaultClassName:S,defaultClassNameDragging:x,defaultClassNameDragged:T,position:I,positionOffset:k,scale:O,...B}=this.props;let G={},W=null;const N=!!!I||this.state.dragging,M=I||C,P={x:(0,o.canDragX)(this)&&N?this.state.x:M.x,y:(0,o.canDragY)(this)&&N?this.state.y:M.y};this.state.isElementSVG?W=(0,i.createSVGTransform)(P,k):G=(0,i.createCSSTransform)(P,k);const L=(0,s.clsx)(A.props.className||"",S,{[x]:this.state.dragging,[T]:this.state.dragged});return e.createElement(c.default,h({},B,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:L,style:{...A.props.style,...G},transform:W}))}}t.default=y,f(y,"displayName","Draggable"),f(y,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(UY);const{default:QY,DraggableCore:sEe}=UY;CN.exports=QY;CN.exports.default=QY;CN.exports.DraggableCore=sEe;var iEe=CN.exports;const BC=Hg(iEe);function dr(){return dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dr.apply(null,arguments)}function JY(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ZY={exports:{}},In={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gs=typeof Symbol=="function"&&Symbol.for,DM=gs?Symbol.for("react.element"):60103,LM=gs?Symbol.for("react.portal"):60106,xN=gs?Symbol.for("react.fragment"):60107,NN=gs?Symbol.for("react.strict_mode"):60108,TN=gs?Symbol.for("react.profiler"):60114,RN=gs?Symbol.for("react.provider"):60109,PN=gs?Symbol.for("react.context"):60110,MM=gs?Symbol.for("react.async_mode"):60111,ON=gs?Symbol.for("react.concurrent_mode"):60111,kN=gs?Symbol.for("react.forward_ref"):60112,DN=gs?Symbol.for("react.suspense"):60113,oEe=gs?Symbol.for("react.suspense_list"):60120,LN=gs?Symbol.for("react.memo"):60115,MN=gs?Symbol.for("react.lazy"):60116,aEe=gs?Symbol.for("react.block"):60121,cEe=gs?Symbol.for("react.fundamental"):60117,lEe=gs?Symbol.for("react.responder"):60118,uEe=gs?Symbol.for("react.scope"):60119;function qo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case DM:switch(t=t.type,t){case MM:case ON:case xN:case TN:case NN:case DN:return t;default:switch(t=t&&t.$$typeof,t){case PN:case kN:case MN:case LN:case RN:return t;default:return e}}case LM:return e}}}function XY(t){return qo(t)===ON}In.AsyncMode=MM;In.ConcurrentMode=ON;In.ContextConsumer=PN;In.ContextProvider=RN;In.Element=DM;In.ForwardRef=kN;In.Fragment=xN;In.Lazy=MN;In.Memo=LN;In.Portal=LM;In.Profiler=TN;In.StrictMode=NN;In.Suspense=DN;In.isAsyncMode=function(t){return XY(t)||qo(t)===MM};In.isConcurrentMode=XY;In.isContextConsumer=function(t){return qo(t)===PN};In.isContextProvider=function(t){return qo(t)===RN};In.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===DM};In.isForwardRef=function(t){return qo(t)===kN};In.isFragment=function(t){return qo(t)===xN};In.isLazy=function(t){return qo(t)===MN};In.isMemo=function(t){return qo(t)===LN};In.isPortal=function(t){return qo(t)===LM};In.isProfiler=function(t){return qo(t)===TN};In.isStrictMode=function(t){return qo(t)===NN};In.isSuspense=function(t){return qo(t)===DN};In.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===xN||t===ON||t===TN||t===NN||t===DN||t===oEe||typeof t=="object"&&t!==null&&(t.$$typeof===MN||t.$$typeof===LN||t.$$typeof===RN||t.$$typeof===PN||t.$$typeof===kN||t.$$typeof===cEe||t.$$typeof===lEe||t.$$typeof===uEe||t.$$typeof===aEe)};In.typeOf=qo;ZY.exports=In;var dEe=ZY.exports,UM=dEe,hEe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},fEe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},pEe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},eQ={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$M={};$M[UM.ForwardRef]=pEe;$M[UM.Memo]=eQ;function T8(t){return UM.isMemo(t)?eQ:$M[t.$$typeof]||hEe}var gEe=Object.defineProperty,mEe=Object.getOwnPropertyNames,R8=Object.getOwnPropertySymbols,yEe=Object.getOwnPropertyDescriptor,wEe=Object.getPrototypeOf,P8=Object.prototype;function tQ(t,e,n){if(typeof e!="string"){if(P8){var r=wEe(e);r&&r!==P8&&tQ(t,r,n)}var s=mEe(e);R8&&(s=s.concat(R8(e)));for(var i=T8(t),o=T8(e),a=0;a<s.length;++a){var c=s[a];if(!fEe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=yEe(e,c);try{gEe(t,c,l)}catch{}}}}return t}var bEe=tQ;const vEe=Hg(bEe);var nQ={};Object.defineProperty(nQ,"__esModule",{value:!0});nQ.default=EEe;function EEe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function eA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OI(){return OI=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OI.apply(this,arguments)}function _Ee(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function _d(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CEe(t){var e=function(n){_Ee(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,eA(_d(_d(i)),"cachedTheme",void 0),eA(_d(_d(i)),"lastOuterTheme",void 0),eA(_d(_d(i)),"lastTheme",void 0),eA(_d(_d(i)),"renderProvider",function(l){var u=i.props.children;return Lo.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?OI({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Lo.createElement(t.Consumer,null,this.renderProvider):null},r}(Lo.Component);return e}function AEe(t){return function(n){var r=Lo.forwardRef(function(s,i){return Lo.createElement(t.Consumer,null,function(o){return Lo.createElement(n,OI({theme:o,ref:i},s))})});return vEe(r,n),r}}function SEe(t){var e=function(){var r=Lo.useContext(t);return r};return e}function IEe(t){return{context:t,withTheme:AEe(t),useTheme:SEe(t),ThemeProvider:CEe(t)}}var rQ=D.createContext();IEe(rQ);var O8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nb=(typeof window>"u"?"undefined":O8(window))==="object"&&(typeof document>"u"?"undefined":O8(document))==="object"&&document.nodeType===9;function o_(t){"@babel/helpers - typeof";return o_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o_(t)}function xEe(t,e){if(o_(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(o_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function NEe(t){var e=xEe(t,"string");return o_(e)=="symbol"?e:e+""}function TEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NEe(r.key),r)}}function BM(t,e,n){return e&&TEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uD(t,e){return uD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},uD(t,e)}function sQ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,uD(t,e)}function k8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var REe={}.constructor;function dD(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(dD);if(t.constructor!==REe)return t;var e={};for(var n in t)e[n]=dD(t[n]);return e}function UN(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=dD(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var D8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},tg=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=D8(e[r]," ");else n=D8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function rb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Bb(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function a_(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=rb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=Bb(f+":"+u+tg(p)+";",o))}}else for(var g in a){var y=a[g];y!=null&&(r&&(r+=l),r+=Bb(g+":"+u+tg(y)+";",o))}for(var m in e){var w=e[m];w!=null&&m!=="fallbacks"&&(r&&(r+=l),r+=Bb(m+":"+u+tg(w)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),Bb(""+t+u+"{"+r,o)+Bb("}",o))}var PEe=/([[\].#*$><+~=|^:(),"'`\s])/g,L8=typeof CSS<"u"&&CSS.escape,FM=function(t){return L8?L8(t):t.replace(PEe,"\\$1")},iQ=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),hD=function(t){sQ(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(k8(k8(o)),l),o.selectorText="."+FM(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=tg(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?dr({},s,{allowEmpty:!0}):s;return a_(this.selectorText,this.style,a)},BM(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(iQ),OEe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new hD(e,n,r)}},iP={indent:1,children:!0},kEe=/@([\w-]+)/,DEe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(kEe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new $N(dr({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=iP);var s=rb(r),i=s.linebreak;if(r.indent==null&&(r.indent=iP.indent),r.children==null&&(r.children=iP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),LEe=/@container|@media|@supports\s+/,MEe={onCreateRule:function(e,n,r){return LEe.test(e)?new DEe(e,n,r):null}},oP={indent:1,children:!0},UEe=/@keyframes\s+([\w-]+)/,fD=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(UEe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:FM(c(this,a)),this.rules=new $N(dr({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],dr({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=oP);var s=rb(r),i=s.linebreak;if(r.indent==null&&(r.indent=oP.indent),r.children==null&&(r.children=oP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),$Ee=/@keyframes\s+/,BEe=/\$([\w-]+)/g,pD=function(e,n){return typeof e=="string"?e.replace(BEe,function(r,s){return s in n?n[s]:r}):e},M8=function(e,n,r){var s=e[n],i=pD(s,r);i!==s&&(e[n]=i)},FEe={onCreateRule:function(e,n,r){return typeof e=="string"&&$Ee.test(e)?new fD(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&M8(e,"animation-name",r.keyframes),"animation"in e&&M8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return pD(e,s.keyframes);case"animation-name":return pD(e,s.keyframes);default:return e}}},jEe=function(t){sQ(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?dr({},s,{allowEmpty:!0}):s;return a_(this.key,this.style,a)},e}(iQ),zEe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new jEe(e,n,r):null}},WEe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=rb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=a_(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return a_(this.at,this.style,r)},t}(),HEe=/@font-face/,GEe={onCreateRule:function(e,n,r){return HEe.test(e)?new WEe(e,n,r):null}},qEe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return a_(this.key,this.style,r)},t}(),VEe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new qEe(e,n,r):null}},KEe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),YEe={"@charset":!0,"@import":!0,"@namespace":!0},QEe={onCreateRule:function(e,n,r){return e in YEe?new KEe(e,n,r):null}},U8=[OEe,MEe,FEe,zEe,GEe,VEe,QEe],JEe={process:!0},$8={force:!0,process:!0},$N=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=dr({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+FM(this.classes[p]));var g=UN(p,s,f);if(!g)return null;this.register(g);var y=f.index===void 0?this.index.length:f.index;return this.index.splice(y,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=dr({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof hD?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof fD&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof hD?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof fD&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=JEe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,$8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,$8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=rb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),oQ=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=dr({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new $N(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),ZEe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),XEe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=JY(s,["attached"]),a=rb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},BM(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),Kv=new XEe,gD=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),mD="2f1acc6c3a606b082e5eef5e54414ffb";gD[mD]==null&&(gD[mD]=0);var B8=gD[mD]++,F8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+B8+a+n:c+i.key+"-"+B8+(a?"-"+a:"")+"-"+n};return r},aQ=function(e){var n;return function(){return n||(n=e()),n}},e_e=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},t_e=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=tg(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},n_e=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},r_e=function(e,n){return e.selectorText=n,e.selectorText===n},cQ=aQ(function(){return document.querySelector("head")});function s_e(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function i_e(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function o_e(t){for(var e=cQ(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function a_e(t){var e=Kv.registry;if(e.length>0){var n=s_e(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=i_e(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=o_e(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function c_e(t,e){var n=e.insertionPoint,r=a_e(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}cQ().appendChild(t)}var l_e=aQ(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),j8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},z8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},u_e=function(){var e=document.createElement("style");return e.textContent=`
`,e},d_e=function(){function t(n){this.getPropertyValue=e_e,this.setProperty=t_e,this.removeProperty=n_e,this.setSelector=r_e,this.hasInsertedRules=!1,this.cssRules=[],n&&Kv.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||u_e(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=l_e();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){c_e(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=z8(i,s);if(a=j8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=z8(i,s),d=j8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof oQ&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),h_e=0,f_e=function(){function t(n){this.id=h_e++,this.version="10.10.0",this.plugins=new ZEe,this.options={id:{minify:!1},createGenerateId:F8,Renderer:nb?d_e:null,plugins:[]},this.generateId=F8({minify:!1});for(var r=0;r<U8.length;r++)this.plugins.use(U8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=dr({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=Kv.index===0?0:Kv.index+1);var a=new oQ(r,dr({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),Kv.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=dr({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=UN(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),lQ=function(e){return new f_e(e)},W8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},BM(t,[{key:"size",get:function(){return this.length}}]),t}(),jM=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function uQ(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=uQ(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */lQ();var dQ=Date.now(),aP="fnValues"+dQ,cP="fnStyle"+ ++dQ,p_e=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=UN(n,{},s);return i[cP]=r,i},onProcessStyle:function(n,r){if(aP in r||cP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[aP]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[cP];a&&(o.style=a(n)||{});var c=o[aP];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function g_e(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Jm;typeof self<"u"?Jm=self:typeof window<"u"?Jm=window:typeof global<"u"?Jm=global:typeof module<"u"?Jm=module:Jm=Function("return this")();var H8=g_e(Jm),G8=function(e){return e&&e[H8]&&e===e[H8]()},m_e=function(e){return{onCreateRule:function(r,s,i){if(!G8(s))return null;var o=s,a=UN(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!G8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},y_e=/;\n/,w_e=function(e){for(var n={},r=e.split(y_e),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},b_e=function(e){typeof e.style=="string"&&(e.style=w_e(e.style))};function v_e(){return{onProcessRule:b_e}}var Qh="@global",yD="@global ",E_e=function(){function t(n,r,s){this.type="global",this.at=Qh,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new $N(dr({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),__e=function(){function t(n,r,s){this.type="global",this.at=Qh,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(yD.length);this.rule=s.jss.createRule(i,r,dr({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),C_e=/\s*,\s*/g;function hQ(t,e){for(var n=t.split(C_e),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function A_e(t,e){var n=t.options,r=t.style,s=r?r[Qh]:null;if(s){for(var i in s)e.addRule(i,s[i],dr({},n,{selector:hQ(i,t.selector)}));delete r[Qh]}}function S_e(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Qh.length)!==Qh)){var i=hQ(s.substr(Qh.length),t.selector);e.addRule(i,r[s],dr({},n,{selector:i})),delete r[s]}}function I_e(){function t(n,r,s){if(!n)return null;if(n===Qh)return new E_e(n,r,s);if(n[0]==="@"&&n.substr(0,yD.length)===yD)return new __e(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(A_e(n,r),S_e(n,r))}return{onCreateRule:t,onProcessRule:e}}var sS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},lP="extendCurrValue"+Date.now();function x_e(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];mp(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?dr({},t,{extend:l}):t.extend[c];mp(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){mp(t.extend.extend,e,n,r);continue}if(sS(t.extend[d])){d in r||(r[d]={}),mp(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function N_e(t,e,n,r){for(var s in t)if(s!=="extend"){if(sS(r[s])&&sS(t[s])){mp(t[s],e,n,r[s]);continue}if(sS(t[s])){r[s]=mp(t[s],e,n);continue}r[s]=t[s]}}function mp(t,e,n,r){return r===void 0&&(r={}),x_e(t,e,n,r),N_e(t,e,n,r),r}function T_e(){function t(n,r,s){return"extend"in n?mp(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[lP])s.prop(i,null);return s[lP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[lP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var q8=/\s*,\s*/g,R_e=/&/g,P_e=/\$([\w-]+)/g;function O_e(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(q8),a=s.split(q8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(R_e,u):u+" "+h}return c}function n(s,i,o){if(o)return dr({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=dr({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(P_e,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],dr({},l,{selector:p})):c.addRule(g,s[d],dr({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function wD(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=wD(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return wD(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function k_e(){function t(e,n){return"composes"in e&&(wD(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var D_e=/[A-Z]/g,L_e=/^ms-/,uP={};function M_e(t){return"-"+t.toLowerCase()}function fQ(t){if(uP.hasOwnProperty(t))return uP[t];var e=t.replace(D_e,M_e);return uP[t]=L_e.test(e)?"-"+e:e}function kI(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:fQ(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(kI):e.fallbacks=kI(t.fallbacks)),e}function U_e(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=kI(n[r]);return n}return kI(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=fQ(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ue=jM&&CSS?CSS.px:"px",tA=jM&&CSS?CSS.ms:"ms",Am=jM&&CSS?CSS.percent:"%",$_e={"animation-delay":tA,"animation-duration":tA,"background-position":ue,"background-position-x":ue,"background-position-y":ue,"background-size":ue,border:ue,"border-bottom":ue,"border-bottom-left-radius":ue,"border-bottom-right-radius":ue,"border-bottom-width":ue,"border-left":ue,"border-left-width":ue,"border-radius":ue,"border-right":ue,"border-right-width":ue,"border-top":ue,"border-top-left-radius":ue,"border-top-right-radius":ue,"border-top-width":ue,"border-width":ue,"border-block":ue,"border-block-end":ue,"border-block-end-width":ue,"border-block-start":ue,"border-block-start-width":ue,"border-block-width":ue,"border-inline":ue,"border-inline-end":ue,"border-inline-end-width":ue,"border-inline-start":ue,"border-inline-start-width":ue,"border-inline-width":ue,"border-start-start-radius":ue,"border-start-end-radius":ue,"border-end-start-radius":ue,"border-end-end-radius":ue,margin:ue,"margin-bottom":ue,"margin-left":ue,"margin-right":ue,"margin-top":ue,"margin-block":ue,"margin-block-end":ue,"margin-block-start":ue,"margin-inline":ue,"margin-inline-end":ue,"margin-inline-start":ue,padding:ue,"padding-bottom":ue,"padding-left":ue,"padding-right":ue,"padding-top":ue,"padding-block":ue,"padding-block-end":ue,"padding-block-start":ue,"padding-inline":ue,"padding-inline-end":ue,"padding-inline-start":ue,"mask-position-x":ue,"mask-position-y":ue,"mask-size":ue,height:ue,width:ue,"min-height":ue,"max-height":ue,"min-width":ue,"max-width":ue,bottom:ue,left:ue,top:ue,right:ue,inset:ue,"inset-block":ue,"inset-block-end":ue,"inset-block-start":ue,"inset-inline":ue,"inset-inline-end":ue,"inset-inline-start":ue,"box-shadow":ue,"text-shadow":ue,"column-gap":ue,"column-rule":ue,"column-rule-width":ue,"column-width":ue,"font-size":ue,"font-size-delta":ue,"letter-spacing":ue,"text-decoration-thickness":ue,"text-indent":ue,"text-stroke":ue,"text-stroke-width":ue,"word-spacing":ue,motion:ue,"motion-offset":ue,outline:ue,"outline-offset":ue,"outline-width":ue,perspective:ue,"perspective-origin-x":Am,"perspective-origin-y":Am,"transform-origin":Am,"transform-origin-x":Am,"transform-origin-y":Am,"transform-origin-z":Am,"transition-delay":tA,"transition-duration":tA,"vertical-align":ue,"flex-basis":ue,"shape-margin":ue,size:ue,gap:ue,grid:ue,"grid-gap":ue,"row-gap":ue,"grid-row-gap":ue,"grid-column-gap":ue,"grid-template-rows":ue,"grid-template-columns":ue,"grid-auto-rows":ue,"grid-auto-columns":ue,"box-shadow-x":ue,"box-shadow-y":ue,"box-shadow-blur":ue,"box-shadow-spread":ue,"font-line-height":ue,"text-shadow-x":ue,"text-shadow-y":ue,"text-shadow-blur":ue};function pQ(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var B_e=pQ($_e);function Yv(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=Yv(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=Yv(s,e[s],n);else for(var i in e)e[i]=Yv(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||B_e[t];return o&&!(e===0&&o===ue)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function F_e(t){t===void 0&&(t={});var e=pQ(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=Yv(o,s[o],e);return s}function r(s,i){return Yv(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var j_e={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},z_e={position:!0,size:!0},nA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},dP={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function W_e(t,e,n){return t.map(function(r){return mQ(r,e,n,!1,!0)})}function gQ(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?gQ(t[0],e,n,r):typeof t[0]=="object"?W_e(t,e,r):[t]}function mQ(t,e,n,r,s){if(!(nA[e]||dP[e]))return[];var i=[];if(dP[e]&&(t=H_e(t,n,dP[e],r)),Object.keys(t).length)for(var o in nA[e]){if(t[o]){Array.isArray(t[o])?i.push(z_e[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}nA[e][o]!=null&&i.push(nA[e][o])}return!i.length||s?i:[i]}function H_e(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=c_((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function c_(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=c_(t.fallbacks[i],e,!0);continue}t[r]=gQ(s,r,j_e,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=c_(t.fallbacks,e,!0);continue}t[r]=mQ(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function G_e(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=c_(e[r],n);return e}return c_(e,n)}return{onProcessStyle:t}}function bD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function q_e(t){if(Array.isArray(t))return bD(t)}function V_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function K_e(t,e){if(t){if(typeof t=="string")return bD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bD(t,e):void 0}}function Y_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q_e(t){return q_e(t)||V_e(t)||K_e(t)||Y_e()}var dv="",vD="",yQ="",wQ="",J_e=nb&&"ontouchstart"in document.documentElement;if(nb){var hP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Z_e=document.createElement("p"),fP=Z_e.style,X_e="Transform";for(var pP in hP)if(pP+X_e in fP){dv=pP,vD=hP[pP];break}dv==="Webkit"&&"msHyphens"in fP&&(dv="ms",vD=hP.ms,wQ="edge"),dv==="Webkit"&&"-apple-trailing-word"in fP&&(yQ="apple")}var Pt={js:dv,css:vD,vendor:yQ,browser:wQ,isTouch:J_e};function eCe(t){return t[1]==="-"||Pt.js==="ms"?t:"@"+Pt.css+"keyframes"+t.substr(10)}var tCe={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Pt.js==="ms"?"-webkit-"+e:Pt.css+e}},nCe={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Pt.js==="Webkit"?Pt.css+"print-"+e:e}},rCe=/[-\s]+(.)?/g;function sCe(t,e){return e?e.toUpperCase():""}function zM(t){return t.replace(rCe,sCe)}function hf(t){return zM("-"+t)}var iCe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Pt.js==="Webkit"){var r="mask-image";if(zM(r)in n)return e;if(Pt.js+hf(r)in n)return Pt.css+e}return e}},oCe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Pt.vendor==="apple"&&!Pt.isTouch?Pt.css+e:e}},aCe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Pt.css+e}},cCe={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Pt.css+e}},lCe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Pt.js==="Webkit"||Pt.js==="ms"&&Pt.browser!=="edge"?Pt.css+e:e}},uCe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Pt.js==="Moz"||Pt.js==="ms"||Pt.vendor==="apple"?Pt.css+e:e}},dCe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Pt.js==="Webkit"){var r="WebkitColumn"+hf(e);return r in n?Pt.css+"column-"+e:!1}if(Pt.js==="Moz"){var s="page"+hf(e);return s in n?"page-"+e:!1}return!1}},hCe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Pt.js==="Moz")return e;var r=e.replace("-inline","");return Pt.js+hf(r)in n?Pt.css+r:!1}},fCe={supportedProperty:function(e,n){return zM(e)in n?e:!1}},pCe={supportedProperty:function(e,n){var r=hf(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Pt.js+r in n?Pt.css+e:Pt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},gCe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Pt.js==="ms"?""+Pt.css+e:e}},mCe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Pt.js==="ms"?Pt.css+"scroll-chaining":e}},yCe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},wCe={supportedProperty:function(e,n){var r=yCe[e];return r&&Pt.js+hf(r)in n?Pt.css+r:!1}},bQ={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},bCe=Object.keys(bQ),vCe=function(e){return Pt.css+e},ECe={supportedProperty:function(e,n,r){var s=r.multiple;if(bCe.indexOf(e)>-1){var i=bQ[e];if(!Array.isArray(i))return Pt.js+hf(i)in n?Pt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Pt.js+hf(i[0])in n))return!1;return i.map(vCe)}return!1}},vQ=[tCe,nCe,iCe,oCe,aCe,cCe,lCe,uCe,dCe,hCe,fCe,pCe,gCe,mCe,wCe,ECe],V8=vQ.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),_Ce=vQ.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,Q_e(e.noPrefill)),t},[]),hv,Qf={};if(nb){hv=document.createElement("p");var gP=window.getComputedStyle(document.documentElement,"");for(var mP in gP)isNaN(mP)||(Qf[gP[mP]]=gP[mP]);_Ce.forEach(function(t){return delete Qf[t]})}function ED(t,e){if(e===void 0&&(e={}),!hv)return t;if(Qf[t]!=null)return Qf[t];(t==="transition"||t==="transform")&&(e[t]=t in hv.style);for(var n=0;n<V8.length&&(Qf[t]=V8[n](t,hv.style,e),!Qf[t]);n++);try{hv.style[t]=""}catch{return!1}return Qf[t]}var Sm={},CCe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},ACe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,$d;function SCe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?ED(e):", "+ED(n);return r||e||n}nb&&($d=document.createElement("p"));function K8(t,e){var n=e;if(!$d||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Sm[r]!=null)return Sm[r];try{$d.style[t]=n}catch{return Sm[r]=!1,!1}if(CCe[t])n=n.replace(ACe,SCe);else if($d.style[t]===""&&(n=Pt.css+n,n==="-ms-flex"&&($d.style[t]="-ms-flexbox"),$d.style[t]=n,$d.style[t]===""))return Sm[r]=!1,!1;return $d.style[t]="",Sm[r]=n,Sm[r]}function ICe(){function t(s){if(s.type==="keyframes"){var i=s;i.at=eCe(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=ED(i);c&&c!==i&&(a=!0);var l=!1,u=K8(c,tg(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return K8(i,tg(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function xCe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var NCe=function(e){return e===void 0&&(e={}),{plugins:[p_e(),m_e(e.observable),v_e(),I_e(),T_e(),O_e(),k_e(),U_e(),F_e(e.defaultUnit),G_e(),ICe(),xCe()]}},TCe=Number.MIN_SAFE_INTEGER||-1e9,RCe=function(){return TCe++},PCe=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!nb}),Y8=new Map,WM=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new W8),r[n];var s=Y8.get(n);return s||(s=new W8,Y8.set(n,s)),s},Q8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=WM(r,s);o.manage(i),r.registry&&r.registry.add(n)}},OCe=function(e){if(e.sheet){var n=WM(e.context,e.index);n.unmanage(e.theme)}},kCe=lQ(NCe()),EQ=new WeakMap,_Q=function(e){return EQ.get(e)},DCe=function(e,n){EQ.set(e,n)},LCe=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function MCe(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",dr({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var UCe=function(e){if(!e.context.disableStylesGeneration){var n=WM(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||kCe,i=LCe(e),o=uQ(i),a=s.createStyleSheet(i,MCe(e,o!==null));return DCe(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},$Ce=function(e,n){for(var r in n)e.deleteRule(n[r])},BCe=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},FCe=function(e,n){var r=_Q(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},jCe=function(e,n){if(!n)return e.classes;var r=_Q(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function J8(t){return t?D.useEffect:Lo.useInsertionEffect||D.useLayoutEffect}var yP={},Pc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?RCe():s,o=r.theming,a=r.name,c=JY(r,["index","theming","name"]),l=o&&o.context||rQ,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||yP},d={};return function(f){var p=D.useRef(!0),g=D.useContext(PCe),y=u(f&&f.theme),m=D.useMemo(function(){var C=UCe({context:g,styles:e,name:a,theme:y,index:i,sheetOptions:c});return C&&g.isSSR&&Q8({index:i,context:g,sheet:C,theme:y}),[C,C?FCe(C,f):null]},[g,y]),w=m[0],v=m[1];J8(g.isSSR)(function(){w&&v&&!p.current&&BCe(f,w,v)},[f]),J8(g.isSSR)(function(){return w&&Q8({index:i,context:g,sheet:w,theme:y}),function(){w&&(OCe({index:i,context:g,sheet:w,theme:y}),v&&$Ce(w,v))}},[w]);var A=D.useMemo(function(){return w&&v?jCe(w,v):d},[w,v]);return D.useDebugValue(A),D.useDebugValue(y===yP?"No theme":y),D.useEffect(function(){p.current=!1}),A}};const zCe=Pc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function wP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=zCe(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=b.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[b.jsx("img",{src:t,alt:e,className:u.iconImage}),b.jsx("span",{className:u.iconLabel,children:e})]});return o?f:b.jsx(BC,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const WCe=Pc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function sa({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=WCe({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return b.jsx(BC,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:b.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[b.jsxs("div",{className:l.header,children:[b.jsx("span",{children:i||t.replace("-popup","")}),b.jsxs("div",{className:l.titleBarButtons,children:[b.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),b.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),b.jsx("div",{className:l.content,children:s})]})})}const bP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],HCe=80,GCe=80,qCe=10,VCe=10,KCe=10,YCe=10,QCe=({onIconClick:t})=>{const e=bP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:KCe+d*(HCe+qCe),y:YCe+u*(GCe+VCe)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return b.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:b.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>b.jsx(wP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&b.jsx(sa,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:bP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>b.jsx(wP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&b.jsx(sa,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:bP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>b.jsx(wP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},JCe=Pc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),ZCe=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=JCe({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return b.jsxs("div",{className:c.taskbar,children:[b.jsxs("div",{className:c.leftSection,children:[b.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),b.jsx("div",{className:c.windows,children:t.map(h=>b.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),b.jsxs("div",{className:c.rightSection,children:[b.jsxs("div",{className:c.statusSection,children:[b.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:b.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),b.jsx("div",{className:c.clock,children:l(o)})]}),s&&b.jsxs("div",{className:c.menu,children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function CQ(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function HM(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function AQ(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function GM(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function SQ(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function IQ(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function XCe(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const e1e=Pc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),t1e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=e1e({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),{data:y}=_Y();D.useEffect(()=>{t&&r&&m()},[t,r]);const m=async()=>{l(!0),g(null);try{const S=await CQ(r);a(S);const x={};S.forEach(T=>{x[T.id]=0}),f(x)}catch(S){g(S.message)}finally{l(!1)}},w=(S,x)=>{f(T=>({...T,[S]:Math.max(0,x)}))},v=async()=>{const S=Object.entries(h).filter(([,x])=>x>0).map(([x,T])=>({id:x,quantity:T}));if(S.length===0){g("Please select at least one item to mint");return}if(!y){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const x=await AQ(r,S);if(console.log("Mint API result:",x),x.success&&x.mintTransaction){console.log("Got mint transaction:",x.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const T=await y.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});console.log("Transaction sent successfully:",T),alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){console.error("Transaction sending failed:",T),g("Transaction failed: "+T.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){console.error("Minting failed:",x),g("Minting failed: "+x.message)}finally{d(!1)}},A=(S,x)=>`${parseFloat(S)} ${x}`,C=()=>{n&&n()};return t?b.jsx(BC,{nodeRef:i,handle:`.${s.header}`,children:b.jsxs("div",{ref:i,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"Mint Pixelawbster"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:C,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),b.jsxs("div",{className:s.content,children:[p&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?b.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{children:"Available Lists:"}),o.map(S=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:S.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",A(S.token_price,S.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",S.wallet_limit===4294967295?"Unlimited":S.wallet_limit," per wallet"]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[b.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),b.jsx("input",{type:"number",min:"0",max:S.wallet_limit===4294967295?999:S.wallet_limit,value:h[S.id]||0,onChange:x=>w(S.id,parseInt(x.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},S.id))]}),b.jsx("button",{onClick:()=>void v(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},n1e=Pc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),r1e=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},s1e=({nft:t,onClose:e})=>{const n=n1e(),r=D.useRef(null),s=r1e(t.attributes);return b.jsx(BC,{nodeRef:r,handle:`.${n.header}`,children:b.jsxs("div",{className:n.popup,ref:r,children:[b.jsxs("div",{className:n.header,children:[b.jsxs("span",{children:[t.name," - Details"]}),b.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),b.jsxs("div",{className:n.content,children:[b.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),b.jsx("h3",{children:"Traits"}),b.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):b.jsx("li",{children:"No traits found."})})]})]})})},i1e=Symbol(),Z8=Object.getPrototypeOf,_D=new WeakMap,o1e=t=>t&&(_D.has(t)?_D.get(t):Z8(t)===Object.prototype||Z8(t)===Array.prototype),a1e=t=>o1e(t)&&t[i1e]||null,X8=(t,e=!0)=>{_D.set(t,e)},DI={},vP=t=>typeof t=="object"&&t!==null,Hd=new WeakMap,fv=new WeakSet,c1e=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>vP(l)&&!fv.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return X8(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),m={value:g,enumerable:y,configurable:!0};if(fv.has(g))X8(g,!1);else if(g instanceof Promise)delete m.value,m.get=()=>d(g);else if(Hd.has(g)){const[w,v]=Hd.get(g);m.value=i(w,v(),d)}Object.defineProperty(f,p,m)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!vP(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(I,k=++a[0])=>{d!==k&&(d=k,h.forEach(O=>O(I,k)))};let p=a[1];const g=(I=++a[1])=>(p!==I&&!h.size&&(p=I,m.forEach(([k])=>{const O=k[1](I);O>d&&(d=O)})),d),y=I=>(k,O)=>{const B=[...k];B[1]=[I,...B[1]],f(B,O)},m=new Map,w=(I,k)=>{if((DI?"production":void 0)!=="production"&&m.has(I))throw new Error("prop listener already exists");if(h.size){const O=k[3](y(I));m.set(I,[k,O])}else m.set(I,[k])},v=I=>{var k;const O=m.get(I);O&&(m.delete(I),(k=O[1])==null||k.call(O))},A=I=>(h.add(I),h.size===1&&m.forEach(([O,B],G)=>{if((DI?"production":void 0)!=="production"&&B)throw new Error("remove already exists");const W=O[3](y(G));m.set(G,[O,W])}),()=>{h.delete(I),h.size===0&&m.forEach(([O,B],G)=>{B&&(B(),m.set(G,[O]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(C,{deleteProperty(I,k){const O=Reflect.get(I,k);v(k);const B=Reflect.deleteProperty(I,k);return B&&f(["delete",[k],O]),B},set(I,k,O,B){const G=Reflect.has(I,k),W=Reflect.get(I,k,B);if(G&&(t(W,O)||o.has(O)&&t(W,o.get(O))))return!0;v(k),vP(O)&&(O=a1e(O)||O);let R=O;if(O instanceof Promise)O.then(N=>{O.status="fulfilled",O.value=N,f(["resolve",[k],N])}).catch(N=>{O.status="rejected",O.reason=N,f(["reject",[k],N])});else{!Hd.has(O)&&n(O)&&(R=c(O));const N=!fv.has(R)&&Hd.get(R);N&&w(k,N)}return Reflect.set(I,k,R,B),f(["set",[k],O,W]),!0}});o.set(l,x);const T=[C,g,i,A];return Hd.set(x,T),Reflect.ownKeys(l).forEach(I=>{const k=Object.getOwnPropertyDescriptor(l,I);"value"in k&&(x[I]=l[I],delete k.value,delete k.writable),Object.defineProperty(C,I,k)}),x})=>[c,Hd,fv,t,e,n,r,s,i,o,a],[l1e]=c1e();function er(t={}){return l1e(t)}function Xs(t,e,n){const r=Hd.get(t);(DI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function l_(t,e){const n=Hd.get(t);(DI?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Ig(t){return fv.add(t),t}function ti(t,e,n,r){let s=t[e];return Xs(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function u1e(t){const e=er({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var e4={};const ze={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof e4<"u"?e4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},xQ={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ze.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var d1e=20,h1e=1,xg=1e6,t4=1e6,f1e=-7,p1e=21,g1e=!1,FC="[big.js] ",em=FC+"Invalid ",BN=em+"decimal places",m1e=em+"rounding mode",NQ=FC+"Division by zero",Sn={},Il=void 0,y1e=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function TQ(){function t(e){var n=this;if(!(n instanceof t))return e===Il?TQ():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(em+"value");e=e===0&&1/e<0?"-0":String(e)}w1e(n,e)}n.constructor=t}return t.prototype=Sn,t.DP=d1e,t.RM=h1e,t.NE=f1e,t.PE=p1e,t.strict=g1e,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function w1e(t,e){var n,r,s;if(!y1e.test(e))throw Error(em+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function tm(t,e,n,r){var s=t.c;if(n===Il&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(m1e);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Il))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Il||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function nm(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Sn.abs=function(){var t=new this.constructor(this);return t.s=1,t};Sn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Sn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>xg)throw Error(BN);if(!s[0])throw Error(NQ);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,m=t,w=m.c=[],v=0,A=o+(m.e=e.e-t.e)+1;for(m.s=i,i=A<0?0:A,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}w[v++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Il)&&i--);return!w[0]&&v!=1&&(w.shift(),m.e--,A--),v>A&&tm(m,A,n.RM,g[0]!==Il),m};Sn.eq=function(t){return this.cmp(t)===0};Sn.gt=function(t){return this.cmp(t)>0};Sn.gte=function(t){return this.cmp(t)>-1};Sn.lt=function(t){return this.cmp(t)<0};Sn.lte=function(t){return this.cmp(t)<1};Sn.minus=Sn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Sn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(NQ);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Sn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Sn.plus=Sn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Sn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-t4||t>t4)throw Error(em+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Sn.prec=function(t,e){if(t!==~~t||t<1||t>xg)throw Error(em+"precision");return tm(new this.constructor(this),t,e)};Sn.round=function(t,e){if(t===Il)t=0;else if(t!==~~t||t<-xg||t>xg)throw Error(BN);return tm(new this.constructor(this),t+this.e+1,e)};Sn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(FC+"No square root");i=Math.sqrt(+nm(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return tm(t,(s.DP-=4)+t.e+1,s.RM)};Sn.times=Sn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Sn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Il){if(t!==~~t||t<0||t>xg)throw Error(BN);for(n=tm(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return nm(n,!0,!!r)};Sn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Il){if(t!==~~t||t<0||t>xg)throw Error(BN);for(n=tm(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return nm(n,!1,!!r)};Sn[Symbol.for("nodejs.util.inspect.custom")]=Sn.toJSON=Sn.toString=function(){var t=this,e=t.constructor;return nm(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Sn.toNumber=function(){var t=+nm(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(FC+"Imprecise conversion");return t};Sn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Il){if(t!==~~t||t<1||t>xg)throw Error(em+"precision");for(n=tm(new r(n),t,e);n.c.length<t;)n.c.push(0)}return nm(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Sn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(FC+"valueOf disallowed");return nm(t,t.e<=e.NE||t.e>=e.PE,!0)};var yl=TQ();const b1e={bigNumber(t){return t?new yl(t):new yl(0)},multiply(t,e){if(t===void 0||e===void 0)return new yl(0);const n=new yl(t),r=new yl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},v1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],E1e=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],_1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],C1e={getERC20Abi:t=>ze.USDT_CONTRACT_ADDRESSES.includes(t)?_1e:v1e,getSwapAbi:()=>E1e},Cd={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Nt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function EP(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const At={setItem(t,e){pv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(pv())return localStorage.getItem(t)||void 0},removeItem(t){pv()&&localStorage.removeItem(t)},clear(){pv()&&localStorage.clear()}};function pv(){return typeof window<"u"&&typeof localStorage<"u"}function Uu(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var n4={};const _P=(typeof process<"u"&&typeof n4<"u"?n4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",RQ=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],A1e="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Pn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:_P,SECURE_SITE_DASHBOARD:`${_P}/dashboard`,SECURE_SITE_FAVICON:`${_P}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Qe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Qe.getActiveNamespace(),e=Qe.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{At.setItem(Nt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=At.getItem(Nt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{At.removeItem(Nt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{At.setItem(Nt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{At.setItem(Nt.ACTIVE_CAIP_NETWORK_ID,t),Qe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return At.getItem(Nt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{At.removeItem(Nt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=EP(t);At.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Qe.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),At.setItem(Nt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=At.getItem(Nt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=EP(t);At.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return At.getItem(Nt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=EP(t);return At.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{At.setItem(Nt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return At.getItem(Nt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{At.removeItem(Nt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return At.getItem(Nt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=At.getItem(Nt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{At.setItem(Nt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return At.getItem(Nt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=At.getItem(Nt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));At.setItem(Nt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces();e.includes(t)||(e.push(t),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return At.getItem(Nt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{At.setItem(Nt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{At.removeItem(Nt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=At.getItem(Nt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Qe.getBalanceCache();At.setItem(Nt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Qe.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Qe.getBalanceCache();e[t.caipAddress]=t,At.setItem(Nt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=At.getItem(Nt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Qe.getBalanceCache();At.setItem(Nt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Qe.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Qe.getNativeBalanceCache();e[t.caipAddress]=t,At.setItem(Nt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=At.getItem(Nt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Qe.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Qe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Qe.getEnsCache();e[t.address]=t,At.setItem(Nt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Qe.getEnsCache();At.setItem(Nt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=At.getItem(Nt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Qe.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Qe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Qe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},At.setItem(Nt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Qe.getIdentityCache();At.setItem(Nt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{At.removeItem(Nt.PORTFOLIO_CACHE),At.removeItem(Nt.NATIVE_BALANCE_CACHE),At.removeItem(Nt.ENS_CACHE),At.removeItem(Nt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{At.setItem(Nt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=At.getItem(Nt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Qe.getConnections(),[e]:t};At.setItem(Nt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=At.getItem(Nt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},ot={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ot.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Pn.TEN_SEC_MS:!0},isAllowedRetry(t,e=Pn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ot.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Pn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ot.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ot.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Qe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ot.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ze.W3M_API_URL},getBlockchainApiUrl(){return ze.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ze.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Pn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ze.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Fb(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let jC=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Fb(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Fb(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Fb(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Fb(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Fb(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const S1e={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Pn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ot.isTelegram()){if(ot.isIos())return t.filter(e=>e!=="google");if(ot.isMac())return t.filter(e=>e!=="x");if(ot.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ht=er({features:Pn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Pn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ve={state:ht,subscribeKey(t,e){return ti(ht,t,e)},setOptions(t){Object.assign(ht,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ht.remoteFeatures,...t};ht.remoteFeatures=e,(n=ht.remoteFeatures)!=null&&n.socials&&(ht.remoteFeatures.socials=S1e.filterSocialsByPlatform(ht.remoteFeatures.socials))},setFeatures(t){if(!t)return;ht.features||(ht.features=Pn.DEFAULT_FEATURES);const e={...ht.features,...t};ht.features=e},setProjectId(t){ht.projectId=t},setCustomRpcUrls(t){ht.customRpcUrls=t},setAllWallets(t){ht.allWallets=t},setIncludeWalletIds(t){ht.includeWalletIds=t},setExcludeWalletIds(t){ht.excludeWalletIds=t},setFeaturedWalletIds(t){ht.featuredWalletIds=t},setTokens(t){ht.tokens=t},setTermsConditionsUrl(t){ht.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ht.privacyPolicyUrl=t},setCustomWallets(t){ht.customWallets=t},setIsSiweEnabled(t){ht.isSiweEnabled=t},setIsUniversalProvider(t){ht.isUniversalProvider=t},setSdkVersion(t){ht.sdkVersion=t},setMetadata(t){ht.metadata=t},setDisableAppend(t){ht.disableAppend=t},setEIP6963Enabled(t){ht.enableEIP6963=t},setDebug(t){ht.debug=t},setEnableWalletConnect(t){ht.enableWalletConnect=t},setEnableWalletGuide(t){ht.enableWalletGuide=t},setEnableAuthLogger(t){ht.enableAuthLogger=t},setEnableWallets(t){ht.enableWallets=t},setPreferUniversalLinks(t){ht.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){ht.hasMultipleAddresses=t},setSIWX(t){ht.siwx=t},setConnectMethodsOrder(t){ht.features={...ht.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ht.features={...ht.features,walletFeaturesOrder:t}},setSocialsOrder(t){ht.remoteFeatures={...ht.remoteFeatures,socials:t}},setCollapseWallets(t){ht.features={...ht.features,collapseWallets:t}},setEnableEmbedded(t){ht.enableEmbedded=t},setAllowUnsupportedChain(t){ht.allowUnsupportedChain=t},setManualWCControl(t){ht.manualWCControl=t},setEnableNetworkSwitch(t){ht.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ht.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ht.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ht.universalProviderConfigOverride},getSnapshot(){return l_(ht)}},I1e=Object.freeze({enabled:!0,events:[]}),x1e=new jC({baseUrl:ot.getAnalyticsUrl(),clientId:null}),N1e=5,T1e=60*1e3,Ad=er({...I1e}),R1e={state:Ad,subscribeKey(t,e){return ti(Ad,t,e)},async sendError(t,e){if(!Ad.enabled)return;const n=Date.now();if(Ad.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<T1e}).length>=N1e)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Ad.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ve.state;await x1e.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Ad.enabled=!0},disable(){Ad.enabled=!1},clearEvents(){Ad.events=[]}};let CD=class AD extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,AD.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,AD):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function r4(t,e){const n=t instanceof CD?t:new CD(t instanceof Error?t.message:String(t),e,t);throw R1e.sendError(n,n.category),n}function Vo(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return r4(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return r4(a,e)}},n[r]=i}else n[r]=s}),n}const ul={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},P1e={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===ul.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${ul.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===ul.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${ul.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ze.CHAIN.SOLANA&&t===ul.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${ul.COINBASE.url}/dapp?cb_url=${r}`)}},fo=er({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),O1e={state:fo,subscribeNetworkImages(t){return Xs(fo.networkImages,()=>t(fo.networkImages))},subscribeKey(t,e){return ti(fo,t,e)},subscribe(t){return Xs(fo,()=>t(fo))},setWalletImage(t,e){fo.walletImages[t]=e},setNetworkImage(t,e){fo.networkImages[t]=e},setChainImage(t,e){fo.chainImages[t]=e},setConnectorImage(t,e){fo.connectorImages={...fo.connectorImages,[t]:e}},setTokenImage(t,e){fo.tokenImages[t]=e},setCurrencyImage(t,e){fo.currencyImages[t]=e}},lc=Vo(O1e),k1e={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},CP=er({networkImagePromises:{}}),PQ={async fetchWalletImage(t){if(t)return await at._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(CP.networkImagePromises[t]||(CP.networkImagePromises[t]=at._fetchNetworkImage(t)),await CP.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return lc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return lc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return lc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return lc.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return lc.state.connectorImages[t.imageId]},getChainImage(t){return lc.state.networkImages[k1e[t]]}},Sd=er({message:"",variant:"info",open:!1}),D1e={state:Sd,subscribeKey(t,e){return ti(Sd,t,e)},open(t,e){const{debug:n}=ve.state,{shortMessage:r,longMessage:s}=t;n&&(Sd.message=r,Sd.variant=e,Sd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Sd.open=!1,Sd.message="",Sd.variant="info"}},wl=Vo(D1e),L1e=ot.getAnalyticsUrl(),M1e=new jC({baseUrl:L1e,clientId:null}),U1e=["MODAL_CREATED"],Jl=er({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),or={state:Jl,subscribe(t){return Xs(Jl,()=>t(Jl))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ye.state.address;if(U1e.includes(t.data.event)||typeof window>"u")return;await M1e.post({path:"/e",params:or.getSdkProperties(),body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Jl.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ze.HTTP_STATUS_CODES.FORBIDDEN&&!Jl.reportedErrors.FORBIDDEN&&(wl.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${pv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Jl.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Jl.timestamp=Date.now(),Jl.data=t,(e=ve.state.features)!=null&&e.analytics&&or._sendAnalyticsEvent(Jl)}},$1e=ot.getApiUrl(),Ni=new jC({baseUrl:$1e,clientId:null}),B1e=40,s4=4,F1e=20,Tt=er({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),at={state:Tt,subscribeKey(t,e){return ti(Tt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ve.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ni.baseUrl}/getWalletImage/${t}`,n=await Ni.getBlob({path:e,params:at._getSdkProperties()});lc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ni.baseUrl}/public/getAssetImage/${t}`,n=await Ni.getBlob({path:e,params:at._getSdkProperties()});lc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ni.baseUrl}/public/getAssetImage/${t}`,n=await Ni.getBlob({path:e,params:at._getSdkProperties()});lc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ni.baseUrl}/public/getCurrencyImage/${t}`,n=await Ni.getBlob({path:e,params:at._getSdkProperties()});lc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ni.baseUrl}/public/getTokenImage/${t}`,n=await Ni.getBlob({path:e,params:at._getSdkProperties()});lc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ot.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===ul.COINBASE.id?!0:z.state.activeChain==="solana"&&(n.id===ul.SOLFLARE.id||n.id===ul.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ni.get({path:"/appkit/v1/config",params:at._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ni.get({path:"/projects/v1/origins",params:at._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=z.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!PQ.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>at._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=je.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>at._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];at._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(ul).map(o=>o.id));const r=await Ni.get({path:"/getWallets",params:{...at._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:at._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ve.state;if(t!=null&&t.length){const e={...at._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??s4,include:t},{data:n}=await at.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>at._fetchWalletImage(i))),Tt.featured=r,Tt.allFeatured=r}},async fetchRecommendedWallets(){try{Tt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ve.state,r=[...e??[],...n??[]].filter(Boolean),s=z.getRequestedCaipNetworkIds().join(","),i={page:1,entries:s4,include:t,exclude:r,chains:s},{data:o,count:a}=await at.fetchWallets(i),c=Qe.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>at._fetchWalletImage(d))),Tt.recommended=o,Tt.allRecommended=o,Tt.count=a??0}catch{}finally{Tt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ve.state,s=z.getRequestedCaipNetworkIds().join(","),i=[...Tt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:B1e,include:e,exclude:i,chains:s},{data:a,count:c}=await at.fetchWallets(o),l=a.slice(0,F1e).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>at._fetchWalletImage(u))),Tt.wallets=ot.uniqueBy([...Tt.wallets,...at._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Tt.count=c>Tt.count?c:Tt.count,Tt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await at.fetchWallets(e);n&&n.forEach(r=>{Tt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ve.state,s=z.getRequestedCaipNetworkIds().join(",");Tt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await at.fetchWallets(i);or.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>at._fetchWalletImage(c)),ot.wait(300)]),Tt.search=at._filterOutExtensions(o)},initPromise(t,e){const n=Tt.promises[t];return n||(Tt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&at.initPromise("connectorImages",at.fetchConnectorImages),e&&at.initPromise("featuredWallets",at.fetchFeaturedWallets),n&&at.initPromise("recommendedWallets",at.fetchRecommendedWallets),r&&at.initPromise("networkImages",at.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ve.state.features)!=null&&t.analytics&&at.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ni.get({path:"/getAnalyticsConfig",params:at._getSdkProperties()});ve.setFeatures({analytics:t})}catch{ve.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Tt.featured=Tt.allFeatured,Tt.recommended=Tt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Tt.featured=Tt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Tt.recommended=Tt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Tt.filteredWallets=Tt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Tt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Tt.featured=Tt.allFeatured,Tt.recommended=Tt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Tt.featured=Tt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Tt.recommended=Tt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Tt.filteredWallets=Tt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},xn=er({view:"Connect",history:["Connect"],transactionStack:[]}),j1e={state:xn,subscribeKey(t,e){return ti(xn,t,e)},pushTransactionStack(t){xn.transactionStack.push(t)},popTransactionStack(t){const e=xn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Mt.goBack();break;case"cancel":s==null||s(),Mt.goBack();break}},push(t,e){t!==xn.view&&(xn.view=t,xn.history.push(t),xn.data=e)},reset(t,e){xn.view=t,xn.history=[t],xn.data=e},replace(t,e){xn.history.at(-1)===t||(xn.view=t,xn.history[xn.history.length-1]=t,xn.data=e)},goBack(){var r;const t=z.state.activeCaipAddress,e=Mt.state.view==="ConnectingFarcaster",n=!t&&e;if(xn.history.length>1){xn.history.pop();const[s]=xn.history.slice(-1);s&&(t&&s==="Connect"?xn.view="Account":xn.view=s)}else us.close();(r=xn.data)!=null&&r.wallet&&(xn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ye.setFarcasterUrl(void 0,z.state.activeChain);const a=je.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=l_(ve.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(xn.history.length>1){xn.history=xn.history.slice(0,t+1);const[e]=xn.history.slice(-1);e&&(xn.view=e)}},goBackOrCloseModal(){Mt.state.history.length>1?Mt.goBack():us.close()}},Mt=Vo(j1e),Zl=er({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),SD={state:Zl,subscribe(t){return Xs(Zl,()=>t(Zl))},setThemeMode(t){Zl.themeMode=t;try{const e=je.getAuthConnector();if(e){const n=SD.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Uu(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Zl.themeVariables={...Zl.themeVariables,...t};try{const e=je.getAuthConnector();if(e){const n=SD.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Uu(Zl.themeVariables,Zl.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return l_(Zl)}},Hi=Vo(SD),OQ={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},on=er({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...OQ},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),z1e={state:on,subscribe(t){return Xs(on,()=>{t(on)})},subscribeKey(t,e){return ti(on,t,e)},initialize(t){t.forEach(e=>{const n=Qe.getConnectedConnectorId(e);n&&je.setConnectorId(n,e)})},setActiveConnector(t){t&&(on.activeConnector=Ig(t))},setConnectors(t){t.filter(s=>!on.allConnectors.some(i=>i.id===s.id&&je.getConnectorName(i.name)===je.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&on.allConnectors.push(Ig(s))});const n=je.getEnabledNamespaces(),r=je.getEnabledConnectors(n);on.connectors=je.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(on.filterByNamespaceMap).forEach(e=>{on.filterByNamespaceMap[e]=!1}),t.forEach(e=>{on.filterByNamespaceMap[e]=!0}),je.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){on.filterByNamespaceMap[t]=e,je.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=je.getEnabledNamespaces(),e=je.getEnabledConnectors(t),n=je.areAllNamespacesEnabled();on.connectors=je.mergeMultiChainConnectors(e),n?at.clearFilterByNamespaces():at.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(on.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return on.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(on.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=je.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ze.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=je.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ze.CONNECTOR_ID.AUTH){const s=t,i=l_(ve.state),o=Hi.getSnapshot().themeMode,a=Hi.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Uu(a,o)}),je.setConnectors([t])}else je.setConnectors([t])},getAuthConnector(t){var r;const e=t||z.state.activeChain,n=on.connectors.find(s=>s.id===ze.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return on.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return on.allConnectors.find(e=>e.id===t)},getConnector(t,e){return on.allConnectors.filter(r=>r.chain===z.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=l_(ve.state),r=Hi.getSnapshot().themeMode,s=Hi.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Uu(s,r)})},getConnectorsByNamespace(t){const e=on.allConnectors.filter(n=>n.chain===t);return je.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=je.getConnector(t.id,t.rdns),n=z.state.activeChain;P1e.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Mt.push("ConnectingExternal",{connector:e}):Mt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?je.getConnectorsByNamespace(t):je.mergeMultiChainConnectors(on.allConnectors)},setFilterByNamespace(t){on.filterByNamespace=t,on.connectors=je.getConnectors(t),at.setFilterByNamespace(t)},setConnectorId(t,e){t&&(on.activeConnectorIds={...on.activeConnectorIds,[e]:t},Qe.setConnectedConnectorId(e,t))},removeConnectorId(t){on.activeConnectorIds={...on.activeConnectorIds,[t]:void 0},Qe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return on.activeConnectorIds[t]},isConnected(t){return t?!!on.activeConnectorIds[t]:Object.values(on.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){on.activeConnectorIds={...OQ}}},je=Vo(z1e);var m0={};const W1e="https://secure.walletconnect.org/sdk",H1e=(typeof process<"u"&&typeof m0<"u"?m0.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||W1e,G1e=(typeof process<"u"&&typeof m0<"u"?m0.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",q1e=(typeof process<"u"&&typeof m0<"u"?m0.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ve={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ps={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Wf=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),$r=er({...Wf}),V1e={state:$r,subscribeKey(t,e){return ti($r,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ot.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){$r.message=Wf.message,$r.variant=Wf.variant,$r.svg=Wf.svg,$r.open=Wf.open,$r.autoClose=Wf.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Wf.autoClose}){$r.open?($r.open=!1,setTimeout(()=>{$r.message=t,$r.variant=n,$r.svg=e,$r.open=!0,$r.autoClose=r},150)):($r.message=t,$r.variant=n,$r.svg=e,$r.open=!0,$r.autoClose=r)}},pc=V1e,jn=er({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),K1e={state:jn,subscribe(t){return Xs(jn,()=>t(jn))},setLastNetworkInView(t){jn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");jn.loading=!0;try{const s=await pt.fetchTransactions({account:t,cursor:jn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=gv.filterSpamTransactions(s.data),o=gv.filterByConnectedChain(i),a=[...jn.transactions,...o];jn.loading=!1,e==="coinbase"?jn.coinbaseTransactions=gv.groupTransactionsByYearAndMonth(jn.coinbaseTransactions,s.data):(jn.transactions=a,jn.transactionsByYear=gv.groupTransactionsByYearAndMonth(jn.transactionsByYear,o)),jn.empty=a.length===0,jn.next=s.next?s.next:void 0}catch{const i=z.state.activeChain;or.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ve.state.projectId,cursor:jn.next,isSmartAccount:((r=Ye.state.preferredAccountTypes)==null?void 0:r[i])===Ps.ACCOUNT_TYPES.SMART_ACCOUNT}}),pc.showError("Failed to fetch transactions"),jn.loading=!1,jn.empty=!0,jn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){jn.next=void 0},resetTransactions(){jn.transactions=[],jn.transactionsByYear={},jn.lastNetworkInView=void 0,jn.loading=!1,jn.empty=!1,jn.next=void 0}},gv=Vo(K1e,"API_ERROR"),Mn=er({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Rf;const Y1e={state:Mn,subscribeKey(t,e){return ti(Mn,t,e)},_getClient(){return Mn._client},setClient(t){Mn._client=Ig(t)},async connectWalletConnect(){var t,e,n,r;if(ot.isTelegram()||ot.isSafari()&&ot.isIos()){if(Rf){await Rf,Rf=void 0;return}if(!ot.isPairingExpired(Mn==null?void 0:Mn.wcPairingExpiry)){const s=Mn.wcUri;Mn.wcUri=s;return}Rf=(e=(t=gt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),gt.state.status="connecting",await Rf,Rf=void 0,Mn.wcPairingExpiry=void 0,gt.state.status="connected"}else await((r=(n=gt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=gt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&z.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=gt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||z.state.activeChain;e&&je.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;us.setLoading(!0,z.state.activeChain);const n=je.getAuthConnector();n&&(Ye.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Qe.setPreferredAccountTypes(Ye.state.preferredAccountTypes??{[e]:t}),await gt.reconnectExternal(n),us.setLoading(!1,z.state.activeChain),or.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=gt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=gt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=gt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=gt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=gt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=gt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=gt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=gt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=gt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=gt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=gt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=gt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Mn.wcUri=void 0,Mn.wcPairingExpiry=void 0,Mn.wcLinking=void 0,Mn.recentWallet=void 0,Mn.status="disconnected",gv.resetTransactions(),Qe.deleteWalletConnectDeepLink()},resetUri(){Mn.wcUri=void 0,Mn.wcPairingExpiry=void 0,Rf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=gt.state;t&&Qe.setWalletConnectDeepLink(t),e&&Qe.setAppKitRecent(e),or.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Mt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Mn.wcBasic=t},setUri(t){Mn.wcUri=t,Mn.wcPairingExpiry=ot.getPairingExpiry()},setWcLinking(t){Mn.wcLinking=t},setWcError(t){Mn.wcError=t,Mn.buffering=!1},setRecentWallet(t){Mn.recentWallet=t},setBuffering(t){Mn.buffering=t},setStatus(t){Mn.status=t},async disconnect(t){var e;try{await((e=gt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new CD("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Mn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(je.state.activeConnectorIds[n]===t.connectorId){const i=z.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Ye.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=je.getConnector(t.connectorId);i?gt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},gt=Vo(Y1e),Im=er({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),xl={state:Im,subscribe(t){return Xs(Im,()=>t(Im))},subscribeOpen(t){return ti(Im,"open",t)},set(t){Object.assign(Im,{...Im,...t})}},AP={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Yg(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},i4={async getMyTokensWithBalance(t){const e=Ye.state.address,n=z.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await pt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=AP.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await gt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await gt.walletGetAssets({account:t,chainFilter:[s]});return AP.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>AP.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:z.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},_n=er({tokenBalances:[],loading:!1}),Q1e={state:_n,subscribe(t){return Xs(_n,()=>t(_n))},subscribeKey(t,e){return ti(_n,t,e)},setToken(t){t&&(_n.token=Ig(t))},setTokenAmount(t){_n.sendTokenAmount=t},setReceiverAddress(t){_n.receiverAddress=t},setReceiverProfileImageUrl(t){_n.receiverProfileImageUrl=t},setReceiverProfileName(t){_n.receiverProfileName=t},setNetworkBalanceInUsd(t){_n.networkBalanceInUSD=t},setLoading(t){_n.loading=t},async sendToken(){var t;try{switch(mn.setLoading(!0),(t=z.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await mn.sendEvmToken();return;case"solana":await mn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{mn.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=z.state.activeChain,e=(n=Ye.state.preferredAccountTypes)==null?void 0:n[t];if(!mn.state.sendTokenAmount||!mn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!mn.state.token)throw new Error("A token is required");(r=mn.state.token)!=null&&r.address?(or.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ps.ACCOUNT_TYPES.SMART_ACCOUNT,token:mn.state.token.address,amount:mn.state.sendTokenAmount,network:((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await mn.sendERC20Token({receiverAddress:mn.state.receiverAddress,tokenAddress:mn.state.token.address,sendTokenAmount:mn.state.sendTokenAmount,decimals:mn.state.token.quantity.decimals})):(or.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ps.ACCOUNT_TYPES.SMART_ACCOUNT,token:mn.state.token.symbol||"",amount:mn.state.sendTokenAmount,network:((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await mn.sendNativeToken({receiverAddress:mn.state.receiverAddress,sendTokenAmount:mn.state.sendTokenAmount,decimals:mn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;_n.loading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?ot.getPlainAddress(r):void 0;if(_n.lastRetry&&!ot.isAllowedRetry(_n.lastRetry,30*Pn.ONE_SEC_MS))return _n.loading=!1,[];try{if(s&&e&&n){const a=await i4.getMyTokensWithBalance();return _n.tokenBalances=a,_n.lastRetry=void 0,a}}catch(a){_n.lastRetry=Date.now(),t==null||t(a),pc.showError("Token Balance Unavailable")}finally{_n.loading=!1}return[]},fetchNetworkBalance(){if(_n.tokenBalances.length===0)return;const t=i4.mapBalancesToSwapTokens(_n.tokenBalances);if(!t)return;const e=t.find(n=>n.address===z.getActiveNetworkTokenAddress());e&&(_n.networkBalanceInUSD=e?b1e.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Mt.pushTransactionStack({});const e=t.receiverAddress,n=Ye.state.address,r=gt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await gt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),or.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ye.state.preferredAccountTypes)==null?void 0:i.eip155)===Ps.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=mn.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=gt._getClient())==null||c.updateBalance("eip155"),mn.resetSend()},async sendERC20Token(t){Mt.pushTransactionStack({onSuccess(){Mt.replace("Account")}});const e=gt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ye.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ot.getPlainAddress(t.tokenAddress);await gt.writeContract({fromAddress:Ye.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:C1e.getERC20Abi(n),chainNamespace:"eip155"}),mn.resetSend()}},async sendSolanaToken(){var t;if(!mn.state.sendTokenAmount||!mn.state.receiverAddress)throw new Error("An amount and receiver address are required");Mt.pushTransactionStack({onSuccess(){Mt.replace("Account")}}),await gt.sendTransaction({chainNamespace:"solana",to:mn.state.receiverAddress,value:mn.state.sendTokenAmount}),(t=gt._getClient())==null||t.updateBalance("solana"),mn.resetSend()},resetSend(){_n.token=void 0,_n.sendTokenAmount=void 0,_n.receiverAddress=void 0,_n.receiverProfileImageUrl=void 0,_n.receiverProfileName=void 0,_n.loading=!1,_n.tokenBalances=[]}},mn=Vo(Q1e),SP={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},rA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},De=er({chains:u1e(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),J1e={state:De,subscribe(t){return Xs(De,()=>{t(De)})},subscribeKey(t,e){return ti(De,t,e)},subscribeChainProp(t,e,n){let r;return Xs(De.chains,()=>{var i;const s=n||De.activeChain;if(s){const o=(i=De.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Qe.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ve.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(De.noAdapters=!0),De.noAdapters||(De.activeChain=a==null?void 0:a.namespace,De.activeCaipNetwork=i,z.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),De.activeChain&&xl.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);z.state.chains.set(u,{namespace:u,networkState:er({...rA,caipNetwork:d==null?void 0:d[0]}),accountState:er(SP),caipNetworks:d??[],...n}),z.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(De.activeChain===t){const r=Array.from(De.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&z.setActiveCaipNetwork(s)}}De.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){De.chains.set(t.namespace,{namespace:t.namespace,networkState:{...rA,caipNetwork:r[0]},accountState:SP,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),z.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=De.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),De.chains.set(t.chainNamespace,{...e,caipNetworks:r}),z.setRequestedCaipNetworks(r,t.chainNamespace),je.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=De.chains.get(t);if(n){const o=((r=De.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&z.setActiveCaipNetwork(n.caipNetworks[0]),De.chains.set(t,{...n,caipNetworks:a}),z.setRequestedCaipNetworks(a||[],t),a.length===0&&je.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=De.chains.get(t);n&&(n.networkState={...n.networkState||rA,...e},De.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=De.chains.get(t);if(r){const s={...r.accountState||SP,...e};De.chains.set(t,{...r,accountState:s}),(De.chains.size===1||De.activeChain===t)&&(e.caipAddress&&(De.activeCaipAddress=e.caipAddress),Ye.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=De.chains.get(t);if(n){const r={...n.networkState||rA,...e};De.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){z.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&je.removeConnectorId(n)},setActiveNamespace(t){var r,s;De.activeChain=t;const e=t?De.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(De.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,De.activeCaipNetwork=n,z.setChainNetworkData(t,{caipNetwork:n}),Qe.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),xl.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;De.activeChain!==t.chainNamespace&&z.setIsSwitchingNamespace(!0);const e=De.chains.get(t.chainNamespace);De.activeChain=t.chainNamespace,De.activeCaipNetwork=t,z.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?De.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:De.activeCaipAddress=void 0,z.setAccountProp("caipAddress",De.activeCaipAddress,t.chainNamespace),e&&Ye.replaceState(e.accountState),mn.resetSend(),xl.set({activeChain:De.activeChain,selectedNetworkId:(i=De.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Qe.setActiveCaipNetworkId(t.caipNetworkId),!z.checkIfSupportedNetwork(t.chainNamespace)&&ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&!gt.state.wcBasic&&z.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=De.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==z.state.activeChain,n=(s=z.getNetworkData(t))==null?void 0:s.caipNetwork,r=z.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await z.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=z.state.chains.get(z.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=De.activeCaipNetwork)==null?void 0:o.id)})),r=z.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&us.close()}catch{Mt.goBack()}or.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||De.activeChain,n=De.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||De.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=De.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=De.activeChain;if(e&&(n=e),!n)return;const r=(s=De.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=De.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=De.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ot.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return De.chains.forEach(e=>{const n=z.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){z.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=z.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));je.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return De.chains.forEach(e=>{const n=z.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return De.activeCaipNetwork},getActiveCaipAddress(){return De.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=De.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=z.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());z.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||De.activeCaipNetwork,r=z.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!De.activeChain)return!0;const e=z.getRequestedCaipNetworks(De.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){z.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=xQ.caipNetworkIdToNumber((r=De.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=De.activeChain;if(!e||!t)return!1;const n=z.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=De.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=De.activeCaipNetwork)==null?void 0:s.id)||1,n=Pn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){us.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=De.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Pn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){z.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");De.activeCaipAddress=void 0,z.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),je.removeConnectorId(e)},setIsSwitchingNamespace(t){De.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(De.chains.forEach(s=>{ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=De.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=z.state.chains.get(t))==null?void 0:e.accountState:Ye.state},getNetworkData(t){var n;const e=t||De.activeChain;if(e)return(n=z.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=z.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=je.state.filterByNamespace;return(t?[De.chains.get(t)]:Array.from(De.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?z.getRequestedCaipNetworks(t):z.getAllRequestedCaipNetworks()}},z=Vo(J1e),Z1e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},kQ=ot.getBlockchainApiUrl(),Ti=er({clientId:null,api:new jC({baseUrl:kQ,clientId:null}),supportedChains:{http:[],ws:[]}}),pt={state:Ti,async get(t){const{st:e,sv:n}=pt.getSdkProperties(),r=ve.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ti.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ve.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ti.supportedChains.http.length||await pt.getSupportedNetworks()}catch{return!1}return Ti.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await pt.get({path:"v1/supported-chains"});return Ti.supportedChains=t,t}catch{return Ti.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await pt.isNetworkSupported(e))return{avatar:"",name:""};const r=Qe.getIdentityFromCacheForAddress(t);if(r)return r;const s=await pt.get({path:`/v1/identity/${t}`,params:{sender:z.state.activeCaipAddress?ot.getPlainAddress(z.state.activeCaipAddress):void 0}});return Qe.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await pt.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?pt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await pt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?pt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ti.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ve.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await pt.isNetworkSupported((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?pt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=pt.getSdkProperties();if(!await pt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return pt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await pt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ti.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Pn.CONVERT_SLIPPAGE_TOLERANCE},projectId:ve.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=pt.getSdkProperties();if(!await pt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return pt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=pt.getSdkProperties();if(!await pt.isNetworkSupported((l=z.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return pc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Qe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await pt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Qe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ye.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await pt.isNetworkSupported((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ti.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await pt.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ti.api.post({path:"/v1/generators/onrampurl",params:{projectId:ve.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await pt.isNetworkSupported((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await pt.get({path:"/v1/onramp/options"})}catch{return Z1e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await pt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ti.api.post({path:"/v1/onramp/quote",params:{projectId:ve.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await pt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await pt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ti.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ve.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ti.clientId=t,Ti.api=new jC({baseUrl:kQ,clientId:t})}},Jo=er({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),X1e={state:Jo,replaceState(t){t&&Object.assign(Jo,Ig(t))},subscribe(t){return z.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return z.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){z.setAccountProp("status",t,e)},getCaipAddress(t){return z.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ot.getPlainAddress(t):void 0;e===z.state.activeChain&&(z.state.activeCaipAddress=t),z.setAccountProp("caipAddress",t,e),z.setAccountProp("address",n,e)},setBalance(t,e,n){z.setAccountProp("balance",t,n),z.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){z.setAccountProp("profileName",t,e)},setProfileImage(t,e){z.setAccountProp("profileImage",t,e)},setUser(t,e){z.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){z.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){z.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){z.setAccountProp("currentTab",t,z.state.activeChain)},setTokenBalance(t,e){t&&z.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){z.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){z.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=z.getAccountProp("addressLabels",n)||new Map;r.set(t,e),z.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=z.getAccountProp("addressLabels",e)||new Map;n.delete(t),z.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){z.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){z.setAccountProp("preferredAccountTypes",{...Jo.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Jo.preferredAccountTypes=t},setSocialProvider(t,e){t&&z.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){z.setAccountProp("socialWindow",t?Ig(t):void 0,e)},setFarcasterUrl(t,e){z.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Jo.balanceLoading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?ot.getPlainAddress(r):void 0;if(Jo.lastRetry&&!ot.isAllowedRetry(Jo.lastRetry,30*Pn.ONE_SEC_MS))return Jo.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await pt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Ye.setTokenBalance(c,n),Jo.lastRetry=void 0,Jo.balanceLoading=!1,c}}catch(a){Jo.lastRetry=Date.now(),t==null||t(a),pc.showError("Token Balance Unavailable")}finally{Jo.balanceLoading=!1}return[]},resetAccount(t){z.resetAccount(t)}},Ye=Vo(X1e),eAe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=z.state.activeCaipNetwork,r=Mt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ye.getCaipAddress(z.state.activeChain),o=t.chainNamespace!==z.state.activeChain,a=Ye.getCaipAddress(t.chainNamespace),l=je.getConnectorId(z.state.activeChain)===ze.CONNECTOR_ID.AUTH,u=ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Mt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Mt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Mt.push("SwitchNetwork",{...r,network:t})}},Ri=er({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),tAe={state:Ri,subscribe(t){return Xs(Ri,()=>t(Ri))},subscribeKey(t,e){return ti(Ri,t,e)},async open(t){var o,a;const e=Ye.state.status==="connected",n=t==null?void 0:t.namespace,r=z.state.activeChain,s=n&&n!==r,i=(o=z.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(gt.state.wcBasic?at.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await at.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),je.setFilterByNamespace(t==null?void 0:t.namespace),us.setLoading(!0,n),n&&s){const c=((a=z.getNetworkData(n))==null?void 0:a.caipNetwork)||z.getRequestedCaipNetworks(n)[0];c&&eAe.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=z.state.noAdapters;ve.state.manualWCControl||c&&!i?ot.isMobile()?Mt.reset("AllWallets"):Mt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Mt.reset(t.view,t.data):i?Mt.reset("Account"):Mt.reset("Connect")}Ri.open=!0,xl.set({open:!0}),or.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ve.state.enableEmbedded,e=!!z.state.activeCaipAddress;Ri.open&&or.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ri.open=!1,Mt.reset("Connect"),us.clearLoading(),t?e?Mt.replace("Account"):Mt.push("Connect"):xl.set({open:!1}),gt.resetUri()},setLoading(t,e){e&&Ri.loadingNamespaceMap.set(e,t),Ri.loading=t,xl.set({loading:t})},clearLoading(){Ri.loadingNamespaceMap.clear(),Ri.loading=!1},shake(){Ri.shake||(Ri.shake=!0,setTimeout(()=>{Ri.shake=!1},500))}},us=Vo(tAe),Qv={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},ID={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},nAe={providers:RQ,selectedProvider:null,error:null,purchaseCurrency:Qv,paymentCurrency:ID,purchaseCurrencies:[Qv],paymentCurrencies:[],quotesLoading:!1},nn=er(nAe),rAe={state:nn,subscribe(t){return Xs(nn,()=>t(nn))},subscribeKey(t,e){return ti(nn,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=z.state.activeChain===ze.CHAIN.SOLANA?"SOL":"USDC",n=Ye.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",A1e),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ve.state.projectId),nn.selectedProvider={...t,url:r.toString()}}else nn.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=RQ.filter(r=>e.includes(r.name));nn.providers=n}else nn.providers=[]},setPurchaseCurrency(t){nn.purchaseCurrency=t},setPaymentCurrency(t){nn.paymentCurrency=t},setPurchaseAmount(t){xD.state.purchaseAmount=t},setPaymentAmount(t){xD.state.paymentAmount=t},async getAvailableCurrencies(){const t=await pt.getOnrampOptions();nn.purchaseCurrencies=t.purchaseCurrencies,nn.paymentCurrencies=t.paymentCurrencies,nn.paymentCurrency=t.paymentCurrencies[0]||ID,nn.purchaseCurrency=t.purchaseCurrencies[0]||Qv,await at.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await at.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;nn.quotesLoading=!0;try{const n=await pt.getOnrampQuote({purchaseCurrency:nn.purchaseCurrency,paymentCurrency:nn.paymentCurrency,amount:((t=nn.paymentAmount)==null?void 0:t.toString())||"0",network:(e=nn.purchaseCurrency)==null?void 0:e.symbol});return nn.quotesLoading=!1,nn.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return nn.error=n.message,nn.quotesLoading=!1,null}finally{nn.quotesLoading=!1}},resetState(){nn.selectedProvider=null,nn.error=null,nn.purchaseCurrency=Qv,nn.paymentCurrency=ID,nn.purchaseCurrencies=[Qv],nn.paymentCurrencies=[],nn.paymentAmount=void 0,nn.purchaseAmount=void 0,nn.quotesLoading=!1}},xD=Vo(rAe),o4=2147483648,sAe={convertEVMChainIdToCoinType(t){if(t>=o4)throw new Error("Invalid chainId");return(o4|t)>>>0}},Zo=er({suggestions:[],loading:!1}),iAe={state:Zo,subscribe(t){return Xs(Zo,()=>t(Zo))},subscribeKey(t,e){return ti(Zo,t,e)},async resolveName(t){var e,n;try{return await pt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await pt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Zo.loading=!0,Zo.suggestions=[];const e=await pt.getEnsNameSuggestions(t);return Zo.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Zo.suggestions}catch(e){const n=Jv.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Zo.loading=!1}},async getNamesForAddress(t){try{if(!z.state.activeCaipNetwork)return[];const n=Qe.getEnsFromCacheForAddress(t);if(n)return n;const r=await pt.reverseLookupEnsName({address:t});return Qe.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=Jv.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=z.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ye.state.address,r=je.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Zo.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Mt.pushTransactionStack({onCancel(){Mt.replace("RegisterAccountName")}});const i=await gt.signMessage(s);Zo.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=sAe.convertEVMChainIdToCoinType(Number(o));await pt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ye.setProfileName(t,e.chainNamespace),Mt.replace("RegisterAccountNameSuccess")}catch(s){const i=Jv.parseEnsApiError(s,`Error registering name ${t}`);throw Mt.replace("RegisterAccountName"),new Error(i)}finally{Zo.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},Jv=Vo(iAe);var qM={exports:{}},Fy=typeof Reflect=="object"?Reflect:null,a4=Fy&&typeof Fy.apply=="function"?Fy.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},iS;Fy&&typeof Fy.ownKeys=="function"?iS=Fy.ownKeys:Object.getOwnPropertySymbols?iS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:iS=function(e){return Object.getOwnPropertyNames(e)};function oAe(t){console&&console.warn&&console.warn(t)}var DQ=Number.isNaN||function(e){return e!==e};function kn(){kn.init.call(this)}qM.exports=kn;qM.exports.once=uAe;kn.EventEmitter=kn;kn.prototype._events=void 0;kn.prototype._eventsCount=0;kn.prototype._maxListeners=void 0;var c4=10;function FN(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(kn,"defaultMaxListeners",{enumerable:!0,get:function(){return c4},set:function(t){if(typeof t!="number"||t<0||DQ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c4=t}});kn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};kn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||DQ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function LQ(t){return t._maxListeners===void 0?kn.defaultMaxListeners:t._maxListeners}kn.prototype.getMaxListeners=function(){return LQ(this)};kn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")a4(c,this,n);else for(var l=c.length,u=FQ(c,l),r=0;r<l;++r)a4(u[r],this,n);return!0};function MQ(t,e,n,r){var s,i,o;if(FN(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=LQ(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,oAe(a)}return t}kn.prototype.addListener=function(e,n){return MQ(this,e,n,!1)};kn.prototype.on=kn.prototype.addListener;kn.prototype.prependListener=function(e,n){return MQ(this,e,n,!0)};function aAe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function UQ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=aAe.bind(r);return s.listener=n,r.wrapFn=s,s}kn.prototype.once=function(e,n){return FN(n),this.on(e,UQ(this,e,n)),this};kn.prototype.prependOnceListener=function(e,n){return FN(n),this.prependListener(e,UQ(this,e,n)),this};kn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(FN(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():cAe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};kn.prototype.off=kn.prototype.removeListener;kn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function $Q(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?lAe(s):FQ(s,s.length)}kn.prototype.listeners=function(e){return $Q(this,e,!0)};kn.prototype.rawListeners=function(e){return $Q(this,e,!1)};kn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):BQ.call(t,e)};kn.prototype.listenerCount=BQ;function BQ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}kn.prototype.eventNames=function(){return this._eventsCount>0?iS(this._events):[]};function FQ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function cAe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function lAe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function uAe(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}jQ(t,e,i,{once:!0}),e!=="error"&&dAe(t,s,{once:!0})})}function dAe(t,e,n){typeof t.on=="function"&&jQ(t,"error",e,n)}function jQ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ka=qM.exports;const VM=Hg(ka);var xe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ND=function(t,e){return ND=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},ND(t,e)};function hAe(t,e){ND(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var TD=function(){return TD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},TD.apply(this,arguments)};function fAe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function pAe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function gAe(t,e){return function(n,r){e(n,r,t)}}function mAe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function yAe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function wAe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function bAe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function vAe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function RD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zQ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function EAe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(zQ(arguments[e]));return t}function _Ae(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function u_(t){return this instanceof u_?(this.v=t,this):new u_(t)}function CAe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof u_?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function AAe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:u_(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function SAe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof RD=="function"?RD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function IAe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function xAe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function NAe(t){return t&&t.__esModule?t:{default:t}}function TAe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function RAe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const PAe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return TD},__asyncDelegator:AAe,__asyncGenerator:CAe,__asyncValues:SAe,__await:u_,__awaiter:yAe,__classPrivateFieldGet:TAe,__classPrivateFieldSet:RAe,__createBinding:bAe,__decorate:pAe,__exportStar:vAe,__extends:hAe,__generator:wAe,__importDefault:NAe,__importStar:xAe,__makeTemplateObject:IAe,__metadata:mAe,__param:gAe,__read:zQ,__rest:fAe,__spread:EAe,__spreadArrays:_Ae,__values:RD},Symbol.toStringTag,{value:"Module"})),jN=vz(PAe);var IP={},jb={},l4;function OAe(){if(l4)return jb;l4=1,Object.defineProperty(jb,"__esModule",{value:!0}),jb.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return jb.delay=t,jb}var Pf={},xP={},Of={},u4;function kAe(){return u4||(u4=1,Object.defineProperty(Of,"__esModule",{value:!0}),Of.ONE_THOUSAND=Of.ONE_HUNDRED=void 0,Of.ONE_HUNDRED=100,Of.ONE_THOUSAND=1e3),Of}var NP={},d4;function DAe(){return d4||(d4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(NP)),NP}var h4;function WQ(){return h4||(h4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=jN;e.__exportStar(kAe(),t),e.__exportStar(DAe(),t)}(xP)),xP}var f4;function LAe(){if(f4)return Pf;f4=1,Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.fromMiliseconds=Pf.toMiliseconds=void 0;const t=WQ();function e(r){return r*t.ONE_THOUSAND}Pf.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Pf.fromMiliseconds=n,Pf}var p4;function MAe(){return p4||(p4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=jN;e.__exportStar(OAe(),t),e.__exportStar(LAe(),t)}(IP)),IP}var xm={},g4;function UAe(){if(g4)return xm;g4=1,Object.defineProperty(xm,"__esModule",{value:!0}),xm.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return xm.Watch=t,xm.default=t,xm}var TP={},zb={},m4;function $Ae(){if(m4)return zb;m4=1,Object.defineProperty(zb,"__esModule",{value:!0}),zb.IWatch=void 0;class t{}return zb.IWatch=t,zb}var y4;function BAe(){return y4||(y4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),jN.__exportStar($Ae(),t)}(TP)),TP}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=jN;e.__exportStar(MAe(),t),e.__exportStar(UAe(),t),e.__exportStar(BAe(),t),e.__exportStar(WQ(),t)})(xe);class rm{}let FAe=class extends rm{constructor(e){super()}};const w4=xe.FIVE_SECONDS,sm={pulse:"heartbeat_pulse"};let jAe=class HQ extends FAe{constructor(e){super(e),this.events=new ka.EventEmitter,this.interval=w4,this.interval=(e==null?void 0:e.interval)||w4}static async init(e){const n=new HQ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),xe.toMiliseconds(this.interval))}pulse(){this.events.emit(sm.pulse)}};const zAe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,WAe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,HAe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function GAe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){qAe(t);return}return e}function qAe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function sA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!HAe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(zAe.test(t)||WAe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,GAe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function im(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function GQ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=im(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let RP;function zC(){return RP||(RP=GQ("keyval-store","keyval")),RP}function b4(t,e=zC()){return e("readonly",n=>im(n.get(t)))}function VAe(t,e,n=zC()){return n("readwrite",r=>(r.put(e,t),im(r.transaction)))}function KAe(t,e=zC()){return e("readwrite",n=>(n.delete(t),im(n.transaction)))}function YAe(t=zC()){return t("readwrite",e=>(e.clear(),im(e.transaction)))}function QAe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},im(t.transaction)}function JAe(t=zC()){return t("readonly",e=>{if(e.getAllKeys)return im(e.getAllKeys());const n=[];return QAe(e,r=>n.push(r.key)).then(()=>n)})}const ZAe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),XAe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Ng(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return XAe(t)}catch{return t}}function rd(t){return typeof t=="string"?t:ZAe(t)||""}function eSe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var tSe=nSe;function nSe(t,e,n){var r=n&&n.stringify||eSe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const v4=tSe;var Zm=Nl;const d_=hSe().console||{},rSe={mapHttpRequest:iA,mapHttpResponse:iA,wrapRequestSerializer:PP,wrapResponseSerializer:PP,wrapErrorSerializer:PP,req:iA,res:iA,err:cSe};function sSe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Nl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||d_;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=sSe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=h_),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:lSe(t)};c.levels=Nl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=h_,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=PD());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Nm(l,c,"error","log"),Nm(l,c,"fatal","error"),Nm(l,c,"warn","error"),Nm(l,c,"info","log"),Nm(l,c,"debug","log"),Nm(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var m=Object.assign({},r,y),w=t.browser.serialize===!0?Object.keys(m):s;delete p.serializers,zN([p],w,m,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=Tm(A,p,"error"),this.fatal=Tm(A,p,"fatal"),this.warn=Tm(A,p,"warn"),this.info=Tm(A,p,"info"),this.debug=Tm(A,p,"debug"),this.trace=Tm(A,p,"trace"),m&&(this.serializers=m,this._serialize=w),e&&(this._logEvent=PD([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Nl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Nl.stdSerializers=rSe;Nl.stdTimeFunctions=Object.assign({},{nullTime:qQ,epochTime:VQ,unixTime:uSe,isoTime:dSe});function Nm(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?h_:s[n]?s[n]:d_[n]||d_[r]||h_,iSe(t,e,n)}function iSe(t,e,n){!t.transmit&&e[n]===h_||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===d_?d_:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&zN(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,oSe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Nl.levels.values[l],d=Nl.levels.values[n];if(d<u)return;aSe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Nl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function oSe(t,e,n,r){t._serialize&&zN(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Nl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?v4(s.shift(),s):void 0}else typeof i=="string"&&(i=v4(s.shift(),s));return i!==void 0&&(o.msg=i),o}function zN(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Nl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Tm(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function aSe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;zN(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=PD(c)}function PD(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function cSe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function lSe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?qQ:VQ}function iA(){return{}}function PP(t){return t}function h_(){}function qQ(){return!1}function VQ(){return Date.now()}function uSe(){return Math.round(Date.now()/1e3)}function dSe(){return new Date(Date.now()).toISOString()}function hSe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const WC=Hg(Zm),fSe={level:"info"},HC="custom_context",KM=1e3*1024;let pSe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},E4=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new pSe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},KQ=class{constructor(e,n=KM){this.level=e??"error",this.levelValue=Zm.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new E4(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Zm.levels.values.error?console.error(e):n===Zm.levels.values.warn?console.warn(e):n===Zm.levels.values.debug?console.debug(e):n===Zm.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(rd({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new E4(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(rd({extraMetadata:e})),new Blob(n,{type:"application/json"})}},gSe=class{constructor(e,n=KM){this.baseChunkLogger=new KQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},mSe=class{constructor(e,n=KM){this.baseChunkLogger=new KQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var ySe=Object.defineProperty,wSe=Object.defineProperties,bSe=Object.getOwnPropertyDescriptors,_4=Object.getOwnPropertySymbols,vSe=Object.prototype.hasOwnProperty,ESe=Object.prototype.propertyIsEnumerable,C4=(t,e,n)=>e in t?ySe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LI=(t,e)=>{for(var n in e||(e={}))vSe.call(e,n)&&C4(t,n,e[n]);if(_4)for(var n of _4(e))ESe.call(e,n)&&C4(t,n,e[n]);return t},MI=(t,e)=>wSe(t,bSe(e));function om(t){return MI(LI({},t),{level:(t==null?void 0:t.level)||fSe.level})}function _Se(t,e=HC){return t[e]||""}function CSe(t,e,n=HC){return t[n]=e,t}function ho(t,e=HC){let n="";return typeof t.bindings>"u"?n=_Se(t,e):n=t.bindings().context||"",n}function ASe(t,e,n=HC){const r=ho(t,n);return r.trim()?`${r}/${e}`:e}function Ls(t,e,n=HC){const r=ASe(t,e,n),s=t.child({context:r});return CSe(s,r,n)}function SSe(t){var e,n;const r=new gSe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:WC(MI(LI({},t.opts),{level:"trace",browser:MI(LI({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function ISe(t){var e;const n=new mSe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:WC(MI(LI({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function WN(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?SSe(t):ISe(t)}function xSe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function YQ(t,...e){if(!xSe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function A4(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function NSe(t,e){YQ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Rm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const OP=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function TSe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function QQ(t){return typeof t=="string"&&(t=TSe(t)),YQ(t),t}let RSe=class{clone(){return this._cloneInto()}};function PSe(t){const e=r=>t().update(QQ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function JQ(t=32){if(Rm&&typeof Rm.getRandomValues=="function")return Rm.getRandomValues(new Uint8Array(t));if(Rm&&typeof Rm.randomBytes=="function")return Rm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function OSe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let kSe=class extends RSe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=OP(this.buffer)}update(e){A4(this);const{view:n,buffer:r,blockLen:s}=this;e=QQ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=OP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){A4(this),NSe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;OSe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=OP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const oA=BigInt(2**32-1),OD=BigInt(32);function ZQ(t,e=!1){return e?{h:Number(t&oA),l:Number(t>>OD&oA)}:{h:Number(t>>OD&oA)|0,l:Number(t&oA)|0}}function DSe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=ZQ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const LSe=(t,e)=>BigInt(t>>>0)<<OD|BigInt(e>>>0),MSe=(t,e,n)=>t>>>n,USe=(t,e,n)=>t<<32-n|e>>>n,$Se=(t,e,n)=>t>>>n|e<<32-n,BSe=(t,e,n)=>t<<32-n|e>>>n,FSe=(t,e,n)=>t<<64-n|e>>>n-32,jSe=(t,e,n)=>t>>>n-32|e<<64-n,zSe=(t,e)=>e,WSe=(t,e)=>t,HSe=(t,e,n)=>t<<n|e>>>32-n,GSe=(t,e,n)=>e<<n|t>>>32-n,qSe=(t,e,n)=>e<<n-32|t>>>64-n,VSe=(t,e,n)=>t<<n-32|e>>>64-n;function KSe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const YSe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),QSe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,JSe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),ZSe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,XSe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),eIe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Dt={fromBig:ZQ,split:DSe,toBig:LSe,shrSH:MSe,shrSL:USe,rotrSH:$Se,rotrSL:BSe,rotrBH:FSe,rotrBL:jSe,rotr32H:zSe,rotr32L:WSe,rotlSH:HSe,rotlSL:GSe,rotlBH:qSe,rotlBL:VSe,add:KSe,add3L:YSe,add3H:QSe,add4L:JSe,add4H:ZSe,add5H:eIe,add5L:XSe},[tIe,nIe]=Dt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Id=new Uint32Array(80),xd=new Uint32Array(80);let rIe=class extends kSe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)Id[v]=e.getUint32(n),xd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Id[v-15]|0,C=xd[v-15]|0,S=Dt.rotrSH(A,C,1)^Dt.rotrSH(A,C,8)^Dt.shrSH(A,C,7),x=Dt.rotrSL(A,C,1)^Dt.rotrSL(A,C,8)^Dt.shrSL(A,C,7),T=Id[v-2]|0,I=xd[v-2]|0,k=Dt.rotrSH(T,I,19)^Dt.rotrBH(T,I,61)^Dt.shrSH(T,I,6),O=Dt.rotrSL(T,I,19)^Dt.rotrBL(T,I,61)^Dt.shrSL(T,I,6),B=Dt.add4L(x,O,xd[v-7],xd[v-16]),G=Dt.add4H(B,S,k,Id[v-7],Id[v-16]);Id[v]=G|0,xd[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:m,Hl:w}=this;for(let v=0;v<80;v++){const A=Dt.rotrSH(d,h,14)^Dt.rotrSH(d,h,18)^Dt.rotrBH(d,h,41),C=Dt.rotrSL(d,h,14)^Dt.rotrSL(d,h,18)^Dt.rotrBL(d,h,41),S=d&f^~d&g,x=h&p^~h&y,T=Dt.add5L(w,C,x,nIe[v],xd[v]),I=Dt.add5H(T,m,A,S,tIe[v],Id[v]),k=T|0,O=Dt.rotrSH(r,s,28)^Dt.rotrBH(r,s,34)^Dt.rotrBH(r,s,39),B=Dt.rotrSL(r,s,28)^Dt.rotrBL(r,s,34)^Dt.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,w=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Dt.add(l|0,u|0,I|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const R=Dt.add3L(k,B,W);r=Dt.add3H(R,I,O,G),s=R|0}({h:r,l:s}=Dt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Dt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Dt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Dt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Dt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Dt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Dt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:m,l:w}=Dt.add(this.Hh|0,this.Hl|0,m|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,m,w)}roundClean(){Id.fill(0),xd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const sIe=PSe(()=>new rIe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const YM=BigInt(0),XQ=BigInt(1),iIe=BigInt(2);function QM(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function JM(t){if(!QM(t))throw new Error("Uint8Array expected")}function kP(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const oIe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ZM(t){JM(t);let e="";for(let n=0;n<t.length;n++)e+=oIe[t[n]];return e}function eJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?YM:BigInt("0x"+t)}const Xl={_0:48,_9:57,A:65,F:70,a:97,f:102};function S4(t){if(t>=Xl._0&&t<=Xl._9)return t-Xl._0;if(t>=Xl.A&&t<=Xl.F)return t-(Xl.A-10);if(t>=Xl.a&&t<=Xl.f)return t-(Xl.a-10)}function tJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=S4(t.charCodeAt(i)),a=S4(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function aIe(t){return eJ(ZM(t))}function oS(t){return JM(t),eJ(ZM(Uint8Array.from(t).reverse()))}function nJ(t,e){return tJ(t.toString(16).padStart(e*2,"0"))}function kD(t,e){return nJ(t,e).reverse()}function eu(t,e,n){let r;if(typeof e=="string")try{r=tJ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(QM(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function I4(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];JM(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const DP=t=>typeof t=="bigint"&&YM<=t;function cIe(t,e,n){return DP(t)&&DP(e)&&DP(n)&&e<=t&&t<n}function Wb(t,e,n,r){if(!cIe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function lIe(t){let e;for(e=0;t>YM;t>>=XQ,e+=1);return e}const uIe=t=>(iIe<<BigInt(t-1))-XQ,dIe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||QM(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function XM(t,e,n={}){const r=(s,i,o)=>{const a=dIe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function x4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const ds=BigInt(0),Nr=BigInt(1),Jf=BigInt(2),hIe=BigInt(3),DD=BigInt(4),N4=BigInt(5),T4=BigInt(8);function Wr(t,e){const n=t%e;return n>=ds?n:e+n}function fIe(t,e,n){if(e<ds)throw new Error("invalid exponent, negatives unsupported");if(n<=ds)throw new Error("invalid modulus");if(n===Nr)return ds;let r=Nr;for(;e>ds;)e&Nr&&(r=r*t%n),t=t*t%n,e>>=Nr;return r}function Bc(t,e,n){let r=t;for(;e-- >ds;)r*=r,r%=n;return r}function R4(t,e){if(t===ds)throw new Error("invert: expected non-zero number");if(e<=ds)throw new Error("invert: expected positive modulus, got "+e);let n=Wr(t,e),r=e,s=ds,i=Nr;for(;n!==ds;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Nr)throw new Error("invert: does not exist");return Wr(s,e)}function pIe(t){const e=(t-Nr)/Jf;let n,r,s;for(n=t-Nr,r=0;n%Jf===ds;n/=Jf,r++);for(s=Jf;s<t&&fIe(s,e,t)!==t-Nr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Nr)/DD;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Nr)/Jf;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Nr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function gIe(t){if(t%DD===hIe){const e=(t+Nr)/DD;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%T4===N4){const e=(t-N4)/T4;return function(n,r){const s=n.mul(r,Jf),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Jf),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return pIe(t)}const mIe=(t,e)=>(Wr(t,e)&Nr)===Nr,yIe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wIe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=yIe.reduce((r,s)=>(r[s]="function",r),e);return XM(t,n)}function bIe(t,e,n){if(n<ds)throw new Error("invalid exponent, negatives unsupported");if(n===ds)return t.ONE;if(n===Nr)return e;let r=t.ONE,s=e;for(;n>ds;)n&Nr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Nr;return r}function vIe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function rJ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function sJ(t,e,n=!1,r={}){if(t<=ds)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=rJ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:uIe(s),ZERO:ds,ONE:Nr,create:c=>Wr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ds<=c&&c<t},is0:c=>c===ds,isOdd:c=>(c&Nr)===Nr,neg:c=>Wr(-c,t),eql:(c,l)=>c===l,sqr:c=>Wr(c*c,t),add:(c,l)=>Wr(c+l,t),sub:(c,l)=>Wr(c-l,t),mul:(c,l)=>Wr(c*l,t),pow:(c,l)=>bIe(a,c,l),div:(c,l)=>Wr(c*R4(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>R4(c,t),sqrt:r.sqrt||(c=>(o||(o=gIe(t)),o(a,c))),invertBatch:c=>vIe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?kD(c,i):nJ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?oS(c):aIe(c)}});return Object.freeze(a)}const P4=BigInt(0),aA=BigInt(1);function LP(t,e){const n=e.negate();return t?n:e}function iJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function MP(t,e){iJ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function EIe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function _Ie(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const UP=new WeakMap,oJ=new WeakMap;function $P(t){return oJ.get(t)||1}function CIe(t,e){return{constTimeNegate:LP,hasPrecomputes(n){return $P(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>P4;)r&aA&&(s=s.add(i)),i=i.double(),r>>=aA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=MP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=MP(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=aA);const g=f,y=f+Math.abs(p)-1,m=h%2!==0,w=p<0;p===0?c=c.add(LP(m,r[g])):a=a.add(LP(w,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=MP(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===P4)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=aA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=UP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&UP.set(r,s(i))),i},wNAFCached(n,r,s){const i=$P(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=$P(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){iJ(r,e),oJ.set(n,r),UP.delete(n)}}}function AIe(t,e,n,r){if(EIe(n,t),_Ie(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=lIe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function SIe(t){return wIe(t.Fp),XM(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rJ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const za=BigInt(0),Pi=BigInt(1),cA=BigInt(2),IIe=BigInt(8),xIe={zip215:!0};function NIe(t){const e=SIe(t);return XM(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function TIe(t){const e=NIe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=cA<<BigInt(a*8)-Pi,u=n.create,d=sJ(e.n,e.nBitLength),h=e.uvRatio||((R,N)=>{try{return{isValid:!0,value:n.sqrt(R*n.inv(N))}}catch{return{isValid:!1,value:za}}}),f=e.adjustScalarBytes||(R=>R),p=e.domain||((R,N,M)=>{if(kP("phflag",M),N.length||M)throw new Error("Contexts/pre-hash are not supported");return R});function g(R,N){Wb("coordinate "+R,N,za,l)}function y(R){if(!(R instanceof v))throw new Error("ExtendedPoint expected")}const m=x4((R,N)=>{const{ex:M,ey:P,ez:L}=R,j=R.is0();N==null&&(N=j?IIe:n.inv(L));const q=u(M*N),ne=u(P*N),le=u(L*N);if(j)return{x:za,y:Pi};if(le!==Pi)throw new Error("invZ was invalid");return{x:q,y:ne}}),w=x4(R=>{const{a:N,d:M}=e;if(R.is0())throw new Error("bad point: ZERO");const{ex:P,ey:L,ez:j,et:q}=R,ne=u(P*P),le=u(L*L),oe=u(j*j),se=u(oe*oe),ye=u(ne*N),Z=u(oe*u(ye+le)),ae=u(se+u(M*u(ne*le)));if(Z!==ae)throw new Error("bad point: equation left != right (1)");const he=u(P*L),de=u(j*q);if(he!==de)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(N,M,P,L){this.ex=N,this.ey=M,this.ez=P,this.et=L,g("x",N),g("y",M),g("z",P),g("t",L),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof v)throw new Error("extended point not allowed");const{x:M,y:P}=N||{};return g("x",M),g("y",P),new v(M,P,Pi,u(M*P))}static normalizeZ(N){const M=n.invertBatch(N.map(P=>P.ez));return N.map((P,L)=>P.toAffine(M[L])).map(v.fromAffine)}static msm(N,M){return AIe(v,d,N,M)}_setWindowSize(N){S.setWindowSize(this,N)}assertValidity(){w(this)}equals(N){y(N);const{ex:M,ey:P,ez:L}=this,{ex:j,ey:q,ez:ne}=N,le=u(M*ne),oe=u(j*L),se=u(P*ne),ye=u(q*L);return le===oe&&se===ye}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:M,ey:P,ez:L}=this,j=u(M*M),q=u(P*P),ne=u(cA*u(L*L)),le=u(N*j),oe=M+P,se=u(u(oe*oe)-j-q),ye=le+q,Z=ye-ne,ae=le-q,he=u(se*Z),de=u(ye*ae),be=u(se*ae),Je=u(Z*ye);return new v(he,de,Je,be)}add(N){y(N);const{a:M,d:P}=e,{ex:L,ey:j,ez:q,et:ne}=this,{ex:le,ey:oe,ez:se,et:ye}=N;if(M===BigInt(-1)){const Me=u((j-L)*(oe+le)),kt=u((j+L)*(oe-le)),nr=u(kt-Me);if(nr===za)return this.double();const Dn=u(q*cA*ye),Ko=u(ne*cA*se),zl=Ko+Dn,Sr=kt+Me,Bs=Ko-Dn,Ua=u(zl*nr),Ii=u(Sr*Bs),pr=u(zl*Bs),Nf=u(nr*Sr);return new v(Ua,Ii,Nf,pr)}const Z=u(L*le),ae=u(j*oe),he=u(ne*P*ye),de=u(q*se),be=u((L+j)*(le+oe)-Z-ae),Je=de-he,_e=de+he,Ae=u(ae-M*Z),tt=u(be*Je),Se=u(_e*Ae),Gt=u(be*Ae),en=u(Je*_e);return new v(tt,Se,en,Gt)}subtract(N){return this.add(N.negate())}wNAF(N){return S.wNAFCached(this,N,v.normalizeZ)}multiply(N){const M=N;Wb("scalar",M,Pi,r);const{p:P,f:L}=this.wNAF(M);return v.normalizeZ([P,L])[0]}multiplyUnsafe(N,M=v.ZERO){const P=N;return Wb("scalar",P,za,r),P===za?C:this.is0()||P===Pi?this:S.wNAFCachedUnsafe(this,P,v.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(N){return m(this,N)}clearCofactor(){const{h:N}=e;return N===Pi?this:this.multiplyUnsafe(N)}static fromHex(N,M=!1){const{d:P,a:L}=e,j=n.BYTES;N=eu("pointHex",N,j),kP("zip215",M);const q=N.slice(),ne=N[j-1];q[j-1]=ne&-129;const le=oS(q),oe=M?l:n.ORDER;Wb("pointHex.y",le,za,oe);const se=u(le*le),ye=u(se-Pi),Z=u(P*se-L);let{isValid:ae,value:he}=h(ye,Z);if(!ae)throw new Error("Point.fromHex: invalid y coordinate");const de=(he&Pi)===Pi,be=(ne&128)!==0;if(!M&&he===za&&be)throw new Error("Point.fromHex: x=0 and x_0=1");return be!==de&&(he=u(-he)),v.fromAffine({x:he,y:le})}static fromPrivateKey(N){return I(N).point}toRawBytes(){const{x:N,y:M}=this.toAffine(),P=kD(M,n.BYTES);return P[P.length-1]|=N&Pi?128:0,P}toHex(){return ZM(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Pi,u(e.Gx*e.Gy)),v.ZERO=new v(za,Pi,Pi,za);const{BASE:A,ZERO:C}=v,S=CIe(v,a*8);function x(R){return Wr(R,r)}function T(R){return x(oS(R))}function I(R){const N=n.BYTES;R=eu("private key",R,N);const M=eu("hashed private key",i(R),2*N),P=f(M.slice(0,N)),L=M.slice(N,2*N),j=T(P),q=A.multiply(j),ne=q.toRawBytes();return{head:P,prefix:L,scalar:j,point:q,pointBytes:ne}}function k(R){return I(R).pointBytes}function O(R=new Uint8Array,...N){const M=I4(...N);return T(i(p(M,eu("context",R),!!s)))}function B(R,N,M={}){R=eu("message",R),s&&(R=s(R));const{prefix:P,scalar:L,pointBytes:j}=I(N),q=O(M.context,P,R),ne=A.multiply(q).toRawBytes(),le=O(M.context,ne,j,R),oe=x(q+le*L);Wb("signature.s",oe,za,r);const se=I4(ne,kD(oe,n.BYTES));return eu("result",se,n.BYTES*2)}const G=xIe;function W(R,N,M,P=G){const{context:L,zip215:j}=P,q=n.BYTES;R=eu("signature",R,2*q),N=eu("message",N),M=eu("publicKey",M,q),j!==void 0&&kP("zip215",j),s&&(N=s(N));const ne=oS(R.slice(q,2*q));let le,oe,se;try{le=v.fromHex(M,j),oe=v.fromHex(R.slice(0,q),j),se=A.multiplyUnsafe(ne)}catch{return!1}if(!j&&le.isSmallOrder())return!1;const ye=O(L,oe.toRawBytes(),le.toRawBytes(),N);return oe.add(le.multiplyUnsafe(ye)).subtract(se).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:B,verify:W,ExtendedPoint:v,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(n.BYTES),precompute(R=8,N=v.BASE){return N._setWindowSize(R),N.multiply(BigInt(3)),N}}}}BigInt(0),BigInt(1);const eU=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),O4=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const RIe=BigInt(1),k4=BigInt(2);BigInt(3);const PIe=BigInt(5),OIe=BigInt(8);function kIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=eU,o=t*t%i*t%i,a=Bc(o,k4,i)*o%i,c=Bc(a,RIe,i)*t%i,l=Bc(c,PIe,i)*c%i,u=Bc(l,e,i)*l%i,d=Bc(u,n,i)*u%i,h=Bc(d,r,i)*d%i,f=Bc(h,s,i)*h%i,p=Bc(f,s,i)*h%i,g=Bc(p,e,i)*l%i;return{pow_p_5_8:Bc(g,k4,i)*t%i,b2:o}}function DIe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function LIe(t,e){const n=eU,r=Wr(e*e*e,n),s=Wr(r*r*e,n),i=kIe(t*s).pow_p_5_8;let o=Wr(t*r*i,n);const a=Wr(e*o*o,n),c=o,l=Wr(o*O4,n),u=a===t,d=a===Wr(-t,n),h=a===Wr(-t*O4,n);return u&&(o=c),(d||h)&&(o=l),mIe(o,n)&&(o=Wr(-o,n)),{isValid:u||d,value:o}}const MIe=sJ(eU,void 0,!0),UIe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:MIe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:OIe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sIe,randomBytes:JQ,adjustScalarBytes:DIe,uvRatio:LIe},aJ=TIe(UIe),$Ie="EdDSA",BIe="JWT",UI=".",HN="base64url",cJ="utf8",lJ="utf8",FIe=":",jIe="did",zIe="key",D4="base58btc",WIe="z",HIe="K36",GIe=32;function tU(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function uJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?tU(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function dJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=uJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return tU(n)}function qIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var v=(w-m)*u+1>>>0,A=new Uint8Array(v);m!==w;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,v=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=w-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=w-m;x!==w&&v[x]===0;)x++;for(var T=new Uint8Array(y+(w-x)),I=y;x!==w;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var VIe=qIe,KIe=VIe;const hJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},YIe=t=>new TextEncoder().encode(t),QIe=t=>new TextDecoder().decode(t);let JIe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},ZIe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return fJ(this,e)}},XIe=class{constructor(e){this.decoders=e}or(e){return fJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const fJ=(t,e)=>new XIe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let exe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new JIe(e,n,r),this.decoder=new ZIe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const GN=({name:t,prefix:e,encode:n,decode:r})=>new exe(t,e,n,r),GC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=KIe(n,e);return GN({prefix:t,name:e,encode:r,decode:i=>hJ(s(i))})},txe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},nxe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ms=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>GN({prefix:e,name:t,encode(s){return nxe(s,r,n)},decode(s){return txe(s,r,n,t)}}),rxe=GN({prefix:"\0",name:"identity",encode:t=>QIe(t),decode:t=>YIe(t)});var sxe=Object.freeze({__proto__:null,identity:rxe});const ixe=Ms({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var oxe=Object.freeze({__proto__:null,base2:ixe});const axe=Ms({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var cxe=Object.freeze({__proto__:null,base8:axe});const lxe=GC({prefix:"9",name:"base10",alphabet:"0123456789"});var uxe=Object.freeze({__proto__:null,base10:lxe});const dxe=Ms({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),hxe=Ms({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var fxe=Object.freeze({__proto__:null,base16:dxe,base16upper:hxe});const pxe=Ms({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),gxe=Ms({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),mxe=Ms({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),yxe=Ms({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),wxe=Ms({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),bxe=Ms({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vxe=Ms({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Exe=Ms({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),_xe=Ms({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Cxe=Object.freeze({__proto__:null,base32:pxe,base32upper:gxe,base32pad:mxe,base32padupper:yxe,base32hex:wxe,base32hexupper:bxe,base32hexpad:vxe,base32hexpadupper:Exe,base32z:_xe});const Axe=GC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Sxe=GC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ixe=Object.freeze({__proto__:null,base36:Axe,base36upper:Sxe});const xxe=GC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Nxe=GC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Txe=Object.freeze({__proto__:null,base58btc:xxe,base58flickr:Nxe});const Rxe=Ms({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Pxe=Ms({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Oxe=Ms({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),kxe=Ms({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Dxe=Object.freeze({__proto__:null,base64:Rxe,base64pad:Pxe,base64url:Oxe,base64urlpad:kxe});const pJ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Lxe=pJ.reduce((t,e,n)=>(t[n]=e,t),[]),Mxe=pJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Uxe(t){return t.reduce((e,n)=>(e+=Lxe[n],e),"")}function $xe(t){const e=[];for(const n of t){const r=Mxe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Bxe=GN({prefix:"🚀",name:"base256emoji",encode:Uxe,decode:$xe});var Fxe=Object.freeze({__proto__:null,base256emoji:Bxe}),jxe=gJ,L4=128,zxe=-128,Wxe=Math.pow(2,31);function gJ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Wxe;)e[n++]=t&255|L4,t/=128;for(;t&zxe;)e[n++]=t&255|L4,t>>>=7;return e[n]=t|0,gJ.bytes=n-r+1,e}var Hxe=LD,Gxe=128,M4=127;function LD(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw LD.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&M4)<<s:(o&M4)*Math.pow(2,s),s+=7}while(o>=Gxe);return LD.bytes=i-r,n}var qxe=Math.pow(2,7),Vxe=Math.pow(2,14),Kxe=Math.pow(2,21),Yxe=Math.pow(2,28),Qxe=Math.pow(2,35),Jxe=Math.pow(2,42),Zxe=Math.pow(2,49),Xxe=Math.pow(2,56),eNe=Math.pow(2,63),tNe=function(t){return t<qxe?1:t<Vxe?2:t<Kxe?3:t<Yxe?4:t<Qxe?5:t<Jxe?6:t<Zxe?7:t<Xxe?8:t<eNe?9:10},nNe={encode:jxe,decode:Hxe,encodingLength:tNe},mJ=nNe;const U4=(t,e,n=0)=>(mJ.encode(t,e,n),e),$4=t=>mJ.encodingLength(t),MD=(t,e)=>{const n=e.byteLength,r=$4(t),s=r+$4(n),i=new Uint8Array(s+n);return U4(t,i,0),U4(n,i,r),i.set(e,s),new rNe(t,n,e,i)};let rNe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const yJ=({name:t,code:e,encode:n})=>new sNe(t,e,n);let sNe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?MD(this.code,n):n.then(r=>MD(this.code,r))}else throw Error("Unknown type, must be binary type")}};const wJ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),iNe=yJ({name:"sha2-256",code:18,encode:wJ("SHA-256")}),oNe=yJ({name:"sha2-512",code:19,encode:wJ("SHA-512")});var aNe=Object.freeze({__proto__:null,sha256:iNe,sha512:oNe});const bJ=0,cNe="identity",vJ=hJ,lNe=t=>MD(bJ,vJ(t)),uNe={code:bJ,name:cNe,encode:vJ,digest:lNe};var dNe=Object.freeze({__proto__:null,identity:uNe});new TextEncoder,new TextDecoder;const B4={...sxe,...oxe,...cxe,...uxe,...fxe,...Cxe,...Ixe,...Txe,...Dxe,...Fxe};({...aNe,...dNe});function EJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const F4=EJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),BP=EJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=uJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),_J={utf8:F4,"utf-8":F4,hex:B4.base16,latin1:BP,ascii:BP,binary:BP,...B4};function qN(t,e="utf8"){const n=_J[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function sb(t,e="utf8"){const n=_J[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?tU(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function j4(t){return Ng(qN(sb(t,HN),cJ))}function $I(t){return qN(sb(rd(t),cJ),HN)}function CJ(t){const e=sb(HIe,D4),n=WIe+qN(dJ([e,t]),D4);return[jIe,zIe,n].join(FIe)}function hNe(t){return qN(t,HN)}function fNe(t){return sb(t,HN)}function pNe(t){return sb([$I(t.header),$I(t.payload)].join(UI),lJ)}function gNe(t){return[$I(t.header),$I(t.payload),hNe(t.signature)].join(UI)}function UD(t){const e=t.split(UI),n=j4(e[0]),r=j4(e[1]),s=fNe(e[2]),i=sb(e.slice(0,2).join(UI),lJ);return{header:n,payload:r,signature:s,data:i}}function z4(t=JQ(GIe)){const e=aJ.getPublicKey(t);return{secretKey:dJ([t,e]),publicKey:e}}async function mNe(t,e,n,r,s=xe.fromMiliseconds(Date.now())){const i={alg:$Ie,typ:BIe},o=CJ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=pNe({header:i,payload:c}),u=aJ.sign(l,r.secretKey.slice(0,32));return gNe({header:i,payload:c,signature:u})}var W4=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},yNe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),wNe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),bNe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),vNe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),ENe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),_Ne=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,CNe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,H4=3,ANe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",_Ne]],G4=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function SNe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ENe:typeof navigator<"u"?xNe(navigator.userAgent):TNe()}function INe(t){return t!==""&&ANe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function xNe(t){var e=INe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new vNe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<H4&&(s=W4(W4([],s,!0),RNe(H4-s.length),!0)):s=[];var i=s.join("."),o=NNe(t),a=CNe.exec(t);return a&&a[1]?new bNe(n,i,o,a[1]):new yNe(n,i,o)}function NNe(t){for(var e=0,n=G4.length;e<n;e++){var r=G4[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function TNe(){var t=typeof process<"u"&&process.version;return t?new wNe(process.version.slice(1)):null}function RNe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.getLocalStorage=Hn.getLocalStorageOrThrow=Hn.getCrypto=Hn.getCryptoOrThrow=AJ=Hn.getLocation=Hn.getLocationOrThrow=nU=Hn.getNavigator=Hn.getNavigatorOrThrow=Tg=Hn.getDocument=Hn.getDocumentOrThrow=Hn.getFromWindowOrThrow=Hn.getFromWindow=void 0;function am(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Hn.getFromWindow=am;function ib(t){const e=am(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Hn.getFromWindowOrThrow=ib;function PNe(){return ib("document")}Hn.getDocumentOrThrow=PNe;function ONe(){return am("document")}var Tg=Hn.getDocument=ONe;function kNe(){return ib("navigator")}Hn.getNavigatorOrThrow=kNe;function DNe(){return am("navigator")}var nU=Hn.getNavigator=DNe;function LNe(){return ib("location")}Hn.getLocationOrThrow=LNe;function MNe(){return am("location")}var AJ=Hn.getLocation=MNe;function UNe(){return ib("crypto")}Hn.getCryptoOrThrow=UNe;function $Ne(){return am("crypto")}Hn.getCrypto=$Ne;function BNe(){return ib("localStorage")}Hn.getLocalStorageOrThrow=BNe;function FNe(){return am("localStorage")}Hn.getLocalStorage=FNe;var rU={};Object.defineProperty(rU,"__esModule",{value:!0});var SJ=rU.getWindowMetadata=void 0;const q4=Hn;function jNe(){let t,e;try{t=q4.getDocumentOrThrow(),e=q4.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let m=e.protocol+"//"+e.host;if(y.indexOf("/")===0)m+=y;else{const w=e.pathname.split("/");w.pop();const v=w.join("/");m+=v+"/"+y}h.push(m)}else if(y.indexOf("//")===0){const m=e.protocol+y;h.push(m)}else h.push(y)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}SJ=rU.getWindowMetadata=jNe;function zNe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let w=l[h],v=0;for(let A=p-1;(w!==0||v<d)&&A!==-1;A--,v++)w+=256*g[A]>>>0,g[A]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=v,h++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let m=r.repeat(u);for(;y<p;++y)m+=t.charAt(g[y]);return m}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const w=l.charCodeAt(u);if(w>255)return;let v=e[w];if(v===255)return;let A=0;for(let C=f-1;(v!==0||A<h)&&C!==-1;C--,A++)v+=n*p[C]>>>0,p[C]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(d+(f-g));let m=d;for(;g!==f;)y[m++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var WNe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const IJ=zNe(WNe);function xJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Zv(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=xJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function HNe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var v=(w-m)*u+1>>>0,A=new Uint8Array(v);m!==w;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,v=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=w-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=w-m;x!==w&&v[x]===0;)x++;for(var T=new Uint8Array(y+(w-x)),I=y;x!==w;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var GNe=HNe,qNe=GNe;const VNe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},KNe=t=>new TextEncoder().encode(t),YNe=t=>new TextDecoder().decode(t);class QNe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class JNe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return NJ(this,e)}}class ZNe{constructor(e){this.decoders=e}or(e){return NJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const NJ=(t,e)=>new ZNe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class XNe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new QNe(e,n,r),this.decoder=new JNe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const VN=({name:t,prefix:e,encode:n,decode:r})=>new XNe(t,e,n,r),qC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=qNe(n,e);return VN({prefix:t,name:e,encode:r,decode:i=>VNe(s(i))})},eTe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},tTe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Us=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>VN({prefix:e,name:t,encode(s){return tTe(s,r,n)},decode(s){return eTe(s,r,n,t)}}),nTe=VN({prefix:"\0",name:"identity",encode:t=>YNe(t),decode:t=>KNe(t)}),rTe=Object.freeze(Object.defineProperty({__proto__:null,identity:nTe},Symbol.toStringTag,{value:"Module"})),sTe=Us({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),iTe=Object.freeze(Object.defineProperty({__proto__:null,base2:sTe},Symbol.toStringTag,{value:"Module"})),oTe=Us({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),aTe=Object.freeze(Object.defineProperty({__proto__:null,base8:oTe},Symbol.toStringTag,{value:"Module"})),cTe=qC({prefix:"9",name:"base10",alphabet:"0123456789"}),lTe=Object.freeze(Object.defineProperty({__proto__:null,base10:cTe},Symbol.toStringTag,{value:"Module"})),uTe=Us({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dTe=Us({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),hTe=Object.freeze(Object.defineProperty({__proto__:null,base16:uTe,base16upper:dTe},Symbol.toStringTag,{value:"Module"})),fTe=Us({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),pTe=Us({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gTe=Us({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mTe=Us({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yTe=Us({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wTe=Us({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bTe=Us({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vTe=Us({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ETe=Us({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),_Te=Object.freeze(Object.defineProperty({__proto__:null,base32:fTe,base32hex:yTe,base32hexpad:bTe,base32hexpadupper:vTe,base32hexupper:wTe,base32pad:gTe,base32padupper:mTe,base32upper:pTe,base32z:ETe},Symbol.toStringTag,{value:"Module"})),CTe=qC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ATe=qC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),STe=Object.freeze(Object.defineProperty({__proto__:null,base36:CTe,base36upper:ATe},Symbol.toStringTag,{value:"Module"})),ITe=qC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xTe=qC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),NTe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:ITe,base58flickr:xTe},Symbol.toStringTag,{value:"Module"})),TTe=Us({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),RTe=Us({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),PTe=Us({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),OTe=Us({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),kTe=Object.freeze(Object.defineProperty({__proto__:null,base64:TTe,base64pad:RTe,base64url:PTe,base64urlpad:OTe},Symbol.toStringTag,{value:"Module"})),TJ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),DTe=TJ.reduce((t,e,n)=>(t[n]=e,t),[]),LTe=TJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function MTe(t){return t.reduce((e,n)=>(e+=DTe[n],e),"")}function UTe(t){const e=[];for(const n of t){const r=LTe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const $Te=VN({prefix:"🚀",name:"base256emoji",encode:MTe,decode:UTe}),BTe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:$Te},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const V4={...rTe,...iTe,...aTe,...lTe,...hTe,..._Te,...STe,...NTe,...kTe,...BTe};function RJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const K4=RJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),FP=RJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=xJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),PJ={utf8:K4,"utf-8":K4,hex:V4.base16,latin1:FP,ascii:FP,binary:FP,...V4};function Ea(t,e="utf8"){const n=PJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function io(t,e="utf8"){const n=PJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const FTe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},jTe="PARSE_ERROR",zTe="INVALID_REQUEST",WTe="METHOD_NOT_FOUND",HTe="INVALID_PARAMS",OJ="INTERNAL_ERROR",sU="SERVER_ERROR",GTe=[-32700,-32600,-32601,-32602,-32603],Xv={[jTe]:{code:-32700,message:"Parse error"},[zTe]:{code:-32600,message:"Invalid Request"},[WTe]:{code:-32601,message:"Method not found"},[HTe]:{code:-32602,message:"Invalid params"},[OJ]:{code:-32603,message:"Internal error"},[sU]:{code:-32e3,message:"Server error"}},kJ=sU;function qTe(t){return GTe.includes(t)}function Y4(t){return Object.keys(Xv).includes(t)?Xv[t]:Xv[kJ]}function VTe(t){const e=Object.values(Xv).find(n=>n.code===t);return e||Xv[kJ]}function DJ(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var LJ={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $D=function(t,e){return $D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},$D(t,e)};function KTe(t,e){$D(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var BD=function(){return BD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},BD.apply(this,arguments)};function YTe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function QTe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function JTe(t,e){return function(n,r){e(n,r,t)}}function ZTe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function XTe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function eRe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function tRe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function nRe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function FD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function MJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function rRe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(MJ(arguments[e]));return t}function sRe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function f_(t){return this instanceof f_?(this.v=t,this):new f_(t)}function iRe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof f_?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function oRe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:f_(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function aRe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof FD=="function"?FD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function cRe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function lRe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function uRe(t){return t&&t.__esModule?t:{default:t}}function dRe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function hRe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const fRe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return BD},__asyncDelegator:oRe,__asyncGenerator:iRe,__asyncValues:aRe,__await:f_,__awaiter:XTe,__classPrivateFieldGet:dRe,__classPrivateFieldSet:hRe,__createBinding:tRe,__decorate:QTe,__exportStar:nRe,__extends:KTe,__generator:eRe,__importDefault:uRe,__importStar:lRe,__makeTemplateObject:cRe,__metadata:ZTe,__param:JTe,__read:MJ,__rest:YTe,__spread:rRe,__spreadArrays:sRe,__values:FD},Symbol.toStringTag,{value:"Module"})),pRe=vz(fRe);var tu={},Q4;function gRe(){if(Q4)return tu;Q4=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.isBrowserCryptoAvailable=tu.getSubtleCrypto=tu.getBrowerCrypto=void 0;function t(){return(ll==null?void 0:ll.crypto)||(ll==null?void 0:ll.msCrypto)||{}}tu.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}tu.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return tu.isBrowserCryptoAvailable=n,tu}var nu={},J4;function mRe(){if(J4)return nu;J4=1,Object.defineProperty(nu,"__esModule",{value:!0}),nu.isBrowser=nu.isNode=nu.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}nu.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}nu.isNode=e;function n(){return!t()&&!e()}return nu.isBrowser=n,nu}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=pRe;e.__exportStar(gRe(),t),e.__exportStar(mRe(),t)})(LJ);function Kc(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function yp(t=6){return BigInt(Kc(t))}function Th(t,e,n){return{id:n||Kc(),jsonrpc:"2.0",method:t,params:e}}function KN(t,e){return{id:t,jsonrpc:"2.0",result:e}}function YN(t,e,n){return{id:t,jsonrpc:"2.0",error:yRe(e)}}function yRe(t,e){return typeof t>"u"?Y4(OJ):(typeof t=="string"&&(t=Object.assign(Object.assign({},Y4(sU)),{message:t})),qTe(t.code)&&(t=VTe(t.code)),t)}let wRe=class{},bRe=class extends wRe{constructor(){super()}},vRe=class extends bRe{constructor(e){super()}};const ERe="^https?:",_Re="^wss?:";function CRe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function UJ(t,e){const n=CRe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function Z4(t){return UJ(t,ERe)}function X4(t){return UJ(t,_Re)}function ARe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function $J(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function iU(t){return $J(t)&&"method"in t}function QN(t){return $J(t)&&(Yc(t)||pa(t))}function Yc(t){return"result"in t}function pa(t){return"error"in t}let Da=class extends vRe{constructor(e){super(e),this.events=new ka.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Th(e.method,e.params||[],e.id||yp().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{pa(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),QN(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const SRe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),IRe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",eF=t=>t.split("?")[0],tF=10,xRe=SRe();let NRe=class{constructor(e){if(this.url=e,this.events=new ka.EventEmitter,this.registering=!1,!X4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(rd(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!X4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=LJ.isReactNative()?void 0:{rejectUnauthorized:!ARe(e)},i=new xRe(e,[],s);IRe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Ng(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=YN(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return DJ(e,eF(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>tF&&this.events.setMaxListeners(tF)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${eF(this.url)}`));return this.events.emit("register_error",n),n}};var jD={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ll<"u"&&ll,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof ll<"u"&&ll||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(R){return R&&DataView.prototype.isPrototypeOf(R)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(R){return R&&u.indexOf(Object.prototype.toString.call(R))>-1};function h(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(R)||R==="")throw new TypeError('Invalid character in header field name: "'+R+'"');return R.toLowerCase()}function f(R){return typeof R!="string"&&(R=String(R)),R}function p(R){var N={next:function(){var M=R.shift();return{done:M===void 0,value:M}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(R){this.map={},R instanceof g?R.forEach(function(N,M){this.append(M,N)},this):Array.isArray(R)?R.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(N){this.append(N,R[N])},this)}g.prototype.append=function(R,N){R=h(R),N=f(N);var M=this.map[R];this.map[R]=M?M+", "+N:N},g.prototype.delete=function(R){delete this.map[h(R)]},g.prototype.get=function(R){return R=h(R),this.has(R)?this.map[R]:null},g.prototype.has=function(R){return this.map.hasOwnProperty(h(R))},g.prototype.set=function(R,N){this.map[h(R)]=f(N)},g.prototype.forEach=function(R,N){for(var M in this.map)this.map.hasOwnProperty(M)&&R.call(N,this.map[M],M,this)},g.prototype.keys=function(){var R=[];return this.forEach(function(N,M){R.push(M)}),p(R)},g.prototype.values=function(){var R=[];return this.forEach(function(N){R.push(N)}),p(R)},g.prototype.entries=function(){var R=[];return this.forEach(function(N,M){R.push([M,N])}),p(R)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(R){if(!R._noBody){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}}function m(R){return new Promise(function(N,M){R.onload=function(){N(R.result)},R.onerror=function(){M(R.error)}})}function w(R){var N=new FileReader,M=m(N);return N.readAsArrayBuffer(R),M}function v(R){var N=new FileReader,M=m(N),P=/charset=([A-Za-z0-9_-]+)/.exec(R.type),L=P?P[1]:"utf-8";return N.readAsText(R,L),M}function A(R){for(var N=new Uint8Array(R),M=new Array(N.length),P=0;P<N.length;P++)M[P]=String.fromCharCode(N[P]);return M.join("")}function C(R){if(R.slice)return R.slice(0);var N=new Uint8Array(R.byteLength);return N.set(new Uint8Array(R)),N.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(R){this.bodyUsed=this.bodyUsed,this._bodyInit=R,R?typeof R=="string"?this._bodyText=R:c.blob&&Blob.prototype.isPrototypeOf(R)?this._bodyBlob=R:c.formData&&FormData.prototype.isPrototypeOf(R)?this._bodyFormData=R:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)?this._bodyText=R.toString():c.arrayBuffer&&c.blob&&l(R)?(this._bodyArrayBuffer=C(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||d(R))?this._bodyArrayBuffer=C(R):this._bodyText=R=Object.prototype.toString.call(R):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var R=y(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var R=y(this);return R||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var R=y(this);if(R)return R;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(R){var N=R.toUpperCase();return x.indexOf(N)>-1?N:R}function I(R,N){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var M=N.body;if(R instanceof I){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,N.headers||(this.headers=new g(R.headers)),this.method=R.method,this.mode=R.mode,this.signal=R.signal,!M&&R._bodyInit!=null&&(M=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=T(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var P=/([?&])_=[^&]*/;if(P.test(this.url))this.url=this.url.replace(P,"$1_="+new Date().getTime());else{var L=/\?/;this.url+=(L.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function k(R){var N=new FormData;return R.trim().split("&").forEach(function(M){if(M){var P=M.split("="),L=P.shift().replace(/\+/g," "),j=P.join("=").replace(/\+/g," ");N.append(decodeURIComponent(L),decodeURIComponent(j))}}),N}function O(R){var N=new g,M=R.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(P){return P.indexOf(`
`)===0?P.substr(1,P.length):P}).forEach(function(P){var L=P.split(":"),j=L.shift().trim();if(j){var q=L.join(":").trim();try{N.append(j,q)}catch(ne){console.warn("Response "+ne.message)}}}),N}S.call(I.prototype);function B(R,N){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(R)}S.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},B.error=function(){var R=new B(null,{status:200,statusText:""});return R.ok=!1,R.status=0,R.type="error",R};var G=[301,302,303,307,308];B.redirect=function(R,N){if(G.indexOf(N)===-1)throw new RangeError("Invalid status code");return new B(null,{status:N,headers:{location:R}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,M){this.message=N,this.name=M;var P=Error(N);this.stack=P.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function W(R,N){return new Promise(function(M,P){var L=new I(R,N);if(L.signal&&L.signal.aborted)return P(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function q(){j.abort()}j.onload=function(){var oe={statusText:j.statusText,headers:O(j.getAllResponseHeaders()||"")};L.url.indexOf("file://")===0&&(j.status<200||j.status>599)?oe.status=200:oe.status=j.status,oe.url="responseURL"in j?j.responseURL:oe.headers.get("X-Request-URL");var se="response"in j?j.response:j.responseText;setTimeout(function(){M(new B(se,oe))},0)},j.onerror=function(){setTimeout(function(){P(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){P(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){P(new o.DOMException("Aborted","AbortError"))},0)};function ne(oe){try{return oe===""&&a.location.href?a.location.href:oe}catch{return oe}}if(j.open(L.method,ne(L.url),!0),L.credentials==="include"?j.withCredentials=!0:L.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g||a.Headers&&N.headers instanceof a.Headers)){var le=[];Object.getOwnPropertyNames(N.headers).forEach(function(oe){le.push(h(oe)),j.setRequestHeader(oe,f(N.headers[oe]))}),L.headers.forEach(function(oe,se){le.indexOf(se)===-1&&j.setRequestHeader(se,oe)})}else L.headers.forEach(function(oe,se){j.setRequestHeader(se,oe)});L.signal&&(L.signal.addEventListener("abort",q),j.onreadystatechange=function(){j.readyState===4&&L.signal.removeEventListener("abort",q)}),j.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return W.polyfill=!0,a.fetch||(a.fetch=W,a.Headers=g,a.Request=I,a.Response=B),o.Headers=g,o.Request=I,o.Response=B,o.fetch=W,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(jD,jD.exports);var TRe=jD.exports;const nF=Hg(TRe);var RRe=Object.defineProperty,PRe=Object.defineProperties,ORe=Object.getOwnPropertyDescriptors,rF=Object.getOwnPropertySymbols,kRe=Object.prototype.hasOwnProperty,DRe=Object.prototype.propertyIsEnumerable,sF=(t,e,n)=>e in t?RRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iF=(t,e)=>{for(var n in e||(e={}))kRe.call(e,n)&&sF(t,n,e[n]);if(rF)for(var n of rF(e))DRe.call(e,n)&&sF(t,n,e[n]);return t},oF=(t,e)=>PRe(t,ORe(e));const LRe={Accept:"application/json","Content-Type":"application/json"},MRe="POST",aF={headers:LRe,method:MRe},cF=10;let Oc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new ka.EventEmitter,this.isAvailable=!1,this.registering=!1,!Z4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=rd(e),r=await(await nF(this.url,oF(iF({},aF),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Z4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=rd({id:1,jsonrpc:"2.0",method:"test",params:[]});await nF(e,oF(iF({},aF),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Ng(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=YN(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return DJ(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>cF&&this.events.setMaxListeners(cF)}};const eE={getSIWX(){return ve.state.siwx},async initializeIfEnabled(){var i;const t=ve.state.siwx,e=z.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(z.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await us.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=gt._getClient())==null?void 0:i.disconnect().catch(console.error)),Mt.reset("Connect"),pc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ve.state.siwx,e=ot.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork(),r=gt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();je.getConnectorId(n.chainNamespace)===ze.CONNECTOR_ID.AUTH&&Mt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),us.close(),or.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!us.state.open||Mt.state.view==="ApproveTransaction")&&await us.open({view:"SIWXSignMessage"}),i.isSmartAccount?pc.showError("This application might not support Smart Accounts"):pc.showError("Signature declined"),or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await gt.disconnect():us.close(),Mt.reset("Connect"),or.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ve.state.siwx,e=ot.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Mt.state.view==="ApproveTransaction",r=Mt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=eE.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=z.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(pc.showLoading("Authenticating...",{autoClose:!1}),Ye.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),or.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:eE.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:eE.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{pc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=z.state.activeChain;return{network:((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ye.state.preferredAccountTypes)==null?void 0:n[t])===Ps.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function lA(t,e){return je.getConnectorId(t)===e}function URe(t){const e=Array.from(z.state.chains.keys());let n=[];return t?(n.push([t,z.state.chains.get(t)]),lA(t,ze.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&lA(r,ze.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,z.state.chains.get(r)])}):lA(t,ze.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&lA(r,ze.CONNECTOR_ID.AUTH)&&n.push([r,z.state.chains.get(r)])})):n=Array.from(z.state.chains.entries()),n}const Gi={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},BI={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ze.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ze.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ze.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ze.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ze.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ze.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ze.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ze.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ze.CONNECTOR_ID.COINBASE]:"Coinbase",[ze.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ze.CONNECTOR_ID.LEDGER]:"Ledger",[ze.CONNECTOR_ID.SAFE]:"Safe"}},JN={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Gi.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},$Re=new AbortController,dl={EmbeddedWalletAbortController:$Re,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${BRe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function BRe(){return typeof window<"u"}const FRe={createLogger(t,e="error"){const n=om({level:e}),{logger:r}=WN({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},jRe="rpc.walletconnect.org";function lF(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const jP=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Xm={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===jRe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ze.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ze.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return jP.includes(e)?lF(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:BI.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Xm.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(xh(a.url,a.config))}),jP.includes(t.caipNetworkId)&&r.push(xh(lF(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(xh(a))}),TI(r)},extendWagmiTransports(t,e,n){if(jP.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return TI([n,xh(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ze.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Qe.getActiveCaipNetworkId(),n=z.getAllRequestedCaipNetworks(),r=Array.from(((c=z.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},FI={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Oi=er({providers:{...FI},providerIds:{...FI}}),Tn={state:Oi,subscribeKey(t,e){return ti(Oi,t,e)},subscribe(t){return Xs(Oi,()=>{t(Oi)})},subscribeProviders(t){return Xs(Oi.providers,()=>t(Oi.providers))},setProvider(t,e){e&&(Oi.providers[t]=Ig(e))},getProvider(t){return Oi.providers[t]},setProviderId(t,e){e&&(Oi.providerIds[t]=e)},getProviderId(t){if(t)return Oi.providerIds[t]},reset(){Oi.providers={...FI},Oi.providerIds={...FI}},resetChain(t){Oi.providers[t]=void 0,Oi.providerIds[t]=void 0}},uF={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},_s={set(t,e){Oo.isClient&&localStorage.setItem(`${Ve.STORAGE_KEY}${t}`,e)},get(t){return Oo.isClient?localStorage.getItem(`${Ve.STORAGE_KEY}${t}`):null},delete(t,e){Oo.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ve.STORAGE_KEY}${t}`))}},uA=30*1e3,Oo={checkIfAllowedToTriggerEmail(){const t=_s.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<uA){const n=Math.ceil((uA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=_s.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<uA)return Math.ceil((uA-e)/1e3)}return 0},checkIfRequestExists(t){return Ps.NOT_SAFE_RPC_METHODS.includes(t.method)||Ps.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(uF.transactionHash))||(t==null?void 0:t.match(uF.signedMessage)))?Ve.RPC_RESPONSE_TYPE_TX:Ve.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ps.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var dn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(dn||(dn={}));var zD;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(zD||(zD={}));const Ue=dn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Yd=t=>{switch(typeof t){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return isNaN(t)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(t)?Ue.array:t===null?Ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ue.promise:typeof Map<"u"&&t instanceof Map?Ue.map:typeof Set<"u"&&t instanceof Set?Ue.set:typeof Date<"u"&&t instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},Ce=dn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),zRe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Cc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,dn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Cc.create=t=>new Cc(t);const p_=(t,e)=>{let n;switch(t.code){case Ce.invalid_type:t.received===Ue.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,dn.jsonStringifyReplacer)}`;break;case Ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${dn.joinValues(t.keys,", ")}`;break;case Ce.invalid_union:n="Invalid input";break;case Ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${dn.joinValues(t.options)}`;break;case Ce.invalid_enum_value:n=`Invalid enum value. Expected ${dn.joinValues(t.options)}, received '${t.received}'`;break;case Ce.invalid_arguments:n="Invalid function arguments";break;case Ce.invalid_return_type:n="Invalid function return type";break;case Ce.invalid_date:n="Invalid date";break;case Ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:dn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ce.custom:n="Invalid input";break;case Ce.invalid_intersection_types:n="Intersection results could not be merged";break;case Ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,dn.assertNever(t)}return{message:n}};let BJ=p_;function WRe(t){BJ=t}function jI(){return BJ}const zI=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},HRe=[];function Ge(t,e){const n=zI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,jI(),p_].filter(r=>!!r)});t.common.issues.push(n)}class ei{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return xt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ei.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return xt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const xt=Object.freeze({status:"aborted"}),FJ=t=>({status:"dirty",value:t}),_i=t=>({status:"valid",value:t}),WD=t=>t.status==="aborted",HD=t=>t.status==="dirty",g_=t=>t.status==="valid",WI=t=>typeof Promise<"u"&&t instanceof Promise;var ct;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ct||(ct={}));class Ml{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const dF=(t,e)=>{if(g_(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Cc(t.common.issues);return this._error=n,this._error}}};function Ot(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Ut{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Yd(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Yd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ei,ctx:{common:e.parent.common,data:e.data,parsedType:Yd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(WI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yd(e)},i=this._parseSync({data:e,path:s.path,parent:s});return dF(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yd(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(WI(s)?s:Promise.resolve(s));return dF(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Ce.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Tc({schema:this,typeName:vt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return zu.create(this,this._def)}nullable(){return Og.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ac.create(this,this._def)}promise(){return w0.create(this,this._def)}or(e){return b_.create([this,e],this._def)}and(e){return v_.create(this,e,this._def)}transform(e){return new Tc({...Ot(this._def),schema:this,typeName:vt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new S_({...Ot(this._def),innerType:this,defaultValue:n,typeName:vt.ZodDefault})}brand(){return new zJ({typeName:vt.ZodBranded,type:this,...Ot(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new VI({...Ot(this._def),innerType:this,catchValue:n,typeName:vt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return VC.create(this,e)}readonly(){return YI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const GRe=/^c[^\s-]{8,}$/i,qRe=/^[a-z][a-z0-9]*$/,VRe=/^[0-9A-HJKMNP-TV-Z]{26}$/,KRe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,YRe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,QRe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let zP;const JRe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ZRe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,XRe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function ePe(t,e){return!!((e==="v4"||!e)&&JRe.test(t)||(e==="v6"||!e)&&ZRe.test(t))}class wc extends Ut{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ue.string){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ce.invalid_type,expected:Ue.string,received:i.parsedType}),xt}const r=new ei;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ge(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ge(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")YRe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"email",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")zP||(zP=new RegExp(QRe,"u")),zP.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"emoji",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")KRe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"uuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")GRe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"cuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")qRe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"cuid2",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")VRe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"ulid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ge(s,{validation:"url",code:Ce.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"regex",code:Ce.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?XRe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?ePe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"ip",code:Ce.invalid_string,message:i.message}),r.dirty()):dn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ce.invalid_string,...ct.errToObj(r)})}_addCheck(e){return new wc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ct.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ct.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ct.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ct.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ct.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ct.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ct.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ct.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...ct.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ct.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ct.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ct.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ct.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ct.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ct.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ct.errToObj(n)})}nonempty(e){return this.min(1,ct.errToObj(e))}trim(){return new wc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wc.create=t=>{var e;return new wc({checks:[],typeName:vt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ot(t)})};function tPe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class ff extends Ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ue.number){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ce.invalid_type,expected:Ue.number,received:i.parsedType}),xt}let r;const s=new ei;for(const i of this._def.checks)i.kind==="int"?dn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?tPe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.not_finite,message:i.message}),s.dirty()):dn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ct.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ct.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ct.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ct.toString(n))}setLimit(e,n,r,s){return new ff({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ct.toString(s)}]})}_addCheck(e){return new ff({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ct.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ct.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ct.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ct.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ct.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ct.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ct.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ct.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ct.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&dn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ff.create=t=>new ff({checks:[],typeName:vt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ot(t)});class pf extends Ut{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ue.bigint){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ce.invalid_type,expected:Ue.bigint,received:i.parsedType}),xt}let r;const s=new ei;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):dn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ct.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ct.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ct.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ct.toString(n))}setLimit(e,n,r,s){return new pf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ct.toString(s)}]})}_addCheck(e){return new pf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ct.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ct.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ct.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ct.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ct.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}pf.create=t=>{var e;return new pf({checks:[],typeName:vt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Ot(t)})};class m_ extends Ut{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ue.boolean){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Ue.boolean,received:r.parsedType}),xt}return _i(e.data)}}m_.create=t=>new m_({typeName:vt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ot(t)});class Rg extends Ut{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ue.date){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ce.invalid_type,expected:Ue.date,received:i.parsedType}),xt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ce.invalid_date}),xt}const r=new ei;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):dn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Rg({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ct.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ct.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Rg.create=t=>new Rg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:vt.ZodDate,...Ot(t)});class HI extends Ut{_parse(e){if(this._getType(e)!==Ue.symbol){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Ue.symbol,received:r.parsedType}),xt}return _i(e.data)}}HI.create=t=>new HI({typeName:vt.ZodSymbol,...Ot(t)});class y_ extends Ut{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Ue.undefined,received:r.parsedType}),xt}return _i(e.data)}}y_.create=t=>new y_({typeName:vt.ZodUndefined,...Ot(t)});class w_ extends Ut{_parse(e){if(this._getType(e)!==Ue.null){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Ue.null,received:r.parsedType}),xt}return _i(e.data)}}w_.create=t=>new w_({typeName:vt.ZodNull,...Ot(t)});class y0 extends Ut{constructor(){super(...arguments),this._any=!0}_parse(e){return _i(e.data)}}y0.create=t=>new y0({typeName:vt.ZodAny,...Ot(t)});class ng extends Ut{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _i(e.data)}}ng.create=t=>new ng({typeName:vt.ZodUnknown,...Ot(t)});class sd extends Ut{_parse(e){const n=this._getOrReturnCtx(e);return Ge(n,{code:Ce.invalid_type,expected:Ue.never,received:n.parsedType}),xt}}sd.create=t=>new sd({typeName:vt.ZodNever,...Ot(t)});class GI extends Ut{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Ue.void,received:r.parsedType}),xt}return _i(e.data)}}GI.create=t=>new GI({typeName:vt.ZodVoid,...Ot(t)});class Ac extends Ut{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ue.array)return Ge(n,{code:Ce.invalid_type,expected:Ue.array,received:n.parsedType}),xt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Ge(n,{code:o?Ce.too_big:Ce.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ge(n,{code:Ce.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ge(n,{code:Ce.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Ml(n,o,n.path,a)))).then(o=>ei.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Ml(n,o,n.path,a)));return ei.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Ac({...this._def,minLength:{value:e,message:ct.toString(n)}})}max(e,n){return new Ac({...this._def,maxLength:{value:e,message:ct.toString(n)}})}length(e,n){return new Ac({...this._def,exactLength:{value:e,message:ct.toString(n)}})}nonempty(e){return this.min(1,e)}}Ac.create=(t,e)=>new Ac({type:t,minLength:null,maxLength:null,exactLength:null,typeName:vt.ZodArray,...Ot(e)});function ey(t){if(t instanceof ar){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=zu.create(ey(r))}return new ar({...t._def,shape:()=>e})}else return t instanceof Ac?new Ac({...t._def,type:ey(t.element)}):t instanceof zu?zu.create(ey(t.unwrap())):t instanceof Og?Og.create(ey(t.unwrap())):t instanceof Ul?Ul.create(t.items.map(e=>ey(e))):t}class ar extends Ut{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=dn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ue.object){const l=this._getOrReturnCtx(e);return Ge(l,{code:Ce.invalid_type,expected:Ue.object,received:l.parsedType}),xt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof sd&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ml(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof sd){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Ge(s,{code:Ce.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ml(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ei.mergeObjectSync(r,l)):ei.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ct.errToObj,new ar({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=ct.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new ar({...this._def,unknownKeys:"strip"})}passthrough(){return new ar({...this._def,unknownKeys:"passthrough"})}extend(e){return new ar({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ar({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:vt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ar({...this._def,catchall:e})}pick(e){const n={};return dn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new ar({...this._def,shape:()=>n})}omit(e){const n={};return dn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new ar({...this._def,shape:()=>n})}deepPartial(){return ey(this)}partial(e){const n={};return dn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new ar({...this._def,shape:()=>n})}required(e){const n={};return dn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof zu;)i=i._def.innerType;n[r]=i}}),new ar({...this._def,shape:()=>n})}keyof(){return jJ(dn.objectKeys(this.shape))}}ar.create=(t,e)=>new ar({shape:()=>t,unknownKeys:"strip",catchall:sd.create(),typeName:vt.ZodObject,...Ot(e)});ar.strictCreate=(t,e)=>new ar({shape:()=>t,unknownKeys:"strict",catchall:sd.create(),typeName:vt.ZodObject,...Ot(e)});ar.lazycreate=(t,e)=>new ar({shape:t,unknownKeys:"strip",catchall:sd.create(),typeName:vt.ZodObject,...Ot(e)});class b_ extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Cc(a.ctx.common.issues));return Ge(n,{code:Ce.invalid_union,unionErrors:o}),xt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Cc(c));return Ge(n,{code:Ce.invalid_union,unionErrors:a}),xt}}get options(){return this._def.options}}b_.create=(t,e)=>new b_({options:t,typeName:vt.ZodUnion,...Ot(e)});const aS=t=>t instanceof __?aS(t.schema):t instanceof Tc?aS(t.innerType()):t instanceof C_?[t.value]:t instanceof gf?t.options:t instanceof A_?Object.keys(t.enum):t instanceof S_?aS(t._def.innerType):t instanceof y_?[void 0]:t instanceof w_?[null]:null;class ZN extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.object)return Ge(n,{code:Ce.invalid_type,expected:Ue.object,received:n.parsedType}),xt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ge(n,{code:Ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),xt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=aS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new ZN({typeName:vt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Ot(r)})}}function GD(t,e){const n=Yd(t),r=Yd(e);if(t===e)return{valid:!0,data:t};if(n===Ue.object&&r===Ue.object){const s=dn.objectKeys(e),i=dn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=GD(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Ue.array&&r===Ue.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=GD(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Ue.date&&r===Ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class v_ extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(WD(i)||WD(o))return xt;const a=GD(i.value,o.value);return a.valid?((HD(i)||HD(o))&&n.dirty(),{status:n.value,value:a.data}):(Ge(r,{code:Ce.invalid_intersection_types}),xt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}v_.create=(t,e,n)=>new v_({left:t,right:e,typeName:vt.ZodIntersection,...Ot(n)});class Ul extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.array)return Ge(r,{code:Ce.invalid_type,expected:Ue.array,received:r.parsedType}),xt;if(r.data.length<this._def.items.length)return Ge(r,{code:Ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xt;!this._def.rest&&r.data.length>this._def.items.length&&(Ge(r,{code:Ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Ml(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ei.mergeArray(n,o)):ei.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Ul({...this._def,rest:e})}}Ul.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ul({items:t,typeName:vt.ZodTuple,rest:null,...Ot(e)})};class E_ extends Ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.object)return Ge(r,{code:Ce.invalid_type,expected:Ue.object,received:r.parsedType}),xt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Ml(r,a,r.path,a)),value:o._parse(new Ml(r,r.data[a],r.path,a))});return r.common.async?ei.mergeObjectAsync(n,s):ei.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ut?new E_({keyType:e,valueType:n,typeName:vt.ZodRecord,...Ot(r)}):new E_({keyType:wc.create(),valueType:e,typeName:vt.ZodRecord,...Ot(n)})}}class qI extends Ut{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.map)return Ge(r,{code:Ce.invalid_type,expected:Ue.map,received:r.parsedType}),xt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Ml(r,a,r.path,[l,"key"])),value:i._parse(new Ml(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return xt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return xt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}qI.create=(t,e,n)=>new qI({valueType:e,keyType:t,typeName:vt.ZodMap,...Ot(n)});class Pg extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.set)return Ge(r,{code:Ce.invalid_type,expected:Ue.set,received:r.parsedType}),xt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ge(r,{code:Ce.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ge(r,{code:Ce.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return xt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Ml(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Pg({...this._def,minSize:{value:e,message:ct.toString(n)}})}max(e,n){return new Pg({...this._def,maxSize:{value:e,message:ct.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Pg.create=(t,e)=>new Pg({valueType:t,minSize:null,maxSize:null,typeName:vt.ZodSet,...Ot(e)});class jy extends Ut{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.function)return Ge(n,{code:Ce.invalid_type,expected:Ue.function,received:n.parsedType}),xt;function r(a,c){return zI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,jI(),p_].filter(l=>!!l),issueData:{code:Ce.invalid_arguments,argumentsError:c}})}function s(a,c){return zI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,jI(),p_].filter(l=>!!l),issueData:{code:Ce.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof w0){const a=this;return _i(async function(...c){const l=new Cc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return _i(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Cc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Cc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new jy({...this._def,args:Ul.create(e).rest(ng.create())})}returns(e){return new jy({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new jy({args:e||Ul.create([]).rest(ng.create()),returns:n||ng.create(),typeName:vt.ZodFunction,...Ot(r)})}}class __ extends Ut{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}__.create=(t,e)=>new __({getter:t,typeName:vt.ZodLazy,...Ot(e)});class C_ extends Ut{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ge(n,{received:n.data,code:Ce.invalid_literal,expected:this._def.value}),xt}return{status:"valid",value:e.data}}get value(){return this._def.value}}C_.create=(t,e)=>new C_({value:t,typeName:vt.ZodLiteral,...Ot(e)});function jJ(t,e){return new gf({values:t,typeName:vt.ZodEnum,...Ot(e)})}class gf extends Ut{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ge(n,{expected:dn.joinValues(r),received:n.parsedType,code:Ce.invalid_type}),xt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Ge(n,{received:n.data,code:Ce.invalid_enum_value,options:r}),xt}return _i(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return gf.create(e)}exclude(e){return gf.create(this.options.filter(n=>!e.includes(n)))}}gf.create=jJ;class A_ extends Ut{_parse(e){const n=dn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ue.string&&r.parsedType!==Ue.number){const s=dn.objectValues(n);return Ge(r,{expected:dn.joinValues(s),received:r.parsedType,code:Ce.invalid_type}),xt}if(n.indexOf(e.data)===-1){const s=dn.objectValues(n);return Ge(r,{received:r.data,code:Ce.invalid_enum_value,options:s}),xt}return _i(e.data)}get enum(){return this._def.values}}A_.create=(t,e)=>new A_({values:t,typeName:vt.ZodNativeEnum,...Ot(e)});class w0 extends Ut{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.promise&&n.common.async===!1)return Ge(n,{code:Ce.invalid_type,expected:Ue.promise,received:n.parsedType}),xt;const r=n.parsedType===Ue.promise?n.data:Promise.resolve(n.data);return _i(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}w0.create=(t,e)=>new w0({type:t,typeName:vt.ZodPromise,...Ot(e)});class Tc extends Ut{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===vt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ge(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?xt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?xt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!g_(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>g_(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);dn.assertNever(s)}}Tc.create=(t,e,n)=>new Tc({schema:t,typeName:vt.ZodEffects,effect:e,...Ot(n)});Tc.createWithPreprocess=(t,e,n)=>new Tc({schema:e,effect:{type:"preprocess",transform:t},typeName:vt.ZodEffects,...Ot(n)});class zu extends Ut{_parse(e){return this._getType(e)===Ue.undefined?_i(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zu.create=(t,e)=>new zu({innerType:t,typeName:vt.ZodOptional,...Ot(e)});class Og extends Ut{_parse(e){return this._getType(e)===Ue.null?_i(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Og.create=(t,e)=>new Og({innerType:t,typeName:vt.ZodNullable,...Ot(e)});class S_ extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ue.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}S_.create=(t,e)=>new S_({innerType:t,typeName:vt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ot(e)});class VI extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return WI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Cc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Cc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}VI.create=(t,e)=>new VI({innerType:t,typeName:vt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ot(e)});class KI extends Ut{_parse(e){if(this._getType(e)!==Ue.nan){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Ue.nan,received:r.parsedType}),xt}return{status:"valid",value:e.data}}}KI.create=t=>new KI({typeName:vt.ZodNaN,...Ot(t)});const nPe=Symbol("zod_brand");class zJ extends Ut{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class VC extends Ut{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?xt:i.status==="dirty"?(n.dirty(),FJ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?xt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new VC({in:e,out:n,typeName:vt.ZodPipeline})}}class YI extends Ut{_parse(e){const n=this._def.innerType._parse(e);return g_(n)&&(n.value=Object.freeze(n.value)),n}}YI.create=(t,e)=>new YI({innerType:t,typeName:vt.ZodReadonly,...Ot(e)});const WJ=(t,e={},n)=>t?y0.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):y0.create(),rPe={object:ar.lazycreate};var vt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(vt||(vt={}));const sPe=(t,e={message:`Input not instance of ${t.name}`})=>WJ(n=>n instanceof t,e),HJ=wc.create,GJ=ff.create,iPe=KI.create,oPe=pf.create,qJ=m_.create,aPe=Rg.create,cPe=HI.create,lPe=y_.create,uPe=w_.create,dPe=y0.create,hPe=ng.create,fPe=sd.create,pPe=GI.create,gPe=Ac.create,mPe=ar.create,yPe=ar.strictCreate,wPe=b_.create,bPe=ZN.create,vPe=v_.create,EPe=Ul.create,_Pe=E_.create,CPe=qI.create,APe=Pg.create,SPe=jy.create,IPe=__.create,xPe=C_.create,NPe=gf.create,TPe=A_.create,RPe=w0.create,hF=Tc.create,PPe=zu.create,OPe=Og.create,kPe=Tc.createWithPreprocess,DPe=VC.create,LPe=()=>HJ().optional(),MPe=()=>GJ().optional(),UPe=()=>qJ().optional(),$Pe={string:t=>wc.create({...t,coerce:!0}),number:t=>ff.create({...t,coerce:!0}),boolean:t=>m_.create({...t,coerce:!0}),bigint:t=>pf.create({...t,coerce:!0}),date:t=>Rg.create({...t,coerce:!0})},BPe=xt;var E=Object.freeze({__proto__:null,defaultErrorMap:p_,setErrorMap:WRe,getErrorMap:jI,makeIssue:zI,EMPTY_PATH:HRe,addIssueToContext:Ge,ParseStatus:ei,INVALID:xt,DIRTY:FJ,OK:_i,isAborted:WD,isDirty:HD,isValid:g_,isAsync:WI,get util(){return dn},get objectUtil(){return zD},ZodParsedType:Ue,getParsedType:Yd,ZodType:Ut,ZodString:wc,ZodNumber:ff,ZodBigInt:pf,ZodBoolean:m_,ZodDate:Rg,ZodSymbol:HI,ZodUndefined:y_,ZodNull:w_,ZodAny:y0,ZodUnknown:ng,ZodNever:sd,ZodVoid:GI,ZodArray:Ac,ZodObject:ar,ZodUnion:b_,ZodDiscriminatedUnion:ZN,ZodIntersection:v_,ZodTuple:Ul,ZodRecord:E_,ZodMap:qI,ZodSet:Pg,ZodFunction:jy,ZodLazy:__,ZodLiteral:C_,ZodEnum:gf,ZodNativeEnum:A_,ZodPromise:w0,ZodEffects:Tc,ZodTransformer:Tc,ZodOptional:zu,ZodNullable:Og,ZodDefault:S_,ZodCatch:VI,ZodNaN:KI,BRAND:nPe,ZodBranded:zJ,ZodPipeline:VC,ZodReadonly:YI,custom:WJ,Schema:Ut,ZodSchema:Ut,late:rPe,get ZodFirstPartyTypeKind(){return vt},coerce:$Pe,any:dPe,array:gPe,bigint:oPe,boolean:qJ,date:aPe,discriminatedUnion:bPe,effect:hF,enum:NPe,function:SPe,instanceof:sPe,intersection:vPe,lazy:IPe,literal:xPe,map:CPe,nan:iPe,nativeEnum:TPe,never:fPe,null:uPe,nullable:OPe,number:GJ,object:mPe,oboolean:UPe,onumber:MPe,optional:PPe,ostring:LPe,pipeline:DPe,preprocess:kPe,promise:RPe,record:_Pe,set:APe,strictObject:yPe,string:HJ,symbol:cPe,transformer:hF,tuple:EPe,undefined:lPe,union:wPe,unknown:hPe,void:pPe,NEVER:BPe,ZodIssueCode:Ce,quotelessJson:zRe,ZodError:Cc});const gr=E.object({message:E.string()});function We(t){return E.literal(Ve[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const FPe=E.object({chainId:E.string().or(E.number())}),jPe=E.object({email:E.string().email()}),zPe=E.object({otp:E.string()}),WPe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),HPe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),GPe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),qPe=E.object({email:E.string().email()}),VPe=E.object({otp:E.string()}),KPe=E.object({otp:E.string()}),YPe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),QPe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),JPe=E.object({type:E.string()}),ZPe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),XPe=E.object({url:E.string()}),eOe=E.object({userName:E.string()}),tOe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ps.ACCOUNT_TYPES.EOA,Ps.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),nOe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),rOe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ps.ACCOUNT_TYPES.EOA,Ps.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),sOe=E.object({uri:E.string()}),iOe=E.object({isConnected:E.boolean()}),oOe=E.object({chainId:E.string().or(E.number())}),aOe=E.object({chainId:E.string().or(E.number())}),cOe=E.object({newEmail:E.string().email()}),lOe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const uOe=E.object({version:E.string().optional()}),dOe=E.object({type:E.string(),address:E.string()}),hOe=E.any(),fOe=E.object({method:E.literal("eth_accounts")}),pOe=E.object({method:E.literal("eth_blockNumber")}),gOe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),mOe=E.object({method:E.literal("eth_chainId")}),yOe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),wOe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),bOe=E.object({method:E.literal("eth_gasPrice")}),vOe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),EOe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),_Oe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),COe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),AOe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),SOe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),IOe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),xOe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),NOe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),TOe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),ROe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),POe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),OOe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),kOe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),DOe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),LOe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),MOe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),UOe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),$Oe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),BOe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),FOe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),jOe=E.object({method:E.literal("eth_newBlockFilter")}),zOe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),WOe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),HOe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),GOe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),qOe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),fF=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),VOe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),KOe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),YOe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),QOe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),JOe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),ZOe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),XOe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),e2e=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),t2e=E.object({method:E.literal("wallet_getCapabilities")}),n2e=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),r2e=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),s2e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),pF=E.object({token:E.string()}),He=E.object({id:E.string().optional()}),Hb={appEvent:He.extend({type:We("APP_SWITCH_NETWORK"),payload:FPe}).or(He.extend({type:We("APP_CONNECT_EMAIL"),payload:jPe})).or(He.extend({type:We("APP_CONNECT_DEVICE")})).or(He.extend({type:We("APP_CONNECT_OTP"),payload:zPe})).or(He.extend({type:We("APP_CONNECT_SOCIAL"),payload:WPe})).or(He.extend({type:We("APP_GET_FARCASTER_URI")})).or(He.extend({type:We("APP_CONNECT_FARCASTER")})).or(He.extend({type:We("APP_GET_USER"),payload:E.optional(HPe)})).or(He.extend({type:We("APP_GET_SOCIAL_REDIRECT_URI"),payload:GPe})).or(He.extend({type:We("APP_SIGN_OUT")})).or(He.extend({type:We("APP_IS_CONNECTED"),payload:E.optional(pF)})).or(He.extend({type:We("APP_GET_CHAIN_ID")})).or(He.extend({type:We("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(He.extend({type:We("APP_INIT_SMART_ACCOUNT")})).or(He.extend({type:We("APP_SET_PREFERRED_ACCOUNT"),payload:JPe})).or(He.extend({type:We("APP_RPC_REQUEST"),payload:fF.or(s2e).or(fOe).or(pOe).or(gOe).or(mOe).or(yOe).or(wOe).or(bOe).or(vOe).or(EOe).or(_Oe).or(COe).or(AOe).or(SOe).or(IOe).or(xOe).or(NOe).or(TOe).or(ROe).or(POe).or(OOe).or(kOe).or(DOe).or(LOe).or(MOe).or(UOe).or($Oe).or(BOe).or(FOe).or(jOe).or(zOe).or(WOe).or(HOe).or(GOe).or(qOe).or(fF).or(VOe).or(KOe).or(YOe).or(QOe).or(JOe).or(ZOe).or(e2e).or(XOe).or(t2e).or(n2e).or(r2e)})).or(He.extend({type:We("APP_UPDATE_EMAIL"),payload:qPe})).or(He.extend({type:We("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:VPe})).or(He.extend({type:We("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:KPe})).or(He.extend({type:We("APP_SYNC_THEME"),payload:YPe})).or(He.extend({type:We("APP_SYNC_DAPP_DATA"),payload:QPe})).or(He.extend({type:We("APP_RELOAD")})),frameEvent:He.extend({type:We("FRAME_SWITCH_NETWORK_ERROR"),payload:gr}).or(He.extend({type:We("FRAME_SWITCH_NETWORK_SUCCESS"),payload:aOe})).or(He.extend({type:We("FRAME_CONNECT_EMAIL_SUCCESS"),payload:ZPe})).or(He.extend({type:We("FRAME_CONNECT_EMAIL_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:XPe})).or(He.extend({type:We("FRAME_GET_FARCASTER_URI_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:eOe})).or(He.extend({type:We("FRAME_CONNECT_FARCASTER_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_CONNECT_OTP_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_CONNECT_OTP_SUCCESS")})).or(He.extend({type:We("FRAME_CONNECT_DEVICE_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_CONNECT_DEVICE_SUCCESS")})).or(He.extend({type:We("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:tOe})).or(He.extend({type:We("FRAME_CONNECT_SOCIAL_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_GET_USER_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_GET_USER_SUCCESS"),payload:rOe})).or(He.extend({type:We("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:sOe})).or(He.extend({type:We("FRAME_SIGN_OUT_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_SIGN_OUT_SUCCESS")})).or(He.extend({type:We("FRAME_IS_CONNECTED_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_IS_CONNECTED_SUCCESS"),payload:iOe})).or(He.extend({type:We("FRAME_GET_CHAIN_ID_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_GET_CHAIN_ID_SUCCESS"),payload:oOe})).or(He.extend({type:We("FRAME_RPC_REQUEST_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_RPC_REQUEST_SUCCESS"),payload:hOe})).or(He.extend({type:We("FRAME_SESSION_UPDATE"),payload:pF})).or(He.extend({type:We("FRAME_UPDATE_EMAIL_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_UPDATE_EMAIL_SUCCESS"),payload:nOe})).or(He.extend({type:We("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(He.extend({type:We("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:cOe})).or(He.extend({type:We("FRAME_SYNC_THEME_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_SYNC_THEME_SUCCESS")})).or(He.extend({type:We("FRAME_SYNC_DAPP_DATA_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(He.extend({type:We("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:lOe})).or(He.extend({type:We("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:dOe})).or(He.extend({type:We("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_READY"),payload:uOe})).or(He.extend({type:We("FRAME_RELOAD_ERROR"),payload:gr})).or(He.extend({type:We("FRAME_RELOAD_SUCCESS")}))};function WP(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let i2e=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ze.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!WP(Ve.FRAME_EVENT_KEY,l))return;const u=Hb.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Oo.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Oo.isClient&&window.addEventListener("message",({data:o})=>{if(!WP(Ve.FRAME_EVENT_KEY,o))return;const a=Hb.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Oo.isClient&&window.addEventListener("message",({data:o})=>{if(!WP(Ve.APP_EVENT_KEY,o))return;const a=Hb.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Oo.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Hb.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Oo.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Hb.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Oo.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${H1e}?projectId=${e}&chainId=${r}&version=${q1e}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},o2e=class{constructor(e){var i;const n=om({level:G1e}),{logger:r,chunkLoggerController:s}=WN({opts:n});this.logger=Ls(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},a2e=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new o2e(e)),this.abortController=i,this.w3mFrame=new i2e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!_s.get(Ve.EMAIL_LOGIN_USED_KEY)}getEmail(){return _s.get(Ve.EMAIL)}getUsername(){return _s.get(Ve.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ve.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Oo.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ve.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ve.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ve.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ve.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ve.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ve.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ve.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ve.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ve.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ve.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ve.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Ps.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ve.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ps.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ve.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Ps.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ve.APP_SYNC_DAPP_DATA,Ve.APP_SYNC_THEME,Ve.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ve.APP_CONNECT_EMAIL,Ve.APP_CONNECT_DEVICE,Ve.APP_CONNECT_OTP,Ve.APP_CONNECT_SOCIAL,Ve.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,m){var w,v,A;y.id===u&&((v=m==null?void 0:(w=m.logger).info)==null||v.call(w,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((A=y.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){_s.set(Ve.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){_s.set(Ve.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&_s.set(Ve.EMAIL,e),_s.set(Ve.EMAIL_LOGIN_USED_KEY,"true"),_s.delete(Ve.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){_s.delete(Ve.EMAIL_LOGIN_USED_KEY),_s.delete(Ve.EMAIL),_s.delete(Ve.LAST_USED_CHAIN_KEY),_s.delete(Ve.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&_s.set(Ve.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=_s.get(Ve.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){_s.set(Ve.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},c2e=class cS{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return cS.instance||(cS.instance=new a2e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),cS.instance}};function l2e(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function es(t,...e){try{return l2e(t(...e))}catch(n){return Promise.reject(n)}}function u2e(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function d2e(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function lS(t){if(u2e(t))return String(t);if(d2e(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return lS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const qD="base64:";function h2e(t){return typeof t=="string"?t:qD+g2e(t)}function f2e(t){return typeof t!="string"||!t.startsWith(qD)?t:p2e(t.slice(qD.length))}function p2e(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function g2e(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ui(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function m2e(...t){return Ui(t.join(":"))}function dA(t){return t=Ui(t),t?t+":":""}function y2e(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function w2e(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const b2e="memory",v2e=()=>{const t=new Map;return{name:b2e,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function E2e(t={}){const e={mounts:{"":t.driver||v2e()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ui(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await gF(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Ui(g?p:p.key),m=g?void 0:p.value,w=g||!p.options?u:{...u,...p.options},v=n(y);f(v).items.push({key:y,value:m,relativeKey:v.relativeKey,options:w})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return es(h.hasItem,d,u)},getItem(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return es(h.getItem,d,u).then(f=>sA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?es(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:m2e(d.base,f.key),value:sA(f.value)}))):Promise.all(d.items.map(h=>es(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:sA(f)})))))},getItemRaw(l,u={}){l=Ui(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?es(h.getItemRaw,d,u):es(h.getItem,d,u).then(f=>f2e(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ui(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await es(f.setItem,h,lS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return es(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:lS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>es(d.driver.setItem,h.relativeKey,lS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ui(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await es(f.setItemRaw,h,u,d);else if(f.setItem)await es(f.setItem,h,h2e(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ui(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await es(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await es(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ui(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await es(h.getMeta,d,u)),!u.nativeOnly){const p=await es(h.getItem,d+"$",u).then(g=>sA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=dA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const m of d){(y=m.driver.flags)!=null&&y.maxDepth||(p=!1);const w=await es(m.driver.getKeys,m.relativeBase,u);for(const v of w){const A=m.mountpoint+Ui(v);h.some(C=>A.startsWith(C))||f.push(A)}h=[m.mountpoint,...h.filter(v=>!v.startsWith(m.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(m=>(!g||y2e(m,u.maxDepth))&&w2e(m,l))},async clear(l,u={}){l=dA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return es(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>mF(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=dA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(gF(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=dA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await mF(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ui(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ui(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function gF(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function mF(t){typeof t.dispose=="function"&&await es(t.dispose)}const _2e="idb-keyval";var C2e=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=GQ(t.dbName,t.storeName)),{name:_2e,options:t,async hasItem(s){return!(typeof await b4(n(s),r)>"u")},async getItem(s){return await b4(n(s),r)??null},setItem(s,i){return VAe(n(s),i,r)},removeItem(s){return KAe(n(s),r)},getKeys(){return JAe(r)},clear(){return YAe(r)}}};const A2e="WALLET_CONNECT_V2_INDEXED_DB",S2e="keyvaluestorage";let I2e=class{constructor(){this.indexedDb=E2e({driver:C2e({dbName:A2e,storeName:S2e})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,rd(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var HP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof HP<"u"&&HP.localStorage?uS.exports=HP.localStorage:typeof window<"u"&&window.localStorage?uS.exports=window.localStorage:uS.exports=new e})();function x2e(t){var e;return[t[0],Ng((e=t[1])!=null?e:"")]}let N2e=class{constructor(){this.localStorage=uS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(x2e)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Ng(n)}async setItem(e,n){this.localStorage.setItem(e,rd(n))}async removeItem(e){this.localStorage.removeItem(e)}};const T2e="wc_storage_version",yF=1,R2e=async(t,e,n)=>{const r=T2e,s=await e.getItem(r);if(s&&s>=yF){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,yF),n(e),P2e(t,o)},P2e=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let O2e=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new N2e;this.storage=e;try{const n=new I2e;R2e(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var k2e=Object.defineProperty,D2e=(t,e,n)=>e in t?k2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wF=(t,e,n)=>D2e(t,typeof e!="symbol"?e+"":e,n);let L2e=class extends rm{constructor(e){super(),this.opts=e,wF(this,"protocol","wc"),wF(this,"version",2)}};var M2e=Object.defineProperty,U2e=(t,e,n)=>e in t?M2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$2e=(t,e,n)=>U2e(t,e+"",n);let B2e=class extends rm{constructor(e,n){super(),this.core=e,this.logger=n,$2e(this,"records",new Map)}},F2e=class{constructor(e,n){this.logger=e,this.core=n}},j2e=class extends rm{constructor(e,n){super(),this.relayer=e,this.logger=n}},z2e=class extends rm{constructor(e){super()}},W2e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},H2e=class extends rm{constructor(e,n){super(),this.relayer=e,this.logger=n}},G2e=class extends rm{constructor(e,n){super(),this.core=e,this.logger=n}},q2e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},V2e=class{constructor(e,n){this.projectId=e,this.logger=n}},K2e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var Y2e=Object.defineProperty,Q2e=(t,e,n)=>e in t?Y2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bF=(t,e,n)=>Q2e(t,typeof e!="symbol"?e+"":e,n);let J2e=class{constructor(e){this.opts=e,bF(this,"protocol","wc"),bF(this,"version",2)}},Z2e=class{constructor(e){this.client=e}};function I_(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function vF(t){return I_(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const VJ="2.23.2";let Gb={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${VJ}`};class kg extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof kg?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof kg&&n.cause.docsPath||n.docsPath,i=(a=Gb.getDocsUrl)==null?void 0:a.call(Gb,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Gb.version?[`Version: ${Gb.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=VJ}walk(e){return KJ(this,e)}}function KJ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?KJ(t.cause,e):e?null:t}class YJ extends kg{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function ob(t,{dir:e,size:n=32}={}){return typeof t=="string"?X2e(t,{dir:e,size:n}):eke(t,{dir:e,size:n})}function X2e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new YJ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function eke(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new YJ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class tke extends kg{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class nke extends kg{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function ab(t,{size:e}){if(vF(t)>e)throw new nke({givenSize:vF(t),maxSize:e})}function VD(t,e={}){const{signed:n}=e;e.size&&ab(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function rke(t,e={}){return Number(VD(t,e))}const ske=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function KD(t,e={}){return typeof t=="number"||typeof t=="bigint"?JJ(t,e):typeof t=="string"?ake(t,e):typeof t=="boolean"?ike(t,e):QJ(t,e)}function ike(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ab(n,{size:e.size}),ob(n,{size:e.size})):n}function QJ(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=ske[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ab(r,{size:e.size}),ob(r,{dir:"right",size:e.size})):r}function JJ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new tke({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?ob(a,{size:r}):a}const oke=new TextEncoder;function ake(t,e={}){const n=oke.encode(t);return QJ(n,e)}const cke=new TextEncoder;function lke(t,e={}){return typeof t=="number"||typeof t=="bigint"?dke(t,e):typeof t=="boolean"?uke(t,e):I_(t)?ZJ(t,e):XJ(t,e)}function uke(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ab(n,{size:e.size}),ob(n,{size:e.size})):n}const ru={zero:48,nine:57,A:65,F:70,a:97,f:102};function EF(t){if(t>=ru.zero&&t<=ru.nine)return t-ru.zero;if(t>=ru.A&&t<=ru.F)return t-(ru.A-10);if(t>=ru.a&&t<=ru.f)return t-(ru.a-10)}function ZJ(t,e={}){let n=t;e.size&&(ab(n,{size:e.size}),n=ob(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=EF(r.charCodeAt(a++)),l=EF(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new kg(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function dke(t,e){const n=JJ(t,e);return ZJ(n)}function XJ(t,e={}){const n=cke.encode(t);return typeof e.size=="number"?(ab(n,{size:e.size}),ob(n,{dir:"right",size:e.size})):n}function QI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function hke(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function XN(t,...e){if(!hke(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Gqe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");QI(t.outputLen),QI(t.blockLen)}function _F(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function fke(t,e){XN(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const hA=BigInt(2**32-1),CF=BigInt(32);function pke(t,e=!1){return e?{h:Number(t&hA),l:Number(t>>CF&hA)}:{h:Number(t>>CF&hA)|0,l:Number(t&hA)|0}}function gke(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=pke(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const mke=(t,e,n)=>t<<n|e>>>32-n,yke=(t,e,n)=>e<<n|t>>>32-n,wke=(t,e,n)=>e<<n-32|t>>>64-n,bke=(t,e,n)=>t<<n-32|e>>>64-n,Pm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vke(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function qqe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Vqe(t,e){return t<<32-e|t>>>e}const AF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Eke(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function SF(t){for(let e=0;e<t.length;e++)t[e]=Eke(t[e])}function _ke(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function eZ(t){return typeof t=="string"&&(t=_ke(t)),XN(t),t}function Kqe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];XN(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Cke=class{clone(){return this._cloneInto()}};function Ake(t){const e=r=>t().update(eZ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Qqe(t=32){if(Pm&&typeof Pm.getRandomValues=="function")return Pm.getRandomValues(new Uint8Array(t));if(Pm&&typeof Pm.randomBytes=="function")return Pm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const tZ=[],nZ=[],rZ=[],Ske=BigInt(0),qb=BigInt(1),Ike=BigInt(2),xke=BigInt(7),Nke=BigInt(256),Tke=BigInt(113);for(let t=0,e=qb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],tZ.push(2*(5*r+n)),nZ.push((t+1)*(t+2)/2%64);let s=Ske;for(let i=0;i<7;i++)e=(e<<qb^(e>>xke)*Tke)%Nke,e&Ike&&(s^=qb<<(qb<<BigInt(i))-qb);rZ.push(s)}const[Rke,Pke]=gke(rZ,!0),IF=(t,e,n)=>n>32?wke(t,e,n):mke(t,e,n),xF=(t,e,n)=>n>32?bke(t,e,n):yke(t,e,n);function Oke(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=IF(l,u,1)^n[a],h=xF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=nZ[o],c=IF(s,i,a),l=xF(s,i,a),u=tZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Rke[r],t[1]^=Pke[r]}n.fill(0)}let kke=class sZ extends Cke{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,QI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=vke(this.state)}keccak(){AF||SF(this.state32),Oke(this.state32,this.rounds),AF||SF(this.state32),this.posOut=0,this.pos=0}update(e){_F(this);const{blockLen:n,state:r}=this;e=eZ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){_F(this,!1),XN(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return QI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fke(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new sZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Dke=(t,e,n)=>Ake(()=>new kke(e,t,n)),Lke=Dke(1,136,256/8);function iZ(t,e){const n=e||"hex",r=Lke(I_(t,{strict:!1})?lke(t):t);return n==="bytes"?r:KD(r)}class Mke extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const GP=new Mke(8192);function Uke(t,e){if(GP.has(`${t}.${e}`))return GP.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=iZ(XJ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return GP.set(`${t}.${e}`,i),i}function $ke(t){const e=iZ(`0x${t.substring(4)}`).substring(26);return Uke(`0x${e}`)}async function Bke({hash:t,signature:e}){const n=I_(t)?t:KD(t),{secp256k1:r}=await Ks(async()=>{const{secp256k1:o}=await import("./secp256k1-CPy5dkr4.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=NF(f);return new r.Signature(VD(l),VD(u)).addRecoveryBit(p)}const o=I_(e)?e:KD(e),a=rke(`0x${o.slice(130)}`),c=NF(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function NF(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Fke({hash:t,signature:e}){return $ke(await Bke({hash:t,signature:e}))}var jke={};const zke=":";function zy(t){const[e,n]=t.split(zke);return{namespace:e,reference:n}}function oZ(t,e){return t.includes(":")?[t]:e.chains||[]}var Wke=Object.defineProperty,Hke=Object.defineProperties,Gke=Object.getOwnPropertyDescriptors,TF=Object.getOwnPropertySymbols,qke=Object.prototype.hasOwnProperty,Vke=Object.prototype.propertyIsEnumerable,RF=(t,e,n)=>e in t?Wke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PF=(t,e)=>{for(var n in e||(e={}))qke.call(e,n)&&RF(t,n,e[n]);if(TF)for(var n of TF(e))Vke.call(e,n)&&RF(t,n,e[n]);return t},Kke=(t,e)=>Hke(t,Gke(e));const Yke="ReactNative",Do={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Qke="js";function JI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function If(){return!Tg()&&!!nU()&&navigator.product===Yke}function Jke(){return If()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Zke(){return If()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function cb(){return!JI()&&!!nU()&&!!Tg()}function KC(){return If()?Do.reactNative:JI()?Do.node:cb()?Do.browser:Do.unknown}function OF(){var t;try{return If()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Xke(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function eDe(t){var e,n;const r=aZ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Kke(PF(PF({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function aZ(){return SJ()||{name:"",description:"",url:"",icons:[""]}}function tDe(){if(KC()===Do.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=SNe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function nDe(){var t;const e=KC();return e===Do.browser?[e,((t=AJ())==null?void 0:t.host)||"unknown"].join(":"):e}function cZ(t,e,n){const r=tDe(),s=nDe();return[[t,e].join("-"),[Qke,n].join("-"),r,s].join("/")}function rDe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=cZ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=Xke(l[1]||"",d);return l[0]+"?"+h}function wp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function YD(t){return Object.fromEntries(t.entries())}function QD(t){return new Map(Object.entries(t))}function Hf(t=xe.FIVE_MINUTES,e){const n=xe.toMiliseconds(t||xe.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Rh(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function lZ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function sDe(t){return lZ("topic",t)}function iDe(t){return lZ("id",t)}function uZ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Fr(t,e){return xe.fromMiliseconds(Date.now()+xe.toMiliseconds(t))}function Gd(t){return Date.now()>=xe.toMiliseconds(t)}function bn(t,e){return`${t}${e?`:${e}`:""}`}function Tl(t=[],e=[]){return[...new Set([...t,...e])]}async function oDe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=aDe(i,t,e),a=KC();if(a===Do.browser){if(!((r=Tg())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}cDe(o)}else a===Do.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function aDe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${hDe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function cDe(t){let e="_self";dDe()?e="_top":(uDe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function lDe(t,e){let n="";try{if(cb()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function kF(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function DF(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function oU(){return typeof process<"u"&&jke.IS_VITEST==="true"}function uDe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function dDe(){try{return window.self!==window.top}catch{return!1}}function hDe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function dZ(t){return Buffer.from(t,"base64").toString("utf-8")}function fDe(t){return new Promise(e=>setTimeout(e,t))}function x_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function pDe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function YC(t,...e){if(!pDe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function aU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");x_(t.outputLen),x_(t.blockLen)}function b0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function hZ(t,e){YC(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const fA=BigInt(2**32-1),LF=BigInt(32);function gDe(t,e=!1){return e?{h:Number(t&fA),l:Number(t>>LF&fA)}:{h:Number(t>>LF&fA)|0,l:Number(t&fA)|0}}function mDe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=gDe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const yDe=(t,e,n)=>t<<n|e>>>32-n,wDe=(t,e,n)=>e<<n|t>>>32-n,bDe=(t,e,n)=>e<<n-32|t>>>64-n,vDe=(t,e,n)=>t<<n-32|e>>>64-n,Om=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function EDe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function qP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Fc(t,e){return t<<32-e|t>>>e}const MF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function _De(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function UF(t){for(let e=0;e<t.length;e++)t[e]=_De(t[e])}function CDe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function v0(t){return typeof t=="string"&&(t=CDe(t)),YC(t),t}function ADe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];YC(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let cU=class{clone(){return this._cloneInto()}};function fZ(t){const e=r=>t().update(v0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function lb(t=32){if(Om&&typeof Om.getRandomValues=="function")return Om.getRandomValues(new Uint8Array(t));if(Om&&typeof Om.randomBytes=="function")return Om.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const pZ=[],gZ=[],mZ=[],SDe=BigInt(0),Vb=BigInt(1),IDe=BigInt(2),xDe=BigInt(7),NDe=BigInt(256),TDe=BigInt(113);for(let t=0,e=Vb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],pZ.push(2*(5*r+n)),gZ.push((t+1)*(t+2)/2%64);let s=SDe;for(let i=0;i<7;i++)e=(e<<Vb^(e>>xDe)*TDe)%NDe,e&IDe&&(s^=Vb<<(Vb<<BigInt(i))-Vb);mZ.push(s)}const[RDe,PDe]=mDe(mZ,!0),$F=(t,e,n)=>n>32?bDe(t,e,n):yDe(t,e,n),BF=(t,e,n)=>n>32?vDe(t,e,n):wDe(t,e,n);function ODe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=$F(l,u,1)^n[a],h=BF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=gZ[o],c=$F(s,i,a),l=BF(s,i,a),u=pZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=RDe[r],t[1]^=PDe[r]}n.fill(0)}let kDe=class yZ extends cU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,x_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=EDe(this.state)}keccak(){MF||UF(this.state32),ODe(this.state32,this.rounds),MF||UF(this.state32),this.posOut=0,this.pos=0}update(e){b0(this);const{blockLen:n,state:r}=this;e=v0(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){b0(this,!1),YC(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return x_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(hZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new yZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const DDe=(t,e,n)=>fZ(()=>new kDe(e,t,n)),LDe=DDe(1,136,256/8),MDe="https://rpc.walletconnect.org/v1";function wZ(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(LDe(n)).toString("hex")}async function UDe(t,e,n,r,s,i){switch(n.t){case"eip191":return await $De(t,e,n.s);case"eip1271":return await BDe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function $De(t,e,n){return(await Fke({hash:wZ(e),signature:n})).toLowerCase()===t.toLowerCase()}async function BDe(t,e,n,r,s,i){const o=zy(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=wZ(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||MDe}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:FDe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function FDe(){return Date.now()+Math.floor(Math.random()*1e3)}function jDe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return IJ.encode(i)}var zDe=Object.defineProperty,WDe=Object.defineProperties,HDe=Object.getOwnPropertyDescriptors,FF=Object.getOwnPropertySymbols,GDe=Object.prototype.hasOwnProperty,qDe=Object.prototype.propertyIsEnumerable,jF=(t,e,n)=>e in t?zDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,VDe=(t,e)=>{for(var n in e||(e={}))GDe.call(e,n)&&jF(t,n,e[n]);if(FF)for(var n of FF(e))qDe.call(e,n)&&jF(t,n,e[n]);return t},KDe=(t,e)=>WDe(t,HDe(e));const YDe="did:pkh:",lU=t=>t==null?void 0:t.split(":"),QDe=t=>{const e=t&&lU(t);if(e)return t.includes(YDe)?e[3]:e[1]},JD=t=>{const e=t&&lU(t);if(e)return e[2]+":"+e[3]},ZI=t=>{const e=t&&lU(t);if(e)return e.pop()};async function zF(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=bZ(s,s.iss),o=ZI(s.iss);return await UDe(o,i,r,JD(s.iss),n)}const bZ=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=ZI(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${QDe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=dS(t.resources);if(p){const g=N_(p);s=i3e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function JDe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function ZDe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Dg(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function XDe(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:e3e(e,n,r)}}}function e3e(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function vZ(t){return Dg(t),`urn:recap:${JDe(t).replace(/=/g,"")}`}function N_(t){const e=ZDe(t.replace("urn:recap:",""));return Dg(e),e}function t3e(t,e,n){const r=XDe(t,e,n);return vZ(r)}function n3e(t){return t&&t.includes("urn:recap:")}function r3e(t,e){const n=N_(t),r=N_(e),s=s3e(n,r);return vZ(s)}function s3e(t,e){Dg(t),Dg(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=KDe(VDe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function i3e(t="",e){Dg(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function WF(t){var e;const n=N_(t);Dg(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function HF(t){const e=N_(t);Dg(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function dS(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return n3e(e)?e:void 0}function VP(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function EZ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Po(t,...e){if(!EZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function GF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function o3e(t,e){Po(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function qF(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Jh=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),a3e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),c3e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!c3e)throw new Error("Non little-endian hardware is not supported");function l3e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ZD(t){if(typeof t=="string")t=l3e(t);else if(EZ(t))t=XD(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function u3e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function d3e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const h3e=(t,e)=>{function n(r,...s){if(Po(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Po(l):Po(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Po(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Po(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Po(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Po(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function VF(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!f3e(e))throw new Error("invalid output, must be aligned");return e}function KF(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function f3e(t){return t.byteOffset%4===0}function XD(t){return Uint8Array.from(t)}function E0(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const _Z=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),p3e=_Z("expand 16-byte k"),g3e=_Z("expand 32-byte k"),m3e=Jh(p3e),y3e=Jh(g3e);function an(t,e){return t<<e|t>>>32-e}function e3(t){return t.byteOffset%4===0}const pA=64,w3e=16,CZ=2**32-1,YF=new Uint32Array;function b3e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(pA),u=Jh(l),d=e3(s)&&e3(i),h=d?Jh(s):YF,f=d?Jh(i):YF;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=CZ)throw new Error("arx: counter overflow");const g=Math.min(pA,c-p);if(d&&g===pA){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,w;m<w3e;m++)w=y+m,f[w]=h[w]^u[m];p+=pA;continue}for(let y=0,m;y<g;y++)m=p+y,i[m]=s[m]^l[y];p+=g}}function v3e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=u3e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return VP(s),VP(o),qF(i),qF(n),(a,c,l,u,d=0)=>{Po(a),Po(c),Po(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Po(u),VP(d),d<0||d>=CZ)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=XD(a)),y=y3e;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=m3e,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);e3(c)||f.push(c=XD(c));const m=Jh(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,m,Jh(c.subarray(0,16)),m),c=c.subarray(16)}const w=16-s;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=Jh(c);return b3e(t,y,m,v,l,u,d,o),E0(...f),u}}const ys=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class E3e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=ZD(e),Po(e,32);const n=ys(e,0),r=ys(e,2),s=ys(e,4),i=ys(e,6),o=ys(e,8),a=ys(e,10),c=ys(e,12),l=ys(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=ys(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],m=ys(e,n+0),w=ys(e,n+2),v=ys(e,n+4),A=ys(e,n+6),C=ys(e,n+8),S=ys(e,n+10),x=ys(e,n+12),T=ys(e,n+14);let I=i[0]+(m&8191),k=i[1]+((m>>>13|w<<3)&8191),O=i[2]+((w>>>10|v<<6)&8191),B=i[3]+((v>>>7|A<<9)&8191),G=i[4]+((A>>>4|C<<12)&8191),W=i[5]+(C>>>1&8191),R=i[6]+((C>>>14|S<<2)&8191),N=i[7]+((S>>>11|x<<5)&8191),M=i[8]+((x>>>8|T<<8)&8191),P=i[9]+(T>>>5|s),L=0,j=L+I*a+k*(5*y)+O*(5*g)+B*(5*p)+G*(5*f);L=j>>>13,j&=8191,j+=W*(5*h)+R*(5*d)+N*(5*u)+M*(5*l)+P*(5*c),L+=j>>>13,j&=8191;let q=L+I*c+k*a+O*(5*y)+B*(5*g)+G*(5*p);L=q>>>13,q&=8191,q+=W*(5*f)+R*(5*h)+N*(5*d)+M*(5*u)+P*(5*l),L+=q>>>13,q&=8191;let ne=L+I*l+k*c+O*a+B*(5*y)+G*(5*g);L=ne>>>13,ne&=8191,ne+=W*(5*p)+R*(5*f)+N*(5*h)+M*(5*d)+P*(5*u),L+=ne>>>13,ne&=8191;let le=L+I*u+k*l+O*c+B*a+G*(5*y);L=le>>>13,le&=8191,le+=W*(5*g)+R*(5*p)+N*(5*f)+M*(5*h)+P*(5*d),L+=le>>>13,le&=8191;let oe=L+I*d+k*u+O*l+B*c+G*a;L=oe>>>13,oe&=8191,oe+=W*(5*y)+R*(5*g)+N*(5*p)+M*(5*f)+P*(5*h),L+=oe>>>13,oe&=8191;let se=L+I*h+k*d+O*u+B*l+G*c;L=se>>>13,se&=8191,se+=W*a+R*(5*y)+N*(5*g)+M*(5*p)+P*(5*f),L+=se>>>13,se&=8191;let ye=L+I*f+k*h+O*d+B*u+G*l;L=ye>>>13,ye&=8191,ye+=W*c+R*a+N*(5*y)+M*(5*g)+P*(5*p),L+=ye>>>13,ye&=8191;let Z=L+I*p+k*f+O*h+B*d+G*u;L=Z>>>13,Z&=8191,Z+=W*l+R*c+N*a+M*(5*y)+P*(5*g),L+=Z>>>13,Z&=8191;let ae=L+I*g+k*p+O*f+B*h+G*d;L=ae>>>13,ae&=8191,ae+=W*u+R*l+N*c+M*a+P*(5*y),L+=ae>>>13,ae&=8191;let he=L+I*y+k*g+O*p+B*f+G*h;L=he>>>13,he&=8191,he+=W*d+R*u+N*l+M*c+P*a,L+=he>>>13,he&=8191,L=(L<<2)+L|0,L=L+j|0,j=L&8191,L=L>>>13,q+=L,i[0]=j,i[1]=q,i[2]=ne,i[3]=le,i[4]=oe,i[5]=se,i[6]=ye,i[7]=Z,i[8]=ae,i[9]=he}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;E0(r)}update(e){GF(this);const{buffer:n,blockLen:r}=this;e=ZD(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){E0(this.h,this.r,this.buffer,this.pad)}digestInto(e){GF(this),o3e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function _3e(t){const e=(r,s)=>t(s).update(ZD(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const C3e=_3e(t=>new E3e(t));function A3e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],y=e[6],m=e[7],w=s,v=n[0],A=n[1],C=n[2],S=o,x=a,T=c,I=l,k=u,O=d,B=h,G=f,W=p,R=g,N=y,M=m,P=w,L=v,j=A,q=C;for(let le=0;le<i;le+=2)S=S+k|0,P=an(P^S,16),W=W+P|0,k=an(k^W,12),S=S+k|0,P=an(P^S,8),W=W+P|0,k=an(k^W,7),x=x+O|0,L=an(L^x,16),R=R+L|0,O=an(O^R,12),x=x+O|0,L=an(L^x,8),R=R+L|0,O=an(O^R,7),T=T+B|0,j=an(j^T,16),N=N+j|0,B=an(B^N,12),T=T+B|0,j=an(j^T,8),N=N+j|0,B=an(B^N,7),I=I+G|0,q=an(q^I,16),M=M+q|0,G=an(G^M,12),I=I+G|0,q=an(q^I,8),M=M+q|0,G=an(G^M,7),S=S+O|0,q=an(q^S,16),N=N+q|0,O=an(O^N,12),S=S+O|0,q=an(q^S,8),N=N+q|0,O=an(O^N,7),x=x+B|0,P=an(P^x,16),M=M+P|0,B=an(B^M,12),x=x+B|0,P=an(P^x,8),M=M+P|0,B=an(B^M,7),T=T+G|0,L=an(L^T,16),W=W+L|0,G=an(G^W,12),T=T+G|0,L=an(L^T,8),W=W+L|0,G=an(G^W,7),I=I+k|0,j=an(j^I,16),R=R+j|0,k=an(k^R,12),I=I+k|0,j=an(j^I,8),R=R+j|0,k=an(k^R,7);let ne=0;r[ne++]=o+S|0,r[ne++]=a+x|0,r[ne++]=c+T|0,r[ne++]=l+I|0,r[ne++]=u+k|0,r[ne++]=d+O|0,r[ne++]=h+B|0,r[ne++]=f+G|0,r[ne++]=p+W|0,r[ne++]=g+R|0,r[ne++]=y+N|0,r[ne++]=m+M|0,r[ne++]=w+P|0,r[ne++]=v+L|0,r[ne++]=A+j|0,r[ne++]=C+q|0}const S3e=v3e(A3e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),I3e=new Uint8Array(16),QF=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(I3e.subarray(n))},x3e=new Uint8Array(32);function JF(t,e,n,r,s){const i=t(e,n,x3e),o=C3e.create(i);s&&QF(o,s),QF(o,r);const a=new Uint8Array(16),c=a3e(a);KF(c,0,BigInt(s?s.length:0),!0),KF(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return E0(i,a),l}const N3e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=VF(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=JF(t,e,n,a,r);return i.set(c,o),E0(c),i},decrypt(s,i){i=VF(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=JF(t,e,n,o,r);if(!d3e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),E0(c),i}}),AZ=h3e({blockSize:64,nonceLength:12,tagLength:16},N3e(S3e));let SZ=class extends cU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,aU(e);const r=v0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return b0(this),this.iHash.update(e),this}digestInto(e){b0(this),YC(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const eT=(t,e,n)=>new SZ(t,e).update(n).digest();eT.create=(t,e)=>new SZ(t,e);function T3e(t,e,n){return aU(t),n===void 0&&(n=new Uint8Array(t.outputLen)),eT(t,v0(n),v0(e))}const KP=new Uint8Array([0]),ZF=new Uint8Array;function R3e(t,e,n,r=32){if(aU(t),x_(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=ZF);const i=new Uint8Array(s*t.outputLen),o=eT.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)KP[0]=l+1,a.update(l===0?ZF:c).update(n).update(KP).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),KP.fill(0),i.slice(0,r)}const P3e=(t,e,n,r,s)=>R3e(t,T3e(t,e,n),r,s);function O3e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function k3e(t,e,n){return t&e^~t&n}function D3e(t,e,n){return t&e^t&n^e&n}let L3e=class extends cU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=qP(this.buffer)}update(e){b0(this);const{view:n,buffer:r,blockLen:s}=this;e=v0(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=qP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){b0(this),hZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;O3e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=qP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const M3e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Nd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Td=new Uint32Array(64);class U3e extends L3e{constructor(){super(64,32,8,!1),this.A=Nd[0]|0,this.B=Nd[1]|0,this.C=Nd[2]|0,this.D=Nd[3]|0,this.E=Nd[4]|0,this.F=Nd[5]|0,this.G=Nd[6]|0,this.H=Nd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Td[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Td[d-15],f=Td[d-2],p=Fc(h,7)^Fc(h,18)^h>>>3,g=Fc(f,17)^Fc(f,19)^f>>>10;Td[d]=g+Td[d-7]+p+Td[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Fc(a,6)^Fc(a,11)^Fc(a,25),f=u+h+k3e(a,c,l)+M3e[d]+Td[d]|0,p=(Fc(r,2)^Fc(r,13)^Fc(r,22))+D3e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Td.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const QC=fZ(()=>new U3e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tT=BigInt(0),nT=BigInt(1),$3e=BigInt(2);function Lg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function JC(t){if(!Lg(t))throw new Error("Uint8Array expected")}function _0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const B3e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function C0(t){JC(t);let e="";for(let n=0;n<t.length;n++)e+=B3e[t[n]];return e}function Ey(t){const e=t.toString(16);return e.length&1?"0"+e:e}function uU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?tT:BigInt("0x"+t)}const su={_0:48,_9:57,A:65,F:70,a:97,f:102};function XF(t){if(t>=su._0&&t<=su._9)return t-su._0;if(t>=su.A&&t<=su.F)return t-(su.A-10);if(t>=su.a&&t<=su.f)return t-(su.a-10)}function A0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=XF(t.charCodeAt(i)),a=XF(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function rg(t){return uU(C0(t))}function T_(t){return JC(t),uU(C0(Uint8Array.from(t).reverse()))}function S0(t,e){return A0(t.toString(16).padStart(e*2,"0"))}function rT(t,e){return S0(t,e).reverse()}function F3e(t){return A0(Ey(t))}function To(t,e,n){let r;if(typeof e=="string")try{r=A0(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Lg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function R_(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];JC(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function j3e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function z3e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const YP=t=>typeof t=="bigint"&&tT<=t;function sT(t,e,n){return YP(t)&&YP(e)&&YP(n)&&e<=t&&t<n}function Wu(t,e,n,r){if(!sT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function IZ(t){let e;for(e=0;t>tT;t>>=nT,e+=1);return e}function W3e(t,e){return t>>BigInt(e)&nT}function H3e(t,e,n){return t|(n?nT:tT)<<BigInt(e)}const dU=t=>($3e<<BigInt(t-1))-nT,QP=t=>new Uint8Array(t),ej=t=>Uint8Array.from(t);function xZ(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=QP(t),s=QP(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=QP())=>{s=a(ej([0]),u),r=a(),u.length!==0&&(s=a(ej([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return R_(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const G3e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Lg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ub(t,e,n={}){const r=(s,i,o)=>{const a=G3e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const q3e=()=>{throw new Error("not implemented")};function t3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var V3e=Object.freeze({__proto__:null,isBytes:Lg,abytes:JC,abool:_0,bytesToHex:C0,numberToHexUnpadded:Ey,hexToNumber:uU,hexToBytes:A0,bytesToNumberBE:rg,bytesToNumberLE:T_,numberToBytesBE:S0,numberToBytesLE:rT,numberToVarBytesBE:F3e,ensureBytes:To,concatBytes:R_,equalBytes:j3e,utf8ToBytes:z3e,inRange:sT,aInRange:Wu,bitLen:IZ,bitGet:W3e,bitSet:H3e,bitMask:dU,createHmacDrbg:xZ,validateObject:ub,notImplemented:q3e,memoized:t3});const hs=BigInt(0),Tr=BigInt(1),Zf=BigInt(2),K3e=BigInt(3),n3=BigInt(4),tj=BigInt(5),nj=BigInt(8);function qi(t,e){const n=t%e;return n>=hs?n:e+n}function NZ(t,e,n){if(e<hs)throw new Error("invalid exponent, negatives unsupported");if(n<=hs)throw new Error("invalid modulus");if(n===Tr)return hs;let r=Tr;for(;e>hs;)e&Tr&&(r=r*t%n),t=t*t%n,e>>=Tr;return r}function Va(t,e,n){let r=t;for(;e-- >hs;)r*=r,r%=n;return r}function r3(t,e){if(t===hs)throw new Error("invert: expected non-zero number");if(e<=hs)throw new Error("invert: expected positive modulus, got "+e);let n=qi(t,e),r=e,s=hs,i=Tr;for(;n!==hs;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Tr)throw new Error("invert: does not exist");return qi(s,e)}function Y3e(t){const e=(t-Tr)/Zf;let n,r,s;for(n=t-Tr,r=0;n%Zf===hs;n/=Zf,r++);for(s=Zf;s<t&&NZ(s,e,t)!==t-Tr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Tr)/n3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Tr)/Zf;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Tr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Q3e(t){if(t%n3===K3e){const e=(t+Tr)/n3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%nj===tj){const e=(t-tj)/nj;return function(n,r){const s=n.mul(r,Zf),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Zf),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Y3e(t)}const J3e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Z3e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=J3e.reduce((r,s)=>(r[s]="function",r),e);return ub(t,n)}function X3e(t,e,n){if(n<hs)throw new Error("invalid exponent, negatives unsupported");if(n===hs)return t.ONE;if(n===Tr)return e;let r=t.ONE,s=e;for(;n>hs;)n&Tr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Tr;return r}function e5e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function TZ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function RZ(t,e,n=!1,r={}){if(t<=hs)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=TZ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:dU(s),ZERO:hs,ONE:Tr,create:c=>qi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return hs<=c&&c<t},is0:c=>c===hs,isOdd:c=>(c&Tr)===Tr,neg:c=>qi(-c,t),eql:(c,l)=>c===l,sqr:c=>qi(c*c,t),add:(c,l)=>qi(c+l,t),sub:(c,l)=>qi(c-l,t),mul:(c,l)=>qi(c*l,t),pow:(c,l)=>X3e(a,c,l),div:(c,l)=>qi(c*r3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>r3(c,t),sqrt:r.sqrt||(c=>(o||(o=Q3e(t)),o(a,c))),invertBatch:c=>e5e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?rT(c,i):S0(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?T_(c):rg(c)}});return Object.freeze(a)}function PZ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function OZ(t){const e=PZ(t);return e+Math.ceil(e/2)}function t5e(t,e,n=!1){const r=t.length,s=PZ(e),i=OZ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?T_(t):rg(t),a=qi(o,e-Tr)+Tr;return n?rT(a,s):S0(a,s)}const rj=BigInt(0),gA=BigInt(1);function JP(t,e){const n=e.negate();return t?n:e}function kZ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ZP(t,e){kZ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function n5e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function r5e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const XP=new WeakMap,DZ=new WeakMap;function eO(t){return DZ.get(t)||1}function s5e(t,e){return{constTimeNegate:JP,hasPrecomputes(n){return eO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>rj;)r&gA&&(s=s.add(i)),i=i.double(),r>>=gA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=ZP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=ZP(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=gA);const g=f,y=f+Math.abs(p)-1,m=h%2!==0,w=p<0;p===0?c=c.add(JP(m,r[g])):a=a.add(JP(w,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=ZP(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===rj)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=gA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=XP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&XP.set(r,s(i))),i},wNAFCached(n,r,s){const i=eO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=eO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){kZ(r,e),DZ.set(n,r),XP.delete(n)}}}function i5e(t,e,n,r){if(n5e(n,t),r5e(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=IZ(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function LZ(t){return Z3e(t.Fp),ub(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...TZ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const km=BigInt(0),tO=BigInt(1);function o5e(t){return ub(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function a5e(t){const e=o5e(t),{P:n}=e,r=w=>qi(w,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(w=>w),c=e.powPminus2||(w=>NZ(w,n-BigInt(2),n));function l(w,v,A){const C=r(w*(v-A));return v=r(v-C),A=r(A+C),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(w,v){Wu("u",w,km,n),Wu("scalar",v,km,n);const A=v,C=w;let S=tO,x=km,T=w,I=tO,k=km,O;for(let G=BigInt(s-1);G>=km;G--){const W=A>>G&tO;k^=W,O=l(k,S,T),S=O[0],T=O[1],O=l(k,x,I),x=O[0],I=O[1],k=W;const R=S+x,N=r(R*R),M=S-x,P=r(M*M),L=N-P,j=T+I,q=T-I,ne=r(q*R),le=r(j*M),oe=ne+le,se=ne-le;T=r(oe*oe),I=r(C*r(se*se)),S=r(N*P),x=r(L*(N+r(u*L)))}O=l(k,S,T),S=O[0],T=O[1],O=l(k,x,I),x=O[0],I=O[1];const B=c(x);return r(S*B)}function h(w){return rT(r(w),i)}function f(w){const v=To("u coordinate",w,i);return o===32&&(v[31]&=127),T_(v)}function p(w){const v=To("scalar",w),A=v.length;if(A!==i&&A!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+A)}return T_(a(v))}function g(w,v){const A=f(v),C=p(w),S=d(A,C);if(S===km)throw new Error("invalid private or public key received");return h(S)}const y=h(e.Gu);function m(w){return g(w,y)}return{scalarMult:g,scalarMultBase:m,getSharedSecret:(w,v)=>g(w,v),getPublicKey:w=>m(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:y}}const s3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const c5e=BigInt(1),sj=BigInt(2),l5e=BigInt(3),u5e=BigInt(5);BigInt(8);function d5e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=s3,o=t*t%i*t%i,a=Va(o,sj,i)*o%i,c=Va(a,c5e,i)*t%i,l=Va(c,u5e,i)*c%i,u=Va(l,e,i)*l%i,d=Va(u,n,i)*u%i,h=Va(d,r,i)*d%i,f=Va(h,s,i)*h%i,p=Va(f,s,i)*h%i,g=Va(p,e,i)*l%i;return{pow_p_5_8:Va(g,sj,i)*t%i,b2:o}}function h5e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const i3=a5e({P:s3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=s3,{pow_p_5_8:n,b2:r}=d5e(t);return qi(Va(n,l5e,e)*r,e)},adjustScalarBytes:h5e,randomBytes:lb});function ij(t){t.lowS!==void 0&&_0("lowS",t.lowS),t.prehash!==void 0&&_0("prehash",t.prehash)}function f5e(t){const e=LZ(t);ub(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:p5e,hexToBytes:g5e}=V3e;class m5e extends Error{constructor(e=""){super(e)}}const gu={Err:m5e,_tlv:{encode:(t,e)=>{const{Err:n}=gu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Ey(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Ey(s.length/2|128):"";return Ey(t)+i+s+e},decode(t,e){const{Err:n}=gu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=gu;if(t<Pu)throw new e("integer: negative integers are not allowed");let n=Ey(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=gu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return p5e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=gu,s=typeof t=="string"?g5e(t):t;JC(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=gu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Pu=BigInt(0),ns=BigInt(1);BigInt(2);const oj=BigInt(3);BigInt(4);function y5e(t){const e=f5e(t),{Fp:n}=e,r=RZ(e.n,e.nBitLength),s=e.toBytes||((g,y,m)=>{const w=y.toAffine();return R_(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(g=>{const y=g.subarray(1),m=n.fromBytes(y.subarray(0,n.BYTES)),w=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:m,y:w}});function o(g){const{a:y,b:m}=e,w=n.sqr(g),v=n.mul(w,g);return n.add(n.add(v,n.mul(g,y)),m)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return sT(g,ns,e.n)}function c(g){const{allowedPrivateKeyLengths:y,nByteLength:m,wrapPrivateKey:w,n:v}=e;if(y&&typeof g!="bigint"){if(Lg(g)&&(g=C0(g)),typeof g!="string"||!y.includes(g.length))throw new Error("invalid private key");g=g.padStart(m*2,"0")}let A;try{A=typeof g=="bigint"?g:rg(To("private key",g,m))}catch{throw new Error("invalid private key, expected hex or "+m+" bytes, got "+typeof g)}return w&&(A=qi(A,v)),Wu("private key",A,ns,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=t3((g,y)=>{const{px:m,py:w,pz:v}=g;if(n.eql(v,n.ONE))return{x:m,y:w};const A=g.is0();y==null&&(y=A?n.ONE:n.inv(v));const C=n.mul(m,y),S=n.mul(w,y),x=n.mul(v,y);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:C,y:S}}),d=t3(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:y,y:m}=g.toAffine();if(!n.isValid(y)||!n.isValid(m))throw new Error("bad point: x or y not FE");const w=n.sqr(m),v=o(y);if(!n.eql(w,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(y,m,w){if(this.px=y,this.py=m,this.pz=w,y==null||!n.isValid(y))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required");Object.freeze(this)}static fromAffine(y){const{x:m,y:w}=y||{};if(!y||!n.isValid(m)||!n.isValid(w))throw new Error("invalid affine point");if(y instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(m)&&v(w)?h.ZERO:new h(m,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const m=n.invertBatch(y.map(w=>w.pz));return y.map((w,v)=>w.toAffine(m[v])).map(h.fromAffine)}static fromHex(y){const m=h.fromAffine(i(To("pointHex",y)));return m.assertValidity(),m}static fromPrivateKey(y){return h.BASE.multiply(c(y))}static msm(y,m){return i5e(h,r,y,m)}_setWindowSize(y){p.setWindowSize(this,y)}assertValidity(){d(this)}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){l(y);const{px:m,py:w,pz:v}=this,{px:A,py:C,pz:S}=y,x=n.eql(n.mul(m,S),n.mul(A,v)),T=n.eql(n.mul(w,S),n.mul(C,v));return x&&T}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:m}=e,w=n.mul(m,oj),{px:v,py:A,pz:C}=this;let S=n.ZERO,x=n.ZERO,T=n.ZERO,I=n.mul(v,v),k=n.mul(A,A),O=n.mul(C,C),B=n.mul(v,A);return B=n.add(B,B),T=n.mul(v,C),T=n.add(T,T),S=n.mul(y,T),x=n.mul(w,O),x=n.add(S,x),S=n.sub(k,x),x=n.add(k,x),x=n.mul(S,x),S=n.mul(B,S),T=n.mul(w,T),O=n.mul(y,O),B=n.sub(I,O),B=n.mul(y,B),B=n.add(B,T),T=n.add(I,I),I=n.add(T,I),I=n.add(I,O),I=n.mul(I,B),x=n.add(x,I),O=n.mul(A,C),O=n.add(O,O),I=n.mul(O,B),S=n.sub(S,I),T=n.mul(O,k),T=n.add(T,T),T=n.add(T,T),new h(S,x,T)}add(y){l(y);const{px:m,py:w,pz:v}=this,{px:A,py:C,pz:S}=y;let x=n.ZERO,T=n.ZERO,I=n.ZERO;const k=e.a,O=n.mul(e.b,oj);let B=n.mul(m,A),G=n.mul(w,C),W=n.mul(v,S),R=n.add(m,w),N=n.add(A,C);R=n.mul(R,N),N=n.add(B,G),R=n.sub(R,N),N=n.add(m,v);let M=n.add(A,S);return N=n.mul(N,M),M=n.add(B,W),N=n.sub(N,M),M=n.add(w,v),x=n.add(C,S),M=n.mul(M,x),x=n.add(G,W),M=n.sub(M,x),I=n.mul(k,N),x=n.mul(O,W),I=n.add(x,I),x=n.sub(G,I),I=n.add(G,I),T=n.mul(x,I),G=n.add(B,B),G=n.add(G,B),W=n.mul(k,W),N=n.mul(O,N),G=n.add(G,W),W=n.sub(B,W),W=n.mul(k,W),N=n.add(N,W),B=n.mul(G,N),T=n.add(T,B),B=n.mul(M,N),x=n.mul(R,x),x=n.sub(x,B),B=n.mul(R,G),I=n.mul(M,I),I=n.add(I,B),new h(x,T,I)}subtract(y){return this.add(y.negate())}is0(){return this.equals(h.ZERO)}wNAF(y){return p.wNAFCached(this,y,h.normalizeZ)}multiplyUnsafe(y){const{endo:m,n:w}=e;Wu("scalar",y,Pu,w);const v=h.ZERO;if(y===Pu)return v;if(this.is0()||y===ns)return this;if(!m||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,y,h.normalizeZ);let{k1neg:A,k1:C,k2neg:S,k2:x}=m.splitScalar(y),T=v,I=v,k=this;for(;C>Pu||x>Pu;)C&ns&&(T=T.add(k)),x&ns&&(I=I.add(k)),k=k.double(),C>>=ns,x>>=ns;return A&&(T=T.negate()),S&&(I=I.negate()),I=new h(n.mul(I.px,m.beta),I.py,I.pz),T.add(I)}multiply(y){const{endo:m,n:w}=e;Wu("scalar",y,ns,w);let v,A;if(m){const{k1neg:C,k1:S,k2neg:x,k2:T}=m.splitScalar(y);let{p:I,f:k}=this.wNAF(S),{p:O,f:B}=this.wNAF(T);I=p.constTimeNegate(C,I),O=p.constTimeNegate(x,O),O=new h(n.mul(O.px,m.beta),O.py,O.pz),v=I.add(O),A=k.add(B)}else{const{p:C,f:S}=this.wNAF(y);v=C,A=S}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(y,m,w){const v=h.BASE,A=(S,x)=>x===Pu||x===ns||!S.equals(v)?S.multiplyUnsafe(x):S.multiply(x),C=A(this,m).add(A(y,w));return C.is0()?void 0:C}toAffine(y){return u(this,y)}isTorsionFree(){const{h:y,isTorsionFree:m}=e;if(y===ns)return!0;if(m)return m(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:m}=e;return y===ns?this:m?m(h,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return _0("isCompressed",y),this.assertValidity(),s(h,this,y)}toHex(y=!0){return _0("isCompressed",y),C0(this.toRawBytes(y))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=s5e(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function w5e(t){const e=LZ(t);return ub(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function b5e(t){const e=w5e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(W){return qi(W,r)}function a(W){return r3(W,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=y5e({...e,toBytes(W,R,N){const M=R.toAffine(),P=n.toBytes(M.x),L=R_;return _0("isCompressed",N),N?L(Uint8Array.from([R.hasEvenY()?2:3]),P):L(Uint8Array.from([4]),P,n.toBytes(M.y))},fromBytes(W){const R=W.length,N=W[0],M=W.subarray(1);if(R===s&&(N===2||N===3)){const P=rg(M);if(!sT(P,ns,n.ORDER))throw new Error("Point is not on curve");const L=u(P);let j;try{j=n.sqrt(L)}catch(ne){const le=ne instanceof Error?": "+ne.message:"";throw new Error("Point is not on curve"+le)}const q=(j&ns)===ns;return(N&1)===1!==q&&(j=n.neg(j)),{x:P,y:j}}else if(R===i&&N===4){const P=n.fromBytes(M.subarray(0,n.BYTES)),L=n.fromBytes(M.subarray(n.BYTES,2*n.BYTES));return{x:P,y:L}}else{const P=s,L=i;throw new Error("invalid Point, expected length of "+P+", or uncompressed "+L+", got "+R)}}}),h=W=>C0(S0(W,e.nByteLength));function f(W){const R=r>>ns;return W>R}function p(W){return f(W)?o(-W):W}const g=(W,R,N)=>rg(W.slice(R,N));class y{constructor(R,N,M){this.r=R,this.s=N,this.recovery=M,this.assertValidity()}static fromCompact(R){const N=e.nByteLength;return R=To("compactSignature",R,N*2),new y(g(R,0,N),g(R,N,2*N))}static fromDER(R){const{r:N,s:M}=gu.toSig(To("DER",R));return new y(N,M)}assertValidity(){Wu("r",this.r,ns,r),Wu("s",this.s,ns,r)}addRecoveryBit(R){return new y(this.r,this.s,R)}recoverPublicKey(R){const{r:N,s:M,recovery:P}=this,L=S(To("msgHash",R));if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");const j=P===2||P===3?N+e.n:N;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=P&1?"03":"02",ne=c.fromHex(q+h(j)),le=a(j),oe=o(-L*le),se=o(M*le),ye=c.BASE.multiplyAndAddUnsafe(ne,oe,se);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return A0(this.toDERHex())}toDERHex(){return gu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return A0(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const m={isValidPrivateKey(W){try{return l(W),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const W=OZ(e.n);return t5e(e.randomBytes(W),e.n)},precompute(W=8,R=c.BASE){return R._setWindowSize(W),R.multiply(BigInt(3)),R}};function w(W,R=!0){return c.fromPrivateKey(W).toRawBytes(R)}function v(W){const R=Lg(W),N=typeof W=="string",M=(R||N)&&W.length;return R?M===s||M===i:N?M===2*s||M===2*i:W instanceof c}function A(W,R,N=!0){if(v(W))throw new Error("first arg must be private key");if(!v(R))throw new Error("second arg must be public key");return c.fromHex(R).multiply(l(W)).toRawBytes(N)}const C=e.bits2int||function(W){if(W.length>8192)throw new Error("input is too large");const R=rg(W),N=W.length*8-e.nBitLength;return N>0?R>>BigInt(N):R},S=e.bits2int_modN||function(W){return o(C(W))},x=dU(e.nBitLength);function T(W){return Wu("num < 2^"+e.nBitLength,W,Pu,x),S0(W,e.nByteLength)}function I(W,R,N=k){if(["recovered","canonical"].some(ae=>ae in N))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:P}=e;let{lowS:L,prehash:j,extraEntropy:q}=N;L==null&&(L=!0),W=To("msgHash",W),ij(N),j&&(W=To("prehashed msgHash",M(W)));const ne=S(W),le=l(R),oe=[T(le),T(ne)];if(q!=null&&q!==!1){const ae=q===!0?P(n.BYTES):q;oe.push(To("extraEntropy",ae))}const se=R_(...oe),ye=ne;function Z(ae){const he=C(ae);if(!d(he))return;const de=a(he),be=c.BASE.multiply(he).toAffine(),Je=o(be.x);if(Je===Pu)return;const _e=o(de*o(ye+Je*le));if(_e===Pu)return;let Ae=(be.x===Je?0:2)|Number(be.y&ns),tt=_e;return L&&f(_e)&&(tt=p(_e),Ae^=1),new y(Je,tt,Ae)}return{seed:se,k2sig:Z}}const k={lowS:e.lowS,prehash:!1},O={lowS:e.lowS,prehash:!1};function B(W,R,N=k){const{seed:M,k2sig:P}=I(W,R,N),L=e;return xZ(L.hash.outputLen,L.nByteLength,L.hmac)(M,P)}c.BASE._setWindowSize(8);function G(W,R,N,M=O){var _e;const P=W;R=To("msgHash",R),N=To("publicKey",N);const{lowS:L,prehash:j,format:q}=M;if(ij(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&q!=="compact"&&q!=="der")throw new Error("format must be compact or der");const ne=typeof P=="string"||Lg(P),le=!ne&&!q&&typeof P=="object"&&P!==null&&typeof P.r=="bigint"&&typeof P.s=="bigint";if(!ne&&!le)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let oe,se;try{if(le&&(oe=new y(P.r,P.s)),ne){try{q!=="compact"&&(oe=y.fromDER(P))}catch(Ae){if(!(Ae instanceof gu.Err))throw Ae}!oe&&q!=="der"&&(oe=y.fromCompact(P))}se=c.fromHex(N)}catch{return!1}if(!oe||L&&oe.hasHighS())return!1;j&&(R=e.hash(R));const{r:ye,s:Z}=oe,ae=S(R),he=a(Z),de=o(ae*he),be=o(ye*he),Je=(_e=c.BASE.multiplyAndAddUnsafe(se,de,be))==null?void 0:_e.toAffine();return Je?o(Je.x)===ye:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:A,sign:B,verify:G,ProjectivePoint:c,Signature:y,utils:m}}function v5e(t){return{hash:t,hmac:(e,...n)=>eT(t,e,ADe(...n)),randomBytes:lb}}function E5e(t,e){const n=r=>b5e({...t,...v5e(r)});return{...n(e),create:n}}const MZ=RZ(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),_5e=MZ.create(BigInt("-3")),C5e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),A5e=E5e({a:_5e,b:C5e,Fp:MZ,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},QC),UZ="base10",Ei="base16",bc="base64pad",Qd="base64url",ZC="utf8",$Z=0,Hu=1,XC=2,S5e=0,aj=1,tE=12,hU=32;function I5e(){const t=i3.utils.randomPrivateKey(),e=i3.getPublicKey(t);return{privateKey:io(t,Ei),publicKey:io(e,Ei)}}function o3(){const t=lb(hU);return io(t,Ei)}function x5e(t,e){const n=i3.getSharedSecret(Ea(t,Ei),Ea(e,Ei)),r=P3e(QC,n,void 0,void 0,hU);return io(r,Ei)}function hS(t){const e=QC(Ea(t,Ei));return io(e,Ei)}function hl(t){const e=QC(Ea(t,ZC));return io(e,Ei)}function BZ(t){return Ea(`${t}`,UZ)}function Mg(t){return Number(io(t,UZ))}function FZ(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function jZ(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function N5e(t){const e=BZ(typeof t.type<"u"?t.type:$Z);if(Mg(e)===Hu&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Ea(t.senderPublicKey,Ei):void 0,r=typeof t.iv<"u"?Ea(t.iv,Ei):lb(tE),s=Ea(t.symKey,Ei),i=AZ(s,r).encrypt(Ea(t.message,ZC)),o=zZ({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Qd?FZ(o):o}function T5e(t){const e=Ea(t.symKey,Ei),{sealed:n,iv:r}=P_({encoded:t.encoded,encoding:t.encoding}),s=AZ(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return io(s,ZC)}function R5e(t,e){const n=BZ(XC),r=lb(tE),s=Ea(t,ZC),i=zZ({type:n,sealed:s,iv:r});return e===Qd?FZ(i):i}function P5e(t,e){const{sealed:n}=P_({encoded:t,encoding:e});return io(n,ZC)}function zZ(t){if(Mg(t.type)===XC)return io(Zv([t.type,t.sealed]),bc);if(Mg(t.type)===Hu){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return io(Zv([t.type,t.senderPublicKey,t.iv,t.sealed]),bc)}return io(Zv([t.type,t.iv,t.sealed]),bc)}function P_(t){const e=(t.encoding||bc)===Qd?jZ(t.encoded):t.encoded,n=Ea(e,bc),r=n.slice(S5e,aj),s=aj;if(Mg(r)===Hu){const c=s+hU,l=c+tE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Mg(r)===XC){const c=n.slice(s),l=lb(tE);return{type:r,sealed:c,iv:l}}const i=s+tE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function O5e(t,e){const n=P_({encoded:t,encoding:e==null?void 0:e.encoding});return WZ({type:Mg(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?io(n.senderPublicKey,Ei):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function WZ(t){const e=(t==null?void 0:t.type)||$Z;if(e===Hu){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function cj(t){return t.type===Hu&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function lj(t){return t.type===XC}function k5e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Zv([new Uint8Array([4]),e,n])}function D5e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(jZ(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=QC(c),u=k5e(e);if(!A5e.verify(Zv([o,a]),l,u))throw new Error("Invalid signature");return UD(t).payload}const L5e="irn";function XI(t){return(t==null?void 0:t.relay)||{protocol:L5e}}function mv(t){const e=FTe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function M5e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function uj(t){if(!t.includes("wc:")){const l=dZ(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:U5e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:M5e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function U5e(t){return t.startsWith("//")?t.substring(2):t}function $5e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function dj(t){const e=new URLSearchParams,n=$5e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function mA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var B5e=Object.defineProperty,F5e=Object.defineProperties,j5e=Object.getOwnPropertyDescriptors,hj=Object.getOwnPropertySymbols,z5e=Object.prototype.hasOwnProperty,W5e=Object.prototype.propertyIsEnumerable,fj=(t,e,n)=>e in t?B5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H5e=(t,e)=>{for(var n in e||(e={}))z5e.call(e,n)&&fj(t,n,e[n]);if(hj)for(var n of hj(e))W5e.call(e,n)&&fj(t,n,e[n]);return t},G5e=(t,e)=>F5e(t,j5e(e));function db(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function q5e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...db(n.accounts))}),e}function V5e(t,e){const n=[];return Object.values(t).forEach(r=>{db(r.accounts).includes(e)&&n.push(...r.methods)}),n}function K5e(t,e){const n=[];return Object.values(t).forEach(r=>{db(r.accounts).includes(e)&&n.push(...r.events)}),n}function iT(t){return t.includes(":")}function _y(t){return iT(t)?t.split(":")[0]:t}function pj(t){var e,n,r;const s={};if(!Xh(t))return s;for(const[i,o]of Object.entries(t)){const a=iT(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=_y(i);s[u]=G5e(H5e({},s[u]),{chains:Tl(a,(e=s[u])==null?void 0:e.chains),methods:Tl(c,(n=s[u])==null?void 0:n.methods),events:Tl(l,(r=s[u])==null?void 0:r.events)})}return s}function Y5e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function gj(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=Y5e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Tl(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function Q5e(t,e){var n,r,s,i,o,a;const c=pj(t),l=pj(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Tl((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Tl((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Tl((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const J5e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Z5e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Te(t,e){const{message:n,code:r}=Z5e[t];return{message:e?`${n} ${e}`:n,code:r}}function Rn(t,e){const{message:n,code:r}=J5e[t];return{message:e?`${n} ${e}`:n,code:r}}function Zh(t,e){return!!Array.isArray(t)}function Xh(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Is(t){return typeof t>"u"}function kr(t,e){return e&&Is(t)?!0:typeof t=="string"&&!!t.trim().length}function fU(t,e){return e&&Is(t)?!0:typeof t=="number"&&!isNaN(t)}function X5e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return wp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=db(a),d=n[o];(!wp(oZ(o,d),u)||!wp(d.methods,c)||!wp(d.events,l))&&(i=!1)}),i):!1}function ex(t){return kr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function eLe(t){if(kr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&ex(n)}}return!1}function tLe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(kr(t,!1)){if(e(t))return!0;const n=dZ(t);return e(n)}}catch{}return!1}function nLe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function rLe(t){return t==null?void 0:t.topic}function sLe(t,e){let n=null;return kr(t==null?void 0:t.publicKey,!1)||(n=Te("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function mj(t){let e=!0;return Zh(t)?t.length&&(e=t.every(n=>kr(n,!1))):e=!1,e}function iLe(t,e,n){let r=null;return Zh(e)&&e.length?e.forEach(s=>{r||ex(s)||(r=Rn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):ex(t)||(r=Rn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function oLe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=iLe(s,oZ(s,i),`${e} ${n}`);o&&(r=o)}),r}function aLe(t,e){let n=null;return Zh(t)?t.forEach(r=>{n||eLe(r)||(n=Rn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Rn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function cLe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=aLe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function lLe(t,e){let n=null;return mj(t==null?void 0:t.methods)?mj(t==null?void 0:t.events)||(n=Rn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Rn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function HZ(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=lLe(r,`${e}, namespace`);s&&(n=s)}),n}function uLe(t,e,n){let r=null;if(t&&Xh(t)){const s=HZ(t,e);s&&(r=s);const i=oLe(t,e,n);i&&(r=i)}else r=Te("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function nO(t,e){let n=null;if(t&&Xh(t)){const r=HZ(t,e);r&&(n=r);const s=cLe(t,e);s&&(n=s)}else n=Te("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function GZ(t){return kr(t.protocol,!0)}function dLe(t,e){let n=!1;return t?t&&Zh(t)&&t.length&&t.forEach(r=>{n=GZ(r)}):n=!0,n}function hLe(t){return typeof t=="number"}function $i(t){return typeof t<"u"&&typeof t!==null}function fLe(t){return!(!t||typeof t!="object"||!t.code||!fU(t.code,!1)||!t.message||!kr(t.message,!1))}function pLe(t){return!(Is(t)||!kr(t.method,!1))}function gLe(t){return!(Is(t)||Is(t.result)&&Is(t.error)||!fU(t.id,!1)||!kr(t.jsonrpc,!1))}function mLe(t){return!(Is(t)||!kr(t.name,!1))}function yj(t,e){return!(!ex(e)||!q5e(t).includes(e))}function yLe(t,e,n){return kr(n,!1)?V5e(t,e).includes(n):!1}function wLe(t,e,n){return kr(n,!1)?K5e(t,e).includes(n):!1}function wj(t,e,n){let r=null;const s=bLe(t),i=vLe(e),o=Object.keys(s),a=Object.keys(i),c=bj(Object.keys(t)),l=bj(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),wp(o,a)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=db(e[d].accounts);h.includes(d)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(wp(s[d].methods,i[d].methods)?wp(s[d].events,i[d].events)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function bLe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function bj(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function vLe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=db(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function ELe(t,e){return fU(t,!1)&&t<=e.max&&t>=e.min}function vj(){const t=KC();return new Promise(e=>{switch(t){case Do.browser:e(_Le());break;case Do.reactNative:e(CLe());break;case Do.node:e(ALe());break;default:e(!0)}})}function _Le(){return cb()&&(navigator==null?void 0:navigator.onLine)}async function CLe(){if(If()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function ALe(){return!0}function SLe(t){switch(KC()){case Do.browser:ILe(t);break;case Do.reactNative:xLe(t);break}}function ILe(t){!If()&&cb()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function xLe(t){If()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function NLe(){var t;return cb()&&Tg()?((t=Tg())==null?void 0:t.visibilityState)==="visible":!0}const rO={};class Kb{static get(e){return rO[e]}static set(e,n){rO[e]=n}static delete(e){delete rO[e]}}var TLe={};const qZ="wc",VZ=2,a3="core",$l=`${qZ}@2:${a3}:`,RLe={logger:"error"},PLe={database:":memory:"},OLe="crypto",Ej="client_ed25519_seed",kLe=xe.ONE_DAY,DLe="keychain",LLe="0.3",MLe="messages",ULe="0.3",_j=xe.SIX_HOURS,$Le="publisher",KZ="irn",BLe="error",YZ="wss://relay.walletconnect.org",FLe="relayer",cs={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},jLe="_subscription",Xo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},zLe=.1,c3="2.21.0",Jn={link_mode:"link_mode",relay:"relay"},fS={inbound:"inbound",outbound:"outbound"},WLe="0.3",HLe="WALLETCONNECT_CLIENT_ID",Cj="WALLETCONNECT_LINK_MODE_APPS",Eo={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},GLe="subscription",qLe="0.3",VLe="pairing",KLe="0.3",Yb={wc_pairingDelete:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:0},res:{ttl:xe.ONE_DAY,prompt:!1,tag:0}}},Xf={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Wa={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},YLe="history",QLe="0.3",JLe="expirer",ia={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},ZLe="0.3",XLe="verify-api",eMe="https://verify.walletconnect.com",QZ="https://verify.walletconnect.org",nE=QZ,tMe=`${nE}/v3`,nMe=[eMe,QZ],rMe="echo",sMe="https://echo.walletconnect.com",qc={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},lu={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ha={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},kf={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Df={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Qb={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},iMe=.1,oMe="event-client",aMe=86400,cMe="https://pulse.walletconnect.org/batch";function lMe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,w=p.length;m!==w&&p[m]===0;)m++,g++;for(var v=(w-m)*u+1>>>0,A=new Uint8Array(v);m!==w;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var w=(p.length-g)*l+1>>>0,v=new Uint8Array(w);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=w-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=w-m;x!==w&&v[x]===0;)x++;for(var T=new Uint8Array(y+(w-x)),I=y;x!==w;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var uMe=lMe,dMe=uMe;const JZ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},hMe=t=>new TextEncoder().encode(t),fMe=t=>new TextDecoder().decode(t);class pMe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class gMe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ZZ(this,e)}}class mMe{constructor(e){this.decoders=e}or(e){return ZZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ZZ=(t,e)=>new mMe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class yMe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new pMe(e,n,r),this.decoder=new gMe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const oT=({name:t,prefix:e,encode:n,decode:r})=>new yMe(t,e,n,r),e1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=dMe(n,e);return oT({prefix:t,name:e,encode:r,decode:i=>JZ(s(i))})},wMe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},bMe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},$s=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>oT({prefix:e,name:t,encode(s){return bMe(s,r,n)},decode(s){return wMe(s,r,n,t)}}),vMe=oT({prefix:"\0",name:"identity",encode:t=>fMe(t),decode:t=>hMe(t)});var EMe=Object.freeze({__proto__:null,identity:vMe});const _Me=$s({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var CMe=Object.freeze({__proto__:null,base2:_Me});const AMe=$s({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var SMe=Object.freeze({__proto__:null,base8:AMe});const IMe=e1({prefix:"9",name:"base10",alphabet:"0123456789"});var xMe=Object.freeze({__proto__:null,base10:IMe});const NMe=$s({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),TMe=$s({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var RMe=Object.freeze({__proto__:null,base16:NMe,base16upper:TMe});const PMe=$s({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),OMe=$s({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),kMe=$s({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),DMe=$s({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),LMe=$s({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),MMe=$s({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),UMe=$s({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$Me=$s({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),BMe=$s({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var FMe=Object.freeze({__proto__:null,base32:PMe,base32upper:OMe,base32pad:kMe,base32padupper:DMe,base32hex:LMe,base32hexupper:MMe,base32hexpad:UMe,base32hexpadupper:$Me,base32z:BMe});const jMe=e1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),zMe=e1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var WMe=Object.freeze({__proto__:null,base36:jMe,base36upper:zMe});const HMe=e1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),GMe=e1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var qMe=Object.freeze({__proto__:null,base58btc:HMe,base58flickr:GMe});const VMe=$s({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),KMe=$s({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),YMe=$s({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),QMe=$s({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var JMe=Object.freeze({__proto__:null,base64:VMe,base64pad:KMe,base64url:YMe,base64urlpad:QMe});const XZ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ZMe=XZ.reduce((t,e,n)=>(t[n]=e,t),[]),XMe=XZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function eUe(t){return t.reduce((e,n)=>(e+=ZMe[n],e),"")}function tUe(t){const e=[];for(const n of t){const r=XMe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const nUe=oT({prefix:"🚀",name:"base256emoji",encode:eUe,decode:tUe});var rUe=Object.freeze({__proto__:null,base256emoji:nUe}),sUe=eX,Aj=128,iUe=-128,oUe=Math.pow(2,31);function eX(t,e,n){e=e||[],n=n||0;for(var r=n;t>=oUe;)e[n++]=t&255|Aj,t/=128;for(;t&iUe;)e[n++]=t&255|Aj,t>>>=7;return e[n]=t|0,eX.bytes=n-r+1,e}var aUe=l3,cUe=128,Sj=127;function l3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw l3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Sj)<<s:(o&Sj)*Math.pow(2,s),s+=7}while(o>=cUe);return l3.bytes=i-r,n}var lUe=Math.pow(2,7),uUe=Math.pow(2,14),dUe=Math.pow(2,21),hUe=Math.pow(2,28),fUe=Math.pow(2,35),pUe=Math.pow(2,42),gUe=Math.pow(2,49),mUe=Math.pow(2,56),yUe=Math.pow(2,63),wUe=function(t){return t<lUe?1:t<uUe?2:t<dUe?3:t<hUe?4:t<fUe?5:t<pUe?6:t<gUe?7:t<mUe?8:t<yUe?9:10},bUe={encode:sUe,decode:aUe,encodingLength:wUe},tX=bUe;const Ij=(t,e,n=0)=>(tX.encode(t,e,n),e),xj=t=>tX.encodingLength(t),u3=(t,e)=>{const n=e.byteLength,r=xj(t),s=r+xj(n),i=new Uint8Array(s+n);return Ij(t,i,0),Ij(n,i,r),i.set(e,s),new vUe(t,n,e,i)};class vUe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const nX=({name:t,code:e,encode:n})=>new EUe(t,e,n);class EUe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?u3(this.code,n):n.then(r=>u3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const rX=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),_Ue=nX({name:"sha2-256",code:18,encode:rX("SHA-256")}),CUe=nX({name:"sha2-512",code:19,encode:rX("SHA-512")});var AUe=Object.freeze({__proto__:null,sha256:_Ue,sha512:CUe});const sX=0,SUe="identity",iX=JZ,IUe=t=>u3(sX,iX(t)),xUe={code:sX,name:SUe,encode:iX,digest:IUe};var NUe=Object.freeze({__proto__:null,identity:xUe});new TextEncoder,new TextDecoder;const Nj={...EMe,...CMe,...SMe,...xMe,...RMe,...FMe,...WMe,...qMe,...JMe,...rUe};({...AUe,...NUe});function TUe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function oX(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Tj=oX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),sO=oX("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=TUe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),RUe={utf8:Tj,"utf-8":Tj,hex:Nj.base16,latin1:sO,ascii:sO,binary:sO,...Nj};function PUe(t,e="utf8"){const n=RUe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var OUe=Object.defineProperty,kUe=(t,e,n)=>e in t?OUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jc=(t,e,n)=>kUe(t,typeof e!="symbol"?e+"":e,n);class DUe{constructor(e,n){this.core=e,this.logger=n,jc(this,"keychain",new Map),jc(this,"name",DLe),jc(this,"version",LLe),jc(this,"initialized",!1),jc(this,"storagePrefix",$l),jc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),jc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),jc(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),jc(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Te("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),jc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Ls(n,this.name)}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,YD(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?QD(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var LUe=Object.defineProperty,MUe=(t,e,n)=>e in t?LUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ws=(t,e,n)=>MUe(t,typeof e!="symbol"?e+"":e,n);class UUe{constructor(e,n,r){this.core=e,this.logger=n,ws(this,"name",OLe),ws(this,"keychain"),ws(this,"randomSessionIdentifier",o3()),ws(this,"initialized",!1),ws(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),ws(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),ws(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=z4(s);return CJ(i.publicKey)}),ws(this,"generateKeyPair",()=>{this.isInitialized();const s=I5e();return this.setPrivateKey(s.publicKey,s.privateKey)}),ws(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=z4(i),a=this.randomSessionIdentifier;return await mNe(a,s,kLe,o)}),ws(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=x5e(a,i);return this.setSymKey(c,o)}),ws(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||hS(s);return await this.keychain.set(o,s),o}),ws(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),ws(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),ws(this,"encode",async(s,i,o)=>{this.isInitialized();const a=WZ(o),c=rd(i);if(lj(a))return R5e(c,o==null?void 0:o.encoding);if(cj(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return N5e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),ws(this,"decode",async(s,i,o)=>{this.isInitialized();const a=O5e(i,o);if(lj(a)){const c=P5e(i,o==null?void 0:o.encoding);return Ng(c)}if(cj(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=T5e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Ng(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),ws(this,"getPayloadType",(s,i=bc)=>{const o=P_({encoded:s,encoding:i});return Mg(o.type)}),ws(this,"getPayloadSenderPublicKey",(s,i=bc)=>{const o=P_({encoded:s,encoding:i});return o.senderPublicKey?io(o.senderPublicKey,Ei):void 0}),this.core=e,this.logger=Ls(n,this.name),this.keychain=r||new DUe(this.core,this.logger)}get context(){return ho(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Ej)}catch{e=o3(),await this.keychain.set(Ej,e)}return PUe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $Ue=Object.defineProperty,BUe=Object.defineProperties,FUe=Object.getOwnPropertyDescriptors,Rj=Object.getOwnPropertySymbols,jUe=Object.prototype.hasOwnProperty,zUe=Object.prototype.propertyIsEnumerable,d3=(t,e,n)=>e in t?$Ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WUe=(t,e)=>{for(var n in e||(e={}))jUe.call(e,n)&&d3(t,n,e[n]);if(Rj)for(var n of Rj(e))zUe.call(e,n)&&d3(t,n,e[n]);return t},HUe=(t,e)=>BUe(t,FUe(e)),po=(t,e,n)=>d3(t,typeof e!="symbol"?e+"":e,n);class GUe extends F2e{constructor(e,n){super(e,n),this.logger=e,this.core=n,po(this,"messages",new Map),po(this,"messagesWithoutClientAck",new Map),po(this,"name",MLe),po(this,"version",ULe),po(this,"initialized",!1),po(this,"storagePrefix",$l),po(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),po(this,"set",async(r,s,i)=>{this.isInitialized();const o=hl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===fS.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,HUe(WUe({},c),{[o]:s}))}return await this.persist(),o}),po(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),po(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),po(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=hl(s);return typeof i[o]<"u"}),po(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=hl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),po(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Ls(e,this.name),this.core=n}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,YD(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,YD(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?QD(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?QD(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var qUe=Object.defineProperty,VUe=Object.defineProperties,KUe=Object.getOwnPropertyDescriptors,Pj=Object.getOwnPropertySymbols,YUe=Object.prototype.hasOwnProperty,QUe=Object.prototype.propertyIsEnumerable,h3=(t,e,n)=>e in t?qUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yA=(t,e)=>{for(var n in e||(e={}))YUe.call(e,n)&&h3(t,n,e[n]);if(Pj)for(var n of Pj(e))QUe.call(e,n)&&h3(t,n,e[n]);return t},iO=(t,e)=>VUe(t,KUe(e)),Ga=(t,e,n)=>h3(t,typeof e!="symbol"?e+"":e,n);class JUe extends j2e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ga(this,"events",new ka.EventEmitter),Ga(this,"name",$Le),Ga(this,"queue",new Map),Ga(this,"publishTimeout",xe.toMiliseconds(xe.ONE_MINUTE)),Ga(this,"initialPublishTimeout",xe.toMiliseconds(xe.ONE_SECOND*15)),Ga(this,"needsTransportRestart",!1),Ga(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||_j,c=XI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||yp().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:w})=>{h.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(cs.publish,y),g(h))};this.relayer.events.on(cs.publish,y);const m=Rh(new Promise((w,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(w).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await m,this.events.removeListener(cs.publish,y)}catch(w){this.queue.set(d,iO(yA({},h),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Rh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Ga(this,"on",(r,s)=>{this.events.on(r,s)}),Ga(this,"once",(r,s)=>{this.events.once(r,s)}),Ga(this,"off",(r,s)=>{this.events.off(r,s)}),Ga(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Ls(n,this.name),this.registerEventListeners()}get context(){return ho(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=_j,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:mv(XI().protocol).publish,params:yA({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Is((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Is((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(cs.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,iO(yA({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(iO(yA({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(sm.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(cs.connection_stalled);return}this.checkQueue()}),this.relayer.on(cs.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var ZUe=Object.defineProperty,XUe=(t,e,n)=>e in t?ZUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dm=(t,e,n)=>XUe(t,typeof e!="symbol"?e+"":e,n);class e$e{constructor(){Dm(this,"map",new Map),Dm(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Dm(this,"get",e=>this.map.get(e)||[]),Dm(this,"exists",(e,n)=>this.get(e).includes(n)),Dm(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Dm(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var t$e=Object.defineProperty,n$e=Object.defineProperties,r$e=Object.getOwnPropertyDescriptors,Oj=Object.getOwnPropertySymbols,s$e=Object.prototype.hasOwnProperty,i$e=Object.prototype.propertyIsEnumerable,f3=(t,e,n)=>e in t?t$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jb=(t,e)=>{for(var n in e||(e={}))s$e.call(e,n)&&f3(t,n,e[n]);if(Oj)for(var n of Oj(e))i$e.call(e,n)&&f3(t,n,e[n]);return t},oO=(t,e)=>n$e(t,r$e(e)),Un=(t,e,n)=>f3(t,typeof e!="symbol"?e+"":e,n);class o$e extends H2e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Un(this,"subscriptions",new Map),Un(this,"topicMap",new e$e),Un(this,"events",new ka.EventEmitter),Un(this,"name",GLe),Un(this,"version",qLe),Un(this,"pending",new Map),Un(this,"cached",[]),Un(this,"initialized",!1),Un(this,"storagePrefix",$l),Un(this,"subscribeTimeout",xe.toMiliseconds(xe.ONE_MINUTE)),Un(this,"initialSubscribeTimeout",xe.toMiliseconds(xe.ONE_SECOND*15)),Un(this,"clientId"),Un(this,"batchSubscribeTopicsLimit",500),Un(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Un(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=XI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Un(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Un(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Un(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Un(this,"on",(r,s)=>{this.events.on(r,s)}),Un(this,"once",(r,s)=>{this.events.once(r,s)}),Un(this,"off",(r,s)=>{this.events.off(r,s)}),Un(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Un(this,"start",async()=>{await this.onConnect()}),Un(this,"stop",async()=>{await this.onDisconnect()}),Un(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Un(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Un(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(sm.pulse,async()=>{await this.checkPending()}),this.events.on(Eo.created,async r=>{const s=Eo.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Eo.deleted,async r=>{const s=Eo.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Ls(n,this.name),this.clientId=""}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=XI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Rn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Jn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:mv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Jn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},xe.toMiliseconds(xe.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Eo.created,d),u(h.id))};this.events.on(Eo.created,d);try{const h=await Rh(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Eo.created,d),u(h)}catch{}}),l=await Rh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(cs.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:mv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Rh(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(cs.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:mv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Rh(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(cs.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:mv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,oO(Jb({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Jb({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Jb({},n)),this.topicMap.set(n.topic,e),this.events.emit(Eo.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Eo.deleted,oO(Jb({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Eo.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Eo.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>oO(Jb({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await fDe(xe.toMiliseconds(xe.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return hl(e+await this.getClientId())}}var a$e=Object.defineProperty,kj=Object.getOwnPropertySymbols,c$e=Object.prototype.hasOwnProperty,l$e=Object.prototype.propertyIsEnumerable,p3=(t,e,n)=>e in t?a$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dj=(t,e)=>{for(var n in e||(e={}))c$e.call(e,n)&&p3(t,n,e[n]);if(kj)for(var n of kj(e))l$e.call(e,n)&&p3(t,n,e[n]);return t},cn=(t,e,n)=>p3(t,typeof e!="symbol"?e+"":e,n);class u$e extends z2e{constructor(e){super(e),cn(this,"protocol","wc"),cn(this,"version",2),cn(this,"core"),cn(this,"logger"),cn(this,"events",new ka.EventEmitter),cn(this,"provider"),cn(this,"messages"),cn(this,"subscriber"),cn(this,"publisher"),cn(this,"name",FLe),cn(this,"transportExplicitlyClosed",!1),cn(this,"initialized",!1),cn(this,"connectionAttemptInProgress",!1),cn(this,"relayUrl"),cn(this,"projectId"),cn(this,"packageName"),cn(this,"bundleId"),cn(this,"hasExperiencedNetworkDisruption",!1),cn(this,"pingTimeout"),cn(this,"heartBeatTimeout",xe.toMiliseconds(xe.THIRTY_SECONDS+xe.FIVE_SECONDS)),cn(this,"reconnectTimeout"),cn(this,"connectPromise"),cn(this,"reconnectInProgress",!1),cn(this,"requestsInFlight",[]),cn(this,"connectTimeout",xe.toMiliseconds(xe.ONE_SECOND*15)),cn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||yp().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),cn(this,"resetPingTimeout",()=>{JI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),cn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),cn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(cs.connect)}),cn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),cn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(cs.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),cn(this,"registerProviderListeners",()=>{this.provider.on(Xo.payload,this.onPayloadHandler),this.provider.on(Xo.connect,this.onConnectHandler),this.provider.on(Xo.disconnect,this.onDisconnectHandler),this.provider.on(Xo.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ls(e.logger,this.name):WC(om({level:e.logger||BLe})),this.messages=new GUe(this.logger,e.core),this.subscriber=new o$e(this,this.logger),this.publisher=new JUe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||YZ,this.projectId=e.projectId,Jke()?this.packageName=OF():Zke()&&(this.bundleId=OF()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return ho(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Jn.relay},fS.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Eo.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Eo.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Dj({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Rh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await vj())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Fr(xe.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(cs.message,e),await this.recordMessageEvent(e,fS.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Xo.disconnect,i),await Rh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Xo.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Xo.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Xo.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,xe.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(JI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Da(new NRe(rDe({sdkVersion:c3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),iU(e)){if(!e.method.endsWith(jLe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Jn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Dj({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else QN(e)&&this.events.emit(cs.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,fS.inbound),this.events.emit(cs.message,e))}async acknowledgePayload(e){const n=KN(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Xo.payload,this.onPayloadHandler),this.provider.off(Xo.connect,this.onConnectHandler),this.provider.off(Xo.disconnect,this.onDisconnectHandler),this.provider.off(Xo.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await vj();SLe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(sm.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&NLe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(cs.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},xe.toMiliseconds(zLe)))))}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function d$e(){}function Lj(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Mj(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Uj(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const h$e="[object RegExp]",f$e="[object String]",p$e="[object Number]",g$e="[object Boolean]",$j="[object Arguments]",m$e="[object Symbol]",y$e="[object Date]",w$e="[object Map]",b$e="[object Set]",v$e="[object Array]",E$e="[object Function]",_$e="[object ArrayBuffer]",aO="[object Object]",C$e="[object Error]",A$e="[object DataView]",S$e="[object Uint8Array]",I$e="[object Uint8ClampedArray]",x$e="[object Uint16Array]",N$e="[object Uint32Array]",T$e="[object BigUint64Array]",R$e="[object Int8Array]",P$e="[object Int16Array]",O$e="[object Int32Array]",k$e="[object BigInt64Array]",D$e="[object Float32Array]",L$e="[object Float64Array]";function M$e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function U$e(t,e,n){return yv(t,e,void 0,void 0,void 0,void 0,n)}function yv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return rE(t,e,i,o)}return rE(t,e,i,o)}function rE(t,e,n,r){if(Object.is(t,e))return!0;let s=Uj(t),i=Uj(e);if(s===$j&&(s=aO),i===$j&&(i=aO),s!==i)return!1;switch(s){case f$e:return t.toString()===e.toString();case p$e:{const c=t.valueOf(),l=e.valueOf();return M$e(c,l)}case g$e:case y$e:case m$e:return Object.is(t.valueOf(),e.valueOf());case h$e:return t.source===e.source&&t.flags===e.flags;case E$e:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case w$e:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!yv(l,e.get(c),c,t,e,n,r))return!1;return!0}case b$e:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>yv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case v$e:case S$e:case I$e:case x$e:case N$e:case T$e:case R$e:case P$e:case O$e:case k$e:case D$e:case L$e:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!yv(t[c],e[c],c,t,e,n,r))return!1;return!0}case _$e:return t.byteLength!==e.byteLength?!1:rE(new Uint8Array(t),new Uint8Array(e),n,r);case A$e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:rE(new Uint8Array(t),new Uint8Array(e),n,r);case C$e:return t.name===e.name&&t.message===e.message;case aO:{if(!(rE(t.constructor,e.constructor,n,r)||Lj(t)&&Lj(e)))return!1;const c=[...Object.keys(t),...Mj(t)],l=[...Object.keys(e),...Mj(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!yv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function $$e(t,e){return U$e(t,e,d$e)}var B$e=Object.defineProperty,Bj=Object.getOwnPropertySymbols,F$e=Object.prototype.hasOwnProperty,j$e=Object.prototype.propertyIsEnumerable,g3=(t,e,n)=>e in t?B$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fj=(t,e)=>{for(var n in e||(e={}))F$e.call(e,n)&&g3(t,n,e[n]);if(Bj)for(var n of Bj(e))j$e.call(e,n)&&g3(t,n,e[n]);return t},ki=(t,e,n)=>g3(t,typeof e!="symbol"?e+"":e,n);class cm extends W2e{constructor(e,n,r,s=$l,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,ki(this,"map",new Map),ki(this,"version",WLe),ki(this,"cached",[]),ki(this,"initialized",!1),ki(this,"getKey"),ki(this,"storagePrefix",$l),ki(this,"recentlyDeleted",[]),ki(this,"recentlyDeletedLimit",200),ki(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Is(o)?this.map.set(this.getKey(o),o):nLe(o)?this.map.set(o.id,o):rLe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),ki(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),ki(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),ki(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>$$e(a[c],o[c]))):this.values)),ki(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Fj(Fj({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),ki(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Ls(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Te("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var z$e=Object.defineProperty,W$e=(t,e,n)=>e in t?z$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kt=(t,e,n)=>W$e(t,typeof e!="symbol"?e+"":e,n);class H$e{constructor(e,n){this.core=e,this.logger=n,Kt(this,"name",VLe),Kt(this,"version",KLe),Kt(this,"events",new VM),Kt(this,"pairings"),Kt(this,"initialized",!1),Kt(this,"storagePrefix",$l),Kt(this,"ignoredPayloadTypes",[Hu]),Kt(this,"registeredMethods",[]),Kt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Kt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Kt(this,"create",async r=>{this.isInitialized();const s=o3(),i=await this.core.crypto.setSymKey(s),o=Fr(xe.FIVE_MINUTES),a={protocol:KZ},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=dj({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Xf.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Kt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[qc.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=uj(r.uri);s.props.properties.topic=i,s.addTrace(qc.pairing_uri_validation_success),s.addTrace(qc.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(qc.existing_pairing),u.active)throw s.setError(lu.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(qc.pairing_not_expired)}const d=c||Fr(xe.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(qc.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Xf.create,h),s.addTrace(qc.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(qc.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(lu.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(lu.subscribe_pairing_topic_failure),f}return s.addTrace(qc.subscribe_pairing_topic_success),h}),Kt(this,"activate",async({topic:r})=>{this.isInitialized();const s=Fr(xe.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Kt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Hf();this.events.once(bn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Kt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Kt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Kt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Kt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Rn("USER_DISCONNECTED")),await this.deletePairing(s))}),Kt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return dj({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Kt(this,"sendRequest",async(r,s,i)=>{const o=Th(s,i),a=await this.core.crypto.encode(r,o),c=Yb[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Kt(this,"sendResult",async(r,s,i)=>{const o=KN(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Yb[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Kt(this,"sendError",async(r,s,i)=>{const o=YN(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Yb[c]?Yb[c].res:Yb.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Kt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Rn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Kt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Gd(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Kt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Kt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Kt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Xf.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Kt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Yc(s)?this.events.emit(bn("pairing_ping",i),{}):pa(s)&&this.events.emit(bn("pairing_ping",i),{error:s.error})},500)}),Kt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Xf.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Kt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Rn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Kt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Rn("WC_METHOD_UNSUPPORTED",r))}),Kt(this,"isValidPair",(r,s)=>{var i;if(!$i(r)){const{message:a}=Te("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(lu.malformed_pairing_uri),new Error(a)}if(!tLe(r.uri)){const{message:a}=Te("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(lu.malformed_pairing_uri),new Error(a)}const o=uj(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Te("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(lu.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Te("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(lu.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&xe.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(lu.pairing_expired);const{message:a}=Te("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Kt(this,"isValidPing",async r=>{if(!$i(r)){const{message:i}=Te("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Kt(this,"isValidDisconnect",async r=>{if(!$i(r)){const{message:i}=Te("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Kt(this,"isValidPairingTopic",async r=>{if(!kr(r,!1)){const{message:s}=Te("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Gd(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Te("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Ls(n,this.name),this.pairings=new cm(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ho(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(cs.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Jn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);iU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):QN(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(ia.expired,async e=>{const{topic:n}=uZ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Xf.expire,{topic:n}))})}}var G$e=Object.defineProperty,q$e=(t,e,n)=>e in t?G$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bs=(t,e,n)=>q$e(t,typeof e!="symbol"?e+"":e,n);class V$e extends B2e{constructor(e,n){super(e,n),this.core=e,this.logger=n,bs(this,"records",new Map),bs(this,"events",new ka.EventEmitter),bs(this,"name",YLe),bs(this,"version",QLe),bs(this,"cached",[]),bs(this,"initialized",!1),bs(this,"storagePrefix",$l),bs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),bs(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Fr(xe.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Wa.created,o)}),bs(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=pa(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Wa.updated,s))}),bs(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),bs(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Wa.deleted,i)}}),this.persist()}),bs(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),bs(this,"on",(r,s)=>{this.events.on(r,s)}),bs(this,"once",(r,s)=>{this.events.once(r,s)}),bs(this,"off",(r,s)=>{this.events.off(r,s)}),bs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ls(n,this.name)}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Th(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Wa.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Wa.created,e=>{const n=Wa.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Wa.updated,e=>{const n=Wa.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Wa.deleted,e=>{const n=Wa.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(sm.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{xe.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Wa.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var K$e=Object.defineProperty,Y$e=(t,e,n)=>e in t?K$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ws=(t,e,n)=>Y$e(t,typeof e!="symbol"?e+"":e,n);class Q$e extends G2e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ws(this,"expirations",new Map),Ws(this,"events",new ka.EventEmitter),Ws(this,"name",JLe),Ws(this,"version",ZLe),Ws(this,"cached",[]),Ws(this,"initialized",!1),Ws(this,"storagePrefix",$l),Ws(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ws(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Ws(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(ia.created,{target:i,expiration:o})}),Ws(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Ws(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ia.deleted,{target:s,expiration:i})}}),Ws(this,"on",(r,s)=>{this.events.on(r,s)}),Ws(this,"once",(r,s)=>{this.events.once(r,s)}),Ws(this,"off",(r,s)=>{this.events.off(r,s)}),Ws(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ls(n,this.name)}get context(){return ho(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return sDe(e);if(typeof e=="number")return iDe(e);const{message:n}=Te("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ia.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;xe.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(ia.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(sm.pulse,()=>this.checkExpirations()),this.events.on(ia.created,e=>{const n=ia.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ia.expired,e=>{const n=ia.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ia.deleted,e=>{const n=ia.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var J$e=Object.defineProperty,Z$e=(t,e,n)=>e in t?J$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Or=(t,e,n)=>Z$e(t,typeof e!="symbol"?e+"":e,n);class X$e extends q2e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Or(this,"name",XLe),Or(this,"abortController"),Or(this,"isDevEnv"),Or(this,"verifyUrlV3",tMe),Or(this,"storagePrefix",$l),Or(this,"version",VZ),Or(this,"publicKey"),Or(this,"fetchPromise"),Or(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&xe.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Or(this,"register",async s=>{if(!cb()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Tg(),u=this.startAbortTimer(xe.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=m=>{if(m.data&&typeof m.data=="string")try{const w=JSON.parse(m.data);if(w.type==="verify_attestation"){if(UD(w.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),h(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Or(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(UD(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Or(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(xe.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Or(this,"getVerifyUrl",s=>{let i=s||nE;return nMe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${nE}`),i=nE),i}),Or(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(xe.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Or(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Or(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Or(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Or(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Or(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Or(this,"validateAttestation",(s,i)=>{const o=D5e(s,i.publicKey),a={hasExpired:xe.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Ls(n,this.name),this.abortController=new AbortController,this.isDevEnv=oU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ho(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),xe.toMiliseconds(e))}}var eBe=Object.defineProperty,tBe=(t,e,n)=>e in t?eBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jj=(t,e,n)=>tBe(t,typeof e!="symbol"?e+"":e,n);class nBe extends V2e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,jj(this,"context",rMe),jj(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${sMe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Ls(n,this.context)}}var rBe=Object.defineProperty,zj=Object.getOwnPropertySymbols,sBe=Object.prototype.hasOwnProperty,iBe=Object.prototype.propertyIsEnumerable,m3=(t,e,n)=>e in t?rBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zb=(t,e)=>{for(var n in e||(e={}))sBe.call(e,n)&&m3(t,n,e[n]);if(zj)for(var n of zj(e))iBe.call(e,n)&&m3(t,n,e[n]);return t},Zr=(t,e,n)=>m3(t,typeof e!="symbol"?e+"":e,n);class oBe extends K2e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Zr(this,"context",oMe),Zr(this,"storagePrefix",$l),Zr(this,"storageVersion",iMe),Zr(this,"events",new Map),Zr(this,"shouldPersist",!1),Zr(this,"init",async()=>{if(!oU())try{const s={eventId:DF(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:cZ(this.core.relayer.protocol,this.core.relayer.version,c3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Zr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=DF(),u=this.core.projectId||"",d=Date.now(),h=Zb({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Zr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Zb(Zb({},a),this.setMethods(a.eventId))}),Zr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Zr(this,"setEventListeners",()=>{this.core.heartbeat.on(sm.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{xe.fromMiliseconds(Date.now())-xe.fromMiliseconds(s.timestamp)>aMe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Zr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Zr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Zr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Zr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Zr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Zb(Zb({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Zr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Zr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${cMe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${c3}${i}`,{method:"POST",body:JSON.stringify(s)})}),Zr(this,"getAppDomain",()=>aZ().url),this.logger=Ls(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var aBe=Object.defineProperty,Wj=Object.getOwnPropertySymbols,cBe=Object.prototype.hasOwnProperty,lBe=Object.prototype.propertyIsEnumerable,y3=(t,e,n)=>e in t?aBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hj=(t,e)=>{for(var n in e||(e={}))cBe.call(e,n)&&y3(t,n,e[n]);if(Wj)for(var n of Wj(e))lBe.call(e,n)&&y3(t,n,e[n]);return t},zn=(t,e,n)=>y3(t,typeof e!="symbol"?e+"":e,n);let uBe=class aX extends L2e{constructor(e){var n;super(e),zn(this,"protocol",qZ),zn(this,"version",VZ),zn(this,"name",a3),zn(this,"relayUrl"),zn(this,"projectId"),zn(this,"customStoragePrefix"),zn(this,"events",new ka.EventEmitter),zn(this,"logger"),zn(this,"heartbeat"),zn(this,"relayer"),zn(this,"crypto"),zn(this,"storage"),zn(this,"history"),zn(this,"expirer"),zn(this,"pairing"),zn(this,"verify"),zn(this,"echoClient"),zn(this,"linkModeSupportedApps"),zn(this,"eventClient"),zn(this,"initialized",!1),zn(this,"logChunkController"),zn(this,"on",(a,c)=>this.events.on(a,c)),zn(this,"once",(a,c)=>this.events.once(a,c)),zn(this,"off",(a,c)=>this.events.off(a,c)),zn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),zn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Jn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||YZ,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=om({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:RLe.logger,name:a3}),{logger:i,chunkLoggerController:o}=WN({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ls(i,this.name),this.heartbeat=new jAe,this.crypto=new UUe(this,this.logger,e==null?void 0:e.keychain),this.history=new V$e(this,this.logger),this.expirer=new Q$e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new O2e(Hj(Hj({},PLe),e==null?void 0:e.storageOptions)),this.relayer=new u$e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new H$e(this,this.logger),this.verify=new X$e(this,this.logger,this.storage),this.echoClient=new nBe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new oBe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new aX(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(HLe,r),n}get context(){return ho(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Cj,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Cj)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&TLe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const dBe=uBe,cX="wc",lX=2,uX="client",pU=`${cX}@${lX}:${uX}:`,cO={name:uX,logger:"error"},Gj="WALLETCONNECT_DEEPLINK_CHOICE",hBe="proposal",qj="Proposal expired",fBe="session",Lm=xe.SEVEN_DAYS,pBe="engine",Xr={wc_sessionPropose:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1114},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:xe.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:xe.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1119}}},lO={min:xe.FIVE_MINUTES,max:xe.SEVEN_DAYS},zc={idle:"IDLE",active:"ACTIVE"},Vj={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},gBe="request",mBe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],yBe="wc",wBe="auth",bBe="authKeys",vBe="pairingTopics",EBe="requests",aT=`${yBe}@${1.5}:${wBe}:`,pS=`${aT}:PUB_KEY`;var _Be=Object.defineProperty,CBe=Object.defineProperties,ABe=Object.getOwnPropertyDescriptors,Kj=Object.getOwnPropertySymbols,SBe=Object.prototype.hasOwnProperty,IBe=Object.prototype.propertyIsEnumerable,w3=(t,e,n)=>e in t?_Be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$n=(t,e)=>{for(var n in e||(e={}))SBe.call(e,n)&&w3(t,n,e[n]);if(Kj)for(var n of Kj(e))IBe.call(e,n)&&w3(t,n,e[n]);return t},ri=(t,e)=>CBe(t,ABe(e)),we=(t,e,n)=>w3(t,typeof e!="symbol"?e+"":e,n);class xBe extends Z2e{constructor(e){super(e),we(this,"name",pBe),we(this,"events",new VM),we(this,"initialized",!1),we(this,"requestQueue",{state:zc.idle,queue:[]}),we(this,"sessionRequestQueue",{state:zc.idle,queue:[]}),we(this,"requestQueueDelay",xe.ONE_SECOND),we(this,"expectedPairingMethodMap",new Map),we(this,"recentlyDeletedMap",new Map),we(this,"recentlyDeletedLimit",200),we(this,"relayMessageCache",[]),we(this,"pendingSessions",new Map),we(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Xr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},xe.toMiliseconds(this.requestQueueDelay)))}),we(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ri($n({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Q5e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const S=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=S.active}}catch(S){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),S}if(!u||!h){const{topic:S,uri:x}=await this.client.core.pairing.create();u=S,d=x}if(!u){const{message:S}=Te("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(S)}const f=await this.client.core.crypto.generateKeyPair(),p=Xr.wc_sessionPropose.req.ttl||xe.FIVE_MINUTES,g=Fr(p),y=ri($n($n({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:KZ}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Kc()}),m=bn("session_connect",y.id),{reject:w,resolve:v,done:A}=Hf(p,qj),C=({id:S})=>{S===y.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(y.id),this.events.emit(m,{error:{message:qj,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(m,({error:S,session:x})=>{this.client.events.off("proposal_expire",C),S?w(S):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:A}}),we(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),we(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Ha.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(I){throw o.setError(kf.no_internet_connection),I}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(I){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(kf.proposal_not_found),I}try{await this.isValidApprove(n)}catch(I){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(kf.session_approve_namespace_validation_failure),I}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:m}=f;let w=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});w||(w=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Ha.session_approve_started,properties:{topic:p,trace:[Ha.session_approve_started,Ha.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,C=await this.client.core.crypto.generateSharedKey(v,A),S=$n($n($n({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:Fr(Lm)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=Jn.relay;w.addTrace(Ha.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:x})}catch(I){throw w.setError(kf.subscribe_session_topic_failure),I}w.addTrace(Ha.subscribe_session_topic_success);const T=ri($n({},S),{topic:C,requiredNamespaces:y,optionalNamespaces:m,pairingTopic:p,acknowledged:!1,self:S.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Jn.relay});await this.client.session.set(C,T),w.addTrace(Ha.store_session);try{w.addTrace(Ha.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0}).catch(I=>{throw w==null||w.setError(kf.session_settle_publish_failure),I}),w.addTrace(Ha.session_settle_publish_success),w.addTrace(Ha.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(I=>{throw w==null||w.setError(kf.session_approve_publish_failure),I}),w.addTrace(Ha.session_approve_publish_success)}catch(I){throw this.client.logger.error(I),this.client.session.delete(C,Rn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),I}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Rn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,Fr(Lm)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),we(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:Xr.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Rn("USER_DISCONNECTED")))}),we(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Hf(),c=Kc(),l=yp().toString(),u=this.client.session.get(r).namespaces;return this.events.once(bn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),we(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Kc(),{done:i,resolve:o,reject:a}=Hf();return this.events.once(bn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Fr(Lm)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),we(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=Xr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Jn.relay&&await this.confirmOnlineStateOrThrow();const c=Kc(),l=yp().toString(),{done:u,resolve:d,reject:h}=Hf(o,"Request expired. Please try again.");this.events.once(bn("session_request",c),({error:m,result:w})=>{m?h(m):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:ri($n({},s),{expiryTimestamp:Fr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:ri($n({},s),{expiryTimestamp:Fr(o)}),chainId:r},y=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async m=>{await this.sendRequest($n({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},y&&{tvf:this.getTVFParams(c,g)})).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const v=await lDe(this.client.core.storage,Gj);await oDe({id:c,topic:i,wcDeepLink:v})}m()}),u()]).then(m=>m[2])}),we(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Yc(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):pa(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),we(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Kc(),i=yp().toString(),{done:o,resolve:a,reject:c}=Hf();this.events.once(bn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),we(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=yp().toString(),a=Kc();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),we(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Rn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Te("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),we(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>X5e(r,n)))),we(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),we(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Jn.link_mode:Jn.relay;o===Jn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:y}=n,m=[...n.resources||[]],{topic:w,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),C=hS(A);if(await Promise.all([this.client.auth.authKeys.set(pS,{responseTopic:C,publicKey:A}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:w})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),g.length>0){const{namespace:L}=zy(a[0]);let j=t3e(L,"request",g);dS(m)&&(j=r3e(j,m.pop())),m.push(j)}const S=y&&y>Xr.wc_sessionAuthenticate.req.ttl?y:Xr.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:m},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Fr(S)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},I={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Fr(Xr.wc_sessionPropose.req.ttl),id:Kc()},{done:k,resolve:O,reject:B}=Hf(S,"Request expired"),G=Kc(),W=bn("session_connect",I.id),R=bn("session_request",G),N=async({error:L,session:j})=>{this.events.off(R,M),L?B(L):j&&O({session:j})},M=async L=>{var j,q,ne;if(await this.deletePendingAuthRequest(G,{message:"fulfilled",code:0}),L.error){const he=Rn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return L.error.code===he.code?void 0:(this.events.off(W,N),B(L.error.message))}await this.deleteProposal(I.id),this.events.off(W,N);const{cacaos:le,responder:oe}=L.result,se=[],ye=[];for(const he of le){await zF({cacao:he,projectId:this.client.core.projectId})||(this.client.logger.error(he,"Signature verification failed"),B(Rn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:de}=he,be=dS(de.resources),Je=[JD(de.iss)],_e=ZI(de.iss);if(be){const Ae=WF(be),tt=HF(be);se.push(...Ae),Je.push(...tt)}for(const Ae of Je)ye.push(`${Ae}:${_e}`)}const Z=await this.client.core.crypto.generateSharedKey(A,oe.publicKey);let ae;se.length>0&&(ae={topic:Z,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:oe,controller:oe.publicKey,expiry:Fr(Lm),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:gj([...new Set(se)],[...new Set(ye)]),transportType:o},await this.client.core.relayer.subscribe(Z,{transportType:o}),await this.client.session.set(Z,ae),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:oe.metadata}),ae=this.client.session.get(Z)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(q=oe.metadata.redirect)!=null&&q.linkMode&&(ne=oe.metadata.redirect)!=null&&ne.universal&&r&&(this.client.core.addLinkModeSupportedApp(oe.metadata.redirect.universal),this.client.session.update(Z,{transportType:Jn.link_mode})),O({auths:le,session:ae})};this.events.once(W,N),this.events.once(R,M);let P;try{if(i){const L=Th("wc_sessionAuthenticate",x,G);this.client.core.history.set(w,L);const j=await this.client.core.crypto.encode("",L,{type:XC,encoding:Qd});P=mA(r,w,j)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:G}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:I,expiry:Xr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(L){throw this.events.off(W,N),this.events.off(R,M),L}return await this.setProposal(I.id,I),await this.setAuthRequest(G,{request:ri($n({},x),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:P??v,response:k}}),we(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Df.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(Qb.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Qb.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Jn.relay;a===Jn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=hS(c),d={type:Hu,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await zF({cacao:y,projectId:this.client.core.projectId})){i.setError(Qb.invalid_cacao);const C=Rn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(Df.cacaos_verified);const{p:m}=y,w=dS(m.resources),v=[JD(m.iss)],A=ZI(m.iss);if(w){const C=WF(w),S=HF(w);h.push(...C),v.push(...S)}for(const C of v)f.push(`${C}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Df.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Fr(Lm),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:gj([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Df.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(Qb.subscribe_authenticated_session_topic_failure),y}i.addTrace(Df.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Df.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Df.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(Qb.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),we(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=hS(o),l={type:Hu,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Xr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Rn("USER_DISCONNECTED"))}),we(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return bZ(r,s)}),we(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),we(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),we(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Rn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Gj).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Rn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=zc.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),we(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(kf.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Rn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),we(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=zc.idle,this.client.events.emit("session_request_expire",{id:n}))}),we(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),we(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),we(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Fr(Xr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),we(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Jn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),we(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Fr(Xr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),we(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Th(s,i,c);let f;const p=!!u;try{const m=p?Qd:bc;f=await this.client.core.crypto.encode(r,h,{encoding:m})}catch(m){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),m}let g;if(mBe.includes(s)){const m=hl(JSON.stringify(h)),w=hl(f);g=await this.client.core.verify.register({id:w,decryptedId:m})}const y=Xr[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,h),p){const m=mA(u,r,f);await global.Linking.openURL(m,this.client.name)}else{const m=Xr[s].req;o&&(m.ttl=o),a&&(m.id=a),m.tvf=ri($n({},d),{correlationId:h.id}),l?(m.internal=ri($n({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,m)):this.client.core.relayer.publish(r,f,m).catch(w=>this.client.logger.error(w))}return h.id}),we(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=KN(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Qd:bc;u=await this.client.core.crypto.encode(s,l,ri($n({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=mA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=Xr[p].res;g.tvf=ri($n({},f),{correlationId:r}),o?(g.internal=ri($n({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),we(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=YN(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Qd:bc;u=await this.client.core.crypto.encode(s,l,ri($n({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=mA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Xr[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),we(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Gd(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Gd(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),we(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),we(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),we(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===zc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=zc.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=zc.idle}),we(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),we(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),we(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Te("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),we(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),we(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(lu.proposal_listener_not_found)),this.isValidConnect($n({},s.params));const u=a.expiryTimestamp||Fr(Xr.wc_sessionPropose.req.ttl),d=$n({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:hl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(qc.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Xr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),we(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Yc(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(pa(r)){await this.client.proposal.delete(i,Rn("USER_DISCONNECTED"));const o=bn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),we(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=ri($n($n($n({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Jn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(bn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Yc(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(bn("session_approve",s),{})):pa(r)&&(await this.client.session.delete(n,Rn("USER_DISCONNECTED")),this.events.emit(bn("session_approve",s),{error:r.error}))}),we(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Kb.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Rn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate($n({topic:n},s));try{Kb.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Kb.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),we(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=bn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Yc(r)?this.events.emit(bn("session_update",s),{}):pa(r)&&this.events.emit(bn("session_update",s),{error:r.error})}),we(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Fr(Lm)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=bn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Yc(r)?this.events.emit(bn("session_extend",s),{}):pa(r)&&this.events.emit(bn("session_extend",s),{error:r.error})}),we(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=bn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Yc(r)?this.events.emit(bn("session_ping",s),{}):pa(r)&&this.events.emit(bn("session_ping",s),{error:r.error})},500)}),we(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(cs.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Rn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),we(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest($n({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:hl(JSON.stringify(Th("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Jn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),we(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=bn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Yc(r)?this.events.emit(bn("session_request",s),{result:r.result}):pa(r)&&this.events.emit(bn("session_request",s),{error:r.error})}),we(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Kb.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit($n({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Kb.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Yc(r)?this.events.emit(bn("session_request",s),{result:r.result}):pa(r)&&this.events.emit(bn("session_request",s),{error:r.error})}),we(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:hl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Jn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Hu,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Xr.wc_sessionAuthenticate.autoReject,appLink:h})}}),we(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),we(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=zc.idle,this.processSessionRequestQueue()},xe.toMiliseconds(this.requestQueueDelay))}),we(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=bn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(bn("session_request",i.request.id),{error:r})})}),we(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===zc.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=zc.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),we(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),we(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Th("wc_sessionPropose",ri($n({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),we(this,"isValidConnect",async n=>{if(!$i(n)){const{message:l}=Te("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Is(r)||await this.isValidPairingTopic(r),!dLe(c)){const{message:l}=Te("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Is(s)&&Xh(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Is(i)&&Xh(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Is(o)||this.validateSessionProps(o,"sessionProperties"),!Is(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),we(this,"validateNamespaces",(n,r)=>{const s=uLe(n,"connect()",r);if(s)throw new Error(s.message)}),we(this,"isValidApprove",async n=>{if(!$i(n))throw new Error(Te("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=nO(s,"approve()");if(l)throw new Error(l.message);const u=wj(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!kr(i,!0)){const{message:d}=Te("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Is(o)||this.validateSessionProps(o,"sessionProperties"),!Is(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),we(this,"isValidReject",async n=>{if(!$i(n)){const{message:i}=Te("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!fLe(s)){const{message:i}=Te("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),we(this,"isValidSessionSettleRequest",n=>{if(!$i(n)){const{message:l}=Te("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!GZ(r)){const{message:l}=Te("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=sLe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=nO(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Gd(o)){const{message:l}=Te("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),we(this,"isValidUpdate",async n=>{if(!$i(n)){const{message:c}=Te("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=nO(s,"update()");if(o)throw new Error(o.message);const a=wj(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),we(this,"isValidExtend",async n=>{if(!$i(n)){const{message:s}=Te("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),we(this,"isValidRequest",async n=>{if(!$i(n)){const{message:c}=Te("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!yj(a,i)){const{message:c}=Te("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!pLe(s)){const{message:c}=Te("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!yLe(a,i,s.method)){const{message:c}=Te("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!ELe(o,lO)){const{message:c}=Te("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${lO.min} and ${lO.max}`);throw new Error(c)}}),we(this,"isValidRespond",async n=>{var r;if(!$i(n)){const{message:o}=Te("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!gLe(i)){const{message:o}=Te("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),we(this,"isValidPing",async n=>{if(!$i(n)){const{message:s}=Te("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidEmit",async n=>{if(!$i(n)){const{message:a}=Te("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!yj(o,i)){const{message:a}=Te("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!mLe(s)){const{message:a}=Te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!wLe(o,i,s.name)){const{message:a}=Te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),we(this,"isValidDisconnect",async n=>{if(!$i(n)){const{message:s}=Te("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!kr(s,!1))throw new Error("uri is required parameter");if(!kr(i,!1))throw new Error("domain is required parameter");if(!kr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>zy(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=zy(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),we(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||nE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Jn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),we(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Te("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),we(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),we(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),we(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Te("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),we(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Jn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),we(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),we(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=kF(n,"topic")||"",s=decodeURIComponent(kF(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Jn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),we(this,"registerLinkModeListeners",async()=>{var n;if(oU()||If()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),we(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(Vj).includes(s.method)}),we(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return ri($n({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),we(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),we(this,"extractTxHashesFromResult",(n,r)=>{try{const s=Vj[n];if(typeof r=="string")return[r];const i=r[s.key];if(Zh(i))return n==="solana_signAllTransactions"?i.map(o=>jDe(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(cs.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(pS)?this.client.auth.authKeys.get(pS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Jn.link_mode?Qd:bc});iU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:hl(r)})):QN(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(ia.expired,async e=>{const{topic:n,id:r}=uZ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Te("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Te("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Xf.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Xf.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!kr(e,!1)){const{message:n}=Te("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Gd(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Te("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!kr(e,!1)){const{message:n}=Te("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Gd(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Te("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Te("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(kr(e,!1)){const{message:n}=Te("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Te("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!hLe(e)){const{message:n}=Te("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Gd(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Te("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class NBe extends cm{constructor(e,n){super(e,n,hBe,pU),this.core=e,this.logger=n}}let TBe=class extends cm{constructor(e,n){super(e,n,fBe,pU),this.core=e,this.logger=n}};class RBe extends cm{constructor(e,n){super(e,n,gBe,pU,r=>r.id),this.core=e,this.logger=n}}class PBe extends cm{constructor(e,n){super(e,n,bBe,aT,()=>pS),this.core=e,this.logger=n}}class OBe extends cm{constructor(e,n){super(e,n,vBe,aT),this.core=e,this.logger=n}}class kBe extends cm{constructor(e,n){super(e,n,EBe,aT,r=>r.id),this.core=e,this.logger=n}}var DBe=Object.defineProperty,LBe=(t,e,n)=>e in t?DBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uO=(t,e,n)=>LBe(t,typeof e!="symbol"?e+"":e,n);class MBe{constructor(e,n){this.core=e,this.logger=n,uO(this,"authKeys"),uO(this,"pairingTopics"),uO(this,"requests"),this.authKeys=new PBe(this.core,this.logger),this.pairingTopics=new OBe(this.core,this.logger),this.requests=new kBe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var UBe=Object.defineProperty,$Be=(t,e,n)=>e in t?UBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yt=(t,e,n)=>$Be(t,typeof e!="symbol"?e+"":e,n);let BBe=class dX extends J2e{constructor(e){super(e),Yt(this,"protocol",cX),Yt(this,"version",lX),Yt(this,"name",cO.name),Yt(this,"metadata"),Yt(this,"core"),Yt(this,"logger"),Yt(this,"events",new ka.EventEmitter),Yt(this,"engine"),Yt(this,"session"),Yt(this,"proposal"),Yt(this,"pendingRequest"),Yt(this,"auth"),Yt(this,"signConfig"),Yt(this,"on",(r,s)=>this.events.on(r,s)),Yt(this,"once",(r,s)=>this.events.once(r,s)),Yt(this,"off",(r,s)=>this.events.off(r,s)),Yt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Yt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Yt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Yt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Yt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Yt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||cO.name,this.metadata=eDe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:WC(om({level:(e==null?void 0:e.logger)||cO.logger}));this.core=(e==null?void 0:e.core)||new dBe(e),this.logger=Ls(n,this.name),this.session=new TBe(this.core,this.logger),this.proposal=new NBe(this.core,this.logger),this.pendingRequest=new RBe(this.core,this.logger),this.engine=new xBe(this),this.auth=new MBe(this.core,this.logger)}static async init(e){const n=new dX(e);return await n.initialize(),n}get context(){return ho(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},xe.toMiliseconds(xe.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const Yj="error",FBe="wss://relay.walletconnect.org",jBe="wc",zBe="universal_provider",wA=`${jBe}@2:${zBe}:`,hX="https://rpc.walletconnect.org/v1/",ty="generic",WBe=`${hX}bundler`,La={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function HBe(){}function gU(t){return t==null||typeof t!="object"&&typeof t!="function"}function mU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function GBe(t){if(gU(t))return t;if(Array.isArray(t)||mU(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Qj(t){return typeof t=="object"&&t!==null}function fX(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function pX(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const qBe="[object RegExp]",gX="[object String]",mX="[object Number]",yX="[object Boolean]",wX="[object Arguments]",VBe="[object Symbol]",KBe="[object Date]",YBe="[object Map]",QBe="[object Set]",JBe="[object Array]",ZBe="[object ArrayBuffer]",XBe="[object Object]",e6e="[object DataView]",t6e="[object Uint8Array]",n6e="[object Uint8ClampedArray]",r6e="[object Uint16Array]",s6e="[object Uint32Array]",i6e="[object Int8Array]",o6e="[object Int16Array]",a6e="[object Int32Array]",c6e="[object Float32Array]",l6e="[object Float64Array]";function u6e(t,e){return Cy(t,void 0,t,new Map,e)}function Cy(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(gU(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Cy(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Cy(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Cy(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(mU(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Cy(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),ep(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),ep(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),ep(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ep(o,t,n,r,s),o}if(typeof t=="object"&&d6e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),ep(o,t,n,r,s),o}return t}function ep(t,e,n=t,r,s){const i=[...Object.keys(e),...fX(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Cy(e[a],a,n,r,s))}}function d6e(t){switch(pX(t)){case wX:case JBe:case ZBe:case e6e:case yX:case KBe:case c6e:case l6e:case i6e:case o6e:case a6e:case YBe:case mX:case XBe:case qBe:case QBe:case gX:case VBe:case t6e:case n6e:case r6e:case s6e:return!0;default:return!1}}function h6e(t,e){return u6e(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case mX:case gX:case yX:{const o=new t.constructor(t==null?void 0:t.valueOf());return ep(o,t),o}case wX:{const o={};return ep(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Jj(t){return h6e(t)}function Zj(t){return t!==null&&typeof t=="object"&&pX(t)==="[object Arguments]"}function f6e(t){return mU(t)}function p6e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function g6e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=b3(s,o,r,new Map)}return s}function b3(t,e,n,r){if(gU(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return GBe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...fX(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(Zj(a)&&(a={...a}),Zj(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Jj(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||Qj(c)&&Qj(a)?t[o]=b3(c,a,n,r):c==null&&p6e(a)?t[o]=b3({},a,n,r):c==null&&f6e(a)?t[o]=Jj(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function m6e(t,...e){return g6e(t,...e,HBe)}var y6e=Object.defineProperty,w6e=Object.defineProperties,b6e=Object.getOwnPropertyDescriptors,Xj=Object.getOwnPropertySymbols,v6e=Object.prototype.hasOwnProperty,E6e=Object.prototype.propertyIsEnumerable,e9=(t,e,n)=>e in t?y6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bA=(t,e)=>{for(var n in e||(e={}))v6e.call(e,n)&&e9(t,n,e[n]);if(Xj)for(var n of Xj(e))E6e.call(e,n)&&e9(t,n,e[n]);return t},_6e=(t,e)=>w6e(t,b6e(e));function jo(t,e,n){var r;const s=zy(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${hX}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function lm(t){return t.includes(":")?t.split(":")[1]:t}function bX(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function C6e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function vA(t={},e={}){const n=t9(t),r=t9(e);return m6e(n,r)}function t9(t){var e,n,r,s,i;const o={};if(!Xh(t))return o;for(const[a,c]of Object.entries(t)){const l=iT(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=_y(a);o[f]=_6e(bA(bA({},o[f]),c),{chains:Tl(l,(e=o[f])==null?void 0:e.chains),methods:Tl(u,(n=o[f])==null?void 0:n.methods),events:Tl(d,(r=o[f])==null?void 0:r.events)}),(Xh(h)||Xh(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=bA(bA({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function n9(t){return t.includes(":")?t.split(":")[2]:t}function r9(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=iT(n)?[n]:r.chains?r.chains:bX(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function dO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const vX={},fn=t=>vX[t],hO=(t,e)=>{vX[t]=e};var A6e=Object.defineProperty,S6e=(t,e,n)=>e in t?A6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mm=(t,e,n)=>S6e(t,typeof e!="symbol"?e+"":e,n);class I6e{constructor(e){Mm(this,"name","polkadot"),Mm(this,"client"),Mm(this,"httpProviders"),Mm(this,"events"),Mm(this,"namespace"),Mm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=lm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var x6e=Object.defineProperty,N6e=Object.defineProperties,T6e=Object.getOwnPropertyDescriptors,s9=Object.getOwnPropertySymbols,R6e=Object.prototype.hasOwnProperty,P6e=Object.prototype.propertyIsEnumerable,v3=(t,e,n)=>e in t?x6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,i9=(t,e)=>{for(var n in e||(e={}))R6e.call(e,n)&&v3(t,n,e[n]);if(s9)for(var n of s9(e))P6e.call(e,n)&&v3(t,n,e[n]);return t},o9=(t,e)=>N6e(t,T6e(e)),Um=(t,e,n)=>v3(t,typeof e!="symbol"?e+"":e,n);class O6e{constructor(e){Um(this,"name","eip155"),Um(this,"client"),Um(this,"chainId"),Um(this,"namespace"),Um(this,"httpProviders"),Um(this,"events"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||jo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(lm(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:o9(i9({},u.sessionProperties||{}),{capabilities:o9(i9({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Th("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${WBe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var k6e=Object.defineProperty,D6e=(t,e,n)=>e in t?k6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$m=(t,e,n)=>D6e(t,typeof e!="symbol"?e+"":e,n);class L6e{constructor(e){$m(this,"name","solana"),$m(this,"client"),$m(this,"httpProviders"),$m(this,"events"),$m(this,"namespace"),$m(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=lm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var M6e=Object.defineProperty,U6e=(t,e,n)=>e in t?M6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bm=(t,e,n)=>U6e(t,typeof e!="symbol"?e+"":e,n);class $6e{constructor(e){Bm(this,"name","cosmos"),Bm(this,"client"),Bm(this,"httpProviders"),Bm(this,"events"),Bm(this,"namespace"),Bm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=lm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var B6e=Object.defineProperty,F6e=(t,e,n)=>e in t?B6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fm=(t,e,n)=>F6e(t,typeof e!="symbol"?e+"":e,n);class j6e{constructor(e){Fm(this,"name","algorand"),Fm(this,"client"),Fm(this,"httpProviders"),Fm(this,"events"),Fm(this,"namespace"),Fm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||jo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||jo(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Da(new Oc(r,fn("disableProviderPing")))}}var z6e=Object.defineProperty,W6e=(t,e,n)=>e in t?z6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jm=(t,e,n)=>W6e(t,typeof e!="symbol"?e+"":e,n);class H6e{constructor(e){jm(this,"name","cip34"),jm(this,"client"),jm(this,"httpProviders"),jm(this,"events"),jm(this,"namespace"),jm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=lm(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var G6e=Object.defineProperty,q6e=(t,e,n)=>e in t?G6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zm=(t,e,n)=>q6e(t,typeof e!="symbol"?e+"":e,n);class V6e{constructor(e){zm(this,"name","elrond"),zm(this,"client"),zm(this,"httpProviders"),zm(this,"events"),zm(this,"namespace"),zm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=lm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var K6e=Object.defineProperty,Y6e=(t,e,n)=>e in t?K6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wm=(t,e,n)=>Y6e(t,typeof e!="symbol"?e+"":e,n);class Q6e{constructor(e){Wm(this,"name","multiversx"),Wm(this,"client"),Wm(this,"httpProviders"),Wm(this,"events"),Wm(this,"namespace"),Wm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=lm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var J6e=Object.defineProperty,Z6e=(t,e,n)=>e in t?J6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hm=(t,e,n)=>Z6e(t,typeof e!="symbol"?e+"":e,n);class X6e{constructor(e){Hm(this,"name","near"),Hm(this,"client"),Hm(this,"httpProviders"),Hm(this,"events"),Hm(this,"namespace"),Hm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||jo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||jo(e,this.namespace);return typeof r>"u"?void 0:new Da(new Oc(r,fn("disableProviderPing")))}}var e8e=Object.defineProperty,t8e=(t,e,n)=>e in t?e8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gm=(t,e,n)=>t8e(t,typeof e!="symbol"?e+"":e,n);class n8e{constructor(e){Gm(this,"name","tezos"),Gm(this,"client"),Gm(this,"httpProviders"),Gm(this,"events"),Gm(this,"namespace"),Gm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||jo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||jo(e,this.namespace);return typeof r>"u"?void 0:new Da(new Oc(r))}}var r8e=Object.defineProperty,s8e=(t,e,n)=>e in t?r8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qm=(t,e,n)=>s8e(t,typeof e!="symbol"?e+"":e,n);class i8e{constructor(e){qm(this,"name",ty),qm(this,"client"),qm(this,"httpProviders"),qm(this,"events"),qm(this,"namespace"),qm(this,"chainId"),this.namespace=e.namespace,this.events=fn("events"),this.client=fn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=zy(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Da(new Oc(r,fn("disableProviderPing")))}}var o8e=Object.defineProperty,a8e=Object.defineProperties,c8e=Object.getOwnPropertyDescriptors,a9=Object.getOwnPropertySymbols,l8e=Object.prototype.hasOwnProperty,u8e=Object.prototype.propertyIsEnumerable,E3=(t,e,n)=>e in t?o8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,EA=(t,e)=>{for(var n in e||(e={}))l8e.call(e,n)&&E3(t,n,e[n]);if(a9)for(var n of a9(e))u8e.call(e,n)&&E3(t,n,e[n]);return t},fO=(t,e)=>a8e(t,c8e(e)),ea=(t,e,n)=>E3(t,typeof e!="symbol"?e+"":e,n);let d8e=class EX{constructor(e){ea(this,"client"),ea(this,"namespaces"),ea(this,"optionalNamespaces"),ea(this,"sessionProperties"),ea(this,"scopedProperties"),ea(this,"events",new VM),ea(this,"rpcProviders",{}),ea(this,"session"),ea(this,"providerOpts"),ea(this,"logger"),ea(this,"uri"),ea(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:WC(om({level:(e==null?void 0:e.logger)||Yj})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new EX(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:EA({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,KN(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Rn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=r9(this.session.namespaces);this.namespaces=vA(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=r9(s.namespaces);return this.namespaces=vA(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===ty?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Zh(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await BBe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Yj,relayUrl:this.providerOpts.relayUrl||FBe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>_y(n)))];hO("client",this.client),hO("events",this.events),hO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=C6e(n,this.session),s=bX(r),i=vA(this.namespaces,this.optionalNamespaces),o=fO(EA({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new O6e({namespace:o});break;case"algorand":this.rpcProviders[n]=new j6e({namespace:o});break;case"solana":this.rpcProviders[n]=new L6e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new $6e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new I6e({namespace:o});break;case"cip34":this.rpcProviders[n]=new H6e({namespace:o});break;case"elrond":this.rpcProviders[n]=new V6e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new Q6e({namespace:o});break;case"near":this.rpcProviders[n]=new X6e({namespace:o});break;case"tezos":this.rpcProviders[n]=new n8e({namespace:o});break;default:this.rpcProviders[ty]?this.rpcProviders[ty].updateNamespace(o):this.rpcProviders[ty]=new i8e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Zh(o)&&this.events.emit("accountsChanged",o.map(n9))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=_y(o),l=dO(o)!==dO(a)?`${c}:${dO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=fO(EA({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",fO(EA({},Rn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(La.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[ty]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=vA(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>_y(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=_y(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(n9);if(!Zh(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${wA}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${wA}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${wA}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(wA)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var c9={};const h8e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof c9<"u"?c9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},_3={filterOutDuplicatesByRDNS(t){const e=ve.state.enableEIP6963?je.state.connectors:[],n=Qe.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ot.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=je.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Qe.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=je.state,{featuredWalletIds:n}=ve.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ve.state.features)==null?void 0:c.connectMethodsOrder),r=e||je.state.connectors;if(n)return n;const{injected:s,announced:i}=gS.getConnectorsByType(r,at.state.recommended,at.state.featured),o=s.filter(gS.showConnector),a=i.filter(gS.showConnector);return o.length||a.length?["wallet","email","social"]:h8e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&at.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&at.state.excludedWallets.some(r=>JN.isLowerCaseMatch(r.name,t.name));return e||n}},gS={getConnectorsByType(t,e,n){const{customWallets:r}=ve.state,s=Qe.getRecentWallets(),i=_3.filterOutDuplicateWallets(e),o=_3.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&at.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&at.state.excludedWallets.some(i=>JN.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ot.isMobile()||ot.isMobile()&&!e&&!gt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(z.state.chains.values()).some(n=>je.getConnectorId(n.namespace)===ze.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ve.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=gS.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ve.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),p=new Set(f.map(m=>m.type)),g=c.filter(m=>p.has(m)).map(m=>({type:m,isEnabled:!0})),y=f.filter(({type:m})=>!g.some(({type:v})=>v===m));return Array.from(new Set([...g,...y].map(({type:m})=>m)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const mS=globalThis,yU=mS.ShadowRoot&&(mS.ShadyCSS===void 0||mS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,wU=Symbol(),l9=new WeakMap;let _X=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==wU)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(yU&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=l9.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&l9.set(n,e))}return e}toString(){return this.cssText}};const ra=t=>new _X(typeof t=="string"?t:t+"",void 0,wU),Gu=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new _X(n,t,wU)},f8e=(t,e)=>{if(yU)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=mS.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},u9=yU?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return ra(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:p8e,defineProperty:g8e,getOwnPropertyDescriptor:m8e,getOwnPropertyNames:y8e,getOwnPropertySymbols:w8e,getPrototypeOf:b8e}=Object,ef=globalThis,d9=ef.trustedTypes,v8e=d9?d9.emptyScript:"",pO=ef.reactiveElementPolyfillSupport,sE=(t,e)=>t,C3={toAttribute(t,e){switch(e){case Boolean:t=t?v8e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},CX=(t,e)=>!p8e(t,e),h9={attribute:!0,type:String,converter:C3,reflect:!1,useDefault:!1,hasChanged:CX};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),ef.litPropertyMetadata??(ef.litPropertyMetadata=new WeakMap);let ny=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=h9){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&g8e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=m8e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??h9}static _$Ei(){if(this.hasOwnProperty(sE("elementProperties")))return;const e=b8e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(sE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(sE("properties"))){const n=this.properties,r=[...y8e(n),...w8e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(u9(s))}else e!==void 0&&n.push(u9(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return f8e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:C3).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:C3;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??CX)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};ny.elementStyles=[],ny.shadowRootOptions={mode:"open"},ny[sE("elementProperties")]=new Map,ny[sE("finalized")]=new Map,pO==null||pO({ReactiveElement:ny}),(ef.reactiveElementVersions??(ef.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const iE=globalThis,tx=iE.trustedTypes,f9=tx?tx.createPolicy("lit-html",{createHTML:t=>t}):void 0,AX="$lit$",Jd=`lit$${Math.random().toFixed(9).slice(2)}$`,SX="?"+Jd,E8e=`<${SX}>`,Ug=document,O_=()=>Ug.createComment(""),k_=t=>t===null||typeof t!="object"&&typeof t!="function",bU=Array.isArray,_8e=t=>bU(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",gO=`[ 	
\f\r]`,Xb=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,p9=/-->/g,g9=/>/g,Lf=RegExp(`>|${gO}(?:([^\\s"'>=/]+)(${gO}*=${gO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),m9=/'/g,y9=/"/g,IX=/^(?:script|style|textarea|title)$/i,xX=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),rVe=xX(1),sVe=xX(2),I0=Symbol.for("lit-noChange"),ls=Symbol.for("lit-nothing"),w9=new WeakMap,bp=Ug.createTreeWalker(Ug,129);function NX(t,e){if(!bU(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return f9!==void 0?f9.createHTML(e):e}const C8e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Xb;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Xb?u[1]==="!--"?o=p9:u[1]!==void 0?o=g9:u[2]!==void 0?(IX.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Lf):u[3]!==void 0&&(o=Lf):o===Lf?u[0]===">"?(o=s??Xb,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Lf:u[3]==='"'?y9:m9):o===y9||o===m9?o=Lf:o===p9||o===g9?o=Xb:(o=Lf,s=void 0);const f=o===Lf&&t[a+1].startsWith("/>")?" ":"";i+=o===Xb?c+E8e:d>=0?(r.push(l),c.slice(0,d)+AX+c.slice(d)+Jd+f):c+Jd+(d===-2?a:f)}return[NX(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class D_{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=C8e(e,n);if(this.el=D_.createElement(l,r),bp.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=bp.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(AX)){const h=u[o++],f=s.getAttribute(d).split(Jd),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?S8e:p[1]==="?"?I8e:p[1]==="@"?x8e:cT}),s.removeAttribute(d)}else d.startsWith(Jd)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(IX.test(s.tagName)){const d=s.textContent.split(Jd),h=d.length-1;if(h>0){s.textContent=tx?tx.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],O_()),bp.nextNode(),c.push({type:2,index:++i});s.append(d[h],O_())}}}else if(s.nodeType===8)if(s.data===SX)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Jd,d+1))!==-1;)c.push({type:7,index:i}),d+=Jd.length-1}i++}}static createElement(e,n){const r=Ug.createElement("template");return r.innerHTML=e,r}}function x0(t,e,n=t,r){var o,a;if(e===I0)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=k_(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=x0(t,s._$AS(t,e.values),s,r)),e}class A8e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Ug).importNode(n,!0);bp.currentNode=s;let i=bp.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new t1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new N8e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=bp.nextNode(),o++)}return bp.currentNode=Ug,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class t1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=ls,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=x0(this,e,n),k_(e)?e===ls||e==null||e===""?(this._$AH!==ls&&this._$AR(),this._$AH=ls):e!==this._$AH&&e!==I0&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):_8e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ls&&k_(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ug.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=D_.createElement(NX(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new A8e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=w9.get(e.strings);return n===void 0&&w9.set(e.strings,n=new D_(e)),n}k(e){bU(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new t1(this.O(O_()),this.O(O_()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class cT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=ls,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ls}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=x0(this,e,n,0),o=!k_(e)||e!==this._$AH&&e!==I0,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=x0(this,a[r+c],n,c),l===I0&&(l=this._$AH[c]),o||(o=!k_(l)||l!==this._$AH[c]),l===ls?e=ls:e!==ls&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===ls?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class S8e extends cT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ls?void 0:e}}class I8e extends cT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ls)}}class x8e extends cT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=x0(this,e,n,0)??ls)===I0)return;const r=this._$AH,s=e===ls&&r!==ls||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==ls&&(r===ls||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class N8e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){x0(this,e)}}const mO=iE.litHtmlPolyfillSupport;mO==null||mO(D_,t1),(iE.litHtmlVersions??(iE.litHtmlVersions=[])).push("3.3.1");const T8e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new t1(e.insertBefore(O_(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sg=globalThis;let yS=class extends ny{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=T8e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return I0}};var wz;yS._$litElement$=!0,yS.finalized=!0,(wz=sg.litElementHydrateSupport)==null||wz.call(sg,{LitElement:yS});const yO=sg.litElementPolyfillSupport;yO==null||yO({LitElement:yS});(sg.litElementVersions??(sg.litElementVersions=[])).push("4.2.1");let oE,tf,nf;function oVe(t,e){oE=document.createElement("style"),tf=document.createElement("style"),nf=document.createElement("style"),oE.textContent=Wy(t).core.cssText,tf.textContent=Wy(t).dark.cssText,nf.textContent=Wy(t).light.cssText,document.head.appendChild(oE),document.head.appendChild(tf),document.head.appendChild(nf),TX(e)}function TX(t){tf&&nf&&(t==="light"?(tf.removeAttribute("media"),nf.media="enabled"):(nf.removeAttribute("media"),tf.media="enabled"))}function R8e(t){oE&&tf&&nf&&(oE.textContent=Wy(t).core.cssText,tf.textContent=Wy(t).dark.cssText,nf.textContent=Wy(t).light.cssText)}function Wy(t){return{core:Gu`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ra(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ra((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ra((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${ra((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${ra((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Gu`
      :root {
        --w3m-color-mix: ${ra((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${ra(Uu(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ra(Uu(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Gu`
      :root {
        --w3m-color-mix: ${ra((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${ra(Uu(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ra(Uu(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const aVe=Gu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,cVe=Gu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,lVe=Gu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,wv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},RX=Kpe({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function n1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const b9=n1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),v9=n1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});n1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});n1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});n1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const P8e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},wS={getMethodsByChainNamespace(t){return P8e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case b9.caipNetworkId:u.chains.push(b9.deprecatedCaipNetworkId);break;case v9.caipNetworkId:u.chains.push(v9.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await Jv.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let PX=class{constructor({provider:e,namespace:n}){this.id=ze.CONNECTOR_ID.WALLET_CONNECT,this.name=BI.ConnectorNamesMap[ze.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=BI.ConnectorImageIds[ze.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=z.getCaipNetworks.bind(z),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ve.state.universalProviderConfigOverride,s=wS.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return eE.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:O8e})}};const O8e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let k8e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>z.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ze.CONNECTOR_ID.AUTH,type:"AUTH",name:ze.CONNECTOR_NAMES.AUTH,provider:e,imageId:BI.ConnectorImageIds[ze.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ye.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ye.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof PX);if(!e)throw new Error("WalletConnectConnector not found");return e}};class D8e extends k8e{setUniversalProvider(e){this.addConnector(new PX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ot.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Pn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ye.state.balanceLoading&&e.chainId===((c=z.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ye.state.balance||"0.00",symbol:Ye.state.balanceSymbol||""};const s=(await Ye.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ze.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:IJ.encode(new TextEncoder().encode(r)),pubkey:s}},(a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=z.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ze.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Ia(n.id)}]}))}catch(u){if(u.code===wv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===wv.ERROR_INVALID_CHAIN_ID||u.code===wv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===wv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Ia(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const L8e=["email","socials","swaps","onramp","activity","reownBranding"],_A={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Pn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Pn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Pn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Pn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},M8e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=_A[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=_A[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return _A[t].processApi(e)},processFallbackFeature(t,e){return _A[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await at.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Pn.DEFAULT_REMOTE_FEATURES:Pn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of L8e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Pn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;wl.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class U8e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=z.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=z.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=z.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return z.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>z.getCaipNetworks(n),this.getActiveChainNamespace=()=>z.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{z.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>z.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>z.state.activeChain===n||!n?z.state.activeCaipAddress:z.getAccountProp("caipAddress",n),this.setClientId=n=>{pt.setClientId(n)},this.getProvider=n=>Tn.getProvider(n),this.getProviderType=n=>Tn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ye.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ye.setCaipAddress(n,r),n&&ve.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ye.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ye.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ye.setProfileImage(n,r)},this.setUser=(n,r)=>{Ye.setUser(n,r)},this.resetAccount=n=>{Ye.resetAccount(n)},this.setCaipNetwork=n=>{z.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{z.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ye.setAllAccounts(n,r),ve.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ye.setStatus(n,r),je.isConnected()?Qe.setConnectionStatus("connected"):Qe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>z.getAccountProp("address",n),this.setConnectors=n=>{const r=[...je.state.allConnectors,...n];je.setConnectors(r)},this.setConnections=(n,r)=>{gt.setConnections(n,r)},this.fetchIdentity=n=>pt.fetchIdentity(n),this.getReownName=n=>Jv.getNamesForAddress(n),this.getConnectors=()=>je.getConnectors(),this.getConnectorImage=n=>PQ.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Tn.getProviderId(r),i=n?{...n,type:s}:void 0;Ye.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!z.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ye.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ye.removeAddressLabel(n,r)},this.getAddress=n=>z.state.activeChain===n||!n?Ye.state.address:z.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>z.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{z.resetNetwork(n)},this.addConnector=n=>{je.addConnector(n)},this.resetWcConnection=()=>{gt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ye.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ye.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{z.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ye.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ve.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await M8e.fetchRemoteFeatures(e),ve.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&xD.setOnrampProviders(this.remoteFeatures.onramp),((n=ve.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ve.state.remoteFeatures)==null?void 0:r.socials)&&((s=ve.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await at.fetchAllowedOrigins();if(e&&ot.isClient()){const n=window.location.origin;wS.isOriginAllowed(n,e,wv.DEFAULT_ALLOWED_ANCESTORS)||wl.open(dl.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else wl.open(dl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,or.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Hi.setThemeMode(e.themeMode),e.themeVariables&&Hi.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");z.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&z.setActiveCaipNetwork(n)}initializeConnectionController(e){gt.setWcBasic(e.basic??!1)}initializeConnectorController(){je.initialize(this.chainNamespaces)}initializeProjectSettings(e){ve.setProjectId(e.projectId),ve.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ve.setDebug(e.debug!==!1),ve.setEnableWalletConnect(e.enableWalletConnect!==!1),ve.setEnableWalletGuide(e.enableWalletGuide!==!1),ve.setEnableWallets(e.enableWallets!==!1),ve.setEIP6963Enabled(e.enableEIP6963!==!1),ve.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ve.setEnableAuthLogger(e.enableAuthLogger!==!1),ve.setCustomRpcUrls(e.customRpcUrls),ve.setEnableEmbedded(e.enableEmbedded),ve.setAllWallets(e.allWallets),ve.setIncludeWalletIds(e.includeWalletIds),ve.setExcludeWalletIds(e.excludeWalletIds),ve.setFeaturedWalletIds(e.featuredWalletIds),ve.setTokens(e.tokens),ve.setTermsConditionsUrl(e.termsConditionsUrl),ve.setPrivacyPolicyUrl(e.privacyPolicyUrl),ve.setCustomWallets(e.customWallets),ve.setFeatures(e.features),ve.setAllowUnsupportedChain(e.allowUnsupportedChain),ve.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ve.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ve.setDefaultAccountTypes(e.defaultAccountTypes);const n=Qe.getPreferredAccountTypes()||{},r={...ve.state.defaultAccountTypes,...n};Ye.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ve.setMetadata(e.metadata),ve.setDisableAppend(e.disableAppend),ve.setEnableEmbedded(e.enableEmbedded),ve.setSIWX(e.siwx),!e.projectId){wl.open(dl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ze.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ve.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ot.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Xm.getUnsupportedNetwork(`${n}:${e}`);z.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Xm.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Xm.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Xm.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Xm.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Tn.getProvider(e),s=Tn.getProviderId(e),{caipAddress:i}=z.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Qe.removeConnectedNamespace(e),Tn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),je.removeConnectorId(e),z.resetAccount(e),z.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=z.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Qe.setConnectedNamespaces([...z.state.chains.keys()]),this.chainNamespaces.forEach(o=>{je.setConnectorId(Gi.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,y,m,w,v,A;const c=z.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(S=>S.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((m=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:m[0])||((A=(v=(w=d==null?void 0:d.rpcUrls)==null?void 0:w.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Qe.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ye.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=z.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Qe.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=URe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));mn.resetSend(),gt.resetWcConnection(),await eE.clearSessions(),je.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Qe.deleteConnectedSocialProvider(),or.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(z.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ye.state.address,provider:Tn.getProvider(z.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Pn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(z.state.activeChain),s=Tn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ze.CHAIN.EVM){const n=this.getAdapter(z.state.activeChain),r=Tn.getProvider(z.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ye.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:z.state.activeChain}),Ye.state.profileImage||!1},getEnsAddress:async e=>await wS.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(z.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Tn.getProvider(z.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ye.state.address||this.updateNativeBalance(Ye.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},gt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Tn.getProviderId(z.state.activeChain)===Gi.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Tn.getProvider(n),i=Tn.getProviderId(n);if(e.chainNamespace===z.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Gi.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Cd.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new D8e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Qe.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Qe.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=z.state.activeChain===e,c=z.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ye.state.address,i=z.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=z.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=z.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=z.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ze.CHAIN.EVM&&ot.isSafeApp()&&je.setConnectorId(ze.CONNECTOR_ID.SAFE,e);const n=je.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ze.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ze.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=je.getConnectorId(e),s=this.getCaipNetwork(e),o=je.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([ot.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=z.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=Cd.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=Cd.validateCaipAddress(o),{chainId:f,address:p}=Cd.parseCaipAddress(h);if(Tn.setProviderId(n,Gi.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&z.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==ze.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:z.state.activeCaipNetwork});Tn.setProvider(n,g)}else Tn.setProvider(n,this.universalProvider);je.setConnectorId(ze.CONNECTOR_ID.WALLET_CONNECT,n),Qe.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await z.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Cd.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>ot.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Tn.setProviderId(s,e),Tn.setProvider(s,n),je.setConnectorId(r,s)}async syncAllAccounts(e){const n=je.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===z.state.activeChain,r=z.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Qe.getActiveNetworkProps(),c=i||a,l=((d=z.state.activeCaipNetwork)==null?void 0:d.name)===ze.UNSUPPORTED_NETWORK_NAME,u=z.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],m=y.find(v=>{var A;return((A=Cd.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),w=y.find(v=>{var A;return((A=Cd.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===m),p=this.getCaipNetworks().find(v=>v.caipNetworkId===w||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===w)}const g=f||p;(g==null?void 0:g.chainNamespace)===z.state.activeChain?ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&((h=z.state.activeCaipNetwork)==null?void 0:h.name)===ze.UNSUPPORTED_NETWORK_NAME?z.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),JN.isLowerCaseMatch(s,Ye.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=je.getConnectorId(e),r=Tn.getProviderId(e);if(r===Gi.CONNECTOR_TYPE_ANNOUNCED||r===Gi.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Gi.CONNECTOR_TYPE_WALLET_CONNECT){const i=Tn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ze.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ze.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!xQ.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=z.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=FRe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ve.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await d8e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{gt.setUri(e)}),this.universalProvider.on("connect",gt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),gt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(wS.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&ot.isCaipAddress(r[0])&&this.syncAccount(Cd.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ot.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){or.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(dl.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=dl.ALERT_ERRORS[o];a&&(wl.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&gt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return us.open({...e,data:{swap:e.arguments}})}return us.open(e)}async close(){await this.injectModalUi(),us.close()}setLoading(e,n){us.setLoading(e,n)}async disconnect(e){await gt.disconnect(e)}getSIWX(){return ve.state.siwx}getError(){return""}getChainId(){var e;return(e=z.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){wl.open(dl.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await z.switchActiveNetwork(n)}getWalletProvider(){return z.state.activeChain?Tn.state.providers[z.state.activeChain]:null}getWalletProviderType(){return Tn.getProviderId(z.state.activeChain)}subscribeProviders(e){return Tn.subscribeProviders(e)}getThemeMode(){return Hi.state.themeMode}getThemeVariables(){return Hi.state.themeVariables}setThemeMode(e){Hi.setThemeMode(e),TX(Hi.state.themeMode)}setTermsConditionsUrl(e){ve.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ve.setPrivacyPolicyUrl(e)}setThemeVariables(e){Hi.setThemeVariables(e),R8e(Hi.state.themeVariables)}subscribeTheme(e){return Hi.subscribe(e)}getWalletInfo(){return Ye.state.connectedWalletInfo}getAccount(e){var o;const n=je.getAuthConnector(e),r=z.getAccountData(e),s=z.state.activeChain,i=Qe.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:ot.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ze.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Qe.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?z.subscribeChainProp("accountState",r,n):z.subscribe(r),je.subscribe(r)}subscribeNetwork(e){return z.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Ye.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ye.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){z.subscribeKey("activeCaipNetwork",e)}getState(){return xl.state}subscribeState(e){return xl.subscribe(e)}showErrorMessage(e){pc.showError(e)}showSuccessMessage(e){pc.showSuccess(e)}getEvent(){return{...or.state}}subscribeEvents(e){return or.subscribe(e)}replace(e){Mt.replace(e)}redirect(e){Mt.push(e)}popTransactionStack(e){Mt.popTransactionStack(e)}isOpen(){return us.state.open}isTransactionStackEmpty(){return Mt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ve.setFeatures(e)}updateRemoteFeatures(e){ve.setRemoteFeatures(e)}updateOptions(e){const r={...ve.state||{},...e};ve.setOptions(r)}setConnectMethodsOrder(e){ve.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ve.setWalletFeaturesOrder(e)}setCollapseWallets(e){ve.setCollapseWallets(e)}setSocialsOrder(e){ve.setSocialsOrder(e)}getConnectMethodsOrder(){return _3.getConnectOrderMethod(ve.state.features,je.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||z.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&z.removeNetwork(e,n)}}let E9=!1;class $8e extends U8e{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Oo.checkIfRequestExists(n)?Oo.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ps.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Ps.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Oo.checkIfRequestIsSafe(r),i=Ye.state.address,o=z.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=z.state.activeChain;je.getConnectorId(n)===ze.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=z.state.activeChain,s=r===ze.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ve.state.defaultAccountTypes[r],o=(l=Ye.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;JN.isLowerCaseMatch(n.address,Ye.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ye.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>ot.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[ot.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ye.state.user||{},username:n},z.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,z.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,z.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Ye.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Hi.getSnapshot(),l=ve.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Uu(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:ze.CONNECTOR_ID.AUTH,info:{name:ze.CONNECTOR_ID.AUTH},type:Gi.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=z.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):je.getConnectorId(n)===ze.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Qe.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ot.isTelegram())return;const r=Qe.getTelegramSocialProvider();if(!r||!ot.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ye.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=je.getAuthConnector();r&&o&&(this.setLoading(!0,e),await gt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Qe.setConnectedSocialProvider(r),Qe.removeTelegramSocialProvider(),or.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=c2e.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:dl.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?wl.open(dl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?wl.open(dl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&wl.open(dl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),xl.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&at.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=z.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Tn.getProvider(r),u=Tn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Tn.getProviderId(n)===Gi.CONNECTOR_TYPE_AUTH,u=Tn.getProviderId(r),d=u===Gi.CONNECTOR_TYPE_AUTH,h=ze.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(z.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ze.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Gi.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Gi.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),xl.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ze.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Tn.getProviderId(e);if(n===Gi.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Qe.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ot.isClient()&&!E9)try{const e={...Pn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ot.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ve.state.disableAppend&&!ve.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}E9=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ot.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Ks(()=>import("./embedded-wallet-CjV8Ytjg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(Ks(()=>import("./email-CO3zVOx-.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(Ks(()=>import("./socials-BwsxQ3eD.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(Ks(()=>import("./swaps-CVVMp0P-.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(Ks(()=>import("./send-DtPYvXLs.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(Ks(()=>import("./receive-lgI95kTQ.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(Ks(()=>import("./onramp-D1PlR3_Z.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(Ks(()=>import("./transactions-CITcWOMI.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(Ks(()=>import("./index-DT67Hgi9.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,Ks(()=>import("./index-B89xne8U.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),Ks(()=>import("./w3m-modal-DgufLofD.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Bd;function B8e(t){t&&(Bd=t)}function lT(){if(!Bd)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Bd==null?void 0:Bd.open(n))}async function e(){await(Bd==null?void 0:Bd.close())}return{open:t,close:e}}const F8e="1.7.8";let CA;function j8e(t){return CA||(CA=new $8e({...t,sdkVersion:ot.generateSdkVersion(t.adapters??[],"react",F8e)}),B8e(CA)),CA}const z8e=Pc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),_9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],W8e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=z8e({isOpen:t}),{open:i}=lT(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,y]=D.useState(1),[m,w]=D.useState(1),[v,A]=D.useState(0),[C,S]=D.useState(null),[x,T]=D.useState(_9[0]),[I,k]=D.useState(!1),[O,B]=D.useState(null),G=D.useCallback(async()=>{var L,j;try{if((L=window.solana)!=null&&L.isPhantom){const q=await window.solana.connect();B(q.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const q=await window.solflare.connect();B(q.publicKey.toString());return}i()}catch(q){console.error("Failed to connect Solana wallet:",q),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}k(!1)},[i]);D.useEffect(()=>{var L,j;(L=window.solana)!=null&&L.publicKey?B(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&B(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let q,ne=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!O){k(!0),u(!1);return}ne=O||void 0,q=await IQ(x.slug,50),console.log("Fetched Solana NFTs from collection:",q.data.length),f==="owned"&&O&&(console.log("Filtering for owner:",O),console.log("Sample NFT owner data:",(j=q.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",q.data.map(oe=>({name:oe.name,owners:oe.owners,owner_of:oe.owner_of}))),q.data.some(oe=>oe.owners&&oe.owners.length>0)?(q.data=q.data.filter(oe=>{const se=oe.owners.some(ye=>ye.owner_of&&ye.owner_of.toLowerCase()===O.toLowerCase());return se&&console.log("Found owned NFT:",oe.name),se}),console.log("NFTs after filtering:",q.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?q=await GM(x.slug,50,ne):q=await HM(x.slug,g,50,ne);c(q.data),w(q.totalPages),A(q.totalCount)}catch(q){q instanceof Error?h(q.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,O]),D.useEffect(()=>{I&&G()},[I,G]);const W=L=>new Date(L).toLocaleDateString(),R=L=>x.api==="opensea-solana"&&(!L.owners||L.owners.length===0)?"Owner data unavailable":L.owners.length>0?`${L.owners[0].owner_of.substring(0,6)}...`:"N/A",N=()=>{n&&n()},M=async L=>{if(x.api==="opensea"&&x.chain)try{const j=await SQ(x.chain,L.address,L.token_id.toString()),q={...L,attributes:JSON.stringify(j.traits||[])};S(q)}catch(j){console.error("Failed to fetch full NFT details",j),S(L)}else S(L)},P=L=>{T(L),y(1)};return t?b.jsxs(b.Fragment,{children:[b.jsx(BC,{nodeRef:o,handle:`.${s.header}`,children:b.jsxs("div",{ref:o,className:s.popup,children:[b.jsxs("div",{className:s.header,children:[b.jsx("span",{children:"LAWB NFT GALLERY"}),b.jsxs("div",{className:s.titleBarButtons,children:[b.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),b.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),b.jsx("div",{className:s.collectionSelector,children:_9.map(L=>b.jsx("button",{className:`${s.collectionButton} ${x.slug===L.slug?"active":""}`,onClick:()=>P(L),children:L.name},L.slug))}),b.jsxs("div",{className:s.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),b.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!O,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||O?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||O?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{G()},style:{background:O?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:O?"white":"black",marginLeft:"auto"},children:O?`Solana: ${O.slice(0,4)}...${O.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!O&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?b.jsx("div",{children:"Loading NFTs..."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?b.jsx("div",{children:"No NFTs found."}):b.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(L=>b.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{M(L)},children:[b.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${L.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),b.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:b.jsxs("strong",{children:["#",L.token_id]})}),b.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",R(L)]}),b.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",W(L.created_at)]})]},L.id))}),f!=="recent"&&m>1&&b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[b.jsx("button",{onClick:()=>y(L=>Math.max(1,L-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),b.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",m]}),b.jsx("button",{onClick:()=>y(L=>Math.min(m,L+1)),disabled:g===m,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===m?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&b.jsx(s1e,{nft:C,onClose:()=>S(null)})]}):null};var AA,H8e=new Uint8Array(16);function G8e(){if(!AA&&(AA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!AA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return AA(H8e)}const q8e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function V8e(t){return typeof t=="string"&&q8e.test(t)}var Es=[];for(var wO=0;wO<256;++wO)Es.push((wO+256).toString(16).substr(1));function K8e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Es[t[e+0]]+Es[t[e+1]]+Es[t[e+2]]+Es[t[e+3]]+"-"+Es[t[e+4]]+Es[t[e+5]]+"-"+Es[t[e+6]]+Es[t[e+7]]+"-"+Es[t[e+8]]+Es[t[e+9]]+"-"+Es[t[e+10]]+Es[t[e+11]]+Es[t[e+12]]+Es[t[e+13]]+Es[t[e+14]]+Es[t[e+15]]).toLowerCase();if(!V8e(n))throw TypeError("Stringified UUID is invalid");return n}function Y8e(t,e,n){t=t||{};var r=t.random||(t.rng||G8e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,K8e(r)}const Q8e=Pc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),J8e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],Z8e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],go=500;function OX(){const t=Q8e(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(36),[u,d]=D.useState(36),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[y,m]=D.useState(!1),[w,v]=D.useState(!1),[A,C]=D.useState(!1),[S,x]=D.useState([]),[T,I]=D.useState(null),k=D.useRef(null),[O,B]=D.useState(null),G=async Z=>{const ae=Z.getContext("2d");if(!ae)return;ae.clearRect(0,0,Z.width,Z.height),n?await new Promise(de=>{const be=new window.Image;be.crossOrigin="anonymous",be.onload=()=>{const Je=Math.min(Z.width/be.width,Z.height/be.height),_e=(Z.width-be.width*Je)/2,Ae=(Z.height-be.height*Je)/2;ae.drawImage(be,_e,Ae,be.width*Je,be.height*Je),de()},be.onerror=()=>de(),be.src=n}):(ae.fillStyle="#333",ae.fillRect(0,0,Z.width,Z.height)),(de=>{de.textAlign="center",de.strokeStyle="black",de.lineWidth=3,de.fillStyle="white";const be=(Je,_e)=>{const Ae=Je.toUpperCase().split(" "),tt=[];let Se=Ae[0];for(let Gt=1;Gt<Ae.length;Gt++){const en=Ae[Gt];de.measureText(Se+" "+en).width<_e?Se+=" "+en:(tt.push(Se),Se=en)}return tt.push(Se),tt};s&&(de.font=`${c}px Impact`,be(s,go-20).forEach((_e,Ae)=>{const tt=c+Ae*c*1.2;de.strokeText(_e,go/2,tt),de.fillText(_e,go/2,tt)})),o&&(de.font=`${u}px Impact`,be(o,go-20).reverse().forEach((_e,Ae)=>{const tt=go-u*1.2*(Ae+1);de.strokeText(_e,go/2,tt),de.fillText(_e,go/2,tt)}))})(ae),await Promise.all(S.map(de=>new Promise(be=>{const Je=new window.Image;Je.src=de.src,Je.onload=()=>{ae.save(),ae.translate(de.x,de.y),ae.rotate(de.rotation*Math.PI/180),ae.scale(de.scale,de.scale),ae.drawImage(Je,-40,-40,80,80),ae.restore(),be()},Je.onerror=()=>be()})));try{h&&W(Z),p&&R(Z),y&&N(Z)}catch(de){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",de),f(!1),g(!1),m(!1)}},W=Z=>{const ae=Z.getContext("2d");if(!ae)return;const he=ae.getImageData(0,0,Z.width,Z.height),de=he.data;for(let be=0;be<de.length;be+=4){const Je=de[be],_e=de[be+1],Ae=de[be+2],tt=(Je+_e+Ae)/3,Se=1.8;de[be]=Math.min(255,tt+(Je-tt)*Se),de[be+1]=Math.min(255,tt+(_e-tt)*Se*.7),de[be+2]=Math.min(255,tt+(Ae-tt)*Se*.4);const Gt=1.3;de[be]=Math.min(255,Math.max(0,de[be]*Gt)),de[be+1]=Math.min(255,Math.max(0,de[be+1]*Gt)),de[be+2]=Math.min(255,Math.max(0,de[be+2]*Gt))}ae.putImageData(he,0,0)},R=Z=>{const ae=Z.getContext("2d");if(!ae)return;const he=4,be=ae.getImageData(0,0,Z.width,Z.height).data,Je=new Uint8ClampedArray(be);for(let _e=0;_e<Z.height;_e+=he)for(let Ae=0;Ae<Z.width;Ae+=he){const tt=(_e*Z.width+Ae)*4,Se=be[tt],Gt=be[tt+1],en=be[tt+2],Me=be[tt+3];for(let kt=0;kt<he&&_e+kt<Z.height;kt++)for(let nr=0;nr<he&&Ae+nr<Z.width;nr++){const Dn=((_e+kt)*Z.width+(Ae+nr))*4;Je[Dn]=Se,Je[Dn+1]=Gt,Je[Dn+2]=en,Je[Dn+3]=Me}}ae.putImageData(new ImageData(Je,Z.width,Z.height),0,0)},N=Z=>{const ae=Z.getContext("2d");if(!ae)return;const he=ae.getImageData(0,0,Z.width,Z.height),de=he.data;for(let be=0;be<de.length;be+=4){const Je=(Math.random()-.5)*50;de[be]=Math.max(0,Math.min(255,de[be]+Je)),de[be+1]=Math.max(0,Math.min(255,de[be+1]+Je)),de[be+2]=Math.max(0,Math.min(255,de[be+2]+Je))}ae.putImageData(he,0,0)};D.useEffect(()=>{e.current&&G(e.current)},[G]);const M=Z=>{var he;const ae=(he=Z.target.files)==null?void 0:he[0];ae&&r(URL.createObjectURL(ae))},P=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),m(!1)},L=async()=>{const Z=e.current;if(!Z)return;await G(Z);const ae=document.createElement("a");ae.download="meme.png",ae.href=Z.toDataURL("image/png"),document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)},j=async Z=>{C(!0),v(!1);try{console.log("Fetching NFTs for collection:",Z);let ae;if(Z.api==="opensea"){console.log("Using OpenSea API for:",Z.slug);const he=await GM(Z.slug,50);ae=he.data,console.log("OpenSea response:",he)}else if(Z.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",Z.slug);const he=await IQ(Z.slug,50);ae=he.data,console.log("OpenSea Solana response:",he)}else{console.log("Using Scatter API for:",Z.slug);const he=await HM(Z.slug,1,50);ae=he.data,console.log("Scatter response:",he)}if(ae&&ae.length>0){const he=ae[Math.floor(Math.random()*ae.length)],de=he.image||he.image_url||he.image_url_shrunk;console.log("Selected NFT:",he),console.log("Image URL:",de),r(de)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ae){console.error("Error fetching NFTs:",ae),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},q=Z=>{const ae={id:Y8e(),src:Z,x:80,y:80,scale:1,rotation:0};x(he=>he.length>=2||he.some(de=>de.src===Z&&!de.id.startsWith("upload-"))?he:[...he,ae]),B(ae.id)},ne=Z=>{var he;const ae=(he=Z.target.files)==null?void 0:he[0];if(ae){const de=URL.createObjectURL(ae);q(de)}},le=(Z,ae,he)=>{x(de=>de.map(be=>{if(be.id!==Z)return be;let Je=be.x+ae/1.2,_e=be.y+he/1.2;const Ae=40*be.scale,tt=40*be.scale;return Je=Math.max(Ae,Math.min(go-Ae,Je)),_e=Math.max(tt,Math.min(go-tt,_e)),{...be,x:Je,y:_e}}))},oe=(Z,ae,he,de,be)=>{x(Je=>Je.map(_e=>{if(_e.id!==Z)return _e;const Ae=_e.x,tt=_e.y,Se=Math.atan2(be-tt,de-Ae)*180/Math.PI;return{..._e,rotation:he+(Se-ae)*.5}}))},se=Z=>{x(ae=>ae.filter(he=>he.id!==Z))},ye=(Z,ae)=>{x(he=>he.map(de=>de.id===Z?{...de,scale:Math.max(.2,de.scale*(1+(ae-1)*.2))}:de))};return b.jsxs("div",{className:t.container,children:[b.jsxs("div",{className:t.header,children:[b.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),b.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",b.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),b.jsxs("div",{className:t.content,children:[b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Collections"}),b.jsxs("div",{className:t.row,children:[b.jsxs("div",{className:t.dropdown,children:[b.jsx("button",{className:t.button,onClick:()=>v(Z=>!Z),children:"Collections"}),w&&b.jsx("div",{className:t.dropdownContent,children:J8e.map(Z=>b.jsx("div",{className:t.dropdownItem,onClick:()=>{j(Z)},children:Z.name},Z.id))})]}),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:M})]}),A&&b.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Text"}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Top Text:"}),b.jsx("input",{className:t.input,type:"text",value:s,onChange:Z=>i(Z.target.value),placeholder:"Enter top text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:Z=>l(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]}),b.jsxs("div",{className:t.row,children:[b.jsx("span",{className:t.label,children:"Bottom Text:"}),b.jsx("input",{className:t.input,type:"text",value:o,onChange:Z=>a(Z.target.value),placeholder:"Enter bottom text..."}),b.jsx("span",{className:t.label,children:"Size:"}),b.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:Z=>d(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Effects"}),b.jsxs("div",{className:t.row,children:[b.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(Z=>!Z),children:"Deep Fry"}),b.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(Z=>!Z),children:"Pixelate"}),b.jsx("button",{className:t.effectButton,style:{background:y?"#00ffff":void 0},onClick:()=>m(Z=>!Z),children:"Grain"})]})]}),b.jsxs("div",{className:t.section,children:[b.jsx("div",{className:t.sectionTitle,children:"Stickers"}),b.jsxs("div",{className:t.row,children:[Z8e.map((Z,ae)=>b.jsx("img",{src:Z,alt:`sticker${ae+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>q(Z)},Z)),b.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",b.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:k,onChange:ne})]})]})]}),b.jsxs("div",{className:t.actions,children:[b.jsx("button",{className:t.button,onClick:L,children:"Save Image"}),b.jsx("button",{className:t.button,onClick:P,children:"Restart"})]})]}),b.jsx("div",{className:t.memeArea,children:b.jsx("canvas",{ref:e,width:go,height:go,className:t.canvas})}),b.jsx("div",{style:{position:"absolute",left:0,top:0,width:go,height:go,pointerEvents:"none"},children:S.map(Z=>O===Z.id?b.jsxs("div",{style:{position:"absolute",left:Z.x,top:Z.y,width:80*Z.scale,height:80*Z.scale,transform:`rotate(${Z.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ae=>{I(Z.id),ae.stopPropagation()},onMouseUp:()=>I(null),onMouseMove:ae=>{T===Z.id&&ae.buttons===1&&le(Z.id,ae.movementX,ae.movementY)},children:[b.jsx("img",{src:Z.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),b.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ae=>{var Se;ae.stopPropagation();const he=(Se=ae.currentTarget.parentElement)==null?void 0:Se.getBoundingClientRect(),de=he?he.left+he.width/2:0,be=he?he.top+he.height/2:0,Je=Math.atan2(ae.clientY-be,ae.clientX-de)*180/Math.PI,_e=Z.rotation,Ae=Gt=>{oe(Z.id,Je,_e,Gt.clientX,Gt.clientY)},tt=()=>{window.removeEventListener("mousemove",Ae),window.removeEventListener("mouseup",tt)};window.addEventListener("mousemove",Ae),window.addEventListener("mouseup",tt)}}),b.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ae=>{ae.stopPropagation();const he=ae.clientX,de=Je=>{const _e=(Je.clientX-he)/80;ye(Z.id,1+_e)},be=()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",be)};window.addEventListener("mousemove",de),window.addEventListener("mouseup",be)}}),b.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>se(Z.id),children:"×"}),b.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>B(null),children:"Place"})]},Z.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function L_(){return L_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L_.apply(this,arguments)}var Ph;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ph||(Ph={}));const C9="popstate";function X8e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return A3("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:DX(s)}return t4e(e,n,null,t)}function Qr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kX(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function e4e(){return Math.random().toString(36).substr(2,8)}function A9(t,e){return{usr:t.state,key:t.key,idx:e}}function A3(t,e,n,r){return n===void 0&&(n=null),L_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?hb(e):e,{state:n,key:e&&e.key||r||e4e()})}function DX(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function hb(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function t4e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ph.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(L_({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Ph.Pop;let y=u(),m=y==null?null:y-l;l=y,c&&c({action:a,location:g.location,delta:m})}function h(y,m){a=Ph.Push;let w=A3(g.location,y,m);l=u()+1;let v=A9(w,l),A=g.createHref(w);try{o.pushState(v,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(y,m){a=Ph.Replace;let w=A3(g.location,y,m);l=u();let v=A9(w,l),A=g.createHref(w);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(y){let m=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof y=="string"?y:DX(y);return w=w.replace(/ $/,"%20"),Qr(m,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,m)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(C9,d),c=y,()=>{s.removeEventListener(C9,d),c=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let m=p(y);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(y){return o.go(y)}};return g}var S9;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(S9||(S9={}));function n4e(t,e,n){return n===void 0&&(n="/"),r4e(t,e,n)}function r4e(t,e,n,r){let s=typeof e=="string"?hb(e):e,i=UX(s.pathname||"/",n);if(i==null)return null;let o=LX(t);s4e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=m4e(i);a=f4e(o[c],l)}return a}function LX(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Qr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=ig([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Qr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),LX(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:d4e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of MX(i.path))s(i,o,c)}),e}function MX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=MX(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function s4e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:h4e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const i4e=/^:[\w-]+$/,o4e=3,a4e=2,c4e=1,l4e=10,u4e=-2,I9=t=>t==="*";function d4e(t,e){let n=t.split("/"),r=n.length;return n.some(I9)&&(r+=u4e),e&&(r+=a4e),n.filter(s=>!I9(s)).reduce((s,i)=>s+(i4e.test(i)?o4e:i===""?c4e:l4e),r)}function h4e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function f4e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=p4e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:ig([i,d.pathname]),pathnameBase:_4e(ig([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=ig([i,d.pathnameBase]))}return o}function p4e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=g4e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function g4e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),kX(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function m4e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kX(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function UX(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function y4e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?hb(t):t;return{pathname:n?n.startsWith("/")?n:w4e(n,e):e,search:C4e(r),hash:A4e(s)}}function w4e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function bO(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function b4e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function v4e(t,e){let n=b4e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function E4e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=hb(t):(s=L_({},t),Qr(!s.pathname||!s.pathname.includes("?"),bO("?","pathname","search",s)),Qr(!s.pathname||!s.pathname.includes("#"),bO("#","pathname","hash",s)),Qr(!s.search||!s.search.includes("#"),bO("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=y4e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const ig=t=>t.join("/").replace(/\/\/+/g,"/"),_4e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),C4e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,A4e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function S4e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $X=["post","put","patch","delete"];new Set($X);const I4e=["get",...$X];new Set(I4e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M_(){return M_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M_.apply(this,arguments)}const vU=D.createContext(null),x4e=D.createContext(null),uT=D.createContext(null),dT=D.createContext(null),fb=D.createContext({outlet:null,matches:[],isDataRoute:!1}),BX=D.createContext(null);function hT(){return D.useContext(dT)!=null}function FX(){return hT()||Qr(!1),D.useContext(dT).location}function jX(t){D.useContext(uT).static||D.useLayoutEffect(t)}function N4e(){let{isDataRoute:t}=D.useContext(fb);return t?j4e():T4e()}function T4e(){hT()||Qr(!1);let t=D.useContext(vU),{basename:e,future:n,navigator:r}=D.useContext(uT),{matches:s}=D.useContext(fb),{pathname:i}=FX(),o=JSON.stringify(v4e(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return jX(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=E4e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ig([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function R4e(t,e){return P4e(t,e)}function P4e(t,e,n,r){hT()||Qr(!1);let{navigator:s}=D.useContext(uT),{matches:i}=D.useContext(fb),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=FX(),u;if(e){var d;let y=typeof e=="string"?hb(e):e;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||Qr(!1),u=y}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=n4e(t,{pathname:f}),g=M4e(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:ig([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:ig([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?D.createElement(dT.Provider,{value:{location:M_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ph.Pop}},g):g}function O4e(){let t=F4e(),e=S4e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const k4e=D.createElement(O4e,null);class D4e extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(fb.Provider,{value:this.props.routeContext},D.createElement(BX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function L4e(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(vU);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(fb.Provider,{value:e},r)}function M4e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Qr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,y=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||k4e,c&&(l<0&&h===0?(z4e("route-fallback"),p=!0,y=null):l===h&&(p=!0,y=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),w=()=>{let v;return f?v=g:p?v=y:d.route.Component?v=D.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,D.createElement(L4e,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(D4e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:w(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):w()},null)}var zX=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(zX||{}),WX=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(WX||{});function U4e(t){let e=D.useContext(vU);return e||Qr(!1),e}function $4e(t){let e=D.useContext(x4e);return e||Qr(!1),e}function B4e(t){let e=D.useContext(fb);return e||Qr(!1),e}function HX(t){let e=B4e(),n=e.matches[e.matches.length-1];return n.route.id||Qr(!1),n.route.id}function F4e(){var t;let e=D.useContext(BX),n=$4e(),r=HX();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function j4e(){let{router:t}=U4e(zX.UseNavigateStable),e=HX(WX.UseNavigateStable),n=D.useRef(!1);return jX(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,M_({fromRouteId:e},i)))},[t,e])}const x9={};function z4e(t,e,n){x9[t]||(x9[t]=!0)}function W4e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function bS(t){Qr(!1)}function H4e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ph.Pop,navigator:i,static:o=!1,future:a}=t;hT()&&Qr(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:M_({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=hb(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let y=UX(u,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(uT.Provider,{value:l},D.createElement(dT.Provider,{children:n,value:g}))}function G4e(t){let{children:e,location:n}=t;return R4e(S3(e),n)}new Promise(()=>{});function S3(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,S3(r.props.children,i));return}r.type!==bS&&Qr(!1),!r.props.index||!r.props.children||Qr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=S3(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const q4e="6";try{window.__reactRouterVersion=q4e}catch{}const V4e="startTransition",N9=Nne[V4e];function K4e(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=X8e({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&N9?N9(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>W4e(r),[r]),D.createElement(H4e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var T9;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(T9||(T9={}));var R9;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(R9||(R9={}));const Y4e=Pc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function Q4e(){const t=Y4e(),{open:e}=lT(),{address:n,isConnected:r}=UC(),{isPending:s}=bY(),{disconnect:i}=vY(),{data:o}=EY({address:n}),[a,c]=D.useState("pixelawbs-popup"),[l,u]=D.useState(new Set),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[m,w]=D.useState(!1),v=N4e(),A=D.useRef(null);D.useEffect(()=>{if(a==="halloween-popup"&&A.current){const N=A.current.querySelector("script[data-tiktok-embed]");N&&N.remove();const M=document.createElement("script");M.src="https://www.tiktok.com/embed.js",M.async=!0,M.setAttribute("data-tiktok-embed","true"),A.current.appendChild(M)}},[a]);const C=(N,M,P)=>{if(N==="url"&&P)window.open(P,"_blank");else if(N==="popup"&&M)c(M),u(L=>{const j=new Set(L);return j.delete(M),j}),document.body.offsetWidth;else if(N==="wallet")r?i():e();else if(N==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else N==="nft-gallery"?p(!0):N==="meme-generator"?y(!0):N==="chess"&&(r?(w(!0),setTimeout(()=>{w(!1),v("/chess")},1500)):e().then(()=>{const L=()=>{window.ethereum&&window.ethereum.selectedAddress?(w(!0),setTimeout(()=>{w(!1),v("/chess")},1500)):setTimeout(L,200)};L()}))},S=()=>c(null),x=N=>{u(M=>new Set(M).add(N)),c(null)},T=N=>{N==="mint-popup"?h(!0):N==="nft-gallery-popup"?p(!0):N==="meme-generator-popup"?y(!0):c(N),u(M=>{const P=new Set(M);return P.delete(N),P})},I=()=>h(!1),k=()=>p(!1),O=()=>y(!1),B=()=>{h(!1),u(N=>new Set(N).add("mint-popup"))},G=()=>{p(!1),u(N=>new Set(N).add("nft-gallery-popup"))},W=()=>{y(!1),u(N=>new Set(N).add("meme-generator-popup"))},R=b.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return b.jsxs("div",{className:t.body,children:[m&&b.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[b.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),b.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),b.jsx(QCe,{onIconClick:C}),b.jsx(ZCe,{minimizedWindows:Array.from(l),onRestoreWindow:T,walletButton:R,connectionStatus:{connected:r,address:n,ens:o||void 0}}),b.jsxs(sa,{id:"chat-popup",isOpen:a==="chat-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",b.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),b.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(sa,{id:"purity-popup",isOpen:a==="purity-popup",onClose:S,onMinimize:x,children:[b.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),b.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),b.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),b.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(sa,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[b.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",b.jsx("br",{}),b.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",b.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",b.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),b.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(sa,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(sa,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsxs(sa,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:S,onMinimize:x,children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx(bve,{id:"1620879129850834944"})}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsx(sa,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:S,onMinimize:x,children:(()=>{const N=M=>{M.preventDefault(),c(null),h(!0)};return b.jsxs(b.Fragment,{children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:N,children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),b.jsxs(sa,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:S,onMinimize:x,children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),b.jsx("div",{ref:A,style:{maxWidth:"400px",margin:"0 auto"},children:b.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:b.jsxs("section",{children:[b.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",b.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),b.jsxs(sa,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:S,onMinimize:x,children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),b.jsx(t1e,{isOpen:d,onClose:I,onMinimize:B,walletAddress:n||""}),b.jsx(W8e,{isOpen:f,onClose:k,onMinimize:G,walletAddress:n}),b.jsx(sa,{id:"meme-generator-popup",isOpen:g,onClose:O,onMinimize:W,children:b.jsx(OX,{})})]})}const J4e=Pc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),P9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Z4e=({onBack:t,walletAddress:e})=>{const n=J4e(),{open:r}=lT(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(P9[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[y,m]=D.useState("all"),[w,v]=D.useState(null),A=D.useCallback(async()=>{var T,I;try{if((T=window.solana)!=null&&T.isPhantom){const k=await window.solana.connect();g(k.publicKey.toString());return}if((I=window.solflare)!=null&&I.isSolflare){const k=await window.solflare.connect();g(k.publicKey.toString());return}r()}catch(k){console.error("Failed to connect Solana wallet:",k),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var T,I;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(I=window.solflare)!=null&&I.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let I,k=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}k=p,I=await XCe(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",I.data.length)}else u.api==="opensea"?I=await GM(u.slug,100,k):I=await HM(u.slug,1,100,k);y==="owned"&&p&&(console.log("Filtering for owner:",p),I.data.some(B=>B.owners&&B.owners.length>0)?I.data=I.data.filter(B=>B.owners.some(W=>W.owner_of&&W.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(I.data)}catch(I){console.error(I)}finally{a(!1)}})()},[e,u,p,y]),D.useEffect(()=>{h&&A()},[h,A]);const C=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const I=await SQ(u.chain,T.address,T.token_id.toString()),k={...T,attributes:JSON.stringify(I.traits||[])};l(k)}catch(I){console.error("Failed to fetch full NFT details",I),l(T)}else l(T);a(!1)},S=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(I){console.error("Failed to parse NFT attributes:",I)}return b.jsxs("div",{className:n.detailView,children:[b.jsx("img",{src:c.image,alt:c.name}),b.jsx("h2",{children:c.name}),b.jsx("h4",{children:"Traits:"}),b.jsx("ul",{children:T.map((I,k)=>b.jsxs("li",{children:[b.jsxs("strong",{children:[I.trait_type,":"]})," ",I.value]},k))})]})},x=()=>b.jsxs(b.Fragment,{children:[b.jsx("div",{className:n.collectionSelector,children:P9.map(T=>b.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),b.jsxs("div",{className:n.content,children:[b.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[b.jsx("button",{onClick:()=>m("all"),style:{background:y==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:y==="all"?"white":"black"},children:"All NFTs"}),b.jsx("button",{onClick:()=>m("owned"),disabled:!e&&!p,style:{background:y==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:y==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&b.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),w&&b.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:w}),u.api==="opensea-solana"&&!p&&b.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?b.jsx("div",{className:n.loading,children:"Loading NFTs..."}):b.jsx("div",{className:n.grid,children:s.map(T=>{let I=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return b.jsxs("div",{className:n.gridItem,onClick:()=>void C(T),children:[b.jsx("img",{src:I,alt:T.name,onError:k=>{k.currentTarget.src!==T.image_url&&T.image_url?k.currentTarget.src=T.image_url:k.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?k.currentTarget.src=T.image_url_shrunk:k.currentTarget.src="/assets/pixelawb.png"}}),b.jsx("span",{children:T.name})]},T.id)})})]})]});return b.jsxs("div",{className:n.galleryContainer,children:[b.jsxs("header",{className:n.header,children:[b.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),b.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),b.jsx("div",{className:n.content,children:o?b.jsx("p",{className:n.loading,children:"Loading..."}):c?S():x()})]})},X4e=Pc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Ka=({isOpen:t,onClose:e,title:n,children:r})=>{const s=X4e();return t?b.jsx("div",{className:s.overlay,children:b.jsxs("div",{className:s.popup,children:[b.jsxs("div",{className:s.titleBar,children:[b.jsx("span",{children:n}),b.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),b.jsx("div",{className:s.content,children:r})]})}):null},eFe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=_Y();D.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const A=await CQ(n);s(A);const C={};A.forEach(S=>{C[S.id]=0}),u(C)}catch(A){h(A.message)}finally{o(!1)}},g=(A,C)=>{u(S=>({...S,[A]:Math.max(0,C)}))},y=async()=>{const A=Object.entries(l).filter(([,C])=>C>0).map(([C,S])=>({id:C,quantity:S}));if(A.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await AQ(n,A);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const S=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${S}`),e()}catch(S){h("Transaction failed: "+S.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},m=(A,C)=>`${parseFloat(A)} ${C}`,w={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return b.jsxs(Ka,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&b.jsx("div",{style:v,children:d}),i?b.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?b.jsx("div",{children:"No eligible invite lists found for your wallet."}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{marginBottom:"20px"},children:[b.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(A=>b.jsxs("div",{style:w,children:[b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:A.name}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",m(A.token_price,A.currency_symbol)]}),b.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",A.wallet_limit===4294967295?"Unlimited":A.wallet_limit," per wallet"]}),b.jsx("input",{type:"number",min:0,max:A.wallet_limit===4294967295?void 0:A.wallet_limit,value:l[A.id]||"",onChange:C=>g(A.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),b.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},A.id))]}),b.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:y,disabled:a,children:a?"Minting...":"Mint"})]})]})},tFe=Pc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),nFe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],rFe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],sFe=()=>{const t=tFe(),{open:e}=lT(),{address:n,isConnected:r}=UC(),{isPending:s}=bY(),{disconnect:i}=vY(),{data:o}=EY({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,y]=D.useState(!1),[m,w]=D.useState(!1),[v,A]=D.useState(!1),[C,S]=D.useState(!1),[x,T]=D.useState(!1),[I,k]=D.useState(!1),[O,B]=D.useState(!1),[G,W]=D.useState(!1),[R,N]=D.useState(!1),[M,P]=D.useState(!1),[L,j]=D.useState(!1),q=[{label:"Mint",icon:"/assets/mint.gif",action:()=>y(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>w(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>S(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],ne=se=>{se.disabled||se.action()};if(D.useEffect(()=>{const se=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(se)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return b.jsx(Z4e,{onBack:()=>c("main"),walletAddress:n||void 0});function le({open:se,onClose:ye,title:Z,nfts:ae}){const he=de=>{switch(de){case"lawbsters":T(!0);break;case"lawbstarz":k(!0);break;case"pixelawbs":B(!0);break;case"halloween":W(!0);break;case"lawbstation":N(!0);break;case"nexus":P(!0);break}};return b.jsx(Ka,{isOpen:se,onClose:ye,title:Z,children:b.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:ae.map(de=>b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>he(de.id),children:[b.jsx("img",{src:de.image,alt:de.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),b.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:de.name}),b.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:de.description})]},de.id))})})}function oe({open:se,onClose:ye}){return se?b.jsxs(Ka,{isOpen:se,onClose:ye,title:"$LAWB",children:[b.jsx("h1",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),b.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",b.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),b.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),b.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",b.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),b.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",b.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),b.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),b.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),b.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:b.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return b.jsxs("div",{className:t.mobileContainer,children:[b.jsx("header",{className:t.header,children:b.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),b.jsx("div",{className:t.iconGrid,children:q.map(se=>b.jsxs("div",{className:t.icon,onClick:()=>ne(se),children:[b.jsx("img",{src:se.icon,alt:se.label}),b.jsx("span",{children:se.label})]},se.label))}),l&&b.jsxs(Ka,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&b.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:b.jsxs("div",{className:t.menuModal,onClick:se=>se.stopPropagation(),children:[b.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),b.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),b.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),b.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),b.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),b.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),b.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),b.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),b.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),b.jsx(eFe,{isOpen:g,onClose:()=>y(!1),walletAddress:n||""}),b.jsx(le,{open:m,onClose:()=>w(!1),title:"EVM NFT'S FOLDER",nfts:nFe}),b.jsx(le,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:rFe}),b.jsx(oe,{open:C,onClose:()=>S(!1)}),b.jsxs(Ka,{isOpen:x,onClose:()=>T(!1),title:"Lawbsters",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",b.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),b.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(Ka,{isOpen:I,onClose:()=>k(!1),title:"Lawbstarz",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",b.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",b.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",b.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",b.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),b.jsx("p",{children:"Chain: Ethereum"}),b.jsxs("p",{children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),b.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),b.jsxs(Ka,{isOpen:O,onClose:()=>B(!1),title:"Pixelawbs",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",b.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{B(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",b.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),b.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",b.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),b.jsxs(Ka,{isOpen:G,onClose:()=>W(!1),title:"A Lawbster Halloween",children:[b.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),b.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),b.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",b.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),b.jsxs(Ka,{isOpen:R,onClose:()=>N(!1),title:"Lawbstation",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",b.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),b.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),b.jsx("p",{style:{marginBottom:"10px"},children:b.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),b.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),b.jsxs(Ka,{isOpen:M,onClose:()=>P(!1),title:"Nexus",children:[b.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",b.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),b.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),b.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),b.jsx(Ka,{isOpen:L,onClose:()=>j(!1),title:"Meme Generator",children:b.jsx(OX,{})}),b.jsxs("div",{className:t.taskbar,children:[b.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),b.jsxs("div",{className:t.walletStatus,children:[b.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),b.jsx("span",{className:t.clock,children:d})]})]})};function iFe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const oFe=Symbol(),O9=Object.getPrototypeOf,I3=new WeakMap,aFe=t=>t&&(I3.has(t)?I3.get(t):O9(t)===Object.prototype||O9(t)===Array.prototype),cFe=t=>aFe(t)&&t[oFe]||null,k9=(t,e=!0)=>{I3.set(t,e)},nx={},EU=t=>typeof t=="object"&&t!==null,lFe=t=>EU(t)&&!r1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),GX=(t,e)=>{const n=x3.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return k9(r,!0),x3.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(r1.has(i))k9(i,!1);else if(mf.has(i)){const[c,l]=mf.get(i);a.value=GX(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},uFe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(D9(l,o)||U_.has(o)&&D9(l,U_.get(o))))return!0;n(i),EU(o)&&(o=cFe(o)||o);const u=!mf.has(o)&&hFe(o)?tr(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),mf=new WeakMap,r1=new WeakSet,x3=new WeakMap,bv=[1,1],U_=new WeakMap;let D9=Object.is,dFe=(t,e)=>new Proxy(t,e),hFe=lFe,fFe=GX,pFe=uFe;function tr(t={}){if(!EU(t))throw new Error("object required");const e=U_.get(t);if(e)return e;let n=bv[0];const r=new Set,s=(y,m=++bv[0])=>{n!==m&&(n=m,r.forEach(w=>w(y,m)))};let i=bv[1];const o=(y=++bv[1])=>(i!==y&&!r.size&&(i=y,c.forEach(([m])=>{const w=m[1](y);w>n&&(n=w)})),n),a=y=>(m,w)=>{const v=[...m];v[1]=[y,...v[1]],s(v,w)},c=new Map,l=(y,m)=>{const w=!r1.has(m)&&mf.get(m);if(w){if((nx?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(r.size){const v=w[2](a(y));c.set(y,[w,v])}else c.set(y,[w])}},u=y=>{var m;const w=c.get(y);w&&(c.delete(y),(m=w[1])==null||m.call(w))},d=y=>(r.add(y),r.size===1&&c.forEach(([w,v],A)=>{if((nx?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const C=w[2](a(A));c.set(A,[w,C])}),()=>{r.delete(y),r.size===0&&c.forEach(([w,v],A)=>{v&&(v(),c.set(A,[w]))})});let h=!0;const f=pFe(()=>h,l,u,s),p=dFe(t,f);U_.set(t,p);const g=[t,o,d];return mf.set(p,g),Reflect.ownKeys(t).forEach(y=>{const m=Object.getOwnPropertyDescriptor(t,y);"value"in m&&m.writable&&(p[y]=t[y])}),h=!1,p}function co(t,e,n){const r=mf.get(t);(nx?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function $_(t){const e=mf.get(t);(nx?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return fFe(n,r())}function N0(t){return r1.add(t),t}function gFe(){return{proxyStateMap:mf,refSet:r1,snapCache:x3,versionHolder:bv,proxyCache:U_}}function Si(t,e,n,r){let s=t[e];return co(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:mFe,snapCache:yFe}=gFe(),SA=t=>mFe.has(t);function wFe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=yFe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return SA(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!SA(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!SA(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!SA(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=tr(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var L9={};const pe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof L9<"u"?L9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},rx={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=pe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},bFe={bigNumber(t){return t?new yl(t):new yl(0)},multiply(t,e){if(t===void 0||e===void 0)return new yl(0);const n=new yl(t),r=new yl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},vFe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],EFe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],_Fe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],CFe={getERC20Abi:t=>pe.USDT_CONTRACT_ADDRESSES.includes(t)?_Fe:vFe,getSwapAbi:()=>EFe},Oh={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Ct={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function vO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const yt={setItem(t,e){vv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(vv())return localStorage.getItem(t)||void 0},removeItem(t){vv()&&localStorage.removeItem(t)},clear(){vv()&&localStorage.clear()}};function vv(){return typeof window<"u"&&typeof localStorage<"u"}function sx(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const gi={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[pe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},et={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=et.getActiveNamespace(),e=et.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{yt.setItem(Ct.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=yt.getItem(Ct.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{yt.removeItem(Ct.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{yt.setItem(Ct.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{yt.setItem(Ct.ACTIVE_CAIP_NETWORK_ID,t),et.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return yt.getItem(Ct.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{yt.removeItem(Ct.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=vO(t);yt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=et.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),yt.setItem(Ct.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=yt.getItem(Ct.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=vO(t);yt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return yt.getItem(Ct.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=vO(t);return yt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{yt.setItem(Ct.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return yt.getItem(Ct.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{yt.removeItem(Ct.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return yt.getItem(Ct.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=yt.getItem(Ct.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{yt.setItem(Ct.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return yt.getItem(Ct.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=yt.getItem(Ct.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));yt.setItem(Ct.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=et.getConnectedNamespaces();e.includes(t)||(e.push(t),et.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=et.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),et.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return yt.getItem(Ct.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{yt.setItem(Ct.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{yt.removeItem(Ct.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=yt.getItem(Ct.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=et.getBalanceCache();yt.setItem(Ct.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=et.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=et.getBalanceCache();e[t.caipAddress]=t,yt.setItem(Ct.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=yt.getItem(Ct.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=et.getBalanceCache();yt.setItem(Ct.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=et.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=et.getNativeBalanceCache();e[t.caipAddress]=t,yt.setItem(Ct.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=yt.getItem(Ct.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=et.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;et.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=et.getEnsCache();e[t.address]=t,yt.setItem(Ct.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=et.getEnsCache();yt.setItem(Ct.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=yt.getItem(Ct.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=et.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;et.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=et.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},yt.setItem(Ct.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=et.getIdentityCache();yt.setItem(Ct.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{yt.removeItem(Ct.PORTFOLIO_CACHE),yt.removeItem(Ct.NATIVE_BALANCE_CACHE),yt.removeItem(Ct.ENS_CACHE),yt.removeItem(Ct.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{yt.setItem(Ct.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=yt.getItem(Ct.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=et.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===pe.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};yt.setItem(Ct.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=yt.getItem(Ct.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=et.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),yt.setItem(Ct.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=yt.getItem(Ct.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),yt.setItem(Ct.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),yt.setItem(Ct.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(et.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},ut={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ut.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=gi.TEN_SEC_MS:!0},isAllowedRetry(t,e=gi.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ut.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+gi.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ut.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ut.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?et.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ut.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return pe.W3M_API_URL},getBlockchainApiUrl(){return pe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return pe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?gi.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in pe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function ev(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class s1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await ev(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await ev(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await ev(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await ev(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await ev(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const AFe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?gi.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ut.isTelegram()){if(ut.isIos())return t.filter(e=>e!=="google");if(ut.isMac())return t.filter(e=>e!=="x");if(ut.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ft=tr({features:gi.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:gi.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),It={state:ft,subscribeKey(t,e){return Si(ft,t,e)},setOptions(t){Object.assign(ft,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ft.remoteFeatures,...t};ft.remoteFeatures=e,(n=ft.remoteFeatures)!=null&&n.socials&&(ft.remoteFeatures.socials=AFe.filterSocialsByPlatform(ft.remoteFeatures.socials))},setFeatures(t){if(!t)return;ft.features||(ft.features=gi.DEFAULT_FEATURES);const e={...ft.features,...t};ft.features=e},setProjectId(t){ft.projectId=t},setCustomRpcUrls(t){ft.customRpcUrls=t},setAllWallets(t){ft.allWallets=t},setIncludeWalletIds(t){ft.includeWalletIds=t},setExcludeWalletIds(t){ft.excludeWalletIds=t},setFeaturedWalletIds(t){ft.featuredWalletIds=t},setTokens(t){ft.tokens=t},setTermsConditionsUrl(t){ft.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ft.privacyPolicyUrl=t},setCustomWallets(t){ft.customWallets=t},setIsSiweEnabled(t){ft.isSiweEnabled=t},setIsUniversalProvider(t){ft.isUniversalProvider=t},setSdkVersion(t){ft.sdkVersion=t},setMetadata(t){ft.metadata=t},setDisableAppend(t){ft.disableAppend=t},setEIP6963Enabled(t){ft.enableEIP6963=t},setDebug(t){ft.debug=t},setEnableWalletConnect(t){ft.enableWalletConnect=t},setEnableWalletGuide(t){ft.enableWalletGuide=t},setEnableAuthLogger(t){ft.enableAuthLogger=t},setEnableWallets(t){ft.enableWallets=t},setPreferUniversalLinks(t){ft.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(gi.SIWX_DEFAULTS))t[e]??(t[e]=n);ft.siwx=t},setConnectMethodsOrder(t){ft.features={...ft.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ft.features={...ft.features,walletFeaturesOrder:t}},setSocialsOrder(t){ft.remoteFeatures={...ft.remoteFeatures,socials:t}},setCollapseWallets(t){ft.features={...ft.features,collapseWallets:t}},setEnableEmbedded(t){ft.enableEmbedded=t},setAllowUnsupportedChain(t){ft.allowUnsupportedChain=t},setManualWCControl(t){ft.manualWCControl=t},setEnableNetworkSwitch(t){ft.enableNetworkSwitch=t},setEnableReconnect(t){ft.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ft.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ft.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ft.universalProviderConfigOverride},getSnapshot(){return $_(ft)}},SFe=Object.freeze({enabled:!0,events:[]}),IFe=new s1({baseUrl:ut.getAnalyticsUrl(),clientId:null}),xFe=5,NFe=60*1e3,Rd=tr({...SFe}),TFe={state:Rd,subscribeKey(t,e){return Si(Rd,t,e)},async sendError(t,e){if(!Rd.enabled)return;const n=Date.now();if(Rd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<NFe}).length>=xFe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Rd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=It.state;await IFe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ut.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Rd.enabled=!0},disable(){Rd.enabled=!1},clearEvents(){Rd.events=[]}};class T0 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,T0.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,T0):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function M9(t,e){const n=t instanceof T0?t:new T0(t instanceof Error?t.message:String(t),e,t);throw TFe.sendError(n,n.category),n}function Ma(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return M9(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return M9(a,e)}},n[r]=i}else n[r]=s}),n}var R0={};const RFe="https://secure.walletconnect.org/sdk",PFe=(typeof process<"u"&&typeof R0<"u"?R0.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||RFe,OFe=(typeof process<"u"&&typeof R0<"u"?R0.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",kFe=(typeof process<"u"&&typeof R0<"u"?R0.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ze={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Os={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},fl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},DFe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===fl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${fl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===fl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${fl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===pe.CHAIN.SOLANA&&t===fl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${fl.COINBASE.url}/dapp?cb_url=${r}`)}},mo=tr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),LFe={state:mo,subscribeNetworkImages(t){return co(mo.networkImages,()=>t(mo.networkImages))},subscribeKey(t,e){return Si(mo,t,e)},subscribe(t){return co(mo,()=>t(mo))},setWalletImage(t,e){mo.walletImages[t]=e},setNetworkImage(t,e){mo.networkImages[t]=e},setChainImage(t,e){mo.chainImages[t]=e},setConnectorImage(t,e){mo.connectorImages={...mo.connectorImages,[t]:e}},setTokenImage(t,e){mo.tokenImages[t]=e},setCurrencyImage(t,e){mo.currencyImages[t]=e}},uc=Ma(LFe),MFe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},EO=tr({networkImagePromises:{}}),UFe={async fetchWalletImage(t){if(t)return await wt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(EO.networkImagePromises[t]||(EO.networkImagePromises[t]=wt._fetchNetworkImage(t)),await EO.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return uc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return uc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return uc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return uc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return uc.state.connectorImages[t.imageId]},getChainImage(t){return uc.state.networkImages[MFe[t]]}},Pd=tr({message:"",variant:"info",open:!1}),$Fe={state:Pd,subscribeKey(t,e){return Si(Pd,t,e)},open(t,e){const{debug:n}=It.state,{shortMessage:r,longMessage:s}=t;n&&(Pd.message=r,Pd.variant=e,Pd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Pd.open=!1,Pd.message="",Pd.variant="info"}},Gf=Ma($Fe),BFe=ut.getAnalyticsUrl(),FFe=new s1({baseUrl:BFe,clientId:null}),jFe=["MODAL_CREATED"],iu=tr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),lr={state:iu,subscribe(t){return co(iu,()=>t(iu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=It.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=yn.state.address;if(jFe.includes(t.data.event)||typeof window>"u")return;await FFe.post({path:"/e",params:lr.getSdkProperties(),body:{eventId:ut.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),iu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===pe.HTTP_STATUS_CODES.FORBIDDEN&&!iu.reportedErrors.FORBIDDEN&&(Gf.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${vv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),iu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;iu.timestamp=Date.now(),iu.data=t,(e=It.state.features)!=null&&e.analytics&&lr._sendAnalyticsEvent(iu)}},zFe=ut.getApiUrl(),Di=new s1({baseUrl:zFe,clientId:null}),WFe=40,U9=4,HFe=20,Rt=tr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),wt={state:Rt,subscribeKey(t,e){return Si(Rt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=It.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return It.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Di.baseUrl}/getWalletImage/${t}`,n=await Di.getBlob({path:e,params:wt._getSdkProperties()});uc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Di.baseUrl}/public/getAssetImage/${t}`,n=await Di.getBlob({path:e,params:wt._getSdkProperties()});uc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Di.baseUrl}/public/getAssetImage/${t}`,n=await Di.getBlob({path:e,params:wt._getSdkProperties()});uc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Di.baseUrl}/public/getCurrencyImage/${t}`,n=await Di.getBlob({path:e,params:wt._getSdkProperties()});uc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Di.baseUrl}/public/getTokenImage/${t}`,n=await Di.getBlob({path:e,params:wt._getSdkProperties()});uc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ut.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===fl.COINBASE.id?!0:Y.state.activeChain==="solana"&&(n.id===fl.SOLFLARE.id||n.id===fl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Di.get({path:"/appkit/v1/config",params:wt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Di.get({path:"/projects/v1/origins",params:wt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===pe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=pe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=Y.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!UFe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>wt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=it.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>wt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>wt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>wt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];wt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(fl).map(o=>o.id));const r=await Di.get({path:"/getWallets",params:{...wt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:wt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=It.state;if(t!=null&&t.length){const e={...wt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??U9,include:t},{data:n}=await wt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>wt._fetchWalletImage(i))),Rt.featured=r,Rt.allFeatured=r}},async fetchRecommendedWallets(){try{Rt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=It.state,r=[...e??[],...n??[]].filter(Boolean),s=Y.getRequestedCaipNetworkIds().join(","),i={page:1,entries:U9,include:t,exclude:r,chains:s},{data:o,count:a}=await wt.fetchWallets(i),c=et.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>wt._fetchWalletImage(d))),Rt.recommended=o,Rt.allRecommended=o,Rt.count=a??0}catch{}finally{Rt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=It.state,s=Y.getRequestedCaipNetworkIds().join(","),i=[...Rt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:WFe,include:e,exclude:i,chains:s},{data:a,count:c}=await wt.fetchWallets(o),l=a.slice(0,HFe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>wt._fetchWalletImage(u))),Rt.wallets=ut.uniqueBy([...Rt.wallets,...wt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Rt.count=c>Rt.count?c:Rt.count,Rt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await wt.fetchWallets(e);n&&n.forEach(r=>{Rt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=It.state,s=Y.getRequestedCaipNetworkIds().join(",");Rt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await wt.fetchWallets(i);lr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>wt._fetchWalletImage(c)),ut.wait(300)]),Rt.search=wt._filterOutExtensions(o)},initPromise(t,e){const n=Rt.promises[t];return n||(Rt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&wt.initPromise("connectorImages",wt.fetchConnectorImages),e&&wt.initPromise("featuredWallets",wt.fetchFeaturedWallets),n&&wt.initPromise("recommendedWallets",wt.fetchRecommendedWallets),r&&wt.initPromise("networkImages",wt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=It.state.features)!=null&&t.analytics&&wt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Di.get({path:"/getAnalyticsConfig",params:wt._getSdkProperties()});It.setFeatures({analytics:t})}catch{It.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Rt.featured=Rt.allFeatured,Rt.recommended=Rt.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");Rt.featured=Rt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.recommended=Rt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.filteredWallets=Rt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Rt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Rt.featured=Rt.allFeatured,Rt.recommended=Rt.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");Rt.featured=Rt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.recommended=Rt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Rt.filteredWallets=Rt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Nn=tr({view:"Connect",history:["Connect"],transactionStack:[]}),GFe={state:Nn,subscribeKey(t,e){return Si(Nn,t,e)},pushTransactionStack(t){Nn.transactionStack.push(t)},popTransactionStack(t){const e=Nn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),St.goBack();break;case"cancel":s==null||s(),St.goBack();break}},push(t,e){t!==Nn.view&&(Nn.view=t,Nn.history.push(t),Nn.data=e)},reset(t,e){Nn.view=t,Nn.history=[t],Nn.data=e},replace(t,e){Nn.history.at(-1)===t||(Nn.view=t,Nn.history[Nn.history.length-1]=t,Nn.data=e)},goBack(){var r;const t=Y.state.activeCaipAddress,e=St.state.view==="ConnectingFarcaster",n=!t&&e;if(Nn.history.length>1){Nn.history.pop();const[s]=Nn.history.slice(-1);s&&(t&&s==="Connect"?Nn.view="Account":Nn.view=s)}else qn.close();(r=Nn.data)!=null&&r.wallet&&(Nn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){yn.setFarcasterUrl(void 0,Y.state.activeChain);const a=it.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=$_(It.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Nn.history.length>1){Nn.history=Nn.history.slice(0,t+1);const[e]=Nn.history.slice(-1);e&&(Nn.view=e)}},goBackOrCloseModal(){St.state.history.length>1?St.goBack():qn.close()}},St=Ma(GFe),ou=tr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),N3={state:ou,subscribe(t){return co(ou,()=>t(ou))},setThemeMode(t){ou.themeMode=t;try{const e=it.getAuthConnector();if(e){const n=N3.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:sx(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){ou.themeVariables={...ou.themeVariables,...t};try{const e=it.getAuthConnector();if(e){const n=N3.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:sx(ou.themeVariables,ou.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return $_(ou)}},IA=Ma(N3),qX={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},ln=tr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...qX},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),qFe={state:ln,subscribe(t){return co(ln,()=>{t(ln)})},subscribeKey(t,e){return Si(ln,t,e)},initialize(t){t.forEach(e=>{const n=et.getConnectedConnectorId(e);n&&it.setConnectorId(n,e)})},setActiveConnector(t){t&&(ln.activeConnector=N0(t))},setConnectors(t){t.filter(s=>!ln.allConnectors.some(i=>i.id===s.id&&it.getConnectorName(i.name)===it.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&ln.allConnectors.push(N0(s))});const n=it.getEnabledNamespaces(),r=it.getEnabledConnectors(n);ln.connectors=it.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(ln.filterByNamespaceMap).forEach(e=>{ln.filterByNamespaceMap[e]=!1}),t.forEach(e=>{ln.filterByNamespaceMap[e]=!0}),it.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){ln.filterByNamespaceMap[t]=e,it.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=it.getEnabledNamespaces(),e=it.getEnabledConnectors(t),n=it.areAllNamespacesEnabled();ln.connectors=it.mergeMultiChainConnectors(e),n?wt.clearFilterByNamespaces():wt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(ln.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return ln.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(ln.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=it.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===pe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=it.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===pe.CONNECTOR_ID.AUTH){const s=t,i=$_(It.state),o=IA.getSnapshot().themeMode,a=IA.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:sx(a,o)}),it.setConnectors([t])}else it.setConnectors([t])},getAuthConnector(t){var r;const e=t||Y.state.activeChain,n=ln.connectors.find(s=>s.id===pe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return ln.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return ln.allConnectors.find(e=>e.id===t)},getConnector(t,e){return ln.allConnectors.filter(r=>r.chain===Y.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=$_(It.state),r=IA.getSnapshot().themeMode,s=IA.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:sx(s,r)})},getConnectorsByNamespace(t){const e=ln.allConnectors.filter(n=>n.chain===t);return it.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&Bl(t)===Os.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=it.getConnector(t.id,t.rdns);DFe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,Y.state.activeChain),e?St.push("ConnectingExternal",{connector:e}):St.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?it.getConnectorsByNamespace(t):it.mergeMultiChainConnectors(ln.allConnectors)},setFilterByNamespace(t){ln.filterByNamespace=t,ln.connectors=it.getConnectors(t),wt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(ln.activeConnectorIds={...ln.activeConnectorIds,[e]:t},et.setConnectedConnectorId(e,t))},removeConnectorId(t){ln.activeConnectorIds={...ln.activeConnectorIds,[t]:void 0},et.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return ln.activeConnectorIds[t]},isConnected(t){return t?!!ln.activeConnectorIds[t]:Object.values(ln.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){ln.activeConnectorIds={...qX}}},it=Ma(qFe),VFe=1e3,tv={checkNamespaceConnectorId(t,e){return it.getConnectorId(t)===e},isSocialProvider(t){return gi.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&it.setActiveConnector(e),s==null||s(ut.isMobile()&&t),r){const l=qn.subscribeKey("open",u=>{u||(St.state.view!==r&&St.replace(r),l(),a(new Error("Modal closed")))})}const c=Y.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&qn.close(),c(),o(Oh.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=Y.subscribeKey("activeCaipAddress",s=>{s&&(qn.close(),r(),e(Oh.parseCaipAddress(s)))});st.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=yn.state.socialWindow,i=yn.state.socialProvider,o=!1,a=null;const c=Y.subscribeKey("activeCaipAddress",l=>{l&&(e&&qn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===pe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=it.getAuthConnector();if(g&&!o){s&&(s.close(),yn.setSocialWindow(void 0,Y.state.activeChain),s=yn.state.socialWindow),o=!0;const y=f.data.resultUri;i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const m=Y.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:y,chainId:m==null?void 0:m.caipNetworkId}),i){et.setConnectedSocialProvider(i),await st.connectExternal({id:g.id,type:g.type,socialUri:y},g.chain);const w=Y.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(Oh.parseCaipAddress(w)),lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(yn.setSocialProvider(t,Y.state.activeChain),i=yn.state.socialProvider,lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=qn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=it.getAuthConnector();if(p&&!yn.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();yn.setFarcasterUrl(g,Y.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=it.getAuthConnector();a=ut.returnOpenHref(`${pe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){yn.setSocialWindow(a,Y.state.activeChain),s=yn.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=qn.subscribeKey("open",c=>{c||(St.state.view!==e&&St.replace(e),a(),i(new Error("Modal closed")))})}const o=Y.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&qn.close(),o(),s(Oh.parseCaipAddress(a)))})})},async updateEmail(){const t=et.getConnectedConnectorId(Y.state.activeChain),e=it.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==pe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return St.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(qn.close(),clearInterval(i),o(),r({email:a}))},VFe),o=qn.subscribeKey("open",a=>{a||(St.state.view!=="Connect"&&St.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&Bl(t)===Os.ACCOUNT_TYPES.EOA}};function VX(){var r,s;const t=((r=Y.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Y.state.activeCaipNetwork)==null?void 0:s.id)||1,n=gi.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Bl(t){var n;return(n=Y.getAccountData(t))==null?void 0:n.preferredAccountType}const KX={getConnectionStatus(t,e){const n=it.state.activeConnectorIds[e],r=st.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=It.state.remoteFeatures)!=null&&a.multiWallet),n=it.state.activeConnectorIds[t],r=st.getConnections(t),i=(st.state.recentConnections.get(t)??[]).filter(c=>it.getConnectorById(c.connectorId)),o=KX.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},qf=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Br=tr({...qf}),KFe={state:Br,subscribeKey(t,e){return Si(Br,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ut.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Br.message=qf.message,Br.variant=qf.variant,Br.svg=qf.svg,Br.open=qf.open,Br.autoClose=qf.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=qf.autoClose}){Br.open?(Br.open=!1,setTimeout(()=>{Br.message=t,Br.variant=n,Br.svg=e,Br.open=!0,Br.autoClose=r},150)):(Br.message=t,Br.variant=n,Br.svg=e,Br.open=!0,Br.autoClose=r)}},kh=KFe,Wn=tr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),YFe={state:Wn,subscribe(t){return co(Wn,()=>t(Wn))},setLastNetworkInView(t){Wn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Wn.loading=!0;try{const r=await _t.fetchTransactions({account:t,cursor:Wn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Ev.filterSpamTransactions(r.data),i=Ev.filterByConnectedChain(s),o=[...Wn.transactions,...i];Wn.loading=!1,e==="coinbase"?Wn.coinbaseTransactions=Ev.groupTransactionsByYearAndMonth(Wn.coinbaseTransactions,r.data):(Wn.transactions=o,Wn.transactionsByYear=Ev.groupTransactionsByYearAndMonth(Wn.transactionsByYear,i)),Wn.empty=o.length===0,Wn.next=r.next?r.next:void 0}catch{const s=Y.state.activeChain;lr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:It.state.projectId,cursor:Wn.next,isSmartAccount:Bl(s)===Os.ACCOUNT_TYPES.SMART_ACCOUNT}}),kh.showError("Failed to fetch transactions"),Wn.loading=!1,Wn.empty=!0,Wn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Wn.next=void 0},resetTransactions(){Wn.transactions=[],Wn.transactionsByYear={},Wn.lastNetworkInView=void 0,Wn.loading=!1,Wn.empty=!1,Wn.next=void 0}},Ev=Ma(YFe,"API_ERROR"),Xt=tr({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Mf;const QFe={state:Xt,subscribe(t){return co(Xt,()=>t(Xt))},subscribeKey(t,e){return Si(Xt,t,e)},_getClient(){return Xt._client},setClient(t){Xt._client=N0(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);st.syncStorageConnections(e)},syncStorageConnections(t){const e=et.getConnections(),n=t??Array.from(Y.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Xt.recentConnections);i.set(r,s),Xt.recentConnections=i}},getConnections(t){return t?Xt.connections.get(t)??[]:[]},hasAnyConnection(t){const e=st.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(ut.isTelegram()||ut.isSafari()&&ut.isIos()){if(Mf){await Mf,Mf=void 0;return}if(!ut.isPairingExpired(Xt==null?void 0:Xt.wcPairingExpiry)){const s=Xt.wcUri;Xt.wcUri=s;return}Mf=(e=(t=st._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),st.state.status="connecting",await Mf,Mf=void 0,Xt.wcPairingExpiry=void 0,st.state.status="connected"}else await((r=(n=st._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=st._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&Y.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=st._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||Y.state.activeChain;e&&it.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;qn.setLoading(!0,Y.state.activeChain);const n=it.getAuthConnector();n&&(yn.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),et.setPreferredAccountTypes(Object.entries(Y.state.chains).reduce((s,[i,o])=>{const a=i,c=Bl(a);return c!==void 0&&(s[a]=c),s},{})),await st.reconnectExternal(n),qn.setLoading(!1,Y.state.activeChain),lr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=st._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=st._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=st._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=st._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=st._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=st._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=st._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=st._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=st._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=st._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=st._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=st._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Xt.wcUri=void 0,Xt.wcPairingExpiry=void 0,Xt.wcLinking=void 0,Xt.recentWallet=void 0,Xt.status="disconnected",Ev.resetTransactions(),et.deleteWalletConnectDeepLink()},resetUri(){Xt.wcUri=void 0,Xt.wcPairingExpiry=void 0,Mf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=st.state;t&&et.setWalletConnectDeepLink(t),e&&et.setAppKitRecent(e),lr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=St.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Xt.wcBasic=t},setUri(t){Xt.wcUri=t,Xt.wcPairingExpiry=ut.getPairingExpiry()},setWcLinking(t){Xt.wcLinking=t},setWcError(t){Xt.wcError=t,Xt.buffering=!1},setRecentWallet(t){Xt.recentWallet=t},setBuffering(t){Xt.buffering=t},setStatus(t){Xt.status=t},setIsSwitchingConnection(t){Xt.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=st._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new T0("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Xt.connections);n.set(e,t),Xt.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=yn.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&tv.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await st.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=it.getConnectorById(t.connectorId),s=t.connectorId===pe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await st.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await st.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=it.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===pe.CONNECTOR_ID.AUTH,a=t.connectorId===pe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&tv.isSocialProvider(i)){const{address:d}=await tv.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){qn.open({view:"ConnectingFarcaster"})},onConnect(){St.replace("ProfileWallets")}});c=d}else{const{address:d}=await tv.connectEmail({closeModalOnConnect:r,onOpen(){qn.open({view:"EmailLogin"})},onConnect(){St.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await tv.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){qn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){St.replace("ProfileWallets")}});c=d}else{const d=await st.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await st.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=yn.getCaipAddress(n);if(o){const{address:c}=Oh.parseCaipAddress(o);i=c}const a=KX.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await st.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await st.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},st=Ma(QFe),Vm=tr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Hy={state:Vm,subscribe(t){return co(Vm,()=>t(Vm))},subscribeOpen(t){return Si(Vm,"open",t)},set(t){Object.assign(Vm,{...Vm,...t})}},JFe={async getTokenList(){var r;const t=Y.state.activeCaipNetwork,e=await _t.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=Y.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(st==null?void 0:st.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await _t.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await _t.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=st.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await _U.getMyTokensWithBalance(t);return yn.setTokenBalance(e,Y.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:VX(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Cn=tr({tokenBalances:[],loading:!1}),ZFe={state:Cn,subscribe(t){return co(Cn,()=>t(Cn))},subscribeKey(t,e){return Si(Cn,t,e)},setToken(t){t&&(Cn.token=N0(t))},setTokenAmount(t){Cn.sendTokenAmount=t},setReceiverAddress(t){Cn.receiverAddress=t},setReceiverProfileImageUrl(t){Cn.receiverProfileImageUrl=t},setReceiverProfileName(t){Cn.receiverProfileName=t},setNetworkBalanceInUsd(t){Cn.networkBalanceInUSD=t},setLoading(t){Cn.loading=t},async sendToken(){var t;try{switch(wn.setLoading(!0),(t=Y.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await wn.sendEvmToken();return;case"solana":await wn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{wn.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=Y.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Bl(t);if(!wn.state.sendTokenAmount||!wn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!wn.state.token)throw new Error("A token is required");(n=wn.state.token)!=null&&n.address?(lr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Os.ACCOUNT_TYPES.SMART_ACCOUNT,token:wn.state.token.address,amount:wn.state.sendTokenAmount,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await wn.sendERC20Token({receiverAddress:wn.state.receiverAddress,tokenAddress:wn.state.token.address,sendTokenAmount:wn.state.sendTokenAmount,decimals:wn.state.token.quantity.decimals})):(lr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Os.ACCOUNT_TYPES.SMART_ACCOUNT,token:wn.state.token.symbol||"",amount:wn.state.sendTokenAmount,network:((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await wn.sendNativeToken({receiverAddress:wn.state.receiverAddress,sendTokenAmount:wn.state.sendTokenAmount,decimals:wn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Cn.loading=!0;const e=(i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Y.state.activeCaipAddress,s=r?ut.getPlainAddress(r):void 0;if(Cn.lastRetry&&!ut.isAllowedRetry(Cn.lastRetry,30*gi.ONE_SEC_MS))return Cn.loading=!1,[];try{if(s&&e&&n){const a=await _U.getMyTokensWithBalance();return Cn.tokenBalances=a,Cn.lastRetry=void 0,a}}catch(a){Cn.lastRetry=Date.now(),t==null||t(a),kh.showError("Token Balance Unavailable")}finally{Cn.loading=!1}return[]},fetchNetworkBalance(){if(Cn.tokenBalances.length===0)return;const t=JFe.mapBalancesToSwapTokens(Cn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===VX());e&&(Cn.networkBalanceInUSD=e?bFe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;St.pushTransactionStack({});const e=t.receiverAddress,n=yn.state.address,r=st.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await st.sendTransaction({chainNamespace:pe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),lr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Bl("eip155")===Os.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=wn.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=st._getClient())==null||a.updateBalance("eip155"),wn.resetSend()},async sendERC20Token(t){St.pushTransactionStack({onSuccess(){St.replace("Account")}});const e=st.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(yn.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ut.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await st.writeContract({fromAddress:yn.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:CFe.getERC20Abi(n),chainNamespace:pe.CHAIN.EVM}),wn.resetSend()}},async sendSolanaToken(){var t;if(!wn.state.sendTokenAmount||!wn.state.receiverAddress)throw new Error("An amount and receiver address are required");St.pushTransactionStack({onSuccess(){St.replace("Account")}}),await st.sendTransaction({chainNamespace:"solana",to:wn.state.receiverAddress,value:wn.state.sendTokenAmount}),(t=st._getClient())==null||t.updateBalance("solana"),wn.resetSend()},resetSend(){Cn.token=void 0,Cn.sendTokenAmount=void 0,Cn.receiverAddress=void 0,Cn.receiverProfileImageUrl=void 0,Cn.receiverProfileName=void 0,Cn.loading=!1,Cn.tokenBalances=[]}},wn=Ma(ZFe),_O={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},xA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ke=tr({chains:wFe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),XFe={state:ke,subscribe(t){return co(ke,()=>{t(ke)})},subscribeKey(t,e){return Si(ke,t,e)},subscribeChainProp(t,e,n){let r;return co(ke.chains,()=>{var i;const s=n||ke.activeChain;if(s){const o=(i=ke.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=et.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=It.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(ke.noAdapters=!0),ke.noAdapters||(ke.activeChain=a==null?void 0:a.namespace,ke.activeCaipNetwork=i,Y.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),ke.activeChain&&Hy.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=et.getPreferredAccountTypes()||{},f={...It.state.defaultAccountTypes,...h};Y.state.chains.set(u,{namespace:u,networkState:tr({...xA,caipNetwork:d==null?void 0:d[0]}),accountState:tr({..._O,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),Y.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(ke.activeChain===t){const r=Array.from(ke.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&Y.setActiveCaipNetwork(s)}}ke.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");ke.chains.set(t.namespace,{namespace:t.namespace,networkState:{...xA,caipNetwork:r[0]},accountState:_O,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),Y.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=ke.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),ke.chains.set(t.chainNamespace,{...e,caipNetworks:r}),Y.setRequestedCaipNetworks(r,t.chainNamespace),it.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=ke.chains.get(t);if(n){const o=((r=ke.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&Y.setActiveCaipNetwork(n.caipNetworks[0]),ke.chains.set(t,{...n,caipNetworks:a}),Y.setRequestedCaipNetworks(a||[],t),a.length===0&&it.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=ke.chains.get(t);n&&(n.networkState={...n.networkState||xA,...e},ke.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=ke.chains.get(t);if(r){const s={...r.accountState||_O,...e};ke.chains.set(t,{...r,accountState:s}),(ke.chains.size===1||ke.activeChain===t)&&(e.caipAddress&&(ke.activeCaipAddress=e.caipAddress),yn.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=ke.chains.get(t);if(n){const r={...n.networkState||xA,...e};ke.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){Y.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;ke.activeChain=t;const e=t?ke.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(ke.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,ke.activeCaipNetwork=n,Y.setChainNetworkData(t,{caipNetwork:n}),et.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Hy.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;ke.activeChain!==t.chainNamespace&&Y.setIsSwitchingNamespace(!0);const e=ke.chains.get(t.chainNamespace);ke.activeChain=t.chainNamespace,ke.activeCaipNetwork=t,Y.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?ke.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:ke.activeCaipAddress=void 0,Y.setAccountProp("caipAddress",ke.activeCaipAddress,t.chainNamespace),e&&yn.replaceState(e.accountState),wn.resetSend(),Hy.set({activeChain:ke.activeChain,selectedNetworkId:(i=ke.activeCaipNetwork)==null?void 0:i.caipNetworkId}),et.setActiveCaipNetworkId(t.caipNetworkId),!Y.checkIfSupportedNetwork(t.chainNamespace)&&It.state.enableNetworkSwitch&&!It.state.allowUnsupportedChain&&!st.state.wcBasic&&Y.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=ke.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==Y.state.activeChain,n=(s=Y.getNetworkData(t))==null?void 0:s.caipNetwork,r=Y.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await Y.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=Y.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=Y.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=ke.activeCaipNetwork)==null?void 0:a.id)})),s=Y.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&qn.close()}catch{St.goBack()}lr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||ke.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=ke.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||ke.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=ke.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=ke.activeChain;if(e&&(n=e),!n)return;const r=(s=ke.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=ke.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=ke.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ut.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return ke.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=Y.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){Y.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=Y.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));it.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return ke.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=Y.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=ke.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:ke.activeCaipNetwork},getActiveCaipAddress(){return ke.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=ke.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=Y.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||ke.activeCaipNetwork,r=Y.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!ke.activeChain)return!0;const e=Y.getRequestedCaipNetworks(ke.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){Y.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=rx.caipNetworkIdToNumber((r=ke.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=ke.activeChain;if(!e||!t)return!1;const n=Y.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){qn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ke.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&gi.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=Y.getAccountProp("preferredAccountType",e);ke.activeCaipAddress=void 0,Y.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),it.removeConnectorId(e)},setIsSwitchingNamespace(t){ke.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(ke.chains.forEach(s=>{pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=ke.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=Y.state.chains.get(t))==null?void 0:e.accountState:yn.state},getNetworkData(t){var n;const e=t||ke.activeChain;if(e)return(n=Y.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=Y.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=it.state.filterByNamespace;return(t?[ke.chains.get(t)]:Array.from(ke.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?Y.getRequestedCaipNetworks(t):Y.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){ke.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return ke.lastConnectedSIWECaipNetwork}},Y=Ma(XFe),eje={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},YX=ut.getBlockchainApiUrl(),Li=tr({clientId:null,api:new s1({baseUrl:YX,clientId:null}),supportedChains:{http:[],ws:[]}}),_t={state:Li,async get(t){const{st:e,sv:n}=_t.getSdkProperties(),r=It.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Li.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=It.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Li.supportedChains.http.length||await _t.getSupportedNetworks()}catch{return!1}return Li.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await _t.get({path:"v1/supported-chains"});return Li.supportedChains=t,t}catch{return Li.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await _t.isNetworkSupported(e))return{avatar:"",name:""};const r=et.getIdentityFromCacheForAddress(t);if(r)return r;const s=await _t.get({path:`/v1/identity/${t}`,params:{sender:Y.state.activeCaipAddress?ut.getPlainAddress(Y.state.activeCaipAddress):void 0}});return et.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await _t.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?_t.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await _t.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?_t.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Li.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:It.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await _t.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?_t.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=_t.getSdkProperties();if(!await _t.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return _t.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await _t.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Li.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:gi.CONVERT_SLIPPAGE_TOLERANCE},projectId:It.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=_t.getSdkProperties();if(!await _t.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return _t.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=_t.getSdkProperties();if(!await _t.isNetworkSupported((l=Y.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return kh.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=et.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await _t.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return et.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/profile/reverse/${t}`,params:{sender:yn.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await _t.isNetworkSupported((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Li.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await _t.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Li.api.post({path:"/v1/generators/onrampurl",params:{projectId:It.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await _t.isNetworkSupported((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await _t.get({path:"/v1/onramp/options"})}catch{return eje}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await _t.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Li.api.post({path:"/v1/onramp/quote",params:{projectId:It.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await _t.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await _t.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Li.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:It.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Li.clientId=t,Li.api=new s1({baseUrl:YX,clientId:t})}},CO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Yg(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},_U={async getMyTokensWithBalance(t){const e=yn.state.address,n=Y.state.activeCaipNetwork,r=it.getConnectorId("eip155")===pe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=et.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===pe.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await _t.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=CO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await st.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await st.walletGetAssets({account:t,chainFilter:[s]});if(!CO.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>CO.createBalance(l,e.caipNetworkId));return et.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Wc=tr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),tje={state:Wc,replaceState(t){t&&Object.assign(Wc,N0(t))},subscribe(t){return Y.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return Y.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){Y.setAccountProp("status",t,e)},getCaipAddress(t){return Y.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ut.getPlainAddress(t):void 0;e===Y.state.activeChain&&(Y.state.activeCaipAddress=t),Y.setAccountProp("caipAddress",t,e),Y.setAccountProp("address",n,e)},setBalance(t,e,n){Y.setAccountProp("balance",t,n),Y.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){Y.setAccountProp("profileName",t,e)},setProfileImage(t,e){Y.setAccountProp("profileImage",t,e)},setUser(t,e){Y.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){Y.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){Y.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){Y.setAccountProp("currentTab",t,Y.state.activeChain)},setTokenBalance(t,e){t&&Y.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){Y.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=Y.getAccountProp("addressLabels",n)||new Map;r.set(t,e),Y.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=Y.getAccountProp("addressLabels",e)||new Map;n.delete(t),Y.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){Y.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){Y.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&Y.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){Y.setAccountProp("socialWindow",t?N0(t):void 0,e)},setFarcasterUrl(t,e){Y.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Wc.balanceLoading=!0;const e=(i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Y.state.activeCaipAddress,s=r?ut.getPlainAddress(r):void 0;if(Wc.lastRetry&&!ut.isAllowedRetry(Wc.lastRetry,30*gi.ONE_SEC_MS))return Wc.balanceLoading=!1,[];try{if(s&&e&&n){const a=await _U.getMyTokensWithBalance();return yn.setTokenBalance(a,n),Wc.lastRetry=void 0,Wc.balanceLoading=!1,a}}catch(a){Wc.lastRetry=Date.now(),t==null||t(a),kh.showError("Token Balance Unavailable")}finally{Wc.balanceLoading=!1}return[]},resetAccount(t){Y.resetAccount(t)}},yn=Ma(tje),nje={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=Y.state.activeCaipNetwork,r=St.state.data;if(t.id===(n==null?void 0:n.id))return;const i=yn.getCaipAddress(Y.state.activeChain),o=t.chainNamespace!==Y.state.activeChain,a=yn.getCaipAddress(t.chainNamespace),l=it.getConnectorId(Y.state.activeChain)===pe.CONNECTOR_ID.AUTH,u=pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?St.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?St.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):St.push("SwitchNetwork",{...r,network:t})}},Mi=tr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),rje={state:Mi,subscribe(t){return co(Mi,()=>t(Mi))},subscribeKey(t,e){return Si(Mi,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=Y.state.activeChain,r=e&&e!==n,s=(i=Y.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(st.state.wcBasic?wt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await wt.prefetch(),it.setFilterByNamespace(t==null?void 0:t.namespace),qn.setLoading(!0,e),e&&r){const a=((o=Y.getNetworkData(e))==null?void 0:o.caipNetwork)||Y.getRequestedCaipNetworks(e)[0];a&&nje.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=Y.state.noAdapters;It.state.manualWCControl||a&&!s?ut.isMobile()?St.reset("AllWallets"):St.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?St.reset(t.view,t.data):s?St.reset("Account"):St.reset("Connect")}Mi.open=!0,Hy.set({open:!0}),lr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=It.state.enableEmbedded,e=!!Y.state.activeCaipAddress;Mi.open&&lr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Mi.open=!1,St.reset("Connect"),qn.clearLoading(),t?e?St.replace("Account"):St.push("Connect"):Hy.set({open:!1}),st.resetUri()},setLoading(t,e){e&&Mi.loadingNamespaceMap.set(e,t),Mi.loading=t,Hy.set({loading:t})},clearLoading(){Mi.loadingNamespaceMap.clear(),Mi.loading=!1},shake(){Mi.shake||(Mi.shake=!0,setTimeout(()=>{Mi.shake=!1},500))}},qn=Ma(rje),$9=2147483648,sje={convertEVMChainIdToCoinType(t){if(t>=$9)throw new Error("Invalid chainId");return($9|t)>>>0}},ta=tr({suggestions:[],loading:!1}),ije={state:ta,subscribe(t){return co(ta,()=>t(ta))},subscribeKey(t,e){return Si(ta,t,e)},async resolveName(t){var e,n;try{return await _t.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await _t.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ta.loading=!0,ta.suggestions=[];const e=await _t.getEnsNameSuggestions(t);return ta.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ta.suggestions}catch(e){const n=vS.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ta.loading=!1}},async getNamesForAddress(t){try{if(!Y.state.activeCaipNetwork)return[];const n=et.getEnsFromCacheForAddress(t);if(n)return n;const r=await _t.reverseLookupEnsName({address:t});return et.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=vS.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=Y.state.activeCaipNetwork,n=yn.state.address,r=it.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");ta.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});St.pushTransactionStack({onCancel(){St.replace("RegisterAccountName")}});const i=await st.signMessage(s);ta.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=sje.convertEVMChainIdToCoinType(Number(o));await _t.registerEnsName({coinType:a,address:n,signature:i,message:s}),yn.setProfileName(t,e.chainNamespace),St.replace("RegisterAccountNameSuccess")}catch(s){const i=vS.parseEnsApiError(s,`Error registering name ${t}`);throw St.replace("RegisterAccountName"),new Error(i)}finally{ta.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},vS=Ma(ije);let Uf=null;const qd={getSIWX(){return It.state.siwx},async initializeIfEnabled(){var i;const t=It.state.siwx,e=Y.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(Y.checkIfSupportedNetwork(n))try{if(Uf&&await Uf,(await t.getSessions(`${n}:${r}`,s)).length)return;await qn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=st._getClient())==null?void 0:i.disconnect().catch(console.error)),St.reset("Connect"),kh.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=It.state.siwx,e=ut.getPlainAddress(Y.getActiveCaipAddress()),n=Y.getActiveCaipNetwork(),r=st._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();it.getConnectorId(n.chainNamespace)===pe.CONNECTOR_ID.AUTH&&St.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Y.setLastConnectedSIWECaipNetwork(n),qn.close(),lr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!qn.state.open||St.state.view==="ApproveTransaction")&&await qn.open({view:"SIWXSignMessage"}),kh.showError("Error signing message"),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=Y.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,ut.getPlainAddress(Y.getActiveCaipAddress())||""));s&&s.length>0?await Y.switchActiveNetwork(r):await st.disconnect()}else await st.disconnect()}else qn.close();qn.close(),lr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=Y.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,ut.getPlainAddress(Y.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=It.state.siwx,e=ut.getPlainAddress(Y.getActiveCaipAddress()),n=Y.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=St.state.view==="ApproveTransaction",r=St.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=qd.getSIWX();if(!i||!s.includes(pe.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=Y.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await qd.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(Uf)return Uf;const r=qd.getSIWX();return r?(Uf=r.addSession({data:t,message:e,signature:n}).finally(()=>{Uf=null}),Uf):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=qd.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(kh.showLoading("Authenticating...",{autoClose:!1}),yn.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),lr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:qd.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:qd.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{kh.hide()}}return!0},getSIWXEventProperties(){var e;const t=Y.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Bl(t)===Os.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},bo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:pe.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Ro={ConnectorExplorerIds:{[pe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[pe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[pe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[pe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[pe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[bo.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[bo.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[bo.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[bo.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[bo.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[bo.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[bo.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[bo.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[bo.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[bo.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[bo.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[pe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[pe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[pe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[pe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[pe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[pe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[pe.CONNECTOR_ID.COINBASE]:"Coinbase",[pe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[pe.CONNECTOR_ID.LEDGER]:"Ledger",[pe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[pe.CONNECTOR_ID.INJECTED]:"INJECTED",[pe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[pe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[pe.CONNECTOR_ID.AUTH]:"AUTH",[bo.CONNECTOR_TYPE_AUTH]:"AUTH"}},Qi={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${bo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=Y.state.activeChain;return pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>it.getConnectorId(e)===pe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},oje=new AbortController,Od={EmbeddedWalletAbortController:oje,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},aje="rpc.walletconnect.org";function B9(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const AO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],_v={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===aje}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:pe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${pe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return AO.includes(e)?B9(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Ro.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>_v.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(xh(a.url,a.config))}),AO.includes(t.caipNetworkId)&&r.push(xh(B9(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(xh(a))}),TI(r)},extendWagmiTransports(t,e,n){if(AO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return TI([n,xh(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:pe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=et.getActiveCaipNetworkId(),n=Y.getAllRequestedCaipNetworks(),r=Array.from(((c=Y.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},F9={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Cs={set(t,e){pl.isClient&&localStorage.setItem(`${Ze.STORAGE_KEY}${t}`,e)},get(t){return pl.isClient?localStorage.getItem(`${Ze.STORAGE_KEY}${t}`):null},delete(t,e){pl.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ze.STORAGE_KEY}${t}`))}},NA=30*1e3,pl={checkIfAllowedToTriggerEmail(){const t=Cs.get(Ze.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<NA){const n=Math.ceil((NA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Cs.get(Ze.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<NA)return Math.ceil((NA-e)/1e3)}return 0},checkIfRequestExists(t){return Os.NOT_SAFE_RPC_METHODS.includes(t.method)||Os.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(F9.transactionHash))||(t==null?void 0:t.match(F9.signedMessage)))?Ze.RPC_RESPONSE_TYPE_TX:Ze.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Os.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},mr=E.object({message:E.string()});function Be(t){return E.literal(Ze[t])}const fT=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const cje=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),lje=E.object({email:E.string().email()}),uje=E.object({otp:E.string()}),dje=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(fT),rpcUrl:E.optional(E.string())}),hje=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(fT),rpcUrl:E.optional(E.string())}),fje=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),pje=E.object({email:E.string().email()}),gje=E.object({otp:E.string()}),mje=E.object({otp:E.string()}),yje=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),wje=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),bje=E.object({type:E.string()}),vje=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Eje=E.object({url:E.string()}),_je=E.object({userName:E.string()}),Cje=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Os.ACCOUNT_TYPES.EOA,Os.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(fT)}),Aje=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Sje=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Os.ACCOUNT_TYPES.EOA,Os.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(fT)}),Ije=E.object({uri:E.string()}),xje=E.object({isConnected:E.boolean()}),Nje=E.object({chainId:E.string().or(E.number())}),Tje=E.object({chainId:E.string().or(E.number())}),Rje=E.object({newEmail:E.string().email()}),Pje=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const Oje=E.object({version:E.string().optional()}),kje=E.object({type:E.string(),address:E.string()}),Dje=E.any(),Lje=E.object({method:E.literal("eth_accounts")}),Mje=E.object({method:E.literal("eth_blockNumber")}),Uje=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),$je=E.object({method:E.literal("eth_chainId")}),Bje=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),Fje=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),jje=E.object({method:E.literal("eth_gasPrice")}),zje=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),Wje=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),Hje=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),Gje=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),qje=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),Vje=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),Kje=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),Yje=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),Qje=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),Jje=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),Zje=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),Xje=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),e9e=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),t9e=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),n9e=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),r9e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),s9e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),i9e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),o9e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),a9e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),c9e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),l9e=E.object({method:E.literal("eth_newBlockFilter")}),u9e=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),d9e=E.object({method:E.literal("eth_newPendingTransactionFilter")}),h9e=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),f9e=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),p9e=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),j9=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),g9e=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),m9e=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),y9e=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),w9e=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),b9e=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),v9e=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),E9e=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),_9e=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),C9e=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),A9e=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),S9e=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),I9e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),z9=E.object({token:E.string()}),Fe=E.object({id:E.string().optional()}),nv={appEvent:Fe.extend({type:Be("APP_SWITCH_NETWORK"),payload:cje}).or(Fe.extend({type:Be("APP_CONNECT_EMAIL"),payload:lje})).or(Fe.extend({type:Be("APP_CONNECT_DEVICE")})).or(Fe.extend({type:Be("APP_CONNECT_OTP"),payload:uje})).or(Fe.extend({type:Be("APP_CONNECT_SOCIAL"),payload:dje})).or(Fe.extend({type:Be("APP_GET_FARCASTER_URI")})).or(Fe.extend({type:Be("APP_CONNECT_FARCASTER")})).or(Fe.extend({type:Be("APP_GET_USER"),payload:E.optional(hje)})).or(Fe.extend({type:Be("APP_GET_SOCIAL_REDIRECT_URI"),payload:fje})).or(Fe.extend({type:Be("APP_SIGN_OUT")})).or(Fe.extend({type:Be("APP_IS_CONNECTED"),payload:E.optional(z9)})).or(Fe.extend({type:Be("APP_GET_CHAIN_ID")})).or(Fe.extend({type:Be("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Fe.extend({type:Be("APP_INIT_SMART_ACCOUNT")})).or(Fe.extend({type:Be("APP_SET_PREFERRED_ACCOUNT"),payload:bje})).or(Fe.extend({type:Be("APP_RPC_REQUEST"),payload:j9.or(I9e).or(Lje).or(Mje).or(Uje).or($je).or(Bje).or(Fje).or(jje).or(zje).or(Wje).or(Hje).or(Gje).or(qje).or(Vje).or(Kje).or(Yje).or(Qje).or(Jje).or(Zje).or(Xje).or(e9e).or(t9e).or(n9e).or(r9e).or(s9e).or(i9e).or(o9e).or(a9e).or(c9e).or(l9e).or(u9e).or(d9e).or(h9e).or(f9e).or(p9e).or(j9).or(g9e).or(m9e).or(y9e).or(w9e).or(b9e).or(v9e).or(_9e).or(E9e).or(C9e).or(A9e).or(S9e).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL"),payload:pje})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:gje})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:mje})).or(Fe.extend({type:Be("APP_SYNC_THEME"),payload:yje})).or(Fe.extend({type:Be("APP_SYNC_DAPP_DATA"),payload:wje})).or(Fe.extend({type:Be("APP_RELOAD")})).or(Fe.extend({type:Be("APP_RPC_ABORT")})),frameEvent:Fe.extend({type:Be("FRAME_SWITCH_NETWORK_ERROR"),payload:mr}).or(Fe.extend({type:Be("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Tje})).or(Fe.extend({type:Be("FRAME_CONNECT_EMAIL_SUCCESS"),payload:vje})).or(Fe.extend({type:Be("FRAME_CONNECT_EMAIL_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Eje})).or(Fe.extend({type:Be("FRAME_GET_FARCASTER_URI_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:_je})).or(Fe.extend({type:Be("FRAME_CONNECT_FARCASTER_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_CONNECT_OTP_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_CONNECT_OTP_SUCCESS")})).or(Fe.extend({type:Be("FRAME_CONNECT_DEVICE_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Fe.extend({type:Be("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Cje})).or(Fe.extend({type:Be("FRAME_CONNECT_SOCIAL_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_GET_USER_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_GET_USER_SUCCESS"),payload:Sje})).or(Fe.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Ije})).or(Fe.extend({type:Be("FRAME_SIGN_OUT_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_SIGN_OUT_SUCCESS")})).or(Fe.extend({type:Be("FRAME_IS_CONNECTED_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_IS_CONNECTED_SUCCESS"),payload:xje})).or(Fe.extend({type:Be("FRAME_GET_CHAIN_ID_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Nje})).or(Fe.extend({type:Be("FRAME_RPC_REQUEST_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_RPC_REQUEST_SUCCESS"),payload:Dje})).or(Fe.extend({type:Be("FRAME_SESSION_UPDATE"),payload:z9})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Aje})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Rje})).or(Fe.extend({type:Be("FRAME_SYNC_THEME_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_SYNC_THEME_SUCCESS")})).or(Fe.extend({type:Be("FRAME_SYNC_DAPP_DATA_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Fe.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Pje})).or(Fe.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:kje})).or(Fe.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_READY"),payload:Oje})).or(Fe.extend({type:Be("FRAME_RELOAD_ERROR"),payload:mr})).or(Fe.extend({type:Be("FRAME_RELOAD_SUCCESS")}))};function SO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function x9e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=pe.BLOCKCHAIN_API_RPC_URL}){const i=new URL(PFe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class N9e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=pe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!SO(Ze.FRAME_EVENT_KEY,u))return;const d=nv.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}pl.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{pl.isClient&&window.addEventListener("message",({data:a})=>{if(!SO(Ze.FRAME_EVENT_KEY,a))return;const c=nv.frameEvent.parse(a);o(c)})},onAppEvent:o=>{pl.isClient&&window.addEventListener("message",({data:a})=>{if(!SO(Ze.APP_EVENT_KEY,a))return;const c=nv.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(pl.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");nv.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(pl.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");nv.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),pl.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=x9e({projectId:e,chainId:r,version:kFe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class T9e{constructor(e){var i;const n=om({level:OFe}),{logger:r,chunkLoggerController:s}=WN({opts:n});this.logger=Ls(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class R9e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new T9e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new N9e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Cs.get(Ze.EMAIL_LOGIN_USED_KEY)}getEmail(){return Cs.get(Ze.EMAIL)}getUsername(){return Cs.get(Ze.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ze.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{pl.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ze.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ze.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ze.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ze.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ze.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ze.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ze.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ze.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ze.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ze.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ze.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ze.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ze.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Ze.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ze.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Ze.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ze.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ze.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Ze.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ze.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Os.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Ze.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ze.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ze.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ze.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Os.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Os.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Ze.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ze.APP_SYNC_DAPP_DATA,Ze.APP_SYNC_THEME,Ze.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ze.APP_CONNECT_EMAIL,Ze.APP_CONNECT_DEVICE,Ze.APP_CONNECT_OTP,Ze.APP_CONNECT_SOCIAL,Ze.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,m){var w,v,A;y.id===u&&((v=m==null?void 0:(w=m.logger).info)==null||v.call(w,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((A=y.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Cs.set(Ze.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Cs.set(Ze.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Cs.set(Ze.EMAIL,e),Cs.set(Ze.EMAIL_LOGIN_USED_KEY,"true"),Cs.delete(Ze.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Cs.delete(Ze.EMAIL_LOGIN_USED_KEY),Cs.delete(Ze.EMAIL),Cs.delete(Ze.LAST_USED_CHAIN_KEY),Cs.delete(Ze.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Cs.set(Ze.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Cs.get(Ze.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Cs.set(Ze.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Oh.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class Gy{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return Gy.instance||(Gy.instance=new R9e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),Gy.instance}}const P9e={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},W9={filterOutDuplicatesByRDNS(t){const e=It.state.enableEIP6963?it.state.connectors:[],n=et.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ut.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=it.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=et.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=it.state,{featuredWalletIds:n}=It.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=It.state.features)==null?void 0:c.connectMethodsOrder),r=e||it.state.connectors;if(n)return n;const{injected:s,announced:i}=ES.getConnectorsByType(r,wt.state.recommended,wt.state.featured),o=s.filter(ES.showConnector),a=i.filter(ES.showConnector);return o.length||a.length?["wallet","email","social"]:P9e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&wt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&wt.state.excludedWallets.some(r=>Qi.isLowerCaseMatch(r.name,t.name));return e||n}},ES={getConnectorsByType(t,e,n){const{customWallets:r}=It.state,s=et.getRecentWallets(),i=W9.filterOutDuplicateWallets(e),o=W9.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&wt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&wt.state.excludedWallets.some(i=>Qi.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ut.isMobile()||ut.isMobile()&&!e&&!st.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(Y.state.chains.values()).some(n=>it.getConnectorId(n.namespace)===pe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=It.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:It.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),f=new Set(h.map(y=>y.type)),p=c.filter(y=>f.has(y)).map(y=>({type:y,isEnabled:!0})),g=h.filter(({type:y})=>!p.some(({type:w})=>w===y));return Array.from(new Set([...p,...g].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ut.isMobile())return{accounts:[],chainId:void 0};if(t.id===pe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Gu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Gu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Gu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const _S={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([_S.getAddresses(t),_S.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:_S.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Ro.NetworkImageIds[e.id]]}]})}},Km={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function i1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const H9=i1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),G9=i1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});i1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});i1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});i1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const O9e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},og={getMethodsByChainNamespace(t){return O9e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case H9.caipNetworkId:u.chains.push(H9.deprecatedCaipNetworkId);break;case G9.caipNetworkId:u.chains.push(G9.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await vS.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=og.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(og.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>ut.isCaipAddress(d)).map(d=>Oh.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Oh.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class k9e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case pe.CHAIN.EVM:await this.syncEVMConnections(e);break;case pe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case pe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const c=og.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await ES.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==pe.CONNECTOR_ID.AUTH&&a.id!==pe.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const c=og.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,y,m;if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const w=og.getWalletConnectAccounts(r,this.namespace);w.length>0&&i({connectorId:a.id,accounts:w.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(w=>ut.createAccount(pe.CHAIN.BITCOIN,w.address,w.purpose||"payment",w.publicKey,w.path));if(u&&u.length>1&&(u=[{namespace:pe.CHAIN.BITCOIN,publicKey:((h=u[Km.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[Km.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[Km.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:pe.CHAIN.BITCOIN,publicKey:((g=u[Km.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((y=u[Km.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.path)??"",address:((m=u[Km.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.address)??"",type:"ordinal"}]),!(a.chains.find(w=>w.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(w=>({address:w.address,type:w.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>Qi.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>Qi.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Qi.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Qi.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Qi.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class QX{constructor({provider:e,namespace:n}){this.id=pe.CONNECTOR_ID.WALLET_CONNECT,this.name=Ro.ConnectorNamesMap[pe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Ro.ConnectorImageIds[pe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=Y.getCaipNetworks.bind(Y),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=It.state.universalProviderConfigOverride,s=og.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return qd.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:D9e})}}const D9e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],L9e=[pe.CONNECTOR_ID.AUTH,pe.CONNECTOR_ID.WALLET_CONNECT];class M9e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>Y.getCaipNetworks(n),this.getConnectorId=n=>it.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new k9e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:pe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:pe.CONNECTOR_ID.AUTH,type:"AUTH",name:pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ro.ConnectorImageIds[pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Qi.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){yn.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Bl(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof QX);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ut.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ut.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=ut.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Qi.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=ut.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Qi.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?_S.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Qi.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(L9e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function U9e(t){let e=[],n,r;function s(a){return rx.parseEvmChainId(a)||1}function i(){var a;return n||(n=Gy.getInstance({projectId:t.options.projectId,chainId:(a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Gf.open(Od.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Gf.open(Od.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Gf.open(Od.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Od.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>Y.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const y=rx.parseEvmChainId(c.getLastUsedChainId()||""),m=(g=t.chains)==null?void 0:g[0].id;if(l=y||m,!l)throw new Error("ChainId not found in provider")}const u=Bl("eip155"),{address:d,chainId:h,accounts:f}=await qd.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:pe.CHAIN.EVM});e=(f==null?void 0:f.map(y=>y.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:pe.CONNECTOR_ID.AUTH,name:pe.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:pe.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Gy.getInstance({projectId:t.options.projectId,chainId:(c=Y.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Od.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Gf.open(Od.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Gf.open(Od.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Gf.open(Od.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>Y.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=Y.state.activeChain===pe.CHAIN.EVM;if(pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>it.getConnectorId(h)===pe.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new kl(new Error("chain not found on connector."));const d=await this.getProvider(),h=Bl("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new kl(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Mu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}CU.type="walletConnect";function CU(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:CU.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=Y.getCaipNetworks(),y=await this.getProvider();if(!y)throw new Wd;a||(a=this.onDisplayUri,y.on("display_uri",a));const m=await this.isChainsStale();y.session&&m&&await y.disconnect();const w=It.state.universalProviderConfigOverride;if(!y.session||m){const I=og.createNamespaces(g,w);await y.connect({optionalNamespaces:I,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(k=>Number(k.id)))}const v=await this.getAccounts(),A=await this.getChainId(),C=(p=(f=(h=y.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,S=C==null?void 0:C.some(I=>Number(I.split(":")[1])===A);let x=1;S?x=A:C!=null&&C[0]&&(x=Number(C[0].split(":")[1])),a&&(y.removeListener("display_uri",a),a=void 0),o&&(y.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),y.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),y.on("session_delete",c));const T=w==null?void 0:w.defaultChain;return y.setDefaultChain(T??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new jr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var y,m,w;const d=await this.getProvider();if(!((y=d==null?void 0:d.session)!=null&&y.namespaces))return[];const h=(w=(m=d==null?void 0:d.session)==null?void 0:m.namespaces[pe.CHAIN.EVM])==null?void 0:w.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=et.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const y=et.getStoredActiveCaipNetworkId(),m=h?e.getCaipNetworks(h):[],w=m==null?void 0:m.find(v=>v.id===y);w&&w.chainNamespace===pe.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(w.id)}))}return r},async getChainId(){var g,y,m,w;const d=(g=e.getCaipNetwork(pe.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(w=(m=(y=(await this.getProvider()).session)==null?void 0:y.namespaces[pe.CHAIN.EVM])==null?void 0:m.chains)==null?void 0:w[0],p=Y.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,y,m,w;const f=await this.getProvider();if(!f)throw new Wd;const p=Y.getCaipNetworks().find(v=>v.id===h);if(!p)throw new kl(new r_);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new jr(A);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];const S=((w=(m=p.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:w.http)||[],x={blockExplorerUrls:C,chainId:nt(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:S};await f.request({method:"wallet_addEthereumChain",params:[x]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(C){throw new jr(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Mu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(Y.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[pe.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(y=>Number.parseInt(y.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const rv=tr({pendingTransactions:0}),q9={state:rv,subscribeKey(t,e){return Si(rv,t,e)},increase(t){rv[t]+=1},decrease(t){rv[t]-=1},reset(t){rv[t]=0}};function $9e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function B9e(t){if(ut.isSafeApp()){const{safe:e}=await Ks(async()=>{const{safe:n}=await import("./index-HUqmCBXT.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function F9e(t){try{const{coinbaseWallet:e}=await Ks(async()=>{const{coinbaseWallet:n}=await import("./index-HUqmCBXT.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const j9e={enable:!1,pollingInterval:3e4};class z9e extends M9e{constructor(e){const n=_v.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=pe.CHAIN.EVM,this.adapterType=pe.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...j9e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===pe.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ut.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=By(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ut.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=By(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===pe.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=_v.getCaipNetworkId(s);i?n[s.id]=_v.extendWagmiTransports(s,e.projectId,i):n[s.id]=_v.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=uye({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=Hme(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),q9.increase("pendingTransactions")}});const e=q9.subscribeKey("pendingTransactions",n=>{var r;n>=pe.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){VK(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),KK(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===pe.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:et.getConnectedSocialProvider(),username:et.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await F9e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await B9e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(CU(e,n)),e.enableEIP6963!==!1&&r.push(wN({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(U9e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Ro.ConnectorNamesMap[r.id]??r.name,imageId:Ro.ConnectorImageIds[r.id],type:Ro.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===pe.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await jme(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=By(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Bme(this.wagmiConfig,s);const i=await Fme(this.wagmiConfig,s);return await QK(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(rx.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await JK(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await Ome(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return dge(e.value,e.decimals)}formatUnits(e){return Yg(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===pe.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===pe.CONNECTOR_ID.AUTH||e.id===pe.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Ro.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Ro.ConnectorNamesMap[e.id]??e.name,imageId:Ro.ConnectorImageIds[e.id],type:Ro.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===pe.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){YK(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Za(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(ut.isSafeApp()&&n===pe.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await tS(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await tS(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await e8(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,y;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===pe.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const m=[...u.accounts].sort((w,v)=>Qi.isLowerCaseMatch(w,r)?-1:Qi.isLowerCaseMatch(v,r)?1:0);return(y=this.wagmiConfig)==null||y.setState(w=>({...w,connections:new Map(w.connections).set(l.uid,{accounts:m,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:m[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await tS(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await $k(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=et.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await Lme(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});et.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=Za(this.wagmiConfig).find(i=>Qi.isLowerCaseMatch(i.connector.id,e.id));return await Mk(this.wagmiConfig,{connector:n}),It.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=Za(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await Mk(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await e8(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Za(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=$9e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Za(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Za(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Za(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:pe.CONNECTOR_ID.AUTH,type:"AUTH",name:pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ro.ConnectorImageIds[pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=Za(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(Y.state.activeChain==="eip155")return;$k(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new QX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const JX={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},ZX="7c65f27254d6ddd24cf7eedf2685c4fb",W9e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},XX=new z9e({networks:[RX,JX],projectId:ZX,ssr:!1});j8e({adapters:[XX],networks:[RX,JX],projectId:ZX,metadata:W9e,features:{analytics:!1}});const AU=()=>{if(!YS)throw new Error("[FIREBASE] Database not initialized");return YS},$g=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,ix=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=AU(),s=_o(r,`leaderboard/${t}`),i=await Yf(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await Dv(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",$g(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},H9e=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:$g(e),redPlayer:$g(n)}),await ix(e,t==="blue"?"win":t==="red"?"loss":"draw"),await ix(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},eee=async(t=20)=>{try{const e=AU(),n=_o(e,"leaderboard"),r=await Yf(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},tee=async()=>{try{const t=AU(),e=_o(t,"leaderboard/0x0000000000000000000000000000000000000000");return await hH(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},Hc=()=>{if(!YS)throw new Error("[FIREBASE] Database not initialized");return YS},vs={async getGame(t){try{const e=Hc(),n=_o(e,`chess_games/${t}`),r=await Yf(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=Hc(),r=_o(n,`chess_games/${t}`);await Dv(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=Hc(),r=_o(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=J$(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=Hc(),r=_o(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await Dv(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await Yf(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=Hc(),e=_o(t,"chess_games"),n=await Yf(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=Hc(),e=_o(t,"chess_games"),n=await Yf(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=Hc(),n=_o(e,`chess_games/${t}`);await hH(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=Hc(),n=_o(e,`leaderboard/${t.username}`);await Dv(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=Hc(),e=_o(t,"leaderboard"),n=await Yf(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=Hc(),n=_o(e,"leaderboard");return J$(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},G9e="6.15.0";function q9e(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function li(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function mt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&q9e(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Ay(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Ay(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Ay(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Ay(r,e)}: ${Ay(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Ns(t,e){return t&&t.code===e}function SU(t){return Ns(t,"CALL_EXCEPTION")}function sr(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Ay(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Ay(a))}}i.push(`code=${e}`),i.push(`version=${G9e}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return mt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&mt(s,{shortMessage:r}),s}function me(t,e,n,r){if(!t)throw sr(e,n,r)}function J(t,e,n,r){me(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function nee(t,e,n){n==null&&(n=""),n&&(n=": "+n),me(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),me(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function pT(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),me(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function ree(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}J(!1,"invalid BytesLike value",e||"value",t)}function jt(t,e){return ree(t,e,!1)}function fi(t,e){return ree(t,e,!0)}function Yn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function IU(t){return Yn(t,!0)||t instanceof Uint8Array}const V9="0123456789abcdef";function Le(t){const e=jt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=V9[(s&240)>>4]+V9[s&15]}return n}function _r(t){return"0x"+t.map(e=>Le(e).substring(2)).join("")}function qy(t){return Yn(t,!0)?(t.length-2)/2:jt(t).length}function wr(t,e,n){const r=jt(t);return n!=null&&n>r.length&&me(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Le(r.slice(e??0,n??r.length))}function see(t,e,n){const r=jt(t);me(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Le(s)}function id(t,e){return see(t,e,!0)}function V9e(t,e){return see(t,e,!1)}const gT=BigInt(0),gc=BigInt(1),Sy=9007199254740991;function K9e(t,e){const n=mT(t,"value"),r=BigInt(zt(e,"width"));if(me(n>>r===gT,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-gc){const s=(gc<<r)-gc;return-((~n&s)+gc)}return n}function iee(t,e){let n=Xe(t,"value");const r=BigInt(zt(e,"width")),s=gc<<r-gc;if(n<gT){n=-n,me(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(gc<<r)-gc;return(~n&i)+gc}else me(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Cv(t,e){const n=mT(t,"value"),r=BigInt(zt(e,"bits"));return n&(gc<<r)-gc}function Xe(t,e){switch(typeof t){case"bigint":return t;case"number":return J(Number.isInteger(t),"underflow",e||"value",t),J(t>=-Sy&&t<=Sy,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){J(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}J(!1,"invalid BigNumberish value",e||"value",t)}function mT(t,e){const n=Xe(t,e);return me(n>=gT,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const K9="0123456789abcdef";function xU(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=K9[n>>4],e+=K9[n&15];return BigInt(e)}return Xe(t)}function zt(t,e){switch(typeof t){case"bigint":return J(t>=-Sy&&t<=Sy,"overflow",e||"value",t),Number(t);case"number":return J(Number.isInteger(t),"underflow",e||"value",t),J(t>=-Sy&&t<=Sy,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return zt(BigInt(t),e)}catch(n){J(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}J(!1,"invalid numeric value",e||"value",t)}function Y9e(t){return zt(xU(t))}function yf(t,e){let r=mT(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=zt(e,"width");for(me(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Kr(t){const e=mT(t,"value");if(e===gT)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function dc(t){let e=Le(IU(t)?t:Kr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Y9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Q9=BigInt(58);function Q9e(t){const e=jt(t);let n=xU(e),r="";for(;n;)r=Y9[Number(n%Q9)]+r,n/=Q9;for(let s=0;s<e.length&&!e[s];s++)r=Y9[0]+r;return r}function J9e(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return jt(e)}function Z9e(t){const e=jt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var cw;class oee{constructor(e,n,r){te(this,"filter");te(this,"emitter");K(this,cw);U(this,cw,n),mt(this,{emitter:e,filter:r})}async removeListener(){_(this,cw)!=null&&await this.emitter.off(this.filter,_(this,cw))}}cw=new WeakMap;function X9e(t,e,n,r,s){J(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function aee(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function e7e(t,e,n,r,s){return t==="OVERLONG"?(J(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),aee(t,e,n))}const t7e=Object.freeze({error:X9e,ignore:aee,replace:e7e});function n7e(t,e){e==null&&(e=t7e.error);const n=jt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function qu(t,e){J(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);J(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function r7e(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ox(t,e){return r7e(n7e(t,e))}function cee(t){async function e(n,r){me(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();me(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),me(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=sr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=sr("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const s7e=12,i7e=250;let J9=cee();const o7e=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),a7e=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let IO=!1;async function lee(t,e){try{const n=t.match(o7e);if(!n)throw new Error("invalid data");return new rf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?J9e(n[3]):l7e(n[3]))}catch{return new rf(599,"BAD REQUEST (invalid data: URI)",{},null,new wf(t))}}function uee(t){async function e(n,r){try{const s=n.match(a7e);if(!s)throw new Error("invalid link");return new wf(`${t}${s[2]}`)}catch{return new rf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new wf(n))}}return e}const TA={data:lee,ipfs:uee("https://gateway.ipfs.io/ipfs/")},dee=new WeakMap;var Op,ch;class c7e{constructor(e){K(this,Op);K(this,ch);U(this,Op,[]),U(this,ch,!1),dee.set(e,()=>{if(!_(this,ch)){U(this,ch,!0);for(const n of _(this,Op))setTimeout(()=>{n()},0);U(this,Op,[])}})}addListener(e){me(!_(this,ch),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),_(this,Op).push(e)}get cancelled(){return _(this,ch)}checkSignal(){me(!this.cancelled,"cancelled","CANCELLED",{})}}Op=new WeakMap,ch=new WeakMap;function RA(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var lw,uw,nc,bu,dw,hw,ts,Ao,vu,kp,Dp,Lp,el,rc,lh,Mp,Av;const wx=class wx{constructor(e){K(this,Mp);K(this,lw);K(this,uw);K(this,nc);K(this,bu);K(this,dw);K(this,hw);K(this,ts);K(this,Ao);K(this,vu);K(this,kp);K(this,Dp);K(this,Lp);K(this,el);K(this,rc);K(this,lh);U(this,hw,String(e)),U(this,lw,!1),U(this,uw,!0),U(this,nc,{}),U(this,bu,""),U(this,dw,3e5),U(this,rc,{slotInterval:i7e,maxAttempts:s7e}),U(this,lh,null)}get url(){return _(this,hw)}set url(e){U(this,hw,String(e))}get body(){return _(this,ts)==null?null:new Uint8Array(_(this,ts))}set body(e){if(e==null)U(this,ts,void 0),U(this,Ao,void 0);else if(typeof e=="string")U(this,ts,qu(e)),U(this,Ao,"text/plain");else if(e instanceof Uint8Array)U(this,ts,e),U(this,Ao,"application/octet-stream");else if(typeof e=="object")U(this,ts,qu(JSON.stringify(e))),U(this,Ao,"application/json");else throw new Error("invalid body")}hasBody(){return _(this,ts)!=null}get method(){return _(this,bu)?_(this,bu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),U(this,bu,String(e).toUpperCase())}get headers(){const e=Object.assign({},_(this,nc));return _(this,vu)&&(e.authorization=`Basic ${Z9e(qu(_(this,vu)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&_(this,Ao)&&(e["content-type"]=_(this,Ao)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){_(this,nc)[String(e).toLowerCase()]=String(n)}clearHeaders(){U(this,nc,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return _(this,vu)||null}setCredentials(e,n){J(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),U(this,vu,`${e}:${n}`)}get allowGzip(){return _(this,uw)}set allowGzip(e){U(this,uw,!!e)}get allowInsecureAuthentication(){return!!_(this,lw)}set allowInsecureAuthentication(e){U(this,lw,!!e)}get timeout(){return _(this,dw)}set timeout(e){J(e>=0,"timeout must be non-zero","timeout",e),U(this,dw,e)}get preflightFunc(){return _(this,kp)||null}set preflightFunc(e){U(this,kp,e)}get processFunc(){return _(this,Dp)||null}set processFunc(e){U(this,Dp,e)}get retryFunc(){return _(this,Lp)||null}set retryFunc(e){U(this,Lp,e)}get getUrlFunc(){return _(this,lh)||J9}set getUrlFunc(e){U(this,lh,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${_(this,ts)?Le(_(this,ts)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(_(this,rc).slotInterval=e.slotInterval),e.maxAttempts!=null&&(_(this,rc).maxAttempts=e.maxAttempts)}send(){return me(_(this,el)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),U(this,el,new c7e(this)),fe(this,Mp,Av).call(this,0,Z9()+this.timeout,0,this,new rf(0,"",{},null,this))}cancel(){me(_(this,el)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=dee.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();me(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new wx(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,U(s,nc,Object.assign({},_(this,nc))),_(this,ts)&&U(s,ts,new Uint8Array(_(this,ts))),U(s,Ao,_(this,Ao)),s}clone(){const e=new wx(this.url);return U(e,bu,_(this,bu)),_(this,ts)&&U(e,ts,_(this,ts)),U(e,Ao,_(this,Ao)),U(e,nc,Object.assign({},_(this,nc))),U(e,vu,_(this,vu)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),U(e,kp,_(this,kp)),U(e,Dp,_(this,Dp)),U(e,Lp,_(this,Lp)),U(e,rc,Object.assign({},_(this,rc))),U(e,lh,_(this,lh)),e}static lockConfig(){IO=!0}static getGateway(e){return TA[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(IO)throw new Error("gateways locked");TA[e]=n}static registerGetUrl(e){if(IO)throw new Error("gateways locked");J9=e}static createGetUrlFunc(e){return cee(e)}static createDataGateway(){return lee}static createIpfsGatewayFunc(e){return uee(e)}};lw=new WeakMap,uw=new WeakMap,nc=new WeakMap,bu=new WeakMap,dw=new WeakMap,hw=new WeakMap,ts=new WeakMap,Ao=new WeakMap,vu=new WeakMap,kp=new WeakMap,Dp=new WeakMap,Lp=new WeakMap,el=new WeakMap,rc=new WeakMap,lh=new WeakMap,Mp=new WeakSet,Av=async function(e,n,r,s,i){var u,d,h;if(e>=_(this,rc).maxAttempts)return i.makeServerError("exceeded maximum retry limit");me(Z9()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await u7e(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in TA){const f=await TA[a](o.url,RA(_(s,el)));if(f instanceof rf){let p=f;if(this.processFunc){RA(_(s,el));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,RA(_(s,el)));let l=new rf(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return fe(u=o.redirect(f),Mp,Av).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=_(this,rc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),fe(d=o.clone(),Mp,Av).call(d,e+1,n,p,s,l)}if(this.processFunc){RA(_(s,el));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=_(this,rc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),fe(h=o.clone(),Mp,Av).call(h,e+1,n,p,s,l)}}return l};let wf=wx;var eC,tC,nC,So,fw,Up;const GU=class GU{constructor(e,n,r,s,i){K(this,eC);K(this,tC);K(this,nC);K(this,So);K(this,fw);K(this,Up);U(this,eC,e),U(this,tC,n),U(this,nC,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),U(this,So,s==null?null:new Uint8Array(s)),U(this,fw,i||null),U(this,Up,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${_(this,So)?Le(_(this,So)):"null"}>`}get statusCode(){return _(this,eC)}get statusMessage(){return _(this,tC)}get headers(){return Object.assign({},_(this,nC))}get body(){return _(this,So)==null?null:new Uint8Array(_(this,So))}get bodyText(){try{return _(this,So)==null?"":ox(_(this,So))}catch{me(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{me(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new GU(599,r,this.headers,this.body,_(this,fw)||void 0);return U(s,Up,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:J(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw mt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return _(this,So)!=null}get request(){return _(this,fw)}ok(){return _(this,Up).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=_(this,Up);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{_(this,So)&&(s=ox(_(this,So)))}catch{}me(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};eC=new WeakMap,tC=new WeakMap,nC=new WeakMap,So=new WeakMap,fw=new WeakMap,Up=new WeakMap;let rf=GU;function Z9(){return new Date().getTime()}function l7e(t){return qu(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function u7e(t){return new Promise(e=>setTimeout(e,t))}function d7e(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function X9(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function e7(t,e,n,r){const s=[];for(;n<e+1+r;){const i=hee(t,n);s.push(i.result),n+=i.consumed,me(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function hee(t,e){me(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{me(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=X9(t,e+1,r);return n(e+1+r+s),e7(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),e7(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=X9(t,e+1,r);n(e+1+r+s);const i=Le(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Le(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:d7e(t[e])}}function o1(t){const e=jt(t,"data"),n=hee(e,0);return J(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function t7(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function fee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(fee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=t7(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(jt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=t7(e.length);return n.unshift(183+n.length),n.concat(e)}const n7="0123456789abcdef";function bf(t){let e="0x";for(const n of fee(t))e+=n7[n>>4],e+=n7[n&15];return e}const mi=32,T3=new Uint8Array(mi),h7e=["then"],PA={},pee=new WeakMap;function tp(t){return pee.get(t)}function r7(t,e){pee.set(t,e)}function sv(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function R3(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof P0?R3(tp(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof P0&&(o=R3(tp(o),o,n)),r[s]=o),r},{})}var pw;const Iy=class Iy extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==PA&&(s=n,i=[],o=!1);super(s.length);K(this,pw);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(r7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),U(this,pw,[]),_(this,pw)==null&&_(this,pw),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=zt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&sv(`index ${f}`,p),p}if(h7e.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return r7(c,tp(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&sv(`index ${i}`,s),n&&s instanceof Iy&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=tp(this);return r.reduce((s,i,o)=>(me(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),R3(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=tp(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Iy(PA,i,o)}filter(n,r){const s=tp(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&sv(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Iy(PA,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&sv(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=tp(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&sv(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Iy(PA,n,r)}};pw=new WeakMap;let P0=Iy;function s7(t){let e=Kr(t);return me(e.length<=mi,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:mi,offset:e.length}),e.length!==mi&&(e=fi(_r([T3.slice(e.length%mi),e]))),e}class hd{constructor(e,n,r,s){te(this,"name");te(this,"type");te(this,"localName");te(this,"dynamic");mt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){J(!1,e,this.localName,n)}}var Eu,$p,gw,CS;class P3{constructor(){K(this,gw);K(this,Eu);K(this,$p);U(this,Eu,[]),U(this,$p,0)}get data(){return _r(_(this,Eu))}get length(){return _(this,$p)}appendWriter(e){return fe(this,gw,CS).call(this,fi(e.data))}writeBytes(e){let n=fi(e);const r=n.length%mi;return r&&(n=fi(_r([n,T3.slice(r)]))),fe(this,gw,CS).call(this,n)}writeValue(e){return fe(this,gw,CS).call(this,s7(e))}writeUpdatableValue(){const e=_(this,Eu).length;return _(this,Eu).push(T3),U(this,$p,_(this,$p)+mi),n=>{_(this,Eu)[e]=s7(n)}}}Eu=new WeakMap,$p=new WeakMap,gw=new WeakSet,CS=function(e){return _(this,Eu).push(e),U(this,$p,_(this,$p)+e.length),e.length};var ji,Io,Bp,Fp,uh,Wg,k3,gee;const qU=class qU{constructor(e,n,r){K(this,Wg);te(this,"allowLoose");K(this,ji);K(this,Io);K(this,Bp);K(this,Fp);K(this,uh);mt(this,{allowLoose:!!n}),U(this,ji,fi(e)),U(this,Bp,0),U(this,Fp,null),U(this,uh,r??1024),U(this,Io,0)}get data(){return Le(_(this,ji))}get dataLength(){return _(this,ji).length}get consumed(){return _(this,Io)}get bytes(){return new Uint8Array(_(this,ji))}subReader(e){const n=new qU(_(this,ji).slice(_(this,Io)+e),this.allowLoose,_(this,uh));return U(n,Fp,this),n}readBytes(e,n){let r=fe(this,Wg,gee).call(this,0,e,!!n);return fe(this,Wg,k3).call(this,e),U(this,Io,_(this,Io)+r.length),r.slice(0,e)}readValue(){return xU(this.readBytes(mi))}readIndex(){return Y9e(this.readBytes(mi))}};ji=new WeakMap,Io=new WeakMap,Bp=new WeakMap,Fp=new WeakMap,uh=new WeakMap,Wg=new WeakSet,k3=function(e){var n;if(_(this,Fp))return fe(n=_(this,Fp),Wg,k3).call(n,e);U(this,Bp,_(this,Bp)+e),me(_(this,uh)<1||_(this,Bp)<=_(this,uh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${_(this,uh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:fi(_(this,ji)),offset:_(this,Io),length:e,info:{bytesRead:_(this,Bp),dataLength:this.dataLength}})},gee=function(e,n,r){let s=Math.ceil(n/mi)*mi;return _(this,Io)+s>_(this,ji).length&&(this.allowLoose&&r&&_(this,Io)+n<=_(this,ji).length?s=n:me(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:fi(_(this,ji)),length:_(this,ji).length,offset:_(this,Io)+s})),_(this,ji).slice(_(this,Io),_(this,Io)+s)};let O3=qU;function ax(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function NU(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function f7e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ax(t.outputLen),ax(t.blockLen)}function O0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function mee(t,e){NU(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const xO=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yee=t=>t instanceof Uint8Array,p7e=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),NO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Gc=(t,e)=>t<<32-e|t>>>e,g7e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!g7e)throw new Error("Non little-endian hardware is not supported");function m7e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function yT(t){if(typeof t=="string"&&(t=m7e(t)),!yee(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function y7e(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!yee(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class TU{clone(){return this._cloneInto()}}function RU(t){const e=r=>t().update(yT(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function w7e(t=32){if(xO&&typeof xO.getRandomValues=="function")return xO.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class wee extends TU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,f7e(e);const r=yT(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return O0(this),this.iHash.update(e),this}digestInto(e){O0(this),NU(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const bee=(t,e,n)=>new wee(t,e).update(n).digest();bee.create=(t,e)=>new wee(t,e);function b7e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class vee extends TU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=NO(this.buffer)}update(e){O0(this);const{view:n,buffer:r,blockLen:s}=this;e=yT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=NO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){O0(this),mee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;b7e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=NO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const v7e=(t,e,n)=>t&e^~t&n,E7e=(t,e,n)=>t&e^t&n^e&n,_7e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dd=new Uint32Array(64);class C7e extends vee{constructor(){super(64,32,8,!1),this.A=kd[0]|0,this.B=kd[1]|0,this.C=kd[2]|0,this.D=kd[3]|0,this.E=kd[4]|0,this.F=kd[5]|0,this.G=kd[6]|0,this.H=kd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Dd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Dd[d-15],f=Dd[d-2],p=Gc(h,7)^Gc(h,18)^h>>>3,g=Gc(f,17)^Gc(f,19)^f>>>10;Dd[d]=g+Dd[d-7]+p+Dd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Gc(a,6)^Gc(a,11)^Gc(a,25),f=u+h+v7e(a,c,l)+_7e[d]+Dd[d]|0,g=(Gc(r,2)^Gc(r,13)^Gc(r,22))+E7e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Dd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Eee=RU(()=>new C7e),OA=BigInt(2**32-1),D3=BigInt(32);function _ee(t,e=!1){return e?{h:Number(t&OA),l:Number(t>>D3&OA)}:{h:Number(t>>D3&OA)|0,l:Number(t&OA)|0}}function Cee(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=_ee(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const A7e=(t,e)=>BigInt(t>>>0)<<D3|BigInt(e>>>0),S7e=(t,e,n)=>t>>>n,I7e=(t,e,n)=>t<<32-n|e>>>n,x7e=(t,e,n)=>t>>>n|e<<32-n,N7e=(t,e,n)=>t<<32-n|e>>>n,T7e=(t,e,n)=>t<<64-n|e>>>n-32,R7e=(t,e,n)=>t>>>n-32|e<<64-n,P7e=(t,e)=>e,O7e=(t,e)=>t,Aee=(t,e,n)=>t<<n|e>>>32-n,See=(t,e,n)=>e<<n|t>>>32-n,Iee=(t,e,n)=>e<<n-32|t>>>64-n,xee=(t,e,n)=>t<<n-32|e>>>64-n;function k7e(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const D7e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),L7e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,M7e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),U7e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,$7e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),B7e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Lt={fromBig:_ee,split:Cee,toBig:A7e,shrSH:S7e,shrSL:I7e,rotrSH:x7e,rotrSL:N7e,rotrBH:T7e,rotrBL:R7e,rotr32H:P7e,rotr32L:O7e,rotlSH:Aee,rotlSL:See,rotlBH:Iee,rotlBL:xee,add:k7e,add3L:D7e,add3H:L7e,add4L:M7e,add4H:U7e,add5H:B7e,add5L:$7e},[F7e,j7e]=Lt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ld=new Uint32Array(80),Md=new Uint32Array(80);class z7e extends vee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)Ld[v]=e.getUint32(n),Md[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Ld[v-15]|0,C=Md[v-15]|0,S=Lt.rotrSH(A,C,1)^Lt.rotrSH(A,C,8)^Lt.shrSH(A,C,7),x=Lt.rotrSL(A,C,1)^Lt.rotrSL(A,C,8)^Lt.shrSL(A,C,7),T=Ld[v-2]|0,I=Md[v-2]|0,k=Lt.rotrSH(T,I,19)^Lt.rotrBH(T,I,61)^Lt.shrSH(T,I,6),O=Lt.rotrSL(T,I,19)^Lt.rotrBL(T,I,61)^Lt.shrSL(T,I,6),B=Lt.add4L(x,O,Md[v-7],Md[v-16]),G=Lt.add4H(B,S,k,Ld[v-7],Ld[v-16]);Ld[v]=G|0,Md[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:m,Hl:w}=this;for(let v=0;v<80;v++){const A=Lt.rotrSH(d,h,14)^Lt.rotrSH(d,h,18)^Lt.rotrBH(d,h,41),C=Lt.rotrSL(d,h,14)^Lt.rotrSL(d,h,18)^Lt.rotrBL(d,h,41),S=d&f^~d&g,x=h&p^~h&y,T=Lt.add5L(w,C,x,j7e[v],Md[v]),I=Lt.add5H(T,m,A,S,F7e[v],Ld[v]),k=T|0,O=Lt.rotrSH(r,s,28)^Lt.rotrBH(r,s,34)^Lt.rotrBH(r,s,39),B=Lt.rotrSL(r,s,28)^Lt.rotrBL(r,s,34)^Lt.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,w=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Lt.add(l|0,u|0,I|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const R=Lt.add3L(k,B,W);r=Lt.add3H(R,I,O,G),s=R|0}({h:r,l:s}=Lt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Lt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Lt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Lt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Lt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Lt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Lt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:m,l:w}=Lt.add(this.Hh|0,this.Hl|0,m|0,w|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,m,w)}roundClean(){Ld.fill(0),Md.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const W7e=RU(()=>new z7e);function H7e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const i7=H7e();i7.crypto||i7.msCrypto;function G7e(t){switch(t){case"sha256":return Eee.create();case"sha512":return W7e.create()}J(!1,"invalid hashing algorithm name","algorithm",t)}const[Nee,Tee,Ree]=[[],[],[]],q7e=BigInt(0),iv=BigInt(1),V7e=BigInt(2),K7e=BigInt(7),Y7e=BigInt(256),Q7e=BigInt(113);for(let t=0,e=iv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Nee.push(2*(5*r+n)),Tee.push((t+1)*(t+2)/2%64);let s=q7e;for(let i=0;i<7;i++)e=(e<<iv^(e>>K7e)*Q7e)%Y7e,e&V7e&&(s^=iv<<(iv<<BigInt(i))-iv);Ree.push(s)}const[J7e,Z7e]=Cee(Ree,!0),o7=(t,e,n)=>n>32?Iee(t,e,n):Aee(t,e,n),a7=(t,e,n)=>n>32?xee(t,e,n):See(t,e,n);function X7e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=o7(l,u,1)^n[a],h=a7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Tee[o],c=o7(s,i,a),l=a7(s,i,a),u=Nee[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=J7e[r],t[1]^=Z7e[r]}n.fill(0)}class PU extends TU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ax(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=p7e(this.state)}keccak(){X7e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){O0(this);const{blockLen:n,state:r}=this;e=yT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){O0(this,!1),NU(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ax(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(mee(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new PU(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const eze=(t,e,n)=>RU(()=>new PU(e,t,n)),tze=eze(1,136,256/8);let Pee=!1;const Oee=function(t){return tze(t)};let kee=Oee;function Lr(t){const e=jt(t,"data");return Le(kee(e))}Lr._=Oee;Lr.lock=function(){Pee=!0};Lr.register=function(t){if(Pee)throw new TypeError("keccak256 is locked");kee=t};Object.freeze(Lr);const Dee=function(t){return G7e("sha256").update(t).digest()};let Lee=Dee,Mee=!1;function pb(t){const e=jt(t,"data");return Le(Lee(e))}pb._=Dee;pb.lock=function(){Mee=!0};pb.register=function(t){if(Mee)throw new Error("sha256 is locked");Lee=t};Object.freeze(pb);Object.freeze(pb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uee=BigInt(0),wT=BigInt(1),nze=BigInt(2),bT=t=>t instanceof Uint8Array,rze=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function k0(t){if(!bT(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=rze[t[n]];return e}function $ee(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function OU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function D0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function ag(t){return OU(k0(t))}function kU(t){if(!bT(t))throw new Error("Uint8Array expected");return OU(k0(Uint8Array.from(t).reverse()))}function L0(t,e){return D0(t.toString(16).padStart(e*2,"0"))}function DU(t,e){return L0(t,e).reverse()}function sze(t){return D0($ee(t))}function Xa(t,e,n){let r;if(typeof e=="string")try{r=D0(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(bT(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function B_(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!bT(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function ize(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function oze(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function aze(t){let e;for(e=0;t>Uee;t>>=wT,e+=1);return e}function cze(t,e){return t>>BigInt(e)&wT}const lze=(t,e,n)=>t|(n?wT:Uee)<<BigInt(e),LU=t=>(nze<<BigInt(t-1))-wT,TO=t=>new Uint8Array(t),c7=t=>Uint8Array.from(t);function Bee(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=TO(t),s=TO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=TO())=>{s=a(c7([0]),d),r=a(),d.length!==0&&(s=a(c7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return B_(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const uze={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function a1(t,e,n={}){const r=(s,i,o)=>{const a=uze[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const dze=Object.freeze(Object.defineProperty({__proto__:null,bitGet:cze,bitLen:aze,bitMask:LU,bitSet:lze,bytesToHex:k0,bytesToNumberBE:ag,bytesToNumberLE:kU,concatBytes:B_,createHmacDrbg:Bee,ensureBytes:Xa,equalBytes:ize,hexToBytes:D0,hexToNumber:OU,numberToBytesBE:L0,numberToBytesLE:DU,numberToHexUnpadded:$ee,numberToVarBytesBE:sze,utf8ToBytes:oze,validateObject:a1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fs=BigInt(0),Rr=BigInt(1),np=BigInt(2),hze=BigInt(3),L3=BigInt(4),l7=BigInt(5),u7=BigInt(8);BigInt(9);BigInt(16);function Vi(t,e){const n=t%e;return n>=fs?n:e+n}function fze(t,e,n){if(n<=fs||e<fs)throw new Error("Expected power/modulo > 0");if(n===Rr)return fs;let r=Rr;for(;e>fs;)e&Rr&&(r=r*t%n),t=t*t%n,e>>=Rr;return r}function na(t,e,n){let r=t;for(;e-- >fs;)r*=r,r%=n;return r}function M3(t,e){if(t===fs||e<=fs)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Vi(t,e),r=e,s=fs,i=Rr;for(;n!==fs;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Rr)throw new Error("invert: does not exist");return Vi(s,e)}function pze(t){const e=(t-Rr)/np;let n,r,s;for(n=t-Rr,r=0;n%np===fs;n/=np,r++);for(s=np;s<t&&fze(s,e,t)!==t-Rr;s++);if(r===1){const o=(t+Rr)/L3;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Rr)/np;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Rr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function gze(t){if(t%L3===hze){const e=(t+Rr)/L3;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%u7===l7){const e=(t-l7)/u7;return function(r,s){const i=r.mul(s,np),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,np),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return pze(t)}const mze=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yze(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=mze.reduce((r,s)=>(r[s]="function",r),e);return a1(t,n)}function wze(t,e,n){if(n<fs)throw new Error("Expected power > 0");if(n===fs)return t.ONE;if(n===Rr)return e;let r=t.ONE,s=e;for(;n>fs;)n&Rr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Rr;return r}function bze(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Fee(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function vze(t,e,n=!1,r={}){if(t<=fs)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Fee(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=gze(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:LU(s),ZERO:fs,ONE:Rr,create:c=>Vi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return fs<=c&&c<t},is0:c=>c===fs,isOdd:c=>(c&Rr)===Rr,neg:c=>Vi(-c,t),eql:(c,l)=>c===l,sqr:c=>Vi(c*c,t),add:(c,l)=>Vi(c+l,t),sub:(c,l)=>Vi(c-l,t),mul:(c,l)=>Vi(c*l,t),pow:(c,l)=>wze(a,c,l),div:(c,l)=>Vi(c*M3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>M3(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>bze(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?DU(c,i):L0(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?kU(c):ag(c)}});return Object.freeze(a)}function jee(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function zee(t){const e=jee(t);return e+Math.ceil(e/2)}function Eze(t,e,n=!1){const r=t.length,s=jee(e),i=zee(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?ag(t):kU(t),a=Vi(o,e-Rr)+Rr;return n?DU(a,s):L0(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _ze=BigInt(0),RO=BigInt(1);function Cze(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>_ze;)i&RO&&(o=o.add(a)),a=a.double(),i>>=RO;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let y=Number(o&d);o>>=f,y>c&&(y-=h,o+=RO);const m=g,w=g+Math.abs(y)-1,v=p%2!==0,A=y<0;y===0?u=u.add(n(v,i[m])):l=l.add(n(A,i[w]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function Wee(t){return yze(t.Fp),a1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Fee(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Aze(t){const e=Wee(t);a1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Sze,hexToBytes:Ize}=dze,vp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=vp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Sze(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=vp,n=typeof t=="string"?Ize(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=vp._parseInt(n.subarray(2)),{d:o,l:a}=vp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Ou=BigInt(0),ga=BigInt(1);BigInt(2);const d7=BigInt(3);BigInt(4);function xze(t){const e=Aze(t),{Fp:n}=e,r=e.toBytes||((p,g,y)=>{const m=g.toAffine();return B_(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),m=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:m}});function i(p){const{a:g,b:y}=e,m=n.sqr(p),w=n.mul(m,p);return n.add(n.add(w,n.mul(p,g)),y)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Ou<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:m,n:w}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=k0(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let v;try{v=typeof p=="bigint"?p:ag(Xa("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return m&&(v=Vi(v,w)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,y,m){if(this.px=g,this.py=y,this.pz=m,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(g){const{x:y,y:m}=g||{};if(!g||!n.isValid(y)||!n.isValid(m))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const w=v=>n.eql(v,n.ZERO);return w(y)&&w(m)?d.ZERO:new d(y,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(m=>m.pz));return g.map((m,w)=>m.toAffine(y[w])).map(d.fromAffine)}static fromHex(g){const y=d.fromAffine(s(Xa("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const m=n.sqr(y),w=i(g);if(!n.eql(m,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:m,pz:w}=this,{px:v,py:A,pz:C}=g,S=n.eql(n.mul(y,C),n.mul(v,w)),x=n.eql(n.mul(m,C),n.mul(A,w));return S&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,m=n.mul(y,d7),{px:w,py:v,pz:A}=this;let C=n.ZERO,S=n.ZERO,x=n.ZERO,T=n.mul(w,w),I=n.mul(v,v),k=n.mul(A,A),O=n.mul(w,v);return O=n.add(O,O),x=n.mul(w,A),x=n.add(x,x),C=n.mul(g,x),S=n.mul(m,k),S=n.add(C,S),C=n.sub(I,S),S=n.add(I,S),S=n.mul(C,S),C=n.mul(O,C),x=n.mul(m,x),k=n.mul(g,k),O=n.sub(T,k),O=n.mul(g,O),O=n.add(O,x),x=n.add(T,T),T=n.add(x,T),T=n.add(T,k),T=n.mul(T,O),S=n.add(S,T),k=n.mul(v,A),k=n.add(k,k),T=n.mul(k,O),C=n.sub(C,T),x=n.mul(k,I),x=n.add(x,x),x=n.add(x,x),new d(C,S,x)}add(g){u(g);const{px:y,py:m,pz:w}=this,{px:v,py:A,pz:C}=g;let S=n.ZERO,x=n.ZERO,T=n.ZERO;const I=e.a,k=n.mul(e.b,d7);let O=n.mul(y,v),B=n.mul(m,A),G=n.mul(w,C),W=n.add(y,m),R=n.add(v,A);W=n.mul(W,R),R=n.add(O,B),W=n.sub(W,R),R=n.add(y,w);let N=n.add(v,C);return R=n.mul(R,N),N=n.add(O,G),R=n.sub(R,N),N=n.add(m,w),S=n.add(A,C),N=n.mul(N,S),S=n.add(B,G),N=n.sub(N,S),T=n.mul(I,R),S=n.mul(k,G),T=n.add(S,T),S=n.sub(B,T),T=n.add(B,T),x=n.mul(S,T),B=n.add(O,O),B=n.add(B,O),G=n.mul(I,G),R=n.mul(k,R),B=n.add(B,G),G=n.sub(O,G),G=n.mul(I,G),R=n.add(R,G),O=n.mul(B,R),x=n.add(x,O),O=n.mul(N,R),S=n.mul(W,S),S=n.sub(S,O),O=n.mul(W,B),T=n.mul(N,T),T=n.add(T,O),new d(S,x,T)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,y=>{const m=n.invertBatch(y.map(w=>w.pz));return y.map((w,v)=>w.toAffine(m[v])).map(d.fromAffine)})}multiplyUnsafe(g){const y=d.ZERO;if(g===Ou)return y;if(a(g),g===ga)return this;const{endo:m}=e;if(!m)return f.unsafeLadder(this,g);let{k1neg:w,k1:v,k2neg:A,k2:C}=m.splitScalar(g),S=y,x=y,T=this;for(;v>Ou||C>Ou;)v&ga&&(S=S.add(T)),C&ga&&(x=x.add(T)),T=T.double(),v>>=ga,C>>=ga;return w&&(S=S.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,m.beta),x.py,x.pz),S.add(x)}multiply(g){a(g);let y=g,m,w;const{endo:v}=e;if(v){const{k1neg:A,k1:C,k2neg:S,k2:x}=v.splitScalar(y);let{p:T,f:I}=this.wNAF(C),{p:k,f:O}=this.wNAF(x);T=f.constTimeNegate(A,T),k=f.constTimeNegate(S,k),k=new d(n.mul(k.px,v.beta),k.py,k.pz),m=T.add(k),w=I.add(O)}else{const{p:A,f:C}=this.wNAF(y);m=A,w=C}return d.normalizeZ([m,w])[0]}multiplyAndAddUnsafe(g,y,m){const w=d.BASE,v=(C,S)=>S===Ou||S===ga||!C.equals(w)?C.multiplyUnsafe(S):C.multiply(S),A=v(this,y).add(v(g,m));return A.is0()?void 0:A}toAffine(g){const{px:y,py:m,pz:w}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(w));const A=n.mul(y,g),C=n.mul(m,g),S=n.mul(w,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(S,n.ONE))throw new Error("invZ was invalid");return{x:A,y:C}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===ga)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===ga?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return k0(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=Cze(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Nze(t){const e=Wee(t);return a1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Tze(t){const e=Nze(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(R){return Ou<R&&R<n.ORDER}function a(R){return Vi(R,r)}function c(R){return M3(R,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=xze({...e,toBytes(R,N,M){const P=N.toAffine(),L=n.toBytes(P.x),j=B_;return M?j(Uint8Array.from([N.hasEvenY()?2:3]),L):j(Uint8Array.from([4]),L,n.toBytes(P.y))},fromBytes(R){const N=R.length,M=R[0],P=R.subarray(1);if(N===s&&(M===2||M===3)){const L=ag(P);if(!o(L))throw new Error("Point is not on curve");const j=d(L);let q=n.sqrt(j);const ne=(q&ga)===ga;return(M&1)===1!==ne&&(q=n.neg(q)),{x:L,y:q}}else if(N===i&&M===4){const L=n.fromBytes(P.subarray(0,n.BYTES)),j=n.fromBytes(P.subarray(n.BYTES,2*n.BYTES));return{x:L,y:j}}else throw new Error(`Point of length ${N} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=R=>k0(L0(R,e.nByteLength));function p(R){const N=r>>ga;return R>N}function g(R){return p(R)?a(-R):R}const y=(R,N,M)=>ag(R.slice(N,M));class m{constructor(N,M,P){this.r=N,this.s=M,this.recovery=P,this.assertValidity()}static fromCompact(N){const M=e.nByteLength;return N=Xa("compactSignature",N,M*2),new m(y(N,0,M),y(N,M,2*M))}static fromDER(N){const{r:M,s:P}=vp.toSig(Xa("DER",N));return new m(M,P)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new m(this.r,this.s,N)}recoverPublicKey(N){const{r:M,s:P,recovery:L}=this,j=x(Xa("msgHash",N));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");const q=L===2||L===3?M+e.n:M;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ne=L&1?"03":"02",le=l.fromHex(ne+f(q)),oe=c(q),se=a(-j*oe),ye=a(P*oe),Z=l.BASE.multiplyAndAddUnsafe(le,se,ye);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return D0(this.toDERHex())}toDERHex(){return vp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return D0(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const w={isValidPrivateKey(R){try{return u(R),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const R=zee(e.n);return Eze(e.randomBytes(R),e.n)},precompute(R=8,N=l.BASE){return N._setWindowSize(R),N.multiply(BigInt(3)),N}};function v(R,N=!0){return l.fromPrivateKey(R).toRawBytes(N)}function A(R){const N=R instanceof Uint8Array,M=typeof R=="string",P=(N||M)&&R.length;return N?P===s||P===i:M?P===2*s||P===2*i:R instanceof l}function C(R,N,M=!0){if(A(R))throw new Error("first arg must be private key");if(!A(N))throw new Error("second arg must be public key");return l.fromHex(N).multiply(u(R)).toRawBytes(M)}const S=e.bits2int||function(R){const N=ag(R),M=R.length*8-e.nBitLength;return M>0?N>>BigInt(M):N},x=e.bits2int_modN||function(R){return a(S(R))},T=LU(e.nBitLength);function I(R){if(typeof R!="bigint")throw new Error("bigint expected");if(!(Ou<=R&&R<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return L0(R,e.nByteLength)}function k(R,N,M=O){if(["recovered","canonical"].some(he=>he in M))throw new Error("sign() legacy options not supported");const{hash:P,randomBytes:L}=e;let{lowS:j,prehash:q,extraEntropy:ne}=M;j==null&&(j=!0),R=Xa("msgHash",R),q&&(R=Xa("prehashed msgHash",P(R)));const le=x(R),oe=u(N),se=[I(oe),I(le)];if(ne!=null){const he=ne===!0?L(n.BYTES):ne;se.push(Xa("extraEntropy",he))}const ye=B_(...se),Z=le;function ae(he){const de=S(he);if(!h(de))return;const be=c(de),Je=l.BASE.multiply(de).toAffine(),_e=a(Je.x);if(_e===Ou)return;const Ae=a(be*a(Z+_e*oe));if(Ae===Ou)return;let tt=(Je.x===_e?0:2)|Number(Je.y&ga),Se=Ae;return j&&p(Ae)&&(Se=g(Ae),tt^=1),new m(_e,Se,tt)}return{seed:ye,k2sig:ae}}const O={lowS:e.lowS,prehash:!1},B={lowS:e.lowS,prehash:!1};function G(R,N,M=O){const{seed:P,k2sig:L}=k(R,N,M),j=e;return Bee(j.hash.outputLen,j.nByteLength,j.hmac)(P,L)}l.BASE._setWindowSize(8);function W(R,N,M,P=B){var Je;const L=R;if(N=Xa("msgHash",N),M=Xa("publicKey",M),"strict"in P)throw new Error("options.strict was renamed to lowS");const{lowS:j,prehash:q}=P;let ne,le;try{if(typeof L=="string"||L instanceof Uint8Array)try{ne=m.fromDER(L)}catch(_e){if(!(_e instanceof vp.Err))throw _e;ne=m.fromCompact(L)}else if(typeof L=="object"&&typeof L.r=="bigint"&&typeof L.s=="bigint"){const{r:_e,s:Ae}=L;ne=new m(_e,Ae)}else throw new Error("PARSE");le=l.fromHex(M)}catch(_e){if(_e.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&ne.hasHighS())return!1;q&&(N=e.hash(N));const{r:oe,s:se}=ne,ye=x(N),Z=c(se),ae=a(ye*Z),he=a(oe*Z),de=(Je=l.BASE.multiplyAndAddUnsafe(le,ae,he))==null?void 0:Je.toAffine();return de?a(de.x)===oe:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:C,sign:G,verify:W,ProjectivePoint:l,Signature:m,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Rze(t){return{hash:t,hmac:(e,...n)=>bee(t,e,y7e(...n)),randomBytes:w7e}}function Pze(t,e){const n=r=>Tze({...t,...Rze(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hee=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),h7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Oze=BigInt(1),U3=BigInt(2),f7=(t,e)=>(t+e/U3)/e;function kze(t){const e=Hee,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=na(u,n,e)*u%e,h=na(d,n,e)*u%e,f=na(h,U3,e)*l%e,p=na(f,s,e)*f%e,g=na(p,i,e)*p%e,y=na(g,a,e)*g%e,m=na(y,c,e)*y%e,w=na(m,a,e)*g%e,v=na(w,n,e)*u%e,A=na(v,o,e)*p%e,C=na(A,r,e)*l%e,S=na(C,U3,e);if(!$3.eql($3.sqr(S),t))throw new Error("Cannot find square root");return S}const $3=vze(Hee,void 0,void 0,{sqrt:kze}),Fd=Pze({a:BigInt(0),b:BigInt(7),Fp:$3,n:h7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=h7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Oze*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=f7(i*t,e),c=f7(-r*t,e);let l=Vi(t-a*n-c*s,e),u=Vi(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Eee);BigInt(0);Fd.ProjectivePoint;const F_="0x0000000000000000000000000000000000000000",p7="0x0000000000000000000000000000000000000000000000000000000000000000",g7=BigInt(0),m7=BigInt(1),y7=BigInt(2),w7=BigInt(27),b7=BigInt(28),kA=BigInt(35),Ym={};function v7(t){return id(Kr(t),32)}var mw,tl,yw,jp;const Qa=class Qa{constructor(e,n,r,s){K(this,mw);K(this,tl);K(this,yw);K(this,jp);pT(e,Ym,"Signature"),U(this,mw,n),U(this,tl,r),U(this,yw,s),U(this,jp,null)}get r(){return _(this,mw)}set r(e){J(qy(e)===32,"invalid r","value",e),U(this,mw,Le(e))}get s(){return J(parseInt(_(this,tl).substring(0,3))<8,"non-canonical s; use ._s","s",_(this,tl)),_(this,tl)}set s(e){J(qy(e)===32,"invalid s","value",e),U(this,tl,Le(e))}get _s(){return _(this,tl)}isValid(){return parseInt(_(this,tl).substring(0,3))<8}get v(){return _(this,yw)}set v(e){const n=zt(e,"value");J(n===27||n===28,"invalid v","v",e),U(this,yw,n)}get networkV(){return _(this,jp)}get legacyChainId(){const e=this.networkV;return e==null?null:Qa.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=jt(this.s);return this.yParity&&(e[0]|=128),Le(e)}get compactSerialized(){return _r([this.r,this.yParityAndS])}get serialized(){return _r([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Qa(Ym,this.r,this._s,this.v);return this.networkV&&U(e,jp,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Xe(e,"v");return n==w7||n==b7?g7:(J(n>=kA,"invalid EIP-155 v","v",e),(n-kA)/y7)}static getChainIdV(e,n){return Xe(e)*y7+BigInt(35+n-27)}static getNormalizedV(e){const n=Xe(e);return n===g7||n===w7?27:n===m7||n===b7?28:(J(n>=kA,"invalid v","v",e),n&m7?27:28)}static from(e){function n(l,u){J(l,u,"signature",e)}if(e==null)return new Qa(Ym,p7,p7,27);if(typeof e=="string"){const l=jt(e,"signature");if(l.length===64){const u=Le(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new Qa(Ym,u,Le(d),h)}if(l.length===65){const u=Le(l.slice(0,32)),d=Le(l.slice(32,64)),h=Qa.getNormalizedV(l[64]);return new Qa(Ym,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof Qa)return e.clone();const r=e.r;n(r!=null,"missing r");const s=v7(r),i=function(l,u){if(l!=null)return v7(l);if(u!=null){n(Yn(u,32),"invalid yParityAndS");const d=jt(u);return d[0]&=127,Le(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Xe(l);return{networkV:h>=kA?h:void 0,v:Qa.getNormalizedV(h)}}if(u!=null)return n(Yn(u,32),"invalid yParityAndS"),{v:jt(u)[0]&128?28:27};if(d!=null){switch(zt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Qa(Ym,s,i,a);return o&&U(c,jp,o),n(e.yParity==null||zt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};mw=new WeakMap,tl=new WeakMap,yw=new WeakMap,jp=new WeakMap;let oo=Qa;var _u;const rp=class rp{constructor(e){K(this,_u);J(qy(e)===32,"invalid private key","privateKey","[REDACTED]"),U(this,_u,Le(e))}get privateKey(){return _(this,_u)}get publicKey(){return rp.computePublicKey(_(this,_u))}get compressedPublicKey(){return rp.computePublicKey(_(this,_u),!0)}sign(e){J(qy(e)===32,"invalid digest length","digest",e);const n=Fd.sign(fi(e),fi(_(this,_u)),{lowS:!0});return oo.from({r:yf(n.r,32),s:yf(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=rp.computePublicKey(e);return Le(Fd.getSharedSecret(fi(_(this,_u)),jt(n),!1))}static computePublicKey(e,n){let r=jt(e,"key");if(r.length===32){const i=Fd.getPublicKey(r,!!n);return Le(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Fd.ProjectivePoint.fromHex(r);return Le(s.toRawBytes(n))}static recoverPublicKey(e,n){J(qy(e)===32,"invalid digest length","digest",e);const r=oo.from(n);let s=Fd.Signature.fromCompact(fi(_r([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(fi(e));return J(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=Fd.ProjectivePoint.fromHex(rp.computePublicKey(e).substring(2)),i=Fd.ProjectivePoint.fromHex(rp.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};_u=new WeakMap;let j_=rp;const Dze=BigInt(0),Lze=BigInt(36);function E7(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=jt(Lr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const MU={};for(let t=0;t<10;t++)MU[String(t)]=String(t);for(let t=0;t<26;t++)MU[String.fromCharCode(65+t)]=String(10+t);const _7=15;function Mze(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>MU[r]).join("");for(;e.length>=_7;){let r=e.substring(0,_7);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const Uze=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function $ze(t){t=t.toLowerCase();let e=Dze;for(let n=0;n<t.length;n++)e=e*Lze+Uze[t[n]];return e}function vn(t){if(J(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=E7(t);return J(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){J(t.substring(2,4)===Mze(t),"bad icap checksum","address",t);let e=$ze(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return E7("0x"+e)}J(!1,"invalid address","address",t)}function Bze(t){const e=vn(t.from);let r=Xe(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,vn(wr(Lr(bf([e,r])),12))}function Gee(t){return t&&typeof t.getAddress=="function"}async function PO(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(me(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),J(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),vn(n)}function yi(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?vn(t):(me(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),PO(t,e.resolveName(t)));if(Gee(t))return PO(t,t.getAddress());if(t&&typeof t.then=="function")return PO(t,t);J(!1,"unsupported addressable value","target",t)}const du={};function qe(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Js(du,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function un(t,e){return new Js(du,`bytes${e||""}`,t,{size:e})}const C7=Symbol.for("_ethers_typed");var zp;const hu=class hu{constructor(e,n,r,s){te(this,"type");te(this,"value");K(this,zp);te(this,"_typedSymbol");s==null&&(s=null),pT(du,e,"Typed"),mt(this,{_typedSymbol:C7,type:n,value:r}),U(this,zp,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return _(this,zp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return _(this,zp)===!0?-1:_(this,zp)===!1?this.value.length:null}static from(e,n){return new hu(du,e,n)}static uint8(e){return qe(e,8)}static uint16(e){return qe(e,16)}static uint24(e){return qe(e,24)}static uint32(e){return qe(e,32)}static uint40(e){return qe(e,40)}static uint48(e){return qe(e,48)}static uint56(e){return qe(e,56)}static uint64(e){return qe(e,64)}static uint72(e){return qe(e,72)}static uint80(e){return qe(e,80)}static uint88(e){return qe(e,88)}static uint96(e){return qe(e,96)}static uint104(e){return qe(e,104)}static uint112(e){return qe(e,112)}static uint120(e){return qe(e,120)}static uint128(e){return qe(e,128)}static uint136(e){return qe(e,136)}static uint144(e){return qe(e,144)}static uint152(e){return qe(e,152)}static uint160(e){return qe(e,160)}static uint168(e){return qe(e,168)}static uint176(e){return qe(e,176)}static uint184(e){return qe(e,184)}static uint192(e){return qe(e,192)}static uint200(e){return qe(e,200)}static uint208(e){return qe(e,208)}static uint216(e){return qe(e,216)}static uint224(e){return qe(e,224)}static uint232(e){return qe(e,232)}static uint240(e){return qe(e,240)}static uint248(e){return qe(e,248)}static uint256(e){return qe(e,256)}static uint(e){return qe(e,256)}static int8(e){return qe(e,-8)}static int16(e){return qe(e,-16)}static int24(e){return qe(e,-24)}static int32(e){return qe(e,-32)}static int40(e){return qe(e,-40)}static int48(e){return qe(e,-48)}static int56(e){return qe(e,-56)}static int64(e){return qe(e,-64)}static int72(e){return qe(e,-72)}static int80(e){return qe(e,-80)}static int88(e){return qe(e,-88)}static int96(e){return qe(e,-96)}static int104(e){return qe(e,-104)}static int112(e){return qe(e,-112)}static int120(e){return qe(e,-120)}static int128(e){return qe(e,-128)}static int136(e){return qe(e,-136)}static int144(e){return qe(e,-144)}static int152(e){return qe(e,-152)}static int160(e){return qe(e,-160)}static int168(e){return qe(e,-168)}static int176(e){return qe(e,-176)}static int184(e){return qe(e,-184)}static int192(e){return qe(e,-192)}static int200(e){return qe(e,-200)}static int208(e){return qe(e,-208)}static int216(e){return qe(e,-216)}static int224(e){return qe(e,-224)}static int232(e){return qe(e,-232)}static int240(e){return qe(e,-240)}static int248(e){return qe(e,-248)}static int256(e){return qe(e,-256)}static int(e){return qe(e,-256)}static bytes1(e){return un(e,1)}static bytes2(e){return un(e,2)}static bytes3(e){return un(e,3)}static bytes4(e){return un(e,4)}static bytes5(e){return un(e,5)}static bytes6(e){return un(e,6)}static bytes7(e){return un(e,7)}static bytes8(e){return un(e,8)}static bytes9(e){return un(e,9)}static bytes10(e){return un(e,10)}static bytes11(e){return un(e,11)}static bytes12(e){return un(e,12)}static bytes13(e){return un(e,13)}static bytes14(e){return un(e,14)}static bytes15(e){return un(e,15)}static bytes16(e){return un(e,16)}static bytes17(e){return un(e,17)}static bytes18(e){return un(e,18)}static bytes19(e){return un(e,19)}static bytes20(e){return un(e,20)}static bytes21(e){return un(e,21)}static bytes22(e){return un(e,22)}static bytes23(e){return un(e,23)}static bytes24(e){return un(e,24)}static bytes25(e){return un(e,25)}static bytes26(e){return un(e,26)}static bytes27(e){return un(e,27)}static bytes28(e){return un(e,28)}static bytes29(e){return un(e,29)}static bytes30(e){return un(e,30)}static bytes31(e){return un(e,31)}static bytes32(e){return un(e,32)}static address(e){return new hu(du,"address",e)}static bool(e){return new hu(du,"bool",!!e)}static bytes(e){return new hu(du,"bytes",e)}static string(e){return new hu(du,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new hu(du,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===C7}static dereference(e,n){if(hu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};zp=new WeakMap;let Js=hu;class Fze extends hd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Js.dereference(n,"string");try{r=vn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return vn(yf(e.readValue(),20))}}class jze extends hd{constructor(n){super(n.name,n.type,"_",n.dynamic);te(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function qee(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return me(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),me(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else J(!1,"invalid tuple value","tuple",n);J(e.length===r.length,"types/value length mismatch","tuple",n);let s=new P3,i=new P3,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Vee(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(Ns(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Ns(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),P0.fromItems(n,r)}class zze extends hd{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);te(this,"coder");te(this,"length");mt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=Js.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),nee(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return qee(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),me(r*mi<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*mi,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new jze(this.coder));return Vee(n,s)}}class Wze extends hd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Js.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Kee extends hd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=fi(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class Hze extends Kee{constructor(e){super("bytes",e)}decode(e){return Le(super.decode(e))}}class Gze extends hd{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);te(this,"size");mt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=fi(Js.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Le(n.readBytes(this.size))}}const qze=new Uint8Array([]);class Vze extends hd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(qze)}decode(e){return e.readBytes(0),null}}const Kze=BigInt(0),Yze=BigInt(1),Qze=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Jze extends hd{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);te(this,"size");te(this,"signed");mt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Xe(Js.dereference(r,this.type)),i=Cv(Qze,mi*8);if(this.signed){let o=Cv(i,this.size*8-1);(s>o||s<-(o+Yze))&&this._throwError("value out-of-bounds",r),s=iee(s,8*mi)}else(s<Kze||s>Cv(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Cv(n.readValue(),this.size*8);return this.signed&&(r=K9e(r,this.size*8)),r}}class Zze extends Kee{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,qu(Js.dereference(n,"string")))}decode(e){return ox(super.decode(e))}}class DA extends hd{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);te(this,"coders");mt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=Js.dereference(r,"tuple");return qee(n,this.coders,s)}decode(n){return Vee(n,this.coders)}}function OO(t,e){return{address:vn(t),storageKeys:e.map((n,r)=>(J(Yn(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function um(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(J(n.length===2,"invalid slot set",`value[${r}]`,n),OO(n[0],n[1])):(J(n!=null&&typeof n=="object","invalid address-slot set","value",t),OO(n.address,n.storageKeys)));J(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return OO(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Yee(t){return{address:vn(t.address),nonce:Xe(t.nonce!=null?t.nonce:0),chainId:Xe(t.chainId!=null?t.chainId:0),signature:oo.from(t.signature)}}function Xze(t){let e;return typeof t=="string"?e=j_.computePublicKey(t,!1):e=t.publicKey,vn(Lr("0x"+e.substring(4)).substring(26))}function eWe(t,e){return Xze(j_.recoverPublicKey(t,e))}const os=BigInt(0),tWe=BigInt(2),nWe=BigInt(27),rWe=BigInt(28),sWe=BigInt(35),iWe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),kO=4096*32;function oWe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return jt(t.blobToKzgCommitment(Le(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return jt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return jt(t.blobToKZGCommitment(Le(r)));J(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return jt(t.computeBlobProof(Le(r),Le(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return jt(t.computeBlobKZGProof(Le(r),Le(s)));J(!1,"unsupported KZG library","kzg",t)}}}function A7(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=pb(e).substring(4),"0x"+n}function gb(t){return t==="0x"?null:vn(t)}function vT(t,e){try{return um(t)}catch(n){J(!1,n.message,e,t)}}function aWe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:gb(s[1]),nonce:On(s[2],"nonce"),chainId:On(s[0],"chainId"),signature:oo.from({yParity:dm(s[3],"yParity"),r:id(s[4],32),s:id(s[5],32)})})}return n}catch(n){J(!1,n.message,e,t)}}function dm(t,e){return t==="0x"?0:zt(t,e)}function On(t,e){if(t==="0x")return os;const n=Xe(t,e);return J(n<=iWe,"value exceeds uint size",e,n),n}function Zt(t,e){const n=Xe(t,"value"),r=Kr(n);return J(r.length<=32,"value too large",`tx.${e}`,n),r}function ET(t){return um(t).map(e=>[e.address,e.storageKeys])}function cWe(t){return t.map(e=>[Zt(e.chainId,"chainId"),e.address,Zt(e.nonce,"nonce"),Zt(e.signature.yParity,"yParity"),Kr(e.signature.r),Kr(e.signature.s)])}function lWe(t,e){J(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)J(Yn(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function uWe(t){const e=o1(t);J(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:dm(e[0],"nonce"),gasPrice:On(e[1],"gasPrice"),gasLimit:On(e[2],"gasLimit"),to:gb(e[3]),value:On(e[4],"value"),data:Le(e[5]),chainId:os};if(e.length===6)return n;const r=On(e[6],"v"),s=On(e[7],"r"),i=On(e[8],"s");if(s===os&&i===os)n.chainId=r;else{let o=(r-sWe)/tWe;o<os&&(o=os),n.chainId=o,J(o!==os||r===nWe||r===rWe,"non-canonical legacy v","v",e[6]),n.signature=oo.from({r:id(e[7],32),s:id(e[8],32),v:r})}return n}function dWe(t,e){const n=[Zt(t.nonce,"nonce"),Zt(t.gasPrice||0,"gasPrice"),Zt(t.gasLimit,"gasLimit"),t.to||"0x",Zt(t.value,"value"),t.data];let r=os;if(t.chainId!=os)r=Xe(t.chainId,"tx.chainId"),J(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==os&&(n.push(Kr(r)),n.push("0x"),n.push("0x")),bf(n);let s=BigInt(27+e.yParity);return r!==os?s=oo.getChainIdV(r,e.v):BigInt(e.v)!==s&&J(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Kr(s)),n.push(Kr(e.r)),n.push(Kr(e.s)),bf(n)}function _T(t,e){let n;try{if(n=dm(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{J(!1,"invalid yParity","yParity",e[0])}const r=id(e[1],32),s=id(e[2],32),i=oo.from({r,s,yParity:n});t.signature=i}function hWe(t){const e=o1(jt(t).slice(1));J(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Le(t));const n={type:2,chainId:On(e[0],"chainId"),nonce:dm(e[1],"nonce"),maxPriorityFeePerGas:On(e[2],"maxPriorityFeePerGas"),maxFeePerGas:On(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:On(e[4],"gasLimit"),to:gb(e[5]),value:On(e[6],"value"),data:Le(e[7]),accessList:vT(e[8],"accessList")};return e.length===9||_T(n,e.slice(9)),n}function fWe(t,e){const n=[Zt(t.chainId,"chainId"),Zt(t.nonce,"nonce"),Zt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Zt(t.maxFeePerGas||0,"maxFeePerGas"),Zt(t.gasLimit,"gasLimit"),t.to||"0x",Zt(t.value,"value"),t.data,ET(t.accessList||[])];return e&&(n.push(Zt(e.yParity,"yParity")),n.push(Kr(e.r)),n.push(Kr(e.s))),_r(["0x02",bf(n)])}function pWe(t){const e=o1(jt(t).slice(1));J(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Le(t));const n={type:1,chainId:On(e[0],"chainId"),nonce:dm(e[1],"nonce"),gasPrice:On(e[2],"gasPrice"),gasLimit:On(e[3],"gasLimit"),to:gb(e[4]),value:On(e[5],"value"),data:Le(e[6]),accessList:vT(e[7],"accessList")};return e.length===8||_T(n,e.slice(8)),n}function gWe(t,e){const n=[Zt(t.chainId,"chainId"),Zt(t.nonce,"nonce"),Zt(t.gasPrice||0,"gasPrice"),Zt(t.gasLimit,"gasLimit"),t.to||"0x",Zt(t.value,"value"),t.data,ET(t.accessList||[])];return e&&(n.push(Zt(e.yParity,"recoveryParam")),n.push(Kr(e.r)),n.push(Kr(e.s))),_r(["0x01",bf(n)])}function mWe(t){let e=o1(jt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];J(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),J(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),J(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),J(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),J(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}J(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Le(t));const s={type:3,chainId:On(e[0],"chainId"),nonce:dm(e[1],"nonce"),maxPriorityFeePerGas:On(e[2],"maxPriorityFeePerGas"),maxFeePerGas:On(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:On(e[4],"gasLimit"),to:gb(e[5]),value:On(e[6],"value"),data:Le(e[7]),accessList:vT(e[8],"accessList"),maxFeePerBlobGas:On(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),J(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),J(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)J(Yn(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||_T(s,e.slice(11)),s}function yWe(t,e,n){const r=[Zt(t.chainId,"chainId"),Zt(t.nonce,"nonce"),Zt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Zt(t.maxFeePerGas||0,"maxFeePerGas"),Zt(t.gasLimit,"gasLimit"),t.to||F_,Zt(t.value,"value"),t.data,ET(t.accessList||[]),Zt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),lWe(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(Zt(e.yParity,"yParity")),r.push(Kr(e.r)),r.push(Kr(e.s)),n)?_r(["0x03",bf([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):_r(["0x03",bf(r)])}function wWe(t){const e=o1(jt(t).slice(1));J(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Le(t));const n={type:4,chainId:On(e[0],"chainId"),nonce:dm(e[1],"nonce"),maxPriorityFeePerGas:On(e[2],"maxPriorityFeePerGas"),maxFeePerGas:On(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:On(e[4],"gasLimit"),to:gb(e[5]),value:On(e[6],"value"),data:Le(e[7]),accessList:vT(e[8],"accessList"),authorizationList:aWe(e[9],"authorizationList")};return e.length===10||_T(n,e.slice(10)),n}function bWe(t,e){const n=[Zt(t.chainId,"chainId"),Zt(t.nonce,"nonce"),Zt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Zt(t.maxFeePerGas||0,"maxFeePerGas"),Zt(t.gasLimit,"gasLimit"),t.to||"0x",Zt(t.value,"value"),t.data,ET(t.accessList||[]),cWe(t.authorizationList||[])];return e&&(n.push(Zt(e.yParity,"yParity")),n.push(Kr(e.r)),n.push(Kr(e.s))),_r(["0x04",bf(n)])}var sc,ww,bw,vw,Ew,_w,Cw,Aw,Sw,Iw,xw,Nw,Wp,dh,nl,hh,Tw,Rw,AS;const Qc=class Qc{constructor(){K(this,Rw);K(this,sc);K(this,ww);K(this,bw);K(this,vw);K(this,Ew);K(this,_w);K(this,Cw);K(this,Aw);K(this,Sw);K(this,Iw);K(this,xw);K(this,Nw);K(this,Wp);K(this,dh);K(this,nl);K(this,hh);K(this,Tw);U(this,sc,null),U(this,ww,null),U(this,vw,0),U(this,Ew,os),U(this,_w,null),U(this,Cw,null),U(this,Aw,null),U(this,bw,"0x"),U(this,Sw,os),U(this,Iw,os),U(this,xw,null),U(this,Nw,null),U(this,Wp,null),U(this,dh,null),U(this,nl,null),U(this,hh,null),U(this,Tw,null)}get type(){return _(this,sc)}set type(e){switch(e){case null:U(this,sc,null);break;case 0:case"legacy":U(this,sc,0);break;case 1:case"berlin":case"eip-2930":U(this,sc,1);break;case 2:case"london":case"eip-1559":U(this,sc,2);break;case 3:case"cancun":case"eip-4844":U(this,sc,3);break;case 4:case"pectra":case"eip-7702":U(this,sc,4);break;default:J(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=_(this,ww);return e==null&&this.type===3?F_:e}set to(e){U(this,ww,e==null?null:vn(e))}get nonce(){return _(this,vw)}set nonce(e){U(this,vw,zt(e,"value"))}get gasLimit(){return _(this,Ew)}set gasLimit(e){U(this,Ew,Xe(e))}get gasPrice(){const e=_(this,_w);return e==null&&(this.type===0||this.type===1)?os:e}set gasPrice(e){U(this,_w,e==null?null:Xe(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_(this,Cw);return e??(this.type===2||this.type===3?os:null)}set maxPriorityFeePerGas(e){U(this,Cw,e==null?null:Xe(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_(this,Aw);return e??(this.type===2||this.type===3?os:null)}set maxFeePerGas(e){U(this,Aw,e==null?null:Xe(e,"maxFeePerGas"))}get data(){return _(this,bw)}set data(e){U(this,bw,Le(e))}get value(){return _(this,Sw)}set value(e){U(this,Sw,Xe(e,"value"))}get chainId(){return _(this,Iw)}set chainId(e){U(this,Iw,Xe(e))}get signature(){return _(this,xw)||null}set signature(e){U(this,xw,e==null?null:oo.from(e))}get accessList(){const e=_(this,Nw)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){U(this,Nw,e==null?null:um(e))}get authorizationList(){const e=_(this,Tw)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){U(this,Tw,e==null?null:e.map(n=>Yee(n)))}get maxFeePerBlobGas(){const e=_(this,Wp);return e==null&&this.type===3?os:e}set maxFeePerBlobGas(e){U(this,Wp,e==null?null:Xe(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_(this,dh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){J(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)J(Yn(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}U(this,dh,e)}get blobs(){return _(this,hh)==null?null:_(this,hh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){U(this,hh,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(IU(i)){me(_(this,nl),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=jt(i);if(J(o.length<=kO,"blob is too large",`blobs[${s}]`,i),o.length!==kO){const l=new Uint8Array(kO);l.set(o),o=l}const a=_(this,nl).blobToKzgCommitment(o),c=Le(_(this,nl).computeBlobKzgProof(o,a));n.push({data:Le(o),commitment:Le(a),proof:c}),r.push(A7(1,a))}else{const o=Le(i.commitment);n.push({data:Le(i.data),commitment:o,proof:Le(i.proof)}),r.push(A7(1,o))}}U(this,hh,n),U(this,dh,r)}get kzg(){return _(this,nl)}set kzg(e){e==null?U(this,nl,null):U(this,nl,oWe(e))}get hash(){return this.signature==null?null:Lr(fe(this,Rw,AS).call(this,!0,!1))}get unsignedHash(){return Lr(this.unsignedSerialized)}get from(){return this.signature==null?null:eWe(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:j_.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return fe(this,Rw,AS).call(this,!0,!0)}get unsignedSerialized(){return fe(this,Rw,AS).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=_(this,Wp)!=null||_(this,dh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&me(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),me(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),me(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Qc.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Qc;if(typeof e=="string"){const r=jt(e);if(r[0]>=127)return Qc.from(uWe(r));switch(r[0]){case 1:return Qc.from(pWe(r));case 2:return Qc.from(hWe(r));case 3:return Qc.from(mWe(r));case 4:return Qc.from(wWe(r))}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Qc;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=oo.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(J(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),J(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(J(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),J(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};sc=new WeakMap,ww=new WeakMap,bw=new WeakMap,vw=new WeakMap,Ew=new WeakMap,_w=new WeakMap,Cw=new WeakMap,Aw=new WeakMap,Sw=new WeakMap,Iw=new WeakMap,xw=new WeakMap,Nw=new WeakMap,Wp=new WeakMap,dh=new WeakMap,nl=new WeakMap,hh=new WeakMap,Tw=new WeakMap,Rw=new WeakSet,AS=function(e,n){me(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return dWe(this,r);case 1:return gWe(this,r);case 2:return fWe(this,r);case 3:return yWe(this,r,n?this.blobs:null);case 4:return bWe(this,r)}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let cx=Qc;function Bg(t){return Lr(qu(t))}var vWe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const S7=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),I7=4;function EWe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let C=1;C<r;C++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let y=0;for(let C=0;C<d;C++)y=y<<1|u();let m=[],w=0,v=h;for(;;){let C=Math.floor(((y-w+1)*s-1)/v),S=0,x=r;for(;x-S>1;){let k=S+x>>>1;C<i[k]?x=k:S=k}if(S==0)break;m.push(S);let T=w+Math.floor(v*i[S]/s),I=w+Math.floor(v*i[S+1]/s)-1;for(;!((T^I)&f);)y=y<<1&g|u(),T=T<<1&g,I=I<<1&g|1;for(;T&~I&p;)y=y&f|y<<1&g>>>1|u(),T=T<<1^f,I=(I^f)<<1|f|1;w=T,v=1+I-T}let A=r-4;return m.map(C=>{switch(C-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return C-1}})}function _We(t){let e=0;return()=>t[e++]}function Qee(t){return _We(EWe(CWe(t)))}function CWe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function AWe(t){return t&1?~t>>1:t>>1}function SWe(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=AWe(e());return n}function z_(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Jee(t){return W_(()=>{let e=z_(t);if(e.length)return e})}function Zee(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(IWe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(xWe(n,t))}return e.flat()}function W_(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Xee(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)SWe(t,n).forEach((i,o)=>r[o].push(i));return r}function IWe(t,e){let n=1+e(),r=e(),s=W_(e);return Xee(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function xWe(t,e){let n=1+e();return Xee(n,1+t,e).map(s=>[s[0],s.slice(1)])}function NWe(t){let e=[],n=z_(t);return s(r([]),[]),e;function r(i){let o=t(),a=W_(()=>{let c=z_(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function TWe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function ete(t){return`{${TWe(t)}}`}function RWe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function M0(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function PWe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var OWe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const H_=44032,lx=4352,ux=4449,dx=4519,tte=19,nte=21,U0=28,hx=nte*U0,kWe=tte*hx,DWe=H_+kWe,LWe=lx+tte,MWe=ux+nte,UWe=dx+U0;function Sv(t){return t>>24&255}function rte(t){return t&16777215}let B3,x7,F3,SS;function $We(){let t=Qee(OWe);B3=new Map(Jee(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),x7=new Set(z_(t)),F3=new Map,SS=new Map;for(let[e,n]of Zee(t)){if(!x7.has(e)&&n.length==2){let[r,s]=n,i=SS.get(r);i||(i=new Map,SS.set(r,i)),i.set(s,e)}F3.set(e,n.reverse())}}function ste(t){return t>=H_&&t<DWe}function BWe(t,e){if(t>=lx&&t<LWe&&e>=ux&&e<MWe)return H_+(t-lx)*hx+(e-ux)*U0;if(ste(t)&&e>dx&&e<UWe&&(t-H_)%U0==0)return t+(e-dx);{let n=SS.get(t);return n&&(n=n.get(e),n)?n:-1}}function ite(t){B3||$We();let e=[],n=[],r=!1;function s(i){let o=B3.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(ste(i)){let o=i-H_,a=o/hx|0,c=o%hx/U0|0,l=o%U0;s(lx+a),s(ux+c),l>0&&s(dx+l)}else{let o=F3.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=Sv(e[0]);for(let o=1;o<e.length;o++){let a=Sv(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Sv(e[--c]),i<=a))break}i=Sv(e[o])}}return e}function FWe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=Sv(i),a=rte(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=BWe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function ote(t){return ite(t).map(rte)}function jWe(t){return FWe(ite(t))}const N7=45,ate=".",cte=65039,lte=1,fx=t=>Array.from(t);function G_(t,e){return t.P.has(e)||t.Q.has(e)}class zWe extends Array{get is_emoji(){return!0}}let j3,ute,Ep,z3,dte,Vy,DO,ry,Vf,T7,W3;function UU(){if(j3)return;let t=Qee(vWe);const e=()=>z_(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));j3=new Map(Zee(t)),ute=n(),Ep=e(),z3=new Set(e().map(u=>Ep[u])),Ep=new Set(Ep),dte=n(),n();let s=Jee(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};Vy=W_(u=>{let d=W_(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=M0(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),DO=n(),ry=new Map;let a=e().concat(fx(DO)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),DO.has(u)||ry.set(u,f)});for(let{V:u,M:d}of new Set(ry.values())){let h=[];for(let p of u){let g=Vy.filter(m=>G_(m,p)),y=h.find(({G:m})=>g.some(w=>m.has(w)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(p),r(y.G,g)}let f=h.flatMap(p=>fx(p.G));for(let{G:p,V:g}of h){let y=new Set(f.filter(m=>!p.has(m)));for(let m of g)d.set(m,y)}}Vf=new Set;let c=new Set;const l=u=>Vf.has(u)?c.add(u):Vf.add(u);for(let u of Vy){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of Vf)!ry.has(u)&&!c.has(u)&&ry.set(u,lte);r(Vf,ote(Vf)),T7=NWe(t).map(u=>zWe.from(u)).sort(PWe),W3=new Map;for(let u of T7){let d=[W3];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===cte?d.push(...f):d=f}for(let h of d)h.V=u}}function $U(t){return(hte(t)?"":`${BU(CT([t]))} `)+ete(t)}function BU(t){return`"${t}"‎`}function WWe(t){if(t.length>=4&&t[2]==N7&&t[3]==N7)throw new Error(`invalid label extension: "${M0(t.slice(0,4))}"`)}function HWe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function GWe(t){let e=t[0],n=S7.get(e);if(n)throw aE(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=S7.get(e);if(o){if(s==i)throw aE(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw aE(`trailing ${n}`)}function CT(t,e=1/0,n=ete){let r=[];qWe(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];hte(a)&&(r.push(M0(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(M0(t.slice(s,i))),r.join("")}function qWe(t){return UU(),Ep.has(t)}function hte(t){return UU(),dte.has(t)}function VWe(t){return JWe(KWe(t,jWe,eHe))}function KWe(t,e,n){if(!t)return[];UU();let r=0;return t.split(ate).map(s=>{let i=RWe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=XWe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(HWe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))WWe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Ep.has(u[0]))throw aE("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&Ep.has(y[0]))throw aE(`emoji + combining mark: "${M0(a[g-1])} + ${CT([y[0]])}"`)}GWe(u);let f=fx(new Set(h)),[p]=QWe(f);ZWe(p,h),YWe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function YWe(t,e){let n,r=[];for(let s of e){let i=ry.get(s);if(i===lte)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):fx(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>G_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function QWe(t){let e=Vy;for(let n of t){let r=e.filter(s=>G_(s,n));if(!r.length)throw Vy.some(s=>G_(s,n))?pte(e[0],n):fte(n);if(e=r,r.length==1)break}return e}function JWe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${BU(CT(e,63))}: ${s}`)}return M0(r)}).join(ate)}function fte(t){return new Error(`disallowed character: ${$U(t)}`)}function pte(t,e){let n=$U(e),r=Vy.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function aE(t){return new Error(`illegal placement: ${t}`)}function ZWe(t,e){for(let n of e)if(!G_(t,n))throw pte(t,n);if(t.M){let n=ote(e);for(let r=1,s=n.length;r<s;r++)if(z3.has(n[r])){let i=r+1;for(let o;i<s&&z3.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${$U(o)}`);if(i-r>I7)throw new Error(`excessive non-spacing marks: ${BU(CT(n.slice(r-1,i)))} (${i-r}/${I7})`);r=i}}}function XWe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=tHe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(Vf.has(o))s.push(o);else{let a=j3.get(o);if(a)s.push(...a);else if(!ute.has(o))throw fte(o)}}}return s.length&&r.push(e(s)),r}function eHe(t){return t.filter(e=>e!=cte)}function tHe(t,e){let n=W3,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const gte=new Uint8Array(32);gte.fill(0);function R7(t){return J(t.length!==0,"invalid ENS name; empty component","comp",t),t}function mte(t){const e=qu(nHe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(R7(e.slice(r,s))),r=s+1);return J(r<e.length,"invalid ENS name; empty component","name",t),n.push(R7(e.slice(r))),n}function nHe(t){try{if(t.length===0)throw new Error("empty label");return VWe(t)}catch(e){J(!1,`invalid ENS name (${e.message})`,"name",t)}}function H3(t){J(typeof t=="string","invalid ENS name; not a string","name",t),J(t.length,"invalid ENS name (empty label)","name",t);let e=gte;const n=mte(t);for(;n.length;)e=Lr(_r([e,Lr(n.pop())]));return Le(e)}function rHe(t,e){const n=e;return J(n<=255,"DNS encoded label cannot exceed 255","length",n),Le(_r(mte(t).map(r=>{J(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const yte=new Uint8Array(32);yte.fill(0);const sHe=BigInt(-1),wte=BigInt(0),bte=BigInt(1),iHe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function oHe(t){const e=jt(t),n=e.length%32;return n?_r([e,yte.slice(n)]):Le(e)}const aHe=yf(bte,32),cHe=yf(wte,32),P7={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},LO=["name","version","chainId","verifyingContract","salt"];function O7(t){return function(e){return J(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const lHe={name:O7("name"),version:O7("version"),chainId:function(t){const e=Xe(t,"domain.chainId");return J(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):dc(e)},verifyingContract:function(t){try{return vn(t).toLowerCase()}catch{}J(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=jt(t,"domain.salt");return J(e.length===32,'invalid domain value "salt"',"domain.salt",t),Le(e)}};function MO(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);J(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Cv(iHe,n?r-1:r),i=n?(s+bte)*sHe:wte;return function(o){const a=Xe(o,"value");return J(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),yf(n?iee(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return J(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=jt(r);return J(s.length===n,`invalid length for ${t}`,"value",r),oHe(r)}}}switch(t){case"address":return function(e){return id(vn(e),32)};case"bool":return function(e){return e?aHe:cHe};case"bytes":return function(e){return Lr(e)};case"string":return function(e){return Bg(e)}}return null}function k7(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function LA(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var rC,Cu,Pw,bx,vte;const oa=class oa{constructor(e){K(this,bx);te(this,"primaryType");K(this,rC);K(this,Cu);K(this,Pw);U(this,Cu,new Map),U(this,Pw,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=LA(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),U(this,rC,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){J(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=LA(u.type).base;J(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!MO(d)&&(J(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);J(o.length!==0,"missing primary type","types",e),J(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),mt(this,{primaryType:o[0]});function a(c,l){J(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),_(this,Cu).set(c,k7(c,i[c])+u.map(d=>k7(d,i[d])).join(""))}}get types(){return JSON.parse(_(this,rC))}getEncoder(e){let n=_(this,Pw).get(e);return n||(n=fe(this,bx,vte).call(this,e),_(this,Pw).set(e,n)),n}encodeType(e){const n=_(this,Cu).get(e);return J(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Lr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(MO(e))return r(e,n);const s=LA(e).array;if(s)return J(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});J(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new oa(e)}static getPrimaryType(e){return oa.from(e).primaryType}static hashStruct(e,n,r){return oa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=P7[r];J(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>LO.indexOf(r.name)-LO.indexOf(s.name)),oa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return _r(["0x1901",oa.hashDomain(e),oa.from(n).hash(r)])}static hash(e,n,r){return Lr(oa.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Yn(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=oa.from(n);o.visit(r,(a,c)=>(a==="address"&&!Yn(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){oa.hashDomain(e);const s={},i=[];LO.forEach(c=>{const l=e[c];l!=null&&(s[c]=lHe[c](l),i.push({name:c,type:P7[c]}))});const o=oa.from(n);n=o.types;const a=Object.assign({},n);return J(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Le(jt(l));if(c.match(/^u?int/))return Xe(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return J(typeof l=="string","invalid string","value",l),l}J(!1,"unsupported type","type",c)})}}};rC=new WeakMap,Cu=new WeakMap,Pw=new WeakMap,bx=new WeakSet,vte=function(e){{const s=MO(e);if(s)return s}const n=LA(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{J(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return _(this,Cu).has(s)&&(a=a.map(Lr)),Lr(_r(a))}}const r=this.types[e];if(r){const s=Bg(_(this,Cu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return _(this,Cu).has(c)?Lr(l):l});return o.unshift(s),_r(o)}}J(!1,`unknown type: ${e}`,"type",e)};let px=oa;function wi(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const uHe="external public payable override",dHe=wi(uHe.split(" ")),Ete="constant external internal payable private public pure view override",hHe=wi(Ete.split(" ")),_te="constructor error event fallback function receive struct",Cte=wi(_te.split(" ")),Ate="calldata memory storage payable indexed",fHe=wi(Ate.split(" ")),pHe="tuple returns",gHe=[_te,Ate,pHe,Ete].join(" "),mHe=wi(gHe.split(" ")),yHe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},wHe=new RegExp("^(\\s*)"),bHe=new RegExp("^([0-9]+)"),vHe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Ste=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Ite=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var As,ic,sC,G3;const vx=class vx{constructor(e){K(this,sC);K(this,As);K(this,ic);U(this,As,0),U(this,ic,e.slice())}get offset(){return _(this,As)}get length(){return _(this,ic).length-_(this,As)}clone(){return new vx(_(this,ic))}reset(){U(this,As,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=fe(this,sC,G3).call(this,_(this,As)+1,e.match+1);return U(this,As,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;_(this,As)<e.match-1;){const r=this.peek().linkNext;n.push(fe(this,sC,G3).call(this,_(this,As)+1,r)),U(this,As,r)}return U(this,As,e.match+1),n}peek(){if(_(this,As)>=_(this,ic).length)throw new Error("out-of-bounds");return _(this,ic)[_(this,As)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return md(this,As)._++,e}toString(){const e=[];for(let n=_(this,As);n<_(this,ic).length;n++){const r=_(this,ic)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};As=new WeakMap,ic=new WeakMap,sC=new WeakSet,G3=function(e=0,n=0){return new vx(_(this,ic).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Rc=vx;function xf(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(wHe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=yHe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=zt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(vHe),a){if(c.text=a[1],i+=c.text.length,mHe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Ite)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(bHe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Rc(e.map(o=>Object.freeze(o)))}function D7(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function AT(t,e){if(e.peekKeyword(Cte)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function od(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function xte(t){let e=od(t,hHe);return D7(e,wi("constant payable nonpayable".split(" "))),D7(e,wi("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Vu(t,e){return t.popParams().map(n=>ks.from(n,e))}function Nte(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Xe(t.pop().text);throw new Error("invalid gas")}return null}function Fg(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const EHe=new RegExp(/^(.*)\[([0-9]*)\]$/);function L7(t){const e=t.match(Ite);if(J(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);J(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);J(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const ur={},lo=Symbol.for("_ethers_internal"),M7="_ParamTypeInternal",U7="_ErrorInternal",$7="_EventInternal",B7="_ConstructorInternal",F7="_FallbackInternal",j7="_FunctionInternal",z7="_StructInternal";var Ow,IS;const aa=class aa{constructor(e,n,r,s,i,o,a,c){K(this,Ow);te(this,"name");te(this,"type");te(this,"baseType");te(this,"indexed");te(this,"components");te(this,"arrayLength");te(this,"arrayChildren");if(pT(e,ur,"ParamType"),Object.defineProperty(this,lo,{value:M7}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");mt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return fe(this,Ow,IS).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(aa.isParamType(e))return e;if(typeof e=="string")try{return aa.from(xf(e),n)}catch{J(!1,"invalid param type","obj",e)}else if(e instanceof Rc){let a="",c="",l=null;od(e,wi(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>aa.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=L7(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new aa(ur,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(od(e,fHe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new aa(ur,p,a,c,h,l,d,u)}const r=e.name;J(!r||typeof r=="string"&&r.match(Ste),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(J(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(EHe);if(o){const a=parseInt(o[2]||"-1"),c=aa.from({type:o[1],components:e.components});return new aa(ur,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>aa.from(l)):null;return new aa(ur,r||"",i,"tuple",s,a,null,null)}return i=L7(e.type),new aa(ur,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[lo]===M7}};Ow=new WeakSet,IS=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;fe(u=o,Ow,IS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;fe(u=o[l],Ow,IS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let ks=aa;class jg{constructor(e,n,r){te(this,"type");te(this,"inputs");pT(e,ur,"Fragment"),r=Object.freeze(r.slice()),mt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{jg.from(JSON.parse(e))}catch{}return jg.from(xf(e))}if(e instanceof Rc)switch(e.peekKeyword(Cte)){case"constructor":return $u.from(e);case"error":return Yi.from(e);case"event":return bl.from(e);case"fallback":case"receive":return mu.from(e);case"function":return vl.from(e);case"struct":return cg.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return $u.from(e);case"error":return Yi.from(e);case"event":return bl.from(e);case"fallback":case"receive":return mu.from(e);case"function":return vl.from(e);case"struct":return cg.from(e)}me(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}J(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return $u.isFragment(e)}static isError(e){return Yi.isFragment(e)}static isEvent(e){return bl.isFragment(e)}static isFunction(e){return vl.isFragment(e)}static isStruct(e){return cg.isFragment(e)}}class ST extends jg{constructor(n,r,s,i){super(n,r,i);te(this,"name");J(typeof s=="string"&&s.match(Ste),"invalid identifier","name",s),i=Object.freeze(i.slice()),mt(this,{name:s})}}function q_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Yi extends ST{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,lo,{value:U7})}get selector(){return Bg(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+q_(e,this.inputs)),n.join(" ")}static from(e){if(Yi.isFragment(e))return e;if(typeof e=="string")return Yi.from(xf(e));if(e instanceof Rc){const n=AT("error",e),r=Vu(e);return Fg(e),new Yi(ur,n,r)}return new Yi(ur,e.name,e.inputs?e.inputs.map(ks.from):[])}static isFragment(e){return e&&e[lo]===U7}}class bl extends ST{constructor(n,r,s,i){super(n,"event",r,s);te(this,"anonymous");Object.defineProperty(this,lo,{value:$7}),mt(this,{anonymous:i})}get topicHash(){return Bg(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+q_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>ks.from(i)),new bl(ur,n,r,!1).topicHash}static from(n){if(bl.isFragment(n))return n;if(typeof n=="string")try{return bl.from(xf(n))}catch{J(!1,"invalid event fragment","obj",n)}else if(n instanceof Rc){const r=AT("event",n),s=Vu(n,!0),i=!!od(n,wi(["anonymous"])).has("anonymous");return Fg(n),new bl(ur,r,s,i)}return new bl(ur,n.name,n.inputs?n.inputs.map(r=>ks.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[lo]===$7}}class $u extends jg{constructor(n,r,s,i,o){super(n,r,s);te(this,"payable");te(this,"gas");Object.defineProperty(this,lo,{value:B7}),mt(this,{payable:i,gas:o})}format(n){if(me(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${q_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if($u.isFragment(n))return n;if(typeof n=="string")try{return $u.from(xf(n))}catch{J(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Rc){od(n,wi(["constructor"]));const r=Vu(n),s=!!od(n,dHe).has("payable"),i=Nte(n);return Fg(n),new $u(ur,"constructor",r,s,i)}return new $u(ur,"constructor",n.inputs?n.inputs.map(ks.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[lo]===B7}}class mu extends jg{constructor(n,r,s){super(n,"fallback",r);te(this,"payable");Object.defineProperty(this,lo,{value:F7}),mt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(mu.isFragment(n))return n;if(typeof n=="string")try{return mu.from(xf(n))}catch{J(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Rc){const r=n.toString(),s=n.peekKeyword(wi(["fallback","receive"]));if(J(s,"type must be fallback or receive","obj",r),n.popKeyword(wi(["fallback","receive"]))==="receive"){const c=Vu(n);return J(c.length===0,"receive cannot have arguments","obj.inputs",c),od(n,wi(["payable"])),Fg(n),new mu(ur,[],!0)}let o=Vu(n);o.length?J(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[ks.from("bytes")];const a=xte(n);if(J(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),od(n,wi(["returns"])).has("returns")){const c=Vu(n);J(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return Fg(n),new mu(ur,o,a==="payable")}if(n.type==="receive")return new mu(ur,[],!0);if(n.type==="fallback"){const r=[ks.from("bytes")],s=n.stateMutability==="payable";return new mu(ur,r,s)}J(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[lo]===F7}}class vl extends ST{constructor(n,r,s,i,o,a){super(n,"function",r,i);te(this,"constant");te(this,"outputs");te(this,"stateMutability");te(this,"payable");te(this,"gas");Object.defineProperty(this,lo,{value:j7}),o=Object.freeze(o.slice()),mt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Bg(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+q_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(q_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>ks.from(i)),new vl(ur,n,"view",r,[],null).selector}static from(n){if(vl.isFragment(n))return n;if(typeof n=="string")try{return vl.from(xf(n))}catch{J(!1,"invalid function fragment","obj",n)}else if(n instanceof Rc){const s=AT("function",n),i=Vu(n),o=xte(n);let a=[];od(n,wi(["returns"])).has("returns")&&(a=Vu(n));const c=Nte(n);return Fg(n),new vl(ur,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new vl(ur,n.name,r,n.inputs?n.inputs.map(ks.from):[],n.outputs?n.outputs.map(ks.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[lo]===j7}}class cg extends ST{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,lo,{value:z7})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return cg.from(xf(e))}catch{J(!1,"invalid struct fragment","obj",e)}else if(e instanceof Rc){const n=AT("struct",e),r=Vu(e);return Fg(e),new cg(ur,n,r)}return new cg(ur,e.name,e.inputs?e.inputs.map(ks.from):[])}static isFragment(e){return e&&e[lo]===z7}}const kc=new Map;kc.set(0,"GENERIC_PANIC");kc.set(1,"ASSERT_FALSE");kc.set(17,"OVERFLOW");kc.set(18,"DIVIDE_BY_ZERO");kc.set(33,"ENUM_RANGE_ERROR");kc.set(34,"BAD_STORAGE_DATA");kc.set(49,"STACK_UNDERFLOW");kc.set(50,"ARRAY_RANGE_ERROR");kc.set(65,"OUT_OF_MEMORY");kc.set(81,"UNINITIALIZED_FUNCTION_CALL");const _He=new RegExp(/^bytes([0-9]*)$/),CHe=new RegExp(/^(u?int)([0-9]*)$/);let UO=null,W7=1024;function AHe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=jt(n);if(n=Le(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Le(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Le(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${kc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?vn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=vn(e.from)),sr(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var fh,sy;const Ex=class Ex{constructor(){K(this,fh)}getDefaultValue(e){const n=e.map(s=>fe(this,fh,sy).call(this,ks.from(s)));return new DA(n,"_").defaultValue()}encode(e,n){nee(n.length,e.length,"types/values length mismatch");const r=e.map(o=>fe(this,fh,sy).call(this,ks.from(o))),s=new DA(r,"_"),i=new P3;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>fe(this,fh,sy).call(this,ks.from(o)));return new DA(s,"_").decode(new O3(n,r,W7))}static _setDefaultMaxInflation(e){J(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),W7=e}static defaultAbiCoder(){return UO==null&&(UO=new Ex),UO}static getBuiltinCallException(e,n,r){return AHe(e,n,r,Ex.defaultAbiCoder())}};fh=new WeakSet,sy=function(e){if(e.isArray())return new zze(fe(this,fh,sy).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new DA(e.components.map(r=>fe(this,fh,sy).call(this,r)),e.name);switch(e.baseType){case"address":return new Fze(e.name);case"bool":return new Wze(e.name);case"string":return new Zze(e.name);case"bytes":return new Hze(e.name);case"":return new Vze(e.name)}let n=e.type.match(CHe);if(n){let r=parseInt(n[2]||"256");return J(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new Jze(r/8,n[1]==="int",e.name)}if(n=e.type.match(_He),n){let r=parseInt(n[1]);return J(r!==0&&r<=32,"invalid bytes length","param",e),new Gze(r,e.name)}J(!1,"invalid type","type",e.type)};let V_=Ex;class SHe{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"signature");te(this,"topic");te(this,"args");const s=e.name,i=e.format();mt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class IHe{constructor(e,n,r,s){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");te(this,"value");const i=e.name,o=e.format();mt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class xHe{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");const s=e.name,i=e.format();mt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class H7{constructor(e){te(this,"hash");te(this,"_isIndexed");mt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const G7={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},q7={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&G7[t.toString()]&&(e=G7[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var rl,sl,il,Gs,Rl,xS,NS;const sp=class sp{constructor(e){K(this,Rl);te(this,"fragments");te(this,"deploy");te(this,"fallback");te(this,"receive");K(this,rl);K(this,sl);K(this,il);K(this,Gs);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,U(this,il,new Map),U(this,rl,new Map),U(this,sl,new Map);const r=[];for(const o of n)try{r.push(jg.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}mt(this,{fragments:Object.freeze(r)});let s=null,i=!1;U(this,Gs,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}mt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(J(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=_(this,il);break;case"event":c=_(this,sl);break;case"error":c=_(this,rl);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||mt(this,{deploy:$u.from("constructor()")}),mt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return V_.defaultAbiCoder()}getFunctionName(e){const n=fe(this,Rl,xS).call(this,e,null,!1);return J(n,"no matching function","key",e),n.name}hasFunction(e){return!!fe(this,Rl,xS).call(this,e,null,!1)}getFunction(e,n){return fe(this,Rl,xS).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(_(this,il).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,il).get(s),r)}}getEventName(e){const n=fe(this,Rl,NS).call(this,e,null,!1);return J(n,"no matching event","key",e),n.name}hasEvent(e){return!!fe(this,Rl,NS).call(this,e,null,!1)}getEvent(e,n){return fe(this,Rl,NS).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(_(this,sl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,sl).get(s),r)}}getError(e,n){if(Yn(e)){const s=e.toLowerCase();if(q7[s])return Yi.from(q7[s].signature);for(const i of _(this,rl).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of _(this,rl))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Yi.from("error Error(string)"):e==="Panic"?Yi.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");J(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Yi.from(e).format(),e==="Error(string)")return Yi.from("error Error(string)");if(e==="Panic(uint256)")return Yi.from("error Panic(uint256)");const r=_(this,rl).get(e);return r||null}forEachError(e){const n=Array.from(_(this,rl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,rl).get(s),r)}}_decodeParams(e,n){return _(this,Gs).decode(e,n)}_encodeParams(e,n){return _(this,Gs).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);J(r,"unknown error","fragment",e),e=r}return J(wr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,wr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);J(r,"unknown error","fragment",e),e=r}return _r([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);J(r,"unknown function","fragment",e),e=r}return J(wr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,wr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);J(r,"unknown function","fragment",e),e=r}return _r([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);J(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=fi(n);if(s.length%32===0)try{return _(this,Gs).decode(e.outputs,s)}catch{r="could not decode result data"}me(!1,r,"BAD_DATA",{value:Le(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=jt(e,"data"),s=V_.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Le(r.slice(0,4)),c=this.getError(a);if(c)try{const l=_(this,Gs).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);J(r,"unknown function","fragment",e),e=r}return Le(_(this,Gs).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);J(i,"unknown event","eventFragment",e),e=i}me(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Bg(o):i.type==="bytes"?Lr(Le(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=yf(o):i.type.match(/^bytes/)?o=V9e(o,32):i.type==="address"&&_(this,Gs).encode(["address"],[o]),id(Le(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){J(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?J(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);J(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),J(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Bg(c));else if(o.type==="bytes")r.push(Lr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(_(this,Gs).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:_(this,Gs).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);J(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;J(Yn(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(ks.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?_(this,Gs).decode(s,_r(r)):null,c=_(this,Gs).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new H7(null);else if(o[p])g=new H7(a[h++]);else try{g=a[h++]}catch(y){g=y}else try{g=c[d++]}catch(y){g=y}l.push(g),u.push(f.name||null)}),P0.fromItems(l,u)}parseTransaction(e){const n=jt(e.data,"tx.data"),r=Xe(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Le(n.slice(0,4)));if(!s)return null;const i=_(this,Gs).decode(s.inputs,n.slice(4));return new IHe(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new SHe(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Le(e),r=this.getError(wr(n,0,4));if(!r)return null;const s=_(this,Gs).decode(r.inputs,wr(n,4));return new xHe(r,r.selector,s)}static from(e){return e instanceof sp?e:typeof e=="string"?new sp(JSON.parse(e)):typeof e.formatJson=="function"?new sp(e.formatJson()):typeof e.format=="function"?new sp(e.format("json")):new sp(e)}};rl=new WeakMap,sl=new WeakMap,il=new WeakMap,Gs=new WeakMap,Rl=new WeakSet,xS=function(e,n,r){if(Yn(e)){const i=e.toLowerCase();for(const o of _(this,il).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,il))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;Js.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(Js.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");J(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,il).get(vl.from(e).format());return s||null},NS=function(e,n,r){if(Yn(e)){const i=e.toLowerCase();for(const o of _(this,sl).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,sl))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(Js.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");J(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,sl).get(bl.from(e).format());return s||null};let q3=sp;const Tte=BigInt(0);function Ky(t){return t??null}function Ir(t){return t==null?null:t.toString()}class V7{constructor(e,n,r){te(this,"gasPrice");te(this,"maxFeePerGas");te(this,"maxPriorityFeePerGas");mt(this,{gasPrice:Ky(e),maxFeePerGas:Ky(n),maxPriorityFeePerGas:Ky(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Ir(e),maxFeePerGas:Ir(n),maxPriorityFeePerGas:Ir(r)}}}function gx(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Le(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Xe(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=zt(t[s],`request.${s}`));return t.accessList&&(e.accessList=um(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>IU(s)?Le(s):Object.assign({},s))),e}var Au;class NHe{constructor(e,n){te(this,"provider");te(this,"number");te(this,"hash");te(this,"timestamp");te(this,"parentHash");te(this,"parentBeaconBlockRoot");te(this,"nonce");te(this,"difficulty");te(this,"gasLimit");te(this,"gasUsed");te(this,"stateRoot");te(this,"receiptsRoot");te(this,"blobGasUsed");te(this,"excessBlobGas");te(this,"miner");te(this,"prevRandao");te(this,"extraData");te(this,"baseFeePerGas");K(this,Au);U(this,Au,e.transactions.map(r=>typeof r!="string"?new K_(r,n):r)),mt(this,{provider:n,hash:Ky(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Ky(e.prevRandao),extraData:e.extraData,baseFeePerGas:Ky(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return _(this,Au).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=_(this,Au).slice();return e.length===0?[]:(me(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:Ir(e),difficulty:Ir(n),extraData:r,gasLimit:Ir(s),gasUsed:Ir(i),blobGasUsed:Ir(this.blobGasUsed),excessBlobGas:Ir(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return _(this,Au).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=_(this,Au)[e];else{const r=e.toLowerCase();for(const s of _(this,Au))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;J(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return THe(this)}}Au=new WeakMap;class c1{constructor(e,n){te(this,"provider");te(this,"transactionHash");te(this,"blockHash");te(this,"blockNumber");te(this,"removed");te(this,"address");te(this,"data");te(this,"topics");te(this,"index");te(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());mt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return me(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return RHe(this)}}var iC;class Rte{constructor(e,n){te(this,"provider");te(this,"to");te(this,"from");te(this,"contractAddress");te(this,"hash");te(this,"index");te(this,"blockHash");te(this,"blockNumber");te(this,"logsBloom");te(this,"gasUsed");te(this,"blobGasUsed");te(this,"cumulativeGasUsed");te(this,"gasPrice");te(this,"blobGasPrice");te(this,"type");te(this,"status");te(this,"root");K(this,iC);U(this,iC,Object.freeze(e.logs.map(s=>new c1(s,n))));let r=Tte;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),mt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return _(this,iC)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Ir(this.cumulativeGasUsed),from:n,gasPrice:Ir(this.gasPrice),blobGasUsed:Ir(this.blobGasUsed),blobGasPrice:Ir(this.blobGasPrice),gasUsed:Ir(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Ote(this)}reorderedEvent(e){return me(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Pte(this,e)}}iC=new WeakMap;var ph;const VU=class VU{constructor(e,n){te(this,"provider");te(this,"blockNumber");te(this,"blockHash");te(this,"index");te(this,"hash");te(this,"type");te(this,"to");te(this,"from");te(this,"nonce");te(this,"gasLimit");te(this,"gasPrice");te(this,"maxPriorityFeePerGas");te(this,"maxFeePerGas");te(this,"maxFeePerBlobGas");te(this,"data");te(this,"value");te(this,"chainId");te(this,"signature");te(this,"accessList");te(this,"blobVersionedHashes");te(this,"authorizationList");K(this,ph);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,U(this,ph,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Ir(this.chainId),data:l,from:a,gasLimit:Ir(this.gasLimit),gasPrice:Ir(this.gasPrice),hash:s,maxFeePerGas:Ir(this.maxFeePerGas),maxPriorityFeePerGas:Ir(this.maxPriorityFeePerGas),maxFeePerBlobGas:Ir(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Ir(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await li({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=_(this,ph),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await li({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<_(this,ph)&&(o=_(this,ph)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const m=await g.getTransaction(y);if(m.from===this.from&&m.nonce===this.nonce){if(a)return null;const w=await this.provider.getTransactionReceipt(m.hash);if(w==null||h-w.blockNumber+1<r)return;let v="replaced";m.data===this.data&&m.to===this.to&&m.value===this.value?v="repriced":m.data==="0x"&&m.from===m.to&&m.value===Tte&&(v="cancelled"),me(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:m.replaceableTransaction(i),hash:m.hash,receipt:w})}}o++}},l=h=>{if(h==null||h.status!==0)return h;me(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(m=>m())};if(p.push(()=>{a=!0}),s>0){const m=setTimeout(()=>{g(),f(sr("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(m)})}const y=async m=>{if(await m.confirmations()>=r){g();try{h(l(m))}catch(w){f(w)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const m=async()=>{try{await c()}catch(w){if(Ns(w,"TRANSACTION_REPLACED")){g(),f(w);return}}a||this.provider.once("block",m)};p.push(()=>{this.provider.off("block",m)}),this.provider.once("block",m)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ote(this)}reorderedEvent(e){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),me(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Pte(this,e)}replaceableTransaction(e){J(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new VU(this,this.provider);return U(n,ph,e),n}};ph=new WeakMap;let K_=VU;function THe(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function Pte(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Ote(t){return{orphan:"drop-transaction",tx:t}}function RHe(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class FU extends c1{constructor(n,r,s){super(n,n.provider);te(this,"interface");te(this,"fragment");te(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);mt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class kte extends c1{constructor(n,r){super(n,n.provider);te(this,"error");mt(this,{error:r})}}var kw;class PHe extends Rte{constructor(n,r,s){super(s,r);K(this,kw);U(this,kw,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?_(this,kw).getEvent(n.topics[0]):null;if(r)try{return new FU(n,_(this,kw),r)}catch(s){return new kte(n,s)}return n})}}kw=new WeakMap;var oC;class jU extends K_{constructor(n,r,s){super(s,r);K(this,oC);U(this,oC,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new PHe(_(this,oC),this.provider,s)}}oC=new WeakMap;class Dte extends oee{constructor(n,r,s,i){super(n,r,s);te(this,"log");mt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class OHe extends Dte{constructor(e,n,r,s,i){super(e,n,r,new FU(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);mt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const K7=BigInt(0);function Lte(t){return t&&typeof t.call=="function"}function Mte(t){return t&&typeof t.estimateGas=="function"}function IT(t){return t&&typeof t.resolveName=="function"}function Ute(t){return t&&typeof t.sendTransaction=="function"}function $te(t){if(t!=null){if(IT(t))return t;if(t.provider)return t.provider}}var aC;class kHe{constructor(e,n,r){K(this,aC);te(this,"fragment");if(mt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=zg(e.runner,"resolveName"),i=IT(s)?s:null;U(this,aC,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>yi(h,i))):yi(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return _(this,aC)}}aC=new WeakMap;function zg(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function _p(t){return t==null?null:t.provider||null}async function Bte(t,e){const n=Js.dereference(t,"overrides");J(typeof n=="object","invalid overrides parameter","overrides",t);const r=gx(n);return J(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),J(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function DHe(t,e,n){const r=zg(t,"resolveName"),s=IT(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=Js.dereference(c,a),a==="address"?yi(c,s):c))))}function LHe(t){const e=async function(o){const a=await Bte(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await yi(a.from,$te(t.runner)));const c=t.interface,l=Xe(a.value||K7,"overrides.value")===K7,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&J(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),J(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return J(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),J(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=zg(t.runner,"call");me(Lte(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw SU(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;me(Ute(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=_p(t.runner);return new jU(t.interface,l,c)},s=async function(o){const a=zg(t.runner,"estimateGas");return me(Mte(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return mt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function MHe(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return me(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await Bte(l.pop()),d.from&&(d.from=await yi(d.from,$te(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await DHe(t.runner,u.inputs,l);return Object.assign({},d,await li({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;me(Ute(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=_p(t.runner);return new jU(t.interface,h,d)},o=async function(...l){const u=zg(t.runner,"estimateGas");return me(Mte(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=zg(t.runner,"call");me(Lte(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw SU(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return mt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return me(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function UHe(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return me(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new kHe(t,n(...s),s)};return mt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return me(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const mx=Symbol.for("_ethersInternal_contract"),Fte=new WeakMap;function $He(t,e){Fte.set(t[mx],e)}function Co(t){return Fte.get(t[mx])}function BHe(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function zU(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(Yn(o,32))return o;const a=t.interface.getEvent(o);return J(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?Yn(e,32)?n=[e]:(r=t.interface.getEvent(e),J(r,"unknown fragment","event",e),n=[r.topicHash]):BHe(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):J(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Iv(t,e){const{subs:n}=Co(t);return n.get((await zU(t,e)).tag)||null}async function Y7(t,e,n){const r=_p(t.runner);me(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await zU(t,n),{addr:a,subs:c}=Co(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=y=>{let m=s;if(m==null)try{m=t.interface.getEvent(y.topics[0])}catch{}if(m){const w=m,v=s?t.interface.decodeEventLog(s,y.data,y.topics):[];K3(t,n,v,A=>new OHe(t,A,n,w,y))}else K3(t,n,[],w=>new Dte(t,w,n,y))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),r.off(d,h)}},c.set(i,l)}return l}let V3=Promise.resolve();async function FHe(t,e,n,r){await V3;const s=await Iv(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Co(t).subs.delete(s.tag)),i>0}async function K3(t,e,n,r){try{await V3}catch{}const s=FHe(t,e,n,r);return V3=s,await s}const MA=["then"];var bz;bz=mx;const cE=class cE{constructor(e,n,r,s){te(this,"target");te(this,"interface");te(this,"runner");te(this,"filters");te(this,bz);te(this,"fallback");J(typeof e=="string"||Gee(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=q3.from(n);mt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,mx,{value:{}});let o,a=null,c=null;if(s){const d=_p(r);c=new jU(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(Yn(e))a=e,o=Promise.resolve(e);else{const d=zg(r,"resolveName");if(!IT(d))throw sr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw sr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Co(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Co(this).addr=d,d});$He(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||MA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!Ns(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>MA.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return mt(this,{filters:u}),mt(this,{fallback:i.receive||i.fallback?LHe(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||MA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!Ns(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||MA.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new cE(this.target,this.interface,e)}attach(e){return new cE(e,this.interface,this.runner)}async getAddress(){return await Co(this).addrPromise}async getDeployedCode(){const e=_p(this.runner);me(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=_p(this.runner);return me(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Co(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),MHe(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),UHe(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Co(this),o=s||await i,{fragment:a,topics:c}=await zU(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=_p(this.runner);return me(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new FU(d,this.interface,h)}catch(f){return new kte(d,f)}return new c1(d,u)})}async on(e,n){const r=await Y7(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await Y7(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await K3(this,e,n,null)}async listenerCount(e){if(e){const s=await Iv(this,e);return s?s.listeners.length:0}const{subs:n}=Co(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Iv(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Co(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Iv(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Co(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Iv(this,e);if(!n)return this;n.stop(),Co(this).subs.delete(n.tag)}else{const{subs:n}=Co(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends cE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let Y3=cE;function jHe(){return Y3}class Yy extends jHe(){}function $O(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):J(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class zHe{constructor(e){te(this,"name");mt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const jte=new RegExp("^(ipfs)://(.*)$","i"),Q7=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),jte,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var gh,Hp,mh,iy,_x,zte;const xy=class xy{constructor(e,n,r){K(this,mh);te(this,"provider");te(this,"address");te(this,"name");K(this,gh);K(this,Hp);mt(this,{provider:e,address:n,name:r}),U(this,gh,null),U(this,Hp,new Yy(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return _(this,gh)==null&&U(this,gh,(async()=>{try{return await _(this,Hp).supportsInterface("0x9061b923")}catch(e){if(Ns(e,"CALL_EXCEPTION"))return!1;throw U(this,gh,null),e}})()),await _(this,gh)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await fe(this,mh,iy).call(this,"addr(bytes32)");return i==null||i===F_?null:i}catch(i){if(Ns(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await fe(this,mh,iy).call(this,"addr(bytes32,uint)",[i]);if(Yn(o,20))return vn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof zHe&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await fe(this,mh,iy).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;me(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await fe(this,mh,iy).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await fe(this,mh,iy).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${Q9e("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;me(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<Q7.length;r++){const s=n.match(Q7[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=$O(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new Yy(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",yf(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=$O(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new wf(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const m=f.body;return m&&e.push({type:"!metadata",value:Le(m)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(jte)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=$O(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return me(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await fe(s=xy,_x,zte).call(s,e,r);if(i!=null){const o=new xy(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};gh=new WeakMap,Hp=new WeakMap,mh=new WeakSet,iy=async function(e,n){n=(n||[]).slice();const r=_(this,Hp).interface;n.unshift(H3(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),me(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[rHe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await _(this,Hp)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Ns(i,"CALL_EXCEPTION"))throw i}return null},_x=new WeakSet,zte=async function(e,n){const r=await xy.getEnsAddress(e);try{const i=await new Yy(r,["function resolver(bytes32) view returns (address)"],e).resolver(H3(n),{enableCcipRead:!0});return i===F_?null:i}catch(s){throw s}return null},K(xy,_x);let yx=xy;const J7=BigInt(0);function Jt(t,e){return function(n){return n==null?e:t(n)}}function Y_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function l1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";me(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function WHe(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}J(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function $0(t){return J(Yn(t,!0),"invalid data","value",t),t}function xs(t){return J(Yn(t,32),"invalid hash","value",t),t}const HHe=l1({address:vn,blockHash:xs,blockNumber:zt,data:$0,index:zt,removed:Jt(WHe,!1),topics:Y_(xs),transactionHash:xs,transactionIndex:zt},{index:["logIndex"]});function GHe(t){return HHe(t)}const qHe=l1({hash:Jt(xs),parentHash:xs,parentBeaconBlockRoot:Jt(xs,null),number:zt,timestamp:zt,nonce:Jt($0),difficulty:Xe,gasLimit:Xe,gasUsed:Xe,stateRoot:Jt(xs,null),receiptsRoot:Jt(xs,null),blobGasUsed:Jt(Xe,null),excessBlobGas:Jt(Xe,null),miner:Jt(vn),prevRandao:Jt(xs,null),extraData:$0,baseFeePerGas:Jt(Xe)},{prevRandao:["mixHash"]});function VHe(t){const e=qHe(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Wte(n)),e}const KHe=l1({transactionIndex:zt,blockNumber:zt,transactionHash:xs,address:vn,topics:Y_(xs),data:$0,index:zt,blockHash:xs},{index:["logIndex"]});function YHe(t){return KHe(t)}const QHe=l1({to:Jt(vn,null),from:Jt(vn,null),contractAddress:Jt(vn,null),index:zt,root:Jt(Le),gasUsed:Xe,blobGasUsed:Jt(Xe,null),logsBloom:Jt($0),blockHash:xs,hash:xs,logs:Y_(YHe),blockNumber:zt,cumulativeGasUsed:Xe,effectiveGasPrice:Jt(Xe),blobGasPrice:Jt(Xe,null),status:Jt(zt),type:Jt(zt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function JHe(t){return QHe(t)}function Wte(t){t.to&&Xe(t.to)===J7&&(t.to="0x0000000000000000000000000000000000000000");const e=l1({hash:xs,index:Jt(zt,void 0),type:n=>n==="0x"||n==null?0:zt(n),accessList:Jt(um,null),blobVersionedHashes:Jt(Y_(xs,!0),null),authorizationList:Jt(Y_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:vn(n.address),chainId:Xe(n.chainId),nonce:Xe(n.nonce),signature:oo.from(r)}},!1),null),blockHash:Jt(xs,null),blockNumber:Jt(zt,null),transactionIndex:Jt(zt,null),from:vn,gasPrice:Jt(Xe),maxPriorityFeePerGas:Jt(Xe),maxFeePerGas:Jt(Xe),maxFeePerBlobGas:Jt(Xe,null),gasLimit:Xe,to:Jt(vn,null),value:Xe,nonce:zt,data:$0,creates:Jt(vn,null),chainId:Jt(Xe,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=Bze(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=oo.from(t.signature):e.signature=oo.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Xe(e.blockHash)===J7&&(e.blockHash=null),e}const ZHe="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class u1{constructor(e){te(this,"name");mt(this,{name:e})}clone(){return new u1(this.name)}}class xT extends u1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);te(this,"effectiveBlock");te(this,"txBase");te(this,"txCreate");te(this,"txDataZero");te(this,"txDataNonzero");te(this,"txAccessListStorageKey");te(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),J(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),mt(this,s)}clone(){return new xT(this.effectiveBlock,this)}}class NT extends u1{constructor(n,r){super("org.ethers.plugins.network.Ens");te(this,"address");te(this,"targetNetwork");mt(this,{address:n||ZHe,targetNetwork:r??1})}clone(){return new NT(this.address,this.targetNetwork)}}var cC,lC;class XHe extends u1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");K(this,cC);K(this,lC);U(this,cC,n),U(this,lC,r)}get url(){return _(this,cC)}get processFunc(){return _(this,lC)}clone(){return this}}cC=new WeakMap,lC=new WeakMap;const BO=new Map;var Dw,Lw,yh;const Ny=class Ny{constructor(e,n){K(this,Dw);K(this,Lw);K(this,yh);U(this,Dw,e),U(this,Lw,Xe(n)),U(this,yh,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return _(this,Dw)}set name(e){U(this,Dw,e)}get chainId(){return _(this,Lw)}set chainId(e){U(this,Lw,Xe(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Xe(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Xe(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Xe(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(_(this,yh).values())}attachPlugin(e){if(_(this,yh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,yh).set(e.name,e.clone()),this}getPlugin(e){return _(this,yh).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Ny(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new xT;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=um(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(eGe(),e==null)return Ny.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=BO.get(e);if(n)return n();if(typeof e=="bigint")return new Ny("unknown",e);J(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){J(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Ny(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new NT(e.ensAddress,e.ensNetwork)),n}J(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=BO.get(e);r&&J(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),BO.set(e,n)}};Dw=new WeakMap,Lw=new WeakMap,yh=new WeakMap;let _l=Ny;function Z7(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function X7(t){return new XHe(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Z7(a.maxFee,9),maxPriorityFeePerGas:Z7(a.maxPriorityFee,9)}}catch(i){me(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let ez=!1;function eGe(){if(ez)return;ez=!0;function t(e,n,r){const s=function(){const i=new _l(e,n);return r.ensNetwork!=null&&i.attachPlugin(new NT(null,r.ensNetwork)),i.attachPlugin(new xT),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};_l.register(e,s),_l.register(n,s),r.altNames&&r.altNames.forEach(i=>{_l.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[X7("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[X7("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function Q3(t){return JSON.parse(JSON.stringify(t))}var Su,ua,wh,ol,Mw,TS;class tGe{constructor(e){K(this,Mw);K(this,Su);K(this,ua);K(this,wh);K(this,ol);U(this,Su,e),U(this,ua,null),U(this,wh,4e3),U(this,ol,-2)}get pollingInterval(){return _(this,wh)}set pollingInterval(e){U(this,wh,e)}start(){_(this,ua)||(U(this,ua,_(this,Su)._setTimeout(fe(this,Mw,TS).bind(this),_(this,wh))),fe(this,Mw,TS).call(this))}stop(){_(this,ua)&&(_(this,Su)._clearTimeout(_(this,ua)),U(this,ua,null))}pause(e){this.stop(),e&&U(this,ol,-2)}resume(){this.start()}}Su=new WeakMap,ua=new WeakMap,wh=new WeakMap,ol=new WeakMap,Mw=new WeakSet,TS=async function(){try{const e=await _(this,Su).getBlockNumber();if(_(this,ol)===-2){U(this,ol,e);return}if(e!==_(this,ol)){for(let n=_(this,ol)+1;n<=e;n++){if(_(this,ua)==null)return;await _(this,Su).emit("block",n)}U(this,ol,e)}}catch{}_(this,ua)!=null&&U(this,ua,_(this,Su)._setTimeout(fe(this,Mw,TS).bind(this),_(this,wh)))};var Gp,qp,bh;class WU{constructor(e){K(this,Gp);K(this,qp);K(this,bh);U(this,Gp,e),U(this,bh,!1),U(this,qp,n=>{this._poll(n,_(this,Gp))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){_(this,bh)||(U(this,bh,!0),_(this,qp).call(this,-2),_(this,Gp).on("block",_(this,qp)))}stop(){_(this,bh)&&(U(this,bh,!1),_(this,Gp).off("block",_(this,qp)))}pause(e){this.stop()}resume(){this.start()}}Gp=new WeakMap,qp=new WeakMap,bh=new WeakMap;var Uw,Iu;class nGe extends WU{constructor(n,r){super(n);K(this,Uw);K(this,Iu);U(this,Uw,r),U(this,Iu,-2)}pause(n){n&&U(this,Iu,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(_(this,Uw));s!=null&&(_(this,Iu)===-2?U(this,Iu,s.number):s.number>_(this,Iu)&&(r.emit(_(this,Uw),s.number),U(this,Iu,s.number)))}}Uw=new WeakMap,Iu=new WeakMap;var Cx;class rGe extends WU{constructor(n,r){super(n);K(this,Cx);U(this,Cx,Q3(r))}async _poll(n,r){throw new Error("@TODO")}}Cx=new WeakMap;var $w;class sGe extends WU{constructor(n,r){super(n);K(this,$w);U(this,$w,r)}async _poll(n,r){const s=await r.getTransactionReceipt(_(this,$w));s&&r.emit(_(this,$w),s)}}$w=new WeakMap;var xu,Bw,Fw,vh,da,Ax,Hte;class HU{constructor(e,n){K(this,Ax);K(this,xu);K(this,Bw);K(this,Fw);K(this,vh);K(this,da);U(this,xu,e),U(this,Bw,Q3(n)),U(this,Fw,fe(this,Ax,Hte).bind(this)),U(this,vh,!1),U(this,da,-2)}start(){_(this,vh)||(U(this,vh,!0),_(this,da)===-2&&_(this,xu).getBlockNumber().then(e=>{U(this,da,e)}),_(this,xu).on("block",_(this,Fw)))}stop(){_(this,vh)&&(U(this,vh,!1),_(this,xu).off("block",_(this,Fw)))}pause(e){this.stop(),e&&U(this,da,-2)}resume(){this.start()}}xu=new WeakMap,Bw=new WeakMap,Fw=new WeakMap,vh=new WeakMap,da=new WeakMap,Ax=new WeakSet,Hte=async function(e){if(_(this,da)===-2)return;const n=Q3(_(this,Bw));n.fromBlock=_(this,da)+1,n.toBlock=e;const r=await _(this,xu).getLogs(n);if(r.length===0){_(this,da)<e-60&&U(this,da,e-60);return}for(const s of r)_(this,xu).emit(_(this,Bw),s),U(this,da,s.blockNumber)};const iGe=BigInt(2),oGe=10;function UA(t){return t&&typeof t.then=="function"}function RS(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class Gte{constructor(e){te(this,"name");mt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function aGe(t){return JSON.parse(JSON.stringify(t))}function J3(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function FO(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Yn(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:RS("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:RS("orphan",n),filter:aGe(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?J3(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{Yn(a)?s.push(a):i.push((async()=>{s.push(await yi(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=J3(s.map(a=>a.toLowerCase()))}return{filter:r,tag:RS("event",r),type:"event"}}J(!1,"unknown ProviderEvent","event",t)}function jO(){return new Date().getTime()}const cGe={cacheTimeout:250,pollingInterval:4e3};var qs,Eh,Vs,jw,xo,Vp,_h,Nu,uC,ha,zw,Ww,$t,vo,Z3,X3,xv,e5,Nv,PS;class lGe{constructor(e,n){K(this,$t);K(this,qs);K(this,Eh);K(this,Vs);K(this,jw);K(this,xo);K(this,Vp);K(this,_h);K(this,Nu);K(this,uC);K(this,ha);K(this,zw);K(this,Ww);if(U(this,Ww,Object.assign({},cGe,n||{})),e==="any")U(this,Vp,!0),U(this,xo,null);else if(e){const r=_l.from(e);U(this,Vp,!1),U(this,xo,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else U(this,Vp,!1),U(this,xo,null);U(this,Nu,-1),U(this,_h,new Map),U(this,qs,new Map),U(this,Eh,new Map),U(this,Vs,null),U(this,jw,!1),U(this,uC,1),U(this,ha,new Map),U(this,zw,!1)}get pollingInterval(){return _(this,Ww).pollingInterval}get provider(){return this}get plugins(){return Array.from(_(this,Eh).values())}attachPlugin(e){if(_(this,Eh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,Eh).set(e.name,e.connect(this)),this}getPlugin(e){return _(this,Eh).get(e)||null}get disableCcipRead(){return _(this,zw)}set disableCcipRead(e){U(this,zw,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new wf(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}me(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}me(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new NHe(VHe(e),this)}_wrapLog(e,n){return new c1(GHe(e),this)}_wrapTransactionReceipt(e,n){return new Rte(JHe(e),this)}_wrapTransactionResponse(e,n){return new K_(Wte(e),this)}_detectNetwork(){me(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){me(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=zt(await fe(this,$t,vo).call(this,{method:"getBlockNumber"}),"%response");return _(this,Nu)>=0&&U(this,Nu,e),e}_getAddress(e){return yi(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Yn(e))return Yn(e,32)?e:dc(e);if(typeof e=="bigint"&&(e=zt(e,"blockTag")),typeof e=="number")return e>=0?dc(e):_(this,Nu)>=0?dc(_(this,Nu)+e):this.getBlockNumber().then(n=>dc(n+e));J(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?J3(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=gx(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=yi(n[s],this);UA(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);UA(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(_(this,xo)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw _(this,xo)===s&&U(this,xo,null),i}})();return U(this,xo,s),(await s).clone()}const e=_(this,xo),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(_(this,Vp)?(this.emit("network",r,n),_(this,xo)===e&&U(this,xo,Promise.resolve(r))):me(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await li({_block:fe(this,$t,e5).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await fe(this,$t,vo).call(this,{method:"getGasPrice"});return Xe(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await fe(this,$t,vo).call(this,{method:"getPriorityFee"});return Xe(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*iGe+c),new V7(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new wf(r.url),i=await r.processFunc(n,this,s);return new V7(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return UA(n)&&(n=await n),Xe(await fe(this,$t,vo).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await li({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await fe(this,$t,X3).call(this,fe(this,$t,Z3).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Xe(await fe(this,$t,xv).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return zt(await fe(this,$t,xv).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Le(await fe(this,$t,xv).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Xe(n,"position");return Le(await fe(this,$t,xv).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await li({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=cx.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await li({network:this.getNetwork(),params:fe(this,$t,e5).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await li({network:this.getNetwork(),params:fe(this,$t,vo).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await li({network:this.getNetwork(),params:fe(this,$t,vo).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await fe(this,$t,vo).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await li({network:this.getNetwork(),result:fe(this,$t,vo).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Le(n)}async getLogs(e){let n=this._getFilter(e);UA(n)&&(n=await n);const{network:r,params:s}=await li({network:this.getNetwork(),params:fe(this,$t,vo).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){me(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await yx.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=vn(e);const n=H3(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await yx.getEnsAddress(this),i=await new Yy(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===F_)return null;const a=await new Yy(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Ns(r,"BAD_DATA")&&r.value==="0x"||Ns(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(sr("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){me(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=_(this,ha).get(e);n&&(n.timer&&clearTimeout(n.timer),_(this,ha).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=md(this,uC)._++,s=()=>{_(this,ha).delete(r),e()};if(this.paused)_(this,ha).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);_(this,ha).set(r,{timer:i,func:s,time:jO()})}return r}_forEachSubscriber(e){for(const n of _(this,qs).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Gte(e.type);case"block":{const n=new tGe(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new nGe(this,e.type);case"event":return new HU(this,e.filter);case"transaction":return new sGe(this,e.hash);case"orphan":return new rGe(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of _(this,qs).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),_(this,Vs)!=null&&n.pause(_(this,Vs));break}}async on(e,n){const r=await fe(this,$t,PS).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,_(this,Vs)!=null&&r.subscriber.pause(_(this,Vs))),this}async once(e,n){const r=await fe(this,$t,PS).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,_(this,Vs)!=null&&r.subscriber.pause(_(this,Vs))),this}async emit(e,...n){const r=await fe(this,$t,Nv).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new oee(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),_(this,qs).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await fe(this,$t,Nv).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of _(this,qs).values())n+=r.length;return n}async listeners(e){if(e){const r=await fe(this,$t,Nv).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of _(this,qs).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await fe(this,$t,Nv).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),_(this,qs).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await fe(this,$t,PS).call(this,e);r&&s.stop(),_(this,qs).delete(n)}else for(const[n,{started:r,subscriber:s}]of _(this,qs))r&&s.stop(),_(this,qs).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return _(this,jw)}destroy(){this.removeAllListeners();for(const e of _(this,ha).keys())this._clearTimeout(e);U(this,jw,!0)}get paused(){return _(this,Vs)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(U(this,Nu,-1),_(this,Vs)!=null){if(_(this,Vs)==!!e)return;me(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),U(this,Vs,!!e);for(const n of _(this,ha).values())n.timer&&clearTimeout(n.timer),n.time=jO()-n.time}resume(){if(_(this,Vs)!=null){this._forEachSubscriber(e=>e.resume()),U(this,Vs,null);for(const e of _(this,ha).values()){let n=e.time;n<0&&(n=0),e.time=jO(),setTimeout(e.func,n)}}}}qs=new WeakMap,Eh=new WeakMap,Vs=new WeakMap,jw=new WeakMap,xo=new WeakMap,Vp=new WeakMap,_h=new WeakMap,Nu=new WeakMap,uC=new WeakMap,ha=new WeakMap,zw=new WeakMap,Ww=new WeakMap,$t=new WeakSet,vo=async function(e){const n=_(this,Ww).cacheTimeout;if(n<0)return await this._perform(e);const r=RS(e.method,e);let s=_(this,_h).get(r);return s||(s=this._perform(e),_(this,_h).set(r,s),setTimeout(()=>{_(this,_h).get(r)===s&&_(this,_h).delete(r)},n)),await s},Z3=async function(e,n,r){me(r<oGe,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=gx(e);try{return Le(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&SU(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&wr(i.data,0,4)==="0x556f1830"){const o=i.data,a=await yi(s.to,this);let c;try{c=pGe(wr(i.data,4))}catch(d){me(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}me(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);me(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:_r([c.selector,fGe([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await fe(this,$t,Z3).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},X3=async function(e){const{value:n}=await li({network:this.getNetwork(),value:e});return n},xv=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await fe(this,$t,X3).call(this,fe(this,$t,vo).call(this,Object.assign(e,{address:s,blockTag:i})))},e5=async function(e,n){if(Yn(e,32))return await fe(this,$t,vo).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await fe(this,$t,vo).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Nv=async function(e,n){let r=await FO(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await FO({orphan:"drop-log",log:n[0]},this)),_(this,qs).get(r.tag)||null},PS=async function(e){const n=await FO(e,this),r=n.tag;let s=_(this,qs).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},_(this,qs).set(r,s)),s};function uGe(t,e){try{const n=t5(t,e);if(n)return ox(n)}catch{}return null}function t5(t,e){if(t==="0x")return null;try{const n=zt(wr(t,e,e+32)),r=zt(wr(t,n,n+32));return wr(t,n+32,n+32+r)}catch{}return null}function tz(t){const e=Kr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function dGe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const hGe=new Uint8Array([]);function fGe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(hGe),n+=32;for(let r=0;r<t.length;r++){const s=jt(t[r]);e[r]=tz(n),e.push(tz(s.length)),e.push(dGe(s)),n+=32+Math.ceil(s.length/32)*32}return _r(e)}const nz="0x0000000000000000000000000000000000000000000000000000000000000000";function pGe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};me(qy(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=wr(t,0,32);me(wr(n,0,12)===wr(nz,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=wr(n,12);try{const r=[],s=zt(wr(t,32,64)),i=zt(wr(t,s,s+32)),o=wr(t,s+32);for(let a=0;a<i;a++){const c=uGe(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{me(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=t5(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{me(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}me(wr(t,100,128)===wr(nz,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=wr(t,96,100);try{const r=t5(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{me(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function $f(t,e){if(t.provider)return t.provider;me(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function rz(t,e){let n=gx(e);if(n.to!=null&&(n.to=yi(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),yi(r,t)]).then(([s,i])=>(J(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await li(n)}class gGe{constructor(e){te(this,"provider");mt(this,{provider:e||null})}async getNonce(e){return $f(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await rz(this,e)}async populateTransaction(e){const n=$f(this,"populateTransaction"),r=await rz(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Xe(r.chainId);J(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?J(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&J(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();me(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(me(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):me(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await li(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await $f(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return $f(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return $f(this,"call").call(await this.populateCall(e))}async resolveName(e){return await $f(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=$f(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=cx.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){me(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function mGe(t){return JSON.parse(JSON.stringify(t))}var ai,al,Kp,Ch,Yp,Hw,vf,n5,r5;class qte{constructor(e){K(this,vf);K(this,ai);K(this,al);K(this,Kp);K(this,Ch);K(this,Yp);K(this,Hw);U(this,ai,e),U(this,al,null),U(this,Kp,fe(this,vf,n5).bind(this)),U(this,Ch,!1),U(this,Yp,null),U(this,Hw,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){_(this,Ch)||(U(this,Ch,!0),fe(this,vf,n5).call(this,-2))}stop(){_(this,Ch)&&(U(this,Ch,!1),U(this,Hw,!0),fe(this,vf,r5).call(this),_(this,ai).off("block",_(this,Kp)))}pause(e){e&&fe(this,vf,r5).call(this),_(this,ai).off("block",_(this,Kp))}resume(){this.start()}}ai=new WeakMap,al=new WeakMap,Kp=new WeakMap,Ch=new WeakMap,Yp=new WeakMap,Hw=new WeakMap,vf=new WeakSet,n5=async function(e){try{_(this,al)==null&&U(this,al,this._subscribe(_(this,ai)));let n=null;try{n=await _(this,al)}catch(i){if(!Ns(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){U(this,al,null),_(this,ai)._recoverSubscriber(this,this._recover(_(this,ai)));return}const r=await _(this,ai).getNetwork();if(_(this,Yp)||U(this,Yp,r),_(this,Yp).chainId!==r.chainId)throw new Error("chaid changed");if(_(this,Hw))return;const s=await _(this,ai).send("eth_getFilterChanges",[n]);await this._emitResults(_(this,ai),s)}catch(n){console.log("@TODO",n)}_(this,ai).once("block",_(this,Kp))},r5=function(){const e=_(this,al);e&&(U(this,al,null),e.then(n=>{_(this,ai).destroyed||_(this,ai).send("eth_uninstallFilter",[n])}))};var Qp;class yGe extends qte{constructor(n,r){super(n);K(this,Qp);U(this,Qp,mGe(r))}_recover(n){return new HU(n,_(this,Qp))}async _subscribe(n){return await n.send("eth_newFilter",[_(this,Qp)])}async _emitResults(n,r){for(const s of r)n.emit(_(this,Qp),n._wrapLog(s,n._network))}}Qp=new WeakMap;class wGe extends qte{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const bGe="bigint,boolean,function,number,string,symbol".split(/,/g);function OS(t){if(t==null||bGe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(OS);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function vGe(t){return new Promise(e=>{setTimeout(e,t)})}function Qm(t){return t&&t.toLowerCase()}function sz(t){return t&&typeof t.pollingInterval=="number"}const Vte={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class zO extends gGe{constructor(n,r){super(n);te(this,"address");r=vn(r),mt(this,{address:r})}connect(n){me(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=OS(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await yi(o,this.provider);J(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await yi(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Ns(u,"CANCELLED")||Ns(u,"BAD_DATA")||Ns(u,"NETWORK_ERROR")||Ns(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(Ns(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",sr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=OS(n);if(r.from){const i=await yi(r.from,this.provider);J(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?qu(n):n;return await this.provider.send("personal_sign",[Le(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=OS(s),o=await px.resolveNames(n,r,i,async a=>{const c=await yi(a);return J(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(px.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?qu(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Le(r)])}}var Jp,Gw,Tu,cl,oc,fa,zi,dC,s5;class EGe extends lGe{constructor(n,r){super(n,r);K(this,dC);K(this,Jp);K(this,Gw);K(this,Tu);K(this,cl);K(this,oc);K(this,fa);K(this,zi);U(this,Gw,1),U(this,Jp,Object.assign({},Vte,r||{})),U(this,Tu,[]),U(this,cl,null),U(this,fa,null),U(this,zi,null);{let i=null;const o=new Promise(a=>{i=a});U(this,oc,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(J(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&U(this,fa,_l.from(n))):s&&(J(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),U(this,fa,s))}_getOption(n){return _(this,Jp)[n]}get _network(){return me(_(this,fa),"network is not available yet","NETWORK_ERROR"),_(this,fa)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Xe(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(_(this,fa))return _(this,fa)}else return n;return _(this,zi)?await _(this,zi):this.ready?(U(this,zi,(async()=>{try{const r=_l.from(Xe(await this.send("eth_chainId",[])));return U(this,zi,null),r}catch(r){throw U(this,zi,null),r}})()),await _(this,zi)):(U(this,zi,(async()=>{const r={id:md(this,Gw)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],U(this,zi,null)}catch(i){throw U(this,zi,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return _l.from(Xe(s.result));throw this.getRpcError(r,s)})()),await _(this,zi))}_start(){_(this,oc)==null||_(this,oc).resolve==null||(_(this,oc).resolve(),U(this,oc,null),(async()=>{for(;_(this,fa)==null&&!this.destroyed;)try{U(this,fa,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",sr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await vGe(1e3)}fe(this,dC,s5).call(this)})())}async _waitUntilReady(){if(_(this,oc)!=null)return await _(this,oc).promise}_getSubscriber(n){return n.type==="pending"?new wGe(this):n.type==="event"?this._getOption("polling")?new HU(this,n.filter):new yGe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Gte("orphan"):super._getSubscriber(n)}get ready(){return _(this,oc)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=dc(Xe(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Le(n[s]))}),n.accessList&&(r.accessList=um(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Yee(s);return{address:i.address,nonce:dc(i.nonce),chainId:dc(i.chainId),yParity:dc(i.signature.yParity),r:dc(i.signature.r),s:dc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Qm(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Qm(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[Qm(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Qm(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(Qm):n.filter.address=Qm(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return sr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return sr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=i5(i),l=V_.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(CGe(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return sr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return sr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return sr("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return sr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return sr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?sr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):sr("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(sr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=md(this,Gw)._++,i=new Promise((o,a)=>{_(this,Tu).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return fe(this,dC,s5).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new zO(this,i[n])}const{accounts:s}=await li({network:this.getNetwork(),accounts:r});n=vn(n);for(const i of s)if(vn(i)===n)return new zO(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new zO(this,r))}destroy(){_(this,cl)&&(clearTimeout(_(this,cl)),U(this,cl,null));for(const{payload:n,reject:r}of _(this,Tu))r(sr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));U(this,Tu,[]),super.destroy()}}Jp=new WeakMap,Gw=new WeakMap,Tu=new WeakMap,cl=new WeakMap,oc=new WeakMap,fa=new WeakMap,zi=new WeakMap,dC=new WeakSet,s5=function(){if(_(this,cl))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");U(this,cl,setTimeout(()=>{U(this,cl,null);const r=_(this,Tu);for(U(this,Tu,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==_(this,Jp).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>_(this,Jp).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(sr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=sr("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Ah;class _Ge extends EGe{constructor(n,r){super(n,r);K(this,Ah);let s=this._getOption("pollingInterval");s==null&&(s=Vte.pollingInterval),U(this,Ah,s)}_getSubscriber(n){const r=super._getSubscriber(n);return sz(r)&&(r.pollingInterval=_(this,Ah)),r}get pollingInterval(){return _(this,Ah)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");U(this,Ah,n),this._forEachSubscriber(r=>{sz(r)&&(r.pollingInterval=_(this,Ah))})}}Ah=new WeakMap;function i5(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Yn(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=i5(t[e]);if(n)return n}return null}if(typeof t=="string")try{return i5(JSON.parse(t))}catch{}return null}function o5(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)o5(t[n],e);if(typeof t=="string")try{return o5(JSON.parse(t),e)}catch{}}}function CGe(t){const e=[];return o5(t,e),e}var qw,Vw;const ip=class ip extends _Ge{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});J(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);K(this,qw);K(this,Vw);U(this,Vw,null),s&&s.providerInfo&&U(this,Vw,s.providerInfo),U(this,qw,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return _(this,Vw)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){J(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await _(this,qw).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await _(this,qw).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new ip(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new ip(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof ip)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new ip(p,void 0,{providerInfo:g}))}else a(sr("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new ip(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};qw=new WeakMap,Vw=new WeakMap;let a5=ip;const Kf=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"}],Ya="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",rr={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},WO={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},au=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],AGe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function SGe(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function IGe(t){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const e=new a5(window.ethereum);return await new Yy(Ya,Kf,e).playerToGame(t)}catch(e){return console.error("Error fetching invite code from contract:",e),null}}const Kte=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=UC(),[i,o]=D.useState(""),[a,c]=D.useState(""),[l,u]=D.useState(!1),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,y]=D.useState(!1),{writeContract:m,isPending:w,data:v}=qR(),{writeContract:A,isPending:C,data:S,error:x}=qR(),{writeContract:T,isPending:I,data:k}=qR(),O=Pwe(),{isLoading:B}=GR({hash:v}),{isLoading:G,data:W}=GR({hash:S}),{isLoading:R}=GR({hash:k}),{data:N}=p8({address:Ya,abi:Kf,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:M}=p8({address:Ya,abi:Kf,functionName:"games",args:N?[N]:void 0,query:{enabled:!!N&&N!=="0x000000000000"}}),[P,L]=D.useState(""),j=($,H)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${$}" from ${H}`),P&&!$&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${P}" to "${$}" from ${H}`),L($)},q=($,H)=>{console.log(`[WAGER_DEBUG] Setting wager to ${$} TDMT from ${H}`),Ko!==$&&console.log(`[WAGER_DEBUG] Wager changed from ${Ko} to ${$} TDMT`),zl($)},[ne,le]=D.useState("moves"),oe=async()=>{if(!r||!Me){console.error("[CLAIM] Missing required data for claiming winnings");return}let $=P;if(!$&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const H=await IGe(r);H&&H!=="0x000000000000"&&($=H,console.log("[CLAIM] Retrieved invite code from contract:",$))}catch(H){console.error("[CLAIM] Error getting invite code from contract:",H)}}if(!$){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{p(!0),console.log("[CLAIM] Claiming winnings for game:",$,"Player:",Me,"Address:",r);const H=await vs.getGame($);if(!H){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",H);let F=null;if(H.winner&&(H.blue_player||H.red_player)&&(F=H.winner==="blue"?H.blue_player:H.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:H.winner,winnerAddress:F})),!F&&M)if(H.winner&&(H.winner==="blue"||H.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let ce,Oe,Ie,$e,dt,gn;if(Array.isArray(M))[ce,Oe,Ie,$e,dt,gn]=M;else{console.error("[CLAIM] Unexpected contract data format:",M),alert("Failed to verify winner. Please try again.");return}F=H.winner==="blue"?ce:Oe,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:H.winner,winnerAddress:F,player1:ce,player2:Oe})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",M);let ce,Oe,Ie,$e,dt,gn;if(Array.isArray(M))[ce,Oe,Ie,$e,dt,gn]=M;else{console.error("[CLAIM] Unexpected contract data format:",M),alert("Failed to verify winner. Please try again.");return}const Et=String($e);if(Et.startsWith("0x"))F=Et;else if(Et==="blue"||Et==="red")F=Et==="blue"?ce:Oe;else if(Et==="1"||Et==="2")F=Et==="1"?ce:Oe;else{console.error("[CLAIM] Unknown winner format:",$e,"as string:",Et),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:$e,winnerAddress:F,player1:ce,player2:Oe,winnerType:typeof $e,winnerValue:$e,address:r,addressType:typeof r})}if(!F){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:F,address:r,playerColor:Me,winnerAddressType:typeof F,addressType:typeof r,addressesMatch:F===r,winnerAddressLength:F==null?void 0:F.length,addressLength:r==null?void 0:r.length}),F!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:F,address:r,playerColor:Me}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM] ✅ Winner verification passed! Proceeding with contract call...");let X=$;if(!X&&M){console.log("[CLAIM] Using invite code from contract data as fallback");let ce,Oe,Ie,$e,dt,gn;if(Array.isArray(M))[ce,Oe,Ie,$e,dt,gn]=M,X=dt;else{console.error("[CLAIM] Unexpected contract data format for invite code:",M),alert("Failed to get invite code. Please try again.");return}}if(!X||typeof X!="string"||!X.startsWith("0x")||X.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",X),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:X,winner:F,functionName:"endGame",inviteCodeSource:H.invite_code?"Firebase":"Contract"}),T({address:Ya,abi:Kf,functionName:"endGame",args:[X,F]}),console.log("[CLAIM] Contract call initiated successfully"),I?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:I,endGameHash:k})}catch(H){console.error("[CLAIM] Error claiming winnings:",H),alert("Failed to claim winnings. Please try again.")}finally{p(!1)}},[se,ye]=D.useState(au),[Z,ae]=D.useState("blue"),[he,de]=D.useState(null),[be,Je]=D.useState([]),[_e,Ae]=D.useState([]),[tt,Se]=D.useState("Waiting for opponent..."),[Gt,en]=D.useState(rr.LOBBY),[Me,kt]=D.useState(null),[nr,Dn]=D.useState(null),[Ko,zl]=D.useState(0),[Sr,Bs]=D.useState([]),[Ua,Ii]=D.useState(!1),[pr,Nf]=D.useState(null),[Ln,Yo]=D.useState(null),[TT,hm]=D.useState(""),[tn,d1]=D.useState(0),[RT]=D.useState(!0);D.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const[Dc,KU]=D.useState(!1),[h1,PT]=D.useState(null),[fm,mb]=D.useState(!1),[fd,yb]=D.useState(null),[f1,pm]=D.useState(!1),[$a,gm]=D.useState(!0),[mm,p1]=D.useState(null),[xi,Lc]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[g1,m1]=D.useState([]),[Ba,OT]=D.useState(null),Fa=D.useRef(null),Wl=D.useRef(null),y1=D.useRef(r);D.useEffect(()=>{y1.current=r},[r]),D.useEffect(()=>{console.log("[JOIN RECEIPT DEBUG] - joinGameHash:",S),console.log("[JOIN RECEIPT DEBUG] - isWaitingForJoinReceipt:",G),console.log("[JOIN RECEIPT DEBUG] - pendingJoinGameData:",Ln),console.log("[JOIN RECEIPT DEBUG] - condition:",S&&!G&&Ln),S&&!G&&Ln&&(console.log("[CONTRACT] Join transaction confirmed:",S),r===Ln.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),kt("red"),Dn(Ln.gameData.blue_player)),vs.updateGame(Ln.inviteCode,{...Ln.gameData,red_player:Ln.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),en(rr.ACTIVE),Se("Game started!"),Hl(Ln.inviteCode),console.log("[CONTRACT] Clearing pending join data"),Yo(null)}).catch($=>{console.error("Error updating game in database:",$),Se("Joined game on contract but failed to update database"),Yo(null)}))},[S,G,Ln,r]),D.useEffect(()=>{k&&!R&&(console.log("[CLAIM] End game transaction confirmed:",k),Se("Winnings claimed successfully! Transaction hash: "+k.slice(0,10)+"..."),p(!1))},[k,R]),D.useEffect(()=>{I===!1&&f&&!k&&(console.log("[CLAIM] End game transaction rejected or failed"),Se("Claim transaction was rejected. Please try again."),p(!1))},[I,f,k]),D.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",v),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",B),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",pr),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",P),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",v&&!B&&pr&&!P),console.log("[CREATE DEBUG] Transaction receipt handler - individual conditions:"),console.log("[CREATE DEBUG] - createGameHash exists:",!!v),console.log("[CREATE DEBUG] - not waiting for receipt:",!B),console.log("[CREATE DEBUG] - pendingGameData exists:",!!pr),console.log("[CREATE DEBUG] - no inviteCode set:",!P),v&&!B&&pr&&!P?(console.log("[CONTRACT] Create game transaction confirmed:",v),vs.createGame(pr).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),L(pr.invite_code),kt("blue"),q(tn,"create game success"),en(rr.WAITING),Se("Waiting for opponent to join..."),Hl(pr.invite_code),setTimeout(()=>{wm()},1e3),Nf(null),Ii(!1)}).catch($=>{console.error("[FIREBASE] Error creating game after transaction:",$),Se("Transaction confirmed but failed to create game in database"),Nf(null),Ii(!1)})):v&&!B&&(console.log("[CREATE DEBUG] Transaction confirmed but conditions not met for Firebase update:"),console.log("[CREATE DEBUG] - pendingGameData missing:",!pr),console.log("[CREATE DEBUG] - inviteCode already set:",!!P))},[v,B,pr,tn]),D.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",pr)},[pr]),D.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",Ln),Ln){const $=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),Yo(null)},3e4);return()=>clearTimeout($)}},[Ln]),D.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",w),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",pr),console.log("[CREATE REJECTION DEBUG] - createGameHash:",v),console.log("[CREATE REJECTION DEBUG] - condition:",w===!1&&pr&&!v),w===!1&&pr&&!v&&(console.log("[CONTRACT] Create game transaction rejected or failed"),Se("Transaction was rejected. Please try again."),Nf(null),Ii(!1))},[w,pr,v]),D.useEffect(()=>{C===!1&&Ln&&!S&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",C),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",Ln),console.log("[CONTRACT] Rejection details - joinGameHash:",S),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",N),Se("Transaction was rejected. Please try again."),j("","join transaction rejection"),kt(null),q(0,"join transaction rejection"),Dn(null),en(rr.LOBBY),Se(""),Yo(null))},[C,Ln,S,r,N]),D.useEffect(()=>{r&&N!==void 0&&(g||(N!=="0x000000000000"&&M||N==="0x000000000000")&&kT())},[r,N,M,g]),D.useEffect(()=>{y(!1)},[r]),D.useEffect(()=>()=>{v1(),Fa.current&&Fa.current(),Wl.current&&clearTimeout(Wl.current)},[]);const kT=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),N&&N!=="0x000000000000"&&!M){console.log("[GAME_STATE] Waiting for contract data...");return}if(N&&N!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",N),M)){let F,X,ce,Oe,Ie,$e;if(Array.isArray(M))[F,X,ce,Oe,Ie,$e]=M;else{console.error("[GAME_STATE] Unexpected contract data format:",M);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:F,player2:X,isActive:ce,winner:Oe,inviteCode:Ie,wagerAmount:$e}),!Ie){console.error("[GAME_STATE] Invalid invite code:",Ie);return}const dt=F===r?"blue":"red",gn=F===r?X:F;console.log("[GAME_STATE] Player is",dt,"opponent is",gn),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",F),console.log("[DEBUG] - player2 (red):",X),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",F===r),console.log("[DEBUG] - player2 === address:",X===r);const Et=await vs.getGame(Ie);if(Et){if(console.log("[GAME_STATE] Found game in Firebase:",Et),L(Ie),kt(dt),q(parseFloat(Et.bet_amount)/1e18,"checkPlayerGameState Firebase"),Dn(gn),Et.game_state==="waiting")en(rr.WAITING),Se("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(Et.game_state==="active"||Et.game_state==="test_update"){if(en(rr.ACTIVE),Se("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",Et.game_state,")"),Et.board){const Ur=Et.board;ye(gd(Ur)),ae(Et.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",Et.game_state,"- treating as active"),en(rr.ACTIVE),Se("Game in progress"),Et.board){const Ur=Et.board;ye(gd(Ur)),ae(Et.current_player||"blue")}Hl(Ie),y(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",Gt),console.log("[GAME_STATE] Game state from Firebase:",Et.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const Ur={invite_code:Ie,game_title:`Game ${Ie.slice(-6)}`,bet_amount:$e?$e.toString():"0",blue_player:F,red_player:X,game_state:ce?"active":"waiting",board:{positions:Gl(au),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:Ya,is_public:!0};if(await vs.createGame(Ur),console.log("[GAME_STATE] Successfully synced game to Firebase:",Ur),L(Ie),kt(dt),q(parseFloat(Ur.bet_amount)/1e18,"checkPlayerGameState sync"),Dn(gn),ce?(en(rr.ACTIVE),Se("Game in progress")):(en(rr.WAITING),Se("Waiting for opponent to join...")),Ur.board){const lne=Ur.board;ye(gd(lne)),ae(Ur.current_player||"blue")}Hl(Ie),y(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const H=(await vs.getActiveGames()).filter(F=>F.chain==="sanko"&&(F.blue_player===r||F.red_player===r)&&["waiting","active"].includes(F.game_state));if(H&&H.length>0){const F=H[0];if(console.log("[GAME_STATE] Found active game in Firebase:",F),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",F.blue_player),console.log("[DEBUG] - red_player:",F.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",F.blue_player===r),console.log("[DEBUG] - red_player === address:",F.red_player===r),L(F.invite_code),kt(F.blue_player===r?"blue":"red"),q(parseFloat(F.bet_amount)/1e18,"checkPlayerGameState fallback"),Dn(F.blue_player===r?F.red_player:F.blue_player),F.game_state==="waiting")en(rr.WAITING),Se("Waiting for opponent to join...");else if(F.game_state==="active"||F.game_state==="test_update"){if(en(rr.ACTIVE),Se("Game in progress"),F.board){const X=F.board;ye(gd(X)),ae(F.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",F.game_state,"- treating as active"),en(rr.ACTIVE),Se("Game in progress"),F.board){const X=F.board;ye(gd(X)),ae(F.current_player||"blue")}Hl(F.invite_code),y(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),en(rr.LOBBY),Ii(!1),y(!0)}catch($){console.error("[GAME_STATE] Error in checkPlayerGameState:",$)}},ym=async()=>{try{await tee();const $=await eee(20);m1($)}catch($){console.error("Error loading leaderboard:",$)}},w1=async $=>{if(console.log("[SCORE] updateScore called with:",$,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",$g(r)),await ix(r,$)?console.log("[SCORE] Successfully updated score for:",$g(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(H){console.error("[SCORE] Error updating score:",H)}},b1=async($,H,F)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:$,bluePlayer:H,redPlayer:F}),!H||!F){console.error("[SCORE] Missing player addresses from contract");return}await H9e($,H,F)?(console.log("[SCORE] Successfully updated both players scores"),await ym()):console.error("[SCORE] Failed to update both players scores")}catch(X){console.error("[SCORE] Error updating both players scores:",X)}},wm=async()=>{try{const $=await vs.getOpenGames();console.log("[FIREBASE] Loaded open games:",$),await DT($),Bs($)}catch($){console.error("Error loading open games:",$)}},DT=async $=>{if(console.log("[CLEANUP] Checking for ghost games..."),!O){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const H of $)try{const F=H.invite_code;if(!F||typeof F!="string"||!F.startsWith("0x")||F.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",H.invite_code,F);continue}const X=await O.readContract({address:Ya,abi:Kf,functionName:"games",args:[F]});(!X||Array.isArray(X)&&X[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",H.invite_code,"- removing from Firebase"),await vs.deleteGame(H.invite_code),console.log("[CLEANUP] Ghost game removed:",H.invite_code))}catch(F){console.error("[CLEANUP] Error checking game:",H.invite_code,F)}},LT=async()=>{if(!(!r||tn<=0)){console.log("[CREATE] Starting game creation - address:",r,"wager:",tn),Ii(!0);try{const $=SGe();console.log("[CREATE] Generated invite code:",$);const H={invite_code:$,game_title:`Chess Game ${$.slice(-6)}`,bet_amount:(tn*1e18).toString(),blue_player:r,game_state:"waiting",board:{positions:Gl(au),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:Ya,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",H),console.log("[CREATE] Calling contract with args:",[$,BigInt(Math.floor(tn*1e18))]),m({address:Ya,abi:Kf,functionName:"createGame",args:[$],value:BigInt(Math.floor(tn*1e18))}),console.log("[CREATE] Contract call initiated, setting pending data"),console.log("[CREATE] Pending game data being set:",H),Nf(H),Se("Creating game... Please confirm transaction in your wallet.")}catch($){console.error("[CREATE] Error creating game:",$),Se("Failed to create game. Please try again.")}finally{Ii(!1)}}},MT=async $=>{if(r)try{const H=await vs.getGame($);if(!H||H.game_state!=="waiting"){Se("Game not found or already full");return}const F=parseFloat(H.bet_amount),X=F/1e18;if(L($),kt("red"),q(X,"joinGame"),Dn(H.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:$,playerColor:"red",wagerAmountTDMT:X,opponent:H.blue_player,address:r}),r===H.blue_player){console.error("[JOIN] Player cannot join their own game"),Se("You cannot join your own game");return}if(N&&N!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",N),Se("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const Oe=await window.ethereum.request({method:"eth_chainId"}),Ie=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",Oe),console.log("[JOIN] Wallet state check - connectedAccounts:",Ie),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(Oe){console.error("[JOIN] Error checking wallet state:",Oe)}console.log("[JOIN] Contract call parameters - contractAddress:",Ya),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[$]);const ce=BigInt(F);console.log("[JOIN] Contract call parameters - wagerAmount from Firebase (wei):",F),console.log("[JOIN] Contract call parameters - wagerValue (wei):",ce),console.log("[JOIN] Contract call parameters - value as hex:","0x"+ce.toString(16)),console.log("[JOIN] Contract call parameters - value in wei:",ce.toString()),Se("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",Ya),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[$]),console.log("[JOIN] - value:",ce),console.log("[JOIN] - value as BigInt:",ce.toString()),A({address:Ya,abi:Kf,functionName:"joinGame",args:[$],value:ce}),console.log("[JOIN] writeJoinGame called, setting pending data..."),Yo({inviteCode:$,gameData:H,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(H){console.error("[JOIN] Error joining game:",H),Se("Failed to join game. Please try again."),j("","join game error"),kt(null),q(0,"join game error"),Dn(null)}},[UT,pd]=D.useState(null),[YU,QU]=D.useState(""),[$T,JU]=D.useState(!0),v1=()=>{console.log("[FIREBASE] No fallback to stop")},Hl=$=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",$),Fa.current&&(console.log("[FIREBASE] Removing existing subscription"),Fa.current());const H=vs.subscribeToGame($,F=>{const X=y1.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",X),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",F),console.log("[DEBUG] Blue player from Firebase:",F==null?void 0:F.blue_player),console.log("[DEBUG] Red player from Firebase:",F==null?void 0:F.red_player),console.log("[DEBUG] Blue player type:",typeof(F==null?void 0:F.blue_player)),console.log("[DEBUG] Red player type:",typeof(F==null?void 0:F.red_player)),console.log("[DEBUG] Current address type:",typeof X),console.log("[DEBUG] Current playerColor state:",Me),console.log("[DEBUG] Pending join game data:",!!Ln),!F){console.log("[DEBUG] No game data received");return}if(Ln&&X===Ln.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",Me),F.game_state==="active"&&(console.log("[AUTO-CLEAR] Game is active, clearing pending join data"),Yo(null)),F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&Dn(F.blue_player===X?F.red_player:F.blue_player);else if(X&&F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const Oe=X.toLowerCase()===F.blue_player.toLowerCase(),Ie=X.toLowerCase()===F.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",Oe),console.log("[DEBUG] Red player match:",Ie),console.log("[DEBUG] Blue comparison:",`${X.toLowerCase()} === ${F.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${X.toLowerCase()} === ${F.red_player.toLowerCase()}`),Oe&&Me!=="blue"?(console.log("[DEBUG] Setting player color to BLUE"),kt("blue"),Dn(F.red_player)):Ie&&Me!=="red"?(console.log("[DEBUG] Setting player color to RED"),kt("red"),Dn(F.blue_player)):!Oe&&!Ie&&Me!==null?(console.log("[DEBUG] No address match found - setting playerColor to null"),kt(null),Dn(null)):console.log("[DEBUG] Player color already correctly set to:",Me)}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!X),console.log("[DEBUG] - blue_player:",!!F.blue_player),console.log("[DEBUG] - red_player:",F==null?void 0:F.red_player),console.log("[DEBUG] - Current playerColor state:",Me),console.log("[DEBUG] - Contract game data available:",!!M),Me&&(Me==="blue"||Me==="red")){console.log("[DEBUG] Preserving existing valid playerColor:",Me);return}else if(M&&Array.isArray(M)&&X){const[Oe,Ie]=M;if(Oe&&Ie){const $e=Oe.toLowerCase()===X.toLowerCase()?"blue":"red",dt=Oe.toLowerCase()===X.toLowerCase()?Ie:Oe;console.log("[DEBUG] Setting playerColor from contract fallback:",$e),kt($e),Dn(dt)}}else console.log("[DEBUG] No valid data available, but preserving existing playerColor if valid"),(!Me||Me!=="blue"&&Me!=="red")&&(console.log("[DEBUG] Setting playerColor to null"),kt(null));F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&Dn(F.blue_player===X?F.red_player:F.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",F.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof F.bet_amount),console.log("[WAGER DEBUG] Full gameData:",F),console.log("[WAGER DEBUG] parsed value:",F.bet_amount?parseFloat(F.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",F.bet_amount?parseFloat(F.bet_amount)/1e18:"null");let ce=0;F.bet_amount&&!isNaN(parseFloat(F.bet_amount))?(ce=parseFloat(F.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",ce)):M&&Array.isArray(M)&&M[5]?(ce=parseFloat(M[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",ce)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),q(ce,"Firebase subscription"),F.board&&ye(gd(F.board)),F.current_player&&ae(F.current_player),F.game_state==="active"?(en(rr.ACTIVE),Se("Game in progress")):F.game_state==="finished"?(en(rr.FINISHED),Se("Game finished")):F.game_state==="waiting"&&(en(rr.WAITING),Se("Waiting for opponent to join..."))});Fa.current=H,console.log("[FIREBASE] Firebase subscription setup complete for game:",$)};D.useEffect(()=>(P&&Hl(P),()=>{Fa.current&&Fa.current()}),[P,r]),D.useEffect(()=>{if(M&&!Me&&r){console.log("[FALLBACK] Setting playerColor from contract data");let $,H,F,X,ce,Oe;if(Array.isArray(M))[$,H,F,X,ce,Oe]=M;else{console.error("[FALLBACK] Unexpected contract data format:",M);return}const Ie=$===r?"blue":"red",$e=$===r?H:$;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",$),console.log("[FALLBACK] - player2 (red):",H),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Ie),console.log("[FALLBACK] - opponent:",$e),console.log("[FALLBACK] - inviteCode from contract:",ce),kt(Ie),Dn($e),!P&&ce&&(console.log("[FALLBACK] Setting missing inviteCode:",ce),L(ce)),P&&vs.getGame(P).then(dt=>{dt&&(!dt.blue_player||!dt.red_player)&&(console.log("[AUTO-FIX] Detected missing player data, attempting to fix..."),tne()),dt&&dt.game_state==="active"&&Ln&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),Yo(null))}).catch(dt=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",dt)})}},[M,Me,r,P]),D.useEffect(()=>{if(W&&Ln){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",W.transactionHash),console.log("[RECEIPT] Pending data:",Ln);const{inviteCode:$,gameData:H,address:F}=Ln;vs.updateGame($,{red_player:F,blue_player:H.blue_player,bet_amount:H.bet_amount,game_state:"active",last_move:null,board:{positions:Gl(au),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),Se("Game started! You are the red player."),en(rr.ACTIVE),Yo(null)}).catch(X=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",X),Se("Game joined but failed to update game state. Please refresh.")})}},[W,Ln]),D.useEffect(()=>{x&&(console.error("[ERROR] Join transaction failed:",x),Se(`Failed to join game: ${x.message||"Transaction rejected"}`),j("","join game error effect"),kt(null),q(0,"join game error effect"),Dn(null),Yo(null))},[x]);const Gl=$=>{const H={};return $.forEach((F,X)=>{F.forEach((ce,Oe)=>{H[`${X}_${Oe}`]=ce})}),H},gd=$=>{if(!$||!$.positions)return console.warn("[BOARD] No board data available, using initial board"),au;if(console.log("[BOARD] Attempting to reconstruct board from:",$),console.log("[BOARD] Positions type:",typeof $.positions),console.log("[BOARD] Positions is array:",Array.isArray($.positions)),console.log("[BOARD] Positions value:",$.positions),typeof $.positions=="object"&&!Array.isArray($.positions)){const H=$.positions,F=$.rows||8,X=$.cols||8,ce=Array(F).fill(null).map(()=>Array(X).fill(null));for(let Oe=0;Oe<F;Oe++)for(let Ie=0;Ie<X;Ie++){const $e=`${Oe}_${Ie}`;ce[Oe][Ie]=H[$e]||null}return console.log("[BOARD] Reconstructed from flat structure:",ce),ce}return Array.isArray($.positions)?(console.log("[BOARD] Found array structure, length:",$.positions.length),$.positions.length===8?$.positions.every((F,X)=>{const ce=Array.isArray(F)&&F.length===8;return ce||console.warn(`[BOARD] Row ${X} is invalid:`,F,"Type:",typeof F,"Length:",F==null?void 0:F.length),ce})?(console.log("[BOARD] Using legacy array structure"),$.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),au):(console.warn("[BOARD] Array has wrong length:",$.positions.length,"expected 8"),au)):(console.warn("[BOARD] Unknown board structure, using initial board:",$),au)},wb=$=>`${$.slice(0,6)}...${$.slice(-4)}`,Mr=$=>$&&$===$.toUpperCase()?"red":"blue",ql=($,H)=>$>=0&&$<8&&H>=0&&H<8,Vl=($,H)=>{const F=H==="red"?"K":"k";let X=-1,ce=-1;for(let Ie=0;Ie<8;Ie++){for(let $e=0;$e<8;$e++)if($[Ie][$e]===F){X=Ie,ce=$e;break}if(X!==-1)break}return X===-1?!1:V(X,ce,H==="red"?"blue":"red",$)},V=($,H,F,X)=>{if(!X||!Array.isArray(X)||X.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",X),!1;for(let ce=0;ce<8;ce++){if(!X[ce]||!Array.isArray(X[ce])||X[ce].length!==8)return console.warn("[SAFETY] Invalid board row structure:",X[ce]),!1;for(let Oe=0;Oe<8;Oe++){const Ie=X[ce][Oe];if(Ie&&Mr(Ie)===F&&Vt(Ie,ce,Oe,$,H,!1,F,X,!0))return!0}}return!1},Q=($,H,F,X,ce,Oe=se)=>{const Ie=Oe[$][H];if(!Ie)return!1;const $e=Oe.map(dt=>[...dt]);return $e[F][X]=Ie,$e[$][H]=null,Vl($e,ce)},ie=($,H,F,X,ce,Oe)=>{const Ie=$==="blue"?-1:1,$e=$==="blue"?6:1;if(!ql(X,ce)||$==="blue"&&X>=H||$==="red"&&X<=H)return!1;if(F===ce&&X===H+Ie)return Oe[X][ce]===null;if(F===ce&&H===$e&&X===H+2*Ie)return Oe[H+Ie][F]===null&&Oe[X][ce]===null;if(Math.abs(F-ce)===1&&X===H+Ie){const dt=Oe[X][ce];if(dt!==null&&Mr(dt)!==$)return!0;if(dt===null&&xi.lastPawnDoubleMove){const{row:gn,col:Et}=xi.lastPawnDoubleMove;if(gn===H&&Et===ce){const Ur=Oe[H][ce];if(Ur&&Ur.toLowerCase()==="p"&&Mr(Ur)!==$)return!0}}}return!1},re=($,H,F,X,ce)=>$===F||H===X,ee=($,H,F,X)=>{const ce=Math.abs($-F),Oe=Math.abs(H-X);return ce===2&&Oe===1||ce===1&&Oe===2},Re=($,H,F,X,ce)=>Math.abs($-F)===Math.abs(H-X),Pe=($,H,F,X,ce)=>re($,H,F,X)||Re($,H,F,X),rt=($,H,F,X,ce)=>{const Oe=Math.abs(H-X),Ie=Math.abs(F-ce);if(Oe<=1&&Ie<=1)return!0;if(Oe===0&&Ie===2){if($==="blue"&&!xi.blueKingMoved){if(ce===6&&!xi.blueRooksMove.right||ce===2&&!xi.blueRooksMove.left)return!0}else if($==="red"&&!xi.redKingMoved&&(ce===6&&!xi.redRooksMove.right||ce===2&&!xi.redRooksMove.left))return!0}return!1},qt=($,H,F,X,ce)=>{const Oe=$===F?0:(F-$)/Math.abs(F-$),Ie=H===X?0:(X-H)/Math.abs(X-H);let $e=$+Oe,dt=H+Ie;for(;$e!==F||dt!==X;){if(ce[$e][dt]!==null)return!1;$e+=Oe,dt+=Ie}return!0},Vt=($,H,F,X,ce,Oe=!0,Ie=Mr($),$e=se,dt=!1)=>{if(!$||!ql(X,ce))return!1;const gn=$e[X][ce];if(gn&&Mr(gn)===Ie)return!1;let Et=!1;switch($.toUpperCase()){case"P":Et=ie(Ie,H,F,X,ce,$e);break;case"R":Et=re(H,F,X,ce)&&qt(H,F,X,ce,$e);break;case"N":Et=ee(H,F,X,ce);break;case"B":Et=Re(H,F,X,ce)&&qt(H,F,X,ce,$e);break;case"Q":Et=Pe(H,F,X,ce)&&qt(H,F,X,ce,$e);break;case"K":Et=rt(Ie,H,F,X,ce);break}return!(!Et||Oe&&Q(H,F,X,ce,Ie,$e))},Fn=($,H=se,F=Z)=>{const X=[],ce=H[$.row][$.col];if(!ce||Mr(ce)!==F)return X;const Oe=ce.toLowerCase();if(Oe==="p"){const Ie=F==="blue"?-1:1,$e=F==="blue"?6:1,dt=$.row+Ie;if(dt>=0&&dt<8&&Vt(ce,$.row,$.col,dt,$.col,!0,F,H,!0)&&X.push({row:dt,col:$.col}),$.row===$e){const gn=$.row+2*Ie;gn>=0&&gn<8&&Vt(ce,$.row,$.col,gn,$.col,!0,F,H,!0)&&X.push({row:gn,col:$.col})}for(const gn of[-1,1]){const Et=$.col+gn,Ur=$.row+Ie;Et>=0&&Et<8&&Ur>=0&&Ur<8&&Vt(ce,$.row,$.col,Ur,Et,!0,F,H,!0)&&X.push({row:Ur,col:Et})}}else if(Oe==="n"){const Ie=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[$e,dt]of Ie){const gn=$.row+$e,Et=$.col+dt;gn>=0&&gn<8&&Et>=0&&Et<8&&Vt(ce,$.row,$.col,gn,Et,!0,F,H,!0)&&X.push({row:gn,col:Et})}}else for(let Ie=0;Ie<8;Ie++)for(let $e=0;$e<8;$e++)Vt(ce,$.row,$.col,Ie,$e,!0,F,H,!0)&&X.push({row:Ie,col:$e});return X},pn=($,H=se)=>{if(!Vl(H,$))return!1;for(let F=0;F<8;F++)for(let X=0;X<8;X++){const ce=H[F][X];if(ce&&Mr(ce)===$&&Fn({row:F,col:X},H,$).length>0)return!1}return!0},bb=($,H=se)=>{if(Vl(H,$))return!1;for(let F=0;F<8;F++)for(let X=0;X<8;X++){const ce=H[F][X];if(ce&&Mr(ce)===$&&Fn({row:F,col:X},H,$).length>0)return!1}return!0},Yte=($,H)=>{if(console.log("[CLICK] Square clicked:",{row:$,col:H}),console.log("[CLICK] Game mode:",Gt,"Player color:",Me),console.log("[CLICK] Current player:",Z,"Player color:",Me),Gt!==rr.ACTIVE||!Me){console.log("[CLICK] Game not active or no player color");return}const F=se[$][H],X=F?Mr(F):null;if(console.log("[CLICK] Piece at square:",F,"Piece color:",X),Z!==Me){console.log("[CLICK] Not player's turn. Current:",Z,"Player:",Me);return}if(F&&X===Me){de({row:$,col:H});const ce=Fn({row:$,col:H});Je(ce);return}if(he&&be.some(ce=>ce.row===$&&ce.col===H)){Qte(he,{row:$,col:H}),de(null),Je([]);return}de(null),Je([])},Qte=async($,H)=>{if(console.log("[PROMOTION DEBUG] makeMove called with:",{from:$,to:H,playerColor:Me,currentPlayer:Z}),!Me||Z!==Me){console.log("[PROMOTION DEBUG] Early return - playerColor:",Me,"currentPlayer:",Z);return}const F=se[$.row][$.col];if(!F){console.log("[PROMOTION DEBUG] No piece at position:",$);return}if(console.log("[PROMOTION DEBUG] Piece:",F,"isPawn:",F.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] Current player:",Z,"to.row:",H.row),console.log("[PROMOTION DEBUG] Player color:",Me),console.log("[PROMOTION DEBUG] Promotion condition check:"),console.log("[PROMOTION DEBUG] - piece.toUpperCase() === P:",F.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - currentPlayer === red && to.row === 7:",Z==="red"&&H.row===7),console.log("[PROMOTION DEBUG] - currentPlayer === blue && to.row === 0:",Z==="blue"&&H.row===0),console.log("[PROMOTION DEBUG] - Full condition:",F.toUpperCase()==="P"&&(Z==="red"&&H.row===7||Z==="blue"&&H.row===0)),F.toUpperCase()==="P"&&(Z==="red"&&H.row===7||Z==="blue"&&H.row===0)){console.log("[PROMOTION] Showing promotion dialog for piece:",F,"at position:",H),yb({from:$,to:H}),mb(!0);return}await ZU($,H)},ZU=async($,H,F="q")=>{if(!Me||Z!==Me||!se[$.row][$.col])return;const Oe=se[H.row][H.col]!==null;if(vb(Oe?"capture":"move"),Oe){p1({row:H.row,col:H.col,show:!0}),setTimeout(()=>{XU($,H,F),p1(null)},500);return}XU($,H,F)},XU=async($,H,F="q")=>{if(!Me||Z!==Me)return;const X=se[$.row][$.col];if(!X)return;const ce=se.map(gn=>[...gn]);let Oe=X;console.log("[PROMOTION DEBUG] executeMoveAfterAnimation - checking promotion:"),console.log("[PROMOTION DEBUG] - piece:",X,"isPawn:",X.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - playerColor:",Me,"to.row:",H.row),console.log("[PROMOTION DEBUG] - promotion condition:",X.toUpperCase()==="P"&&(Me==="red"&&H.row===7||Me==="blue"&&H.row===0)),console.log("[PROMOTION DEBUG] - promotionPiece:",F),X.toUpperCase()==="P"&&(Me==="red"&&H.row===7||Me==="blue"&&H.row===0)&&(Oe=Me==="red"?F.toUpperCase():F.toLowerCase(),console.log("[PROMOTION DEBUG] - Promoting pawn to:",Oe)),Zte(ce,$,H,X),ce[H.row][H.col]=Oe,ce[$.row][$.col]=null,Xte($,H,X);const Ie=Z==="blue"?"red":"blue";Vl(ce,Ie)&&vb("check");let $e="active",dt=null;pn(Ie,ce)?($e="finished",dt=Z,Se(`${Z==="red"?"Red":"Blue"} wins by checkmate!`),vb("checkmate"),Jte(),console.log("[SCORE] Updating scores - Winner:",Z,"Loser:",Ie),console.log("[SCORE] Contract game data:",M),console.log("[SCORE] Player game invite code:",N),M&&M.length>=2?(console.log("[SCORE] Using contract data for both players update"),await b1(Z,M[0],M[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await w1(Z===Me?"win":"loss"),await ym()),dt===Me&&(console.log("[CONTRACT] Triggering automatic payout for winner:",dt),setTimeout(()=>{oe()},2e3))):bb(Ie,ce)&&($e="finished",Se("Game ended in stalemate"),console.log("[SCORE] Updating scores for draw"),await w1("draw"));try{if(!P){console.error("[BUG] inviteCode is missing when trying to update game!"),Se("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",P,"gameData:",{board:{positions:ce},current_player:Ie,game_state:$e,winner:dt,last_move:{from:$,to:H}});const Et={...await vs.getGame(P),board:{positions:Gl(ce),rows:8,cols:8},current_player:Ie,game_state:$e,winner:dt,last_move:{from:$,to:H}};console.log("[FIREBASE] Storing data in Firebase:",Et),await vs.updateGame(P,Et),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(gn){console.error("[DATABASE] Error updating game:",gn)}ye(ce),ae(Ie),OT({from:$,to:H}),mb(!1),yb(null)},Jte=()=>{pm(!0),vb("victory");for(let $=0;$<50;$++)setTimeout(()=>{const H=document.createElement("div");H.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(H),setTimeout(()=>H.remove(),300)},$*100);Wl.current&&clearTimeout(Wl.current),Wl.current=setTimeout(()=>{pm(!1)},5e3)},Zte=($,H,F,X)=>{if(X.toLowerCase()==="k"&&Math.abs(H.col-F.col)===2){if(F.col===6)$[H.row][7]=null,$[H.row][5]=Mr(X)==="blue"?"r":"R";else if(F.col===2){const ce=$[H.row][3];$[H.row][0]=null,$[H.row][3]=Mr(X)==="blue"?"r":"R",ce&&ce.toLowerCase()==="q"&&($[H.row][4]=ce)}}X.toLowerCase()==="p"&&Math.abs(H.col-F.col)===1&&$[F.row][F.col]===null&&xi.lastPawnDoubleMove&&xi.lastPawnDoubleMove.row===H.row&&xi.lastPawnDoubleMove.col===F.col&&($[H.row][F.col]=null)},Xte=($,H,F)=>{const X={...xi};F.toLowerCase()==="k"?Mr(F)==="blue"?X.blueKingMoved=!0:X.redKingMoved=!0:F.toLowerCase()==="r"&&(Mr(F)==="blue"?($.col===0&&(X.blueRooksMove.left=!0),$.col===7&&(X.blueRooksMove.right=!0)):($.col===0&&(X.redRooksMove.left=!0),$.col===7&&(X.redRooksMove.right=!0))),F.toLowerCase()==="p"&&Math.abs($.row-H.row)===2?X.lastPawnDoubleMove={row:H.row,col:H.col}:X.lastPawnDoubleMove=null,Lc(X)},vb=$=>{if(!$a)return;let H="";switch($){case"move":H="/images/move.mp3";break;case"capture":H="/images/capture.mp3";break;case"check":H="/images/play.mp3";break;case"checkmate":H="/images/victory.mp3";break;case"victory":H="/images/victory.mp3";break;case"loser":H="/images/loser.mp3";break;case"upgrade":H="/images/upgrade.mp3";break;default:H="/images/move.mp3"}try{const F=new Audio(H);F.volume=.3,F.play().catch(X=>console.warn("Audio play failed:",X))}catch(F){console.warn("Sound play failed:",F)}},ene=async()=>{if(P)try{console.log("[RESET] Resetting corrupted game data for:",P);const $={board:{positions:Gl(au),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await vs.updateGame(P,$),console.log("[RESET] Successfully reset game data"),Se("Game reset successfully. You can now make moves.")}catch($){console.error("[RESET] Error resetting game data:",$),Se("Failed to reset game. Please try again.")}},e$=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch($){console.error("Error checking stuck games:",$)}},tne=async()=>{if(console.log("[FIX] Attempting to fix missing player data..."),!P||!r){console.log("[FIX] Missing inviteCode or address");return}try{const $=await vs.getGame(P);if(!$){console.log("[FIX] No game data found");return}if(console.log("[FIX] Current game data:",$),M&&Array.isArray(M)){const[H,F,X,ce,Oe,Ie]=M;console.log("[FIX] Contract data for fixing:"),console.log("[FIX] - Contract player1 (blue):",H),console.log("[FIX] - Contract player2 (red):",F),console.log("[FIX] - Contract isActive:",X),console.log("[FIX] - Firebase blue_player:",$.blue_player),console.log("[FIX] - Firebase red_player:",$.red_player),console.log("[FIX] - Firebase game_state:",$.game_state);let $e=!1;const dt={};F&&F!=="0x0000000000000000000000000000000000000000"&&(!$.red_player||$.red_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing red player address in Firebase"),dt.red_player=F,$e=!0),H&&H!=="0x0000000000000000000000000000000000000000"&&(!$.blue_player||$.blue_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing blue player address in Firebase"),dt.blue_player=H,$e=!0),H&&F&&H!=="0x0000000000000000000000000000000000000000"&&F!=="0x0000000000000000000000000000000000000000"&&($.game_state==="waiting"||!$.game_state)&&(console.log("[FIX] Activating game in Firebase"),dt.game_state="active",dt.current_player="blue",$e=!0),X&&$.game_state!=="active"&&(console.log("[FIX] Syncing game state to active"),dt.game_state="active",$e=!0),$e?(console.log("[FIX] Updating Firebase with:",dt),await vs.updateGame(P,dt),console.log("[FIX] Firebase updated successfully")):console.log("[FIX] No missing player data to fix")}else console.log("[FIX] No contract data available for fixing")}catch($){console.error("[FIX] Error fixing missing player data:",$)}},nne=($,H)=>{if(!se||!Array.isArray(se)||se.length!==8||!se[$]||!Array.isArray(se[$])||se[$].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:$,col:H,board:se}),b.jsx("div",{className:"square error",children:b.jsx("div",{className:"error-indicator",children:"!"})},`${$}-${H}`);const F=se[$][H],X=(he==null?void 0:he.row)===$&&(he==null?void 0:he.col)===H,ce=be.some($e=>$e.row===$&&$e.col===H),Oe=Ba&&(Ba.from.row===$&&Ba.from.col===H||Ba.to.row===$&&Ba.to.col===H),Ie=F&&F.toUpperCase()==="K"&&Vl(se,Mr(F));return b.jsxs("div",{className:`square ${X?"selected":""} ${ce?"legal-move":""} ${Oe?"last-move":""} ${Ie?"square-in-check":""}`,onClick:()=>Yte($,H),children:[F&&b.jsx("div",{className:"piece",style:{backgroundImage:WO[F]?`url(${WO[F]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ce&&b.jsx("div",{className:"legal-move-indicator"})]},`${$}-${H}`)},rne=()=>{if(console.log("[PROMOTION DEBUG] renderPromotionDialog called - showPromotion:",fm,"promotionMove:",fd),!fm||!fd)return console.log("[PROMOTION DEBUG] Not rendering dialog - showPromotion:",fm,"promotionMove:",fd),null;const $=Z==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:$.map(H=>b.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",H),ZU(fd.from,fd.to,H),mb(!1),yb(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:b.jsx("img",{src:WO[H],alt:H,style:{width:"40px",height:"40px"}})},H))})]})})},sne=()=>b.jsxs("div",{className:"piece-gallery",children:[b.jsx("h3",{children:"Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:AGe.map($=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{PT(h1===$.key?null:$.key)},children:[b.jsx("img",{src:$.img,alt:$.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:$.name}),h1===$.key&&b.jsx("div",{className:"piece-gallery-desc",children:$.desc})]},$.key))})]}),t$=()=>b.jsxs("div",{className:"chess-multiplayer-lobby",children:[b.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"status-bar",children:["Connected: ",wb(r)]}),b.jsxs("div",{className:"lobby-content",children:[b.jsxs("div",{className:"open-games",children:[b.jsx("h3",{children:"Open Games"}),b.jsxs("div",{className:"games-list",children:[Sr.map($=>b.jsxs("div",{className:"game-item",children:[b.jsxs("div",{className:"game-info",children:[b.jsx("div",{className:"game-id",children:$.game_title||"Untitled Game"}),b.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat($.bet_amount)/1e18).toFixed(2)," tDMT"]}),b.jsxs("div",{className:"title",children:["Created by: ",wb($.blue_player)]})]}),b.jsx("button",{className:"join-btn",onClick:()=>MT($.invite_code),children:"Join Game"})]},$.invite_code)),Sr.length===0&&b.jsx("div",{className:"no-games",children:"No open games available"})]})]}),b.jsxs("div",{className:"actions",children:[b.jsx("button",{className:"create-btn",onClick:()=>Ii(!0),disabled:Ua,children:"Create New Game"}),b.jsx("button",{className:"resume-btn",onClick:e$,style:{marginTop:"10px",background:"rgba(0, 255, 0, 0.1)",border:"2px solid #00ff00",color:"#00ff00",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"Check for Active Games"}),b.jsx("button",{onClick:wm,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🔄 Refresh Lobby"})]}),Ua&&b.jsxs("div",{className:"create-form",children:[b.jsx("h3",{children:"Create New Game"}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"Wager (tDMT):"}),b.jsx("input",{type:"number",value:tn,onChange:$=>d1(Number($.target.value)),placeholder:"0.1",min:"0",step:"0.1"})]}),b.jsxs("div",{className:"form-actions",children:[b.jsx("button",{className:"create-confirm-btn",onClick:LT,disabled:tn<=0,children:"Create Game"}),b.jsx("button",{className:"cancel-btn",onClick:()=>Ii(!1),children:"Cancel"})]})]})]})]}):b.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),ine=()=>b.jsxs("div",{className:"chess-multiplayer-waiting",children:[b.jsx("h2",{children:"Waiting for Opponent"}),b.jsxs("div",{className:"game-code",children:["Invite Code: ",b.jsx("strong",{children:P})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("p",{children:["Wager: ",Ko," tDMT"]}),b.jsx("p",{children:"Share this invite code with your opponent"})]})]}),one=()=>b.jsxs("div",{className:"chess-game",children:[b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:"♔ Multiplayer Chess"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),b.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:"×"})]})]}),b.jsxs("div",{className:"game-info",children:[b.jsxs("div",{className:"game-status-section",children:[b.jsx("span",{className:`status ${tt.includes("Check")?"check-status":""}`,children:tt}),b.jsxs("span",{className:`current-player ${Z==="red"?"red-turn":"blue-turn"}`,children:["Current: ",Z==="red"?"♔ Red":"♔ Blue"]})]}),b.jsxs("div",{className:"game-details-section",children:[b.jsxs("span",{className:"wager-display",children:["💰 ",Ko," tDMT"]}),nr&&b.jsxs("span",{className:"opponent-info",children:["vs ",wb(nr)]})]}),Gt===rr.FINISHED&&b.jsxs("div",{className:"game-finished-actions",children:[b.jsx("button",{onClick:oe,disabled:f,className:"claim-winnings-btn",children:f?"⏳ Claiming...":"🏆 Claim Winnings"}),b.jsx("button",{onClick:()=>window.location.href="/chess",className:"back-to-chess-btn",children:"🏠 Back to Chess Home"})]})]}),b.jsxs("div",{className:"game-stable-layout",children:[b.jsxs("div",{className:"left-sidebar",children:[b.jsxs("div",{className:"sidebar-tabs",children:[b.jsx("button",{className:`tab-button ${ne==="moves"?"active":""}`,onClick:()=>le("moves"),children:"📝 Moves"}),b.jsx("button",{className:`tab-button ${ne==="leaderboard"?"active":""}`,onClick:()=>le("leaderboard"),children:"🏆 Leaderboard"})]}),ne==="moves"&&b.jsxs("div",{className:"move-history",children:[b.jsx("h4",{children:"Move History"}),b.jsx("div",{className:"moves",children:_e.slice().reverse().map(($,H)=>b.jsx("div",{className:"move",children:$},_e.length-1-H))})]}),ne==="leaderboard"&&b.jsxs("div",{className:"leaderboard",children:[b.jsx("h4",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"#"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"W"}),b.jsx("th",{children:"L"}),b.jsx("th",{children:"D"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:g1.map(($,H)=>b.jsxs("tr",{children:[b.jsx("td",{children:H+1}),b.jsx("td",{children:$.username}),b.jsx("td",{children:$.wins}),b.jsx("td",{children:$.losses}),b.jsx("td",{children:$.draws}),b.jsx("td",{children:$.points})]},$.username))})]})})]})]}),b.jsxs("div",{className:"center-area",children:[b.jsxs("div",{className:"chessboard-container",children:[b.jsx("div",{className:"chessboard",children:Array.from({length:8},($,H)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(F,X)=>nne(H,X))},H))}),mm&&mm.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${mm.row*12.5}%`,left:`${mm.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:b.jsx("div",{className:"explosion-effect",children:"💥"})})]}),b.jsxs("div",{className:"game-controls",children:[b.jsx("div",{className:"control-section",children:tt.includes("corrupted")&&b.jsx("button",{className:"reset-game-btn",onClick:ene,children:"🔄 Reset Game"})}),b.jsx("div",{className:"settings-section",children:b.jsxs("div",{className:"sound-controls",children:[b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"sound-toggle",checked:$a,onChange:$=>gm($.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:"🎵 Sound Effects"})]}),b.jsxs("label",{className:"control-label",children:[b.jsx("input",{type:"checkbox",id:"victory-toggle",checked:f1,onChange:$=>pm($.target.checked),className:"control-checkbox"}),b.jsx("span",{className:"control-text",children:"🎉 Victory Celebration"})]})]})}),d&&b.jsx("button",{className:"claim-winnings-btn",onClick:oe,disabled:f||I||R,children:f||I||R?"⏳ Claiming...":"🏆 Claim Winnings"})]})]}),b.jsx("div",{className:"right-sidebar"})]}),Dc&&b.jsx("div",{className:"piece-gallery-panel",children:sne()}),rne(),f1&&b.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[b.jsx("div",{className:"balloons-container"}),b.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),b.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[b.jsx("button",{onClick:()=>en(rr.LOBBY),children:"Back to Lobby"}),b.jsx("button",{onClick:()=>window.location.reload(),children:"New Game"})]})]})]}),ane=()=>null;D.useEffect(()=>{ym(),wm(),e$();const $=setInterval(wm,3e4);return()=>{clearInterval($),Fa.current&&Fa.current(),Wl.current&&clearTimeout(Wl.current)}},[]),console.log("[RENDER] Current game mode:",Gt,"Game ID:",P);const cne=(()=>{switch(Gt){case rr.LOBBY:return t$();case rr.WAITING:return ine();case rr.ACTIVE:case rr.FINISHED:return one();default:return t$()}})();return b.jsxs(b.Fragment,{children:[cne,ane()]})},HO={AI:"ai"},$A={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},iz=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],xGe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],NGe=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},TGe=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},RGe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=UC(),[s,i]=D.useState(HO.AI),[o,a]=D.useState(()=>JSON.parse(JSON.stringify(iz))),[c,l]=D.useState("blue"),[u,d]=D.useState(null),[h,f]=D.useState("active"),[p,g]=D.useState("hard"),[y,m]=D.useState("Connect wallet to play"),[w,v]=D.useState([]),[A,C]=D.useState([]),[S,x]=D.useState([]),[T,I]=D.useState(null),[k,O]=D.useState(!1),[B,G]=D.useState(!1),[W,R]=D.useState(null),[N,M]=D.useState(null),[P]=D.useState(""),[L]=D.useState(.1),[j,q]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ne=D.useRef(null),le=D.useRef(!1),oe=D.useRef(o),se=D.useRef(null),ye=D.useRef(null),Z=D.useRef(!1),ae=D.useRef(!1),[he,de]=D.useState(!1),[be,Je]=D.useState(!1),[_e,Ae]=D.useState(!1),[tt]=D.useState(!0);D.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const{stockfishReady:Se}=NGe(),{getOpeningData:Gt}=TGe(),[en,Me]=D.useState("loading"),[kt,nr]=D.useState(!1),[Dn,Ko]=D.useState([]),[zl,Sr]=D.useState(!1),[Bs,Ua]=D.useState("/images/chessboard1.png"),[Ii,pr]=D.useState(!0),[Nf,Ln]=D.useState(!1),Yo=()=>{const V=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],Q=Math.floor(Math.random()*V.length),ie=V[Q];return console.log("[DEBUG] Random chessboard selected:",ie,"(index:",Q,")"),ie};D.useEffect(()=>{if(Se)Me("ready");else{const V=window.setTimeout(()=>{Se||(Me("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(V)}},[Se]),D.useEffect(()=>{oe.current=o},[o]),D.useEffect(()=>{r?m("Select game mode"):(m("Connect wallet to play"),O(!1))},[r]),D.useEffect(()=>(!ne.current&&typeof Worker<"u"&&(ne.current=new Worker("/aiWorker.js"),ne.current.onmessage=V=>{console.log("[DEBUG] AI worker response received:",V.data);const{move:Q,nodes:ie}=V.data;Q&&le.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",Q),console.log("[DEBUG] AI searched",ie,"nodes"),le.current=!1,ye.current&&(window.clearTimeout(ye.current),ye.current=null),se.current&&se.current(Q.from,Q.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},ne.current.onerror=V=>{console.error("[DEBUG] AI worker error:",V),m("AI worker error - using fallback mode"),le.current=!1}),()=>{ne.current&&(ne.current.terminate(),ne.current=null),ye.current&&(window.clearTimeout(ye.current),ye.current=null)}),[]),D.useEffect(()=>{TT()},[]);const TT=async()=>{try{await tee();const V=await eee(20);C(V),console.log("Leaderboard data loaded:",V)}catch(V){m("Failed to load leaderboard"),console.error("Leaderboard error:",V)}},hm=async V=>{if(console.log("[DEBUG] updateScore called with:",V),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",$g(r)),await ix(r,V)?(console.log("[DEBUG] Successfully updated score for:",$g(r)),await TT()):console.error("[DEBUG] Failed to update score")}catch(Q){console.error("[DEBUG] Error in updateScore:",Q)}},tn=V=>V&&V===V.toUpperCase()?"red":"blue",d1=(V,Q)=>V>=0&&V<8&&Q>=0&&Q<8,RT=(V,Q)=>`${String.fromCharCode(97+Q)}${8-V}`,Dc=(V,Q)=>{const ie=Q==="blue"?"k":"K";let re=null;for(let Pe=0;Pe<8;Pe++){for(let rt=0;rt<8;rt++)if(V[Pe][rt]===ie){re={row:Pe,col:rt};break}if(re)break}if(!re)return console.log(`King not found for ${Q}`),!1;const ee=Q==="blue"?"red":"blue",Re=KU(re.row,re.col,ee,V);return console.log(`${Q} king at ${re.row},${re.col} under attack: ${Re}`),Re},KU=(V,Q,ie,re)=>{for(let ee=0;ee<8;ee++)for(let Re=0;Re<8;Re++){const Pe=re[ee][Re];if(Pe&&tn(Pe)===ie&&$a(Pe,ee,Re,V,Q,!1,ie,re,!0))return!0}return!1},h1=(V,Q,ie,re,ee,Re=o)=>{const Pe=Re.map(qt=>[...qt]),rt=Pe[V][Q];return Pe[ie][re]=rt,Pe[V][Q]=null,Dc(Pe,ee)},PT=(V,Q,ie,re,ee,Re)=>{const Pe=V==="blue"?-1:1,rt=V==="blue"?6:1;if(!d1(re,ee)||V==="blue"&&re>=Q||V==="red"&&re<=Q)return!1;const qt=Math.abs(re-Q),Vt=Math.abs(ee-ie);if((qt===1&&Vt===0||qt===2&&Vt===0&&Q===rt||qt===1&&Vt===1)&&qt<=2&&Vt<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:V,from:`${Q},${ie}`,to:`${re},${ee}`}),ie===ee&&re===Q+Pe)return Re[re][ee]===null;if(ie===ee&&Q===rt&&re===Q+2*Pe)return Re[Q+Pe][ie]===null&&Re[re][ee]===null;if(Math.abs(ie-ee)===1&&re===Q+Pe){const pn=Re[re][ee];return pn!==null&&tn(pn)!==V}if(Math.abs(ie-ee)===1&&re===Q+Pe){const pn=Re[Q][ee];if(pn&&tn(pn)!==V&&pn.toLowerCase()==="p"&&j.lastPawnDoubleMove&&j.lastPawnDoubleMove.row===Q&&j.lastPawnDoubleMove.col===ee)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},fm=(V,Q,ie,re,ee)=>V!==ie&&Q!==re?!1:pm(V,Q,ie,re,ee),mb=(V,Q,ie,re)=>{const ee=Math.abs(V-ie),Re=Math.abs(Q-re);return ee===2&&Re===1||ee===1&&Re===2},fd=(V,Q,ie,re,ee)=>Math.abs(V-ie)!==Math.abs(Q-re)?!1:pm(V,Q,ie,re,ee),yb=(V,Q,ie,re,ee)=>fm(V,Q,ie,re,ee)||fd(V,Q,ie,re,ee),f1=(V,Q,ie,re,ee)=>{const Re=Math.abs(Q-re),Pe=Math.abs(ie-ee);if(Re<=1&&Pe<=1)return!0;if(Re===0&&Pe===2){if(V==="blue"&&!j.blueKingMoved){if(ee===6&&!j.blueRooksMove.right||ee===2&&!j.blueRooksMove.left)return!0}else if(V==="red"&&!j.redKingMoved&&(ee===6&&!j.redRooksMove.right||ee===2&&!j.redRooksMove.left))return!0}return!1},pm=(V,Q,ie,re,ee)=>{const Re=V===ie?0:(ie-V)/Math.abs(ie-V),Pe=Q===re?0:(re-Q)/Math.abs(re-Q);let rt=V+Re,qt=Q+Pe;for(;rt!==ie||qt!==re;){if(ee[rt][qt]!==null)return!1;rt+=Re,qt+=Pe}return!0},$a=(V,Q,ie,re,ee,Re=!0,Pe=tn(V),rt=o,qt=!1)=>{if(!d1(re,ee))return qt||console.log("[ILLEGAL MOVE] Out of board:",{piece:V,startRow:Q,startCol:ie,endRow:re,endCol:ee}),!1;const Vt=rt[re][ee];if(Vt&&tn(Vt)===Pe)return qt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:V,startRow:Q,startCol:ie,endRow:re,endCol:ee}),!1;const Fn=V.toLowerCase();let pn=!1;switch(Fn){case"p":pn=PT(Pe,Q,ie,re,ee,rt);break;case"r":pn=fm(Q,ie,re,ee,rt);break;case"n":pn=mb(Q,ie,re,ee);break;case"b":pn=fd(Q,ie,re,ee,rt);break;case"q":pn=yb(Q,ie,re,ee,rt);break;case"k":pn=f1(Pe,Q,ie,re,ee);break}return pn?pn&&Re&&h1(Q,ie,re,ee,Pe,rt)?(qt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:V,startRow:Q,startCol:ie,endRow:re,endCol:ee}),!1):pn:(qt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:V,startRow:Q,startCol:ie,endRow:re,endCol:ee,playerColor:Pe,pieceType:Fn,targetPiece:rt[re][ee],targetPieceColor:rt[re][ee]?tn(rt[re][ee]):null}),!1)},gm=(V,Q=o,ie=c)=>{const re=[],ee=Q[V.row][V.col];if(!ee||tn(ee)!==ie)return re;const Re=ee.toLowerCase();if(Re==="p"){const Pe=ie==="blue"?-1:1,rt=ie==="blue"?6:1,qt=V.row+Pe;if(qt>=0&&qt<8&&$a(ee,V.row,V.col,qt,V.col,!0,ie,Q,!0)&&re.push({row:qt,col:V.col}),V.row===rt){const Vt=V.row+2*Pe;Vt>=0&&Vt<8&&$a(ee,V.row,V.col,Vt,V.col,!0,ie,Q,!0)&&re.push({row:Vt,col:V.col})}for(const Vt of[-1,1]){const Fn=V.col+Vt,pn=V.row+Pe;Fn>=0&&Fn<8&&pn>=0&&pn<8&&$a(ee,V.row,V.col,pn,Fn,!0,ie,Q,!0)&&re.push({row:pn,col:Fn})}}else if(Re==="n"){const Pe=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[rt,qt]of Pe){const Vt=V.row+rt,Fn=V.col+qt;Vt>=0&&Vt<8&&Fn>=0&&Fn<8&&$a(ee,V.row,V.col,Vt,Fn,!0,ie,Q,!0)&&re.push({row:Vt,col:Fn})}}else for(let Pe=0;Pe<8;Pe++)for(let rt=0;rt<8;rt++)$a(ee,V.row,V.col,Pe,rt,!0,ie,Q,!0)&&re.push({row:Pe,col:rt});return re},mm=(V,Q=o)=>{if(!Dc(Q,V))return!1;for(let ie=0;ie<8;ie++)for(let re=0;re<8;re++){const ee=Q[ie][re];if(ee&&tn(ee)===V&&gm({row:ie,col:re},Q,V).length>0)return!1}return!0},p1=(V,Q=o)=>{if(Dc(Q,V))return!1;for(let ie=0;ie<8;ie++)for(let re=0;re<8;re++){const ee=Q[ie][re];if(ee&&tn(ee)===V&&gm({row:ie,col:re},Q,V).length>0)return!1}return!0},xi=(V,Q)=>{if(h!=="active"||le.current)return;const ie=o[V][Q],re=ie?tn(ie):null;if(u&&S.some(ee=>ee.row===V&&ee.col===Q)){Lc(u,{row:V,col:Q});return}if(ie&&re===c){const ee=gm({row:V,col:Q});d({row:V,col:Q}),x(ee);return}d(null),x([])},Lc=(V,Q,ie=!1)=>{const re=o[V.row][V.col];if(console.log("[MOVE ATTEMPT]",{from:V,to:Q,piece:re,isAIMove:ie,board:JSON.parse(JSON.stringify(o)),moveHistory:w}),!!re){if(re.toLowerCase()==="p"&&(tn(re)==="blue"&&Q.row===0||tn(re)==="red"&&Q.row===7)){R({from:V,to:Q}),G(!0);return}UT(V,Q,"q",ie)}};se.current=Lc;const g1=D.useCallback((V,Q,ie=!1)=>{Sr(!0);const re=o.map(Pe=>[...Pe]),ee=re[V.row][V.col];if(!ee)return;re[Q.row][Q.col]=ee,re[V.row][V.col]=null,DT(re,V,Q,ee);const Re=LT(V,Q);if(v(Pe=>{const rt=[...Pe,Re];return console.log("[MOVE HISTORY UPDATED]",rt),rt}),I({from:V,to:Q}),d(null),x([]),w.length<10&&!ie){const Pe=oz(re,c==="blue"?"red":"blue");Gt(Pe).then(rt=>{rt&&rt.moves&&rt.moves.length>0&&(Ko(rt.moves.slice(0,3)),nr(!0),setTimeout(()=>nr(!1),5e3))})}MT(V,Q,ee),l(Pe=>{const rt=Pe==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",rt),m1(re,rt),rt}),m1(re,c==="blue"?"red":"blue"),a(re),le.current=!1,Z.current=!1,ae.current=!1,Sr(!1)},[o,c,w,Gt]);D.useEffect(()=>{if(!le.current&&s==="ai"&&c==="red"&&!Z.current&&!zl)if(le.current=!0,p==="easy")setTimeout(()=>{const V=Ba(o);V?Lc(V.from,V.to,!0):le.current=!1},600);else{m("AI is calculating...");const V=oz(o,c);if(ae.current)return;ae.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:V,difficulty:p,movetime:3e3})}).then(ie=>{if(ie.ok)return ie.json();throw new Error("API call failed")}).then(ie=>{console.log("[DEBUG] Stockfish API response:",ie);const re=ie.bestmove||ie.move;if(re&&re!=="(none)"&&re.length===4){const ee=re.charCodeAt(0)-97,Re=parseInt(re[1]),Pe=re.charCodeAt(2)-97,rt=parseInt(re[3]),qt=8-Re,Vt=8-rt;if(console.log("[DEBUG] Parsed move:",{fromCol:ee,fromRowStockfish:Re,toCol:Pe,toRowStockfish:rt,fromRow:qt,toRow:Vt}),ee>=0&&ee<8&&qt>=0&&qt<8&&Pe>=0&&Pe<8&&Vt>=0&&Vt<8){const Fn={from:{row:qt,col:ee},to:{row:Vt,col:Pe}},pn=o[qt][ee];if(console.log("[DEBUG] Move validation:",{piece:pn,moveObj:Fn,isValid:pn&&tn(pn)==="red"&&$a(pn,qt,ee,Vt,Pe,!0,"red",o)}),pn&&tn(pn)==="red"&&$a(pn,qt,ee,Vt,Pe,!0,"red",o))console.log("[DEBUG] Executing Stockfish move:",Fn),Lc(Fn.from,Fn.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const bb=Ba(o);bb&&Lc(bb.from,bb.to,!0),le.current=!1,ae.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const Fn=Ba(o);Fn&&Lc(Fn.from,Fn.to,!0),le.current=!1,ae.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const ee=Ba(o);ee&&Lc(ee.from,ee.to,!0),le.current=!1,ae.current=!1}}).catch(ie=>{console.error("[DEBUG] Stockfish API error:",ie),m("AI error. Falling back to random moves.");const re=Ba(o);re&&Lc(re.from,re.to,!0),le.current=!1,ae.current=!1})}},[c,s,p,o,j,Se]);const m1=(V,Q)=>{console.log("Checking game end for player:",Q);const ie=V.some(ee=>ee.some(Re=>Re==="k")),re=V.some(ee=>ee.some(Re=>Re==="K"));if(!ie)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),m("King captured! Red wins!"),hm("loss"),Ae(!0),setTimeout(()=>Ae(!1),3e3),"checkmate";if(!re)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),m("King captured! You win!"),hm("win"),Ae(!0),setTimeout(()=>Ae(!1),3e3),"checkmate";if(console.log("Is king in check:",Dc(V,Q)),mm(Q,V)){console.log("[GAME END] CHECKMATE",{winner:Q==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(V)),moveHistory:w}),f("checkmate");const ee=Q==="blue"?"red":"blue";return ee==="blue"?(m("Checkmate! You win!"),pd("checkmate"),$T(!0),Ln(!0),YU(),hm("win"),Ae(!0),setTimeout(()=>Ae(!1),3e3)):(m(`Checkmate! ${ee==="red"?"AI":"Opponent"} wins!`),pd("checkmate"),pd("loser"),v1(!0),hm("loss"),Ae(!0),setTimeout(()=>Ae(!1),3e3)),"checkmate"}return p1(Q,V)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(V)),moveHistory:w}),f("stalemate"),m("Stalemate! Game is a draw."),hm("draw"),Ae(!0),setTimeout(()=>Ae(!1),3e3),"stalemate"):(Dc(V,Q)?(console.log("CHECK detected!"),pd("check"),m(`${Q==="blue"?"Blue":"Red"} is in check!`)):m("Your turn"),null)},Ba=V=>{const Q=[];for(let ee=0;ee<8;ee++)for(let Re=0;Re<8;Re++){const Pe=V[ee][Re];Pe&&tn(Pe)==="red"&&Q.push({row:ee,col:Re})}for(let ee=Q.length-1;ee>0;ee--){const Re=Math.floor(Math.random()*(ee+1));[Q[ee],Q[Re]]=[Q[Re],Q[ee]]}const ie=[],re=[];for(const ee of Q){const Re=gm(ee,V,"red");for(const Pe of Re){const rt=V[Pe.row][Pe.col];if(rt&&tn(rt)==="blue"){const Vt={p:100,n:320,b:330,r:500,q:900,k:2e4}[rt.toLowerCase()]||0;ie.push({from:ee,to:Pe,value:Vt})}else re.push({from:ee,to:Pe})}}if(ie.length>0&&Math.random()<.3){ie.sort((ee,Re)=>ee.value-Re.value);for(const ee of ie){const Re=V.map(rt=>[...rt]),Pe=Re[ee.from.row][ee.from.col];if(Re[ee.to.row][ee.to.col]=Pe,Re[ee.from.row][ee.from.col]=null,!Dc(Re,"red"))return{from:ee.from,to:ee.to}}}for(const ee of re){const Re=V.map(rt=>[...rt]),Pe=Re[ee.from.row][ee.from.col];if(Re[ee.to.row][ee.to.col]=Pe,Re[ee.from.row][ee.from.col]=null,!Dc(Re,"red"))return ee}ie.sort((ee,Re)=>ee.value-Re.value);for(const ee of ie){const Re=V.map(rt=>[...rt]),Pe=Re[ee.from.row][ee.from.col];if(Re[ee.to.row][ee.to.col]=Pe,Re[ee.from.row][ee.from.col]=null,!Dc(Re,"red"))return{from:ee.from,to:ee.to}}return null},OT=()=>{a(JSON.parse(JSON.stringify(iz))),l("blue"),d(null),f("active"),v([]),x([]),I(null),O(!1),m("Select game mode"),q({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),Ua(Yo()),le.current&&(le.current=!1)},Fa=()=>{if(wb(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){O(!1),de(!1);return}O(!0),de(!1),m("Game started! Your turn");const V=Yo();Ua(V),console.log("[DEBUG] Game started with chessboard:",V)},Wl=V=>`${V.slice(0,6)}...${V.slice(-4)}`,y1=(V,Q)=>{const ie=o[V][Q],re=(u==null?void 0:u.row)===V&&(u==null?void 0:u.col)===Q,ee=S.some(Pe=>Pe.row===V&&Pe.col===Q),Re=T&&(T.from.row===V&&T.from.col===Q||T.to.row===V&&T.to.col===Q);return b.jsxs("div",{className:`square ${re?"selected":""} ${ee?"legal-move":""} ${Re?"last-move":""}`,onClick:()=>xi(V,Q),children:[ie&&b.jsx("div",{className:"piece",style:{backgroundImage:$A[ie]?`url(${$A[ie]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ee&&b.jsx("div",{className:"legal-move-indicator"})]},`${V}-${Q}`)},kT=()=>{if(!B||!W)return null;const V=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return b.jsx("div",{className:"promotion-dialog",children:b.jsxs("div",{className:"promotion-content",children:[b.jsx("h3",{children:"Choose promotion piece:"}),b.jsx("div",{className:"promotion-pieces",children:V.map(Q=>b.jsx("div",{className:"promotion-piece",onClick:()=>{UT(W.from,W.to,Q),G(!1),R(null)},style:{backgroundImage:$A[Q]?`url(${$A[Q]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},Q))})]})})},[ym,w1]=D.useState(null),b1=(V=!1,Q="Click a piece to learn more about it.")=>b.jsxs("div",{className:`piece-gallery${V?" piece-gallery-sm":""}`,children:[b.jsx("h3",{children:"Lawbstation Chess Pieces"}),b.jsx("div",{className:"piece-gallery-grid",children:xGe.map(ie=>b.jsxs("div",{className:"piece-gallery-item",onClick:()=>{w1(ym===ie.key?null:ie.key)},children:[b.jsx("img",{src:ie.img,alt:ie.name,className:"piece-gallery-img"}),b.jsx("div",{className:"piece-gallery-name",children:ie.name}),ym===ie.key&&b.jsx("div",{className:"piece-gallery-desc",children:ie.desc})]},ie.key))}),b.jsx("div",{className:"piece-gallery-tip",children:Q})]}),wm=()=>b.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:b.jsx("div",{className:"difficulty-controls-col",children:b.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[b.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),b.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",b.jsx("br",{}),"Good luck, have fun!"]}),b.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[b.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),b.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),b.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{Fa()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[b.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),DT=(V,Q,ie,re)=>{if(re.toLowerCase()==="p"&&(tn(re)==="blue"&&ie.row===0||tn(re)==="red"&&ie.row===7)){const ee=tn(re)==="blue"?"q":"Q";V[ie.row][ie.col]=ee}if(re.toLowerCase()==="k"&&Math.abs(Q.col-ie.col)===2){if(ie.col===6)V[Q.row][7]=null,V[Q.row][5]=tn(re)==="blue"?"r":"R";else if(ie.col===2){const ee=V[Q.row][3];V[Q.row][0]=null,V[Q.row][3]=tn(re)==="blue"?"r":"R",ee&&ee.toLowerCase()==="q"&&(V[Q.row][4]=ee)}}},LT=(V,Q,ie,re)=>{const ee=RT(V.row,V.col),Re=RT(Q.row,Q.col);return`${ee}-${Re}`},MT=(V,Q,ie)=>{const re={...j};ie.toLowerCase()==="k"?tn(ie)==="blue"?re.blueKingMoved=!0:re.redKingMoved=!0:ie.toLowerCase()==="r"&&(tn(ie)==="blue"?(V.col===0&&(re.blueRooksMove.left=!0),V.col===7&&(re.blueRooksMove.right=!0)):(V.col===0&&(re.redRooksMove.left=!0),V.col===7&&(re.redRooksMove.right=!0))),ie.toLowerCase()==="p"&&Math.abs(V.row-Q.row)===2?re.lastPawnDoubleMove={row:Q.row,col:Q.col}:re.lastPawnDoubleMove=null,q(re)},UT=(V,Q,ie="q",re=!1)=>{o[V.row][V.col];const Re=o[Q.row][Q.col]!==null;if(pd(Re?"capture":"move"),Re){M({row:Q.row,col:Q.col,show:!0}),setTimeout(()=>{g1(V,Q,re),M(null)},500);return}g1(V,Q,re)},pd=V=>{if(!Ii)return;let Q="";switch(V){case"move":Q="/images/move.mp3";break;case"capture":Q="/images/capture.mp3";break;case"check":Q="/images/play.mp3";break;case"checkmate":Q="/images/victory.mp3";break;case"victory":Q="/images/victory.mp3";break;case"loser":Q="/images/loser.mp3";break;case"upgrade":Q="/images/upgrade.mp3";break;default:Q="/images/move.mp3"}new Audio(Q).play().catch(()=>{})},YU=()=>{pd("victory");for(let V=0;V<50;V++)setTimeout(()=>{const Q=document.createElement("div");Q.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(Q),setTimeout(()=>Q.remove(),3e3)},V*100);for(let V=0;V<15;V++)setTimeout(()=>{const Q=document.createElement("div"),ie=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],re=ie[Math.floor(Math.random()*ie.length)];Q.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${re};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(Q),setTimeout(()=>Q.remove(),6e3)},V*200);setTimeout(()=>Ln(!1),5e3)},[QU,$T]=D.useState(!1),[JU,v1]=D.useState(!1),Hl=()=>{$T(!1),v1(!1)},Gl=()=>{Hl(),OT()},gd=()=>{Hl(),O(!1)},wb=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Mr=s==="online",[ql,Vl]=D.useState("leaderboard");return b.jsxs("div",{className:`chess-game${n?" fullscreen":""}${tt?" chess-dark-mode":""}`,children:[b.jsxs("div",{className:"chess-header",children:[b.jsx("h2",{children:"LAWB CHESS TESTNET BETA 3000"}),b.jsxs("div",{className:"chess-controls",children:[e&&b.jsx("button",{onClick:e,children:"_"}),b.jsx("button",{onClick:t,children:"×"})]})]}),b.jsxs("div",{className:"game-stable-layout",children:[b.jsxs("div",{className:"left-sidebar",children:[ql==="leaderboard"&&b.jsxs("div",{className:"leaderboard-compact",children:[b.jsx("h3",{children:"Leaderboard"}),b.jsx("div",{className:"leaderboard-table-compact",children:b.jsxs("table",{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"Rank"}),b.jsx("th",{children:"Player"}),b.jsx("th",{children:"Pts"})]})}),b.jsx("tbody",{children:Array.isArray(A)&&A.slice(0,8).map((V,Q)=>{if(typeof V=="object"&&V!==null&&"username"in V&&"wins"in V&&"losses"in V&&"draws"in V&&"points"in V){const ie=V;return b.jsxs("tr",{children:[b.jsx("td",{children:Q+1}),b.jsx("td",{children:Wl(ie.username)}),b.jsx("td",{children:ie.points})]},ie.username)}return null})})]})})]}),ql==="moves"&&k&&b.jsxs("div",{className:"move-history-compact",children:[b.jsx("div",{className:"move-history-title",children:"Moves"}),b.jsx("ul",{className:"move-history-list-compact",children:w.slice().reverse().map((V,Q)=>b.jsx("li",{children:V},w.length-1-Q))})]}),ql==="gallery"&&b.jsx("div",{className:"piece-gallery-compact",children:b1(!0,"Click pieces to learn more")})]}),b.jsxs("div",{className:"center-area",children:[k&&b.jsxs("div",{className:"game-info-compact",children:[b.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:[c==="blue"?"Blue":"Red"," to move"]}),s===HO.AI&&b.jsxs("span",{className:"mode-play",children:[p==="easy"?"Easy":"Hard"," AI"]}),Mr&&b.jsxs("span",{className:"wager-display",children:["Wager: ",L," ETH"]})]}),k?b.jsxs("div",{className:"chess-main-area",children:[b.jsx("div",{className:"chessboard-container",children:b.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${Bs})`},children:[Array.from({length:8},(V,Q)=>b.jsx("div",{className:"board-row",children:Array.from({length:8},(ie,re)=>y1(Q,re))},Q)),N&&N.show&&b.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${N.row*12.5}%`,left:`${N.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:b.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),b.jsxs("div",{className:"game-controls-compact",children:[b.jsxs("div",{className:"sidebar-toggle-group",children:[b.jsx("button",{className:ql==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Vl("leaderboard"),children:"Leaderboard"}),b.jsx("button",{className:ql==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Vl("moves"),children:"Moves"}),b.jsx("button",{className:ql==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Vl("gallery"),children:"Gallery"})]}),b.jsx("button",{onClick:Gl,children:"New Game"}),b.jsx("button",{onClick:gd,children:"Menu"})]})]}):he?wm():Mr?b.jsx(Kte,{onClose:t,onMinimize:e,fullscreen:n}):b.jsxs("div",{className:"game-mode-panel-streamlined",children:[b.jsxs("div",{className:"mode-selection-compact",children:[b.jsx("button",{className:`mode-btn-compact ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS AI"}),b.jsx("button",{className:`mode-btn-compact ${Mr?"selected":""}`,onClick:()=>i("online"),children:"PvP"})]}),s===HO.AI&&b.jsx("button",{className:"start-btn-compact",onClick:()=>de(!0),children:"Start Game"}),Mr&&b.jsxs("div",{className:"pvp-info",children:[b.jsx("p",{children:"Challenge other players with ETH wagers"}),b.jsx("p",{children:"Create or join games instantly"})]}),b.jsxs("div",{className:"help-section-compact",children:[b.jsx("h4",{children:"How to Play"}),b.jsxs("div",{className:"help-content",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Chess:"})," Capture your opponent's king. Each piece moves uniquely - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Multiplayer:"})," Connect your wallet to play PvP games with ETH wagers. Win games to claim your opponent's wager and climb the leaderboard."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"AI Mode:"})," Practice against our LawbBot AI. Choose Easy or Hard difficulty. Wins earn points on the leaderboard."]})]})]})]})]})]}),be&&b1(!0),B&&kT(),_e&&b.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),QU&&b.jsxs("div",{className:"victory-overlay",children:[b.jsx("div",{className:"balloons-container"}),b.jsx("div",{className:"victory-modal",children:b.jsxs("div",{className:"victory-content",children:[b.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),b.jsx("div",{children:"Victory!"}),b.jsx("button",{onClick:Gl,children:"New Game"})]})})]}),JU&&b.jsxs("div",{className:"defeat-overlay",children:[b.jsx("div",{className:"blood-overlay"}),b.jsx("div",{className:"victory-modal",children:b.jsxs("div",{className:"victory-content",children:[b.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),b.jsx("div",{children:"Defeat!"}),b.jsx("button",{onClick:Gl,children:"Try Again"})]})})]})]})};function oz(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const az=()=>{const[t,e]=D.useState("singleplayer"),n=()=>{window.location.href="/"};return b.jsx("div",{className:"chess-page",children:b.jsx("div",{className:"chess-content",children:t==="singleplayer"?b.jsx(RGe,{onClose:n}):b.jsx(Kte,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},PGe=new Jye,OGe=typeof window<"u"&&window.location.hostname.startsWith("chess."),kGe=()=>iFe("(max-width: 768px)")?b.jsx(sFe,{}):b.jsx(Q4e,{});u2.createRoot(document.getElementById("root")).render(b.jsx(Lo.StrictMode,{children:b.jsx(fye,{config:XX.wagmiConfig,children:b.jsx(mwe,{client:PGe,children:b.jsx(K4e,{children:b.jsx(G4e,{children:OGe?b.jsx(bS,{path:"/*",element:b.jsx(az,{})}):b.jsxs(b.Fragment,{children:[b.jsx(bS,{path:"/",element:b.jsx(kGe,{})}),b.jsx(bS,{path:"/chess",element:b.jsx(az,{})})]})})})})})}));export{oVe as $,Ye as A,pt as B,je as C,at as D,Jv as E,xD as F,gv as G,lc as H,C1e as I,Tn as J,lVe as K,_3 as L,us as M,b1e as N,ve as O,Cd as P,gS as Q,Mt as R,pc as S,Hi as T,eAe as U,eE as V,Ps as W,sVe as X,ls as Y,Hg as Z,ll as _,yS as a,CX as a0,C3 as a1,I0 as a2,Ks as a3,eqe as a4,Mu as a5,kl as a6,r_ as a7,nt as a8,jr as a9,vz as aA,GGe as aB,FE as aC,Pde as aD,tye as aE,ka as aF,Pa as aG,mK as aH,ege as aI,Wd as aa,lK as ab,wN as ac,ge as ad,qL as ae,Yr as af,Hhe as ag,hN as ah,rM as ai,Yhe as aj,kC as ak,xa as al,Sf as am,Hv as an,Ol as ao,Cke as ap,qqe as aq,_F as ar,eZ as as,fke as at,Ake as au,Vqe as av,Gqe as aw,XN as ax,Qqe as ay,Kqe as az,Pn as b,ze as c,ot as d,z as e,or as f,Uu as g,cVe as h,Gu as i,Oo as j,gt as k,Gi as l,a2e as m,wl as n,h8e as o,Qe as p,dl as q,aVe as r,mn as s,PQ as t,er as u,i4 as v,Vo as w,rVe as x,ti as y,Xs as z};
